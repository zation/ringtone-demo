{"version":3,"sources":["/Users/liuyang/projects/ringtone_new/node_modules/tinymce/plugins/autolink/index.js","/Users/liuyang/projects/ringtone_new/node_modules/tinymce/plugins/autolink/plugin.js"],"names":["global","tinymce","util","Tools","resolve","global$1","scopeIndex","container","index","nodeType","len","data","length","setStart","rng","offset","hasChildNodes","setStartBefore","setEnd","setEndAfter","parseCurrentLine","editor","endOffset","delimiter","end","endContainer","bookmark","text","prev","rngText","autoLinkPattern","getParam","getAutoLinkPattern","defaultLinkTarget","getDefaultLinkTarget","selection","getNode","tagName","getRng","cloneRange","startOffset","previousSibling","firstChild","nextSibling","nodeValue","start","toString","charCodeAt","rangeString","rangeEqualsDelimiterOrSpace","charAt","matches","trim","match","protocol","getDefaultLinkProtocol","test","getBookmark","setRng","execCommand","dom","setAttrib","moveToBookmark","nodeChanged","add","autoUrlDetectState","on","e","keyCode","handleEnter","browser","isIE","ex","handleEclipse","handleSpacebar","setup"],"mappings":"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","file":"884.441251bf.chunk.js","sourcesContent":["// Exports the \"autolink\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/autolink')\n//   ES2015:\n//     import 'tinymce/plugins/autolink'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.8.1 (2021-05-20)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var getAutoLinkPattern = function (editor) {\n      return editor.getParam('autolink_pattern', /^(https?:\\/\\/|ssh:\\/\\/|ftp:\\/\\/|file:\\/|www\\.|(?:mailto:)?[A-Z0-9._%+\\-]+@(?!.*@))(.+)$/i);\n    };\n    var getDefaultLinkTarget = function (editor) {\n      return editor.getParam('default_link_target', false);\n    };\n    var getDefaultLinkProtocol = function (editor) {\n      return editor.getParam('link_default_protocol', 'http', 'string');\n    };\n\n    var rangeEqualsDelimiterOrSpace = function (rangeString, delimiter) {\n      return rangeString === delimiter || rangeString === ' ' || rangeString.charCodeAt(0) === 160;\n    };\n    var handleEclipse = function (editor) {\n      parseCurrentLine(editor, -1, '(');\n    };\n    var handleSpacebar = function (editor) {\n      parseCurrentLine(editor, 0, '');\n    };\n    var handleEnter = function (editor) {\n      parseCurrentLine(editor, -1, '');\n    };\n    var scopeIndex = function (container, index) {\n      if (index < 0) {\n        index = 0;\n      }\n      if (container.nodeType === 3) {\n        var len = container.data.length;\n        if (index > len) {\n          index = len;\n        }\n      }\n      return index;\n    };\n    var setStart = function (rng, container, offset) {\n      if (container.nodeType !== 1 || container.hasChildNodes()) {\n        rng.setStart(container, scopeIndex(container, offset));\n      } else {\n        rng.setStartBefore(container);\n      }\n    };\n    var setEnd = function (rng, container, offset) {\n      if (container.nodeType !== 1 || container.hasChildNodes()) {\n        rng.setEnd(container, scopeIndex(container, offset));\n      } else {\n        rng.setEndAfter(container);\n      }\n    };\n    var parseCurrentLine = function (editor, endOffset, delimiter) {\n      var end, endContainer, bookmark, text, prev, len, rngText;\n      var autoLinkPattern = getAutoLinkPattern(editor);\n      var defaultLinkTarget = getDefaultLinkTarget(editor);\n      if (editor.selection.getNode().tagName === 'A') {\n        return;\n      }\n      var rng = editor.selection.getRng().cloneRange();\n      if (rng.startOffset < 5) {\n        prev = rng.endContainer.previousSibling;\n        if (!prev) {\n          if (!rng.endContainer.firstChild || !rng.endContainer.firstChild.nextSibling) {\n            return;\n          }\n          prev = rng.endContainer.firstChild.nextSibling;\n        }\n        len = prev.length;\n        setStart(rng, prev, len);\n        setEnd(rng, prev, len);\n        if (rng.endOffset < 5) {\n          return;\n        }\n        end = rng.endOffset;\n        endContainer = prev;\n      } else {\n        endContainer = rng.endContainer;\n        if (endContainer.nodeType !== 3 && endContainer.firstChild) {\n          while (endContainer.nodeType !== 3 && endContainer.firstChild) {\n            endContainer = endContainer.firstChild;\n          }\n          if (endContainer.nodeType === 3) {\n            setStart(rng, endContainer, 0);\n            setEnd(rng, endContainer, endContainer.nodeValue.length);\n          }\n        }\n        if (rng.endOffset === 1) {\n          end = 2;\n        } else {\n          end = rng.endOffset - 1 - endOffset;\n        }\n      }\n      var start = end;\n      do {\n        setStart(rng, endContainer, end >= 2 ? end - 2 : 0);\n        setEnd(rng, endContainer, end >= 1 ? end - 1 : 0);\n        end -= 1;\n        rngText = rng.toString();\n      } while (rngText !== ' ' && rngText !== '' && rngText.charCodeAt(0) !== 160 && end - 2 >= 0 && rngText !== delimiter);\n      if (rangeEqualsDelimiterOrSpace(rng.toString(), delimiter)) {\n        setStart(rng, endContainer, end);\n        setEnd(rng, endContainer, start);\n        end += 1;\n      } else if (rng.startOffset === 0) {\n        setStart(rng, endContainer, 0);\n        setEnd(rng, endContainer, start);\n      } else {\n        setStart(rng, endContainer, end);\n        setEnd(rng, endContainer, start);\n      }\n      text = rng.toString();\n      if (text.charAt(text.length - 1) === '.') {\n        setEnd(rng, endContainer, start - 1);\n      }\n      text = rng.toString().trim();\n      var matches = text.match(autoLinkPattern);\n      var protocol = getDefaultLinkProtocol(editor);\n      if (matches) {\n        if (matches[1] === 'www.') {\n          matches[1] = protocol + '://www.';\n        } else if (/@$/.test(matches[1]) && !/^mailto:/.test(matches[1])) {\n          matches[1] = 'mailto:' + matches[1];\n        }\n        bookmark = editor.selection.getBookmark();\n        editor.selection.setRng(rng);\n        editor.execCommand('createlink', false, matches[1] + matches[2]);\n        if (defaultLinkTarget !== false) {\n          editor.dom.setAttrib(editor.selection.getNode(), 'target', defaultLinkTarget);\n        }\n        editor.selection.moveToBookmark(bookmark);\n        editor.nodeChanged();\n      }\n    };\n    var setup = function (editor) {\n      var autoUrlDetectState;\n      editor.on('keydown', function (e) {\n        if (e.keyCode === 13) {\n          return handleEnter(editor);\n        }\n      });\n      if (global$1.browser.isIE()) {\n        editor.on('focus', function () {\n          if (!autoUrlDetectState) {\n            autoUrlDetectState = true;\n            try {\n              editor.execCommand('AutoUrlDetect', false, true);\n            } catch (ex) {\n            }\n          }\n        });\n        return;\n      }\n      editor.on('keypress', function (e) {\n        if (e.keyCode === 41) {\n          return handleEclipse(editor);\n        }\n      });\n      editor.on('keyup', function (e) {\n        if (e.keyCode === 32) {\n          return handleSpacebar(editor);\n        }\n      });\n    };\n\n    function Plugin () {\n      global.add('autolink', function (editor) {\n        setup(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n"],"sourceRoot":""}