(self["webpackChunkringtone"] = self["webpackChunkringtone"] || []).push([["vendors-node_modules_relient-admin_form_rules_js-node_modules_relient-admin_hooks_index_js"],{

/***/ "./node_modules/lodash/_arrayAggregator.js":
/*!*************************************************!*\
  !*** ./node_modules/lodash/_arrayAggregator.js ***!
  \*************************************************/
/***/ ((module) => {

/**
 * A specialized version of `baseAggregator` for arrays.
 *
 * @private
 * @param {Array} [array] The array to iterate over.
 * @param {Function} setter The function to set `accumulator` values.
 * @param {Function} iteratee The iteratee to transform keys.
 * @param {Object} accumulator The initial aggregated object.
 * @returns {Function} Returns `accumulator`.
 */
function arrayAggregator(array, setter, iteratee, accumulator) {
  var index = -1,
      length = array == null ? 0 : array.length;

  while (++index < length) {
    var value = array[index];
    setter(accumulator, value, iteratee(value), array);
  }
  return accumulator;
}

module.exports = arrayAggregator;


/***/ }),

/***/ "./node_modules/lodash/_asciiToArray.js":
/*!**********************************************!*\
  !*** ./node_modules/lodash/_asciiToArray.js ***!
  \**********************************************/
/***/ ((module) => {

/**
 * Converts an ASCII `string` to an array.
 *
 * @private
 * @param {string} string The string to convert.
 * @returns {Array} Returns the converted array.
 */
function asciiToArray(string) {
  return string.split('');
}

module.exports = asciiToArray;


/***/ }),

/***/ "./node_modules/lodash/_baseAggregator.js":
/*!************************************************!*\
  !*** ./node_modules/lodash/_baseAggregator.js ***!
  \************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var baseEach = __webpack_require__(/*! ./_baseEach */ "./node_modules/lodash/_baseEach.js");

/**
 * Aggregates elements of `collection` on `accumulator` with keys transformed
 * by `iteratee` and values set by `setter`.
 *
 * @private
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} setter The function to set `accumulator` values.
 * @param {Function} iteratee The iteratee to transform keys.
 * @param {Object} accumulator The initial aggregated object.
 * @returns {Function} Returns `accumulator`.
 */
function baseAggregator(collection, setter, iteratee, accumulator) {
  baseEach(collection, function(value, key, collection) {
    setter(accumulator, value, iteratee(value), collection);
  });
  return accumulator;
}

module.exports = baseAggregator;


/***/ }),

/***/ "./node_modules/lodash/_baseIsRegExp.js":
/*!**********************************************!*\
  !*** ./node_modules/lodash/_baseIsRegExp.js ***!
  \**********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var baseGetTag = __webpack_require__(/*! ./_baseGetTag */ "./node_modules/lodash/_baseGetTag.js"),
    isObjectLike = __webpack_require__(/*! ./isObjectLike */ "./node_modules/lodash/isObjectLike.js");

/** `Object#toString` result references. */
var regexpTag = '[object RegExp]';

/**
 * The base implementation of `_.isRegExp` without Node.js optimizations.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.
 */
function baseIsRegExp(value) {
  return isObjectLike(value) && baseGetTag(value) == regexpTag;
}

module.exports = baseIsRegExp;


/***/ }),

/***/ "./node_modules/lodash/_baseNth.js":
/*!*****************************************!*\
  !*** ./node_modules/lodash/_baseNth.js ***!
  \*****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var isIndex = __webpack_require__(/*! ./_isIndex */ "./node_modules/lodash/_isIndex.js");

/**
 * The base implementation of `_.nth` which doesn't coerce arguments.
 *
 * @private
 * @param {Array} array The array to query.
 * @param {number} n The index of the element to return.
 * @returns {*} Returns the nth element of `array`.
 */
function baseNth(array, n) {
  var length = array.length;
  if (!length) {
    return;
  }
  n += n < 0 ? length : 0;
  return isIndex(n, length) ? array[n] : undefined;
}

module.exports = baseNth;


/***/ }),

/***/ "./node_modules/lodash/_castSlice.js":
/*!*******************************************!*\
  !*** ./node_modules/lodash/_castSlice.js ***!
  \*******************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var baseSlice = __webpack_require__(/*! ./_baseSlice */ "./node_modules/lodash/_baseSlice.js");

/**
 * Casts `array` to a slice if it's needed.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {number} start The start position.
 * @param {number} [end=array.length] The end position.
 * @returns {Array} Returns the cast slice.
 */
function castSlice(array, start, end) {
  var length = array.length;
  end = end === undefined ? length : end;
  return (!start && end >= length) ? array : baseSlice(array, start, end);
}

module.exports = castSlice;


/***/ }),

/***/ "./node_modules/lodash/_createAggregator.js":
/*!**************************************************!*\
  !*** ./node_modules/lodash/_createAggregator.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var arrayAggregator = __webpack_require__(/*! ./_arrayAggregator */ "./node_modules/lodash/_arrayAggregator.js"),
    baseAggregator = __webpack_require__(/*! ./_baseAggregator */ "./node_modules/lodash/_baseAggregator.js"),
    baseIteratee = __webpack_require__(/*! ./_baseIteratee */ "./node_modules/lodash/_baseIteratee.js"),
    isArray = __webpack_require__(/*! ./isArray */ "./node_modules/lodash/isArray.js");

/**
 * Creates a function like `_.groupBy`.
 *
 * @private
 * @param {Function} setter The function to set accumulator values.
 * @param {Function} [initializer] The accumulator object initializer.
 * @returns {Function} Returns the new aggregator function.
 */
function createAggregator(setter, initializer) {
  return function(collection, iteratee) {
    var func = isArray(collection) ? arrayAggregator : baseAggregator,
        accumulator = initializer ? initializer() : {};

    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);
  };
}

module.exports = createAggregator;


/***/ }),

/***/ "./node_modules/lodash/_stringToArray.js":
/*!***********************************************!*\
  !*** ./node_modules/lodash/_stringToArray.js ***!
  \***********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var asciiToArray = __webpack_require__(/*! ./_asciiToArray */ "./node_modules/lodash/_asciiToArray.js"),
    hasUnicode = __webpack_require__(/*! ./_hasUnicode */ "./node_modules/lodash/_hasUnicode.js"),
    unicodeToArray = __webpack_require__(/*! ./_unicodeToArray */ "./node_modules/lodash/_unicodeToArray.js");

/**
 * Converts `string` to an array.
 *
 * @private
 * @param {string} string The string to convert.
 * @returns {Array} Returns the converted array.
 */
function stringToArray(string) {
  return hasUnicode(string)
    ? unicodeToArray(string)
    : asciiToArray(string);
}

module.exports = stringToArray;


/***/ }),

/***/ "./node_modules/lodash/_unicodeToArray.js":
/*!************************************************!*\
  !*** ./node_modules/lodash/_unicodeToArray.js ***!
  \************************************************/
/***/ ((module) => {

/** Used to compose unicode character classes. */
var rsAstralRange = '\\ud800-\\udfff',
    rsComboMarksRange = '\\u0300-\\u036f',
    reComboHalfMarksRange = '\\ufe20-\\ufe2f',
    rsComboSymbolsRange = '\\u20d0-\\u20ff',
    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,
    rsVarRange = '\\ufe0e\\ufe0f';

/** Used to compose unicode capture groups. */
var rsAstral = '[' + rsAstralRange + ']',
    rsCombo = '[' + rsComboRange + ']',
    rsFitz = '\\ud83c[\\udffb-\\udfff]',
    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',
    rsNonAstral = '[^' + rsAstralRange + ']',
    rsRegional = '(?:\\ud83c[\\udde6-\\uddff]){2}',
    rsSurrPair = '[\\ud800-\\udbff][\\udc00-\\udfff]',
    rsZWJ = '\\u200d';

/** Used to compose unicode regexes. */
var reOptMod = rsModifier + '?',
    rsOptVar = '[' + rsVarRange + ']?',
    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',
    rsSeq = rsOptVar + reOptMod + rsOptJoin,
    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';

/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */
var reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');

/**
 * Converts a Unicode `string` to an array.
 *
 * @private
 * @param {string} string The string to convert.
 * @returns {Array} Returns the converted array.
 */
function unicodeToArray(string) {
  return string.match(reUnicode) || [];
}

module.exports = unicodeToArray;


/***/ }),

/***/ "./node_modules/lodash/concat.js":
/*!***************************************!*\
  !*** ./node_modules/lodash/concat.js ***!
  \***************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var arrayPush = __webpack_require__(/*! ./_arrayPush */ "./node_modules/lodash/_arrayPush.js"),
    baseFlatten = __webpack_require__(/*! ./_baseFlatten */ "./node_modules/lodash/_baseFlatten.js"),
    copyArray = __webpack_require__(/*! ./_copyArray */ "./node_modules/lodash/_copyArray.js"),
    isArray = __webpack_require__(/*! ./isArray */ "./node_modules/lodash/isArray.js");

/**
 * Creates a new array concatenating `array` with any additional arrays
 * and/or values.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {Array} array The array to concatenate.
 * @param {...*} [values] The values to concatenate.
 * @returns {Array} Returns the new concatenated array.
 * @example
 *
 * var array = [1];
 * var other = _.concat(array, 2, [3], [[4]]);
 *
 * console.log(other);
 * // => [1, 2, 3, [4]]
 *
 * console.log(array);
 * // => [1]
 */
function concat() {
  var length = arguments.length;
  if (!length) {
    return [];
  }
  var args = Array(length - 1),
      array = arguments[0],
      index = length;

  while (index--) {
    args[index - 1] = arguments[index];
  }
  return arrayPush(isArray(array) ? copyArray(array) : [array], baseFlatten(args, 1));
}

module.exports = concat;


/***/ }),

/***/ "./node_modules/lodash/debounce.js":
/*!*****************************************!*\
  !*** ./node_modules/lodash/debounce.js ***!
  \*****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var isObject = __webpack_require__(/*! ./isObject */ "./node_modules/lodash/isObject.js"),
    now = __webpack_require__(/*! ./now */ "./node_modules/lodash/now.js"),
    toNumber = __webpack_require__(/*! ./toNumber */ "./node_modules/lodash/toNumber.js");

/** Error message constants. */
var FUNC_ERROR_TEXT = 'Expected a function';

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max,
    nativeMin = Math.min;

/**
 * Creates a debounced function that delays invoking `func` until after `wait`
 * milliseconds have elapsed since the last time the debounced function was
 * invoked. The debounced function comes with a `cancel` method to cancel
 * delayed `func` invocations and a `flush` method to immediately invoke them.
 * Provide `options` to indicate whether `func` should be invoked on the
 * leading and/or trailing edge of the `wait` timeout. The `func` is invoked
 * with the last arguments provided to the debounced function. Subsequent
 * calls to the debounced function return the result of the last `func`
 * invocation.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is
 * invoked on the trailing edge of the timeout only if the debounced function
 * is invoked more than once during the `wait` timeout.
 *
 * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
 * until to the next tick, similar to `setTimeout` with a timeout of `0`.
 *
 * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
 * for details over the differences between `_.debounce` and `_.throttle`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to debounce.
 * @param {number} [wait=0] The number of milliseconds to delay.
 * @param {Object} [options={}] The options object.
 * @param {boolean} [options.leading=false]
 *  Specify invoking on the leading edge of the timeout.
 * @param {number} [options.maxWait]
 *  The maximum time `func` is allowed to be delayed before it's invoked.
 * @param {boolean} [options.trailing=true]
 *  Specify invoking on the trailing edge of the timeout.
 * @returns {Function} Returns the new debounced function.
 * @example
 *
 * // Avoid costly calculations while the window size is in flux.
 * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
 *
 * // Invoke `sendMail` when clicked, debouncing subsequent calls.
 * jQuery(element).on('click', _.debounce(sendMail, 300, {
 *   'leading': true,
 *   'trailing': false
 * }));
 *
 * // Ensure `batchLog` is invoked once after 1 second of debounced calls.
 * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });
 * var source = new EventSource('/stream');
 * jQuery(source).on('message', debounced);
 *
 * // Cancel the trailing debounced invocation.
 * jQuery(window).on('popstate', debounced.cancel);
 */
function debounce(func, wait, options) {
  var lastArgs,
      lastThis,
      maxWait,
      result,
      timerId,
      lastCallTime,
      lastInvokeTime = 0,
      leading = false,
      maxing = false,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  wait = toNumber(wait) || 0;
  if (isObject(options)) {
    leading = !!options.leading;
    maxing = 'maxWait' in options;
    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }

  function invokeFunc(time) {
    var args = lastArgs,
        thisArg = lastThis;

    lastArgs = lastThis = undefined;
    lastInvokeTime = time;
    result = func.apply(thisArg, args);
    return result;
  }

  function leadingEdge(time) {
    // Reset any `maxWait` timer.
    lastInvokeTime = time;
    // Start the timer for the trailing edge.
    timerId = setTimeout(timerExpired, wait);
    // Invoke the leading edge.
    return leading ? invokeFunc(time) : result;
  }

  function remainingWait(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime,
        timeWaiting = wait - timeSinceLastCall;

    return maxing
      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)
      : timeWaiting;
  }

  function shouldInvoke(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime;

    // Either this is the first call, activity has stopped and we're at the
    // trailing edge, the system time has gone backwards and we're treating
    // it as the trailing edge, or we've hit the `maxWait` limit.
    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||
      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));
  }

  function timerExpired() {
    var time = now();
    if (shouldInvoke(time)) {
      return trailingEdge(time);
    }
    // Restart the timer.
    timerId = setTimeout(timerExpired, remainingWait(time));
  }

  function trailingEdge(time) {
    timerId = undefined;

    // Only invoke if we have `lastArgs` which means `func` has been
    // debounced at least once.
    if (trailing && lastArgs) {
      return invokeFunc(time);
    }
    lastArgs = lastThis = undefined;
    return result;
  }

  function cancel() {
    if (timerId !== undefined) {
      clearTimeout(timerId);
    }
    lastInvokeTime = 0;
    lastArgs = lastCallTime = lastThis = timerId = undefined;
  }

  function flush() {
    return timerId === undefined ? result : trailingEdge(now());
  }

  function debounced() {
    var time = now(),
        isInvoking = shouldInvoke(time);

    lastArgs = arguments;
    lastThis = this;
    lastCallTime = time;

    if (isInvoking) {
      if (timerId === undefined) {
        return leadingEdge(lastCallTime);
      }
      if (maxing) {
        // Handle invocations in a tight loop.
        clearTimeout(timerId);
        timerId = setTimeout(timerExpired, wait);
        return invokeFunc(lastCallTime);
      }
    }
    if (timerId === undefined) {
      timerId = setTimeout(timerExpired, wait);
    }
    return result;
  }
  debounced.cancel = cancel;
  debounced.flush = flush;
  return debounced;
}

module.exports = debounce;


/***/ }),

/***/ "./node_modules/lodash/fp/clone.js":
/*!*****************************************!*\
  !*** ./node_modules/lodash/fp/clone.js ***!
  \*****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var convert = __webpack_require__(/*! ./convert */ "./node_modules/lodash/fp/convert.js"),
    func = convert('clone', __webpack_require__(/*! ../clone */ "./node_modules/lodash/clone.js"), __webpack_require__(/*! ./_falseOptions */ "./node_modules/lodash/fp/_falseOptions.js"));

func.placeholder = __webpack_require__(/*! ./placeholder */ "./node_modules/lodash/fp/placeholder.js");
module.exports = func;


/***/ }),

/***/ "./node_modules/lodash/fp/concat.js":
/*!******************************************!*\
  !*** ./node_modules/lodash/fp/concat.js ***!
  \******************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var convert = __webpack_require__(/*! ./convert */ "./node_modules/lodash/fp/convert.js"),
    func = convert('concat', __webpack_require__(/*! ../concat */ "./node_modules/lodash/concat.js"));

func.placeholder = __webpack_require__(/*! ./placeholder */ "./node_modules/lodash/fp/placeholder.js");
module.exports = func;


/***/ }),

/***/ "./node_modules/lodash/fp/debounce.js":
/*!********************************************!*\
  !*** ./node_modules/lodash/fp/debounce.js ***!
  \********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var convert = __webpack_require__(/*! ./convert */ "./node_modules/lodash/fp/convert.js"),
    func = convert('debounce', __webpack_require__(/*! ../debounce */ "./node_modules/lodash/debounce.js"));

func.placeholder = __webpack_require__(/*! ./placeholder */ "./node_modules/lodash/fp/placeholder.js");
module.exports = func;


/***/ }),

/***/ "./node_modules/lodash/fp/includes.js":
/*!********************************************!*\
  !*** ./node_modules/lodash/fp/includes.js ***!
  \********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var convert = __webpack_require__(/*! ./convert */ "./node_modules/lodash/fp/convert.js"),
    func = convert('includes', __webpack_require__(/*! ../includes */ "./node_modules/lodash/includes.js"));

func.placeholder = __webpack_require__(/*! ./placeholder */ "./node_modules/lodash/fp/placeholder.js");
module.exports = func;


/***/ }),

/***/ "./node_modules/lodash/fp/isEqual.js":
/*!*******************************************!*\
  !*** ./node_modules/lodash/fp/isEqual.js ***!
  \*******************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var convert = __webpack_require__(/*! ./convert */ "./node_modules/lodash/fp/convert.js"),
    func = convert('isEqual', __webpack_require__(/*! ../isEqual */ "./node_modules/lodash/isEqual.js"));

func.placeholder = __webpack_require__(/*! ./placeholder */ "./node_modules/lodash/fp/placeholder.js");
module.exports = func;


/***/ }),

/***/ "./node_modules/lodash/fp/isFinite.js":
/*!********************************************!*\
  !*** ./node_modules/lodash/fp/isFinite.js ***!
  \********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var convert = __webpack_require__(/*! ./convert */ "./node_modules/lodash/fp/convert.js"),
    func = convert('isFinite', __webpack_require__(/*! ../isFinite */ "./node_modules/lodash/isFinite.js"), __webpack_require__(/*! ./_falseOptions */ "./node_modules/lodash/fp/_falseOptions.js"));

func.placeholder = __webpack_require__(/*! ./placeholder */ "./node_modules/lodash/fp/placeholder.js");
module.exports = func;


/***/ }),

/***/ "./node_modules/lodash/fp/keyBy.js":
/*!*****************************************!*\
  !*** ./node_modules/lodash/fp/keyBy.js ***!
  \*****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var convert = __webpack_require__(/*! ./convert */ "./node_modules/lodash/fp/convert.js"),
    func = convert('keyBy', __webpack_require__(/*! ../keyBy */ "./node_modules/lodash/keyBy.js"));

func.placeholder = __webpack_require__(/*! ./placeholder */ "./node_modules/lodash/fp/placeholder.js");
module.exports = func;


/***/ }),

/***/ "./node_modules/lodash/fp/nth.js":
/*!***************************************!*\
  !*** ./node_modules/lodash/fp/nth.js ***!
  \***************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var convert = __webpack_require__(/*! ./convert */ "./node_modules/lodash/fp/convert.js"),
    func = convert('nth', __webpack_require__(/*! ../nth */ "./node_modules/lodash/nth.js"));

func.placeholder = __webpack_require__(/*! ./placeholder */ "./node_modules/lodash/fp/placeholder.js");
module.exports = func;


/***/ }),

/***/ "./node_modules/lodash/fp/omitBy.js":
/*!******************************************!*\
  !*** ./node_modules/lodash/fp/omitBy.js ***!
  \******************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var convert = __webpack_require__(/*! ./convert */ "./node_modules/lodash/fp/convert.js"),
    func = convert('omitBy', __webpack_require__(/*! ../omitBy */ "./node_modules/lodash/omitBy.js"));

func.placeholder = __webpack_require__(/*! ./placeholder */ "./node_modules/lodash/fp/placeholder.js");
module.exports = func;


/***/ }),

/***/ "./node_modules/lodash/fp/split.js":
/*!*****************************************!*\
  !*** ./node_modules/lodash/fp/split.js ***!
  \*****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var convert = __webpack_require__(/*! ./convert */ "./node_modules/lodash/fp/convert.js"),
    func = convert('split', __webpack_require__(/*! ../split */ "./node_modules/lodash/split.js"));

func.placeholder = __webpack_require__(/*! ./placeholder */ "./node_modules/lodash/fp/placeholder.js");
module.exports = func;


/***/ }),

/***/ "./node_modules/lodash/fp/toUpper.js":
/*!*******************************************!*\
  !*** ./node_modules/lodash/fp/toUpper.js ***!
  \*******************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var convert = __webpack_require__(/*! ./convert */ "./node_modules/lodash/fp/convert.js"),
    func = convert('toUpper', __webpack_require__(/*! ../toUpper */ "./node_modules/lodash/toUpper.js"), __webpack_require__(/*! ./_falseOptions */ "./node_modules/lodash/fp/_falseOptions.js"));

func.placeholder = __webpack_require__(/*! ./placeholder */ "./node_modules/lodash/fp/placeholder.js");
module.exports = func;


/***/ }),

/***/ "./node_modules/lodash/includes.js":
/*!*****************************************!*\
  !*** ./node_modules/lodash/includes.js ***!
  \*****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var baseIndexOf = __webpack_require__(/*! ./_baseIndexOf */ "./node_modules/lodash/_baseIndexOf.js"),
    isArrayLike = __webpack_require__(/*! ./isArrayLike */ "./node_modules/lodash/isArrayLike.js"),
    isString = __webpack_require__(/*! ./isString */ "./node_modules/lodash/isString.js"),
    toInteger = __webpack_require__(/*! ./toInteger */ "./node_modules/lodash/toInteger.js"),
    values = __webpack_require__(/*! ./values */ "./node_modules/lodash/values.js");

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max;

/**
 * Checks if `value` is in `collection`. If `collection` is a string, it's
 * checked for a substring of `value`, otherwise
 * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
 * is used for equality comparisons. If `fromIndex` is negative, it's used as
 * the offset from the end of `collection`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Collection
 * @param {Array|Object|string} collection The collection to inspect.
 * @param {*} value The value to search for.
 * @param {number} [fromIndex=0] The index to search from.
 * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.
 * @returns {boolean} Returns `true` if `value` is found, else `false`.
 * @example
 *
 * _.includes([1, 2, 3], 1);
 * // => true
 *
 * _.includes([1, 2, 3], 1, 2);
 * // => false
 *
 * _.includes({ 'a': 1, 'b': 2 }, 1);
 * // => true
 *
 * _.includes('abcd', 'bc');
 * // => true
 */
function includes(collection, value, fromIndex, guard) {
  collection = isArrayLike(collection) ? collection : values(collection);
  fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;

  var length = collection.length;
  if (fromIndex < 0) {
    fromIndex = nativeMax(length + fromIndex, 0);
  }
  return isString(collection)
    ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)
    : (!!length && baseIndexOf(collection, value, fromIndex) > -1);
}

module.exports = includes;


/***/ }),

/***/ "./node_modules/lodash/isFinite.js":
/*!*****************************************!*\
  !*** ./node_modules/lodash/isFinite.js ***!
  \*****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var root = __webpack_require__(/*! ./_root */ "./node_modules/lodash/_root.js");

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeIsFinite = root.isFinite;

/**
 * Checks if `value` is a finite primitive number.
 *
 * **Note:** This method is based on
 * [`Number.isFinite`](https://mdn.io/Number/isFinite).
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a finite number, else `false`.
 * @example
 *
 * _.isFinite(3);
 * // => true
 *
 * _.isFinite(Number.MIN_VALUE);
 * // => true
 *
 * _.isFinite(Infinity);
 * // => false
 *
 * _.isFinite('3');
 * // => false
 */
function isFinite(value) {
  return typeof value == 'number' && nativeIsFinite(value);
}

module.exports = isFinite;


/***/ }),

/***/ "./node_modules/lodash/isRegExp.js":
/*!*****************************************!*\
  !*** ./node_modules/lodash/isRegExp.js ***!
  \*****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var baseIsRegExp = __webpack_require__(/*! ./_baseIsRegExp */ "./node_modules/lodash/_baseIsRegExp.js"),
    baseUnary = __webpack_require__(/*! ./_baseUnary */ "./node_modules/lodash/_baseUnary.js"),
    nodeUtil = __webpack_require__(/*! ./_nodeUtil */ "./node_modules/lodash/_nodeUtil.js");

/* Node.js helper references. */
var nodeIsRegExp = nodeUtil && nodeUtil.isRegExp;

/**
 * Checks if `value` is classified as a `RegExp` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.
 * @example
 *
 * _.isRegExp(/abc/);
 * // => true
 *
 * _.isRegExp('/abc/');
 * // => false
 */
var isRegExp = nodeIsRegExp ? baseUnary(nodeIsRegExp) : baseIsRegExp;

module.exports = isRegExp;


/***/ }),

/***/ "./node_modules/lodash/keyBy.js":
/*!**************************************!*\
  !*** ./node_modules/lodash/keyBy.js ***!
  \**************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var baseAssignValue = __webpack_require__(/*! ./_baseAssignValue */ "./node_modules/lodash/_baseAssignValue.js"),
    createAggregator = __webpack_require__(/*! ./_createAggregator */ "./node_modules/lodash/_createAggregator.js");

/**
 * Creates an object composed of keys generated from the results of running
 * each element of `collection` thru `iteratee`. The corresponding value of
 * each key is the last element responsible for generating the key. The
 * iteratee is invoked with one argument: (value).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Collection
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} [iteratee=_.identity] The iteratee to transform keys.
 * @returns {Object} Returns the composed aggregate object.
 * @example
 *
 * var array = [
 *   { 'dir': 'left', 'code': 97 },
 *   { 'dir': 'right', 'code': 100 }
 * ];
 *
 * _.keyBy(array, function(o) {
 *   return String.fromCharCode(o.code);
 * });
 * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }
 *
 * _.keyBy(array, 'dir');
 * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }
 */
var keyBy = createAggregator(function(result, value, key) {
  baseAssignValue(result, key, value);
});

module.exports = keyBy;


/***/ }),

/***/ "./node_modules/lodash/now.js":
/*!************************************!*\
  !*** ./node_modules/lodash/now.js ***!
  \************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var root = __webpack_require__(/*! ./_root */ "./node_modules/lodash/_root.js");

/**
 * Gets the timestamp of the number of milliseconds that have elapsed since
 * the Unix epoch (1 January 1970 00:00:00 UTC).
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Date
 * @returns {number} Returns the timestamp.
 * @example
 *
 * _.defer(function(stamp) {
 *   console.log(_.now() - stamp);
 * }, _.now());
 * // => Logs the number of milliseconds it took for the deferred invocation.
 */
var now = function() {
  return root.Date.now();
};

module.exports = now;


/***/ }),

/***/ "./node_modules/lodash/nth.js":
/*!************************************!*\
  !*** ./node_modules/lodash/nth.js ***!
  \************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var baseNth = __webpack_require__(/*! ./_baseNth */ "./node_modules/lodash/_baseNth.js"),
    toInteger = __webpack_require__(/*! ./toInteger */ "./node_modules/lodash/toInteger.js");

/**
 * Gets the element at index `n` of `array`. If `n` is negative, the nth
 * element from the end is returned.
 *
 * @static
 * @memberOf _
 * @since 4.11.0
 * @category Array
 * @param {Array} array The array to query.
 * @param {number} [n=0] The index of the element to return.
 * @returns {*} Returns the nth element of `array`.
 * @example
 *
 * var array = ['a', 'b', 'c', 'd'];
 *
 * _.nth(array, 1);
 * // => 'b'
 *
 * _.nth(array, -2);
 * // => 'c';
 */
function nth(array, n) {
  return (array && array.length) ? baseNth(array, toInteger(n)) : undefined;
}

module.exports = nth;


/***/ }),

/***/ "./node_modules/lodash/omitBy.js":
/*!***************************************!*\
  !*** ./node_modules/lodash/omitBy.js ***!
  \***************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var baseIteratee = __webpack_require__(/*! ./_baseIteratee */ "./node_modules/lodash/_baseIteratee.js"),
    negate = __webpack_require__(/*! ./negate */ "./node_modules/lodash/negate.js"),
    pickBy = __webpack_require__(/*! ./pickBy */ "./node_modules/lodash/pickBy.js");

/**
 * The opposite of `_.pickBy`; this method creates an object composed of
 * the own and inherited enumerable string keyed properties of `object` that
 * `predicate` doesn't return truthy for. The predicate is invoked with two
 * arguments: (value, key).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Object
 * @param {Object} object The source object.
 * @param {Function} [predicate=_.identity] The function invoked per property.
 * @returns {Object} Returns the new object.
 * @example
 *
 * var object = { 'a': 1, 'b': '2', 'c': 3 };
 *
 * _.omitBy(object, _.isNumber);
 * // => { 'b': '2' }
 */
function omitBy(object, predicate) {
  return pickBy(object, negate(baseIteratee(predicate)));
}

module.exports = omitBy;


/***/ }),

/***/ "./node_modules/lodash/pickBy.js":
/*!***************************************!*\
  !*** ./node_modules/lodash/pickBy.js ***!
  \***************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var arrayMap = __webpack_require__(/*! ./_arrayMap */ "./node_modules/lodash/_arrayMap.js"),
    baseIteratee = __webpack_require__(/*! ./_baseIteratee */ "./node_modules/lodash/_baseIteratee.js"),
    basePickBy = __webpack_require__(/*! ./_basePickBy */ "./node_modules/lodash/_basePickBy.js"),
    getAllKeysIn = __webpack_require__(/*! ./_getAllKeysIn */ "./node_modules/lodash/_getAllKeysIn.js");

/**
 * Creates an object composed of the `object` properties `predicate` returns
 * truthy for. The predicate is invoked with two arguments: (value, key).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Object
 * @param {Object} object The source object.
 * @param {Function} [predicate=_.identity] The function invoked per property.
 * @returns {Object} Returns the new object.
 * @example
 *
 * var object = { 'a': 1, 'b': '2', 'c': 3 };
 *
 * _.pickBy(object, _.isNumber);
 * // => { 'a': 1, 'c': 3 }
 */
function pickBy(object, predicate) {
  if (object == null) {
    return {};
  }
  var props = arrayMap(getAllKeysIn(object), function(prop) {
    return [prop];
  });
  predicate = baseIteratee(predicate);
  return basePickBy(object, props, function(value, path) {
    return predicate(value, path[0]);
  });
}

module.exports = pickBy;


/***/ }),

/***/ "./node_modules/lodash/split.js":
/*!**************************************!*\
  !*** ./node_modules/lodash/split.js ***!
  \**************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var baseToString = __webpack_require__(/*! ./_baseToString */ "./node_modules/lodash/_baseToString.js"),
    castSlice = __webpack_require__(/*! ./_castSlice */ "./node_modules/lodash/_castSlice.js"),
    hasUnicode = __webpack_require__(/*! ./_hasUnicode */ "./node_modules/lodash/_hasUnicode.js"),
    isIterateeCall = __webpack_require__(/*! ./_isIterateeCall */ "./node_modules/lodash/_isIterateeCall.js"),
    isRegExp = __webpack_require__(/*! ./isRegExp */ "./node_modules/lodash/isRegExp.js"),
    stringToArray = __webpack_require__(/*! ./_stringToArray */ "./node_modules/lodash/_stringToArray.js"),
    toString = __webpack_require__(/*! ./toString */ "./node_modules/lodash/toString.js");

/** Used as references for the maximum length and index of an array. */
var MAX_ARRAY_LENGTH = 4294967295;

/**
 * Splits `string` by `separator`.
 *
 * **Note:** This method is based on
 * [`String#split`](https://mdn.io/String/split).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category String
 * @param {string} [string=''] The string to split.
 * @param {RegExp|string} separator The separator pattern to split by.
 * @param {number} [limit] The length to truncate results to.
 * @returns {Array} Returns the string segments.
 * @example
 *
 * _.split('a-b-c', '-', 2);
 * // => ['a', 'b']
 */
function split(string, separator, limit) {
  if (limit && typeof limit != 'number' && isIterateeCall(string, separator, limit)) {
    separator = limit = undefined;
  }
  limit = limit === undefined ? MAX_ARRAY_LENGTH : limit >>> 0;
  if (!limit) {
    return [];
  }
  string = toString(string);
  if (string && (
        typeof separator == 'string' ||
        (separator != null && !isRegExp(separator))
      )) {
    separator = baseToString(separator);
    if (!separator && hasUnicode(string)) {
      return castSlice(stringToArray(string), 0, limit);
    }
  }
  return string.split(separator, limit);
}

module.exports = split;


/***/ }),

/***/ "./node_modules/lodash/toUpper.js":
/*!****************************************!*\
  !*** ./node_modules/lodash/toUpper.js ***!
  \****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var toString = __webpack_require__(/*! ./toString */ "./node_modules/lodash/toString.js");

/**
 * Converts `string`, as a whole, to upper case just like
 * [String#toUpperCase](https://mdn.io/toUpperCase).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category String
 * @param {string} [string=''] The string to convert.
 * @returns {string} Returns the upper cased string.
 * @example
 *
 * _.toUpper('--foo-bar--');
 * // => '--FOO-BAR--'
 *
 * _.toUpper('fooBar');
 * // => 'FOOBAR'
 *
 * _.toUpper('__foo_bar__');
 * // => '__FOO_BAR__'
 */
function toUpper(value) {
  return toString(value).toUpperCase();
}

module.exports = toUpper;


/***/ }),

/***/ "./node_modules/relient-admin/constants/pagination.js":
/*!************************************************************!*\
  !*** ./node_modules/relient-admin/constants/pagination.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DEFAULT_SORT = exports.DEFAULT_SIZE = exports.ALL_SIZE = exports.DEFAULT_PAGE = void 0;
var DEFAULT_PAGE = 0;
exports.DEFAULT_PAGE = DEFAULT_PAGE;
var ALL_SIZE = 2147483647;
exports.ALL_SIZE = ALL_SIZE;
var DEFAULT_SIZE = 20;
exports.DEFAULT_SIZE = DEFAULT_SIZE;
var DEFAULT_SORT = 'createdAt,desc';
exports.DEFAULT_SORT = DEFAULT_SORT;

/***/ }),

/***/ "./node_modules/relient-admin/form/rules.js":
/*!**************************************************!*\
  !*** ./node_modules/relient-admin/form/rules.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.createPriceRule = exports.createPositiveNumberRule = exports.createSameAsRule = void 0;

var _split2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/split */ "./node_modules/lodash/fp/split.js"));

var _size2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/size */ "./node_modules/lodash/fp/size.js"));

var _nth2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/nth */ "./node_modules/lodash/fp/nth.js"));

var _isNil2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/isNil */ "./node_modules/lodash/fp/isNil.js"));

var _isFinite2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/isFinite */ "./node_modules/lodash/fp/isFinite.js"));

var _flow2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/flow */ "./node_modules/lodash/fp/flow.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = void 0 && (void 0).__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function () {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) try {
      if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
      if (y = 0, t) op = [op[0] & 2, t.value];

      switch (op[0]) {
        case 0:
        case 1:
          t = op;
          break;

        case 4:
          _.label++;
          return {
            value: op[1],
            done: false
          };

        case 5:
          _.label++;
          y = op[1];
          op = [0];
          continue;

        case 7:
          op = _.ops.pop();

          _.trys.pop();

          continue;

        default:
          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
            _ = 0;
            continue;
          }

          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
            _.label = op[1];
            break;
          }

          if (op[0] === 6 && _.label < t[1]) {
            _.label = t[1];
            t = op;
            break;
          }

          if (t && _.label < t[2]) {
            _.label = t[2];

            _.ops.push(op);

            break;
          }

          if (t[2]) _.ops.pop();

          _.trys.pop();

          continue;
      }

      op = body.call(thisArg, _);
    } catch (e) {
      op = [6, e];
      y = 0;
    } finally {
      f = t = 0;
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};
/* eslint-disable @typescript-eslint/no-throw-literal */


var createSameAsRule = function (i18n) {
  return function (messageKey) {
    return function (targetNamePath, targetLabel) {
      return function (_a) {
        var getFieldValue = _a.getFieldValue;
        return {
          validator: function (rule, value) {
            return __awaiter(this, void 0, void 0, function () {
              return __generator(this, function (_a) {
                if (value && getFieldValue(targetNamePath) !== value) {
                  throw {
                    errors: [{
                      message: i18n(messageKey, {
                        targetLabel: targetLabel,
                        value: value
                      })
                    }]
                  };
                }

                return [2
                /*return*/
                ];
              });
            });
          }
        };
      };
    };
  };
};

exports.createSameAsRule = createSameAsRule;

var createPositiveNumberRule = function (i18n) {
  return function (messageKey) {
    return {
      validator: function (rule, value) {
        return __awaiter(this, void 0, void 0, function () {
          return __generator(this, function (_a) {
            if (value !== '' && Number(value) <= 0) {
              throw {
                errors: [{
                  message: i18n(messageKey, {
                    value: value
                  })
                }]
              };
            }

            return [2
            /*return*/
            ];
          });
        });
      }
    };
  };
};

exports.createPositiveNumberRule = createPositiveNumberRule;

var createPriceRule = function (i18n) {
  return function (messageKey) {
    return {
      validator: function (rule, value) {
        return __awaiter(this, void 0, void 0, function () {
          return __generator(this, function (_a) {
            if (value === '' || (0, _isNil2.default)(value)) {
              return [2
              /*return*/
              , undefined];
            }

            if (!(0, _isFinite2.default)(Number(value))) {
              throw {
                errors: [{
                  message: i18n(messageKey, {
                    value: value
                  })
                }]
              };
            }

            if (typeof value === 'string' && Number(value) > 0 && (0, _flow2.default)((0, _split2.default)('.'), (0, _nth2.default)(1), _size2.default)(value) <= 2) {
              return [2
              /*return*/
              , undefined];
            }

            throw {
              errors: [{
                message: i18n(messageKey, {
                  value: value
                })
              }]
            };
          });
        });
      }
    };
  };
};

exports.createPriceRule = createPriceRule;

/***/ }),

/***/ "./node_modules/relient-admin/hooks/index.js":
/*!***************************************************!*\
  !*** ./node_modules/relient-admin/hooks/index.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
Object.defineProperty(exports, "useAPITable", ({
  enumerable: true,
  get: function () {
    return _useApiTable.default;
  }
}));
Object.defineProperty(exports, "useLocalTable", ({
  enumerable: true,
  get: function () {
    return _useLocalTable.default;
  }
}));
Object.defineProperty(exports, "useForm", ({
  enumerable: true,
  get: function () {
    return _useForm.default;
  }
}));
Object.defineProperty(exports, "useIsFormEditing", ({
  enumerable: true,
  get: function () {
    return _useIsFormEditing.default;
  }
}));
Object.defineProperty(exports, "useDetails", ({
  enumerable: true,
  get: function () {
    return _useDetails.default;
  }
}));
Object.defineProperty(exports, "useTableFilter", ({
  enumerable: true,
  get: function () {
    return _useTableFilter.default;
  }
}));
Object.defineProperty(exports, "useTableSearch", ({
  enumerable: true,
  get: function () {
    return _useTableSearch.default;
  }
}));

var _useApiTable = _interopRequireDefault(__webpack_require__(/*! ./use-api-table */ "./node_modules/relient-admin/hooks/use-api-table.js"));

var _useLocalTable = _interopRequireDefault(__webpack_require__(/*! ./use-local-table */ "./node_modules/relient-admin/hooks/use-local-table.js"));

var _useForm = _interopRequireDefault(__webpack_require__(/*! ./use-form */ "./node_modules/relient-admin/hooks/use-form.js"));

var _useIsFormEditing = _interopRequireDefault(__webpack_require__(/*! ./use-is-form-editing */ "./node_modules/relient-admin/hooks/use-is-form-editing.js"));

var _useDetails = _interopRequireDefault(__webpack_require__(/*! ./use-details */ "./node_modules/relient-admin/hooks/use-details.js"));

var _useTableFilter = _interopRequireDefault(__webpack_require__(/*! ./use-table-filter */ "./node_modules/relient-admin/hooks/use-table-filter.js"));

var _useTableSearch = _interopRequireDefault(__webpack_require__(/*! ./use-table-search */ "./node_modules/relient-admin/hooks/use-table-search.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./node_modules/relient-admin/hooks/use-api-table.js":
/*!***********************************************************!*\
  !*** ./node_modules/relient-admin/hooks/use-api-table.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.default = useApiTable;

var _message2 = _interopRequireDefault(__webpack_require__(/*! antd/lib/message */ "./node_modules/antd/lib/message/index.js"));

var _isArray2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/isArray */ "./node_modules/lodash/fp/isArray.js"));

var _join2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/join */ "./node_modules/lodash/fp/join.js"));

var _reject2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/reject */ "./node_modules/lodash/fp/reject.js"));

var _reduce2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/reduce */ "./node_modules/lodash/fp/reduce.js"));

var _propEq2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/propEq */ "./node_modules/lodash/fp/propEq.js"));

var _prop2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/prop */ "./node_modules/lodash/fp/prop.js"));

var _omitBy2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/omitBy */ "./node_modules/lodash/fp/omitBy.js"));

var _mapValues2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/mapValues */ "./node_modules/lodash/fp/mapValues.js"));

var _map2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/map */ "./node_modules/lodash/fp/map.js"));

var _keyBy2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/keyBy */ "./node_modules/lodash/fp/keyBy.js"));

var _isNil2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/isNil */ "./node_modules/lodash/fp/isNil.js"));

var _isFunction2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/isFunction */ "./node_modules/lodash/fp/isFunction.js"));

var _flow2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/flow */ "./node_modules/lodash/fp/flow.js"));

var _find2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/find */ "./node_modules/lodash/fp/find.js"));

var _debounce2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/debounce */ "./node_modules/lodash/fp/debounce.js"));

var _concat2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/concat */ "./node_modules/lodash/fp/concat.js"));

var _react = _interopRequireWildcard(__webpack_require__(/*! react */ "./node_modules/react/index.js"));

var _reactRedux = __webpack_require__(/*! react-redux */ "./node_modules/react-redux/es/index.js");

var _i18n = __webpack_require__(/*! relient/i18n */ "./node_modules/relient/i18n.js");

var _pagination = __webpack_require__(/*! ../constants/pagination */ "./node_modules/relient-admin/constants/pagination.js");

var _tableHeader = _interopRequireDefault(__webpack_require__(/*! ../components/table-header */ "./node_modules/relient-admin/components/table-header.js"));

var _useBasicTable = _interopRequireWildcard(__webpack_require__(/*! ./use-basic-table */ "./node_modules/relient-admin/hooks/use-basic-table.js"));

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var __assign = void 0 && (void 0).__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = void 0 && (void 0).__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function () {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) try {
      if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
      if (y = 0, t) op = [op[0] & 2, t.value];

      switch (op[0]) {
        case 0:
        case 1:
          t = op;
          break;

        case 4:
          _.label++;
          return {
            value: op[1],
            done: false
          };

        case 5:
          _.label++;
          y = op[1];
          op = [0];
          continue;

        case 7:
          op = _.ops.pop();

          _.trys.pop();

          continue;

        default:
          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
            _ = 0;
            continue;
          }

          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
            _.label = op[1];
            break;
          }

          if (op[0] === 6 && _.label < t[1]) {
            _.label = t[1];
            t = op;
            break;
          }

          if (t && _.label < t[2]) {
            _.label = t[2];

            _.ops.push(op);

            break;
          }

          if (t[2]) _.ops.pop();

          _.trys.pop();

          continue;
      }

      op = body.call(thisArg, _);
    } catch (e) {
      op = [6, e];
      y = 0;
    } finally {
      f = t = 0;
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};

var __rest = void 0 && (void 0).__rest || function (s, e) {
  var t = {};

  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];

  if (s != null && typeof Object.getOwnPropertySymbols === "function") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];
  }
  return t;
};

var omitEmpty = (0, _omitBy2.default)(function (val) {
  return (0, _isNil2.default)(val) || val === '';
});
var getFilterParams = (0, _flow2.default)((0, _keyBy2.default)('dataKey'), (0, _mapValues2.default)(function (_a) {
  var value = _a.value;

  if ((0, _isArray2.default)(value)) {
    return (0, _join2.default)(',')(value);
  }

  return value;
}));
var getDateParams = (0, _reduce2.default)(function (result, _a) {
  var _b;

  var dataKey = _a.dataKey,
      value = _a.value;

  if (value && value.length > 1) {
    return __assign(__assign({}, result), (_b = {}, _b[dataKey + "After"] = new Date(value[0]).toISOString(), _b[dataKey + "Before"] = new Date(value[1]).toISOString(), _b));
  }

  return result;
}, {});

function onFetch(queryValue, queryField, readAction, setPaginationData, size, filterValues, dateValues, page, setIsLoading, fussyKey) {
  return __awaiter(this, void 0, void 0, function () {
    var _a, content, number, newSize, totalElements;

    var _b;

    return __generator(this, function (_c) {
      switch (_c.label) {
        case 0:
          setIsLoading(true);
          return [4
          /*yield*/
          , readAction(omitEmpty(__assign(__assign((_b = {}, _b[fussyKey || queryField] = queryValue, _b.size = size, _b.page = page, _b), getFilterParams(filterValues)), getDateParams(dateValues))))];

        case 1:
          _a = _c.sent(), content = _a.content, number = _a.number, newSize = _a.size, totalElements = _a.totalElements;
          setIsLoading(false);
          setPaginationData({
            current: number,
            size: newSize,
            total: totalElements,
            ids: (0, _map2.default)((0, _prop2.default)('id'))(content)
          });
          return [2
          /*return*/
          ];
      }
    });
  });
}

var onQueryFetch = (0, _debounce2.default)(500, onFetch);

function useApiTable(_a) {
  var _this = this;

  var query = _a.query,
      showReset = _a.showReset,
      filters = _a.filters,
      createButton = _a.createButton,
      datePickers = _a.datePickers,
      getDataSource = _a.getDataSource,
      pagination = _a.pagination,
      paginationInitialData = _a.paginationInitialData,
      _b = _a.paginationInitialData,
      initialCurrent = _b.current,
      initialTotal = _b.total,
      initialIds = _b.ids,
      initialSize = _b.size,
      readAction = _a.readAction,
      creator = _a.creator,
      editor = _a.editor,
      details = _a.details;

  var _c = query || {},
      onFieldChange = _c.onFieldChange,
      onValueChange = _c.onValueChange,
      fields = _c.fields,
      width = _c.width,
      placeholder = _c.placeholder,
      fussyKey = _c.fussyKey;

  var _d = creator || {},
      creatorSubmit = _d.onSubmit,
      creatorOnClose = _d.onClose,
      creatorOnOpen = _d.onOpen;

  var _e = editor || {},
      editorSubmit = _e.onSubmit,
      shouldReload = _e.shouldReload,
      editorOnClose = _e.onClose,
      editorOnOpen = _e.onOpen,
      getEditorInitialValues = _e.getInitialValues;

  var _f = details || {},
      getDetailsDataSource = _f.getDataSource,
      detailsOnOpen = _f.onOpen,
      detailsOnClose = _f.onClose;

  var _g = (0, _react.useState)(paginationInitialData),
      paginationData = _g[0],
      setPaginationData = _g[1];

  (0, _react.useEffect)(function () {
    if (initialCurrent !== paginationData.current || initialTotal !== paginationData.total || (0, _join2.default)(',')(initialIds) !== (0, _join2.default)(',')(paginationData.ids) || initialSize !== paginationData.size) {
      setPaginationData(paginationInitialData);
    }
  }, [initialSize, initialCurrent, initialTotal, (0, _join2.default)(',')(initialIds)]);
  var data = (0, _reactRedux.useSelector)(function (state) {
    return getDataSource(state)(paginationData.ids);
  });

  var _h = (0, _react.useState)(false),
      isLoading = _h[0],
      setIsLoading = _h[1];

  var i18n = (0, _i18n.useI18N)();

  var _j = (0, _useBasicTable.default)({
    fields: fields,
    filters: filters,
    editorOnOpen: editorOnOpen,
    editorOnClose: editorOnClose,
    creatorOnOpen: creatorOnOpen,
    creatorOnClose: creatorOnClose,
    detailsOnClose: detailsOnClose,
    detailsOnOpen: detailsOnOpen
  }),
      dateValues = _j.dateValues,
      setDateValues = _j.setDateValues,
      queryField = _j.queryField,
      setQueryField = _j.setQueryField,
      queryValue = _j.queryValue,
      setQueryValue = _j.setQueryValue,
      filterValues = _j.filterValues,
      setFilterValues = _j.setFilterValues,
      creatorVisible = _j.creatorVisible,
      editorVisible = _j.editorVisible,
      editItem = _j.editItem,
      openCreator = _j.openCreator,
      closeCreator = _j.closeCreator,
      openEditor = _j.openEditor,
      closeEditor = _j.closeEditor,
      reset = _j.reset,
      defaultQueryField = _j.defaultQueryField,
      defaultFilterValues = _j.defaultFilterValues,
      openDetails = _j.openDetails,
      closeDetails = _j.closeDetails,
      detailsVisible = _j.detailsVisible,
      detailsItem = _j.detailsItem;

  var onQueryFieldChange = (0, _react.useCallback)(function (fieldKey) {
    return __awaiter(_this, void 0, void 0, function () {
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            setQueryField(fieldKey);
            setQueryValue('');

            if ((0, _isFunction2.default)(onFieldChange)) {
              onFieldChange(fieldKey);
            }

            if ((0, _isFunction2.default)(onValueChange)) {
              onValueChange('');
            }

            return [4
            /*yield*/
            , onFetch(null, fieldKey, readAction, setPaginationData, paginationData.size, filterValues, dateValues, _pagination.DEFAULT_PAGE, setIsLoading, fussyKey)];

          case 1:
            _a.sent();

            return [2
            /*return*/
            ];
        }
      });
    });
  }, [readAction, paginationData.size, filterValues, dateValues, onFieldChange, onValueChange, fussyKey]);
  var onQueryValueChange = (0, _react.useCallback)(function (_a) {
    var value = _a.target.value;

    if ((0, _isFunction2.default)(onValueChange)) {
      onValueChange(value);
    }

    setQueryValue(value);
    onQueryFetch(value, queryField, readAction, setPaginationData, paginationData.size, filterValues, dateValues, _pagination.DEFAULT_PAGE, setIsLoading, fussyKey);
  }, [onValueChange, queryField, readAction, paginationData.size, filterValues, dateValues, fussyKey]);
  var onFilterValueChange = (0, _react.useCallback)(function (value, dataKey) {
    return __awaiter(_this, void 0, void 0, function () {
      var onChange, newFilterValues;
      return __generator(this, function (_a) {
        if ((0, _useBasicTable.isFilterValuesSame)(value, dataKey, filterValues)) {
          return [2
          /*return*/
          , null];
        }

        onChange = (0, _flow2.default)((0, _find2.default)((0, _propEq2.default)('dataKey', dataKey)), (0, _prop2.default)('onFilterChange'))(filters);

        if ((0, _isFunction2.default)(onChange)) {
          onChange(value);
        }

        newFilterValues = (0, _flow2.default)((0, _reject2.default)((0, _propEq2.default)('dataKey')(dataKey)), (0, _concat2.default)({
          dataKey: dataKey,
          value: value
        }))(filterValues);
        setFilterValues(newFilterValues);
        return [2
        /*return*/
        , onFetch(queryValue, queryField, readAction, setPaginationData, paginationData.size, newFilterValues, dateValues, _pagination.DEFAULT_PAGE, setIsLoading, fussyKey)];
      });
    });
  }, [filters, queryValue, queryField, readAction, paginationData.size, dateValues, fussyKey, filterValues]);
  var onDateChange = (0, _react.useCallback)(function (value, dataKey) {
    return __awaiter(_this, void 0, void 0, function () {
      var onChange, newDates;
      return __generator(this, function (_a) {
        if ((0, _flow2.default)((0, _find2.default)((0, _propEq2.default)('dataKey')(dataKey)), (0, _propEq2.default)('value', value))(filterValues)) {
          return [2
          /*return*/
          , null];
        }

        onChange = (0, _flow2.default)((0, _find2.default)((0, _propEq2.default)('dataKey', dataKey)), (0, _prop2.default)('onDateChange'))(datePickers);

        if ((0, _isFunction2.default)(onChange)) {
          onChange(value);
        }

        newDates = (0, _flow2.default)((0, _reject2.default)((0, _propEq2.default)('dataKey')(dataKey)), (0, _concat2.default)({
          dataKey: dataKey,
          value: value
        }))(dateValues);
        setDateValues(newDates);
        return [2
        /*return*/
        , onFetch(queryValue, queryField, readAction, setPaginationData, paginationData.size, filterValues, newDates, _pagination.DEFAULT_PAGE, setIsLoading, fussyKey)];
      });
    });
  }, [datePickers, dateValues, queryValue, queryField, readAction, paginationData.size, filterValues, fussyKey]);
  var onReset = (0, _react.useCallback)(function () {
    reset();
    onFetch(null, defaultQueryField, readAction, setPaginationData, paginationData.size, defaultFilterValues, [], _pagination.DEFAULT_PAGE, setIsLoading, fussyKey);
  }, [defaultQueryField, defaultFilterValues, readAction, reset, fussyKey]);
  var onPageChange = (0, _react.useCallback)(function (page, pageSize) {
    var current = paginationData.current,
        size = paginationData.size;

    if (current !== page - 1 || size !== pageSize) {
      onFetch(queryValue, queryField, readAction, setPaginationData, pageSize, filterValues, dateValues, page - 1, setIsLoading, fussyKey);
    }
  }, [queryValue, queryField, readAction, paginationData.size, filterValues, dateValues, fussyKey, paginationData.current]);
  var onReload = (0, _react.useCallback)(function () {
    return onFetch(queryValue, queryField, readAction, setPaginationData, paginationData.size, filterValues, dateValues, paginationData.current, setIsLoading, fussyKey);
  }, [queryValue, queryField, readAction, paginationData.size, filterValues, dateValues, paginationData.current, fussyKey]);
  var onCreatorSubmit = (0, _react.useCallback)(function (values, formInstance) {
    return __awaiter(_this, void 0, void 0, function () {
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            if (!creatorSubmit) return [3
            /*break*/
            , 2];
            return [4
            /*yield*/
            , creatorSubmit(values, formInstance)];

          case 1:
            _a.sent();

            _a.label = 2;

          case 2:
            return [4
            /*yield*/
            , onFetch(queryValue, queryField, readAction, setPaginationData, paginationData.size, filterValues, dateValues, _pagination.DEFAULT_PAGE, setIsLoading, fussyKey)];

          case 3:
            _a.sent();

            closeCreator();

            _message2.default.success(i18n('createSuccess'));

            return [2
            /*return*/
            ];
        }
      });
    });
  }, [creatorSubmit, queryValue, queryField, readAction, paginationData.size, filterValues, dateValues, fussyKey]);
  var onEditorSubmit = (0, _react.useCallback)(function (values, formInstance) {
    return __awaiter(_this, void 0, void 0, function () {
      var _a;

      return __generator(this, function (_b) {
        switch (_b.label) {
          case 0:
            if (!editorSubmit) return [3
            /*break*/
            , 2];
            return [4
            /*yield*/
            , editorSubmit(__assign(__assign({}, values), {
              id: (_a = editItem) === null || _a === void 0 ? void 0 : _a.id
            }), formInstance, editItem)];

          case 1:
            _b.sent();

            _b.label = 2;

          case 2:
            if (!shouldReload) return [3
            /*break*/
            , 4];
            return [4
            /*yield*/
            , onReload()];

          case 3:
            _b.sent();

            _b.label = 4;

          case 4:
            closeEditor();

            _message2.default.success(i18n('editSuccess'));

            return [2
            /*return*/
            ];
        }
      });
    });
  }, [editorSubmit, editItem, shouldReload, onReload]);
  return {
    data: data,
    openCreator: openCreator,
    openEditor: openEditor,
    openDetails: openDetails,
    reload: onReload,
    reset: onReset,
    isLoading: isLoading,
    filterValues: filterValues,
    changeFilterValue: onFilterValueChange,
    changeDate: onDateChange,
    pagination: __assign({
      showTotal: function (total) {
        return "" + i18n('totalPage', {
          total: total
        });
      },
      pageSize: paginationData.size,
      current: paginationData.current + 1,
      total: paginationData.total,
      onChange: onPageChange
    }, pagination),
    tableHeader: _react.default.createElement(_tableHeader.default, {
      query: {
        onFieldChange: onQueryFieldChange,
        onValueChange: onQueryValueChange,
        value: queryValue,
        field: queryField,
        fields: fields,
        width: width,
        placeholder: placeholder,
        fussy: !!fussyKey
      },
      createButton: createButton,
      filter: {
        items: (0, _map2.default)(function (_a) {
          var dataKey = _a.dataKey,
              options = _a.options,
              others = __rest(_a, ["dataKey", "options"]);

          return __assign({
            dataKey: dataKey,
            value: (0, _flow2.default)((0, _find2.default)((0, _propEq2.default)('dataKey')(dataKey)), (0, _prop2.default)('value'))(filterValues),
            options: options
          }, others);
        })(filters),
        onSelect: onFilterValueChange
      },
      datePicker: {
        items: (0, _map2.default)(function (_a) {
          var dataKey = _a.dataKey,
              others = __rest(_a, ["dataKey"]);

          return __assign({
            dataKey: dataKey,
            value: (0, _flow2.default)((0, _find2.default)((0, _propEq2.default)('dataKey')(dataKey)), (0, _prop2.default)('value'))(dateValues)
          }, others);
        })(datePickers),
        onSelect: onDateChange
      },
      details: details && __assign(__assign({}, details), {
        dataSource: getDetailsDataSource ? getDataSource(detailsItem) : detailsItem,
        visible: detailsVisible,
        close: closeDetails
      }),
      creator: creator && __assign(__assign({}, creator), {
        onSubmit: onCreatorSubmit,
        visible: creatorVisible,
        onClose: closeCreator
      }),
      editor: editor && __assign(__assign({}, editor), {
        initialValues: getEditorInitialValues ? getEditorInitialValues(editItem) : editItem,
        onSubmit: onEditorSubmit,
        visible: editorVisible,
        onClose: closeEditor
      }),
      openEditor: openEditor,
      openCreator: openCreator,
      reset: showReset ? onReset : undefined
    })
  };
}

/***/ }),

/***/ "./node_modules/relient-admin/hooks/use-basic-table.js":
/*!*************************************************************!*\
  !*** ./node_modules/relient-admin/hooks/use-basic-table.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.default = useBasicTable;
exports.isFilterValuesSame = void 0;

var _isArray2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/isArray */ "./node_modules/lodash/fp/isArray.js"));

var _reject2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/reject */ "./node_modules/lodash/fp/reject.js"));

var _propEq2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/propEq */ "./node_modules/lodash/fp/propEq.js"));

var _prop2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/prop */ "./node_modules/lodash/fp/prop.js"));

var _map2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/map */ "./node_modules/lodash/fp/map.js"));

var _isUndefined2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/isUndefined */ "./node_modules/lodash/fp/isUndefined.js"));

var _isEqual2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/isEqual */ "./node_modules/lodash/fp/isEqual.js"));

var _flow2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/flow */ "./node_modules/lodash/fp/flow.js"));

var _first2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/first */ "./node_modules/lodash/fp/first.js"));

var _find2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/find */ "./node_modules/lodash/fp/find.js"));

var _clone2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/clone */ "./node_modules/lodash/fp/clone.js"));

var _react = __webpack_require__(/*! react */ "./node_modules/react/index.js");

var _useDetails = _interopRequireDefault(__webpack_require__(/*! ./use-details */ "./node_modules/relient-admin/hooks/use-details.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var isFilterValuesSame = function (value, dataKey, filterValues) {
  return (0, _flow2.default)((0, _find2.default)((0, _propEq2.default)('dataKey')(dataKey)), (0, _prop2.default)('value'), function (oldValue) {
    if (oldValue && value) {
      if ((0, _isArray2.default)(oldValue) && (0, _isArray2.default)(value)) {
        return (0, _isEqual2.default)((0, _clone2.default)(oldValue).sort())((0, _clone2.default)(value).sort());
      }

      return oldValue === value;
    }

    if (oldValue && !value) {
      return false;
    }

    if (!oldValue && value) {
      return false;
    }

    return true;
  })(filterValues);
};

exports.isFilterValuesSame = isFilterValuesSame;

function useBasicTable(_a) {
  var fields = _a.fields,
      filters = _a.filters,
      editorOnOpen = _a.editorOnOpen,
      editorOnClose = _a.editorOnClose,
      creatorOnOpen = _a.creatorOnOpen,
      creatorOnClose = _a.creatorOnClose,
      detailsOnOpen = _a.detailsOnOpen,
      detailsOnClose = _a.detailsOnClose;
  var defaultQueryField = (0, _flow2.default)(_first2.default, (0, _prop2.default)('dataKey'))(fields);
  var defaultFilterValues = (0, _flow2.default)((0, _reject2.default)((0, _flow2.default)((0, _prop2.default)('defaultValue'), _isUndefined2.default)), (0, _map2.default)(function (_a) {
    var defaultValue = _a.defaultValue,
        dataKey = _a.dataKey;
    return {
      dataKey: dataKey,
      value: defaultValue
    };
  }))(filters);

  var _b = (0, _react.useState)([]),
      dateValues = _b[0],
      setDateValues = _b[1];

  var _c = (0, _react.useState)(defaultQueryField),
      queryField = _c[0],
      setQueryField = _c[1];

  var _d = (0, _react.useState)(''),
      queryValue = _d[0],
      setQueryValue = _d[1];

  var _e = (0, _react.useState)(defaultFilterValues),
      filterValues = _e[0],
      setFilterValues = _e[1];

  var _f = (0, _react.useState)(false),
      creatorVisible = _f[0],
      setCreatorVisible = _f[1];

  var _g = (0, _react.useState)(false),
      editorVisible = _g[0],
      setEditorVisible = _g[1];

  var _h = (0, _react.useState)(null),
      editItem = _h[0],
      setEditItem = _h[1];

  var openCreator = (0, _react.useCallback)(function () {
    setCreatorVisible(true);

    if (creatorOnOpen) {
      creatorOnOpen();
    }
  }, [creatorOnOpen]);
  var closeCreator = (0, _react.useCallback)(function () {
    setCreatorVisible(false);

    if (creatorOnClose) {
      creatorOnClose();
    }
  }, [creatorOnClose]);
  var openEditor = (0, _react.useCallback)(function (item) {
    setEditorVisible(true);
    setEditItem(item);

    if (editorOnOpen) {
      editorOnOpen(item);
    }
  }, [editorOnOpen]);
  var closeEditor = (0, _react.useCallback)(function () {
    setEditorVisible(false);
    setEditItem(null);

    if (editorOnClose) {
      editorOnClose();
    }
  }, [editorOnClose]);
  var reset = (0, _react.useCallback)(function () {
    setDateValues([]);
    setQueryField(defaultQueryField);
    setQueryValue('');
    setFilterValues(defaultFilterValues);
    setCreatorVisible(false);
    setEditorVisible(false);
    setEditItem(null);
  }, [defaultQueryField, defaultFilterValues]);

  var _j = (0, _useDetails.default)({
    detailsOnOpen: detailsOnOpen,
    detailsOnClose: detailsOnClose
  }),
      detailsItem = _j.detailsItem,
      detailsVisible = _j.detailsVisible,
      openDetails = _j.openDetails,
      closeDetails = _j.closeDetails;

  return {
    defaultFilterValues: defaultFilterValues,
    defaultQueryField: defaultQueryField,
    dateValues: dateValues,
    setDateValues: setDateValues,
    queryField: queryField,
    setQueryField: setQueryField,
    queryValue: queryValue,
    setQueryValue: setQueryValue,
    filterValues: filterValues,
    setFilterValues: setFilterValues,
    creatorVisible: creatorVisible,
    editorVisible: editorVisible,
    editItem: editItem,
    openCreator: openCreator,
    closeCreator: closeCreator,
    openEditor: openEditor,
    closeEditor: closeEditor,
    reset: reset,
    openDetails: openDetails,
    closeDetails: closeDetails,
    detailsVisible: detailsVisible,
    detailsItem: detailsItem
  };
}

/***/ }),

/***/ "./node_modules/relient-admin/hooks/use-details.js":
/*!*********************************************************!*\
  !*** ./node_modules/relient-admin/hooks/use-details.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.default = void 0;

var _react = __webpack_require__(/*! react */ "./node_modules/react/index.js");

var _default = function _default(_a) {
  var _b = _a === void 0 ? {} : _a,
      detailsOnOpen = _b.detailsOnOpen,
      detailsOnClose = _b.detailsOnClose;

  var _c = (0, _react.useState)(false),
      detailsVisible = _c[0],
      setDetailsVisible = _c[1];

  var _d = (0, _react.useState)(null),
      detailsItem = _d[0],
      setDetailsItem = _d[1];

  var openDetails = (0, _react.useCallback)(function (item) {
    setDetailsVisible(true);
    setDetailsItem(item);

    if (detailsOnOpen) {
      detailsOnOpen(item);
    }
  }, [detailsOnOpen]);
  var closeDetails = (0, _react.useCallback)(function () {
    setDetailsVisible(false);
    setDetailsItem(null);

    if (detailsOnClose) {
      detailsOnClose();
    }
  }, [detailsOnClose]);
  return {
    detailsVisible: detailsVisible,
    detailsItem: detailsItem,
    openDetails: openDetails,
    closeDetails: closeDetails
  };
};

exports.default = _default;

/***/ }),

/***/ "./node_modules/relient-admin/hooks/use-local-table.js":
/*!*************************************************************!*\
  !*** ./node_modules/relient-admin/hooks/use-local-table.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.default = useLocalTable;

var _message2 = _interopRequireDefault(__webpack_require__(/*! antd/lib/message */ "./node_modules/antd/lib/message/index.js"));

var _isArray2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/isArray */ "./node_modules/lodash/fp/isArray.js"));

var _keys2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/keys */ "./node_modules/lodash/fp/keys.js"));

var _isEmpty2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/isEmpty */ "./node_modules/lodash/fp/isEmpty.js"));

var _any2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/any */ "./node_modules/lodash/fp/any.js"));

var _toUpper2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/toUpper */ "./node_modules/lodash/fp/toUpper.js"));

var _reject2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/reject */ "./node_modules/lodash/fp/reject.js"));

var _propEq2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/propEq */ "./node_modules/lodash/fp/propEq.js"));

var _prop2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/prop */ "./node_modules/lodash/fp/prop.js"));

var _map2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/map */ "./node_modules/lodash/fp/map.js"));

var _isNil2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/isNil */ "./node_modules/lodash/fp/isNil.js"));

var _isFunction2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/isFunction */ "./node_modules/lodash/fp/isFunction.js"));

var _includes2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/includes */ "./node_modules/lodash/fp/includes.js"));

var _flow2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/flow */ "./node_modules/lodash/fp/flow.js"));

var _find2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/find */ "./node_modules/lodash/fp/find.js"));

var _filter2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/filter */ "./node_modules/lodash/fp/filter.js"));

var _every2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/every */ "./node_modules/lodash/fp/every.js"));

var _concat2 = _interopRequireDefault(__webpack_require__(/*! lodash/fp/concat */ "./node_modules/lodash/fp/concat.js"));

var _react = _interopRequireWildcard(__webpack_require__(/*! react */ "./node_modules/react/index.js"));

var _i18n = __webpack_require__(/*! relient/i18n */ "./node_modules/relient/i18n.js");

var _moment = _interopRequireDefault(__webpack_require__(/*! moment */ "./node_modules/moment/moment.js"));

var _tableHeader = _interopRequireDefault(__webpack_require__(/*! ../components/table-header */ "./node_modules/relient-admin/components/table-header.js"));

var _useBasicTable = _interopRequireWildcard(__webpack_require__(/*! ./use-basic-table */ "./node_modules/relient-admin/hooks/use-basic-table.js"));

var _pagination = __webpack_require__(/*! ../constants/pagination */ "./node_modules/relient-admin/constants/pagination.js");

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var __assign = void 0 && (void 0).__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = void 0 && (void 0).__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function () {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) try {
      if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
      if (y = 0, t) op = [op[0] & 2, t.value];

      switch (op[0]) {
        case 0:
        case 1:
          t = op;
          break;

        case 4:
          _.label++;
          return {
            value: op[1],
            done: false
          };

        case 5:
          _.label++;
          y = op[1];
          op = [0];
          continue;

        case 7:
          op = _.ops.pop();

          _.trys.pop();

          continue;

        default:
          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
            _ = 0;
            continue;
          }

          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
            _.label = op[1];
            break;
          }

          if (op[0] === 6 && _.label < t[1]) {
            _.label = t[1];
            t = op;
            break;
          }

          if (t && _.label < t[2]) {
            _.label = t[2];

            _.ops.push(op);

            break;
          }

          if (t[2]) _.ops.pop();

          _.trys.pop();

          continue;
      }

      op = body.call(thisArg, _);
    } catch (e) {
      op = [6, e];
      y = 0;
    } finally {
      f = t = 0;
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};

var __rest = void 0 && (void 0).__rest || function (s, e) {
  var t = {};

  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];

  if (s != null && typeof Object.getOwnPropertySymbols === "function") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];
  }
  return t;
};

function useLocalTable(_a) {
  var _this = this;

  var query = _a.query,
      customQueries = _a.customQueries,
      showReset = _a.showReset,
      _b = _a.filters,
      filters = _b === void 0 ? [] : _b,
      createButton = _a.createButton,
      datePickers = _a.datePickers,
      pagination = _a.pagination,
      paginationInitialData = _a.paginationInitialData,
      creator = _a.creator,
      editor = _a.editor,
      details = _a.details;

  var _c = query || {},
      onFieldChange = _c.onFieldChange,
      onValueChange = _c.onValueChange,
      fields = _c.fields,
      width = _c.width,
      fussy = _c.fussy;

  var _d = paginationInitialData || {},
      _e = _d.current,
      initialCurrent = _e === void 0 ? 1 : _e,
      _f = _d.size,
      initialSize = _f === void 0 ? _pagination.DEFAULT_SIZE : _f;

  var _g = creator || {},
      creatorSubmit = _g.onSubmit,
      creatorOnClose = _g.onClose,
      creatorOnOpen = _g.onOpen;

  var _h = editor || {},
      editorSubmit = _h.onSubmit,
      editorOnClose = _h.onClose,
      editorOnOpen = _h.onOpen,
      getEditorInitialValues = _h.getInitialValues;

  var _j = details || {},
      getDetailsDataSource = _j.getDataSource,
      detailsOnOpen = _j.onOpen,
      detailsOnClose = _j.onClose;

  var _k = (0, _useBasicTable.default)({
    fields: fields,
    filters: filters,
    editorOnOpen: editorOnOpen,
    editorOnClose: editorOnClose,
    creatorOnOpen: creatorOnOpen,
    creatorOnClose: creatorOnClose,
    detailsOnClose: detailsOnClose,
    detailsOnOpen: detailsOnOpen
  }),
      dateValues = _k.dateValues,
      setDateValues = _k.setDateValues,
      queryField = _k.queryField,
      setQueryField = _k.setQueryField,
      queryValue = _k.queryValue,
      setQueryValue = _k.setQueryValue,
      filterValues = _k.filterValues,
      setFilterValues = _k.setFilterValues,
      creatorVisible = _k.creatorVisible,
      editorVisible = _k.editorVisible,
      editItem = _k.editItem,
      openCreator = _k.openCreator,
      closeCreator = _k.closeCreator,
      openEditor = _k.openEditor,
      closeEditor = _k.closeEditor,
      openDetails = _k.openDetails,
      closeDetails = _k.closeDetails,
      detailsVisible = _k.detailsVisible,
      detailsItem = _k.detailsItem,
      reset = _k.reset;

  var i18n = (0, _i18n.useI18N)();

  var _l = (0, _react.useState)(initialCurrent),
      currentPage = _l[0],
      setCurrentPage = _l[1];

  var _m = (0, _react.useState)(initialSize),
      pageSize = _m[0],
      setPageSize = _m[1];

  (0, _react.useEffect)(function () {
    if (initialSize !== pageSize) {
      setPageSize(initialSize);
    }

    if (initialCurrent !== currentPage) {
      setCurrentPage(initialCurrent);
    }
  }, [initialSize, initialCurrent]);
  var onPageChange = (0, _react.useCallback)(function (newCurrentPage, newPageSize) {
    if (newCurrentPage !== currentPage) {
      setCurrentPage(newCurrentPage);
    }

    if (newPageSize !== pageSize) {
      setPageSize(newPageSize);
    }
  }, [currentPage, pageSize]);

  var _o = (0, _react.useState)({}),
      customQueryValues = _o[0],
      setCustomQueryValues = _o[1];

  var changeCustomQueryValue = (0, _react.useCallback)(function (value, field) {
    var _a;

    if (customQueryValues[field] !== value) {
      setCustomQueryValues(__assign(__assign({}, customQueryValues), (_a = {}, _a[field] = value, _a)));
    }
  }, [customQueryValues, setCustomQueryValues]);
  var onQueryFieldChange = (0, _react.useCallback)(function (fieldKey) {
    if ((0, _isFunction2.default)(onFieldChange)) {
      onFieldChange(fieldKey);
    }

    if ((0, _isFunction2.default)(onValueChange)) {
      onValueChange('');
    }

    setQueryField(fieldKey);
    setQueryValue('');
  }, [onFieldChange, onValueChange]);
  var onQueryValueChange = (0, _react.useCallback)(function (_a) {
    var value = _a.target.value;

    if ((0, _isFunction2.default)(onValueChange)) {
      onValueChange(value);
    }

    setCurrentPage(1);
    setQueryValue(value);
  }, [onValueChange]);
  var onFilterValueChange = (0, _react.useCallback)(function (values, dataKey) {
    if ((0, _useBasicTable.isFilterValuesSame)(values, dataKey, filterValues)) {
      return;
    }

    var onChange = (0, _flow2.default)((0, _find2.default)((0, _propEq2.default)('dataKey', dataKey)), (0, _prop2.default)('onChange'))(filters);

    if ((0, _isFunction2.default)(onChange)) {
      onChange(values);
    }

    setCurrentPage(1);
    setFilterValues((0, _flow2.default)((0, _reject2.default)((0, _propEq2.default)('dataKey')(dataKey)), (0, _concat2.default)({
      dataKey: dataKey,
      values: values
    }))(filterValues));
  }, [filters, filterValues]);
  var onDateChange = (0, _react.useCallback)(function (value, dataKey) {
    var onChange = (0, _flow2.default)((0, _find2.default)((0, _propEq2.default)('dataKey', dataKey)), (0, _prop2.default)('onChange'))(datePickers);

    if ((0, _isFunction2.default)(onChange)) {
      onChange(value);
    }

    setCurrentPage(1);
    setDateValues((0, _flow2.default)((0, _reject2.default)((0, _propEq2.default)('dataKey')(dataKey)), (0, _concat2.default)({
      dataKey: dataKey,
      value: value
    }))(dateValues));
  }, [datePickers, dateValues]);
  var onCreatorSubmit = (0, _react.useCallback)(function (values, formInstance) {
    return __awaiter(_this, void 0, void 0, function () {
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            if (!creatorSubmit) return [3
            /*break*/
            , 2];
            return [4
            /*yield*/
            , creatorSubmit(values, formInstance)];

          case 1:
            _a.sent();

            _a.label = 2;

          case 2:
            closeCreator();

            _message2.default.success(i18n('createSuccess'));

            return [2
            /*return*/
            ];
        }
      });
    });
  }, [creatorSubmit]);
  var onEditorSubmit = (0, _react.useCallback)(function (values, formInstance) {
    return __awaiter(_this, void 0, void 0, function () {
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            if (!editorSubmit) return [3
            /*break*/
            , 2];
            return [4
            /*yield*/
            , editorSubmit(__assign(__assign({}, values), {
              id: editItem.id
            }), formInstance, editItem)];

          case 1:
            _a.sent();

            _a.label = 2;

          case 2:
            closeEditor();

            _message2.default.success(i18n('editSuccess'));

            return [2
            /*return*/
            ];
        }
      });
    });
  }, [editorSubmit, editItem]);
  var getDataSource = (0, _react.useCallback)((0, _filter2.default)(function (item) {
    var queryResult = true;

    if (queryValue) {
      var match = function (key) {
        return (0, _flow2.default)((0, _prop2.default)(key), _toUpper2.default, (0, _includes2.default)((0, _toUpper2.default)(queryValue)))(item);
      };

      if (fussy) {
        queryResult = (0, _any2.default)((0, _flow2.default)((0, _prop2.default)('dataKey'), match))(fields);
      } else if (queryField) {
        queryResult = match(queryField);
      }
    }

    var customQueryResult = true;

    if (!(0, _isEmpty2.default)(customQueryValues) && customQueries && customQueries.length > 0) {
      customQueryResult = (0, _flow2.default)(_keys2.default, (0, _every2.default)(function (dataKey) {
        var value = customQueryValues[dataKey];
        var customQuery = (0, _find2.default)((0, _propEq2.default)('dataKey', dataKey))(customQueries);

        if (!customQuery) {
          console.warn("CustomQuery is not config for " + dataKey);
          return true;
        }

        var onFilter = customQuery.onFilter;

        if (onFilter) {
          return onFilter(item, dataKey, value);
        }

        if (value) {
          return (0, _propEq2.default)(dataKey, value)(item);
        }

        return true;
      }))(customQueryValues);
    }

    var filterResult = true;

    if (filterValues.length > 0) {
      filterResult = (0, _every2.default)(function (_a) {
        var dataKey = _a.dataKey,
            value = _a.value;
        var onFilter = (0, _flow2.default)((0, _find2.default)((0, _propEq2.default)('dataKey', dataKey)), (0, _prop2.default)('onFilter'))(filters);

        if ((0, _isArray2.default)(value)) {
          return onFilter ? onFilter(item, dataKey, value) : (0, _includes2.default)((0, _prop2.default)(dataKey)(item))(value);
        }

        return (0, _isNil2.default)(value) || (onFilter ? onFilter(item, dataKey, value) : (0, _propEq2.default)(dataKey, value)(item));
      })(filterValues);
    }

    var datesResult = true;

    if (dateValues.length > 0) {
      datesResult = (0, _every2.default)(function (_a) {
        var dataKey = _a.dataKey,
            value = _a.value;

        if (value && value.length > 1) {
          var selectedDate = (0, _prop2.default)(dataKey)(item);
          var startDate = value[0],
              endDate = value[1];
          return (0, _moment.default)(new Date(startDate)).isBefore(selectedDate) && (0, _moment.default)(new Date(endDate)).isAfter(selectedDate);
        }

        return true;
      })(dateValues);
    }

    return filterResult && queryResult && datesResult && customQueryResult;
  }), [queryValue, queryField, filterValues, dateValues, filters, customQueries]);
  return {
    changeCustomQueryValue: changeCustomQueryValue,
    getDataSource: getDataSource,
    filterValues: filterValues,
    changeFilterValue: onFilterValueChange,
    openCreator: openCreator,
    openEditor: openEditor,
    openDetails: openDetails,
    reset: reset,
    pagination: __assign({
      showTotal: function (total) {
        return "" + i18n('totalPage', {
          total: total
        });
      },
      pageSize: pageSize,
      onChange: onPageChange,
      current: currentPage
    }, pagination),
    tableHeader: _react.default.createElement(_tableHeader.default, {
      query: {
        onFieldChange: onQueryFieldChange,
        onValueChange: onQueryValueChange,
        value: queryValue,
        field: queryField,
        fields: fields,
        width: width,
        fussy: fussy
      },
      createButton: createButton,
      filter: {
        items: (0, _map2.default)(function (_a) {
          var dataKey = _a.dataKey,
              options = _a.options,
              others = __rest(_a, ["dataKey", "options"]);

          return __assign({
            dataKey: dataKey,
            value: (0, _flow2.default)((0, _find2.default)((0, _propEq2.default)('dataKey')(dataKey)), (0, _prop2.default)('value'))(filterValues),
            options: options
          }, others);
        })(filters),
        onSelect: onFilterValueChange
      },
      editor: editor && __assign(__assign({}, editor), {
        initialValues: getEditorInitialValues ? getEditorInitialValues(editItem) : editItem,
        onSubmit: onEditorSubmit,
        visible: editorVisible,
        onClose: closeEditor
      }),
      details: details && __assign(__assign({}, details), {
        dataSource: getDetailsDataSource ? getDataSource(detailsItem) : detailsItem,
        visible: detailsVisible,
        close: closeDetails
      }),
      creator: creator && __assign(__assign({}, creator), {
        onSubmit: onCreatorSubmit,
        visible: creatorVisible,
        onClose: closeCreator
      }),
      openEditor: openEditor,
      openCreator: openCreator,
      reset: showReset ? reset : undefined,
      datePicker: {
        items: (0, _map2.default)(function (_a) {
          var dataKey = _a.dataKey,
              others = __rest(_a, ["dataKey"]);

          return __assign({
            dataKey: dataKey,
            value: (0, _flow2.default)((0, _find2.default)((0, _propEq2.default)('dataKey')(dataKey)), (0, _prop2.default)('value'))(dateValues)
          }, others);
        })(datePickers),
        onSelect: onDateChange
      }
    })
  };
}

/***/ }),

/***/ "./node_modules/relient-admin/hooks/use-table-filter.js":
/*!**************************************************************!*\
  !*** ./node_modules/relient-admin/hooks/use-table-filter.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.default = useTableFilter;

var _react = _interopRequireWildcard(__webpack_require__(/*! react */ "./node_modules/react/index.js"));

var _tableFilter = _interopRequireDefault(__webpack_require__(/*! ../components/table-filter */ "./node_modules/relient-admin/components/table-filter.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

/* eslint-disable react/prop-types */
function useTableFilter(_a) {
  var changeFilterValue = _a.changeFilterValue,
      dataKey = _a.dataKey,
      options = _a.options,
      multiple = _a.multiple,
      filterIcon = _a.filterIcon;

  var _b = (0, _react.useState)(false),
      filterDropdownVisible = _b[0],
      onFilterDropdownVisibleChange = _b[1];

  var _c = (0, _react.useState)(),
      filteredValue = _c[0],
      setFilteredValue = _c[1];

  return (0, _react.useMemo)(function () {
    return {
      filters: options,
      filterDropdownVisible: filterDropdownVisible,
      onFilterDropdownVisibleChange: onFilterDropdownVisibleChange,
      filteredValue: filteredValue,
      filterIcon: filterIcon,
      filterDropdown: function (_a) {
        var prefixCls = _a.prefixCls,
            setSelectedKeys = _a.setSelectedKeys,
            selectedKeys = _a.selectedKeys,
            confirm = _a.confirm,
            clearFilters = _a.clearFilters,
            filters = _a.filters,
            visible = _a.visible;
        return _react.default.createElement(_tableFilter.default, {
          multiple: multiple,
          prefixCls: prefixCls,
          setSelectedKeys: setSelectedKeys,
          selectedKeys: selectedKeys,
          clearFilters: clearFilters,
          filters: filters,
          visible: visible,
          confirm: confirm,
          onConfirm: function () {
            changeFilterValue(selectedKeys, dataKey);
            setFilteredValue(selectedKeys);
            onFilterDropdownVisibleChange(false);
          },
          onReset: function () {
            setFilteredValue(undefined);
            changeFilterValue([], dataKey);
          }
        });
      }
    };
  }, [filterDropdownVisible, changeFilterValue, dataKey, multiple, filterIcon]);
}

/***/ }),

/***/ "./node_modules/relient-admin/hooks/use-table-search.js":
/*!**************************************************************!*\
  !*** ./node_modules/relient-admin/hooks/use-table-search.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.default = useTableSearch;

var _react = _interopRequireWildcard(__webpack_require__(/*! react */ "./node_modules/react/index.js"));

var _icons = __webpack_require__(/*! @ant-design/icons */ "./node_modules/@ant-design/icons/es/index.js");

var _tableSearch = _interopRequireDefault(__webpack_require__(/*! ../components/table-search */ "./node_modules/relient-admin/components/table-search.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

/* eslint-disable react/prop-types */
var defaultFilterIcon = _react.default.createElement(_icons.SearchOutlined, null);

function useTableSearch(_a) {
  var changeFilterValue = _a.changeFilterValue,
      changeCustomQueryValue = _a.changeCustomQueryValue,
      dataKey = _a.dataKey,
      _b = _a.filterIcon,
      filterIcon = _b === void 0 ? defaultFilterIcon : _b,
      placeholder = _a.placeholder,
      width = _a.width;

  var _c = (0, _react.useState)(false),
      filterDropdownVisible = _c[0],
      onFilterDropdownVisibleChange = _c[1];

  var _d = (0, _react.useState)(),
      filteredValue = _d[0],
      setFilteredValue = _d[1];

  return (0, _react.useMemo)(function () {
    return {
      filterDropdownVisible: filterDropdownVisible,
      onFilterDropdownVisibleChange: onFilterDropdownVisibleChange,
      filteredValue: filteredValue,
      filterIcon: filterIcon,
      filterDropdown: function (_a) {
        var prefixCls = _a.prefixCls,
            setSelectedKeys = _a.setSelectedKeys,
            selectedKeys = _a.selectedKeys,
            confirm = _a.confirm,
            clearFilters = _a.clearFilters,
            visible = _a.visible;
        return _react.default.createElement(_tableSearch.default, {
          prefixCls: prefixCls,
          setSelectedKeys: setSelectedKeys,
          selectedKeys: selectedKeys,
          clearFilters: clearFilters,
          visible: visible,
          confirm: confirm,
          placeholder: placeholder,
          width: width,
          onConfirm: function (value) {
            if (changeFilterValue) {
              changeFilterValue(value ? [value] : [], dataKey);
            }

            if (changeCustomQueryValue) {
              changeCustomQueryValue(value, dataKey);
            }

            setFilteredValue(value ? [value] : undefined);
            onFilterDropdownVisibleChange(false);
          },
          onReset: function () {
            if (changeFilterValue) {
              changeFilterValue([], dataKey);
            }

            if (changeCustomQueryValue) {
              changeCustomQueryValue(undefined, dataKey);
            }

            setFilteredValue(undefined);
          }
        });
      }
    };
  }, [filterDropdownVisible, changeFilterValue, dataKey, filterIcon, placeholder, width]);
}

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfcmVsaWVudC1hZG1pbl9mb3JtX3J1bGVzX2pzLW5vZGVfbW9kdWxlc19yZWxpZW50LWFkbWluX2hvb2tzX2luZGV4X2pzLmNodW5rLmpzIiwic291cmNlcyI6WyIvVXNlcnMvbGl1eWFuZy9wcm9qZWN0cy9yaW5ndG9uZV9uZXcvbm9kZV9tb2R1bGVzL2xvZGFzaC9fYXJyYXlBZ2dyZWdhdG9yLmpzIiwiL1VzZXJzL2xpdXlhbmcvcHJvamVjdHMvcmluZ3RvbmVfbmV3L25vZGVfbW9kdWxlcy9sb2Rhc2gvX2FzY2lpVG9BcnJheS5qcyIsIi9Vc2Vycy9saXV5YW5nL3Byb2plY3RzL3Jpbmd0b25lX25ldy9ub2RlX21vZHVsZXMvbG9kYXNoL19iYXNlQWdncmVnYXRvci5qcyIsIi9Vc2Vycy9saXV5YW5nL3Byb2plY3RzL3Jpbmd0b25lX25ldy9ub2RlX21vZHVsZXMvbG9kYXNoL19iYXNlSXNSZWdFeHAuanMiLCIvVXNlcnMvbGl1eWFuZy9wcm9qZWN0cy9yaW5ndG9uZV9uZXcvbm9kZV9tb2R1bGVzL2xvZGFzaC9fYmFzZU50aC5qcyIsIi9Vc2Vycy9saXV5YW5nL3Byb2plY3RzL3Jpbmd0b25lX25ldy9ub2RlX21vZHVsZXMvbG9kYXNoL19jYXN0U2xpY2UuanMiLCIvVXNlcnMvbGl1eWFuZy9wcm9qZWN0cy9yaW5ndG9uZV9uZXcvbm9kZV9tb2R1bGVzL2xvZGFzaC9fY3JlYXRlQWdncmVnYXRvci5qcyIsIi9Vc2Vycy9saXV5YW5nL3Byb2plY3RzL3Jpbmd0b25lX25ldy9ub2RlX21vZHVsZXMvbG9kYXNoL19zdHJpbmdUb0FycmF5LmpzIiwiL1VzZXJzL2xpdXlhbmcvcHJvamVjdHMvcmluZ3RvbmVfbmV3L25vZGVfbW9kdWxlcy9sb2Rhc2gvX3VuaWNvZGVUb0FycmF5LmpzIiwiL1VzZXJzL2xpdXlhbmcvcHJvamVjdHMvcmluZ3RvbmVfbmV3L25vZGVfbW9kdWxlcy9sb2Rhc2gvY29uY2F0LmpzIiwiL1VzZXJzL2xpdXlhbmcvcHJvamVjdHMvcmluZ3RvbmVfbmV3L25vZGVfbW9kdWxlcy9sb2Rhc2gvZGVib3VuY2UuanMiLCIvVXNlcnMvbGl1eWFuZy9wcm9qZWN0cy9yaW5ndG9uZV9uZXcvbm9kZV9tb2R1bGVzL2xvZGFzaC9mcC9jbG9uZS5qcyIsIi9Vc2Vycy9saXV5YW5nL3Byb2plY3RzL3Jpbmd0b25lX25ldy9ub2RlX21vZHVsZXMvbG9kYXNoL2ZwL2NvbmNhdC5qcyIsIi9Vc2Vycy9saXV5YW5nL3Byb2plY3RzL3Jpbmd0b25lX25ldy9ub2RlX21vZHVsZXMvbG9kYXNoL2ZwL2RlYm91bmNlLmpzIiwiL1VzZXJzL2xpdXlhbmcvcHJvamVjdHMvcmluZ3RvbmVfbmV3L25vZGVfbW9kdWxlcy9sb2Rhc2gvZnAvaW5jbHVkZXMuanMiLCIvVXNlcnMvbGl1eWFuZy9wcm9qZWN0cy9yaW5ndG9uZV9uZXcvbm9kZV9tb2R1bGVzL2xvZGFzaC9mcC9pc0VxdWFsLmpzIiwiL1VzZXJzL2xpdXlhbmcvcHJvamVjdHMvcmluZ3RvbmVfbmV3L25vZGVfbW9kdWxlcy9sb2Rhc2gvZnAvaXNGaW5pdGUuanMiLCIvVXNlcnMvbGl1eWFuZy9wcm9qZWN0cy9yaW5ndG9uZV9uZXcvbm9kZV9tb2R1bGVzL2xvZGFzaC9mcC9rZXlCeS5qcyIsIi9Vc2Vycy9saXV5YW5nL3Byb2plY3RzL3Jpbmd0b25lX25ldy9ub2RlX21vZHVsZXMvbG9kYXNoL2ZwL250aC5qcyIsIi9Vc2Vycy9saXV5YW5nL3Byb2plY3RzL3Jpbmd0b25lX25ldy9ub2RlX21vZHVsZXMvbG9kYXNoL2ZwL29taXRCeS5qcyIsIi9Vc2Vycy9saXV5YW5nL3Byb2plY3RzL3Jpbmd0b25lX25ldy9ub2RlX21vZHVsZXMvbG9kYXNoL2ZwL3NwbGl0LmpzIiwiL1VzZXJzL2xpdXlhbmcvcHJvamVjdHMvcmluZ3RvbmVfbmV3L25vZGVfbW9kdWxlcy9sb2Rhc2gvZnAvdG9VcHBlci5qcyIsIi9Vc2Vycy9saXV5YW5nL3Byb2plY3RzL3Jpbmd0b25lX25ldy9ub2RlX21vZHVsZXMvbG9kYXNoL2luY2x1ZGVzLmpzIiwiL1VzZXJzL2xpdXlhbmcvcHJvamVjdHMvcmluZ3RvbmVfbmV3L25vZGVfbW9kdWxlcy9sb2Rhc2gvaXNGaW5pdGUuanMiLCIvVXNlcnMvbGl1eWFuZy9wcm9qZWN0cy9yaW5ndG9uZV9uZXcvbm9kZV9tb2R1bGVzL2xvZGFzaC9pc1JlZ0V4cC5qcyIsIi9Vc2Vycy9saXV5YW5nL3Byb2plY3RzL3Jpbmd0b25lX25ldy9ub2RlX21vZHVsZXMvbG9kYXNoL2tleUJ5LmpzIiwiL1VzZXJzL2xpdXlhbmcvcHJvamVjdHMvcmluZ3RvbmVfbmV3L25vZGVfbW9kdWxlcy9sb2Rhc2gvbm93LmpzIiwiL1VzZXJzL2xpdXlhbmcvcHJvamVjdHMvcmluZ3RvbmVfbmV3L25vZGVfbW9kdWxlcy9sb2Rhc2gvbnRoLmpzIiwiL1VzZXJzL2xpdXlhbmcvcHJvamVjdHMvcmluZ3RvbmVfbmV3L25vZGVfbW9kdWxlcy9sb2Rhc2gvb21pdEJ5LmpzIiwiL1VzZXJzL2xpdXlhbmcvcHJvamVjdHMvcmluZ3RvbmVfbmV3L25vZGVfbW9kdWxlcy9sb2Rhc2gvcGlja0J5LmpzIiwiL1VzZXJzL2xpdXlhbmcvcHJvamVjdHMvcmluZ3RvbmVfbmV3L25vZGVfbW9kdWxlcy9sb2Rhc2gvc3BsaXQuanMiLCIvVXNlcnMvbGl1eWFuZy9wcm9qZWN0cy9yaW5ndG9uZV9uZXcvbm9kZV9tb2R1bGVzL2xvZGFzaC90b1VwcGVyLmpzIiwiL1VzZXJzL2xpdXlhbmcvcHJvamVjdHMvcmluZ3RvbmVfbmV3L25vZGVfbW9kdWxlcy9yZWxpZW50LWFkbWluL2NvbnN0YW50cy9wYWdpbmF0aW9uLmpzIiwiL1VzZXJzL2xpdXlhbmcvcHJvamVjdHMvcmluZ3RvbmVfbmV3L25vZGVfbW9kdWxlcy9yZWxpZW50LWFkbWluL2Zvcm0vcnVsZXMuanMiLCIvVXNlcnMvbGl1eWFuZy9wcm9qZWN0cy9yaW5ndG9uZV9uZXcvbm9kZV9tb2R1bGVzL3JlbGllbnQtYWRtaW4vaG9va3MvaW5kZXguanMiLCIvVXNlcnMvbGl1eWFuZy9wcm9qZWN0cy9yaW5ndG9uZV9uZXcvbm9kZV9tb2R1bGVzL3JlbGllbnQtYWRtaW4vaG9va3MvdXNlLWFwaS10YWJsZS5qcyIsIi9Vc2Vycy9saXV5YW5nL3Byb2plY3RzL3Jpbmd0b25lX25ldy9ub2RlX21vZHVsZXMvcmVsaWVudC1hZG1pbi9ob29rcy91c2UtYmFzaWMtdGFibGUuanMiLCIvVXNlcnMvbGl1eWFuZy9wcm9qZWN0cy9yaW5ndG9uZV9uZXcvbm9kZV9tb2R1bGVzL3JlbGllbnQtYWRtaW4vaG9va3MvdXNlLWRldGFpbHMuanMiLCIvVXNlcnMvbGl1eWFuZy9wcm9qZWN0cy9yaW5ndG9uZV9uZXcvbm9kZV9tb2R1bGVzL3JlbGllbnQtYWRtaW4vaG9va3MvdXNlLWxvY2FsLXRhYmxlLmpzIiwiL1VzZXJzL2xpdXlhbmcvcHJvamVjdHMvcmluZ3RvbmVfbmV3L25vZGVfbW9kdWxlcy9yZWxpZW50LWFkbWluL2hvb2tzL3VzZS10YWJsZS1maWx0ZXIuanMiLCIvVXNlcnMvbGl1eWFuZy9wcm9qZWN0cy9yaW5ndG9uZV9uZXcvbm9kZV9tb2R1bGVzL3JlbGllbnQtYWRtaW4vaG9va3MvdXNlLXRhYmxlLXNlYXJjaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUFnZ3JlZ2F0b3JgIGZvciBhcnJheXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IFthcnJheV0gVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHNldHRlciBUaGUgZnVuY3Rpb24gdG8gc2V0IGBhY2N1bXVsYXRvcmAgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGl0ZXJhdGVlIHRvIHRyYW5zZm9ybSBrZXlzLlxuICogQHBhcmFtIHtPYmplY3R9IGFjY3VtdWxhdG9yIFRoZSBpbml0aWFsIGFnZ3JlZ2F0ZWQgb2JqZWN0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIGBhY2N1bXVsYXRvcmAuXG4gKi9cbmZ1bmN0aW9uIGFycmF5QWdncmVnYXRvcihhcnJheSwgc2V0dGVyLCBpdGVyYXRlZSwgYWNjdW11bGF0b3IpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBhcnJheSA9PSBudWxsID8gMCA6IGFycmF5Lmxlbmd0aDtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XTtcbiAgICBzZXR0ZXIoYWNjdW11bGF0b3IsIHZhbHVlLCBpdGVyYXRlZSh2YWx1ZSksIGFycmF5KTtcbiAgfVxuICByZXR1cm4gYWNjdW11bGF0b3I7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYXJyYXlBZ2dyZWdhdG9yO1xuIiwiLyoqXG4gKiBDb252ZXJ0cyBhbiBBU0NJSSBgc3RyaW5nYCB0byBhbiBhcnJheS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBhcnJheS5cbiAqL1xuZnVuY3Rpb24gYXNjaWlUb0FycmF5KHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnNwbGl0KCcnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhc2NpaVRvQXJyYXk7XG4iLCJ2YXIgYmFzZUVhY2ggPSByZXF1aXJlKCcuL19iYXNlRWFjaCcpO1xuXG4vKipcbiAqIEFnZ3JlZ2F0ZXMgZWxlbWVudHMgb2YgYGNvbGxlY3Rpb25gIG9uIGBhY2N1bXVsYXRvcmAgd2l0aCBrZXlzIHRyYW5zZm9ybWVkXG4gKiBieSBgaXRlcmF0ZWVgIGFuZCB2YWx1ZXMgc2V0IGJ5IGBzZXR0ZXJgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZXR0ZXIgVGhlIGZ1bmN0aW9uIHRvIHNldCBgYWNjdW11bGF0b3JgIHZhbHVlcy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBpdGVyYXRlZSB0byB0cmFuc2Zvcm0ga2V5cy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBhY2N1bXVsYXRvciBUaGUgaW5pdGlhbCBhZ2dyZWdhdGVkIG9iamVjdC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyBgYWNjdW11bGF0b3JgLlxuICovXG5mdW5jdGlvbiBiYXNlQWdncmVnYXRvcihjb2xsZWN0aW9uLCBzZXR0ZXIsIGl0ZXJhdGVlLCBhY2N1bXVsYXRvcikge1xuICBiYXNlRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKSB7XG4gICAgc2V0dGVyKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaXRlcmF0ZWUodmFsdWUpLCBjb2xsZWN0aW9uKTtcbiAgfSk7XG4gIHJldHVybiBhY2N1bXVsYXRvcjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlQWdncmVnYXRvcjtcbiIsInZhciBiYXNlR2V0VGFnID0gcmVxdWlyZSgnLi9fYmFzZUdldFRhZycpLFxuICAgIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4vaXNPYmplY3RMaWtlJyk7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciByZWdleHBUYWcgPSAnW29iamVjdCBSZWdFeHBdJztcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc1JlZ0V4cGAgd2l0aG91dCBOb2RlLmpzIG9wdGltaXphdGlvbnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSByZWdleHAsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUlzUmVnRXhwKHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGJhc2VHZXRUYWcodmFsdWUpID09IHJlZ2V4cFRhZztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlSXNSZWdFeHA7XG4iLCJ2YXIgaXNJbmRleCA9IHJlcXVpcmUoJy4vX2lzSW5kZXgnKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5udGhgIHdoaWNoIGRvZXNuJ3QgY29lcmNlIGFyZ3VtZW50cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIGluZGV4IG9mIHRoZSBlbGVtZW50IHRvIHJldHVybi5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBudGggZWxlbWVudCBvZiBgYXJyYXlgLlxuICovXG5mdW5jdGlvbiBiYXNlTnRoKGFycmF5LCBuKSB7XG4gIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG4gIGlmICghbGVuZ3RoKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIG4gKz0gbiA8IDAgPyBsZW5ndGggOiAwO1xuICByZXR1cm4gaXNJbmRleChuLCBsZW5ndGgpID8gYXJyYXlbbl0gOiB1bmRlZmluZWQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZU50aDtcbiIsInZhciBiYXNlU2xpY2UgPSByZXF1aXJlKCcuL19iYXNlU2xpY2UnKTtcblxuLyoqXG4gKiBDYXN0cyBgYXJyYXlgIHRvIGEgc2xpY2UgaWYgaXQncyBuZWVkZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LlxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFRoZSBzdGFydCBwb3NpdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZW5kPWFycmF5Lmxlbmd0aF0gVGhlIGVuZCBwb3NpdGlvbi5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgY2FzdCBzbGljZS5cbiAqL1xuZnVuY3Rpb24gY2FzdFNsaWNlKGFycmF5LCBzdGFydCwgZW5kKSB7XG4gIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuZ3RoIDogZW5kO1xuICByZXR1cm4gKCFzdGFydCAmJiBlbmQgPj0gbGVuZ3RoKSA/IGFycmF5IDogYmFzZVNsaWNlKGFycmF5LCBzdGFydCwgZW5kKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjYXN0U2xpY2U7XG4iLCJ2YXIgYXJyYXlBZ2dyZWdhdG9yID0gcmVxdWlyZSgnLi9fYXJyYXlBZ2dyZWdhdG9yJyksXG4gICAgYmFzZUFnZ3JlZ2F0b3IgPSByZXF1aXJlKCcuL19iYXNlQWdncmVnYXRvcicpLFxuICAgIGJhc2VJdGVyYXRlZSA9IHJlcXVpcmUoJy4vX2Jhc2VJdGVyYXRlZScpLFxuICAgIGlzQXJyYXkgPSByZXF1aXJlKCcuL2lzQXJyYXknKTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gbGlrZSBgXy5ncm91cEJ5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gc2V0dGVyIFRoZSBmdW5jdGlvbiB0byBzZXQgYWNjdW11bGF0b3IgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2luaXRpYWxpemVyXSBUaGUgYWNjdW11bGF0b3Igb2JqZWN0IGluaXRpYWxpemVyLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYWdncmVnYXRvciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQWdncmVnYXRvcihzZXR0ZXIsIGluaXRpYWxpemVyKSB7XG4gIHJldHVybiBmdW5jdGlvbihjb2xsZWN0aW9uLCBpdGVyYXRlZSkge1xuICAgIHZhciBmdW5jID0gaXNBcnJheShjb2xsZWN0aW9uKSA/IGFycmF5QWdncmVnYXRvciA6IGJhc2VBZ2dyZWdhdG9yLFxuICAgICAgICBhY2N1bXVsYXRvciA9IGluaXRpYWxpemVyID8gaW5pdGlhbGl6ZXIoKSA6IHt9O1xuXG4gICAgcmV0dXJuIGZ1bmMoY29sbGVjdGlvbiwgc2V0dGVyLCBiYXNlSXRlcmF0ZWUoaXRlcmF0ZWUsIDIpLCBhY2N1bXVsYXRvcik7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlQWdncmVnYXRvcjtcbiIsInZhciBhc2NpaVRvQXJyYXkgPSByZXF1aXJlKCcuL19hc2NpaVRvQXJyYXknKSxcbiAgICBoYXNVbmljb2RlID0gcmVxdWlyZSgnLi9faGFzVW5pY29kZScpLFxuICAgIHVuaWNvZGVUb0FycmF5ID0gcmVxdWlyZSgnLi9fdW5pY29kZVRvQXJyYXknKTtcblxuLyoqXG4gKiBDb252ZXJ0cyBgc3RyaW5nYCB0byBhbiBhcnJheS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBhcnJheS5cbiAqL1xuZnVuY3Rpb24gc3RyaW5nVG9BcnJheShzdHJpbmcpIHtcbiAgcmV0dXJuIGhhc1VuaWNvZGUoc3RyaW5nKVxuICAgID8gdW5pY29kZVRvQXJyYXkoc3RyaW5nKVxuICAgIDogYXNjaWlUb0FycmF5KHN0cmluZyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc3RyaW5nVG9BcnJheTtcbiIsIi8qKiBVc2VkIHRvIGNvbXBvc2UgdW5pY29kZSBjaGFyYWN0ZXIgY2xhc3Nlcy4gKi9cbnZhciByc0FzdHJhbFJhbmdlID0gJ1xcXFx1ZDgwMC1cXFxcdWRmZmYnLFxuICAgIHJzQ29tYm9NYXJrc1JhbmdlID0gJ1xcXFx1MDMwMC1cXFxcdTAzNmYnLFxuICAgIHJlQ29tYm9IYWxmTWFya3NSYW5nZSA9ICdcXFxcdWZlMjAtXFxcXHVmZTJmJyxcbiAgICByc0NvbWJvU3ltYm9sc1JhbmdlID0gJ1xcXFx1MjBkMC1cXFxcdTIwZmYnLFxuICAgIHJzQ29tYm9SYW5nZSA9IHJzQ29tYm9NYXJrc1JhbmdlICsgcmVDb21ib0hhbGZNYXJrc1JhbmdlICsgcnNDb21ib1N5bWJvbHNSYW5nZSxcbiAgICByc1ZhclJhbmdlID0gJ1xcXFx1ZmUwZVxcXFx1ZmUwZic7XG5cbi8qKiBVc2VkIHRvIGNvbXBvc2UgdW5pY29kZSBjYXB0dXJlIGdyb3Vwcy4gKi9cbnZhciByc0FzdHJhbCA9ICdbJyArIHJzQXN0cmFsUmFuZ2UgKyAnXScsXG4gICAgcnNDb21ibyA9ICdbJyArIHJzQ29tYm9SYW5nZSArICddJyxcbiAgICByc0ZpdHogPSAnXFxcXHVkODNjW1xcXFx1ZGZmYi1cXFxcdWRmZmZdJyxcbiAgICByc01vZGlmaWVyID0gJyg/OicgKyByc0NvbWJvICsgJ3wnICsgcnNGaXR6ICsgJyknLFxuICAgIHJzTm9uQXN0cmFsID0gJ1teJyArIHJzQXN0cmFsUmFuZ2UgKyAnXScsXG4gICAgcnNSZWdpb25hbCA9ICcoPzpcXFxcdWQ4M2NbXFxcXHVkZGU2LVxcXFx1ZGRmZl0pezJ9JyxcbiAgICByc1N1cnJQYWlyID0gJ1tcXFxcdWQ4MDAtXFxcXHVkYmZmXVtcXFxcdWRjMDAtXFxcXHVkZmZmXScsXG4gICAgcnNaV0ogPSAnXFxcXHUyMDBkJztcblxuLyoqIFVzZWQgdG8gY29tcG9zZSB1bmljb2RlIHJlZ2V4ZXMuICovXG52YXIgcmVPcHRNb2QgPSByc01vZGlmaWVyICsgJz8nLFxuICAgIHJzT3B0VmFyID0gJ1snICsgcnNWYXJSYW5nZSArICddPycsXG4gICAgcnNPcHRKb2luID0gJyg/OicgKyByc1pXSiArICcoPzonICsgW3JzTm9uQXN0cmFsLCByc1JlZ2lvbmFsLCByc1N1cnJQYWlyXS5qb2luKCd8JykgKyAnKScgKyByc09wdFZhciArIHJlT3B0TW9kICsgJykqJyxcbiAgICByc1NlcSA9IHJzT3B0VmFyICsgcmVPcHRNb2QgKyByc09wdEpvaW4sXG4gICAgcnNTeW1ib2wgPSAnKD86JyArIFtyc05vbkFzdHJhbCArIHJzQ29tYm8gKyAnPycsIHJzQ29tYm8sIHJzUmVnaW9uYWwsIHJzU3VyclBhaXIsIHJzQXN0cmFsXS5qb2luKCd8JykgKyAnKSc7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIFtzdHJpbmcgc3ltYm9sc10oaHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2phdmFzY3JpcHQtdW5pY29kZSkuICovXG52YXIgcmVVbmljb2RlID0gUmVnRXhwKHJzRml0eiArICcoPz0nICsgcnNGaXR6ICsgJyl8JyArIHJzU3ltYm9sICsgcnNTZXEsICdnJyk7XG5cbi8qKlxuICogQ29udmVydHMgYSBVbmljb2RlIGBzdHJpbmdgIHRvIGFuIGFycmF5LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgY29udmVydGVkIGFycmF5LlxuICovXG5mdW5jdGlvbiB1bmljb2RlVG9BcnJheShzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZy5tYXRjaChyZVVuaWNvZGUpIHx8IFtdO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHVuaWNvZGVUb0FycmF5O1xuIiwidmFyIGFycmF5UHVzaCA9IHJlcXVpcmUoJy4vX2FycmF5UHVzaCcpLFxuICAgIGJhc2VGbGF0dGVuID0gcmVxdWlyZSgnLi9fYmFzZUZsYXR0ZW4nKSxcbiAgICBjb3B5QXJyYXkgPSByZXF1aXJlKCcuL19jb3B5QXJyYXknKSxcbiAgICBpc0FycmF5ID0gcmVxdWlyZSgnLi9pc0FycmF5Jyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBhcnJheSBjb25jYXRlbmF0aW5nIGBhcnJheWAgd2l0aCBhbnkgYWRkaXRpb25hbCBhcnJheXNcbiAqIGFuZC9vciB2YWx1ZXMuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IEFycmF5XG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gY29uY2F0ZW5hdGUuXG4gKiBAcGFyYW0gey4uLip9IFt2YWx1ZXNdIFRoZSB2YWx1ZXMgdG8gY29uY2F0ZW5hdGUuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBjb25jYXRlbmF0ZWQgYXJyYXkuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBhcnJheSA9IFsxXTtcbiAqIHZhciBvdGhlciA9IF8uY29uY2F0KGFycmF5LCAyLCBbM10sIFtbNF1dKTtcbiAqXG4gKiBjb25zb2xlLmxvZyhvdGhlcik7XG4gKiAvLyA9PiBbMSwgMiwgMywgWzRdXVxuICpcbiAqIGNvbnNvbGUubG9nKGFycmF5KTtcbiAqIC8vID0+IFsxXVxuICovXG5mdW5jdGlvbiBjb25jYXQoKSB7XG4gIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICBpZiAoIWxlbmd0aCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICB2YXIgYXJncyA9IEFycmF5KGxlbmd0aCAtIDEpLFxuICAgICAgYXJyYXkgPSBhcmd1bWVudHNbMF0sXG4gICAgICBpbmRleCA9IGxlbmd0aDtcblxuICB3aGlsZSAoaW5kZXgtLSkge1xuICAgIGFyZ3NbaW5kZXggLSAxXSA9IGFyZ3VtZW50c1tpbmRleF07XG4gIH1cbiAgcmV0dXJuIGFycmF5UHVzaChpc0FycmF5KGFycmF5KSA/IGNvcHlBcnJheShhcnJheSkgOiBbYXJyYXldLCBiYXNlRmxhdHRlbihhcmdzLCAxKSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY29uY2F0O1xuIiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pc09iamVjdCcpLFxuICAgIG5vdyA9IHJlcXVpcmUoJy4vbm93JyksXG4gICAgdG9OdW1iZXIgPSByZXF1aXJlKCcuL3RvTnVtYmVyJyk7XG5cbi8qKiBFcnJvciBtZXNzYWdlIGNvbnN0YW50cy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVNYXggPSBNYXRoLm1heCxcbiAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbjtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGBcbiAqIG1pbGxpc2Vjb25kcyBoYXZlIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgdGltZSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHdhc1xuICogaW52b2tlZC4gVGhlIGRlYm91bmNlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGAgbWV0aG9kIHRvIGNhbmNlbFxuICogZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG8gaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uXG4gKiBQcm92aWRlIGBvcHRpb25zYCB0byBpbmRpY2F0ZSB3aGV0aGVyIGBmdW5jYCBzaG91bGQgYmUgaW52b2tlZCBvbiB0aGVcbiAqIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcbiAqIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24uIFN1YnNlcXVlbnRcbiAqIGNhbGxzIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgXG4gKiBpbnZvY2F0aW9uLlxuICpcbiAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXNcbiAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG4gKiBpcyBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gKlxuICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkXG4gKiB1bnRpbCB0byB0aGUgbmV4dCB0aWNrLCBzaW1pbGFyIHRvIGBzZXRUaW1lb3V0YCB3aXRoIGEgdGltZW91dCBvZiBgMGAuXG4gKlxuICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG4gKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cbiAqICBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlIGRlbGF5ZWQgYmVmb3JlIGl0J3MgaW52b2tlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiAvLyBBdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4LlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIF8uZGVib3VuY2UoY2FsY3VsYXRlTGF5b3V0LCAxNTApKTtcbiAqXG4gKiAvLyBJbnZva2UgYHNlbmRNYWlsYCB3aGVuIGNsaWNrZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxscy5cbiAqIGpRdWVyeShlbGVtZW50KS5vbignY2xpY2snLCBfLmRlYm91bmNlKHNlbmRNYWlsLCAzMDAsIHtcbiAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuICogICAndHJhaWxpbmcnOiBmYWxzZVxuICogfSkpO1xuICpcbiAqIC8vIEVuc3VyZSBgYmF0Y2hMb2dgIGlzIGludm9rZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHMuXG4gKiB2YXIgZGVib3VuY2VkID0gXy5kZWJvdW5jZShiYXRjaExvZywgMjUwLCB7ICdtYXhXYWl0JzogMTAwMCB9KTtcbiAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcbiAqIGpRdWVyeShzb3VyY2UpLm9uKCdtZXNzYWdlJywgZGVib3VuY2VkKTtcbiAqXG4gKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgZGVib3VuY2VkLmNhbmNlbCk7XG4gKi9cbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgdmFyIGxhc3RBcmdzLFxuICAgICAgbGFzdFRoaXMsXG4gICAgICBtYXhXYWl0LFxuICAgICAgcmVzdWx0LFxuICAgICAgdGltZXJJZCxcbiAgICAgIGxhc3RDYWxsVGltZSxcbiAgICAgIGxhc3RJbnZva2VUaW1lID0gMCxcbiAgICAgIGxlYWRpbmcgPSBmYWxzZSxcbiAgICAgIG1heGluZyA9IGZhbHNlLFxuICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIHdhaXQgPSB0b051bWJlcih3YWl0KSB8fCAwO1xuICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG4gICAgbWF4aW5nID0gJ21heFdhaXQnIGluIG9wdGlvbnM7XG4gICAgbWF4V2FpdCA9IG1heGluZyA/IG5hdGl2ZU1heCh0b051bWJlcihvcHRpb25zLm1heFdhaXQpIHx8IDAsIHdhaXQpIDogbWF4V2FpdDtcbiAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52b2tlRnVuYyh0aW1lKSB7XG4gICAgdmFyIGFyZ3MgPSBsYXN0QXJncyxcbiAgICAgICAgdGhpc0FyZyA9IGxhc3RUaGlzO1xuXG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gbGVhZGluZ0VkZ2UodGltZSkge1xuICAgIC8vIFJlc2V0IGFueSBgbWF4V2FpdGAgdGltZXIuXG4gICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgIC8vIFN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIHRyYWlsaW5nIGVkZ2UuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAvLyBJbnZva2UgdGhlIGxlYWRpbmcgZWRnZS5cbiAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lLFxuICAgICAgICB0aW1lV2FpdGluZyA9IHdhaXQgLSB0aW1lU2luY2VMYXN0Q2FsbDtcblxuICAgIHJldHVybiBtYXhpbmdcbiAgICAgID8gbmF0aXZlTWluKHRpbWVXYWl0aW5nLCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSlcbiAgICAgIDogdGltZVdhaXRpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cbiAgICAvLyBFaXRoZXIgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgYWN0aXZpdHkgaGFzIHN0b3BwZWQgYW5kIHdlJ3JlIGF0IHRoZVxuICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG4gICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LlxuICAgIHJldHVybiAobGFzdENhbGxUaW1lID09PSB1bmRlZmluZWQgfHwgKHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQpIHx8XG4gICAgICAodGltZVNpbmNlTGFzdENhbGwgPCAwKSB8fCAobWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCk7XG4gICAgaWYgKHNob3VsZEludm9rZSh0aW1lKSkge1xuICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcbiAgICB9XG4gICAgLy8gUmVzdGFydCB0aGUgdGltZXIuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG4gICAgdGltZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgIC8vIE9ubHkgaW52b2tlIGlmIHdlIGhhdmUgYGxhc3RBcmdzYCB3aGljaCBtZWFucyBgZnVuY2AgaGFzIGJlZW5cbiAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS5cbiAgICBpZiAodHJhaWxpbmcgJiYgbGFzdEFyZ3MpIHtcbiAgICAgIHJldHVybiBpbnZva2VGdW5jKHRpbWUpO1xuICAgIH1cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgaWYgKHRpbWVySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgIH1cbiAgICBsYXN0SW52b2tlVGltZSA9IDA7XG4gICAgbGFzdEFyZ3MgPSBsYXN0Q2FsbFRpbWUgPSBsYXN0VGhpcyA9IHRpbWVySWQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICByZXR1cm4gdGltZXJJZCA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogdHJhaWxpbmdFZGdlKG5vdygpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpLFxuICAgICAgICBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuXG4gICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG4gICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgIGxhc3RDYWxsVGltZSA9IHRpbWU7XG5cbiAgICBpZiAoaXNJbnZva2luZykge1xuICAgICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChtYXhpbmcpIHtcbiAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgICAgICByZXR1cm4gaW52b2tlRnVuYyhsYXN0Q2FsbFRpbWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG4gIGRlYm91bmNlZC5mbHVzaCA9IGZsdXNoO1xuICByZXR1cm4gZGVib3VuY2VkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRlYm91bmNlO1xuIiwidmFyIGNvbnZlcnQgPSByZXF1aXJlKCcuL2NvbnZlcnQnKSxcbiAgICBmdW5jID0gY29udmVydCgnY2xvbmUnLCByZXF1aXJlKCcuLi9jbG9uZScpLCByZXF1aXJlKCcuL19mYWxzZU9wdGlvbnMnKSk7XG5cbmZ1bmMucGxhY2Vob2xkZXIgPSByZXF1aXJlKCcuL3BsYWNlaG9sZGVyJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmM7XG4iLCJ2YXIgY29udmVydCA9IHJlcXVpcmUoJy4vY29udmVydCcpLFxuICAgIGZ1bmMgPSBjb252ZXJ0KCdjb25jYXQnLCByZXF1aXJlKCcuLi9jb25jYXQnKSk7XG5cbmZ1bmMucGxhY2Vob2xkZXIgPSByZXF1aXJlKCcuL3BsYWNlaG9sZGVyJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmM7XG4iLCJ2YXIgY29udmVydCA9IHJlcXVpcmUoJy4vY29udmVydCcpLFxuICAgIGZ1bmMgPSBjb252ZXJ0KCdkZWJvdW5jZScsIHJlcXVpcmUoJy4uL2RlYm91bmNlJykpO1xuXG5mdW5jLnBsYWNlaG9sZGVyID0gcmVxdWlyZSgnLi9wbGFjZWhvbGRlcicpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jO1xuIiwidmFyIGNvbnZlcnQgPSByZXF1aXJlKCcuL2NvbnZlcnQnKSxcbiAgICBmdW5jID0gY29udmVydCgnaW5jbHVkZXMnLCByZXF1aXJlKCcuLi9pbmNsdWRlcycpKTtcblxuZnVuYy5wbGFjZWhvbGRlciA9IHJlcXVpcmUoJy4vcGxhY2Vob2xkZXInKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuYztcbiIsInZhciBjb252ZXJ0ID0gcmVxdWlyZSgnLi9jb252ZXJ0JyksXG4gICAgZnVuYyA9IGNvbnZlcnQoJ2lzRXF1YWwnLCByZXF1aXJlKCcuLi9pc0VxdWFsJykpO1xuXG5mdW5jLnBsYWNlaG9sZGVyID0gcmVxdWlyZSgnLi9wbGFjZWhvbGRlcicpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jO1xuIiwidmFyIGNvbnZlcnQgPSByZXF1aXJlKCcuL2NvbnZlcnQnKSxcbiAgICBmdW5jID0gY29udmVydCgnaXNGaW5pdGUnLCByZXF1aXJlKCcuLi9pc0Zpbml0ZScpLCByZXF1aXJlKCcuL19mYWxzZU9wdGlvbnMnKSk7XG5cbmZ1bmMucGxhY2Vob2xkZXIgPSByZXF1aXJlKCcuL3BsYWNlaG9sZGVyJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmM7XG4iLCJ2YXIgY29udmVydCA9IHJlcXVpcmUoJy4vY29udmVydCcpLFxuICAgIGZ1bmMgPSBjb252ZXJ0KCdrZXlCeScsIHJlcXVpcmUoJy4uL2tleUJ5JykpO1xuXG5mdW5jLnBsYWNlaG9sZGVyID0gcmVxdWlyZSgnLi9wbGFjZWhvbGRlcicpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jO1xuIiwidmFyIGNvbnZlcnQgPSByZXF1aXJlKCcuL2NvbnZlcnQnKSxcbiAgICBmdW5jID0gY29udmVydCgnbnRoJywgcmVxdWlyZSgnLi4vbnRoJykpO1xuXG5mdW5jLnBsYWNlaG9sZGVyID0gcmVxdWlyZSgnLi9wbGFjZWhvbGRlcicpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jO1xuIiwidmFyIGNvbnZlcnQgPSByZXF1aXJlKCcuL2NvbnZlcnQnKSxcbiAgICBmdW5jID0gY29udmVydCgnb21pdEJ5JywgcmVxdWlyZSgnLi4vb21pdEJ5JykpO1xuXG5mdW5jLnBsYWNlaG9sZGVyID0gcmVxdWlyZSgnLi9wbGFjZWhvbGRlcicpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jO1xuIiwidmFyIGNvbnZlcnQgPSByZXF1aXJlKCcuL2NvbnZlcnQnKSxcbiAgICBmdW5jID0gY29udmVydCgnc3BsaXQnLCByZXF1aXJlKCcuLi9zcGxpdCcpKTtcblxuZnVuYy5wbGFjZWhvbGRlciA9IHJlcXVpcmUoJy4vcGxhY2Vob2xkZXInKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuYztcbiIsInZhciBjb252ZXJ0ID0gcmVxdWlyZSgnLi9jb252ZXJ0JyksXG4gICAgZnVuYyA9IGNvbnZlcnQoJ3RvVXBwZXInLCByZXF1aXJlKCcuLi90b1VwcGVyJyksIHJlcXVpcmUoJy4vX2ZhbHNlT3B0aW9ucycpKTtcblxuZnVuYy5wbGFjZWhvbGRlciA9IHJlcXVpcmUoJy4vcGxhY2Vob2xkZXInKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuYztcbiIsInZhciBiYXNlSW5kZXhPZiA9IHJlcXVpcmUoJy4vX2Jhc2VJbmRleE9mJyksXG4gICAgaXNBcnJheUxpa2UgPSByZXF1aXJlKCcuL2lzQXJyYXlMaWtlJyksXG4gICAgaXNTdHJpbmcgPSByZXF1aXJlKCcuL2lzU3RyaW5nJyksXG4gICAgdG9JbnRlZ2VyID0gcmVxdWlyZSgnLi90b0ludGVnZXInKSxcbiAgICB2YWx1ZXMgPSByZXF1aXJlKCcuL3ZhbHVlcycpO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXg7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgaW4gYGNvbGxlY3Rpb25gLiBJZiBgY29sbGVjdGlvbmAgaXMgYSBzdHJpbmcsIGl0J3NcbiAqIGNoZWNrZWQgZm9yIGEgc3Vic3RyaW5nIG9mIGB2YWx1ZWAsIG90aGVyd2lzZVxuICogW2BTYW1lVmFsdWVaZXJvYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtc2FtZXZhbHVlemVybylcbiAqIGlzIHVzZWQgZm9yIGVxdWFsaXR5IGNvbXBhcmlzb25zLiBJZiBgZnJvbUluZGV4YCBpcyBuZWdhdGl2ZSwgaXQncyB1c2VkIGFzXG4gKiB0aGUgb2Zmc2V0IGZyb20gdGhlIGVuZCBvZiBgY29sbGVjdGlvbmAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpbnNwZWN0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZnJvbUluZGV4PTBdIFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cbiAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhbiBpdGVyYXRlZSBmb3IgbWV0aG9kcyBsaWtlIGBfLnJlZHVjZWAuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBmb3VuZCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmluY2x1ZGVzKFsxLCAyLCAzXSwgMSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pbmNsdWRlcyhbMSwgMiwgM10sIDEsIDIpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmluY2x1ZGVzKHsgJ2EnOiAxLCAnYic6IDIgfSwgMSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pbmNsdWRlcygnYWJjZCcsICdiYycpO1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBpbmNsdWRlcyhjb2xsZWN0aW9uLCB2YWx1ZSwgZnJvbUluZGV4LCBndWFyZCkge1xuICBjb2xsZWN0aW9uID0gaXNBcnJheUxpa2UoY29sbGVjdGlvbikgPyBjb2xsZWN0aW9uIDogdmFsdWVzKGNvbGxlY3Rpb24pO1xuICBmcm9tSW5kZXggPSAoZnJvbUluZGV4ICYmICFndWFyZCkgPyB0b0ludGVnZXIoZnJvbUluZGV4KSA6IDA7XG5cbiAgdmFyIGxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoO1xuICBpZiAoZnJvbUluZGV4IDwgMCkge1xuICAgIGZyb21JbmRleCA9IG5hdGl2ZU1heChsZW5ndGggKyBmcm9tSW5kZXgsIDApO1xuICB9XG4gIHJldHVybiBpc1N0cmluZyhjb2xsZWN0aW9uKVxuICAgID8gKGZyb21JbmRleCA8PSBsZW5ndGggJiYgY29sbGVjdGlvbi5pbmRleE9mKHZhbHVlLCBmcm9tSW5kZXgpID4gLTEpXG4gICAgOiAoISFsZW5ndGggJiYgYmFzZUluZGV4T2YoY29sbGVjdGlvbiwgdmFsdWUsIGZyb21JbmRleCkgPiAtMSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW5jbHVkZXM7XG4iLCJ2YXIgcm9vdCA9IHJlcXVpcmUoJy4vX3Jvb3QnKTtcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZUlzRmluaXRlID0gcm9vdC5pc0Zpbml0ZTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIGZpbml0ZSBwcmltaXRpdmUgbnVtYmVyLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBiYXNlZCBvblxuICogW2BOdW1iZXIuaXNGaW5pdGVgXShodHRwczovL21kbi5pby9OdW1iZXIvaXNGaW5pdGUpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgZmluaXRlIG51bWJlciwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzRmluaXRlKDMpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNGaW5pdGUoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0Zpbml0ZShJbmZpbml0eSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNGaW5pdGUoJzMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRmluaXRlKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiYgbmF0aXZlSXNGaW5pdGUodmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzRmluaXRlO1xuIiwidmFyIGJhc2VJc1JlZ0V4cCA9IHJlcXVpcmUoJy4vX2Jhc2VJc1JlZ0V4cCcpLFxuICAgIGJhc2VVbmFyeSA9IHJlcXVpcmUoJy4vX2Jhc2VVbmFyeScpLFxuICAgIG5vZGVVdGlsID0gcmVxdWlyZSgnLi9fbm9kZVV0aWwnKTtcblxuLyogTm9kZS5qcyBoZWxwZXIgcmVmZXJlbmNlcy4gKi9cbnZhciBub2RlSXNSZWdFeHAgPSBub2RlVXRpbCAmJiBub2RlVXRpbC5pc1JlZ0V4cDtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFJlZ0V4cGAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcmVnZXhwLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNSZWdFeHAoL2FiYy8pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNSZWdFeHAoJy9hYmMvJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG52YXIgaXNSZWdFeHAgPSBub2RlSXNSZWdFeHAgPyBiYXNlVW5hcnkobm9kZUlzUmVnRXhwKSA6IGJhc2VJc1JlZ0V4cDtcblxubW9kdWxlLmV4cG9ydHMgPSBpc1JlZ0V4cDtcbiIsInZhciBiYXNlQXNzaWduVmFsdWUgPSByZXF1aXJlKCcuL19iYXNlQXNzaWduVmFsdWUnKSxcbiAgICBjcmVhdGVBZ2dyZWdhdG9yID0gcmVxdWlyZSgnLi9fY3JlYXRlQWdncmVnYXRvcicpO1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIGtleXMgZ2VuZXJhdGVkIGZyb20gdGhlIHJlc3VsdHMgb2YgcnVubmluZ1xuICogZWFjaCBlbGVtZW50IG9mIGBjb2xsZWN0aW9uYCB0aHJ1IGBpdGVyYXRlZWAuIFRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIG9mXG4gKiBlYWNoIGtleSBpcyB0aGUgbGFzdCBlbGVtZW50IHJlc3BvbnNpYmxlIGZvciBnZW5lcmF0aW5nIHRoZSBrZXkuIFRoZVxuICogaXRlcmF0ZWUgaXMgaW52b2tlZCB3aXRoIG9uZSBhcmd1bWVudDogKHZhbHVlKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBpdGVyYXRlZSB0byB0cmFuc2Zvcm0ga2V5cy5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNvbXBvc2VkIGFnZ3JlZ2F0ZSBvYmplY3QuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBhcnJheSA9IFtcbiAqICAgeyAnZGlyJzogJ2xlZnQnLCAnY29kZSc6IDk3IH0sXG4gKiAgIHsgJ2Rpcic6ICdyaWdodCcsICdjb2RlJzogMTAwIH1cbiAqIF07XG4gKlxuICogXy5rZXlCeShhcnJheSwgZnVuY3Rpb24obykge1xuICogICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShvLmNvZGUpO1xuICogfSk7XG4gKiAvLyA9PiB7ICdhJzogeyAnZGlyJzogJ2xlZnQnLCAnY29kZSc6IDk3IH0sICdkJzogeyAnZGlyJzogJ3JpZ2h0JywgJ2NvZGUnOiAxMDAgfSB9XG4gKlxuICogXy5rZXlCeShhcnJheSwgJ2RpcicpO1xuICogLy8gPT4geyAnbGVmdCc6IHsgJ2Rpcic6ICdsZWZ0JywgJ2NvZGUnOiA5NyB9LCAncmlnaHQnOiB7ICdkaXInOiAncmlnaHQnLCAnY29kZSc6IDEwMCB9IH1cbiAqL1xudmFyIGtleUJ5ID0gY3JlYXRlQWdncmVnYXRvcihmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgYmFzZUFzc2lnblZhbHVlKHJlc3VsdCwga2V5LCB2YWx1ZSk7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBrZXlCeTtcbiIsInZhciByb290ID0gcmVxdWlyZSgnLi9fcm9vdCcpO1xuXG4vKipcbiAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZVxuICogdGhlIFVuaXggZXBvY2ggKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAyLjQuMFxuICogQGNhdGVnb3J5IERhdGVcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVzdGFtcC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuICogfSwgXy5ub3coKSk7XG4gKiAvLyA9PiBMb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBpbnZvY2F0aW9uLlxuICovXG52YXIgbm93ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiByb290LkRhdGUubm93KCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IG5vdztcbiIsInZhciBiYXNlTnRoID0gcmVxdWlyZSgnLi9fYmFzZU50aCcpLFxuICAgIHRvSW50ZWdlciA9IHJlcXVpcmUoJy4vdG9JbnRlZ2VyJyk7XG5cbi8qKlxuICogR2V0cyB0aGUgZWxlbWVudCBhdCBpbmRleCBgbmAgb2YgYGFycmF5YC4gSWYgYG5gIGlzIG5lZ2F0aXZlLCB0aGUgbnRoXG4gKiBlbGVtZW50IGZyb20gdGhlIGVuZCBpcyByZXR1cm5lZC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMTEuMFxuICogQGNhdGVnb3J5IEFycmF5XG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge251bWJlcn0gW249MF0gVGhlIGluZGV4IG9mIHRoZSBlbGVtZW50IHRvIHJldHVybi5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBudGggZWxlbWVudCBvZiBgYXJyYXlgLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgYXJyYXkgPSBbJ2EnLCAnYicsICdjJywgJ2QnXTtcbiAqXG4gKiBfLm50aChhcnJheSwgMSk7XG4gKiAvLyA9PiAnYidcbiAqXG4gKiBfLm50aChhcnJheSwgLTIpO1xuICogLy8gPT4gJ2MnO1xuICovXG5mdW5jdGlvbiBudGgoYXJyYXksIG4pIHtcbiAgcmV0dXJuIChhcnJheSAmJiBhcnJheS5sZW5ndGgpID8gYmFzZU50aChhcnJheSwgdG9JbnRlZ2VyKG4pKSA6IHVuZGVmaW5lZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBudGg7XG4iLCJ2YXIgYmFzZUl0ZXJhdGVlID0gcmVxdWlyZSgnLi9fYmFzZUl0ZXJhdGVlJyksXG4gICAgbmVnYXRlID0gcmVxdWlyZSgnLi9uZWdhdGUnKSxcbiAgICBwaWNrQnkgPSByZXF1aXJlKCcuL3BpY2tCeScpO1xuXG4vKipcbiAqIFRoZSBvcHBvc2l0ZSBvZiBgXy5waWNrQnlgOyB0aGlzIG1ldGhvZCBjcmVhdGVzIGFuIG9iamVjdCBjb21wb3NlZCBvZlxuICogdGhlIG93biBhbmQgaW5oZXJpdGVkIGVudW1lcmFibGUgc3RyaW5nIGtleWVkIHByb3BlcnRpZXMgb2YgYG9iamVjdGAgdGhhdFxuICogYHByZWRpY2F0ZWAgZG9lc24ndCByZXR1cm4gdHJ1dGh5IGZvci4gVGhlIHByZWRpY2F0ZSBpcyBpbnZva2VkIHdpdGggdHdvXG4gKiBhcmd1bWVudHM6ICh2YWx1ZSwga2V5KS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBzb3VyY2Ugb2JqZWN0LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgcHJvcGVydHkuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEsICdiJzogJzInLCAnYyc6IDMgfTtcbiAqXG4gKiBfLm9taXRCeShvYmplY3QsIF8uaXNOdW1iZXIpO1xuICogLy8gPT4geyAnYic6ICcyJyB9XG4gKi9cbmZ1bmN0aW9uIG9taXRCeShvYmplY3QsIHByZWRpY2F0ZSkge1xuICByZXR1cm4gcGlja0J5KG9iamVjdCwgbmVnYXRlKGJhc2VJdGVyYXRlZShwcmVkaWNhdGUpKSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gb21pdEJ5O1xuIiwidmFyIGFycmF5TWFwID0gcmVxdWlyZSgnLi9fYXJyYXlNYXAnKSxcbiAgICBiYXNlSXRlcmF0ZWUgPSByZXF1aXJlKCcuL19iYXNlSXRlcmF0ZWUnKSxcbiAgICBiYXNlUGlja0J5ID0gcmVxdWlyZSgnLi9fYmFzZVBpY2tCeScpLFxuICAgIGdldEFsbEtleXNJbiA9IHJlcXVpcmUoJy4vX2dldEFsbEtleXNJbicpO1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIHRoZSBgb2JqZWN0YCBwcm9wZXJ0aWVzIGBwcmVkaWNhdGVgIHJldHVybnNcbiAqIHRydXRoeSBmb3IuIFRoZSBwcmVkaWNhdGUgaXMgaW52b2tlZCB3aXRoIHR3byBhcmd1bWVudHM6ICh2YWx1ZSwga2V5KS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBzb3VyY2Ugb2JqZWN0LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgcHJvcGVydHkuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEsICdiJzogJzInLCAnYyc6IDMgfTtcbiAqXG4gKiBfLnBpY2tCeShvYmplY3QsIF8uaXNOdW1iZXIpO1xuICogLy8gPT4geyAnYSc6IDEsICdjJzogMyB9XG4gKi9cbmZ1bmN0aW9uIHBpY2tCeShvYmplY3QsIHByZWRpY2F0ZSkge1xuICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgdmFyIHByb3BzID0gYXJyYXlNYXAoZ2V0QWxsS2V5c0luKG9iamVjdCksIGZ1bmN0aW9uKHByb3ApIHtcbiAgICByZXR1cm4gW3Byb3BdO1xuICB9KTtcbiAgcHJlZGljYXRlID0gYmFzZUl0ZXJhdGVlKHByZWRpY2F0ZSk7XG4gIHJldHVybiBiYXNlUGlja0J5KG9iamVjdCwgcHJvcHMsIGZ1bmN0aW9uKHZhbHVlLCBwYXRoKSB7XG4gICAgcmV0dXJuIHByZWRpY2F0ZSh2YWx1ZSwgcGF0aFswXSk7XG4gIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHBpY2tCeTtcbiIsInZhciBiYXNlVG9TdHJpbmcgPSByZXF1aXJlKCcuL19iYXNlVG9TdHJpbmcnKSxcbiAgICBjYXN0U2xpY2UgPSByZXF1aXJlKCcuL19jYXN0U2xpY2UnKSxcbiAgICBoYXNVbmljb2RlID0gcmVxdWlyZSgnLi9faGFzVW5pY29kZScpLFxuICAgIGlzSXRlcmF0ZWVDYWxsID0gcmVxdWlyZSgnLi9faXNJdGVyYXRlZUNhbGwnKSxcbiAgICBpc1JlZ0V4cCA9IHJlcXVpcmUoJy4vaXNSZWdFeHAnKSxcbiAgICBzdHJpbmdUb0FycmF5ID0gcmVxdWlyZSgnLi9fc3RyaW5nVG9BcnJheScpLFxuICAgIHRvU3RyaW5nID0gcmVxdWlyZSgnLi90b1N0cmluZycpO1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB0aGUgbWF4aW11bSBsZW5ndGggYW5kIGluZGV4IG9mIGFuIGFycmF5LiAqL1xudmFyIE1BWF9BUlJBWV9MRU5HVEggPSA0Mjk0OTY3Mjk1O1xuXG4vKipcbiAqIFNwbGl0cyBgc3RyaW5nYCBieSBgc2VwYXJhdG9yYC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgYmFzZWQgb25cbiAqIFtgU3RyaW5nI3NwbGl0YF0oaHR0cHM6Ly9tZG4uaW8vU3RyaW5nL3NwbGl0KS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgU3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBzcGxpdC5cbiAqIEBwYXJhbSB7UmVnRXhwfHN0cmluZ30gc2VwYXJhdG9yIFRoZSBzZXBhcmF0b3IgcGF0dGVybiB0byBzcGxpdCBieS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbbGltaXRdIFRoZSBsZW5ndGggdG8gdHJ1bmNhdGUgcmVzdWx0cyB0by5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgc3RyaW5nIHNlZ21lbnRzLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnNwbGl0KCdhLWItYycsICctJywgMik7XG4gKiAvLyA9PiBbJ2EnLCAnYiddXG4gKi9cbmZ1bmN0aW9uIHNwbGl0KHN0cmluZywgc2VwYXJhdG9yLCBsaW1pdCkge1xuICBpZiAobGltaXQgJiYgdHlwZW9mIGxpbWl0ICE9ICdudW1iZXInICYmIGlzSXRlcmF0ZWVDYWxsKHN0cmluZywgc2VwYXJhdG9yLCBsaW1pdCkpIHtcbiAgICBzZXBhcmF0b3IgPSBsaW1pdCA9IHVuZGVmaW5lZDtcbiAgfVxuICBsaW1pdCA9IGxpbWl0ID09PSB1bmRlZmluZWQgPyBNQVhfQVJSQVlfTEVOR1RIIDogbGltaXQgPj4+IDA7XG4gIGlmICghbGltaXQpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgc3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtcbiAgaWYgKHN0cmluZyAmJiAoXG4gICAgICAgIHR5cGVvZiBzZXBhcmF0b3IgPT0gJ3N0cmluZycgfHxcbiAgICAgICAgKHNlcGFyYXRvciAhPSBudWxsICYmICFpc1JlZ0V4cChzZXBhcmF0b3IpKVxuICAgICAgKSkge1xuICAgIHNlcGFyYXRvciA9IGJhc2VUb1N0cmluZyhzZXBhcmF0b3IpO1xuICAgIGlmICghc2VwYXJhdG9yICYmIGhhc1VuaWNvZGUoc3RyaW5nKSkge1xuICAgICAgcmV0dXJuIGNhc3RTbGljZShzdHJpbmdUb0FycmF5KHN0cmluZyksIDAsIGxpbWl0KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN0cmluZy5zcGxpdChzZXBhcmF0b3IsIGxpbWl0KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzcGxpdDtcbiIsInZhciB0b1N0cmluZyA9IHJlcXVpcmUoJy4vdG9TdHJpbmcnKTtcblxuLyoqXG4gKiBDb252ZXJ0cyBgc3RyaW5nYCwgYXMgYSB3aG9sZSwgdG8gdXBwZXIgY2FzZSBqdXN0IGxpa2VcbiAqIFtTdHJpbmcjdG9VcHBlckNhc2VdKGh0dHBzOi8vbWRuLmlvL3RvVXBwZXJDYXNlKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgU3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBjb252ZXJ0LlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgdXBwZXIgY2FzZWQgc3RyaW5nLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvVXBwZXIoJy0tZm9vLWJhci0tJyk7XG4gKiAvLyA9PiAnLS1GT08tQkFSLS0nXG4gKlxuICogXy50b1VwcGVyKCdmb29CYXInKTtcbiAqIC8vID0+ICdGT09CQVInXG4gKlxuICogXy50b1VwcGVyKCdfX2Zvb19iYXJfXycpO1xuICogLy8gPT4gJ19fRk9PX0JBUl9fJ1xuICovXG5mdW5jdGlvbiB0b1VwcGVyKHZhbHVlKSB7XG4gIHJldHVybiB0b1N0cmluZyh2YWx1ZSkudG9VcHBlckNhc2UoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0b1VwcGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLkRFRkFVTFRfU09SVCA9IGV4cG9ydHMuREVGQVVMVF9TSVpFID0gZXhwb3J0cy5BTExfU0laRSA9IGV4cG9ydHMuREVGQVVMVF9QQUdFID0gdm9pZCAwO1xudmFyIERFRkFVTFRfUEFHRSA9IDA7XG5leHBvcnRzLkRFRkFVTFRfUEFHRSA9IERFRkFVTFRfUEFHRTtcbnZhciBBTExfU0laRSA9IDIxNDc0ODM2NDc7XG5leHBvcnRzLkFMTF9TSVpFID0gQUxMX1NJWkU7XG52YXIgREVGQVVMVF9TSVpFID0gMjA7XG5leHBvcnRzLkRFRkFVTFRfU0laRSA9IERFRkFVTFRfU0laRTtcbnZhciBERUZBVUxUX1NPUlQgPSAnY3JlYXRlZEF0LGRlc2MnO1xuZXhwb3J0cy5ERUZBVUxUX1NPUlQgPSBERUZBVUxUX1NPUlQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmNyZWF0ZVByaWNlUnVsZSA9IGV4cG9ydHMuY3JlYXRlUG9zaXRpdmVOdW1iZXJSdWxlID0gZXhwb3J0cy5jcmVhdGVTYW1lQXNSdWxlID0gdm9pZCAwO1xuXG52YXIgX3NwbGl0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaC9mcC9zcGxpdFwiKSk7XG5cbnZhciBfc2l6ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2gvZnAvc2l6ZVwiKSk7XG5cbnZhciBfbnRoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaC9mcC9udGhcIikpO1xuXG52YXIgX2lzTmlsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaC9mcC9pc05pbFwiKSk7XG5cbnZhciBfaXNGaW5pdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoL2ZwL2lzRmluaXRlXCIpKTtcblxudmFyIF9mbG93MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaC9mcC9mbG93XCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIF9fYXdhaXRlciA9IHZvaWQgMCAmJiAodm9pZCAwKS5fX2F3YWl0ZXIgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWplY3QoZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7XG4gICAgICByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTtcbiAgICB9XG5cbiAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gIH0pO1xufTtcblxudmFyIF9fZ2VuZXJhdG9yID0gdm9pZCAwICYmICh2b2lkIDApLl9fZ2VuZXJhdG9yIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gIHZhciBfID0ge1xuICAgIGxhYmVsOiAwLFxuICAgIHNlbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTtcbiAgICAgIHJldHVybiB0WzFdO1xuICAgIH0sXG4gICAgdHJ5czogW10sXG4gICAgb3BzOiBbXVxuICB9LFxuICAgICAgZixcbiAgICAgIHksXG4gICAgICB0LFxuICAgICAgZztcbiAgcmV0dXJuIGcgPSB7XG4gICAgbmV4dDogdmVyYigwKSxcbiAgICBcInRocm93XCI6IHZlcmIoMSksXG4gICAgXCJyZXR1cm5cIjogdmVyYigyKVxuICB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSksIGc7XG5cbiAgZnVuY3Rpb24gdmVyYihuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7XG4gICAgICByZXR1cm4gc3RlcChbbiwgdl0pO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuXG4gICAgd2hpbGUgKF8pIHRyeSB7XG4gICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG5cbiAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgdCA9IG9wO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICBfLmxhYmVsKys7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiBvcFsxXSxcbiAgICAgICAgICAgIGRvbmU6IGZhbHNlXG4gICAgICAgICAgfTtcblxuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgXy5sYWJlbCsrO1xuICAgICAgICAgIHkgPSBvcFsxXTtcbiAgICAgICAgICBvcCA9IFswXTtcbiAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgb3AgPSBfLm9wcy5wb3AoKTtcblxuICAgICAgICAgIF8udHJ5cy5wb3AoKTtcblxuICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHtcbiAgICAgICAgICAgIF8gPSAwO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCBvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkge1xuICAgICAgICAgICAgXy5sYWJlbCA9IG9wWzFdO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7XG4gICAgICAgICAgICBfLmxhYmVsID0gdFsxXTtcbiAgICAgICAgICAgIHQgPSBvcDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7XG4gICAgICAgICAgICBfLmxhYmVsID0gdFsyXTtcblxuICAgICAgICAgICAgXy5vcHMucHVzaChvcCk7XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcblxuICAgICAgICAgIF8udHJ5cy5wb3AoKTtcblxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBvcCA9IFs2LCBlXTtcbiAgICAgIHkgPSAwO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBmID0gdCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLFxuICAgICAgZG9uZTogdHJ1ZVxuICAgIH07XG4gIH1cbn07XG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhyb3ctbGl0ZXJhbCAqL1xuXG5cbnZhciBjcmVhdGVTYW1lQXNSdWxlID0gZnVuY3Rpb24gKGkxOG4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChtZXNzYWdlS2V5KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXROYW1lUGF0aCwgdGFyZ2V0TGFiZWwpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIGdldEZpZWxkVmFsdWUgPSBfYS5nZXRGaWVsZFZhbHVlO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbGlkYXRvcjogZnVuY3Rpb24gKHJ1bGUsIHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgJiYgZ2V0RmllbGRWYWx1ZSh0YXJnZXROYW1lUGF0aCkgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICB0aHJvdyB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yczogW3tcbiAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBpMThuKG1lc3NhZ2VLZXksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldExhYmVsOiB0YXJnZXRMYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBbMlxuICAgICAgICAgICAgICAgIC8qcmV0dXJuKi9cbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfTtcbiAgfTtcbn07XG5cbmV4cG9ydHMuY3JlYXRlU2FtZUFzUnVsZSA9IGNyZWF0ZVNhbWVBc1J1bGU7XG5cbnZhciBjcmVhdGVQb3NpdGl2ZU51bWJlclJ1bGUgPSBmdW5jdGlvbiAoaTE4bikge1xuICByZXR1cm4gZnVuY3Rpb24gKG1lc3NhZ2VLZXkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbiAocnVsZSwgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gJycgJiYgTnVtYmVyKHZhbHVlKSA8PSAwKSB7XG4gICAgICAgICAgICAgIHRocm93IHtcbiAgICAgICAgICAgICAgICBlcnJvcnM6IFt7XG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiBpMThuKG1lc3NhZ2VLZXksIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBbMlxuICAgICAgICAgICAgLypyZXR1cm4qL1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbn07XG5cbmV4cG9ydHMuY3JlYXRlUG9zaXRpdmVOdW1iZXJSdWxlID0gY3JlYXRlUG9zaXRpdmVOdW1iZXJSdWxlO1xuXG52YXIgY3JlYXRlUHJpY2VSdWxlID0gZnVuY3Rpb24gKGkxOG4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChtZXNzYWdlS2V5KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkYXRvcjogZnVuY3Rpb24gKHJ1bGUsIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09ICcnIHx8ICgwLCBfaXNOaWwyLmRlZmF1bHQpKHZhbHVlKSkge1xuICAgICAgICAgICAgICByZXR1cm4gWzJcbiAgICAgICAgICAgICAgLypyZXR1cm4qL1xuICAgICAgICAgICAgICAsIHVuZGVmaW5lZF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghKDAsIF9pc0Zpbml0ZTIuZGVmYXVsdCkoTnVtYmVyKHZhbHVlKSkpIHtcbiAgICAgICAgICAgICAgdGhyb3cge1xuICAgICAgICAgICAgICAgIGVycm9yczogW3tcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGkxOG4obWVzc2FnZUtleSwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgTnVtYmVyKHZhbHVlKSA+IDAgJiYgKDAsIF9mbG93Mi5kZWZhdWx0KSgoMCwgX3NwbGl0Mi5kZWZhdWx0KSgnLicpLCAoMCwgX250aDIuZGVmYXVsdCkoMSksIF9zaXplMi5kZWZhdWx0KSh2YWx1ZSkgPD0gMikge1xuICAgICAgICAgICAgICByZXR1cm4gWzJcbiAgICAgICAgICAgICAgLypyZXR1cm4qL1xuICAgICAgICAgICAgICAsIHVuZGVmaW5lZF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IHtcbiAgICAgICAgICAgICAgZXJyb3JzOiBbe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGkxOG4obWVzc2FnZUtleSwge1xuICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH07XG59O1xuXG5leHBvcnRzLmNyZWF0ZVByaWNlUnVsZSA9IGNyZWF0ZVByaWNlUnVsZTsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInVzZUFQSVRhYmxlXCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF91c2VBcGlUYWJsZS5kZWZhdWx0O1xuICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInVzZUxvY2FsVGFibGVcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3VzZUxvY2FsVGFibGUuZGVmYXVsdDtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJ1c2VGb3JtXCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF91c2VGb3JtLmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwidXNlSXNGb3JtRWRpdGluZ1wiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfdXNlSXNGb3JtRWRpdGluZy5kZWZhdWx0O1xuICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInVzZURldGFpbHNcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3VzZURldGFpbHMuZGVmYXVsdDtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJ1c2VUYWJsZUZpbHRlclwiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfdXNlVGFibGVGaWx0ZXIuZGVmYXVsdDtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJ1c2VUYWJsZVNlYXJjaFwiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfdXNlVGFibGVTZWFyY2guZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfdXNlQXBpVGFibGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3VzZS1hcGktdGFibGVcIikpO1xuXG52YXIgX3VzZUxvY2FsVGFibGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3VzZS1sb2NhbC10YWJsZVwiKSk7XG5cbnZhciBfdXNlRm9ybSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdXNlLWZvcm1cIikpO1xuXG52YXIgX3VzZUlzRm9ybUVkaXRpbmcgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3VzZS1pcy1mb3JtLWVkaXRpbmdcIikpO1xuXG52YXIgX3VzZURldGFpbHMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3VzZS1kZXRhaWxzXCIpKTtcblxudmFyIF91c2VUYWJsZUZpbHRlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdXNlLXRhYmxlLWZpbHRlclwiKSk7XG5cbnZhciBfdXNlVGFibGVTZWFyY2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3VzZS10YWJsZS1zZWFyY2hcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfSIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdXNlQXBpVGFibGU7XG5cbnZhciBfbWVzc2FnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJhbnRkL2xpYi9tZXNzYWdlXCIpKTtcblxudmFyIF9pc0FycmF5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaC9mcC9pc0FycmF5XCIpKTtcblxudmFyIF9qb2luMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaC9mcC9qb2luXCIpKTtcblxudmFyIF9yZWplY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoL2ZwL3JlamVjdFwiKSk7XG5cbnZhciBfcmVkdWNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaC9mcC9yZWR1Y2VcIikpO1xuXG52YXIgX3Byb3BFcTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2gvZnAvcHJvcEVxXCIpKTtcblxudmFyIF9wcm9wMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaC9mcC9wcm9wXCIpKTtcblxudmFyIF9vbWl0QnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoL2ZwL29taXRCeVwiKSk7XG5cbnZhciBfbWFwVmFsdWVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaC9mcC9tYXBWYWx1ZXNcIikpO1xuXG52YXIgX21hcDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2gvZnAvbWFwXCIpKTtcblxudmFyIF9rZXlCeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2gvZnAva2V5QnlcIikpO1xuXG52YXIgX2lzTmlsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaC9mcC9pc05pbFwiKSk7XG5cbnZhciBfaXNGdW5jdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2gvZnAvaXNGdW5jdGlvblwiKSk7XG5cbnZhciBfZmxvdzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2gvZnAvZmxvd1wiKSk7XG5cbnZhciBfZmluZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2gvZnAvZmluZFwiKSk7XG5cbnZhciBfZGVib3VuY2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoL2ZwL2RlYm91bmNlXCIpKTtcblxudmFyIF9jb25jYXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoL2ZwL2NvbmNhdFwiKSk7XG5cbnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKFwicmVhY3RcIikpO1xuXG52YXIgX3JlYWN0UmVkdXggPSByZXF1aXJlKFwicmVhY3QtcmVkdXhcIik7XG5cbnZhciBfaTE4biA9IHJlcXVpcmUoXCJyZWxpZW50L2kxOG5cIik7XG5cbnZhciBfcGFnaW5hdGlvbiA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHMvcGFnaW5hdGlvblwiKTtcblxudmFyIF90YWJsZUhlYWRlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2NvbXBvbmVudHMvdGFibGUtaGVhZGVyXCIpKTtcblxudmFyIF91c2VCYXNpY1RhYmxlID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZShcIi4vdXNlLWJhc2ljLXRhYmxlXCIpKTtcblxuZnVuY3Rpb24gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKCkgeyBpZiAodHlwZW9mIFdlYWtNYXAgIT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIG51bGw7IHZhciBjYWNoZSA9IG5ldyBXZWFrTWFwKCk7IF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNhY2hlOyB9OyByZXR1cm4gY2FjaGU7IH1cblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBpZiAob2JqID09PSBudWxsIHx8IHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG9iaiAhPT0gXCJmdW5jdGlvblwiKSB7IHJldHVybiB7IGRlZmF1bHQ6IG9iaiB9OyB9IHZhciBjYWNoZSA9IF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSgpOyBpZiAoY2FjaGUgJiYgY2FjaGUuaGFzKG9iaikpIHsgcmV0dXJuIGNhY2hlLmdldChvYmopOyB9IHZhciBuZXdPYmogPSB7fTsgdmFyIGhhc1Byb3BlcnR5RGVzY3JpcHRvciA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7IHZhciBkZXNjID0gaGFzUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiBudWxsOyBpZiAoZGVzYyAmJiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyBpZiAoY2FjaGUpIHsgY2FjaGUuc2V0KG9iaiwgbmV3T2JqKTsgfSByZXR1cm4gbmV3T2JqOyB9XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBfX2Fzc2lnbiA9IHZvaWQgMCAmJiAodm9pZCAwKS5fX2Fzc2lnbiB8fCBmdW5jdGlvbiAoKSB7XG4gIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodCkge1xuICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcblxuICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdDtcbiAgfTtcblxuICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5cbnZhciBfX2F3YWl0ZXIgPSB2b2lkIDAgJiYgKHZvaWQgMCkuX19hd2FpdGVyIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkge1xuICAgICAgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7XG4gICAgfVxuXG4gICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICB9KTtcbn07XG5cbnZhciBfX2dlbmVyYXRvciA9IHZvaWQgMCAmJiAodm9pZCAwKS5fX2dlbmVyYXRvciB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICB2YXIgXyA9IHtcbiAgICBsYWJlbDogMCxcbiAgICBzZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodFswXSAmIDEpIHRocm93IHRbMV07XG4gICAgICByZXR1cm4gdFsxXTtcbiAgICB9LFxuICAgIHRyeXM6IFtdLFxuICAgIG9wczogW11cbiAgfSxcbiAgICAgIGYsXG4gICAgICB5LFxuICAgICAgdCxcbiAgICAgIGc7XG4gIHJldHVybiBnID0ge1xuICAgIG5leHQ6IHZlcmIoMCksXG4gICAgXCJ0aHJvd1wiOiB2ZXJiKDEpLFxuICAgIFwicmV0dXJuXCI6IHZlcmIoMilcbiAgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0pLCBnO1xuXG4gIGZ1bmN0aW9uIHZlcmIobikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodikge1xuICAgICAgcmV0dXJuIHN0ZXAoW24sIHZdKTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcblxuICAgIHdoaWxlIChfKSB0cnkge1xuICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuXG4gICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIHQgPSBvcDtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgXy5sYWJlbCsrO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogb3BbMV0sXG4gICAgICAgICAgICBkb25lOiBmYWxzZVxuICAgICAgICAgIH07XG5cbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIF8ubGFiZWwrKztcbiAgICAgICAgICB5ID0gb3BbMV07XG4gICAgICAgICAgb3AgPSBbMF07XG4gICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgIG9wID0gXy5vcHMucG9wKCk7XG5cbiAgICAgICAgICBfLnRyeXMucG9wKCk7XG5cbiAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7XG4gICAgICAgICAgICBfID0gMDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgb3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpIHtcbiAgICAgICAgICAgIF8ubGFiZWwgPSBvcFsxXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkge1xuICAgICAgICAgICAgXy5sYWJlbCA9IHRbMV07XG4gICAgICAgICAgICB0ID0gb3A7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkge1xuICAgICAgICAgICAgXy5sYWJlbCA9IHRbMl07XG5cbiAgICAgICAgICAgIF8ub3BzLnB1c2gob3ApO1xuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG5cbiAgICAgICAgICBfLnRyeXMucG9wKCk7XG5cbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgb3AgPSBbNiwgZV07XG4gICAgICB5ID0gMDtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgZiA9IHQgPSAwO1xuICAgIH1cblxuICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdO1xuICAgIHJldHVybiB7XG4gICAgICB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCxcbiAgICAgIGRvbmU6IHRydWVcbiAgICB9O1xuICB9XG59O1xuXG52YXIgX19yZXN0ID0gdm9pZCAwICYmICh2b2lkIDApLl9fcmVzdCB8fCBmdW5jdGlvbiAocywgZSkge1xuICB2YXIgdCA9IHt9O1xuXG4gIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKSB0W3BdID0gc1twXTtcblxuICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpIHRbcFtpXV0gPSBzW3BbaV1dO1xuICB9XG4gIHJldHVybiB0O1xufTtcblxudmFyIG9taXRFbXB0eSA9ICgwLCBfb21pdEJ5Mi5kZWZhdWx0KShmdW5jdGlvbiAodmFsKSB7XG4gIHJldHVybiAoMCwgX2lzTmlsMi5kZWZhdWx0KSh2YWwpIHx8IHZhbCA9PT0gJyc7XG59KTtcbnZhciBnZXRGaWx0ZXJQYXJhbXMgPSAoMCwgX2Zsb3cyLmRlZmF1bHQpKCgwLCBfa2V5QnkyLmRlZmF1bHQpKCdkYXRhS2V5JyksICgwLCBfbWFwVmFsdWVzMi5kZWZhdWx0KShmdW5jdGlvbiAoX2EpIHtcbiAgdmFyIHZhbHVlID0gX2EudmFsdWU7XG5cbiAgaWYgKCgwLCBfaXNBcnJheTIuZGVmYXVsdCkodmFsdWUpKSB7XG4gICAgcmV0dXJuICgwLCBfam9pbjIuZGVmYXVsdCkoJywnKSh2YWx1ZSk7XG4gIH1cblxuICByZXR1cm4gdmFsdWU7XG59KSk7XG52YXIgZ2V0RGF0ZVBhcmFtcyA9ICgwLCBfcmVkdWNlMi5kZWZhdWx0KShmdW5jdGlvbiAocmVzdWx0LCBfYSkge1xuICB2YXIgX2I7XG5cbiAgdmFyIGRhdGFLZXkgPSBfYS5kYXRhS2V5LFxuICAgICAgdmFsdWUgPSBfYS52YWx1ZTtcblxuICBpZiAodmFsdWUgJiYgdmFsdWUubGVuZ3RoID4gMSkge1xuICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcmVzdWx0KSwgKF9iID0ge30sIF9iW2RhdGFLZXkgKyBcIkFmdGVyXCJdID0gbmV3IERhdGUodmFsdWVbMF0pLnRvSVNPU3RyaW5nKCksIF9iW2RhdGFLZXkgKyBcIkJlZm9yZVwiXSA9IG5ldyBEYXRlKHZhbHVlWzFdKS50b0lTT1N0cmluZygpLCBfYikpO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn0sIHt9KTtcblxuZnVuY3Rpb24gb25GZXRjaChxdWVyeVZhbHVlLCBxdWVyeUZpZWxkLCByZWFkQWN0aW9uLCBzZXRQYWdpbmF0aW9uRGF0YSwgc2l6ZSwgZmlsdGVyVmFsdWVzLCBkYXRlVmFsdWVzLCBwYWdlLCBzZXRJc0xvYWRpbmcsIGZ1c3N5S2V5KSB7XG4gIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX2EsIGNvbnRlbnQsIG51bWJlciwgbmV3U2l6ZSwgdG90YWxFbGVtZW50cztcblxuICAgIHZhciBfYjtcblxuICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcbiAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHNldElzTG9hZGluZyh0cnVlKTtcbiAgICAgICAgICByZXR1cm4gWzRcbiAgICAgICAgICAvKnlpZWxkKi9cbiAgICAgICAgICAsIHJlYWRBY3Rpb24ob21pdEVtcHR5KF9fYXNzaWduKF9fYXNzaWduKChfYiA9IHt9LCBfYltmdXNzeUtleSB8fCBxdWVyeUZpZWxkXSA9IHF1ZXJ5VmFsdWUsIF9iLnNpemUgPSBzaXplLCBfYi5wYWdlID0gcGFnZSwgX2IpLCBnZXRGaWx0ZXJQYXJhbXMoZmlsdGVyVmFsdWVzKSksIGdldERhdGVQYXJhbXMoZGF0ZVZhbHVlcykpKSldO1xuXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBfYSA9IF9jLnNlbnQoKSwgY29udGVudCA9IF9hLmNvbnRlbnQsIG51bWJlciA9IF9hLm51bWJlciwgbmV3U2l6ZSA9IF9hLnNpemUsIHRvdGFsRWxlbWVudHMgPSBfYS50b3RhbEVsZW1lbnRzO1xuICAgICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgc2V0UGFnaW5hdGlvbkRhdGEoe1xuICAgICAgICAgICAgY3VycmVudDogbnVtYmVyLFxuICAgICAgICAgICAgc2l6ZTogbmV3U2l6ZSxcbiAgICAgICAgICAgIHRvdGFsOiB0b3RhbEVsZW1lbnRzLFxuICAgICAgICAgICAgaWRzOiAoMCwgX21hcDIuZGVmYXVsdCkoKDAsIF9wcm9wMi5kZWZhdWx0KSgnaWQnKSkoY29udGVudClcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gWzJcbiAgICAgICAgICAvKnJldHVybiovXG4gICAgICAgICAgXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cbnZhciBvblF1ZXJ5RmV0Y2ggPSAoMCwgX2RlYm91bmNlMi5kZWZhdWx0KSg1MDAsIG9uRmV0Y2gpO1xuXG5mdW5jdGlvbiB1c2VBcGlUYWJsZShfYSkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHZhciBxdWVyeSA9IF9hLnF1ZXJ5LFxuICAgICAgc2hvd1Jlc2V0ID0gX2Euc2hvd1Jlc2V0LFxuICAgICAgZmlsdGVycyA9IF9hLmZpbHRlcnMsXG4gICAgICBjcmVhdGVCdXR0b24gPSBfYS5jcmVhdGVCdXR0b24sXG4gICAgICBkYXRlUGlja2VycyA9IF9hLmRhdGVQaWNrZXJzLFxuICAgICAgZ2V0RGF0YVNvdXJjZSA9IF9hLmdldERhdGFTb3VyY2UsXG4gICAgICBwYWdpbmF0aW9uID0gX2EucGFnaW5hdGlvbixcbiAgICAgIHBhZ2luYXRpb25Jbml0aWFsRGF0YSA9IF9hLnBhZ2luYXRpb25Jbml0aWFsRGF0YSxcbiAgICAgIF9iID0gX2EucGFnaW5hdGlvbkluaXRpYWxEYXRhLFxuICAgICAgaW5pdGlhbEN1cnJlbnQgPSBfYi5jdXJyZW50LFxuICAgICAgaW5pdGlhbFRvdGFsID0gX2IudG90YWwsXG4gICAgICBpbml0aWFsSWRzID0gX2IuaWRzLFxuICAgICAgaW5pdGlhbFNpemUgPSBfYi5zaXplLFxuICAgICAgcmVhZEFjdGlvbiA9IF9hLnJlYWRBY3Rpb24sXG4gICAgICBjcmVhdG9yID0gX2EuY3JlYXRvcixcbiAgICAgIGVkaXRvciA9IF9hLmVkaXRvcixcbiAgICAgIGRldGFpbHMgPSBfYS5kZXRhaWxzO1xuXG4gIHZhciBfYyA9IHF1ZXJ5IHx8IHt9LFxuICAgICAgb25GaWVsZENoYW5nZSA9IF9jLm9uRmllbGRDaGFuZ2UsXG4gICAgICBvblZhbHVlQ2hhbmdlID0gX2Mub25WYWx1ZUNoYW5nZSxcbiAgICAgIGZpZWxkcyA9IF9jLmZpZWxkcyxcbiAgICAgIHdpZHRoID0gX2Mud2lkdGgsXG4gICAgICBwbGFjZWhvbGRlciA9IF9jLnBsYWNlaG9sZGVyLFxuICAgICAgZnVzc3lLZXkgPSBfYy5mdXNzeUtleTtcblxuICB2YXIgX2QgPSBjcmVhdG9yIHx8IHt9LFxuICAgICAgY3JlYXRvclN1Ym1pdCA9IF9kLm9uU3VibWl0LFxuICAgICAgY3JlYXRvck9uQ2xvc2UgPSBfZC5vbkNsb3NlLFxuICAgICAgY3JlYXRvck9uT3BlbiA9IF9kLm9uT3BlbjtcblxuICB2YXIgX2UgPSBlZGl0b3IgfHwge30sXG4gICAgICBlZGl0b3JTdWJtaXQgPSBfZS5vblN1Ym1pdCxcbiAgICAgIHNob3VsZFJlbG9hZCA9IF9lLnNob3VsZFJlbG9hZCxcbiAgICAgIGVkaXRvck9uQ2xvc2UgPSBfZS5vbkNsb3NlLFxuICAgICAgZWRpdG9yT25PcGVuID0gX2Uub25PcGVuLFxuICAgICAgZ2V0RWRpdG9ySW5pdGlhbFZhbHVlcyA9IF9lLmdldEluaXRpYWxWYWx1ZXM7XG5cbiAgdmFyIF9mID0gZGV0YWlscyB8fCB7fSxcbiAgICAgIGdldERldGFpbHNEYXRhU291cmNlID0gX2YuZ2V0RGF0YVNvdXJjZSxcbiAgICAgIGRldGFpbHNPbk9wZW4gPSBfZi5vbk9wZW4sXG4gICAgICBkZXRhaWxzT25DbG9zZSA9IF9mLm9uQ2xvc2U7XG5cbiAgdmFyIF9nID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkocGFnaW5hdGlvbkluaXRpYWxEYXRhKSxcbiAgICAgIHBhZ2luYXRpb25EYXRhID0gX2dbMF0sXG4gICAgICBzZXRQYWdpbmF0aW9uRGF0YSA9IF9nWzFdO1xuXG4gICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGluaXRpYWxDdXJyZW50ICE9PSBwYWdpbmF0aW9uRGF0YS5jdXJyZW50IHx8IGluaXRpYWxUb3RhbCAhPT0gcGFnaW5hdGlvbkRhdGEudG90YWwgfHwgKDAsIF9qb2luMi5kZWZhdWx0KSgnLCcpKGluaXRpYWxJZHMpICE9PSAoMCwgX2pvaW4yLmRlZmF1bHQpKCcsJykocGFnaW5hdGlvbkRhdGEuaWRzKSB8fCBpbml0aWFsU2l6ZSAhPT0gcGFnaW5hdGlvbkRhdGEuc2l6ZSkge1xuICAgICAgc2V0UGFnaW5hdGlvbkRhdGEocGFnaW5hdGlvbkluaXRpYWxEYXRhKTtcbiAgICB9XG4gIH0sIFtpbml0aWFsU2l6ZSwgaW5pdGlhbEN1cnJlbnQsIGluaXRpYWxUb3RhbCwgKDAsIF9qb2luMi5kZWZhdWx0KSgnLCcpKGluaXRpYWxJZHMpXSk7XG4gIHZhciBkYXRhID0gKDAsIF9yZWFjdFJlZHV4LnVzZVNlbGVjdG9yKShmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICByZXR1cm4gZ2V0RGF0YVNvdXJjZShzdGF0ZSkocGFnaW5hdGlvbkRhdGEuaWRzKTtcbiAgfSk7XG5cbiAgdmFyIF9oID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZmFsc2UpLFxuICAgICAgaXNMb2FkaW5nID0gX2hbMF0sXG4gICAgICBzZXRJc0xvYWRpbmcgPSBfaFsxXTtcblxuICB2YXIgaTE4biA9ICgwLCBfaTE4bi51c2VJMThOKSgpO1xuXG4gIHZhciBfaiA9ICgwLCBfdXNlQmFzaWNUYWJsZS5kZWZhdWx0KSh7XG4gICAgZmllbGRzOiBmaWVsZHMsXG4gICAgZmlsdGVyczogZmlsdGVycyxcbiAgICBlZGl0b3JPbk9wZW46IGVkaXRvck9uT3BlbixcbiAgICBlZGl0b3JPbkNsb3NlOiBlZGl0b3JPbkNsb3NlLFxuICAgIGNyZWF0b3JPbk9wZW46IGNyZWF0b3JPbk9wZW4sXG4gICAgY3JlYXRvck9uQ2xvc2U6IGNyZWF0b3JPbkNsb3NlLFxuICAgIGRldGFpbHNPbkNsb3NlOiBkZXRhaWxzT25DbG9zZSxcbiAgICBkZXRhaWxzT25PcGVuOiBkZXRhaWxzT25PcGVuXG4gIH0pLFxuICAgICAgZGF0ZVZhbHVlcyA9IF9qLmRhdGVWYWx1ZXMsXG4gICAgICBzZXREYXRlVmFsdWVzID0gX2ouc2V0RGF0ZVZhbHVlcyxcbiAgICAgIHF1ZXJ5RmllbGQgPSBfai5xdWVyeUZpZWxkLFxuICAgICAgc2V0UXVlcnlGaWVsZCA9IF9qLnNldFF1ZXJ5RmllbGQsXG4gICAgICBxdWVyeVZhbHVlID0gX2oucXVlcnlWYWx1ZSxcbiAgICAgIHNldFF1ZXJ5VmFsdWUgPSBfai5zZXRRdWVyeVZhbHVlLFxuICAgICAgZmlsdGVyVmFsdWVzID0gX2ouZmlsdGVyVmFsdWVzLFxuICAgICAgc2V0RmlsdGVyVmFsdWVzID0gX2ouc2V0RmlsdGVyVmFsdWVzLFxuICAgICAgY3JlYXRvclZpc2libGUgPSBfai5jcmVhdG9yVmlzaWJsZSxcbiAgICAgIGVkaXRvclZpc2libGUgPSBfai5lZGl0b3JWaXNpYmxlLFxuICAgICAgZWRpdEl0ZW0gPSBfai5lZGl0SXRlbSxcbiAgICAgIG9wZW5DcmVhdG9yID0gX2oub3BlbkNyZWF0b3IsXG4gICAgICBjbG9zZUNyZWF0b3IgPSBfai5jbG9zZUNyZWF0b3IsXG4gICAgICBvcGVuRWRpdG9yID0gX2oub3BlbkVkaXRvcixcbiAgICAgIGNsb3NlRWRpdG9yID0gX2ouY2xvc2VFZGl0b3IsXG4gICAgICByZXNldCA9IF9qLnJlc2V0LFxuICAgICAgZGVmYXVsdFF1ZXJ5RmllbGQgPSBfai5kZWZhdWx0UXVlcnlGaWVsZCxcbiAgICAgIGRlZmF1bHRGaWx0ZXJWYWx1ZXMgPSBfai5kZWZhdWx0RmlsdGVyVmFsdWVzLFxuICAgICAgb3BlbkRldGFpbHMgPSBfai5vcGVuRGV0YWlscyxcbiAgICAgIGNsb3NlRGV0YWlscyA9IF9qLmNsb3NlRGV0YWlscyxcbiAgICAgIGRldGFpbHNWaXNpYmxlID0gX2ouZGV0YWlsc1Zpc2libGUsXG4gICAgICBkZXRhaWxzSXRlbSA9IF9qLmRldGFpbHNJdGVtO1xuXG4gIHZhciBvblF1ZXJ5RmllbGRDaGFuZ2UgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAoZmllbGRLZXkpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgc2V0UXVlcnlGaWVsZChmaWVsZEtleSk7XG4gICAgICAgICAgICBzZXRRdWVyeVZhbHVlKCcnKTtcblxuICAgICAgICAgICAgaWYgKCgwLCBfaXNGdW5jdGlvbjIuZGVmYXVsdCkob25GaWVsZENoYW5nZSkpIHtcbiAgICAgICAgICAgICAgb25GaWVsZENoYW5nZShmaWVsZEtleSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICgoMCwgX2lzRnVuY3Rpb24yLmRlZmF1bHQpKG9uVmFsdWVDaGFuZ2UpKSB7XG4gICAgICAgICAgICAgIG9uVmFsdWVDaGFuZ2UoJycpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gWzRcbiAgICAgICAgICAgIC8qeWllbGQqL1xuICAgICAgICAgICAgLCBvbkZldGNoKG51bGwsIGZpZWxkS2V5LCByZWFkQWN0aW9uLCBzZXRQYWdpbmF0aW9uRGF0YSwgcGFnaW5hdGlvbkRhdGEuc2l6ZSwgZmlsdGVyVmFsdWVzLCBkYXRlVmFsdWVzLCBfcGFnaW5hdGlvbi5ERUZBVUxUX1BBR0UsIHNldElzTG9hZGluZywgZnVzc3lLZXkpXTtcblxuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIF9hLnNlbnQoKTtcblxuICAgICAgICAgICAgcmV0dXJuIFsyXG4gICAgICAgICAgICAvKnJldHVybiovXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSwgW3JlYWRBY3Rpb24sIHBhZ2luYXRpb25EYXRhLnNpemUsIGZpbHRlclZhbHVlcywgZGF0ZVZhbHVlcywgb25GaWVsZENoYW5nZSwgb25WYWx1ZUNoYW5nZSwgZnVzc3lLZXldKTtcbiAgdmFyIG9uUXVlcnlWYWx1ZUNoYW5nZSA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciB2YWx1ZSA9IF9hLnRhcmdldC52YWx1ZTtcblxuICAgIGlmICgoMCwgX2lzRnVuY3Rpb24yLmRlZmF1bHQpKG9uVmFsdWVDaGFuZ2UpKSB7XG4gICAgICBvblZhbHVlQ2hhbmdlKHZhbHVlKTtcbiAgICB9XG5cbiAgICBzZXRRdWVyeVZhbHVlKHZhbHVlKTtcbiAgICBvblF1ZXJ5RmV0Y2godmFsdWUsIHF1ZXJ5RmllbGQsIHJlYWRBY3Rpb24sIHNldFBhZ2luYXRpb25EYXRhLCBwYWdpbmF0aW9uRGF0YS5zaXplLCBmaWx0ZXJWYWx1ZXMsIGRhdGVWYWx1ZXMsIF9wYWdpbmF0aW9uLkRFRkFVTFRfUEFHRSwgc2V0SXNMb2FkaW5nLCBmdXNzeUtleSk7XG4gIH0sIFtvblZhbHVlQ2hhbmdlLCBxdWVyeUZpZWxkLCByZWFkQWN0aW9uLCBwYWdpbmF0aW9uRGF0YS5zaXplLCBmaWx0ZXJWYWx1ZXMsIGRhdGVWYWx1ZXMsIGZ1c3N5S2V5XSk7XG4gIHZhciBvbkZpbHRlclZhbHVlQ2hhbmdlID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKHZhbHVlLCBkYXRhS2V5KSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBvbkNoYW5nZSwgbmV3RmlsdGVyVmFsdWVzO1xuICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICBpZiAoKDAsIF91c2VCYXNpY1RhYmxlLmlzRmlsdGVyVmFsdWVzU2FtZSkodmFsdWUsIGRhdGFLZXksIGZpbHRlclZhbHVlcykpIHtcbiAgICAgICAgICByZXR1cm4gWzJcbiAgICAgICAgICAvKnJldHVybiovXG4gICAgICAgICAgLCBudWxsXTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9uQ2hhbmdlID0gKDAsIF9mbG93Mi5kZWZhdWx0KSgoMCwgX2ZpbmQyLmRlZmF1bHQpKCgwLCBfcHJvcEVxMi5kZWZhdWx0KSgnZGF0YUtleScsIGRhdGFLZXkpKSwgKDAsIF9wcm9wMi5kZWZhdWx0KSgnb25GaWx0ZXJDaGFuZ2UnKSkoZmlsdGVycyk7XG5cbiAgICAgICAgaWYgKCgwLCBfaXNGdW5jdGlvbjIuZGVmYXVsdCkob25DaGFuZ2UpKSB7XG4gICAgICAgICAgb25DaGFuZ2UodmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgbmV3RmlsdGVyVmFsdWVzID0gKDAsIF9mbG93Mi5kZWZhdWx0KSgoMCwgX3JlamVjdDIuZGVmYXVsdCkoKDAsIF9wcm9wRXEyLmRlZmF1bHQpKCdkYXRhS2V5JykoZGF0YUtleSkpLCAoMCwgX2NvbmNhdDIuZGVmYXVsdCkoe1xuICAgICAgICAgIGRhdGFLZXk6IGRhdGFLZXksXG4gICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgIH0pKShmaWx0ZXJWYWx1ZXMpO1xuICAgICAgICBzZXRGaWx0ZXJWYWx1ZXMobmV3RmlsdGVyVmFsdWVzKTtcbiAgICAgICAgcmV0dXJuIFsyXG4gICAgICAgIC8qcmV0dXJuKi9cbiAgICAgICAgLCBvbkZldGNoKHF1ZXJ5VmFsdWUsIHF1ZXJ5RmllbGQsIHJlYWRBY3Rpb24sIHNldFBhZ2luYXRpb25EYXRhLCBwYWdpbmF0aW9uRGF0YS5zaXplLCBuZXdGaWx0ZXJWYWx1ZXMsIGRhdGVWYWx1ZXMsIF9wYWdpbmF0aW9uLkRFRkFVTFRfUEFHRSwgc2V0SXNMb2FkaW5nLCBmdXNzeUtleSldO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sIFtmaWx0ZXJzLCBxdWVyeVZhbHVlLCBxdWVyeUZpZWxkLCByZWFkQWN0aW9uLCBwYWdpbmF0aW9uRGF0YS5zaXplLCBkYXRlVmFsdWVzLCBmdXNzeUtleSwgZmlsdGVyVmFsdWVzXSk7XG4gIHZhciBvbkRhdGVDaGFuZ2UgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAodmFsdWUsIGRhdGFLZXkpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG9uQ2hhbmdlLCBuZXdEYXRlcztcbiAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgaWYgKCgwLCBfZmxvdzIuZGVmYXVsdCkoKDAsIF9maW5kMi5kZWZhdWx0KSgoMCwgX3Byb3BFcTIuZGVmYXVsdCkoJ2RhdGFLZXknKShkYXRhS2V5KSksICgwLCBfcHJvcEVxMi5kZWZhdWx0KSgndmFsdWUnLCB2YWx1ZSkpKGZpbHRlclZhbHVlcykpIHtcbiAgICAgICAgICByZXR1cm4gWzJcbiAgICAgICAgICAvKnJldHVybiovXG4gICAgICAgICAgLCBudWxsXTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9uQ2hhbmdlID0gKDAsIF9mbG93Mi5kZWZhdWx0KSgoMCwgX2ZpbmQyLmRlZmF1bHQpKCgwLCBfcHJvcEVxMi5kZWZhdWx0KSgnZGF0YUtleScsIGRhdGFLZXkpKSwgKDAsIF9wcm9wMi5kZWZhdWx0KSgnb25EYXRlQ2hhbmdlJykpKGRhdGVQaWNrZXJzKTtcblxuICAgICAgICBpZiAoKDAsIF9pc0Z1bmN0aW9uMi5kZWZhdWx0KShvbkNoYW5nZSkpIHtcbiAgICAgICAgICBvbkNoYW5nZSh2YWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBuZXdEYXRlcyA9ICgwLCBfZmxvdzIuZGVmYXVsdCkoKDAsIF9yZWplY3QyLmRlZmF1bHQpKCgwLCBfcHJvcEVxMi5kZWZhdWx0KSgnZGF0YUtleScpKGRhdGFLZXkpKSwgKDAsIF9jb25jYXQyLmRlZmF1bHQpKHtcbiAgICAgICAgICBkYXRhS2V5OiBkYXRhS2V5LFxuICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICB9KSkoZGF0ZVZhbHVlcyk7XG4gICAgICAgIHNldERhdGVWYWx1ZXMobmV3RGF0ZXMpO1xuICAgICAgICByZXR1cm4gWzJcbiAgICAgICAgLypyZXR1cm4qL1xuICAgICAgICAsIG9uRmV0Y2gocXVlcnlWYWx1ZSwgcXVlcnlGaWVsZCwgcmVhZEFjdGlvbiwgc2V0UGFnaW5hdGlvbkRhdGEsIHBhZ2luYXRpb25EYXRhLnNpemUsIGZpbHRlclZhbHVlcywgbmV3RGF0ZXMsIF9wYWdpbmF0aW9uLkRFRkFVTFRfUEFHRSwgc2V0SXNMb2FkaW5nLCBmdXNzeUtleSldO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sIFtkYXRlUGlja2VycywgZGF0ZVZhbHVlcywgcXVlcnlWYWx1ZSwgcXVlcnlGaWVsZCwgcmVhZEFjdGlvbiwgcGFnaW5hdGlvbkRhdGEuc2l6ZSwgZmlsdGVyVmFsdWVzLCBmdXNzeUtleV0pO1xuICB2YXIgb25SZXNldCA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uICgpIHtcbiAgICByZXNldCgpO1xuICAgIG9uRmV0Y2gobnVsbCwgZGVmYXVsdFF1ZXJ5RmllbGQsIHJlYWRBY3Rpb24sIHNldFBhZ2luYXRpb25EYXRhLCBwYWdpbmF0aW9uRGF0YS5zaXplLCBkZWZhdWx0RmlsdGVyVmFsdWVzLCBbXSwgX3BhZ2luYXRpb24uREVGQVVMVF9QQUdFLCBzZXRJc0xvYWRpbmcsIGZ1c3N5S2V5KTtcbiAgfSwgW2RlZmF1bHRRdWVyeUZpZWxkLCBkZWZhdWx0RmlsdGVyVmFsdWVzLCByZWFkQWN0aW9uLCByZXNldCwgZnVzc3lLZXldKTtcbiAgdmFyIG9uUGFnZUNoYW5nZSA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uIChwYWdlLCBwYWdlU2l6ZSkge1xuICAgIHZhciBjdXJyZW50ID0gcGFnaW5hdGlvbkRhdGEuY3VycmVudCxcbiAgICAgICAgc2l6ZSA9IHBhZ2luYXRpb25EYXRhLnNpemU7XG5cbiAgICBpZiAoY3VycmVudCAhPT0gcGFnZSAtIDEgfHwgc2l6ZSAhPT0gcGFnZVNpemUpIHtcbiAgICAgIG9uRmV0Y2gocXVlcnlWYWx1ZSwgcXVlcnlGaWVsZCwgcmVhZEFjdGlvbiwgc2V0UGFnaW5hdGlvbkRhdGEsIHBhZ2VTaXplLCBmaWx0ZXJWYWx1ZXMsIGRhdGVWYWx1ZXMsIHBhZ2UgLSAxLCBzZXRJc0xvYWRpbmcsIGZ1c3N5S2V5KTtcbiAgICB9XG4gIH0sIFtxdWVyeVZhbHVlLCBxdWVyeUZpZWxkLCByZWFkQWN0aW9uLCBwYWdpbmF0aW9uRGF0YS5zaXplLCBmaWx0ZXJWYWx1ZXMsIGRhdGVWYWx1ZXMsIGZ1c3N5S2V5LCBwYWdpbmF0aW9uRGF0YS5jdXJyZW50XSk7XG4gIHZhciBvblJlbG9hZCA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gb25GZXRjaChxdWVyeVZhbHVlLCBxdWVyeUZpZWxkLCByZWFkQWN0aW9uLCBzZXRQYWdpbmF0aW9uRGF0YSwgcGFnaW5hdGlvbkRhdGEuc2l6ZSwgZmlsdGVyVmFsdWVzLCBkYXRlVmFsdWVzLCBwYWdpbmF0aW9uRGF0YS5jdXJyZW50LCBzZXRJc0xvYWRpbmcsIGZ1c3N5S2V5KTtcbiAgfSwgW3F1ZXJ5VmFsdWUsIHF1ZXJ5RmllbGQsIHJlYWRBY3Rpb24sIHBhZ2luYXRpb25EYXRhLnNpemUsIGZpbHRlclZhbHVlcywgZGF0ZVZhbHVlcywgcGFnaW5hdGlvbkRhdGEuY3VycmVudCwgZnVzc3lLZXldKTtcbiAgdmFyIG9uQ3JlYXRvclN1Ym1pdCA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uICh2YWx1ZXMsIGZvcm1JbnN0YW5jZSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBpZiAoIWNyZWF0b3JTdWJtaXQpIHJldHVybiBbM1xuICAgICAgICAgICAgLypicmVhayovXG4gICAgICAgICAgICAsIDJdO1xuICAgICAgICAgICAgcmV0dXJuIFs0XG4gICAgICAgICAgICAvKnlpZWxkKi9cbiAgICAgICAgICAgICwgY3JlYXRvclN1Ym1pdCh2YWx1ZXMsIGZvcm1JbnN0YW5jZSldO1xuXG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgX2Euc2VudCgpO1xuXG4gICAgICAgICAgICBfYS5sYWJlbCA9IDI7XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gWzRcbiAgICAgICAgICAgIC8qeWllbGQqL1xuICAgICAgICAgICAgLCBvbkZldGNoKHF1ZXJ5VmFsdWUsIHF1ZXJ5RmllbGQsIHJlYWRBY3Rpb24sIHNldFBhZ2luYXRpb25EYXRhLCBwYWdpbmF0aW9uRGF0YS5zaXplLCBmaWx0ZXJWYWx1ZXMsIGRhdGVWYWx1ZXMsIF9wYWdpbmF0aW9uLkRFRkFVTFRfUEFHRSwgc2V0SXNMb2FkaW5nLCBmdXNzeUtleSldO1xuXG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgX2Euc2VudCgpO1xuXG4gICAgICAgICAgICBjbG9zZUNyZWF0b3IoKTtcblxuICAgICAgICAgICAgX21lc3NhZ2UyLmRlZmF1bHQuc3VjY2VzcyhpMThuKCdjcmVhdGVTdWNjZXNzJykpO1xuXG4gICAgICAgICAgICByZXR1cm4gWzJcbiAgICAgICAgICAgIC8qcmV0dXJuKi9cbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LCBbY3JlYXRvclN1Ym1pdCwgcXVlcnlWYWx1ZSwgcXVlcnlGaWVsZCwgcmVhZEFjdGlvbiwgcGFnaW5hdGlvbkRhdGEuc2l6ZSwgZmlsdGVyVmFsdWVzLCBkYXRlVmFsdWVzLCBmdXNzeUtleV0pO1xuICB2YXIgb25FZGl0b3JTdWJtaXQgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAodmFsdWVzLCBmb3JtSW5zdGFuY2UpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF9hO1xuXG4gICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBpZiAoIWVkaXRvclN1Ym1pdCkgcmV0dXJuIFszXG4gICAgICAgICAgICAvKmJyZWFrKi9cbiAgICAgICAgICAgICwgMl07XG4gICAgICAgICAgICByZXR1cm4gWzRcbiAgICAgICAgICAgIC8qeWllbGQqL1xuICAgICAgICAgICAgLCBlZGl0b3JTdWJtaXQoX19hc3NpZ24oX19hc3NpZ24oe30sIHZhbHVlcyksIHtcbiAgICAgICAgICAgICAgaWQ6IChfYSA9IGVkaXRJdGVtKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaWRcbiAgICAgICAgICAgIH0pLCBmb3JtSW5zdGFuY2UsIGVkaXRJdGVtKV07XG5cbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBfYi5zZW50KCk7XG5cbiAgICAgICAgICAgIF9iLmxhYmVsID0gMjtcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGlmICghc2hvdWxkUmVsb2FkKSByZXR1cm4gWzNcbiAgICAgICAgICAgIC8qYnJlYWsqL1xuICAgICAgICAgICAgLCA0XTtcbiAgICAgICAgICAgIHJldHVybiBbNFxuICAgICAgICAgICAgLyp5aWVsZCovXG4gICAgICAgICAgICAsIG9uUmVsb2FkKCldO1xuXG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgX2Iuc2VudCgpO1xuXG4gICAgICAgICAgICBfYi5sYWJlbCA9IDQ7XG5cbiAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICBjbG9zZUVkaXRvcigpO1xuXG4gICAgICAgICAgICBfbWVzc2FnZTIuZGVmYXVsdC5zdWNjZXNzKGkxOG4oJ2VkaXRTdWNjZXNzJykpO1xuXG4gICAgICAgICAgICByZXR1cm4gWzJcbiAgICAgICAgICAgIC8qcmV0dXJuKi9cbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LCBbZWRpdG9yU3VibWl0LCBlZGl0SXRlbSwgc2hvdWxkUmVsb2FkLCBvblJlbG9hZF0pO1xuICByZXR1cm4ge1xuICAgIGRhdGE6IGRhdGEsXG4gICAgb3BlbkNyZWF0b3I6IG9wZW5DcmVhdG9yLFxuICAgIG9wZW5FZGl0b3I6IG9wZW5FZGl0b3IsXG4gICAgb3BlbkRldGFpbHM6IG9wZW5EZXRhaWxzLFxuICAgIHJlbG9hZDogb25SZWxvYWQsXG4gICAgcmVzZXQ6IG9uUmVzZXQsXG4gICAgaXNMb2FkaW5nOiBpc0xvYWRpbmcsXG4gICAgZmlsdGVyVmFsdWVzOiBmaWx0ZXJWYWx1ZXMsXG4gICAgY2hhbmdlRmlsdGVyVmFsdWU6IG9uRmlsdGVyVmFsdWVDaGFuZ2UsXG4gICAgY2hhbmdlRGF0ZTogb25EYXRlQ2hhbmdlLFxuICAgIHBhZ2luYXRpb246IF9fYXNzaWduKHtcbiAgICAgIHNob3dUb3RhbDogZnVuY3Rpb24gKHRvdGFsKSB7XG4gICAgICAgIHJldHVybiBcIlwiICsgaTE4bigndG90YWxQYWdlJywge1xuICAgICAgICAgIHRvdGFsOiB0b3RhbFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBwYWdlU2l6ZTogcGFnaW5hdGlvbkRhdGEuc2l6ZSxcbiAgICAgIGN1cnJlbnQ6IHBhZ2luYXRpb25EYXRhLmN1cnJlbnQgKyAxLFxuICAgICAgdG90YWw6IHBhZ2luYXRpb25EYXRhLnRvdGFsLFxuICAgICAgb25DaGFuZ2U6IG9uUGFnZUNoYW5nZVxuICAgIH0sIHBhZ2luYXRpb24pLFxuICAgIHRhYmxlSGVhZGVyOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF90YWJsZUhlYWRlci5kZWZhdWx0LCB7XG4gICAgICBxdWVyeToge1xuICAgICAgICBvbkZpZWxkQ2hhbmdlOiBvblF1ZXJ5RmllbGRDaGFuZ2UsXG4gICAgICAgIG9uVmFsdWVDaGFuZ2U6IG9uUXVlcnlWYWx1ZUNoYW5nZSxcbiAgICAgICAgdmFsdWU6IHF1ZXJ5VmFsdWUsXG4gICAgICAgIGZpZWxkOiBxdWVyeUZpZWxkLFxuICAgICAgICBmaWVsZHM6IGZpZWxkcyxcbiAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICBwbGFjZWhvbGRlcjogcGxhY2Vob2xkZXIsXG4gICAgICAgIGZ1c3N5OiAhIWZ1c3N5S2V5XG4gICAgICB9LFxuICAgICAgY3JlYXRlQnV0dG9uOiBjcmVhdGVCdXR0b24sXG4gICAgICBmaWx0ZXI6IHtcbiAgICAgICAgaXRlbXM6ICgwLCBfbWFwMi5kZWZhdWx0KShmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICB2YXIgZGF0YUtleSA9IF9hLmRhdGFLZXksXG4gICAgICAgICAgICAgIG9wdGlvbnMgPSBfYS5vcHRpb25zLFxuICAgICAgICAgICAgICBvdGhlcnMgPSBfX3Jlc3QoX2EsIFtcImRhdGFLZXlcIiwgXCJvcHRpb25zXCJdKTtcblxuICAgICAgICAgIHJldHVybiBfX2Fzc2lnbih7XG4gICAgICAgICAgICBkYXRhS2V5OiBkYXRhS2V5LFxuICAgICAgICAgICAgdmFsdWU6ICgwLCBfZmxvdzIuZGVmYXVsdCkoKDAsIF9maW5kMi5kZWZhdWx0KSgoMCwgX3Byb3BFcTIuZGVmYXVsdCkoJ2RhdGFLZXknKShkYXRhS2V5KSksICgwLCBfcHJvcDIuZGVmYXVsdCkoJ3ZhbHVlJykpKGZpbHRlclZhbHVlcyksXG4gICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zXG4gICAgICAgICAgfSwgb3RoZXJzKTtcbiAgICAgICAgfSkoZmlsdGVycyksXG4gICAgICAgIG9uU2VsZWN0OiBvbkZpbHRlclZhbHVlQ2hhbmdlXG4gICAgICB9LFxuICAgICAgZGF0ZVBpY2tlcjoge1xuICAgICAgICBpdGVtczogKDAsIF9tYXAyLmRlZmF1bHQpKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgIHZhciBkYXRhS2V5ID0gX2EuZGF0YUtleSxcbiAgICAgICAgICAgICAgb3RoZXJzID0gX19yZXN0KF9hLCBbXCJkYXRhS2V5XCJdKTtcblxuICAgICAgICAgIHJldHVybiBfX2Fzc2lnbih7XG4gICAgICAgICAgICBkYXRhS2V5OiBkYXRhS2V5LFxuICAgICAgICAgICAgdmFsdWU6ICgwLCBfZmxvdzIuZGVmYXVsdCkoKDAsIF9maW5kMi5kZWZhdWx0KSgoMCwgX3Byb3BFcTIuZGVmYXVsdCkoJ2RhdGFLZXknKShkYXRhS2V5KSksICgwLCBfcHJvcDIuZGVmYXVsdCkoJ3ZhbHVlJykpKGRhdGVWYWx1ZXMpXG4gICAgICAgICAgfSwgb3RoZXJzKTtcbiAgICAgICAgfSkoZGF0ZVBpY2tlcnMpLFxuICAgICAgICBvblNlbGVjdDogb25EYXRlQ2hhbmdlXG4gICAgICB9LFxuICAgICAgZGV0YWlsczogZGV0YWlscyAmJiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZGV0YWlscyksIHtcbiAgICAgICAgZGF0YVNvdXJjZTogZ2V0RGV0YWlsc0RhdGFTb3VyY2UgPyBnZXREYXRhU291cmNlKGRldGFpbHNJdGVtKSA6IGRldGFpbHNJdGVtLFxuICAgICAgICB2aXNpYmxlOiBkZXRhaWxzVmlzaWJsZSxcbiAgICAgICAgY2xvc2U6IGNsb3NlRGV0YWlsc1xuICAgICAgfSksXG4gICAgICBjcmVhdG9yOiBjcmVhdG9yICYmIF9fYXNzaWduKF9fYXNzaWduKHt9LCBjcmVhdG9yKSwge1xuICAgICAgICBvblN1Ym1pdDogb25DcmVhdG9yU3VibWl0LFxuICAgICAgICB2aXNpYmxlOiBjcmVhdG9yVmlzaWJsZSxcbiAgICAgICAgb25DbG9zZTogY2xvc2VDcmVhdG9yXG4gICAgICB9KSxcbiAgICAgIGVkaXRvcjogZWRpdG9yICYmIF9fYXNzaWduKF9fYXNzaWduKHt9LCBlZGl0b3IpLCB7XG4gICAgICAgIGluaXRpYWxWYWx1ZXM6IGdldEVkaXRvckluaXRpYWxWYWx1ZXMgPyBnZXRFZGl0b3JJbml0aWFsVmFsdWVzKGVkaXRJdGVtKSA6IGVkaXRJdGVtLFxuICAgICAgICBvblN1Ym1pdDogb25FZGl0b3JTdWJtaXQsXG4gICAgICAgIHZpc2libGU6IGVkaXRvclZpc2libGUsXG4gICAgICAgIG9uQ2xvc2U6IGNsb3NlRWRpdG9yXG4gICAgICB9KSxcbiAgICAgIG9wZW5FZGl0b3I6IG9wZW5FZGl0b3IsXG4gICAgICBvcGVuQ3JlYXRvcjogb3BlbkNyZWF0b3IsXG4gICAgICByZXNldDogc2hvd1Jlc2V0ID8gb25SZXNldCA6IHVuZGVmaW5lZFxuICAgIH0pXG4gIH07XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB1c2VCYXNpY1RhYmxlO1xuZXhwb3J0cy5pc0ZpbHRlclZhbHVlc1NhbWUgPSB2b2lkIDA7XG5cbnZhciBfaXNBcnJheTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2gvZnAvaXNBcnJheVwiKSk7XG5cbnZhciBfcmVqZWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaC9mcC9yZWplY3RcIikpO1xuXG52YXIgX3Byb3BFcTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2gvZnAvcHJvcEVxXCIpKTtcblxudmFyIF9wcm9wMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaC9mcC9wcm9wXCIpKTtcblxudmFyIF9tYXAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoL2ZwL21hcFwiKSk7XG5cbnZhciBfaXNVbmRlZmluZWQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoL2ZwL2lzVW5kZWZpbmVkXCIpKTtcblxudmFyIF9pc0VxdWFsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaC9mcC9pc0VxdWFsXCIpKTtcblxudmFyIF9mbG93MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaC9mcC9mbG93XCIpKTtcblxudmFyIF9maXJzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2gvZnAvZmlyc3RcIikpO1xuXG52YXIgX2ZpbmQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoL2ZwL2ZpbmRcIikpO1xuXG52YXIgX2Nsb25lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaC9mcC9jbG9uZVwiKSk7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKFwicmVhY3RcIik7XG5cbnZhciBfdXNlRGV0YWlscyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdXNlLWRldGFpbHNcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgaXNGaWx0ZXJWYWx1ZXNTYW1lID0gZnVuY3Rpb24gKHZhbHVlLCBkYXRhS2V5LCBmaWx0ZXJWYWx1ZXMpIHtcbiAgcmV0dXJuICgwLCBfZmxvdzIuZGVmYXVsdCkoKDAsIF9maW5kMi5kZWZhdWx0KSgoMCwgX3Byb3BFcTIuZGVmYXVsdCkoJ2RhdGFLZXknKShkYXRhS2V5KSksICgwLCBfcHJvcDIuZGVmYXVsdCkoJ3ZhbHVlJyksIGZ1bmN0aW9uIChvbGRWYWx1ZSkge1xuICAgIGlmIChvbGRWYWx1ZSAmJiB2YWx1ZSkge1xuICAgICAgaWYgKCgwLCBfaXNBcnJheTIuZGVmYXVsdCkob2xkVmFsdWUpICYmICgwLCBfaXNBcnJheTIuZGVmYXVsdCkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiAoMCwgX2lzRXF1YWwyLmRlZmF1bHQpKCgwLCBfY2xvbmUyLmRlZmF1bHQpKG9sZFZhbHVlKS5zb3J0KCkpKCgwLCBfY2xvbmUyLmRlZmF1bHQpKHZhbHVlKS5zb3J0KCkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb2xkVmFsdWUgPT09IHZhbHVlO1xuICAgIH1cblxuICAgIGlmIChvbGRWYWx1ZSAmJiAhdmFsdWUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIW9sZFZhbHVlICYmIHZhbHVlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH0pKGZpbHRlclZhbHVlcyk7XG59O1xuXG5leHBvcnRzLmlzRmlsdGVyVmFsdWVzU2FtZSA9IGlzRmlsdGVyVmFsdWVzU2FtZTtcblxuZnVuY3Rpb24gdXNlQmFzaWNUYWJsZShfYSkge1xuICB2YXIgZmllbGRzID0gX2EuZmllbGRzLFxuICAgICAgZmlsdGVycyA9IF9hLmZpbHRlcnMsXG4gICAgICBlZGl0b3JPbk9wZW4gPSBfYS5lZGl0b3JPbk9wZW4sXG4gICAgICBlZGl0b3JPbkNsb3NlID0gX2EuZWRpdG9yT25DbG9zZSxcbiAgICAgIGNyZWF0b3JPbk9wZW4gPSBfYS5jcmVhdG9yT25PcGVuLFxuICAgICAgY3JlYXRvck9uQ2xvc2UgPSBfYS5jcmVhdG9yT25DbG9zZSxcbiAgICAgIGRldGFpbHNPbk9wZW4gPSBfYS5kZXRhaWxzT25PcGVuLFxuICAgICAgZGV0YWlsc09uQ2xvc2UgPSBfYS5kZXRhaWxzT25DbG9zZTtcbiAgdmFyIGRlZmF1bHRRdWVyeUZpZWxkID0gKDAsIF9mbG93Mi5kZWZhdWx0KShfZmlyc3QyLmRlZmF1bHQsICgwLCBfcHJvcDIuZGVmYXVsdCkoJ2RhdGFLZXknKSkoZmllbGRzKTtcbiAgdmFyIGRlZmF1bHRGaWx0ZXJWYWx1ZXMgPSAoMCwgX2Zsb3cyLmRlZmF1bHQpKCgwLCBfcmVqZWN0Mi5kZWZhdWx0KSgoMCwgX2Zsb3cyLmRlZmF1bHQpKCgwLCBfcHJvcDIuZGVmYXVsdCkoJ2RlZmF1bHRWYWx1ZScpLCBfaXNVbmRlZmluZWQyLmRlZmF1bHQpKSwgKDAsIF9tYXAyLmRlZmF1bHQpKGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBkZWZhdWx0VmFsdWUgPSBfYS5kZWZhdWx0VmFsdWUsXG4gICAgICAgIGRhdGFLZXkgPSBfYS5kYXRhS2V5O1xuICAgIHJldHVybiB7XG4gICAgICBkYXRhS2V5OiBkYXRhS2V5LFxuICAgICAgdmFsdWU6IGRlZmF1bHRWYWx1ZVxuICAgIH07XG4gIH0pKShmaWx0ZXJzKTtcblxuICB2YXIgX2IgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShbXSksXG4gICAgICBkYXRlVmFsdWVzID0gX2JbMF0sXG4gICAgICBzZXREYXRlVmFsdWVzID0gX2JbMV07XG5cbiAgdmFyIF9jID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZGVmYXVsdFF1ZXJ5RmllbGQpLFxuICAgICAgcXVlcnlGaWVsZCA9IF9jWzBdLFxuICAgICAgc2V0UXVlcnlGaWVsZCA9IF9jWzFdO1xuXG4gIHZhciBfZCA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKCcnKSxcbiAgICAgIHF1ZXJ5VmFsdWUgPSBfZFswXSxcbiAgICAgIHNldFF1ZXJ5VmFsdWUgPSBfZFsxXTtcblxuICB2YXIgX2UgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShkZWZhdWx0RmlsdGVyVmFsdWVzKSxcbiAgICAgIGZpbHRlclZhbHVlcyA9IF9lWzBdLFxuICAgICAgc2V0RmlsdGVyVmFsdWVzID0gX2VbMV07XG5cbiAgdmFyIF9mID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZmFsc2UpLFxuICAgICAgY3JlYXRvclZpc2libGUgPSBfZlswXSxcbiAgICAgIHNldENyZWF0b3JWaXNpYmxlID0gX2ZbMV07XG5cbiAgdmFyIF9nID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZmFsc2UpLFxuICAgICAgZWRpdG9yVmlzaWJsZSA9IF9nWzBdLFxuICAgICAgc2V0RWRpdG9yVmlzaWJsZSA9IF9nWzFdO1xuXG4gIHZhciBfaCA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKG51bGwpLFxuICAgICAgZWRpdEl0ZW0gPSBfaFswXSxcbiAgICAgIHNldEVkaXRJdGVtID0gX2hbMV07XG5cbiAgdmFyIG9wZW5DcmVhdG9yID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKCkge1xuICAgIHNldENyZWF0b3JWaXNpYmxlKHRydWUpO1xuXG4gICAgaWYgKGNyZWF0b3JPbk9wZW4pIHtcbiAgICAgIGNyZWF0b3JPbk9wZW4oKTtcbiAgICB9XG4gIH0sIFtjcmVhdG9yT25PcGVuXSk7XG4gIHZhciBjbG9zZUNyZWF0b3IgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAoKSB7XG4gICAgc2V0Q3JlYXRvclZpc2libGUoZmFsc2UpO1xuXG4gICAgaWYgKGNyZWF0b3JPbkNsb3NlKSB7XG4gICAgICBjcmVhdG9yT25DbG9zZSgpO1xuICAgIH1cbiAgfSwgW2NyZWF0b3JPbkNsb3NlXSk7XG4gIHZhciBvcGVuRWRpdG9yID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBzZXRFZGl0b3JWaXNpYmxlKHRydWUpO1xuICAgIHNldEVkaXRJdGVtKGl0ZW0pO1xuXG4gICAgaWYgKGVkaXRvck9uT3Blbikge1xuICAgICAgZWRpdG9yT25PcGVuKGl0ZW0pO1xuICAgIH1cbiAgfSwgW2VkaXRvck9uT3Blbl0pO1xuICB2YXIgY2xvc2VFZGl0b3IgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAoKSB7XG4gICAgc2V0RWRpdG9yVmlzaWJsZShmYWxzZSk7XG4gICAgc2V0RWRpdEl0ZW0obnVsbCk7XG5cbiAgICBpZiAoZWRpdG9yT25DbG9zZSkge1xuICAgICAgZWRpdG9yT25DbG9zZSgpO1xuICAgIH1cbiAgfSwgW2VkaXRvck9uQ2xvc2VdKTtcbiAgdmFyIHJlc2V0ID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKCkge1xuICAgIHNldERhdGVWYWx1ZXMoW10pO1xuICAgIHNldFF1ZXJ5RmllbGQoZGVmYXVsdFF1ZXJ5RmllbGQpO1xuICAgIHNldFF1ZXJ5VmFsdWUoJycpO1xuICAgIHNldEZpbHRlclZhbHVlcyhkZWZhdWx0RmlsdGVyVmFsdWVzKTtcbiAgICBzZXRDcmVhdG9yVmlzaWJsZShmYWxzZSk7XG4gICAgc2V0RWRpdG9yVmlzaWJsZShmYWxzZSk7XG4gICAgc2V0RWRpdEl0ZW0obnVsbCk7XG4gIH0sIFtkZWZhdWx0UXVlcnlGaWVsZCwgZGVmYXVsdEZpbHRlclZhbHVlc10pO1xuXG4gIHZhciBfaiA9ICgwLCBfdXNlRGV0YWlscy5kZWZhdWx0KSh7XG4gICAgZGV0YWlsc09uT3BlbjogZGV0YWlsc09uT3BlbixcbiAgICBkZXRhaWxzT25DbG9zZTogZGV0YWlsc09uQ2xvc2VcbiAgfSksXG4gICAgICBkZXRhaWxzSXRlbSA9IF9qLmRldGFpbHNJdGVtLFxuICAgICAgZGV0YWlsc1Zpc2libGUgPSBfai5kZXRhaWxzVmlzaWJsZSxcbiAgICAgIG9wZW5EZXRhaWxzID0gX2oub3BlbkRldGFpbHMsXG4gICAgICBjbG9zZURldGFpbHMgPSBfai5jbG9zZURldGFpbHM7XG5cbiAgcmV0dXJuIHtcbiAgICBkZWZhdWx0RmlsdGVyVmFsdWVzOiBkZWZhdWx0RmlsdGVyVmFsdWVzLFxuICAgIGRlZmF1bHRRdWVyeUZpZWxkOiBkZWZhdWx0UXVlcnlGaWVsZCxcbiAgICBkYXRlVmFsdWVzOiBkYXRlVmFsdWVzLFxuICAgIHNldERhdGVWYWx1ZXM6IHNldERhdGVWYWx1ZXMsXG4gICAgcXVlcnlGaWVsZDogcXVlcnlGaWVsZCxcbiAgICBzZXRRdWVyeUZpZWxkOiBzZXRRdWVyeUZpZWxkLFxuICAgIHF1ZXJ5VmFsdWU6IHF1ZXJ5VmFsdWUsXG4gICAgc2V0UXVlcnlWYWx1ZTogc2V0UXVlcnlWYWx1ZSxcbiAgICBmaWx0ZXJWYWx1ZXM6IGZpbHRlclZhbHVlcyxcbiAgICBzZXRGaWx0ZXJWYWx1ZXM6IHNldEZpbHRlclZhbHVlcyxcbiAgICBjcmVhdG9yVmlzaWJsZTogY3JlYXRvclZpc2libGUsXG4gICAgZWRpdG9yVmlzaWJsZTogZWRpdG9yVmlzaWJsZSxcbiAgICBlZGl0SXRlbTogZWRpdEl0ZW0sXG4gICAgb3BlbkNyZWF0b3I6IG9wZW5DcmVhdG9yLFxuICAgIGNsb3NlQ3JlYXRvcjogY2xvc2VDcmVhdG9yLFxuICAgIG9wZW5FZGl0b3I6IG9wZW5FZGl0b3IsXG4gICAgY2xvc2VFZGl0b3I6IGNsb3NlRWRpdG9yLFxuICAgIHJlc2V0OiByZXNldCxcbiAgICBvcGVuRGV0YWlsczogb3BlbkRldGFpbHMsXG4gICAgY2xvc2VEZXRhaWxzOiBjbG9zZURldGFpbHMsXG4gICAgZGV0YWlsc1Zpc2libGU6IGRldGFpbHNWaXNpYmxlLFxuICAgIGRldGFpbHNJdGVtOiBkZXRhaWxzSXRlbVxuICB9O1xufSIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZShcInJlYWN0XCIpO1xuXG52YXIgX2RlZmF1bHQgPSBmdW5jdGlvbiBfZGVmYXVsdChfYSkge1xuICB2YXIgX2IgPSBfYSA9PT0gdm9pZCAwID8ge30gOiBfYSxcbiAgICAgIGRldGFpbHNPbk9wZW4gPSBfYi5kZXRhaWxzT25PcGVuLFxuICAgICAgZGV0YWlsc09uQ2xvc2UgPSBfYi5kZXRhaWxzT25DbG9zZTtcblxuICB2YXIgX2MgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShmYWxzZSksXG4gICAgICBkZXRhaWxzVmlzaWJsZSA9IF9jWzBdLFxuICAgICAgc2V0RGV0YWlsc1Zpc2libGUgPSBfY1sxXTtcblxuICB2YXIgX2QgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShudWxsKSxcbiAgICAgIGRldGFpbHNJdGVtID0gX2RbMF0sXG4gICAgICBzZXREZXRhaWxzSXRlbSA9IF9kWzFdO1xuXG4gIHZhciBvcGVuRGV0YWlscyA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgc2V0RGV0YWlsc1Zpc2libGUodHJ1ZSk7XG4gICAgc2V0RGV0YWlsc0l0ZW0oaXRlbSk7XG5cbiAgICBpZiAoZGV0YWlsc09uT3Blbikge1xuICAgICAgZGV0YWlsc09uT3BlbihpdGVtKTtcbiAgICB9XG4gIH0sIFtkZXRhaWxzT25PcGVuXSk7XG4gIHZhciBjbG9zZURldGFpbHMgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAoKSB7XG4gICAgc2V0RGV0YWlsc1Zpc2libGUoZmFsc2UpO1xuICAgIHNldERldGFpbHNJdGVtKG51bGwpO1xuXG4gICAgaWYgKGRldGFpbHNPbkNsb3NlKSB7XG4gICAgICBkZXRhaWxzT25DbG9zZSgpO1xuICAgIH1cbiAgfSwgW2RldGFpbHNPbkNsb3NlXSk7XG4gIHJldHVybiB7XG4gICAgZGV0YWlsc1Zpc2libGU6IGRldGFpbHNWaXNpYmxlLFxuICAgIGRldGFpbHNJdGVtOiBkZXRhaWxzSXRlbSxcbiAgICBvcGVuRGV0YWlsczogb3BlbkRldGFpbHMsXG4gICAgY2xvc2VEZXRhaWxzOiBjbG9zZURldGFpbHNcbiAgfTtcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdXNlTG9jYWxUYWJsZTtcblxudmFyIF9tZXNzYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImFudGQvbGliL21lc3NhZ2VcIikpO1xuXG52YXIgX2lzQXJyYXkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoL2ZwL2lzQXJyYXlcIikpO1xuXG52YXIgX2tleXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoL2ZwL2tleXNcIikpO1xuXG52YXIgX2lzRW1wdHkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoL2ZwL2lzRW1wdHlcIikpO1xuXG52YXIgX2FueTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2gvZnAvYW55XCIpKTtcblxudmFyIF90b1VwcGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaC9mcC90b1VwcGVyXCIpKTtcblxudmFyIF9yZWplY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoL2ZwL3JlamVjdFwiKSk7XG5cbnZhciBfcHJvcEVxMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaC9mcC9wcm9wRXFcIikpO1xuXG52YXIgX3Byb3AyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoL2ZwL3Byb3BcIikpO1xuXG52YXIgX21hcDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2gvZnAvbWFwXCIpKTtcblxudmFyIF9pc05pbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2gvZnAvaXNOaWxcIikpO1xuXG52YXIgX2lzRnVuY3Rpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoL2ZwL2lzRnVuY3Rpb25cIikpO1xuXG52YXIgX2luY2x1ZGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaC9mcC9pbmNsdWRlc1wiKSk7XG5cbnZhciBfZmxvdzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2gvZnAvZmxvd1wiKSk7XG5cbnZhciBfZmluZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2gvZnAvZmluZFwiKSk7XG5cbnZhciBfZmlsdGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaC9mcC9maWx0ZXJcIikpO1xuXG52YXIgX2V2ZXJ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaC9mcC9ldmVyeVwiKSk7XG5cbnZhciBfY29uY2F0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaC9mcC9jb25jYXRcIikpO1xuXG52YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZShcInJlYWN0XCIpKTtcblxudmFyIF9pMThuID0gcmVxdWlyZShcInJlbGllbnQvaTE4blwiKTtcblxudmFyIF9tb21lbnQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJtb21lbnRcIikpO1xuXG52YXIgX3RhYmxlSGVhZGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vY29tcG9uZW50cy90YWJsZS1oZWFkZXJcIikpO1xuXG52YXIgX3VzZUJhc2ljVGFibGUgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKFwiLi91c2UtYmFzaWMtdGFibGVcIikpO1xuXG52YXIgX3BhZ2luYXRpb24gPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzL3BhZ2luYXRpb25cIik7XG5cbmZ1bmN0aW9uIF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSgpIHsgaWYgKHR5cGVvZiBXZWFrTWFwICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiBudWxsOyB2YXIgY2FjaGUgPSBuZXcgV2Vha01hcCgpOyBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBjYWNoZTsgfTsgcmV0dXJuIGNhY2hlOyB9XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBvYmogIT09IFwiZnVuY3Rpb25cIikgeyByZXR1cm4geyBkZWZhdWx0OiBvYmogfTsgfSB2YXIgY2FjaGUgPSBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUoKTsgaWYgKGNhY2hlICYmIGNhY2hlLmhhcyhvYmopKSB7IHJldHVybiBjYWNoZS5nZXQob2JqKTsgfSB2YXIgbmV3T2JqID0ge307IHZhciBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IGhhc1Byb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDogbnVsbDsgaWYgKGRlc2MgJiYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOyB9IGVsc2UgeyBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgaWYgKGNhY2hlKSB7IGNhY2hlLnNldChvYmosIG5ld09iaik7IH0gcmV0dXJuIG5ld09iajsgfVxuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgX19hc3NpZ24gPSB2b2lkIDAgJiYgKHZvaWQgMCkuX19hc3NpZ24gfHwgZnVuY3Rpb24gKCkge1xuICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHQpIHtcbiAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgIHMgPSBhcmd1bWVudHNbaV07XG5cbiAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHQ7XG4gIH07XG5cbiAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuXG52YXIgX19hd2FpdGVyID0gdm9pZCAwICYmICh2b2lkIDApLl9fYXdhaXRlciB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWplY3QoZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHtcbiAgICAgIHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpO1xuICAgIH1cblxuICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgfSk7XG59O1xuXG52YXIgX19nZW5lcmF0b3IgPSB2b2lkIDAgJiYgKHZvaWQgMCkuX19nZW5lcmF0b3IgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgdmFyIF8gPSB7XG4gICAgbGFiZWw6IDAsXG4gICAgc2VudDogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdO1xuICAgICAgcmV0dXJuIHRbMV07XG4gICAgfSxcbiAgICB0cnlzOiBbXSxcbiAgICBvcHM6IFtdXG4gIH0sXG4gICAgICBmLFxuICAgICAgeSxcbiAgICAgIHQsXG4gICAgICBnO1xuICByZXR1cm4gZyA9IHtcbiAgICBuZXh0OiB2ZXJiKDApLFxuICAgIFwidGhyb3dcIjogdmVyYigxKSxcbiAgICBcInJldHVyblwiOiB2ZXJiKDIpXG4gIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9KSwgZztcblxuICBmdW5jdGlvbiB2ZXJiKG4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHYpIHtcbiAgICAgIHJldHVybiBzdGVwKFtuLCB2XSk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG5cbiAgICB3aGlsZSAoXykgdHJ5IHtcbiAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcblxuICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICB0ID0gb3A7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIF8ubGFiZWwrKztcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsdWU6IG9wWzFdLFxuICAgICAgICAgICAgZG9uZTogZmFsc2VcbiAgICAgICAgICB9O1xuXG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICBfLmxhYmVsKys7XG4gICAgICAgICAgeSA9IG9wWzFdO1xuICAgICAgICAgIG9wID0gWzBdO1xuICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgIGNhc2UgNzpcbiAgICAgICAgICBvcCA9IF8ub3BzLnBvcCgpO1xuXG4gICAgICAgICAgXy50cnlzLnBvcCgpO1xuXG4gICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkge1xuICAgICAgICAgICAgXyA9IDA7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSB7XG4gICAgICAgICAgICBfLmxhYmVsID0gb3BbMV07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHtcbiAgICAgICAgICAgIF8ubGFiZWwgPSB0WzFdO1xuICAgICAgICAgICAgdCA9IG9wO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHtcbiAgICAgICAgICAgIF8ubGFiZWwgPSB0WzJdO1xuXG4gICAgICAgICAgICBfLm9wcy5wdXNoKG9wKTtcblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuXG4gICAgICAgICAgXy50cnlzLnBvcCgpO1xuXG4gICAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIG9wID0gWzYsIGVdO1xuICAgICAgeSA9IDA7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGYgPSB0ID0gMDtcbiAgICB9XG5cbiAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsXG4gICAgICBkb25lOiB0cnVlXG4gICAgfTtcbiAgfVxufTtcblxudmFyIF9fcmVzdCA9IHZvaWQgMCAmJiAodm9pZCAwKS5fX3Jlc3QgfHwgZnVuY3Rpb24gKHMsIGUpIHtcbiAgdmFyIHQgPSB7fTtcblxuICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMCkgdFtwXSA9IHNbcF07XG5cbiAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKSBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKSB0W3BbaV1dID0gc1twW2ldXTtcbiAgfVxuICByZXR1cm4gdDtcbn07XG5cbmZ1bmN0aW9uIHVzZUxvY2FsVGFibGUoX2EpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB2YXIgcXVlcnkgPSBfYS5xdWVyeSxcbiAgICAgIGN1c3RvbVF1ZXJpZXMgPSBfYS5jdXN0b21RdWVyaWVzLFxuICAgICAgc2hvd1Jlc2V0ID0gX2Euc2hvd1Jlc2V0LFxuICAgICAgX2IgPSBfYS5maWx0ZXJzLFxuICAgICAgZmlsdGVycyA9IF9iID09PSB2b2lkIDAgPyBbXSA6IF9iLFxuICAgICAgY3JlYXRlQnV0dG9uID0gX2EuY3JlYXRlQnV0dG9uLFxuICAgICAgZGF0ZVBpY2tlcnMgPSBfYS5kYXRlUGlja2VycyxcbiAgICAgIHBhZ2luYXRpb24gPSBfYS5wYWdpbmF0aW9uLFxuICAgICAgcGFnaW5hdGlvbkluaXRpYWxEYXRhID0gX2EucGFnaW5hdGlvbkluaXRpYWxEYXRhLFxuICAgICAgY3JlYXRvciA9IF9hLmNyZWF0b3IsXG4gICAgICBlZGl0b3IgPSBfYS5lZGl0b3IsXG4gICAgICBkZXRhaWxzID0gX2EuZGV0YWlscztcblxuICB2YXIgX2MgPSBxdWVyeSB8fCB7fSxcbiAgICAgIG9uRmllbGRDaGFuZ2UgPSBfYy5vbkZpZWxkQ2hhbmdlLFxuICAgICAgb25WYWx1ZUNoYW5nZSA9IF9jLm9uVmFsdWVDaGFuZ2UsXG4gICAgICBmaWVsZHMgPSBfYy5maWVsZHMsXG4gICAgICB3aWR0aCA9IF9jLndpZHRoLFxuICAgICAgZnVzc3kgPSBfYy5mdXNzeTtcblxuICB2YXIgX2QgPSBwYWdpbmF0aW9uSW5pdGlhbERhdGEgfHwge30sXG4gICAgICBfZSA9IF9kLmN1cnJlbnQsXG4gICAgICBpbml0aWFsQ3VycmVudCA9IF9lID09PSB2b2lkIDAgPyAxIDogX2UsXG4gICAgICBfZiA9IF9kLnNpemUsXG4gICAgICBpbml0aWFsU2l6ZSA9IF9mID09PSB2b2lkIDAgPyBfcGFnaW5hdGlvbi5ERUZBVUxUX1NJWkUgOiBfZjtcblxuICB2YXIgX2cgPSBjcmVhdG9yIHx8IHt9LFxuICAgICAgY3JlYXRvclN1Ym1pdCA9IF9nLm9uU3VibWl0LFxuICAgICAgY3JlYXRvck9uQ2xvc2UgPSBfZy5vbkNsb3NlLFxuICAgICAgY3JlYXRvck9uT3BlbiA9IF9nLm9uT3BlbjtcblxuICB2YXIgX2ggPSBlZGl0b3IgfHwge30sXG4gICAgICBlZGl0b3JTdWJtaXQgPSBfaC5vblN1Ym1pdCxcbiAgICAgIGVkaXRvck9uQ2xvc2UgPSBfaC5vbkNsb3NlLFxuICAgICAgZWRpdG9yT25PcGVuID0gX2gub25PcGVuLFxuICAgICAgZ2V0RWRpdG9ySW5pdGlhbFZhbHVlcyA9IF9oLmdldEluaXRpYWxWYWx1ZXM7XG5cbiAgdmFyIF9qID0gZGV0YWlscyB8fCB7fSxcbiAgICAgIGdldERldGFpbHNEYXRhU291cmNlID0gX2ouZ2V0RGF0YVNvdXJjZSxcbiAgICAgIGRldGFpbHNPbk9wZW4gPSBfai5vbk9wZW4sXG4gICAgICBkZXRhaWxzT25DbG9zZSA9IF9qLm9uQ2xvc2U7XG5cbiAgdmFyIF9rID0gKDAsIF91c2VCYXNpY1RhYmxlLmRlZmF1bHQpKHtcbiAgICBmaWVsZHM6IGZpZWxkcyxcbiAgICBmaWx0ZXJzOiBmaWx0ZXJzLFxuICAgIGVkaXRvck9uT3BlbjogZWRpdG9yT25PcGVuLFxuICAgIGVkaXRvck9uQ2xvc2U6IGVkaXRvck9uQ2xvc2UsXG4gICAgY3JlYXRvck9uT3BlbjogY3JlYXRvck9uT3BlbixcbiAgICBjcmVhdG9yT25DbG9zZTogY3JlYXRvck9uQ2xvc2UsXG4gICAgZGV0YWlsc09uQ2xvc2U6IGRldGFpbHNPbkNsb3NlLFxuICAgIGRldGFpbHNPbk9wZW46IGRldGFpbHNPbk9wZW5cbiAgfSksXG4gICAgICBkYXRlVmFsdWVzID0gX2suZGF0ZVZhbHVlcyxcbiAgICAgIHNldERhdGVWYWx1ZXMgPSBfay5zZXREYXRlVmFsdWVzLFxuICAgICAgcXVlcnlGaWVsZCA9IF9rLnF1ZXJ5RmllbGQsXG4gICAgICBzZXRRdWVyeUZpZWxkID0gX2suc2V0UXVlcnlGaWVsZCxcbiAgICAgIHF1ZXJ5VmFsdWUgPSBfay5xdWVyeVZhbHVlLFxuICAgICAgc2V0UXVlcnlWYWx1ZSA9IF9rLnNldFF1ZXJ5VmFsdWUsXG4gICAgICBmaWx0ZXJWYWx1ZXMgPSBfay5maWx0ZXJWYWx1ZXMsXG4gICAgICBzZXRGaWx0ZXJWYWx1ZXMgPSBfay5zZXRGaWx0ZXJWYWx1ZXMsXG4gICAgICBjcmVhdG9yVmlzaWJsZSA9IF9rLmNyZWF0b3JWaXNpYmxlLFxuICAgICAgZWRpdG9yVmlzaWJsZSA9IF9rLmVkaXRvclZpc2libGUsXG4gICAgICBlZGl0SXRlbSA9IF9rLmVkaXRJdGVtLFxuICAgICAgb3BlbkNyZWF0b3IgPSBfay5vcGVuQ3JlYXRvcixcbiAgICAgIGNsb3NlQ3JlYXRvciA9IF9rLmNsb3NlQ3JlYXRvcixcbiAgICAgIG9wZW5FZGl0b3IgPSBfay5vcGVuRWRpdG9yLFxuICAgICAgY2xvc2VFZGl0b3IgPSBfay5jbG9zZUVkaXRvcixcbiAgICAgIG9wZW5EZXRhaWxzID0gX2sub3BlbkRldGFpbHMsXG4gICAgICBjbG9zZURldGFpbHMgPSBfay5jbG9zZURldGFpbHMsXG4gICAgICBkZXRhaWxzVmlzaWJsZSA9IF9rLmRldGFpbHNWaXNpYmxlLFxuICAgICAgZGV0YWlsc0l0ZW0gPSBfay5kZXRhaWxzSXRlbSxcbiAgICAgIHJlc2V0ID0gX2sucmVzZXQ7XG5cbiAgdmFyIGkxOG4gPSAoMCwgX2kxOG4udXNlSTE4TikoKTtcblxuICB2YXIgX2wgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShpbml0aWFsQ3VycmVudCksXG4gICAgICBjdXJyZW50UGFnZSA9IF9sWzBdLFxuICAgICAgc2V0Q3VycmVudFBhZ2UgPSBfbFsxXTtcblxuICB2YXIgX20gPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShpbml0aWFsU2l6ZSksXG4gICAgICBwYWdlU2l6ZSA9IF9tWzBdLFxuICAgICAgc2V0UGFnZVNpemUgPSBfbVsxXTtcblxuICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkge1xuICAgIGlmIChpbml0aWFsU2l6ZSAhPT0gcGFnZVNpemUpIHtcbiAgICAgIHNldFBhZ2VTaXplKGluaXRpYWxTaXplKTtcbiAgICB9XG5cbiAgICBpZiAoaW5pdGlhbEN1cnJlbnQgIT09IGN1cnJlbnRQYWdlKSB7XG4gICAgICBzZXRDdXJyZW50UGFnZShpbml0aWFsQ3VycmVudCk7XG4gICAgfVxuICB9LCBbaW5pdGlhbFNpemUsIGluaXRpYWxDdXJyZW50XSk7XG4gIHZhciBvblBhZ2VDaGFuZ2UgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAobmV3Q3VycmVudFBhZ2UsIG5ld1BhZ2VTaXplKSB7XG4gICAgaWYgKG5ld0N1cnJlbnRQYWdlICE9PSBjdXJyZW50UGFnZSkge1xuICAgICAgc2V0Q3VycmVudFBhZ2UobmV3Q3VycmVudFBhZ2UpO1xuICAgIH1cblxuICAgIGlmIChuZXdQYWdlU2l6ZSAhPT0gcGFnZVNpemUpIHtcbiAgICAgIHNldFBhZ2VTaXplKG5ld1BhZ2VTaXplKTtcbiAgICB9XG4gIH0sIFtjdXJyZW50UGFnZSwgcGFnZVNpemVdKTtcblxuICB2YXIgX28gPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSh7fSksXG4gICAgICBjdXN0b21RdWVyeVZhbHVlcyA9IF9vWzBdLFxuICAgICAgc2V0Q3VzdG9tUXVlcnlWYWx1ZXMgPSBfb1sxXTtcblxuICB2YXIgY2hhbmdlQ3VzdG9tUXVlcnlWYWx1ZSA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uICh2YWx1ZSwgZmllbGQpIHtcbiAgICB2YXIgX2E7XG5cbiAgICBpZiAoY3VzdG9tUXVlcnlWYWx1ZXNbZmllbGRdICE9PSB2YWx1ZSkge1xuICAgICAgc2V0Q3VzdG9tUXVlcnlWYWx1ZXMoX19hc3NpZ24oX19hc3NpZ24oe30sIGN1c3RvbVF1ZXJ5VmFsdWVzKSwgKF9hID0ge30sIF9hW2ZpZWxkXSA9IHZhbHVlLCBfYSkpKTtcbiAgICB9XG4gIH0sIFtjdXN0b21RdWVyeVZhbHVlcywgc2V0Q3VzdG9tUXVlcnlWYWx1ZXNdKTtcbiAgdmFyIG9uUXVlcnlGaWVsZENoYW5nZSA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uIChmaWVsZEtleSkge1xuICAgIGlmICgoMCwgX2lzRnVuY3Rpb24yLmRlZmF1bHQpKG9uRmllbGRDaGFuZ2UpKSB7XG4gICAgICBvbkZpZWxkQ2hhbmdlKGZpZWxkS2V5KTtcbiAgICB9XG5cbiAgICBpZiAoKDAsIF9pc0Z1bmN0aW9uMi5kZWZhdWx0KShvblZhbHVlQ2hhbmdlKSkge1xuICAgICAgb25WYWx1ZUNoYW5nZSgnJyk7XG4gICAgfVxuXG4gICAgc2V0UXVlcnlGaWVsZChmaWVsZEtleSk7XG4gICAgc2V0UXVlcnlWYWx1ZSgnJyk7XG4gIH0sIFtvbkZpZWxkQ2hhbmdlLCBvblZhbHVlQ2hhbmdlXSk7XG4gIHZhciBvblF1ZXJ5VmFsdWVDaGFuZ2UgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgdmFsdWUgPSBfYS50YXJnZXQudmFsdWU7XG5cbiAgICBpZiAoKDAsIF9pc0Z1bmN0aW9uMi5kZWZhdWx0KShvblZhbHVlQ2hhbmdlKSkge1xuICAgICAgb25WYWx1ZUNoYW5nZSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgc2V0Q3VycmVudFBhZ2UoMSk7XG4gICAgc2V0UXVlcnlWYWx1ZSh2YWx1ZSk7XG4gIH0sIFtvblZhbHVlQ2hhbmdlXSk7XG4gIHZhciBvbkZpbHRlclZhbHVlQ2hhbmdlID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKHZhbHVlcywgZGF0YUtleSkge1xuICAgIGlmICgoMCwgX3VzZUJhc2ljVGFibGUuaXNGaWx0ZXJWYWx1ZXNTYW1lKSh2YWx1ZXMsIGRhdGFLZXksIGZpbHRlclZhbHVlcykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgb25DaGFuZ2UgPSAoMCwgX2Zsb3cyLmRlZmF1bHQpKCgwLCBfZmluZDIuZGVmYXVsdCkoKDAsIF9wcm9wRXEyLmRlZmF1bHQpKCdkYXRhS2V5JywgZGF0YUtleSkpLCAoMCwgX3Byb3AyLmRlZmF1bHQpKCdvbkNoYW5nZScpKShmaWx0ZXJzKTtcblxuICAgIGlmICgoMCwgX2lzRnVuY3Rpb24yLmRlZmF1bHQpKG9uQ2hhbmdlKSkge1xuICAgICAgb25DaGFuZ2UodmFsdWVzKTtcbiAgICB9XG5cbiAgICBzZXRDdXJyZW50UGFnZSgxKTtcbiAgICBzZXRGaWx0ZXJWYWx1ZXMoKDAsIF9mbG93Mi5kZWZhdWx0KSgoMCwgX3JlamVjdDIuZGVmYXVsdCkoKDAsIF9wcm9wRXEyLmRlZmF1bHQpKCdkYXRhS2V5JykoZGF0YUtleSkpLCAoMCwgX2NvbmNhdDIuZGVmYXVsdCkoe1xuICAgICAgZGF0YUtleTogZGF0YUtleSxcbiAgICAgIHZhbHVlczogdmFsdWVzXG4gICAgfSkpKGZpbHRlclZhbHVlcykpO1xuICB9LCBbZmlsdGVycywgZmlsdGVyVmFsdWVzXSk7XG4gIHZhciBvbkRhdGVDaGFuZ2UgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAodmFsdWUsIGRhdGFLZXkpIHtcbiAgICB2YXIgb25DaGFuZ2UgPSAoMCwgX2Zsb3cyLmRlZmF1bHQpKCgwLCBfZmluZDIuZGVmYXVsdCkoKDAsIF9wcm9wRXEyLmRlZmF1bHQpKCdkYXRhS2V5JywgZGF0YUtleSkpLCAoMCwgX3Byb3AyLmRlZmF1bHQpKCdvbkNoYW5nZScpKShkYXRlUGlja2Vycyk7XG5cbiAgICBpZiAoKDAsIF9pc0Z1bmN0aW9uMi5kZWZhdWx0KShvbkNoYW5nZSkpIHtcbiAgICAgIG9uQ2hhbmdlKHZhbHVlKTtcbiAgICB9XG5cbiAgICBzZXRDdXJyZW50UGFnZSgxKTtcbiAgICBzZXREYXRlVmFsdWVzKCgwLCBfZmxvdzIuZGVmYXVsdCkoKDAsIF9yZWplY3QyLmRlZmF1bHQpKCgwLCBfcHJvcEVxMi5kZWZhdWx0KSgnZGF0YUtleScpKGRhdGFLZXkpKSwgKDAsIF9jb25jYXQyLmRlZmF1bHQpKHtcbiAgICAgIGRhdGFLZXk6IGRhdGFLZXksXG4gICAgICB2YWx1ZTogdmFsdWVcbiAgICB9KSkoZGF0ZVZhbHVlcykpO1xuICB9LCBbZGF0ZVBpY2tlcnMsIGRhdGVWYWx1ZXNdKTtcbiAgdmFyIG9uQ3JlYXRvclN1Ym1pdCA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uICh2YWx1ZXMsIGZvcm1JbnN0YW5jZSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBpZiAoIWNyZWF0b3JTdWJtaXQpIHJldHVybiBbM1xuICAgICAgICAgICAgLypicmVhayovXG4gICAgICAgICAgICAsIDJdO1xuICAgICAgICAgICAgcmV0dXJuIFs0XG4gICAgICAgICAgICAvKnlpZWxkKi9cbiAgICAgICAgICAgICwgY3JlYXRvclN1Ym1pdCh2YWx1ZXMsIGZvcm1JbnN0YW5jZSldO1xuXG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgX2Euc2VudCgpO1xuXG4gICAgICAgICAgICBfYS5sYWJlbCA9IDI7XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBjbG9zZUNyZWF0b3IoKTtcblxuICAgICAgICAgICAgX21lc3NhZ2UyLmRlZmF1bHQuc3VjY2VzcyhpMThuKCdjcmVhdGVTdWNjZXNzJykpO1xuXG4gICAgICAgICAgICByZXR1cm4gWzJcbiAgICAgICAgICAgIC8qcmV0dXJuKi9cbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LCBbY3JlYXRvclN1Ym1pdF0pO1xuICB2YXIgb25FZGl0b3JTdWJtaXQgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAodmFsdWVzLCBmb3JtSW5zdGFuY2UpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgaWYgKCFlZGl0b3JTdWJtaXQpIHJldHVybiBbM1xuICAgICAgICAgICAgLypicmVhayovXG4gICAgICAgICAgICAsIDJdO1xuICAgICAgICAgICAgcmV0dXJuIFs0XG4gICAgICAgICAgICAvKnlpZWxkKi9cbiAgICAgICAgICAgICwgZWRpdG9yU3VibWl0KF9fYXNzaWduKF9fYXNzaWduKHt9LCB2YWx1ZXMpLCB7XG4gICAgICAgICAgICAgIGlkOiBlZGl0SXRlbS5pZFxuICAgICAgICAgICAgfSksIGZvcm1JbnN0YW5jZSwgZWRpdEl0ZW0pXTtcblxuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIF9hLnNlbnQoKTtcblxuICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xuXG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgY2xvc2VFZGl0b3IoKTtcblxuICAgICAgICAgICAgX21lc3NhZ2UyLmRlZmF1bHQuc3VjY2VzcyhpMThuKCdlZGl0U3VjY2VzcycpKTtcblxuICAgICAgICAgICAgcmV0dXJuIFsyXG4gICAgICAgICAgICAvKnJldHVybiovXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSwgW2VkaXRvclN1Ym1pdCwgZWRpdEl0ZW1dKTtcbiAgdmFyIGdldERhdGFTb3VyY2UgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKSgoMCwgX2ZpbHRlcjIuZGVmYXVsdCkoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICB2YXIgcXVlcnlSZXN1bHQgPSB0cnVlO1xuXG4gICAgaWYgKHF1ZXJ5VmFsdWUpIHtcbiAgICAgIHZhciBtYXRjaCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuICgwLCBfZmxvdzIuZGVmYXVsdCkoKDAsIF9wcm9wMi5kZWZhdWx0KShrZXkpLCBfdG9VcHBlcjIuZGVmYXVsdCwgKDAsIF9pbmNsdWRlczIuZGVmYXVsdCkoKDAsIF90b1VwcGVyMi5kZWZhdWx0KShxdWVyeVZhbHVlKSkpKGl0ZW0pO1xuICAgICAgfTtcblxuICAgICAgaWYgKGZ1c3N5KSB7XG4gICAgICAgIHF1ZXJ5UmVzdWx0ID0gKDAsIF9hbnkyLmRlZmF1bHQpKCgwLCBfZmxvdzIuZGVmYXVsdCkoKDAsIF9wcm9wMi5kZWZhdWx0KSgnZGF0YUtleScpLCBtYXRjaCkpKGZpZWxkcyk7XG4gICAgICB9IGVsc2UgaWYgKHF1ZXJ5RmllbGQpIHtcbiAgICAgICAgcXVlcnlSZXN1bHQgPSBtYXRjaChxdWVyeUZpZWxkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgY3VzdG9tUXVlcnlSZXN1bHQgPSB0cnVlO1xuXG4gICAgaWYgKCEoMCwgX2lzRW1wdHkyLmRlZmF1bHQpKGN1c3RvbVF1ZXJ5VmFsdWVzKSAmJiBjdXN0b21RdWVyaWVzICYmIGN1c3RvbVF1ZXJpZXMubGVuZ3RoID4gMCkge1xuICAgICAgY3VzdG9tUXVlcnlSZXN1bHQgPSAoMCwgX2Zsb3cyLmRlZmF1bHQpKF9rZXlzMi5kZWZhdWx0LCAoMCwgX2V2ZXJ5Mi5kZWZhdWx0KShmdW5jdGlvbiAoZGF0YUtleSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBjdXN0b21RdWVyeVZhbHVlc1tkYXRhS2V5XTtcbiAgICAgICAgdmFyIGN1c3RvbVF1ZXJ5ID0gKDAsIF9maW5kMi5kZWZhdWx0KSgoMCwgX3Byb3BFcTIuZGVmYXVsdCkoJ2RhdGFLZXknLCBkYXRhS2V5KSkoY3VzdG9tUXVlcmllcyk7XG5cbiAgICAgICAgaWYgKCFjdXN0b21RdWVyeSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIkN1c3RvbVF1ZXJ5IGlzIG5vdCBjb25maWcgZm9yIFwiICsgZGF0YUtleSk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgb25GaWx0ZXIgPSBjdXN0b21RdWVyeS5vbkZpbHRlcjtcblxuICAgICAgICBpZiAob25GaWx0ZXIpIHtcbiAgICAgICAgICByZXR1cm4gb25GaWx0ZXIoaXRlbSwgZGF0YUtleSwgdmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuICgwLCBfcHJvcEVxMi5kZWZhdWx0KShkYXRhS2V5LCB2YWx1ZSkoaXRlbSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pKShjdXN0b21RdWVyeVZhbHVlcyk7XG4gICAgfVxuXG4gICAgdmFyIGZpbHRlclJlc3VsdCA9IHRydWU7XG5cbiAgICBpZiAoZmlsdGVyVmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGZpbHRlclJlc3VsdCA9ICgwLCBfZXZlcnkyLmRlZmF1bHQpKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgZGF0YUtleSA9IF9hLmRhdGFLZXksXG4gICAgICAgICAgICB2YWx1ZSA9IF9hLnZhbHVlO1xuICAgICAgICB2YXIgb25GaWx0ZXIgPSAoMCwgX2Zsb3cyLmRlZmF1bHQpKCgwLCBfZmluZDIuZGVmYXVsdCkoKDAsIF9wcm9wRXEyLmRlZmF1bHQpKCdkYXRhS2V5JywgZGF0YUtleSkpLCAoMCwgX3Byb3AyLmRlZmF1bHQpKCdvbkZpbHRlcicpKShmaWx0ZXJzKTtcblxuICAgICAgICBpZiAoKDAsIF9pc0FycmF5Mi5kZWZhdWx0KSh2YWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4gb25GaWx0ZXIgPyBvbkZpbHRlcihpdGVtLCBkYXRhS2V5LCB2YWx1ZSkgOiAoMCwgX2luY2x1ZGVzMi5kZWZhdWx0KSgoMCwgX3Byb3AyLmRlZmF1bHQpKGRhdGFLZXkpKGl0ZW0pKSh2YWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKDAsIF9pc05pbDIuZGVmYXVsdCkodmFsdWUpIHx8IChvbkZpbHRlciA/IG9uRmlsdGVyKGl0ZW0sIGRhdGFLZXksIHZhbHVlKSA6ICgwLCBfcHJvcEVxMi5kZWZhdWx0KShkYXRhS2V5LCB2YWx1ZSkoaXRlbSkpO1xuICAgICAgfSkoZmlsdGVyVmFsdWVzKTtcbiAgICB9XG5cbiAgICB2YXIgZGF0ZXNSZXN1bHQgPSB0cnVlO1xuXG4gICAgaWYgKGRhdGVWYWx1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgZGF0ZXNSZXN1bHQgPSAoMCwgX2V2ZXJ5Mi5kZWZhdWx0KShmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIGRhdGFLZXkgPSBfYS5kYXRhS2V5LFxuICAgICAgICAgICAgdmFsdWUgPSBfYS52YWx1ZTtcblxuICAgICAgICBpZiAodmFsdWUgJiYgdmFsdWUubGVuZ3RoID4gMSkge1xuICAgICAgICAgIHZhciBzZWxlY3RlZERhdGUgPSAoMCwgX3Byb3AyLmRlZmF1bHQpKGRhdGFLZXkpKGl0ZW0pO1xuICAgICAgICAgIHZhciBzdGFydERhdGUgPSB2YWx1ZVswXSxcbiAgICAgICAgICAgICAgZW5kRGF0ZSA9IHZhbHVlWzFdO1xuICAgICAgICAgIHJldHVybiAoMCwgX21vbWVudC5kZWZhdWx0KShuZXcgRGF0ZShzdGFydERhdGUpKS5pc0JlZm9yZShzZWxlY3RlZERhdGUpICYmICgwLCBfbW9tZW50LmRlZmF1bHQpKG5ldyBEYXRlKGVuZERhdGUpKS5pc0FmdGVyKHNlbGVjdGVkRGF0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pKGRhdGVWYWx1ZXMpO1xuICAgIH1cblxuICAgIHJldHVybiBmaWx0ZXJSZXN1bHQgJiYgcXVlcnlSZXN1bHQgJiYgZGF0ZXNSZXN1bHQgJiYgY3VzdG9tUXVlcnlSZXN1bHQ7XG4gIH0pLCBbcXVlcnlWYWx1ZSwgcXVlcnlGaWVsZCwgZmlsdGVyVmFsdWVzLCBkYXRlVmFsdWVzLCBmaWx0ZXJzLCBjdXN0b21RdWVyaWVzXSk7XG4gIHJldHVybiB7XG4gICAgY2hhbmdlQ3VzdG9tUXVlcnlWYWx1ZTogY2hhbmdlQ3VzdG9tUXVlcnlWYWx1ZSxcbiAgICBnZXREYXRhU291cmNlOiBnZXREYXRhU291cmNlLFxuICAgIGZpbHRlclZhbHVlczogZmlsdGVyVmFsdWVzLFxuICAgIGNoYW5nZUZpbHRlclZhbHVlOiBvbkZpbHRlclZhbHVlQ2hhbmdlLFxuICAgIG9wZW5DcmVhdG9yOiBvcGVuQ3JlYXRvcixcbiAgICBvcGVuRWRpdG9yOiBvcGVuRWRpdG9yLFxuICAgIG9wZW5EZXRhaWxzOiBvcGVuRGV0YWlscyxcbiAgICByZXNldDogcmVzZXQsXG4gICAgcGFnaW5hdGlvbjogX19hc3NpZ24oe1xuICAgICAgc2hvd1RvdGFsOiBmdW5jdGlvbiAodG90YWwpIHtcbiAgICAgICAgcmV0dXJuIFwiXCIgKyBpMThuKCd0b3RhbFBhZ2UnLCB7XG4gICAgICAgICAgdG90YWw6IHRvdGFsXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHBhZ2VTaXplOiBwYWdlU2l6ZSxcbiAgICAgIG9uQ2hhbmdlOiBvblBhZ2VDaGFuZ2UsXG4gICAgICBjdXJyZW50OiBjdXJyZW50UGFnZVxuICAgIH0sIHBhZ2luYXRpb24pLFxuICAgIHRhYmxlSGVhZGVyOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF90YWJsZUhlYWRlci5kZWZhdWx0LCB7XG4gICAgICBxdWVyeToge1xuICAgICAgICBvbkZpZWxkQ2hhbmdlOiBvblF1ZXJ5RmllbGRDaGFuZ2UsXG4gICAgICAgIG9uVmFsdWVDaGFuZ2U6IG9uUXVlcnlWYWx1ZUNoYW5nZSxcbiAgICAgICAgdmFsdWU6IHF1ZXJ5VmFsdWUsXG4gICAgICAgIGZpZWxkOiBxdWVyeUZpZWxkLFxuICAgICAgICBmaWVsZHM6IGZpZWxkcyxcbiAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICBmdXNzeTogZnVzc3lcbiAgICAgIH0sXG4gICAgICBjcmVhdGVCdXR0b246IGNyZWF0ZUJ1dHRvbixcbiAgICAgIGZpbHRlcjoge1xuICAgICAgICBpdGVtczogKDAsIF9tYXAyLmRlZmF1bHQpKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgIHZhciBkYXRhS2V5ID0gX2EuZGF0YUtleSxcbiAgICAgICAgICAgICAgb3B0aW9ucyA9IF9hLm9wdGlvbnMsXG4gICAgICAgICAgICAgIG90aGVycyA9IF9fcmVzdChfYSwgW1wiZGF0YUtleVwiLCBcIm9wdGlvbnNcIl0pO1xuXG4gICAgICAgICAgcmV0dXJuIF9fYXNzaWduKHtcbiAgICAgICAgICAgIGRhdGFLZXk6IGRhdGFLZXksXG4gICAgICAgICAgICB2YWx1ZTogKDAsIF9mbG93Mi5kZWZhdWx0KSgoMCwgX2ZpbmQyLmRlZmF1bHQpKCgwLCBfcHJvcEVxMi5kZWZhdWx0KSgnZGF0YUtleScpKGRhdGFLZXkpKSwgKDAsIF9wcm9wMi5kZWZhdWx0KSgndmFsdWUnKSkoZmlsdGVyVmFsdWVzKSxcbiAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnNcbiAgICAgICAgICB9LCBvdGhlcnMpO1xuICAgICAgICB9KShmaWx0ZXJzKSxcbiAgICAgICAgb25TZWxlY3Q6IG9uRmlsdGVyVmFsdWVDaGFuZ2VcbiAgICAgIH0sXG4gICAgICBlZGl0b3I6IGVkaXRvciAmJiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZWRpdG9yKSwge1xuICAgICAgICBpbml0aWFsVmFsdWVzOiBnZXRFZGl0b3JJbml0aWFsVmFsdWVzID8gZ2V0RWRpdG9ySW5pdGlhbFZhbHVlcyhlZGl0SXRlbSkgOiBlZGl0SXRlbSxcbiAgICAgICAgb25TdWJtaXQ6IG9uRWRpdG9yU3VibWl0LFxuICAgICAgICB2aXNpYmxlOiBlZGl0b3JWaXNpYmxlLFxuICAgICAgICBvbkNsb3NlOiBjbG9zZUVkaXRvclxuICAgICAgfSksXG4gICAgICBkZXRhaWxzOiBkZXRhaWxzICYmIF9fYXNzaWduKF9fYXNzaWduKHt9LCBkZXRhaWxzKSwge1xuICAgICAgICBkYXRhU291cmNlOiBnZXREZXRhaWxzRGF0YVNvdXJjZSA/IGdldERhdGFTb3VyY2UoZGV0YWlsc0l0ZW0pIDogZGV0YWlsc0l0ZW0sXG4gICAgICAgIHZpc2libGU6IGRldGFpbHNWaXNpYmxlLFxuICAgICAgICBjbG9zZTogY2xvc2VEZXRhaWxzXG4gICAgICB9KSxcbiAgICAgIGNyZWF0b3I6IGNyZWF0b3IgJiYgX19hc3NpZ24oX19hc3NpZ24oe30sIGNyZWF0b3IpLCB7XG4gICAgICAgIG9uU3VibWl0OiBvbkNyZWF0b3JTdWJtaXQsXG4gICAgICAgIHZpc2libGU6IGNyZWF0b3JWaXNpYmxlLFxuICAgICAgICBvbkNsb3NlOiBjbG9zZUNyZWF0b3JcbiAgICAgIH0pLFxuICAgICAgb3BlbkVkaXRvcjogb3BlbkVkaXRvcixcbiAgICAgIG9wZW5DcmVhdG9yOiBvcGVuQ3JlYXRvcixcbiAgICAgIHJlc2V0OiBzaG93UmVzZXQgPyByZXNldCA6IHVuZGVmaW5lZCxcbiAgICAgIGRhdGVQaWNrZXI6IHtcbiAgICAgICAgaXRlbXM6ICgwLCBfbWFwMi5kZWZhdWx0KShmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICB2YXIgZGF0YUtleSA9IF9hLmRhdGFLZXksXG4gICAgICAgICAgICAgIG90aGVycyA9IF9fcmVzdChfYSwgW1wiZGF0YUtleVwiXSk7XG5cbiAgICAgICAgICByZXR1cm4gX19hc3NpZ24oe1xuICAgICAgICAgICAgZGF0YUtleTogZGF0YUtleSxcbiAgICAgICAgICAgIHZhbHVlOiAoMCwgX2Zsb3cyLmRlZmF1bHQpKCgwLCBfZmluZDIuZGVmYXVsdCkoKDAsIF9wcm9wRXEyLmRlZmF1bHQpKCdkYXRhS2V5JykoZGF0YUtleSkpLCAoMCwgX3Byb3AyLmRlZmF1bHQpKCd2YWx1ZScpKShkYXRlVmFsdWVzKVxuICAgICAgICAgIH0sIG90aGVycyk7XG4gICAgICAgIH0pKGRhdGVQaWNrZXJzKSxcbiAgICAgICAgb25TZWxlY3Q6IG9uRGF0ZUNoYW5nZVxuICAgICAgfVxuICAgIH0pXG4gIH07XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB1c2VUYWJsZUZpbHRlcjtcblxudmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoXCJyZWFjdFwiKSk7XG5cbnZhciBfdGFibGVGaWx0ZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9jb21wb25lbnRzL3RhYmxlLWZpbHRlclwiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSgpIHsgaWYgKHR5cGVvZiBXZWFrTWFwICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiBudWxsOyB2YXIgY2FjaGUgPSBuZXcgV2Vha01hcCgpOyBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBjYWNoZTsgfTsgcmV0dXJuIGNhY2hlOyB9XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBvYmogIT09IFwiZnVuY3Rpb25cIikgeyByZXR1cm4geyBkZWZhdWx0OiBvYmogfTsgfSB2YXIgY2FjaGUgPSBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUoKTsgaWYgKGNhY2hlICYmIGNhY2hlLmhhcyhvYmopKSB7IHJldHVybiBjYWNoZS5nZXQob2JqKTsgfSB2YXIgbmV3T2JqID0ge307IHZhciBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IGhhc1Byb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDogbnVsbDsgaWYgKGRlc2MgJiYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOyB9IGVsc2UgeyBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgaWYgKGNhY2hlKSB7IGNhY2hlLnNldChvYmosIG5ld09iaik7IH0gcmV0dXJuIG5ld09iajsgfVxuXG4vKiBlc2xpbnQtZGlzYWJsZSByZWFjdC9wcm9wLXR5cGVzICovXG5mdW5jdGlvbiB1c2VUYWJsZUZpbHRlcihfYSkge1xuICB2YXIgY2hhbmdlRmlsdGVyVmFsdWUgPSBfYS5jaGFuZ2VGaWx0ZXJWYWx1ZSxcbiAgICAgIGRhdGFLZXkgPSBfYS5kYXRhS2V5LFxuICAgICAgb3B0aW9ucyA9IF9hLm9wdGlvbnMsXG4gICAgICBtdWx0aXBsZSA9IF9hLm11bHRpcGxlLFxuICAgICAgZmlsdGVySWNvbiA9IF9hLmZpbHRlckljb247XG5cbiAgdmFyIF9iID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZmFsc2UpLFxuICAgICAgZmlsdGVyRHJvcGRvd25WaXNpYmxlID0gX2JbMF0sXG4gICAgICBvbkZpbHRlckRyb3Bkb3duVmlzaWJsZUNoYW5nZSA9IF9iWzFdO1xuXG4gIHZhciBfYyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKCksXG4gICAgICBmaWx0ZXJlZFZhbHVlID0gX2NbMF0sXG4gICAgICBzZXRGaWx0ZXJlZFZhbHVlID0gX2NbMV07XG5cbiAgcmV0dXJuICgwLCBfcmVhY3QudXNlTWVtbykoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICBmaWx0ZXJzOiBvcHRpb25zLFxuICAgICAgZmlsdGVyRHJvcGRvd25WaXNpYmxlOiBmaWx0ZXJEcm9wZG93blZpc2libGUsXG4gICAgICBvbkZpbHRlckRyb3Bkb3duVmlzaWJsZUNoYW5nZTogb25GaWx0ZXJEcm9wZG93blZpc2libGVDaGFuZ2UsXG4gICAgICBmaWx0ZXJlZFZhbHVlOiBmaWx0ZXJlZFZhbHVlLFxuICAgICAgZmlsdGVySWNvbjogZmlsdGVySWNvbixcbiAgICAgIGZpbHRlckRyb3Bkb3duOiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIHByZWZpeENscyA9IF9hLnByZWZpeENscyxcbiAgICAgICAgICAgIHNldFNlbGVjdGVkS2V5cyA9IF9hLnNldFNlbGVjdGVkS2V5cyxcbiAgICAgICAgICAgIHNlbGVjdGVkS2V5cyA9IF9hLnNlbGVjdGVkS2V5cyxcbiAgICAgICAgICAgIGNvbmZpcm0gPSBfYS5jb25maXJtLFxuICAgICAgICAgICAgY2xlYXJGaWx0ZXJzID0gX2EuY2xlYXJGaWx0ZXJzLFxuICAgICAgICAgICAgZmlsdGVycyA9IF9hLmZpbHRlcnMsXG4gICAgICAgICAgICB2aXNpYmxlID0gX2EudmlzaWJsZTtcbiAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3RhYmxlRmlsdGVyLmRlZmF1bHQsIHtcbiAgICAgICAgICBtdWx0aXBsZTogbXVsdGlwbGUsXG4gICAgICAgICAgcHJlZml4Q2xzOiBwcmVmaXhDbHMsXG4gICAgICAgICAgc2V0U2VsZWN0ZWRLZXlzOiBzZXRTZWxlY3RlZEtleXMsXG4gICAgICAgICAgc2VsZWN0ZWRLZXlzOiBzZWxlY3RlZEtleXMsXG4gICAgICAgICAgY2xlYXJGaWx0ZXJzOiBjbGVhckZpbHRlcnMsXG4gICAgICAgICAgZmlsdGVyczogZmlsdGVycyxcbiAgICAgICAgICB2aXNpYmxlOiB2aXNpYmxlLFxuICAgICAgICAgIGNvbmZpcm06IGNvbmZpcm0sXG4gICAgICAgICAgb25Db25maXJtOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjaGFuZ2VGaWx0ZXJWYWx1ZShzZWxlY3RlZEtleXMsIGRhdGFLZXkpO1xuICAgICAgICAgICAgc2V0RmlsdGVyZWRWYWx1ZShzZWxlY3RlZEtleXMpO1xuICAgICAgICAgICAgb25GaWx0ZXJEcm9wZG93blZpc2libGVDaGFuZ2UoZmFsc2UpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25SZXNldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2V0RmlsdGVyZWRWYWx1ZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgY2hhbmdlRmlsdGVyVmFsdWUoW10sIGRhdGFLZXkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2ZpbHRlckRyb3Bkb3duVmlzaWJsZSwgY2hhbmdlRmlsdGVyVmFsdWUsIGRhdGFLZXksIG11bHRpcGxlLCBmaWx0ZXJJY29uXSk7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB1c2VUYWJsZVNlYXJjaDtcblxudmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoXCJyZWFjdFwiKSk7XG5cbnZhciBfaWNvbnMgPSByZXF1aXJlKFwiQGFudC1kZXNpZ24vaWNvbnNcIik7XG5cbnZhciBfdGFibGVTZWFyY2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9jb21wb25lbnRzL3RhYmxlLXNlYXJjaFwiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSgpIHsgaWYgKHR5cGVvZiBXZWFrTWFwICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiBudWxsOyB2YXIgY2FjaGUgPSBuZXcgV2Vha01hcCgpOyBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBjYWNoZTsgfTsgcmV0dXJuIGNhY2hlOyB9XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBvYmogIT09IFwiZnVuY3Rpb25cIikgeyByZXR1cm4geyBkZWZhdWx0OiBvYmogfTsgfSB2YXIgY2FjaGUgPSBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUoKTsgaWYgKGNhY2hlICYmIGNhY2hlLmhhcyhvYmopKSB7IHJldHVybiBjYWNoZS5nZXQob2JqKTsgfSB2YXIgbmV3T2JqID0ge307IHZhciBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IGhhc1Byb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDogbnVsbDsgaWYgKGRlc2MgJiYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOyB9IGVsc2UgeyBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgaWYgKGNhY2hlKSB7IGNhY2hlLnNldChvYmosIG5ld09iaik7IH0gcmV0dXJuIG5ld09iajsgfVxuXG4vKiBlc2xpbnQtZGlzYWJsZSByZWFjdC9wcm9wLXR5cGVzICovXG52YXIgZGVmYXVsdEZpbHRlckljb24gPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9pY29ucy5TZWFyY2hPdXRsaW5lZCwgbnVsbCk7XG5cbmZ1bmN0aW9uIHVzZVRhYmxlU2VhcmNoKF9hKSB7XG4gIHZhciBjaGFuZ2VGaWx0ZXJWYWx1ZSA9IF9hLmNoYW5nZUZpbHRlclZhbHVlLFxuICAgICAgY2hhbmdlQ3VzdG9tUXVlcnlWYWx1ZSA9IF9hLmNoYW5nZUN1c3RvbVF1ZXJ5VmFsdWUsXG4gICAgICBkYXRhS2V5ID0gX2EuZGF0YUtleSxcbiAgICAgIF9iID0gX2EuZmlsdGVySWNvbixcbiAgICAgIGZpbHRlckljb24gPSBfYiA9PT0gdm9pZCAwID8gZGVmYXVsdEZpbHRlckljb24gOiBfYixcbiAgICAgIHBsYWNlaG9sZGVyID0gX2EucGxhY2Vob2xkZXIsXG4gICAgICB3aWR0aCA9IF9hLndpZHRoO1xuXG4gIHZhciBfYyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGZhbHNlKSxcbiAgICAgIGZpbHRlckRyb3Bkb3duVmlzaWJsZSA9IF9jWzBdLFxuICAgICAgb25GaWx0ZXJEcm9wZG93blZpc2libGVDaGFuZ2UgPSBfY1sxXTtcblxuICB2YXIgX2QgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSgpLFxuICAgICAgZmlsdGVyZWRWYWx1ZSA9IF9kWzBdLFxuICAgICAgc2V0RmlsdGVyZWRWYWx1ZSA9IF9kWzFdO1xuXG4gIHJldHVybiAoMCwgX3JlYWN0LnVzZU1lbW8pKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZmlsdGVyRHJvcGRvd25WaXNpYmxlOiBmaWx0ZXJEcm9wZG93blZpc2libGUsXG4gICAgICBvbkZpbHRlckRyb3Bkb3duVmlzaWJsZUNoYW5nZTogb25GaWx0ZXJEcm9wZG93blZpc2libGVDaGFuZ2UsXG4gICAgICBmaWx0ZXJlZFZhbHVlOiBmaWx0ZXJlZFZhbHVlLFxuICAgICAgZmlsdGVySWNvbjogZmlsdGVySWNvbixcbiAgICAgIGZpbHRlckRyb3Bkb3duOiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIHByZWZpeENscyA9IF9hLnByZWZpeENscyxcbiAgICAgICAgICAgIHNldFNlbGVjdGVkS2V5cyA9IF9hLnNldFNlbGVjdGVkS2V5cyxcbiAgICAgICAgICAgIHNlbGVjdGVkS2V5cyA9IF9hLnNlbGVjdGVkS2V5cyxcbiAgICAgICAgICAgIGNvbmZpcm0gPSBfYS5jb25maXJtLFxuICAgICAgICAgICAgY2xlYXJGaWx0ZXJzID0gX2EuY2xlYXJGaWx0ZXJzLFxuICAgICAgICAgICAgdmlzaWJsZSA9IF9hLnZpc2libGU7XG4gICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF90YWJsZVNlYXJjaC5kZWZhdWx0LCB7XG4gICAgICAgICAgcHJlZml4Q2xzOiBwcmVmaXhDbHMsXG4gICAgICAgICAgc2V0U2VsZWN0ZWRLZXlzOiBzZXRTZWxlY3RlZEtleXMsXG4gICAgICAgICAgc2VsZWN0ZWRLZXlzOiBzZWxlY3RlZEtleXMsXG4gICAgICAgICAgY2xlYXJGaWx0ZXJzOiBjbGVhckZpbHRlcnMsXG4gICAgICAgICAgdmlzaWJsZTogdmlzaWJsZSxcbiAgICAgICAgICBjb25maXJtOiBjb25maXJtLFxuICAgICAgICAgIHBsYWNlaG9sZGVyOiBwbGFjZWhvbGRlcixcbiAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgb25Db25maXJtOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChjaGFuZ2VGaWx0ZXJWYWx1ZSkge1xuICAgICAgICAgICAgICBjaGFuZ2VGaWx0ZXJWYWx1ZSh2YWx1ZSA/IFt2YWx1ZV0gOiBbXSwgZGF0YUtleSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjaGFuZ2VDdXN0b21RdWVyeVZhbHVlKSB7XG4gICAgICAgICAgICAgIGNoYW5nZUN1c3RvbVF1ZXJ5VmFsdWUodmFsdWUsIGRhdGFLZXkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXRGaWx0ZXJlZFZhbHVlKHZhbHVlID8gW3ZhbHVlXSA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBvbkZpbHRlckRyb3Bkb3duVmlzaWJsZUNoYW5nZShmYWxzZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBvblJlc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoY2hhbmdlRmlsdGVyVmFsdWUpIHtcbiAgICAgICAgICAgICAgY2hhbmdlRmlsdGVyVmFsdWUoW10sIGRhdGFLZXkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY2hhbmdlQ3VzdG9tUXVlcnlWYWx1ZSkge1xuICAgICAgICAgICAgICBjaGFuZ2VDdXN0b21RdWVyeVZhbHVlKHVuZGVmaW5lZCwgZGF0YUtleSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNldEZpbHRlcmVkVmFsdWUodW5kZWZpbmVkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtmaWx0ZXJEcm9wZG93blZpc2libGUsIGNoYW5nZUZpbHRlclZhbHVlLCBkYXRhS2V5LCBmaWx0ZXJJY29uLCBwbGFjZWhvbGRlciwgd2lkdGhdKTtcbn0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7Ozs7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7Ozs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7Ozs7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7Ozs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7Ozs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7OztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7OztBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7Ozs7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7OztBQ3pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7Ozs7QUM1Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7Ozs7QUNoTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7Ozs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7OztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7Ozs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7Ozs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7OztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7Ozs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7Ozs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7OztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7Ozs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7Ozs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7OztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7Ozs7O0FDdERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7Ozs7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7OztBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7Ozs7O0FDckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7Ozs7O0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7Ozs7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7Ozs7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7OztBQ3RDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7Ozs7QUNyREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7Ozs7OztBQzdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7Ozs7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7Ozs7OztBQzdRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7Ozs7QUMvREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7Ozs7O0FDOW9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7Ozs7OztBQ3JMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7Ozs7O0FDL0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7Ozs7O0FDbG1CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7Ozs7O0FDdkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOztBIiwic291cmNlUm9vdCI6IiJ9