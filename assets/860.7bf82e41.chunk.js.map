{"version":3,"sources":["/Users/liuyang/projects/ringtone_new/node_modules/tinymce/themes/silver/index.js","/Users/liuyang/projects/ringtone_new/node_modules/tinymce/themes/silver/theme.js"],"names":["isType","type","value","t","x","Array","prototype","isPrototypeOf","constructor","name","String","isSimpleType","isString","isObject","isArray","isBoolean","isUndefined","a","undefined","isNonNullable","isNullable","isFunction","isNumber","isArrayOf","pred","i","len","length","noop","compose","fa","fb","args","_i","arguments","apply","constant","identity","curry","fn","initialArgs","restArgs","all","concat","not","f","die","msg","Error","never","always","global$1","tinymce","util","Tools","resolve","__assign","Object","assign","s","n","p","hasOwnProperty","call","this","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__spreadArrays","il","r","k","j","jl","SimpleResultType","eq","id","none","NONE","o","isNone","fold","_s","is","isSome","getOr","getOrThunk","thunk","getOrDie","getOrNull","getOrUndefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","some","constant_a","self","me","v","elementEq","b","Optional","from","nativeSlice","slice","nativeIndexOf","nativePush","push","rawIndexOf","ts","contains","xs","range","num","chunk","array","size","partition","pass","fail","foldr","acc","eachr","foldl","find","until","findUntil","findIndex","flatten","reverse","difference","a1","a2","sort","comparator","copy","get","head","last","from$1","findMap","arr","isValue","isError","_opt","_f","_","onValue","mapError","toOptional","error","message","opt","onError","Result","fromOption","err","res","stype","serror","svalue","Value","SimpleResult","results","values","errors","obj","val","keys","each$1","props","map$2","tupleMap","tuple","mapToArray","find$1","get$1","key","has","hasNonNullableKey","Adt","cases","constructors","adt","acase","count","keys$1","argLength","match","branches","branchKeys","join","reqKey","foldArgs","target","log","label","console","params","hasOwnProperty$1","baseMerge","merger","objects","ret","curObject","deepMerge","old","nu","merge","cached","called","strict","defaultedThunk","asOption","asDefaultedOptionThunk","mergeWithThunk","defaulted","fallback","wrap","bothErrors","firstError","secondError","bothValues","_a","wrap$1","wrapAll$1","keyvalues","kv","wrapAll","mergeErrors$1","ResultCombine","partitions","formatObj","input","JSON","stringify","path","getErrorInfo","adt$1","field","state","fallbackAccess","fallbackThunk","cExtractOne","strength","okey","presence","prop","bundle","av","result","extract","bundleAsOption","optValue","outcome","ov","missingStrict","strictAccess","optionAccess","optionDefaultedAccess","baseThunk","base","instantiator","value$1","validator","custom","getSetKeys","onTrue","onFalse","internalFilter","objAcc","filter$1","objOfOnly","fields","delegate","objOf","fieldNames","extra","unsupported","unsupportedFields","mergeValues$1","cExtract","_instantiator","arrOf","oneOf","props_1","anyValue","arrOfObj","choose","missingKey","chosen","ch","branch","missingBranch","vp","chooseFrom","_anyValue","arrOfObj$1","objFields","valueThunkOf","getDelegate","valueOf","setOf$1","validatedKeys","validateKeys","validKeys","schema","vk","setOf","asRaw","errs","extraction","errInfo","formatError","asRawOrDie","es","chooseProcessor","choose$1","anyValue$1","typedValue","expectedType","actualType","number","string","boolean","functionProcessor","isPostMessageable","every","iter","callbackFn","next","done","postMessageable","validateEnum","strict$1","strictOf","strictNumber","strictString","strictStringEnum","strictFunction","strictObjOf","objSchema","strictArrayOfObj","strictArrayOf","option","optionOf","optionNumber","optionString","optionFunction","optionObjOf","defaulted$1","defaultedOf","defaultedNumber","defaultedString","defaultedStringEnum","defaultedBoolean","defaultedFunction","defaultedArrayOf","defaultedObjOf","state$1","Cell","initial","set","fromDom","node","dom","SugarElement","html","scope","div","document","createElement","innerHTML","hasChildNodes","childNodes","tag","text","createTextNode","unknown","nu$1","major","minor","Version","versionRegexes","agent","cleanedAgent","toLowerCase","regexes","test","firstMatch","group","Number","replace","find$2","detect$1","candidates","userAgent","candidate","search","contains$1","str","substr","endsWith","suffix","start","checkRange","trim","blank","normalVersionRegex","checkContains","uastring","browsers","oses","PlatformInfo","edge","chrome","opera","firefox","safari","nu$2","info","current","version","isBrowser","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","windows","android","linux","solaris","freebsd","chromeos","nu$3","isOS","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","PlatformDetection","mediaMatch","browser","UaString","os","deviceType","isiPad","isiPhone","isMobile","isTouch","isTablet","isPhone","iOSwebview","isDesktop","isWebView","DeviceType","query","window","matchMedia","matches","platform","navigator","detect$3","element","selector","nodeType","elem","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","eq$1","e1","e2","contains$2","compareDocumentPosition","Node","DOCUMENT_POSITION_CONTAINED_BY","ieContains","d1","d2","regularContains","ensureIsRoot","isRoot","ancestor","transform","stop","parentNode","el","transformed","closest","isSource","component","simulatedEvent","event","nu$4","parts","constant$1","touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseout","mouseup","mouseover","focusin","focusout","keydown","keyup","change","click","transitionend","selectstart","prefixName","alloy","tap","focus","postBlur","postPaste","receive","execute","focusItem","longpress","sandboxClose","typeaheadCancel","systemInit","documentTouchmove","documentTouchend","windowScroll","windowResize","attachedToDom","detachedFromDom","dismissRequested","repositionRequested","focusShifted","slotVisibility","changeTab","dismissTab","highlight","dehighlight","emit","dispatchWith","emitWith","properties","emitExecute","dispatch","data","getSystem","triggerEvent","dispatchEvent","derive","configs","abort","predicate","preventDefault","run","prevent","handler","runActionExtra","action","runOnSourceName","redirectToPart","detail","partName","uid","getByUid","redirectee","redirectToUid","partUids","runWithTarget","ev","getByDom","c","cutter","cut","stopper","runOnSource","runOnAttached","runOnDetached","runOnInit","runOnExecute","runOnName","Function","nodeName","isType$1","isElement","isText","isDocument","isDocumentFragment","owner","ownerDocument","documentOrOwner","dos","documentElement","defaultView","parent","offsetParent","children","child","index","cs","isShadowRoot","host","supported","Element","attachShadow","getRootNode","isSupported","getContentContainer","body","getShadowRoot","getShadowHost","before","marker","insertBefore","after","nextSibling","append","prepend","firstChild","appendChild","append$1","elements","empty","textContent","rogue","remove","removeChild","unwrap","wrapper","children$1","get$2","content","docDom","fragment","createDocumentFragment","contentElements","rawSet","setAttribute","set$1","get$3","getAttribute","getOpt","has$1","hasAttribute","remove$1","removeAttribute","getHtml","container","clone","cloneNode","getOuter","original","isDeep","shallow$1","events","can","originator","isRecursive","warn","DefaultEvents","freeze","__proto__","unique","generate$1","prefix","time","Date","getTime","Math","floor","random","idAttr","prefix$1","idAttr$1","writeOnly","defineProperty","writable","read$1","generate$2","make","NoContextApi","getComp","debugInfo","triggerFocus","triggerEscape","build","addToWorld","removeFromWorld","addToGui","removeFromGui","broadcast","broadcastOn","broadcastEvent","isConnected","singleton","cleanParameters","parameters","substring","markAsExtraApi","extraName","endIndex","openBracketIndex","split","toFunctionAnnotation","premadeTag","premade","comp","makeApi","apiFunction","markAsSketchApi","rest","getApis","NoState","init","nu$5","readState","spec","byInnerKey","indexKey","chain","nu$6","classes","attributes","styles","getCurried","descHandler","cHandler","behaviourTuple","fuse$1","tuples","eventOrder","eventName","order","keyName","sorted","aKey","bKey","aIndex","bIndex","sortKeys","sortedTuples","handlers","all$1","any","fuse","missingOrderError","combineGroups","byEventName","assembled","rawHandler","read","assemble","purpose","uncurried","partition$2","mergeValues","baseBehaviour","toEvents","read$2","attr","supports","classList","add$2","clazz","add","add$1","remove$4","remove$2","remove$3","get$4","cleanClass","has$2","add$3","remove$5","isSupported$1","style","getPropertyValue","inBody","fbc","fab","doc","getBody","internalSet","property","setProperty","internalRemove","removeProperty","set$2","setAll$1","css","setOptions","get$5","getComputedStyle","getUnsafeProperty","getRaw","raw","getAllRaw","ruleName","item","isValidValue","remove$6","reflow","offsetWidth","get$6","set$3","generate$3","validated","behaviours","list","optBlobThunk","output","blob","config","generateFrom","generateFrom$1","getBehaviours$1","getEvents","bList","bData","baseEvents","behaviourEvents","behaviour","nameToHandlers","groupByEvents","combine$1","getMe","systemApi","toInfo","bBlob","getBehaviours","getData","definition","subject","attrs","setAll","innerHtml","domChildren","renderToDom","defnA","mod","components","infoModification","domModification","toModification","baseModification","baseMod","modsByBehaviour","exhibit","byAspect","modification","combineObjects","combinedClasses","combinedAttributes","combinedStyles","combine","getDomDefinition","subcomponents","hasConfigured","behaviourName","apis","connect","newApi","disconnect","syncComponents","subs","external","extSpec","uids","build$1","getPremade","userSpec","specEvents","buildSubcomponents","completeSpec","buildFromSpec","prebuilt","premade$1","Dimension","getOffset","parseFloat","aggregate","parseInt","isNaN","h","max","cumulativeInclusions","api","getBoundingClientRect","height","offsetHeight","get$7","getOuter$1","left","top","translate","y","SugarPosition","firstDefinedOrZero","absolute","win","offsetLeft","offsetTop","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","viewport","box","boxPosition","api$1","get$8","getOuter$2","fromRawEvent","rawEvent","shadowRoot","isOpenShadowHost","composed","composedPath","getOriginalEventTarget","stopPropagation","kill","mkEvent","clientX","clientY","binder","useCapture","wrapped","handle","addEventListener","unbind","removeEventListener","get$9","_DOC","to","scrollTo","bounds","width","right","bottom","getBounds","_win","scroll","get$a","clientWidth","clientHeight","visualViewport","pageLeft","pageTop","walkUp","navigation","view","Navigation","frameElement","find$3","d","paths","pathTo","frames","offset","loc","bounds$1","xy","w","absolute$1","position","ClosestOrAncestor","EventConfiguration","ancestor$1","closest$1","closest$2","ancestor$2","descendant$1","querySelector","one","closest$3","manager","ariaId","link","unlink","isPartOf","queryElem","dep","find$4","isAriaPartOf","AttributeValue","eventConfig","monitorEvent","initialTarget","patterns","NORMAL","noLogger","LOGGING","logger","sequence","startTime","logEventCut","_name","logEventStopped","logNoParent","logEventNoHandlers","logEventResponse","write","finishTime","makeEventLogger","STOP","processEvent","menuFields","itemFields","itemSchema","_initSize","tieredMenuMarkers","markers","required","onPresenceHandler","fieldName","stack","lines","line","getTrace","onHandler","onKeyboardHandler","onStrictHandler","onStrictKeyboardHandler","snapshot","initSize","nu$7","bubble","direction","boundsRestriction","adt$2","southeast","southwest","northeast","northwest","south","north","east","west","anchor","restrictions","restriction","getRestriction","mapToObject","eastX","middleX","westX","northY","southY","centreY","southeast$1","bubbles","southwest$1","northeast$1","northwest$1","north$1","south$1","east$1","eastEdgeX","west$1","westEdgeX","all$2","allRtl","aboveOrBelow","aboveOrBelowRtl","belowOrAbove","belowOrAboveRtl","ActiveReceiving","receiveConfig","channelMap","channels","receivingData","targetChannels","universal","chooseChannels","channelInfo","channelSchema","onReceive","ReceivingSchema","loadEvent","bConfig","bState","_simulatedEvent","revokeBehaviour","doCreate","configSchema","schemaSchema","active","getConfig","wrappedApis","apiF","apiName","bName","markAsBehaviourApi","wrapApi","wrappedExtra","extraF","revoke","prepared","configAsRaw","initialConfig","behaviourInfo","exhibitor","derive$1","capabilities","simpleSchema","create$1","create","modeSchema","createModes$1","modes","createModes","branchKey","Receiving","ActivePosition","posConfig","useFixed","focus$1","root","activeElement","preserve","refocus","focused","descend","hasFocus","child_1","oldFocus","newFocus","NuPositionCss","applyPositionCss","addPx","adt$3","relative","fixed","positionWithDirection","posName","decision","decisionX","decisionY","decisionRight","decisionBottom","toBox","origin","rel","viewport$1","pos","outerScroll","cycleBy","delta","min","clamp","adt$4","fit","nofit","layout","anchorBox","options","elementBox","panelWidth","panelHeight","attemptBestFit","reposition","deltaW","deltaH","candidateX","candidateY","bubbleOffsets","bubbleLeft","bubbleTop","adjustedBounds","boundsRestrictions","applyRestriction","dir","bubbleOffset","adjustedLeft","adjustedTop","adjustedRight","adjustedBottom","adjustBounds","boundsY","boundsBottom","boundsX","boundsRight","newY","newX","boundsWidth","boundsHeight","xInBounds","yInBounds","originInBounds","sizeInBounds","abs","maxX","maxY","limitX","limitY","calcReposition","upAvailable","downAvailable","maxHeight","middle","cataVertical","westAvailable","eastAvailable","maxWidth","cataHorizontal","on","classesOn","off","classesOff","candidateYforTest","attempt","newReposition","newDeltaW","newDeltaH","bestNext","attempts","preference","setMaxHeight","absMax","setMax","anchored","available","expandable","defaultOr","dephault","go","classInfo","setClasses","maxHeightFunction","setHeight","maxWidthFunction","setWidth","allAlignments","nu$8","yoffset","getClasses","xDelta","yDelta","alignmentsOn","alignmentsOff","innerNorthwest","innerNortheast","innerNorth","innerSouthwest","innerSoutheast","innerSouth","innerWest","innerEast","onDirection","isLtr","isRtl","getDirection","FocusInsideModes","Attribute","isBottomToTopDir","BottomToTop","schema$1","get$b","defaultLtr","defaultRtl","defaultBottomLtr","defaultBottomRtl","dirElement","isBottomToTop","customLtr","layouts","ls","onLtr","customRtl","onRtl","ltr","onBottomLtr","rtl","onBottomRtl","HotspotAnchor","anchorInfo","hotspot","overrides","placer","MakeshiftAnchor","adt$5","screen","toFixed","point","toAbsolute","sum","points","sumAsAbsolute","positions","absolute$2","getRootPoint","frame","frameOwner","compOwner","capRect","newLeft","newTop","newWidth","newHeight","pointed","calcNewAnchor","optBox","rootPoint","onNone","onRelative","onFixed","topLeft","sumAsFixed","layoutsLtr","showAbove","layoutsRtl","NodeAnchor","rect","nodeBox","SimRange","soffset","finish","foffset","adt$6","Situ","situ","adt$7","domRange","exact","SimSelection","exactFromRange","simRange","getWin","selection","rng","startContainer","startSitu","_finishSitu","_soffset","_finish","_foffset","getStart$1","relativeToNative","finishSitu","createRange","setStartBefore","setStart","setStartAfter","setEndBefore","setEnd","setEndAfter","setFinish","exactToNative","toRect","adt$8","fromRange","startOffset","endContainer","endOffset","api$2","getOption","nodeValue","NodeValue","elementsWithCursorPosition","isCursorPosition","descendants","querySelectorAll","readRange","rangeCount","firstRng","getRangeAt","lastRng","doGetExact","anchorNode","focusNode","focus_1","makeRange","same","collapsed","after$2","anchorOffset","focusOffset","getFirstRect$1","ranges","getRanges","rev","diagnose","asLtrRange","rects","getClientRects","descendOnce$1","get$c","descendOnce","getAnchorSelection","getSelection","getNativeSelection","sel","getExact","modStart","modFinish","SelectionAnchor","selectionBox","rawRect","eastX$1","westX$1","northY$1","southY$1","southeast$2","southwest$2","northeast$2","northwest$2","all$3","allRtl$1","SubmenuAnchor","submenuInfo","AnchorSchema","submenu","makeshift","place","anchoring","placee","overrideOptions","simple","box$1","positionWithin","posState","boxElement","boundsBox","positionWithinBounds","anchorage","oldVisibility","getRelativeOrigin","placement","doPlace","vis","PositionApis","getMode","pConfig","_pState","PositionSchema","Positioning","fireDetaching","fireAttaching","attach","replaceChildren","newChildren","childComp","detachChildren","deleted","attach$1","attachWith","insertion","doDetach","detach","parent$1","detachChildren$1","attachSystem","guiSystem","attachSystemWith","inserter","detachSystem","rebuild","sandbox","sConfig","sState","_data","getAttachPoint","built","open","newState","onOpen","close","onClose","clear","isOpen","_sandbox","_sConfig","cloak","_sState","sink","cssKey","newValue","store","cloakVisibilityAttr","decloak","hasPosition","oldValue","restore","SandboxApis","openWhileCloaked","transaction","getState","setContent","ActiveSandbox","sandboxConfig","sandboxState","SandboxSchema","Sandboxing","contents","dismissPopups","repositionPopups","mouseReleased","schema$2","receivingChannel","rawSpec","isExtraPart","fireEventInstead","fe","schema$3","receivingChannel$1","doReposition","onLoad","repConfig","repState","onUnload","RepresentApis","setValue","getValue","ActiveRepresenting","resetOnDom","_se","memory","isNotSet","mode","dataset","dataByValue","dataByText","lookup","itemString","update","items","currentDataByValue","currentDataByText","newDataByValue","newDataByText","meta","RepresentState","manual","setValue$1","onSetValue","DatasetStore","getDataKey","getFallbackEntry","initialValue","ManualStore","_repState","MemoryStore","initVal","RepresentSchema","Representing","setValueFrom","source","field$1","forbidden","_v","get$d","dump","augment","SketchBehaviours","_placeholder","adt$9","single","multiple","isSubstituted","substitute","compSpec","placeholders","uiType","newSpec","subPlaceholder","scan","req","valueThunk","childSpecs","substituted","valuesThunk","preprocess","preprocessor","placeholder","adt$a","optional","fFactory","sketch","fSchema","fName","fPname","typeSpec","fGroupSchema","fDefaults","fOverrides","requiredSpec","externalSpec","optionalSpec","groupSpec","asNamedPart","part","name$1","convert","adtConstructor","partSchema","external$1","PartType","asCommon","combine$2","partSpec","partValidated","defaults","generate$4","np","g","doGenerateOne","pname","generateOne","schemas","names","substitutes","internals","externals","factory","_partSpec","_partValidated","units","u","ps","ph","replacements","used","substituteAll","substitutePlaces","getPart","partKey","getPartOrDie","getParts","partKeys","system","pk","getAllParts","pUid","_k","getAllPartNames","getPartsOrDie","defaultUids","baseUid","partTypes","partNames","pn","defaultUidsSchema","AlloyParts","generate","asRawOrDie$1","partSchemas","partUidsSchemas","baseS","composite","specWithUid","supplyUid","partUidsSchema","hasUid","singleSchema","compositeSchema","single$2","rawConfig","extraApis","configFields","single$1","composite$1","partFields","cat","someIf","inside","ComposeApis","getCurrent","composeConfig","_composeState","ComposeSchema","Composing","dehighlightAllExcept","hConfig","hState","skip","highlighted","highlightClass","skipComp","onDehighlight","highlight$1","isHighlighted","onHighlight","queryTarget","getFirst","_hState","itemClass","getLast","getDelta","selected","dest","getCandidates","HighlightApis","dehighlightAll","highlightFirst","firstComp","highlightLast","lastComp","highlightAt","getByIndex","highlightBy","getHighlighted","getPrevious","getNext","HighlightSchema","Highlighting","BACKSPACE","TAB","ENTER","ESCAPE","SPACE","LEFT","UP","RIGHT","DOWN","cyclePrev","tryPrev","cycleNext","tryNext","inSet","which","and","preds","isShift","shiftKey","isControl","ctrlKey","isNotShift","rule","classification","reportFocusShifting","prevFocus","focusee","highlights","typical","infoSchema","stateInit","getKeydownRules","getKeyupRules","optFocusIn","processKey","getRules","keyingConfig","keyingState","transitions","onFocusHandler","focusInside","OnFocusMode","focusIn","keyboardEvents","isEnterOrSpace","OnEnterOrSpaceMode","tryGoInsideComponent","create$3","cyclicField","isVisible","tabbingConfig","visibilitySelector","_tabbingState","tabstops","visibles","firstTabstop","findInitial","focusManager","cycle","findCurrent","tabstop","stopIndex","useTabstopAt","isTabstop","cyclic","goFromTabstop","navigate","onEscape","onEnter","AcyclicType","CyclicType","defaultExecute","doDefaultExecute","stopEventForFirefox","_component","schema$4","execute$1","executeConfig","ExecutionType","_executeState","spaceExec","useSpace","enterExec","useEnter","downExec","useDown","execKeys","useControlEnter","flatgrid","dimensions","numRows","numColumns","setGridSize","getNumRows","getNumColumns","KeyingState","useH","movement","move","use","west$2","moveLeft","moveRight","east$2","useV","north$2","south$2","isHidden","locateVisible","locate","findIndex$1","withGrid","numCols","address","newIndex","row","column","cycleHorizontal","oldRow","oldColumn","colsInRow","newColumn","cycleVertical","newRow","newCol","schema$5","gridConfig","_gridState","first","doMove","gridState","identified","handleTab","captureTab","moveNorth","moveSouth","getKeydownRules$1","getKeyupRules$1","FlatgridType","horizontal","tryCycle","schema$6","execute$3","flowConfig","findCurrent$1","focusIn$1","_state","getInitial","moveLeft$1","moveRight$1","doMove$1","flowState","executeOnMove","doEscape$1","getKeyupRules$2","FlowType","_flowState","westMovers","allowVertical","eastMovers","toCell","matrix","rowIndex","columnIndex","cell","cycleHorizontal$1","startCol","deltaCol","newColIndex","cycleVertical$1","colIndex","startRow","deltaRow","nextRowIndex","colsInNextRow","nextColIndex","moveHorizontal","moveVertical","schema$7","focusIn$2","matrixConfig","previousSelector","selectors","doMove$2","ifCycle","ifMove","cycles","inRow","cellsInRow","allRows","rows","toMatrix","moveLeft$3","moveRight$3","moveNorth$1","moveSouth$1","getKeydownRules$3","getKeyupRules$3","MatrixType","schema$8","execute$5","menuConfig","focusIn$3","moveUp$1","moveDown$1","getKeydownRules$4","menuState","moveOnTab","getKeyupRules$4","MenuType","schema$9","SpecialType","specialInfo","onSpace","onShiftEnter","onShiftTab","onTab","onUp","onDown","onLeft","onRight","stopSpaceKeyup","acyclic","flow","flatgrid$1","execution","menu","special","Keying","keyConfig","keyState","sendFocusIn","isFlatgridState","insert","replaceConfig","childSpec","remove$7","replaceState","removee","_replaceConfig","replaceAt","replaceeIndex","replacer","replacee","appendAt","Replacing","appendee","prependee","replaceBy","replaceePred","eventHandlers","events$4","focus$2","focusConfig","ignore","onFocus","FocusApis","blur","isFocused","ActiveFocus","tabindex","stopMousedown","FocusSchema","Focusing","updateAriaState","toggleConfig","toggleState","ariaInfo","aria","updateClass","toggleClass","toggle","set$6","on$1","onLoad$4","ToggleApis","isOn","ActiveToggle","executor","load","toggleOnExecute","updateExpanded","status","ToggleSchema","pressed","syncWithExpanded","checked","expanded","Toggling","pointerEvents","onClick","events$7","optAction","hoverEvent","focusEvent","onHover","hover","focus$3","schema$a","toggling","hasSubmenu","itemBehaviours","tConfig","ignoreFocus","schema$b","owner$2","schema$c","components$1","focusWidget","widget","onHorizontalArrow","autofocus","setSource","_widget","widgetBehaviours","itemSchema$1","separator","parts$1","itemInfo","builder","unit","fakeFocus","schema$d","grid","movementInfo","rowSelector","focus$4","Menu","_spec","_externals","menuBehaviours","selectedItem","role","trace","byItem","byMenu","triggerItem","triggerMenu","extractPreparedMenu","prep","LayeredState","expansions","menus","primary","directory","getPreparedMenu","menuValue","lookupMenu","lookupItem","itemValue","setMenuBuilt","menuName","setContents","sPrimary","sMenus","sExpansions","sPaths","menuItems","menuPaths","_triggerItem","generate$5","expand","refresh","collapse","otherMenus","menuValues","getPrimary","getMenus","isClear","getTriggeringPath","getItemByValue","extraPath","revPath","menuIndex","getTriggeringItem","triggeringItemValue","triggeredItem","triggeredMenu","triggeringItem","triggeringPath","getTriggerData","collapseItem","tieredMenu","collapseMenu","tmenu","highlightPrimary","repositionMenus","_rawUiSpec","ExpandHighlightDecision","submenuParentItems","layeredState","getItemValue","toDirectory","_container","_menuName","setActiveMenu","mv","closeOthers","others","backgroundMenu","stayInDom","updateAriaExpansions","parentItems","itemComp","getSubmenuParents","updateMenuPath","latestMenuName","menuPrep","activeMenu","expandRight","HighlightSubmenu","activeMenuPrep","nbMenu","buildIfRequired","onOpenSubmenu","collapseLeft","onCollapseMenu","keyOnItem","getSource","onExecute","componentMap","primaryName","makeSketch","buildMenus","setup","onOpenMenu","highlightImmediately","navigateOnHover","updateView","HighlightParent","getActiveItem","currentItem","allMenus","preparedMenus","extractMenuFromContainer","primaryMenu","onRepositionMenu","tmenuBehaviours","_keyInfo","selectedMenu","tieredData","singleData","InlineView","showWithin","thing","showWithinBounds","lazySink","showMenuWithinBounds","menuSpec","menuSandbox","getSubmenuLayouts","triggeringPaths","isFirstTierSubmenu","submenuTriggers","st","submenuLayouts","makeMenu","showAt","showMenuAt","hide","getContent","inlineBehaviours","getRelated","isPartOfRelated","onShow","onHide","fireDismissalEventInstead","fireRepositionEventInstead","westEdgeX$1","middleX$1","eastEdgeX$1","northY$2","southY$2","southeast$3","southwest$3","northeast$3","northwest$3","north$3","south$3","global$2","Button","lookupAttr","buttonBehaviours","roleAttrs","getModAttributes","record","isSketchSpec","anyInSystem","asSpec","defaultIcon","icons","get$e","getFirst$1","notificationIconMap","success","warning","Notification","memBannerText","translationProvider","renderPercentBar","percent","renderPercentText","memBannerProgress","progress","updateProgress","updateText","text$1","banner","iconChoices","icon","level","memButton","iconProvider","onAction","closeButton","ItemResponse","last$2","rate","timer","cancel","clearTimeout","throttle","setTimeout","global$3","repeatLeft","process","rootNode","isBlock","getContentEditable","isBoundary","backwards","create$4","editor","detect$4","getNode","getDoc","extractContents","insertNode","elm","normalize","last$1","setCursorLocation","getEnd","getText","isWhitespace","chr","stripTriggerChar","triggerCh","getContext","initRange","minChars","getParent","getRoot","char","charAt","findChar","spot","cloneRange","lastIndexOf","triggerChar","findStart","createRng","selectNode","global$4","point$1","toLast","isText$1","toLeaf","isElement$1","lookupWithContext","getDatabase","context","fetchOptions","database","startText","getRng","autocompleters","lookupByChar","autocompleter","leaf","isPreviousCharContent","isStartOfWord","lookupData","ac","fetch","maxResults","then","matchText","columns","highlightOn","separatorMenuItemSchema","autocompleterItemSchema","autocompleterSchema","baseToolbarButtonFields","toolbarButtonSchema","createToolbarButton","baseToolbarToggleButtonFields","toggleButtonSchema","createToggleButton","contextBarFields","contextButtonFields","contextToggleButtonFields","launchButtonFields","launchToggleButtonFields","toggleOrNormal","contextformbutton","contextformtogglebutton","contextFormSchema","contextToolbarSchema","ToolbarMode","ItemResponse$1","navClass","selectableClass","presetClasses","normal","color","tickedClass","textClass","caretClass","activeClass","containerClass","containerRowClass","classForPreset","presets","forMenu","hasIcons","markers$1","menuClasses","dom$1","chunk$1","rowDom","chunks","preprocessCollection","isSeparator","allSplits","currentSplit","forCollection","initItems","_hasIcons","_item","menuHasIcons","handleError","createHorizontalPartialMenuWithAlloyItems","_columns","_presets","structure","createPartialMenuWithAlloyItems","forSwatch","forToolbar","cardImageFields","cardImageSchema","cardTextFields","cardTextSchema","itemSchema$2","cardimage","cardtext","cardcontainer","cardContainerSchema","commonMenuItemFields","cardMenuItemSchema","choiceMenuItemSchema","fancyMenuItemSchema","menuItemSchema","nestedMenuItemSchema","toggleMenuItemSchema","detectSize","margin","selectorClass","descendants$1","columnLength","thisTop","cTop","ceil","SimpleBehaviours","namedEvents","ExclusivityChannel","ShowTooltipEvent","HideTooltipEvent","hideAllExclusive","_tConfig","_tState","TooltippingApis","setComponents","tState","specs","getTooltip","tooltip","ActiveTooltipping","tooltipConfig","clearTooltip","clearTimer","resetTimer","isShowing","popup","tooltipDom","tooltipComponents","setTooltip","show","delay","TooltippingSchema","Tooltipping","global$5","global$6","nativeDisabled","onLoad$5","disableConfig","disableState","disabled","disable","enable","hasNative","useNative","nativeDisable","nativeEnable","ariaDisable","ariaEnable","_disableState","disableClass","onDisabled","onEnabled","isDisabled","nativeIsDisabled","ariaIsDisabled","DisableApis","ActiveDisable","DisableSchema","Disabling","global$7","getHeightSetting","getParam","getElement","getWidthSetting","DOM","getStyle","getMinWidthSetting","getMinHeightSetting","getMaxWidthSetting","getMaxHeightSetting","isMenubarEnabled","isToolbarEnabled","toolbar","isToolbarTrue","isToolbarString","isToolbarObjectArray","isMultipleToolbars","getMultipleToolbarsSetting","toolbars","toolbarArray","ToolbarLocation","getToolbarMode","FocusMode","getToolbarLocation","auto","isToolbarLocationBottom","fixedContainerTarget","inline","fixedContainerSelector","fixedToolbarContainerTarget","useFixedContainer","getUiContainer","isDistractionFree","isStickyToolbar","getMenubar","getAnchorTop","getAnchorBottom","ReadOnlyChannel","ReadOnlyDataSchema","broadcastReadonly","uiComponents","readonly","outerContainer","mothership","uiMothership","setupReadonlyModeSwitch","isReadOnly","setMode","receivingConfig","DisablingConfigs","runWithApi","getApi","onControlAttached","editorOffCell","onDestroy","onSetup","onControlDetached","onMenuItemExecute","itemResponse","triggersSubmenu","CLOSE_ON_EXECUTE","menuItemEventOrder","componentRenderPipeline","renderCommonItem","providersbackstage","optComponents","buildData","global$8","convertText","mac","alt","ctrl","shift","access","shortcut","updated","segment","renderIcon","iconHtml","renderText","renderHtml","renderStyledText","renderShortcut","renderCheckmark","renderItemDomStructure","rtlClass","ariaLabel","domTitle","title","rtlIcon","rtlTransform","renderItemStructure","providersBackstage","renderIcons","fallbackIcon","iconName","needRtlClass","iconContent","textRender","itemText","iconSvg","providerBackstage","baseDom","colorClass","renderColorStructure","leftIcon","checkmark","checkMark","htmlContent","shortcutContent","caret","renderNormalItemStructure","tooltipBehaviour","sharedBackstage","tooltipWorker","getSink","_tooltip","replaceText","encoded","encode","encodeText","escapedMatchRegex","RegExp","escape","render","extras","directionClass","alignClass","align","valign","getValignClass","renderContainer","src","renderImage","cardText","parts$2","hexColour","shorthandRegex","longformRegex","isHexString","hex","toHex","toUpperCase","fromRgba","rgbaColour","red","green","blue","round","rgbRegex","rgbaRegex","alpha","isRgbaComponent","fromHsv","hsv","hue","saturation","brightness","side","chroma","fromHex","longForm","splitForm","m","getLongForm","exec","fromStringValues","rgba","fireResizeContent","fire","global$9","storageName","choiceItem","defaultColors","colorCache","storageString","getItem","localstorage","parse","cache","idx","splice","unshift","pop","setItem","ColorCache","hasCustomColors","getColors","unmapped","getColorMap","colorMap","colors","canvas","ctx","byteAsHex","colorByte","alphaByte","asHexColor","clearRect","fillStyle","fillRect","getImageData","mapColors","addColor","getColorCols$1","defaultCols","getColorCols","sqrt","applyColor","format","onChoice","colorPickerDialog","dialog","colorOpt","execCommand","getColors$1","hasCustom","getAdditionalColors","getFetch","callback","setIconColor","splitButtonApi","newColor","setIconFill","registerTextColorButton","lastColor","ui","registry","addSplitButton","select","getParents","getStart","getCurrentColor","currentRgb","rgbaString","rgbMatch","rgbaMatch","fromString","currentHex","_splitButtonApi","onItemAction","fireTextColorChange","registerTextColorMenuItem","addNestedMenuItem","getSubmenuItems","fancytype","isValid","initialData","colorpicker","windowManager","buttons","_api","details","onSubmit","alert","onCancel","createPartialChoiceMenu","onItemValueHandler","alloyItems","createChoiceItems","itemPresets","useText","isSelected","setActive","isActive","setDisabled","renderChoiceItem","deriveMenuMovement","menuMarkers","cellOverEvent","cellExecuteEvent","makeCell","col","labelId","se","makeComponents","cells","cellRow","makeLabelText","fancyMenuItems","inserttable","sizeLabelId","makeCells","memLabel","selectedRow","selectedColumn","selectCells","colorswatch","backstage","colorinput","shared","providers","widgetSpec","createMenuItemFromBridge","isHorizontalMenu","parseForHorizontalMenu","menuitem","createNestedMenuItem","downwardsCaret","renderSubmenuCaret","nested","createToggleMenuItem","toggle$1","createSeparatorMenuItem","createFancyMenuItem","valueOpt","fancy","createAutocompleteItems","createCardMenuItem","card","createAutocompleterItem","autocomplete","createPartialMenu","createItem","itemHasIcon","createTieredDataFrom","partialMenu","Autocompleter","activeAutocompleter","processingAction","cancelIfNecessary","hideIfNecessary","lastElement","getAutocompleters","popups","getAll","triggerChars","datasetValues","dv","register","newContext","getTriggerContext","doLookup","lookupInfo","matchLength","commenceIfNecessary","combinedItems","choices","itemMeta","nr","autocompleterApi","reload","BUBBLE_TO_SANDBOX","ld","focusMode","ContentFocus","createMenuFrom","display","autocompleterUiApi","onKeypress","isMenuOpen","isProcessingAction","getView","hasPlugin","redirectKeyToItem","stopImmediatePropagation","AutocompleterEditorEvents","filter$2","bind$3","bind$2","capture$1","capture","fromRawEvent$1","closest$4","DelayedFunction","fun","ref","schedule","getTouch","touches","settingsSchema","setup$1","rawSettings","settings","tapEvent","startData","longpressFired","longpress$1","touch","distX","distY","isFarEnough","fireIfReady","monitor","simpleEvents","tapStopped","pasteTimeout","onPaste","onKeydown","stopBackspace","isDangerous","onFocusIn","bindFocus","focusoutTimeout","onFocusOut","bindBlur","derive$2","rawTarget","adt$b","stopped","resume","complete","doTriggerHandler","eventType","isStopped","isCut","fromSource","handlerInfo","eventHandler","doTriggerOnUntilStopped","triggerOnUntilStopped","Registry","registerId","extraArgs","curryArgs","unregisterId","handlersById","_eventName","filterByType","broadcastHandler","isAboveRoot","findHandler","unregister","tagId","readOrTag","conflict","failOnDuplicate","getById","Container","domWithoutAttributes","containerBehaviours","takeover","domEvents","triggerUntilStopped","_alloyId","triggerHandler","broadcast$1","broadcastData","receivers","receiver","listeners","_logger","fromExternal","listener","destroy","schema$e","parts$3","excludeFactory","exclude","FormField","fieldBehaviours","descriptor","descriptorId","getField","getLabel","ActiveTabstopping","tabConfig","tabAttr","TabstopSchema","Tabstopping","global$a","renderFormFieldWith","pLabel","pField","extraClasses","extraBehaviours","renderFormFieldSpecWith","renderFormFieldDomWith","renderLabel","formChangeEvent","formCloseEvent","formCancelEvent","formActionEvent","formSubmitEvent","formBlockEvent","formUnblockEvent","formTabChangeEvent","formResizeEvent","schema$f","focusBehaviours","selectOnFocus","setSelectionRange","inputBehaviours","dom$2","inputAttributes","inputStyles","inputClasses","Input","exports$1","module","exports","define","require","EphoxContactWrapper","code","1","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","runClearTimeout","Item","nextTick","env","argv","versions","addListener","once","removeListener","removeAllListeners","prependListener","prependOnceListener","binding","cwd","chdir","umask","2","setImmediate","setTimeoutFunc","Promise","TypeError","_handled","_value","_deferreds","doResolve","deferred","_immediateFn","cb","onFulfilled","onRejected","reject","promise","finale","thisArg","_unhandledRejectionFn","Handler","reason","ex","prom","remaining","race","_setImmediateFn","_setUnhandledRejectionFn","3","clearImmediate","immediateIds","nextImmediateId","Timeout","clearFn","_id","_clearFn","setInterval","clearInterval","unref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout","4","promisePolyfill","Global","boltExport","HighlightOnOpen","nu$a","baseFn","callbacks","nCallback","isReady","LazyValue","pure","errorReporter","make$3","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","Future","ariaElements","isAriaElement","markValid","invalidConfig","invalidClass","notify","notifyInfo","getContainer","validHtml","onValid","markInvalid","invalidState","onInvalid","_invalidState","validatorInfo","validate","run$1","onValidate","valid","InvalidateApis","isInvalid","ActiveInvalidate","onEvent","validateOnLoad","InvalidateSchema","Invalidating","validation","CouplingApis","getCoupled","coupleConfig","coupleState","getOrCreate","CouplingSchema","Coupling","coupled","partType","kernel","colorFn","_a$1","getAnchor","getHotspot","getAnchorOverrides","open$1","mapFetch","onOpenSync","highlightOnOpen","futureData","fetcher","getLazySink","tdata","HighlightFirst","openF","close$1","_onOpenSync","_highlightOnOpen","togglePopup","sinkDetail","internalSink","lazySinkFn","doRepositionMenus","makeSandbox","ariaOwner","sandboxClasses","sandboxBehaviours","matchWidth","useMinWidth","buttonWidth","set$4","sandboxFields","schema$g","parts$4","Dropdown","switchToMenu","HighlightNone","triggerExecute","dropdownBehaviours","ActiveUnselecting","unselectable","Unselecting","colorInputChangeEvent","colorSwatchChangeEvent","colorPickerCancelEvent","labelPart","edgePart","model","edgeActions","det","mouseIsDown","tlEdgePart","tedgePart","trEdgePart","redgePart","brEdgePart","bedgePart","blEdgePart","ledgePart","thumbPart","spectrumPart","getValueFromEvent","spectrum","SliderParts","sliderChangeEvent","getEventSource","evt","isTouchEvent","touchEvent","mouseEvent","minX","minY","min1X","min1Y","max1X","max1Y","range$2","xRange","yRange","halfX","halfY","step","stepSize","snap","snapToGrid","snapStart","rounded","hasEdge","edgeName","hasLEdge","hasREdge","hasTEdge","hasBEdge","currentValue","xValue","yValue","xyValue","fireSliderChange","reduceBy","increaseBy","capValue","findValueOf","hasMinEdge","hasMaxEdge","minBound","maxBound","screenRange","capMin","capMax","findOffsetOf","initValue","extraValue","remainder","adjustment","rawSteps","maxSteps","snapValueOf","findOffsetOfValue","maxOffset","centerMinEdge","centerMaxEdge","getBounds$1","getBoundsProperty","getMinXBounds","getMaxXBounds","getMinYBounds","getMaxYBounds","getXScreenRange","getYScreenRange","getCenterOffsetOf","componentMinEdge","componentMaxEdge","spectrumMinEdge","getXCenterOffSetOf","componentBounds","spectrumBounds","getYCenterOffSetOf","fireSliderChange$1","sliderValue","findValueOfOffset","handleMovement","moveBy","findPositionOfValue","slider","minEdge","maxEdge","minOffset","findOffsetOfValue$1","HorizontalModel","sliderVal","setToMin","setToMax","setPositionFromValue","thumb","edges","getSpectrum","getLeftEdge","getRightEdge","thumbRadius","fireSliderChange$2","sliderValue$1","findValueOfOffset$1","handleMovement$1","moveBy$1","findPositionOfValue$1","findOffsetOfValue$2","onLeft$1","onRight$1","onUp$1","onDown$1","edgeActions$1","VerticalModel","getTopEdge","getBottomEdge","fireSliderChange$3","sliderValue$2","handleMovement$2","isVerticalMovement","moveBy$2","onLeft$2","onRight$2","onUp$2","onDown$2","edgeActions$2","TwoDModel","mX","mY","xPos","yPos","thumbXRadius","thumbYRadius","Slider","getThumb","modelDetail","wasDown","onChoose","onDragStart","onDragEnd","sliderBehaviours","onChange","changeValue","getInitialValue","onInit","resetToMin","resetToMax","hsvColour","fromRgb","minRGB","maxRGB","hsvToHex","fieldsUpdate","sliderUpdate","paletteUpdate","owner$3","schema$h","getPartName","make$4","formBehaviours","form","resPs","resPThunk","pName","Form","fSpec","fieldParts","validInput","invalidInput","validatingInput","translatePrefix","rgbFormFactory","getClass","onValidHexx","onInvalidHexx","invalidation","renderTextField","description","helptext","comps","concats","copyRgbToForm","rgb","memPreview","updatePreview","preview","setValueRgb","onInvalidInput","onValidInput","isHexInputEvent","hexField","copyRgbToHex","onValidRgb","onValidHex","formPartStrings","redStrings","greenStrings","blueStrings","hexStrings","updateHex","copyHexToRgb","makeFactory","updates","rgbForm","onInvalidHex","sbPalette","_translate","setColour","grdWhite","createLinearGradient","addColorStop","grdBlack","_detail","_thumb","_slider","setHue","_apis","setPaletteHue","setThumb","setPaletteThumb","paletteFactory","hueDegreesToSlider","paletteRgba","paletteHue","memSlider","sliderFactory","memPalette","memRgb","updatePalette","_hex","palette","updateFields","runUpdates","updateState","hexToHsv","oldHue","newHsv","newHex","onPaletteUpdate","hueSliderToDegrees","oldRgb","oldHsv","onSliderUpdate","ComposingConfigs","english","translate$1","getEnglishText","global$b","global$c","processors","withComp","optInitialValue","getter","setter","RepresentingConfigs","mem","rawProcessors","other","rawValue","postprocess","beforeObject","afterObject","craftWithClasses","outline","craft","triggerTab","onFocus$1","targetComp","isPseudoStop","platformNeedsSandboxing","create$5","resize","clone$1","tCanvas","get2dContext","drawImage","getWidth","image","naturalWidth","getHeight","naturalHeight","Promise$1","anyWindow","asap","immediateFn","catch","values_1","canvasToBlob","quality","HTMLCanvasElement","toBlob","uri","toDataURL","mimetype","base64","sliceSize","byteCharacters","atob","bytesLength","slicesCount","byteArrays","sliceIndex","begin","end","bytes","charCodeAt","Uint8Array","Blob","dataUriToBlobSync","revokeImageUrl","URL","revokeObjectURL","create$6","getCanvas","initialType","getType","toAdjustedDataURL","canvasToDataURL","toBase64","toAdjustedBlob","toAdjustedBase64","dataurl","toCanvas","fromBlob","reader","FileReader","onloadend","readAsDataURL","blobToDataUri","blobUrl","createObjectURL","Image","removeListeners","loaded","blobToImage","blobToCanvas","fromCanvas","clamp$1","parsedValue","DELTA_INDEX","multiply","matrix1","matrix2","out","colorFilter","ir","applyColorFilter","pixels","pixelsData","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","applyMatrix","putImageData","complexAdjustableColorFilter","matrixAdjustFn","adjust","invert","basicColorFilter","contrast","sharpen","pixelsIn","pixelsOut","pIn","pOut","aMatrix","halfSide","drgba","cy","cx","scx","innerOffset","wt","applyConvoluteFilter","convoluteFilter","gamma","pow","applyLookup","filterImpl","scale","dW","dH","sW","sH","wRatio","hRatio","scaleCapped","scaled","_scale","ceilWithPrecision","precision","mul","upper","invert$1","sharpen$1","gamma$1","brightness$1","contrast$1","flip$1","axis","applyFlip","flip","crop$1","applyCrop","crop","rotate$1","angle","rad","PI","sin","cos","rotate","applyRotate","renderIcon$1","renderIconFromPack","iconsProvider","renderReplacableIconFromPack","renderLabel$1","internalToolbarButtonExecute","toolbarButtonEventOrder","updateMenuText","updateMenuIcon","renderCommonDropdown","optMemDisplayText","optMemDisplayIcon","onLeftOrRightInMenu","dropdown","tooltipAttributes","translatedTooltip","displayText","displayIcon","separator$1","realItems","isMenuItemReference","unwrapReferences","newData","isExpandingMenuItem","submenuItems","getFromExpandingItem","getFromItem","generateValueIfRequired","build$2","mainMenu","submenus","getMenuButtonApi","renderMenuButton","_comp","getFetch$1","getButton","getMenuItemAction","storage","orig","getMenuItemSetup","renderCommonSpec","actionOpt","common","domFinal","renderIconButtonSpec","renderIconButton","iconButtonSpec","renderButtonSpec","translatedText","borderless","renderButton","buttonSpec","getAction","buttonType","renderFooterButton","isMenuFooterButtonSpec","menuButtonSpec","fixedSpec","memButton_1","isNormalFooterButtonSpec","schema$i","coupledPart","selfName","otherName","lock","onLockedChange","parts$5","locked","lockClass","FormCoupledInputs","coupledFieldBehaviours","field1Name","field1","field2Name","field2","getField1","getField2","getLock","parseSize","sizeText","convertUnit","inInch","noSizeConversion","_input","renderSizeInput","converter","ratioEvent","pLock","formGroup","getFieldPart","isField1","widthField","heightField","_lock","newSize","unitDec","numText","formatSize","otherFieldText","oa","ob","optCurrent","optOther","value1","value2","cSize","oSize","ratioSizeConversion","internal","undo","redo","zoom","back","swap","tempTransform","transformApply","saveState","disable$1","enable$1","external$2","renderEditPanel","imagePanel","createButton","createIconButton","disableAllComponents","eventcomp","enableAllComponents","panelDom","noop$1","emit$1","emitDisable","emitEnable","emitTransform","getBackSwap","memContainer","ButtonPanel","emitTransformApply","createBackButton","button","createSpacer","createApplyButton","cropPanelComponents","getRect","hideCrop","CropPanel","memSize","constrain","resizePanelComponents","sizeInput","newCanvas","resize$1","resize$2","ResizePanel","makeValueTransform","horizontalFlip","verticalFlip","counterclockwiseRotate","clockwiseRotate","flipRotateOnAction","operation","emitTempTransform","flipRotateComponents","FlipRotatePanel","makeSlider","makeVariableSlider","valTransform","createVariableFilterPanel","filterPanelComponents","variableFilterPanelComponents","FilterPanel","BrightnessPanel","ContrastPanel","GammaPanel","makeColorTransform","adjustR","adjustG","adjustB","adjustColors","colorize","colorize$1","makeColorSlider","redOpt","memRed","blueOpt","memBlue","greenOpt","memGreen","colorizePanelComponents","ColorizePanel","getTransformPanelEvent","panel","sharpenTransform","invertTransform","buttonPanelComponents","_anyInSystem","showCrop","measurements","getMeasurements","getApplyButton","global$d","global$e","global$f","global$g","updateWithTouchData","changedTouches","Delimiter","CropRect","currentRect","viewPortRect","clampRect","containerElm","dragHelpers","handles","xMul","yMul","deltaX","deltaY","blockers","getRelativeRect","outerRect","innerRect","moveRect","startRect","instance","setInnerRect","repaint","updateElementRect","setRect","relativeRect","appendTo","blocker","$eventOverlay","downButton","startX","startY","handleElement","getElementById","drag","screenX","screenY","cursor","docSize","scrollWidth","scrollHeight","getDocumentSize","handleElm","runtimeStyle","zIndex","opacity","DragHelper","activeHandle","moveAndBlock","keyCode","SPACEBAR","extend","toggleVisibility","setClampRect","getInnerRect","setViewPortRect","helper","setButtonEnabled","enabled","renderImageTools","initialState","canUndo","canRedo","blobState","tempState","undoStack","removed","setBlobState","createState","url","destroyState","destroyTempState","addBlobState","states","getBlobState","getTempState","temp","updateTempState","newTempState","addTempState","applyTempState","postApply","currentState","getHistoryStates","undoEnabled","redoEnabled","makeState","updateButtonUndoStates","historyStates","sideBar","imageResultToBlob","block","unblock","editPanel","applyButton","updateSrc","blobManipulate","blobToImageResult","oImg","manipulate","currentUrl","initialUrl","memBg","zoomState","cropRect","rectState","viewRectState","repaintImg","img","panelW","panelH","bg","cRect","aImg","lastViewRect","viewRect","inflate","zoomFit","newRect","currentZoom","newZoom","renderImagePanel","memUndo","memRedo","renderSideBar","_oImg","tempManipulate","manipulateApply","disableUndoRedo","isSingleListItem","dataAttribute","fetchItems","dropdownComp","selectedValue","findItemByValue","HtmlSelect","initialValues","selectClasses","selectAttributes","selectBehaviours","baseInputBehaviours","multiline","validatingBehaviours","vl","inputMode","inputmode","classname","extraClasses2","flex","maximized","ActiveStreaming","streamConfig","streamState","processor","stream","streams","cancelEvent","_config","setTimer","StreamingState","StreamingSchema","streamInfo","sInfo","throttler","onStream","stopEvent","Streaming","setValueFromItem","itemData","setCursorAtEnd","setSelectionOn","itemExecute","schema$j","parts$6","previewing","selectsOver","inputDisplay_1","getDisplayText","setSelectionToEnd","attemptSelectOver","populateFromBrowse","typeahead","Typeahead","navigateList","highlighter","focusBehaviours$1","responseTime","previousValue_1","pv","sandboxIsOpen","openClass","onItemExecute","dismissOnBlur","typeaheadBehaviours","wrap$2","bindFuture","resA","bindResult","mapResult","foldResult","whenError","whenValue","withTimeout","errorThunk","timedOut","FutureResult","worker","separator$2","toMenuItem","staticMenuItem","filteredTargets","targets","toMenuItems","filterLinkTargets","headerTargets","linkInfo","anchorTargets","anchorTargetTop","anchorTop","anchorTargetBottom","anchorBottom","filterByQuery","term","lowerCaseTerm","errorId","make$6","factories","bar","interpreter","renderBar","collection","runOnItem","tgt","collectionEvents","currentActive","iterCollectionItems","applyAttributes","childElm","htmlLines","mapItemName","encodeAllRaw","renderCollection","alertbanner","iconTooltip","renderAlertBanner","renderInput","textarea","renderTextarea","backstageShared","renderLabel$2","iframe","iframeSpec","makeIframe","isSandbox","sandboxed","sourcing","cachedValue","_frameComponent","frameComponent","contentWindow","getDynamicSource","renderIFrame","renderDialogButton","checkbox","repBehaviour","toggleCheckboxHandler","makeIcon","className","memIcons","renderCheckbox","colorInputBackstage","inputValue","span","emitSwatchChange","colorBit","memColorButton","renderPanelButton","colorPicker","colorButton","_field","renderColorInput","colourPickerFactory","memPicker","picker","dropzone","actions","onDrop","transferEvent","handleFiles","dataTransfer","files","onSelect","allowedImageFileTypes","explode","getSetting","file","filterByExtension","memInput","accept","renderDropZone","renderGrid","listbox","initialItem","listBoxWrap","sketchSpec","renderListBox","selectbox","translatedOptions","chevron","selectWrap","renderSelectBox","sizeinput","urlinput","urlBackstage","updateHistory","urlEntry","addToHistory","filetype","fileType","urlInputValue","getLinkInformation","history","historyTargets","getHistory","getItems","memUrlBox","_newValue","getValidationHandler","memInvalidIcon","invalidComp","completer","_menu","_entry","errId","memStatus","optUrlPicker","getUrlPicker","browseUrlEvent","memUrlPickerButton","componentData","urlData","fieldname","chosenData","renderUrlInput","customeditor","editorApi","memReplaced","ta","isOldCustomEditor","scriptId","scriptUrl","ea","cvalue","ed","htmlpanel","imagetools","table","header","renderTd","renderTable","renderPanel","noFormParts","interpretInForm","oldBackstage","newBackstage","interpretParts","bubbleAlignments","valignCentre","alignCentre","alignLeft","alignRight","getInlineDialogAnchor","contentAreaElement","lazyAnchorbar","lazyUseEditableAreaAnchor","getBannerAnchor","getCursorAnchor","bodyElement","getNodeAnchor","getAnchors","isToolbarTop","useFixedToolbarContainer","getContentAreaContainer","inlineDialog","hasCustomColors$1","getColors$2","getColorCols$2","ColorInputBackstage","isDraggableModal$1","isDraggableModal","DialogBackstage","defaultStyleFormats","mapFormats","userFormats","fmt","customFormats","formats","isBlockFormat","isSelectorFormat","formatNameWithPrefix","getStyleFormats","getUserStyleFormats","registeredUserFormats","registerFormats","formatter","registerCustomFormats","isMergeStyleFormats","processBasic","isSelectedFor","getPreviewFor","formatterSpec","getStylePreview","register$3","doEnrich","newItems_1","enrichMenu","getStyleItems","enrichSupported","formatName","customSpec","newItem","enrichCustom","init$7","parseStyle","getCssText","settingsFormats","settingsFlattenedFormats","eventsFormats","eventsFlattenedFormats","replaceSettings","_e","enriched","modifications","fromSettings","fromEvents","getFlattenedKeys","trim$1","hasContentEditableState","isElement$2","contentEditable","isContentEditableTrue","isContentEditableFalse","create$8","getElementText","innerText","isValidAnchor","isAnchor","isEditable","isHeader","isChildOfContentEditableTrue","isValidHeader","headerTarget","headerId","getOrGenerateId","getLevel","anchorTarget","anchorId","anchorText","hasTitle","LinkTargets","elms","getTargetElements","getHeaderTargets","getAnchorTargets","STORAGE_KEY","isHttpUrl","isRecordOfUrlArray","getAllHistory","unparsedHistory","SyntaxError","itemsWithoutUrl","setAllHistory","isTruthy","makeMap","getPicker","getFilePickerCallback","getTextSetting","UrlInputBackstage","noTypeaheadUrls","getFilePickerValidatorHandler","pickerTypes","optFileTypes","getFilePickerTypes","optLegacyTypes","getFileBrowserCallbackTypes","optTypes","_picker","types","getPickerTypes","getPickerSetting","entry","expandable$1","setMax$1","hideContextToolbarEvent","schema$k","parts$7","Toolbar","shell","toolbarBehaviours","setGroups","groups","output$1","within","withinWidth","apportion","total","parray","toUnit","storedGroups","bGroups","setOverflow","overflowGroup","builtGroups","focusedComp","focusedElm","overflows","overflower","divide","tryFit","fits","fitLast","overflow","fitAll","partition$3","schema$l","schema$m","parts$8","schema$n","parts$9","toggledClass","toggle$2","toolbarSandbox","position$2","bounder","setGroups$1","FloatingToolbarButton","makeSandbox$1","getToolbar","schema$o","parts$a","ToolbarGroup","tgroupBehaviours","itemSelector","buildGroups","refresh$1","memFloatingToolbarButton","overflowGroups","floatingToolbarButton","SplitFloatingToolbar","getOverflowBounds","overflowToggledClass","splitToolbarBehaviours","getOverflow","getAnimationRoot","slideConfig","getDimensionProperty","dimension","getDimension","disableTransitions","shrinkingClass","growingClass","setShrunk","closedClass","setGrown","doImmediateShrink","slideState","_calculatedSize","setCollapsed","onStartShrink","onShrunk","doStartShrink","calculatedSize","doStartSmartShrink","doStartGrow","wasShrinking","beforeSize","fullSize","setExpanded","onStartGrow","isGrowing","_slideState","isShrinking","SlidingApis","isExpanded","grow","shrink","immediateShrink","hasGrown","hasShrunk","isCollapsed","isTransitioning","toggleGrow","ActiveSliding","propertyName","onGrown","SlidingSchema","Sliding","schema$p","parts$b","onClosed","onOpened","toggleToolbar","overf","refresh$3","SplitSlidingToolbar","toolbarToggleEvent","_button","doSetGroups","isOpen$1","toolbarHeightChange","renderToolbarGroupCommon","toolbarGroup","renderToolbarGroup","getToolbarbehaviours","toolbarSpec","modeName","onAttached","initGroups","renderMoreToolbarCommon","cyclicKeying","renderFloatingMoreToolbar","baseSpec","headerElem","moreDrawerData","lazyHeader","headerBounds","docElem","docBounds","overflowXOffset","renderSlidingMoreToolbar","renderToolbar","scrolling","groupToolbarButtonSchema","baseMenuButtonFields","MenuButtonSchema","createMenuButton","splitButtonSchema","ActiveReflecting","reflectingConfig","reflectingState","renderComponents","newComponents","channel","rawData","ReflectingApis","reflectState","ReflectingSchema","Reflecting","optS","schema$q","arrowPart","arrow","buttonPart","btn","splitDropdown","parts$c","SplitDropdown","executeOnButton","buttonEvents","splitDropdownBehaviours","getButtonApi","getToggleApi","getTooltipAttributes","focusButtonEvent","rtlIcon$1","rtlTransform$1","renderCommonStructure","_d","getIconName","needsRtlClass","renderCommonToolbarButton","specialisation","itemApi","buttonApi","toolbarButtonBehaviours","renderToolbarButtonWith","bonusEvents","renderToolbarToggleButtonWith","fetchChoices","runOnExecute$1","formApi","getFormApi","ContextForm","commands","findPrimary","mementos","bridged","renderContextToggleButton","renderContextButton","generateOne$1","asSpecs","compInSystem","generate$7","getContextToolbarBounds","viewportBounds","contentAreaBox","toolbarOrMenubarEnabled","contentBoxWidth","maxViewportWidth","getHorizontalBounds","_b","isToolbarLocationTop","headerBox","isToolbarBelowContentArea","isToolbarAbove","containerBounds","getVerticalBounds","isPositionedAtTop","matchTargetWith","ctxs","toolbarApi","contextToolbars","contextForms","categorise","forms","inNodeScope","inEditorScope","formNavigators","lookupTable","contextForm","launch","registerForm","contextToolbar","registerToolbar","forwardSlideEvent","backSlideEvent","changeSlideEvent","resizingClass","generateSelectItems","_editor","generateItem","rawItem","response","si","invalid","validateItems","preItems","getCurrentValue","shouldHide","createMenuItems","createSelectButton","getComponent","exponentPart","unsignedDecimalLiteral","ResizeTypes","buildBasicSettingsDataset","settingName","delimiter","rawFormats","SemiColon","alignMenuItems","command","getSpec","_format","alignment","canApply","systemStackFonts","splitFonts","fontFamily","fonts","font","getSpec$1","getMatchingValue","getFirstFont","queryCommandValue","matchOpt","isSystemFontStack","undoManager","transact","legacyFontSizes","keywordFontSizes","getSpec$2","fontSize","_loop_1","pt","factor","round$1","toPt","legacy","toLegacy","Space","findNearest","getStyles","revocable","doRevoke","isSet","destroyable","unbindable","onSetupFormatToggle","boundCallback","formatChanged","initialized","onActionToggleFormat","getSpec$3","getSpec$4","getFormatItems","flattenedItems","defaultToolbar","renderFromBridge","bridgeBuilder","togglebutton","menubutton","splitbutton","displayChannel","underlinePath","setIconStroke","buttonComp","_c","renderSplitButton","grouptoolbarbutton","TopToBottom","floating","identifyButtons","renderFloatingToolbarButton","allowToolbarGroups","styleSelectButton","styleselect","createStyleSelect","fontsizeSelectButton","createFontsizeSelect","fontSelectButton","createFontSelect","formatButton","createFormatSelect","alignMenuButton","createAlignSelect","bespokeButtons","fontsizeselect","fontselect","formatselect","toolbarConfig","prefixes","toolbarGroups","groupsStrings","filteredItemGroups","subItem","removeUnusedDefaults","isToolbarGroupSettingArray","createToolbar","toolbarItem","extractFrom","lookupButton","bubbleAlignments$1","anchorOverrides","desktopAnchorSpecLayouts","mobileAnchorSpecLayouts","register$4","registryContextToolbars","contextbar","currentWidth","newContents","oldContents","forwardContents","shouldContextToolbarHide","isContextMenuOpen","nodeBounds","diffTop","aTop","aBottom","bTop","bBottom","lastElementBounds","ele","contextToolbarBounds","lastAnchor","forceHide","hideOrRepositionIfNecessary","contextBarEle","wrapInPopDialog","shortcuts","getScopes","alloySpec","buildToolbar","scopes","allButtons","toolbarType","default","buildContextToolbarGroups","buildContextMenuGroups","toolbarKey","launchContext","sElem","anchors","getAnchorLayout","launchContextToolbar","rootElem","startNode","isOutsideRoot","nodeCandidates","editorCandidates","nodeMatches","editorMatches","doesPositionExist","filterToolbarsByPosition","hasSelectionToolbars","hasNodeToolbars","nodeToolbars","selectionToolbars","filterByPositionForStartNode","matchStartNode","ancestorElem","findPosition_1","filterByPositionForAncestorNode","matchAncestor","lookup$1","asyncOpen","setEditorTimeout","parts$d","partType$1","schema$r","itemsPart","parts$e","CustomList","name$2","_external","listBehaviours","setItems","itemComps","numListsRequired","numListsToAdd","itemsToAdd","makeItem","itemsToRemove","builtLists","setupItem","setup$4","isDocked","getBehaviours$2","StaticHeader","getOffsetParent","offsetParent$1","getOrigin","morphAdt","static","appear","contextualInfo","transitionClass","fadeOutClass","fadeInClass","disappear","isVisibleForModes","isBottomCompletelyVisible","isTopCompletelyVisible","getPrior","getInitialPosition","revertToOriginal","setInitialPosition","offsetBox_1","_left","_top","_right","_bottom","getMorph","getModes","morphToOriginal","storePrior","winBox","top_1","isTop","morphToFixed","morphToStatic","onUndocked","morphToCoord","onDocked","updateVisibility","morphToDocked","contextual","contextInfo","lazyContext","isPartiallyVisible","setVisible","refresh$4","lazyViewport","morph","setDocked","refreshInternal","reset","getMorphToOriginal","resetInternal","DockingApis","setModes","ActiveDocking","dockInfo","dockState","onShown","onHidden","DockingSchema","Docking","docked","visible","initialBounds","visibility","editorStickyOnClass","editorStickyOffClass","updateIframeContentFlow","parentElem","padding","parentWidth","getOccupiedHeight","updateSinkVisibility","sinkElem","updateEditorClasses","editorContainer","getBehaviours$3","runOnSinkElement","onDockingSwitch","additionalBehaviours","getIframeBehaviours","headerHeight","boxHeight","topBound","focusedElem","ownerDoc","activeElm","rootElm","findFocusedElem","getDockingMode","StickyHeader","containerHeader","viewHeight","innerHeight","scrollPos","markerElement","markerPos","markerHeight","markerTop","markerBottom","editorHeaderPos","editorHeaderHeight","editorHeaderTop","editorHeaderBottom","editorHeaderDockedAtTop","editorHeaderDockedAtBottom","scrollFromBehindHeader","SilverMenubar","setMenus","newMenus","activeButton","hoveredButton","activeComp","hoveredComp","prev","owner$4","schema$s","getPartName$1","make$7","getSlotNames","onSlot","def","slot","doShowing","_key","hideSlot","hideSlots","showSlot","getSlot","hideAllSlots","slotBehaviours","slotApis","SlotContainer","sSpec","sidebarSchema","makePanels","panelConfigs","createSidebar","sidepanel","sidePanelSpec","makeSidebar","slotContainer","whichSidebar","sidebar","fixSize","autoSize","fromHtml$2","getAttrs","renderSpinner","partMenubar","partMultipleToolbar","_mToolbar","tc","_index","partToolbar","sliding","toolbarFactory","renderer","lazyToolbar","lazyMoreButton","partHeader","sticky","partSocket","partSidebar","partThrobber","OuterContainer","getSocket","setSidebar","toggleSidebar","getHeader","setToolbar","setToolbars","mToolbar","refreshToolbar","toggleToolbarDrawer","isToolbarDrawerToggled","getThrobber","focusToolbar","setMenubar","menubar","focusMenubar","grps","grp","renderedToolbars","defaultMenus","edit","tools","help","parseItemsString","identifyMenus","rawMenuData","userDefinedMenus","validMenus","menuData","removedMenuItems","getRemovedMenuItems","itemName","removedMenuItem","make$8","fireSkinLoaded$1","_skinLoaded","fireSkinLoaded","loadStylesheet","stylesheetUrl","styleSheetLoader","unload","loadUiSkins","skinUrl","loadShadowDomUiSkins","loadSkin","isInline","skin","skinName","documentBaseURI","baseURL","getSkinUrl","contentCSS","isSkinDisabled","fireSkinLoadError","fireSkinLoadError$1","rawUiConfig","toolbarButtonsConfig","detection","isiOS12","Iframe","lastToolbarWidth","eTargetNode","targetNode","uiRoot","attachSystemAfter","innerWidth","initialDocEle","lastWindowDimensions","lastDocumentDimensions","resizeWindow","outer","resizeDocument","docEle","inner","fireScrollContent","elementLoad","setupEvents","socket","limit","unbinder","addCommand","_ui","addQueryValueHandler","toolbarMode","iframeContainer","parseToInt","numToPx","calcCappedSize","minSize","maxSize","minOverride","maxOverride","getWidth$1","baseWidth","minWidth","getTargetPosAndBounds","targetElm","Inline","floatContainer","isSticky","editorMaxWidthOpt","headerBackstage","isSplitToolbar","calcToolbarOffset","tbar","repositionPopups$1","updateChromeUi","resetDocking","bodyMargin","targetBounds","updateChromePosition","floatContainerComp","updateMode","updateUi","currentMode","newMode","toolbar_1","toolbarHeight","docHeight","calcMode","setDockingMode","verticalDir","setupMode","addClass","removeClass","InlineHeader","toolbarPersist","isToolbarPersist","uiContainer","prevPosAndBounds","resizeContent","prevPos","prevBounds","hasResized","requestAnimationFrame","setupEvents$1","nodeChanged","unsupportedLength","pattern","decimalDigits","dot","normaliseLineHeight","accepted","unitRaw","check","isUnit","normalise","getLineHeights","getLineHeightFormats","Map","lastApi","toggleFormat","register$9","_idx","addToggleButton","name_1","registerFormatButtons","addButton","registerCommandButtons","registerCommandToggleButtons","registerButtons$2","addMenuItem","registerMenuItems$1","toggleUndoRedoState","checkState","onUndoStateChange","setup$8","cmd","register$5","alignSelectMenu","fontSelectMenu","styleSelectMenu","formatSelectMenu","fontsizeSelectMenu","register$6","registerMenuItems$2","registerButtons$3","register$a","applyFormat","removeFormat","registerCommands","lastForeColor","lastBackColor","register$1","registerToolbarButton","addToggleMenuItem","hasVisual","onVisualAid","toggleVisualAidState","registerMenuItems$3","register$b","queryCommandState","onNodeChange","toggleOutdentState","registerButtons","register$7","registerMenuItems","addMenuButton","registerButtons$1","register$8","nu$d","isTouchEvent$1","getPointAnchor","pageX","pageY","fromPageXY","containerPos","getPos","dx","dy","transpose$1","transposeContentAreaContainer","fromClientXY","getSelectionAnchor","getNodeAnchor$1","initAndShow","buildMenu","contextmenu","useNodeAnchor","anchorSpec","bubbleAlignments$2","initAndShow$1","getPointAnchorSpec","openiOS_1","originalSelection","selectionReset","setRng","unbindEventListeners","preventMousedown","clearSelectionReset","setupiOSOverrides","touch_1","rngRect","isTouchWithinSelection","patchPipeConfig","shouldNeverUseNative","isSeparator$1","separator$3","makeContextItem","commonMenuItem","addContextMenuGroup","groupItems","isTriggeredByKeyboard","pointerType","getSelectedElement","setup$9","setContextMenuState","hideContextMenu","showContextMenu","isNativeOverrideKeyEvent","isContextMenuDisabled","getAvoidOverlapSelector","shouldUseNodeAnchor","selectedElement","defaultItems","contextMenus","getMenuItems","getContextMenu","sections","allItems","generateContextMenu","hideEvents","adt$c","subtract","add$4","transform$1","changes","asFixed","coord","asAbsolute","asOffset","toStyles","stylesOpt","absorb","partialCoord","originalCoord","absorbOne","stencil","optX","optY","absolute$3","fixed$1","parseAttrToInt","NaN","moveOrSnap","snapInfo","newCoord","snapsInfo","leftAttr","topAttr","get$f","getCoords","mustSnap","findClosestSnap","findSnap","fixedCoord","set$8","spanned","findMatchingSnap","snaps","sensor","coord1","coord2","withinRange","getSnapPoints","deltas","getDeltas","bestDeltas","DraggingApis","snapTo","dragConfig","getTarget","repositionTarget","scroll_1","origin_1","snapPin","initialAttribute","instigate","anyComponent","zindex","changeZIndex","discard","resetZIndex","createComponent","blockerClass","blockerEvents","SnapSchema","schema$t","calcStartData","move$1","dragState","dragMode","dragStartData","getStartData","dlt","currentCoord","oc","location","getCurrentCoord","optSnaps","coords","absoluteCoord","newCoords","offset$1","clampCoords","translated","snapping","onSensor","calcNewCoord","onDrag","dragBy","stopDrag","updateStartState","setStartData","MouseData","events$g","stop$1","delayDrop","dragApi","drop","forceDrop","init$c","schema$u","TouchData","getDataFrom","events$h","blockerCell","init$d","mouse","mouseOrTouch","Dragging","dragger","previous","dragEvent","nuData","calculateDelta","calcSnap","selectorOpt","td","snapWidth","selectorHandle","sensorLeft","sensorTop","getSnapsConfig","cellOpt","currentTd","isSameCell","createSelector","setup$a","tlTds","brTds","startCell","finishCell","getTopLeftSnap","memTopLeft","getBottomRightSnap","memBottomRight","topLeftSnaps","bottomRightSnaps","bottomRight","getSnapConfig","isAbove","isBelow","cellRect","viewportHeight","aboveViewport","belowViewport","showOrHideHandle","snapTopLeft","snapBottomRight","otherCells","upOrLeftCells","downOrRightCells","isHidden$1","getP","resize$3","resizeType","originalHeight","originalWidth","Both","getDimensions","dim","fireResizeEditor","keyboardHandler","renderStatusbar","getTextComponents","newPathElements","divider","newPath","parents","parent_1","isDefaultPrevented","isPropagationStopped","updatePath","_btn","newAcc","renderElementPath","replaceCountText","words","characters","currentVal","wordCount","renderWordCount","resizeHandler","None","Vertical","getResizeType","_target","renderResizeHandler","getComponents","setup$b","isGridUiContainer","sinkSpec","reactiveWidthSpec","lazyOuterContainer","platformClasses","deviceClasses","isToolbarBottom","dirAttributes","verticalDirAttributes","memAnchorBar","lazyThrobber","contextMenuState","HeaderBackstage","interpretWithoutForm","init$8","throbber","statusbar","socketSidebarContainer","hasMultipleToolbar","hasToolbar","hasMenubar","editorComponents","containerComponents","border","addQueryStateHandler","ship","fireDismissPopups","onTouchstart","onTouchmove","onTouchend","onMousedown","onMouseup","onContentClick","onContentMouseup","onWindowScroll","onWindowResize","onEditorResize","onEditorProgress","setup$3","setEditorSize","parsedHeight","baseHeight","minHeight","getHeight$1","getHeightWithFallback","parsedWidth","getWidthWithFallback","renderUI","sidebars","handleToggle","setup$6","throbberState","toggleThrobber","timerId","setup$7","getToolbarGroups","toolbarGroupButtonConfig","addGroupToolbarButton","toolbarOpt","getUi","broadcastAll","schema$x","basic","parts$f","dragBlockClass","getDragBounds","BlockingApis","getBusySpec","blockerBehaviours","blockSpec","isBlocked","onBlock","blockWith","onUnblock","BlockingSchema","Blocking","ModalDialog","dialogComp","modalEventsId","externalBlocker","blockerDom","getFooter","setIdle","setBusy","modalBehaviours","labelledElement","labelElement","describedElement","describeElement","describeId","dialogToggleMenuItemSchema","dialogToggleMenuItemDataProcessor","baseFooterButtonFields","dialogFooterButtonFields","normalFooterButtonFields","menuFooterButtonFields","dialogFooterButtonSchema","submit","alertBannerFields","alertBannerSchema","buttonFields","buttonSchema","checkboxFields","checkboxSchema","checkboxDataProcessor","formComponentFields","formComponentWithLabelFields","collectionFields","collectionSchema","collectionDataProcessor","colorInputSchema","colorInputDataProcessor","colorPickerSchema","colorPickerDataProcessor","customEditorFields","customEditorFieldsOld","customEditorSchema","customEditorDataProcessor","dropZoneSchema","dropZoneDataProcessor","createGridFields","itemsField","htmlPanelFields","htmlPanelSchema","iframeFields","iframeSchema","iframeDataProcessor","imageToolsFields","imageToolsSchema","inputFields","inputSchema","inputDataProcessor","createLabelFields","listBoxSingleItemFields","listBoxNestedItemFields","listBoxItemSchema","listBoxFields","listBoxSchema","listBoxDataProcessor","selectBoxFields","selectBoxSchema","selectBoxDataProcessor","sizeInputFields","sizeInputSchema","sizeInputDataProcessor","tableFields","tableSchema","textAreaFields","textAreaSchema","textAreaDataProcessor","urlInputFields","urlInputSchema","urlInputDataProcessor","createItemsField","itemSchema$3","sErr","passValue","panelSchema","panelFields","tabFields","tabPanelFields","tabPanelSchema","dialogButtonFields","dialogButtonSchema","dialogSchema","tabpanel","urlDialogButtonSchema","urlDialogSchema","getAllObjects","isNamedItem","dataProcessors","togglemenuitem","createDataValidator","namedItems","getNamedItems","getDataProcessor","extract$1","internalDialog","dataValidator","DialogManager","openUrl","redial","toValidValues","renderBodyPanel","memForm","formValue","vals","TabButton","tabButtonBehaviours","schema$y","tabsPart","barDetail","dismissTab$1","tabbar","changeTab$1","clickToDismiss","tabClass","parts$g","Tabbar","tabbarBehaviours","selectedClass","tab","Tabview","tabviewBehaviours","schema$z","barPart","tabs","viewPart","parts$h","TabSection","changeTabBy","section","byPred","tabSectionBehaviours","selectFirst","tabValue","tabview","tabData","onChangeTab","onDismissTab","getViewItems","showTab","tabKey","setTabviewHeight","updateTabviewHeight","dialogBody","maxTabHeight","tablist","documentElement$1","tabviewHeight","currentTabHeight","dialogTopMargin","dialogBottomMargin","getMaxTabviewHeight","getTabview","SendDataToSectionChannel","SendDataToViewChannel","renderTabPanel","storedValue","updateDataWithForm","formData","validData","currentData","setDataOnForm","oldTab","allTabs","tabMode","smartTabHeight","extraEvents","tabviewComp","heights","maxTabHeightOpt","_tab","measureHeights","oldHeight","naiveTabHeight","_viewItems","oldName","tsection","dialogChannel","titleChannel","bodyChannel","footerChannel","bodySendMessageChannel","renderBody","ariaAttrs","incoming","isTabPanel","hiddenHeader","pClose","pUntitled","pBodyMessage","pFooter","footer","pFooterGroup","startButtons","endButtons","renderDialog","dialogClass","blockerBackdropClass","scrollLockClass","extraStyles","dialogEvents","renderClose","renderTitle","renderDragHandle","pTitle","pHandle","draghandle","draggable","renderModalHeader","bs","getEventExtras","lazyDialog","closeWindow","blockEvent","renderModalDialog","mapMenuButtons","mapItems","extractCellsToObject","innerAcc","initCommonEvents","fireApiEvent","_event","SilverDialogEvents","getInstanceApi","withSpec","currentDialogInit","cur","onTabChange","newTabName","oldTabName","footerButtons","buttonGroups","makeGroup","memento","renderFooter","initSpec","makeButton","lookupByName","buttonName","lookup$2","renderModalFooter","getCompByName","form_1","getFormWrapper","getDialogApi","doRedial","menuItemStates","withRoot","instanceApi","valueComp","representedValues","menuItemCurrentState","setData","prevData","mergedData","newInternalData","dialogState","validateData","tabSection","dialogInit","global$h","SUPPORTED_MESSAGE_ACTIONS","isSupportedMessage","mceAction","renderUrlDialog","bodySpec","currentDialog","iframeUri","base_uri","href","iframeDomain","protocol","port","messageHandlerUnbinder","isSameOrigin","insertContent","handleMessage","isCustomMessage","onMessage","iframeEle","postMessage","sendMessage","inlineAdditionalBehaviours","setup$e","isStickyToolbar$1","alertDialog","closeDialog","memFooterClose","titleSpec","closeSpec","footerCloseButton","setup$c","confirmDialog","memFooterYes","footerNo","footerYesButton","setup$d","openModalDialog","internalInitialData","renderModalBody","storagedMenuButtons","objOfCells","dialogSize","getDialogSizeClasses","outerForm","renderDialog$1","openInlineDialog","config$1","refreshDocking","dialogUi","titleId","dialogLabelId","dialogContentId","memHeader","memBody","contentId","renderInlineBody","memFooter","renderInlineFooter","renderInlineDialog","inlineDialogComp","isAlertOrConfirmDialog","openModalUrlDialog","confirm","windowMgr","getWindowManagerImpl","getNotificationManagerImpl","closeCallback","hideCloseButton","notificationWrapper","notification","progressBar","moveTo","moveRel","layoutDirection_1","getLayoutDirection","nodeAnchor","nuText","getEl","notifications","prePositionNotifications","firstItem","positionNotifications","getArgs","NotificationManagerImpl"],"mappings":"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AWhhF,QAAQC,KAAKC,MAAMC,QAAQ,6BAEtC8gF,GAAc,wBAgCdC,GAAa,aACbC,GAAgB,CAClB,CACEtkF,KAAMqkF,GACNnsE,KAAM,cACNjY,MAAO,WAET,CACED,KAAMqkF,GACNnsE,KAAM,eACNjY,MAAO,WAET,CACED,KAAMqkF,GACNnsE,KAAM,YACNjY,MAAO,WAET,CACED,KAAMqkF,GACNnsE,KAAM,eACNjY,MAAO,WAET,CACED,KAAMqkF,GACNnsE,KAAM,aACNjY,MAAO,WAET,CACED,KAAMqkF,GACNnsE,KAAM,QACNjY,MAAO,WAET,CACED,KAAMqkF,GACNnsE,KAAM,SACNjY,MAAO,WAET,CACED,KAAMqkF,GACNnsE,KAAM,MACNjY,MAAO,WAET,CACED,KAAMqkF,GACNnsE,KAAM,SACNjY,MAAO,WAET,CACED,KAAMqkF,GACNnsE,KAAM,OACNjY,MAAO,WAET,CACED,KAAMqkF,GACNnsE,KAAM,iBACNjY,MAAO,WAET,CACED,KAAMqkF,GACNnsE,KAAM,SACNjY,MAAO,WAET,CACED,KAAMqkF,GACNnsE,KAAM,WACNjY,MAAO,WAET,CACED,KAAMqkF,GACNnsE,KAAM,cACNjY,MAAO,WAET,CACED,KAAMqkF,GACNnsE,KAAM,YACNjY,MAAO,WAET,CACED,KAAMqkF,GACNnsE,KAAM,aACNjY,MAAO,WAET,CACED,KAAMqkF,GACNnsE,KAAM,cACNjY,MAAO,WAET,CACED,KAAMqkF,GACNnsE,KAAM,OACNjY,MAAO,WAET,CACED,KAAMqkF,GACNnsE,KAAM,YACNjY,MAAO,WAET,CACED,KAAMqkF,GACNnsE,KAAM,YACNjY,MAAO,WAET,CACED,KAAMqkF,GACNnsE,KAAM,QACNjY,MAAO,WAET,CACED,KAAMqkF,GACNnsE,KAAM,QACNjY,MAAO,YAGPskF,GAhJJ,SAAqB7rD,QACP,IAARA,IACFA,EAAM,IAER,IAEsB5E,EAFlB0wD,EAAgBL,GAASM,QAAQL,IACjCM,EAAe/jF,EAAS6jF,GAAiBp1E,KAAKu1E,MAAMH,GAAiB,GAKrEI,EAHSlsD,GADS5E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C,EAAkB,WACpBvD,EAAMj6E,oBAAoB,OAAQy9E,GAClCxD,EAAMj6E,oBAAoB,QAAS1xB,IAEjCmvG,EAAS,WACXD,IACA51G,EAAQqyG,IAEN3rG,EAAQ,WACVkvG,IACA/d,EAAO,+BAAiClnE,EAAKj0B,KAAO,KAAO+4G,IAE7DpD,EAAMn6E,iBAAiB,OAAQ29E,GAC/BxD,EAAMn6E,iBAAiB,QAASxxB,GAChC2rG,EAAM9zB,IAAMk3B,EACRpD,EAAMjjB,UACR/lB,WAAWwsC,EAAQ,MAwDhBC,CAAYnlF,GAAM08C,MAAK,SAAUglC,GACtCgC,GAAehC,GACf,IAAIlwB,EAAS2vB,GAASM,GAASC,GAAQE,GAAUF,IAGjD,OAFcH,GAAa/vB,GACnBgwB,UAAUE,EAAO,EAAG,GACrBlwB,KAyDS4zB,CAAaplF,GAAOA,EAAMwiF,OAG1C6C,GAAa,SAAU7zB,EAAQzlF,GACjC,OAAOq2G,GAAa5wB,EAAQzlF,GAAM2wE,MAAK,SAAU18C,GAC/C,OAAO6jF,GAAS/B,GAAUzyG,QAAQmiF,GAASxxD,EAAMwxD,EAAOixB,iBAQxD6C,GAAU,SAAUt5G,EAAOmpC,EAAK1Q,GAClC,IAAI8gF,EAA+B,iBAAVv5G,EAAqBo4B,WAAWp4B,GAASA,EAMlE,OALIu5G,EAAc9gF,EAChB8gF,EAAc9gF,EACL8gF,EAAcpwE,IACvBowE,EAAcpwE,GAETowE,GA+BLC,GAAc,CAChB,EACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,EACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,KACA,EACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,EACA,IACA,IACA,IACA,IA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","file":"860.7bf82e41.chunk.js","sourcesContent":["// Exports the \"silver\" theme for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/themes/silver')\n//   ES2015:\n//     import 'tinymce/themes/silver'\nrequire('./theme.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.8.1 (2021-05-20)\n */\n(function () {\n    'use strict';\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n    var isArrayOf = function (value, pred) {\n      if (isArray(value)) {\n        for (var i = 0, len = value.length; i < len; ++i) {\n          if (!pred(value[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    };\n\n    var noop = function () {\n    };\n    var noarg = function (f) {\n      return function () {\n        return f();\n      };\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.ThemeManager');\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArrays() {\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++)\n        s += arguments[i].length;\n      for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n      return r;\n    }\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var range = function (num, f) {\n      var r = [];\n      for (var i = 0; i < num; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var chunk = function (array, size) {\n      var r = [];\n      for (var i = 0; i < array.length; i += size) {\n        var s = nativeSlice.call(array, i, i + size);\n        r.push(s);\n      }\n      return r;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter(a1, function (x) {\n        return !contains(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get(xs, 0);\n    };\n    var last = function (xs) {\n      return get(xs, xs.length - 1);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (_opt) {\n        return value(o);\n      };\n      var orThunk = function (_f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (_f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (_f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var SimpleResultType;\n    (function (SimpleResultType) {\n      SimpleResultType[SimpleResultType['Error'] = 0] = 'Error';\n      SimpleResultType[SimpleResultType['Value'] = 1] = 'Value';\n    }(SimpleResultType || (SimpleResultType = {})));\n    var fold = function (res, onError, onValue) {\n      return res.stype === SimpleResultType.Error ? onError(res.serror) : onValue(res.svalue);\n    };\n    var partition$1 = function (results) {\n      var values = [];\n      var errors = [];\n      each(results, function (obj) {\n        fold(obj, function (err) {\n          return errors.push(err);\n        }, function (val) {\n          return values.push(val);\n        });\n      });\n      return {\n        values: values,\n        errors: errors\n      };\n    };\n    var mapError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return {\n          stype: SimpleResultType.Error,\n          serror: f(res.serror)\n        };\n      } else {\n        return res;\n      }\n    };\n    var map$1 = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return {\n          stype: SimpleResultType.Value,\n          svalue: f(res.svalue)\n        };\n      } else {\n        return res;\n      }\n    };\n    var bind$1 = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return f(res.svalue);\n      } else {\n        return res;\n      }\n    };\n    var bindError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return f(res.serror);\n      } else {\n        return res;\n      }\n    };\n    var svalue = function (v) {\n      return {\n        stype: SimpleResultType.Value,\n        svalue: v\n      };\n    };\n    var serror = function (e) {\n      return {\n        stype: SimpleResultType.Error,\n        serror: e\n      };\n    };\n    var toResult = function (res) {\n      return fold(res, Result.error, Result.value);\n    };\n    var fromResult = function (res) {\n      return res.fold(serror, svalue);\n    };\n    var SimpleResult = {\n      fromResult: fromResult,\n      toResult: toResult,\n      svalue: svalue,\n      partition: partition$1,\n      serror: serror,\n      bind: bind$1,\n      bindError: bindError,\n      map: map$1,\n      mapError: mapError,\n      fold: fold\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$2 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter$1 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$1(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var find$1 = function (obj, pred) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        if (pred(x, i, obj)) {\n          return Optional.some(x);\n        }\n      }\n      return Optional.none();\n    };\n    var values = function (obj) {\n      return mapToArray(obj, function (v) {\n        return v;\n      });\n    };\n    var get$1 = function (obj, key) {\n      return has(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var generate = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              var foldArgs = [];\n              for (var _i = 0; _i < arguments.length; _i++) {\n                foldArgs[_i] = arguments[_i];\n              }\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              var target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate };\n\n    var hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n    var shallow = function (old, nu) {\n      return nu;\n    };\n    var deep = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          objects[_i] = arguments[_i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty$1.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep);\n    var merge = baseMerge(shallow);\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var adt = Adt.generate([\n      { strict: [] },\n      { defaultedThunk: ['fallbackThunk'] },\n      { asOption: [] },\n      { asDefaultedOptionThunk: ['fallbackThunk'] },\n      { mergeWithThunk: ['baseThunk'] }\n    ]);\n    var defaulted = function (fallback) {\n      return adt.defaultedThunk(constant(fallback));\n    };\n    var mergeWith = function (base) {\n      return adt.mergeWithThunk(constant(base));\n    };\n    var strict = adt.strict;\n    var asOption = adt.asOption;\n    var defaultedThunk = adt.defaultedThunk;\n    var asDefaultedOptionThunk = adt.asDefaultedOptionThunk;\n    var mergeWithThunk = adt.mergeWithThunk;\n\n    var comparison = Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    var partition$2 = function (results) {\n      var errors = [];\n      var values = [];\n      each(results, function (result) {\n        result.fold(function (err) {\n          errors.push(err);\n        }, function (value) {\n          values.push(value);\n        });\n      });\n      return {\n        errors: errors,\n        values: values\n      };\n    };\n\n    var exclude = function (obj, fields) {\n      var r = {};\n      each$1(obj, function (v, k) {\n        if (!contains(fields, k)) {\n          r[k] = v;\n        }\n      });\n      return r;\n    };\n\n    var wrap = function (key, value) {\n      var _a;\n      return _a = {}, _a[key] = value, _a;\n    };\n    var wrapAll = function (keyvalues) {\n      var r = {};\n      each(keyvalues, function (kv) {\n        r[kv.key] = kv.value;\n      });\n      return r;\n    };\n\n    var exclude$1 = function (obj, fields) {\n      return exclude(obj, fields);\n    };\n    var wrap$1 = function (key, value) {\n      return wrap(key, value);\n    };\n    var wrapAll$1 = function (keyvalues) {\n      return wrapAll(keyvalues);\n    };\n    var mergeValues = function (values, base) {\n      return values.length === 0 ? Result.value(base) : Result.value(deepMerge(base, merge.apply(undefined, values)));\n    };\n    var mergeErrors = function (errors) {\n      return Result.error(flatten(errors));\n    };\n    var consolidate = function (objs, base) {\n      var partitions = partition$2(objs);\n      return partitions.errors.length > 0 ? mergeErrors(partitions.errors) : mergeValues(partitions.values, base);\n    };\n\n    var mergeValues$1 = function (values, base) {\n      return values.length > 0 ? SimpleResult.svalue(deepMerge(base, merge.apply(undefined, values))) : SimpleResult.svalue(base);\n    };\n    var mergeErrors$1 = function (errors) {\n      return compose(SimpleResult.serror, flatten)(errors);\n    };\n    var consolidateObj = function (objects, base) {\n      var partition = SimpleResult.partition(objects);\n      return partition.errors.length > 0 ? mergeErrors$1(partition.errors) : mergeValues$1(partition.values, base);\n    };\n    var consolidateArr = function (objects) {\n      var partitions = SimpleResult.partition(objects);\n      return partitions.errors.length > 0 ? mergeErrors$1(partitions.errors) : SimpleResult.svalue(partitions.values);\n    };\n    var ResultCombine = {\n      consolidateObj: consolidateObj,\n      consolidateArr: consolidateArr\n    };\n\n    var formatObj = function (input) {\n      return isObject(input) && keys(input).length > 100 ? ' removed due to size' : JSON.stringify(input, null, 2);\n    };\n    var formatErrors = function (errors) {\n      var es = errors.length > 10 ? errors.slice(0, 10).concat([{\n          path: [],\n          getErrorInfo: function () {\n            return '... (only showing first ten failures)';\n          }\n        }]) : errors;\n      return map(es, function (e) {\n        return 'Failed path: (' + e.path.join(' > ') + ')\\n' + e.getErrorInfo();\n      });\n    };\n\n    var nu = function (path, getErrorInfo) {\n      return SimpleResult.serror([{\n          path: path,\n          getErrorInfo: getErrorInfo\n        }]);\n    };\n    var missingStrict = function (path, key, obj) {\n      return nu(path, function () {\n        return 'Could not find valid *strict* value for \"' + key + '\" in ' + formatObj(obj);\n      });\n    };\n    var missingKey = function (path, key) {\n      return nu(path, function () {\n        return 'Choice schema did not contain choice key: \"' + key + '\"';\n      });\n    };\n    var missingBranch = function (path, branches, branch) {\n      return nu(path, function () {\n        return 'The chosen schema: \"' + branch + '\" did not exist in branches: ' + formatObj(branches);\n      });\n    };\n    var unsupportedFields = function (path, unsupported) {\n      return nu(path, function () {\n        return 'There are unsupported fields: [' + unsupported.join(', ') + '] specified';\n      });\n    };\n    var custom = function (path, err) {\n      return nu(path, function () {\n        return err;\n      });\n    };\n\n    var adt$1 = Adt.generate([\n      {\n        field: [\n          'key',\n          'okey',\n          'presence',\n          'prop'\n        ]\n      },\n      {\n        state: [\n          'okey',\n          'instantiator'\n        ]\n      }\n    ]);\n    var strictAccess = function (path, obj, key) {\n      return get$1(obj, key).fold(function () {\n        return missingStrict(path, key, obj);\n      }, SimpleResult.svalue);\n    };\n    var fallbackAccess = function (obj, key, fallbackThunk) {\n      var v = get$1(obj, key).fold(function () {\n        return fallbackThunk(obj);\n      }, identity);\n      return SimpleResult.svalue(v);\n    };\n    var optionAccess = function (obj, key) {\n      return SimpleResult.svalue(get$1(obj, key));\n    };\n    var optionDefaultedAccess = function (obj, key, fallback) {\n      var opt = get$1(obj, key).map(function (val) {\n        return val === true ? fallback(obj) : val;\n      });\n      return SimpleResult.svalue(opt);\n    };\n    var cExtractOne = function (path, obj, field, strength) {\n      return field.fold(function (key, okey, presence, prop) {\n        var bundle = function (av) {\n          var result = prop.extract(path.concat([key]), strength, av);\n          return SimpleResult.map(result, function (res) {\n            return wrap(okey, strength(res));\n          });\n        };\n        var bundleAsOption = function (optValue) {\n          return optValue.fold(function () {\n            var outcome = wrap(okey, strength(Optional.none()));\n            return SimpleResult.svalue(outcome);\n          }, function (ov) {\n            var result = prop.extract(path.concat([key]), strength, ov);\n            return SimpleResult.map(result, function (res) {\n              return wrap(okey, strength(Optional.some(res)));\n            });\n          });\n        };\n        return function () {\n          return presence.fold(function () {\n            return SimpleResult.bind(strictAccess(path, obj, key), bundle);\n          }, function (fallbackThunk) {\n            return SimpleResult.bind(fallbackAccess(obj, key, fallbackThunk), bundle);\n          }, function () {\n            return SimpleResult.bind(optionAccess(obj, key), bundleAsOption);\n          }, function (fallbackThunk) {\n            return SimpleResult.bind(optionDefaultedAccess(obj, key, fallbackThunk), bundleAsOption);\n          }, function (baseThunk) {\n            var base = baseThunk(obj);\n            var result = SimpleResult.map(fallbackAccess(obj, key, constant({})), function (v) {\n              return deepMerge(base, v);\n            });\n            return SimpleResult.bind(result, bundle);\n          });\n        }();\n      }, function (okey, instantiator) {\n        var state = instantiator(obj);\n        return SimpleResult.svalue(wrap(okey, strength(state)));\n      });\n    };\n    var cExtract = function (path, obj, fields, strength) {\n      var results = map(fields, function (field) {\n        return cExtractOne(path, obj, field, strength);\n      });\n      return ResultCombine.consolidateObj(results, {});\n    };\n    var valueThunk = function (getDelegate) {\n      var extract = function (path, strength, val) {\n        return getDelegate().extract(path, strength, val);\n      };\n      var toString = function () {\n        return getDelegate().toString();\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var value$1 = function (validator) {\n      var extract = function (path, strength, val) {\n        return SimpleResult.bindError(validator(val, strength), function (err) {\n          return custom(path, err);\n        });\n      };\n      var toString = function () {\n        return 'val';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var getSetKeys = function (obj) {\n      return keys(filter$1(obj, function (value) {\n        return value !== undefined && value !== null;\n      }));\n    };\n    var objOfOnly = function (fields) {\n      var delegate = objOf(fields);\n      var fieldNames = foldr(fields, function (acc, f) {\n        return f.fold(function (key) {\n          return deepMerge(acc, wrap$1(key, true));\n        }, constant(acc));\n      }, {});\n      var extract = function (path, strength, o) {\n        var keys = isBoolean(o) ? [] : getSetKeys(o);\n        var extra = filter(keys, function (k) {\n          return !hasNonNullableKey(fieldNames, k);\n        });\n        return extra.length === 0 ? delegate.extract(path, strength, o) : unsupportedFields(path, extra);\n      };\n      return {\n        extract: extract,\n        toString: delegate.toString\n      };\n    };\n    var objOf = function (fields) {\n      var extract = function (path, strength, o) {\n        return cExtract(path, o, fields, strength);\n      };\n      var toString = function () {\n        var fieldStrings = map(fields, function (field) {\n          return field.fold(function (key, okey, presence, prop) {\n            return key + ' -> ' + prop.toString();\n          }, function (okey, _instantiator) {\n            return 'state(' + okey + ')';\n          });\n        });\n        return 'obj{\\n' + fieldStrings.join('\\n') + '}';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var arrOf = function (prop) {\n      var extract = function (path, strength, array) {\n        var results = map(array, function (a, i) {\n          return prop.extract(path.concat(['[' + i + ']']), strength, a);\n        });\n        return ResultCombine.consolidateArr(results);\n      };\n      var toString = function () {\n        return 'array(' + prop.toString() + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var oneOf = function (props) {\n      var extract = function (path, strength, val) {\n        var errors = [];\n        for (var _i = 0, props_1 = props; _i < props_1.length; _i++) {\n          var prop = props_1[_i];\n          var res = prop.extract(path, strength, val);\n          if (res.stype === SimpleResultType.Value) {\n            return res;\n          }\n          errors.push(res);\n        }\n        return ResultCombine.consolidateArr(errors);\n      };\n      var toString = function () {\n        return 'oneOf(' + map(props, function (prop) {\n          return prop.toString();\n        }).join(', ') + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var setOf = function (validator, prop) {\n      var validateKeys = function (path, keys) {\n        return arrOf(value$1(validator)).extract(path, identity, keys);\n      };\n      var extract = function (path, strength, o) {\n        var keys$1 = keys(o);\n        var validatedKeys = validateKeys(path, keys$1);\n        return SimpleResult.bind(validatedKeys, function (validKeys) {\n          var schema = map(validKeys, function (vk) {\n            return adt$1.field(vk, vk, strict(), prop);\n          });\n          return objOf(schema).extract(path, strength, o);\n        });\n      };\n      var toString = function () {\n        return 'setOf(' + prop.toString() + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var thunk = function (desc, processor) {\n      var getP = cached(function () {\n        return processor();\n      });\n      var extract = function (path, strength, val) {\n        return getP().extract(path, strength, val);\n      };\n      var toString = function () {\n        return getP().toString();\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var anyValue = constant(value$1(SimpleResult.svalue));\n    var arrOfObj = compose(arrOf, objOf);\n    var state = adt$1.state;\n    var field = adt$1.field;\n\n    var chooseFrom = function (path, strength, input, branches, ch) {\n      var fields = get$1(branches, ch);\n      return fields.fold(function () {\n        return missingBranch(path, branches, ch);\n      }, function (vp) {\n        return vp.extract(path.concat(['branch: ' + ch]), strength, input);\n      });\n    };\n    var choose = function (key, branches) {\n      var extract = function (path, strength, input) {\n        var choice = get$1(input, key);\n        return choice.fold(function () {\n          return missingKey(path, key);\n        }, function (chosen) {\n          return chooseFrom(path, strength, input, branches, chosen);\n        });\n      };\n      var toString = function () {\n        return 'chooseOn(' + key + '). Possible values: ' + keys(branches);\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n\n    var _anyValue = value$1(SimpleResult.svalue);\n    var arrOfObj$1 = function (objFields) {\n      return arrOfObj(objFields);\n    };\n    var arrOfVal = function () {\n      return arrOf(_anyValue);\n    };\n    var valueThunkOf = valueThunk;\n    var valueOf = function (validator) {\n      return value$1(function (v) {\n        return validator(v).fold(SimpleResult.serror, SimpleResult.svalue);\n      });\n    };\n    var setOf$1 = function (validator, prop) {\n      return setOf(function (v) {\n        return SimpleResult.fromResult(validator(v));\n      }, prop);\n    };\n    var extract = function (label, prop, strength, obj) {\n      var res = prop.extract([label], strength, obj);\n      return SimpleResult.mapError(res, function (errs) {\n        return {\n          input: obj,\n          errors: errs\n        };\n      });\n    };\n    var asRaw = function (label, prop, obj) {\n      return SimpleResult.toResult(extract(label, prop, identity, obj));\n    };\n    var getOrDie = function (extraction) {\n      return extraction.fold(function (errInfo) {\n        throw new Error(formatError(errInfo));\n      }, identity);\n    };\n    var asRawOrDie = function (label, prop, obj) {\n      return getOrDie(asRaw(label, prop, obj));\n    };\n    var formatError = function (errInfo) {\n      return 'Errors: \\n' + formatErrors(errInfo.errors).join('\\n') + '\\n\\nInput object: ' + formatObj(errInfo.input);\n    };\n    var chooseProcessor = function (key, branches) {\n      return choose(key, branches);\n    };\n    var choose$1 = function (key, branches) {\n      return choose(key, map$2(branches, objOf));\n    };\n    var thunkOf = function (desc, schema) {\n      return thunk(desc, schema);\n    };\n    var anyValue$1 = constant(_anyValue);\n    var typedValue = function (validator, expectedType) {\n      return value$1(function (a) {\n        var actualType = typeof a;\n        return validator(a) ? SimpleResult.svalue(a) : SimpleResult.serror('Expected type: ' + expectedType + ' but got: ' + actualType);\n      });\n    };\n    var number = typedValue(isNumber, 'number');\n    var string = typedValue(isString, 'string');\n    var boolean = typedValue(isBoolean, 'boolean');\n    var functionProcessor = typedValue(isFunction, 'function');\n    var isPostMessageable = function (val) {\n      var every = function (iter, callbackFn) {\n        var result = iter.next();\n        while (!result.done) {\n          if (!callbackFn(result.value)) {\n            return false;\n          }\n          result = iter.next();\n        }\n        return true;\n      };\n      if (Object(val) !== val) {\n        return true;\n      }\n      switch ({}.toString.call(val).slice(8, -1)) {\n      case 'Boolean':\n      case 'Number':\n      case 'String':\n      case 'Date':\n      case 'RegExp':\n      case 'Blob':\n      case 'FileList':\n      case 'ImageData':\n      case 'ImageBitmap':\n      case 'ArrayBuffer':\n        return true;\n      case 'Array':\n      case 'Object':\n        return Object.keys(val).every(function (prop) {\n          return isPostMessageable(val[prop]);\n        });\n      case 'Map':\n        return every(val.keys(), isPostMessageable) && every(val.values(), isPostMessageable);\n      case 'Set':\n        return every(val.keys(), isPostMessageable);\n      default:\n        return false;\n      }\n    };\n    var postMessageable = value$1(function (a) {\n      return isPostMessageable(a) ? SimpleResult.svalue(a) : SimpleResult.serror('Expected value to be acceptable for sending via postMessage');\n    });\n\n    var validateEnum = function (values) {\n      return valueOf(function (value) {\n        return contains(values, value) ? Result.value(value) : Result.error('Unsupported value: \"' + value + '\", choose one of \"' + values.join(', ') + '\".');\n      });\n    };\n    var strict$1 = function (key) {\n      return field(key, key, strict(), anyValue());\n    };\n    var strictOf = function (key, schema) {\n      return field(key, key, strict(), schema);\n    };\n    var strictNumber = function (key) {\n      return strictOf(key, number);\n    };\n    var strictString = function (key) {\n      return strictOf(key, string);\n    };\n    var strictStringEnum = function (key, values) {\n      return field(key, key, strict(), validateEnum(values));\n    };\n    var strictBoolean = function (key) {\n      return strictOf(key, boolean);\n    };\n    var strictFunction = function (key) {\n      return strictOf(key, functionProcessor);\n    };\n    var forbid = function (key, message) {\n      return field(key, key, asOption(), value$1(function (_v) {\n        return SimpleResult.serror('The field: ' + key + ' is forbidden. ' + message);\n      }));\n    };\n    var strictObjOf = function (key, objSchema) {\n      return field(key, key, strict(), objOf(objSchema));\n    };\n    var strictArrayOfObj = function (key, objFields) {\n      return field(key, key, strict(), arrOfObj(objFields));\n    };\n    var strictArrayOf = function (key, schema) {\n      return field(key, key, strict(), arrOf(schema));\n    };\n    var option = function (key) {\n      return field(key, key, asOption(), anyValue());\n    };\n    var optionOf = function (key, schema) {\n      return field(key, key, asOption(), schema);\n    };\n    var optionNumber = function (key) {\n      return optionOf(key, number);\n    };\n    var optionString = function (key) {\n      return optionOf(key, string);\n    };\n    var optionFunction = function (key) {\n      return optionOf(key, functionProcessor);\n    };\n    var optionArrayOf = function (key, schema) {\n      return optionOf(key, arrOf(schema));\n    };\n    var optionObjOf = function (key, objSchema) {\n      return optionOf(key, objOf(objSchema));\n    };\n    var optionObjOfOnly = function (key, objSchema) {\n      return optionOf(key, objOfOnly(objSchema));\n    };\n    var defaulted$1 = function (key, fallback) {\n      return field(key, key, defaulted(fallback), anyValue());\n    };\n    var defaultedOf = function (key, fallback, schema) {\n      return field(key, key, defaulted(fallback), schema);\n    };\n    var defaultedNumber = function (key, fallback) {\n      return defaultedOf(key, fallback, number);\n    };\n    var defaultedString = function (key, fallback) {\n      return defaultedOf(key, fallback, string);\n    };\n    var defaultedStringEnum = function (key, fallback, values) {\n      return defaultedOf(key, fallback, validateEnum(values));\n    };\n    var defaultedBoolean = function (key, fallback) {\n      return defaultedOf(key, fallback, boolean);\n    };\n    var defaultedFunction = function (key, fallback) {\n      return defaultedOf(key, fallback, functionProcessor);\n    };\n    var defaultedPostMsg = function (key, fallback) {\n      return defaultedOf(key, fallback, postMessageable);\n    };\n    var defaultedArrayOf = function (key, fallback, schema) {\n      return defaultedOf(key, fallback, arrOf(schema));\n    };\n    var defaultedObjOf = function (key, fallback, objSchema) {\n      return defaultedOf(key, fallback, objOf(objSchema));\n    };\n    var state$1 = function (okey, instantiator) {\n      return state(okey, instantiator);\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$2 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$1(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$2(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu$1(0, 0);\n    };\n    var nu$1 = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$1,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim = blank(/^\\s+|\\s+$/g);\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$2,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown$2 = function () {\n      return nu$3({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$3 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$3,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$2 = function (userAgent, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, mediaMatch);\n    });\n    var detect$3 = function () {\n      return platform();\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var is = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq$1 = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains$2 = function (e1, e2) {\n      return detect$3().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n\n    var ensureIsRoot = function (isRoot) {\n      return isFunction(isRoot) ? isRoot : never;\n    };\n    var ancestor = function (scope, transform, isRoot) {\n      var element = scope.dom;\n      var stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        var transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest = function (scope, transform, isRoot) {\n      var current = transform(scope);\n      var stop = ensureIsRoot(isRoot);\n      return current.orThunk(function () {\n        return stop(scope) ? Optional.none() : ancestor(scope, transform, stop);\n      });\n    };\n\n    var isSource = function (component, simulatedEvent) {\n      return eq$1(component.element, simulatedEvent.event.target);\n    };\n\n    var nu$4 = function (parts) {\n      if (!hasNonNullableKey(parts, 'can') && !hasNonNullableKey(parts, 'abort') && !hasNonNullableKey(parts, 'run')) {\n        throw new Error('EventHandler defined by: ' + JSON.stringify(parts, null, 2) + ' does not have can, abort, or run!');\n      }\n      return asRawOrDie('Extracting event.handler', objOfOnly([\n        defaulted$1('can', always),\n        defaulted$1('abort', never),\n        defaulted$1('run', noop)\n      ]), parts);\n    };\n    var all$1 = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc && f(handler).apply(undefined, args);\n        }, true);\n      };\n    };\n    var any = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc || f(handler).apply(undefined, args);\n        }, false);\n      };\n    };\n    var read = function (handler) {\n      return isFunction(handler) ? {\n        can: always,\n        abort: never,\n        run: handler\n      } : handler;\n    };\n    var fuse = function (handlers) {\n      var can = all$1(handlers, function (handler) {\n        return handler.can;\n      });\n      var abort = any(handlers, function (handler) {\n        return handler.abort;\n      });\n      var run = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        each(handlers, function (handler) {\n          handler.run.apply(undefined, args);\n        });\n      };\n      return nu$4({\n        can: can,\n        abort: abort,\n        run: run\n      });\n    };\n\n    var constant$1 = constant;\n    var touchstart = constant$1('touchstart');\n    var touchmove = constant$1('touchmove');\n    var touchend = constant$1('touchend');\n    var touchcancel = constant$1('touchcancel');\n    var mousedown = constant$1('mousedown');\n    var mousemove = constant$1('mousemove');\n    var mouseout = constant$1('mouseout');\n    var mouseup = constant$1('mouseup');\n    var mouseover = constant$1('mouseover');\n    var focusin = constant$1('focusin');\n    var focusout = constant$1('focusout');\n    var keydown = constant$1('keydown');\n    var keyup = constant$1('keyup');\n    var input = constant$1('input');\n    var change = constant$1('change');\n    var click = constant$1('click');\n    var transitionend = constant$1('transitionend');\n    var selectstart = constant$1('selectstart');\n\n    var prefixName = function (name) {\n      return constant('alloy.' + name);\n    };\n    var alloy = { tap: prefixName('tap') };\n    var focus = prefixName('focus');\n    var postBlur = prefixName('blur.post');\n    var postPaste = prefixName('paste.post');\n    var receive = prefixName('receive');\n    var execute = prefixName('execute');\n    var focusItem = prefixName('focus.item');\n    var tap = alloy.tap;\n    var longpress = prefixName('longpress');\n    var sandboxClose = prefixName('sandbox.close');\n    var typeaheadCancel = prefixName('typeahead.cancel');\n    var systemInit = prefixName('system.init');\n    var documentTouchmove = prefixName('system.touchmove');\n    var documentTouchend = prefixName('system.touchend');\n    var windowScroll = prefixName('system.scroll');\n    var windowResize = prefixName('system.resize');\n    var attachedToDom = prefixName('system.attached');\n    var detachedFromDom = prefixName('system.detached');\n    var dismissRequested = prefixName('system.dismissRequested');\n    var repositionRequested = prefixName('system.repositionRequested');\n    var focusShifted = prefixName('focusmanager.shifted');\n    var slotVisibility = prefixName('slotcontainer.visibility');\n    var changeTab = prefixName('change.tab');\n    var dismissTab = prefixName('dismiss.tab');\n    var highlight = prefixName('highlight');\n    var dehighlight = prefixName('dehighlight');\n\n    var emit = function (component, event) {\n      dispatchWith(component, component.element, event, {});\n    };\n    var emitWith = function (component, event, properties) {\n      dispatchWith(component, component.element, event, properties);\n    };\n    var emitExecute = function (component) {\n      emit(component, execute());\n    };\n    var dispatch = function (component, target, event) {\n      dispatchWith(component, target, event, {});\n    };\n    var dispatchWith = function (component, target, event, properties) {\n      var data = __assign({ target: target }, properties);\n      component.getSystem().triggerEvent(event, target, data);\n    };\n    var dispatchEvent = function (component, target, event, simulatedEvent) {\n      component.getSystem().triggerEvent(event, target, simulatedEvent.event);\n    };\n\n    var derive = function (configs) {\n      return wrapAll$1(configs);\n    };\n    var abort = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$4({ abort: predicate })\n      };\n    };\n    var can = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$4({ can: predicate })\n      };\n    };\n    var preventDefault = function (name) {\n      return {\n        key: name,\n        value: nu$4({\n          run: function (component, simulatedEvent) {\n            simulatedEvent.event.prevent();\n          }\n        })\n      };\n    };\n    var run = function (name, handler) {\n      return {\n        key: name,\n        value: nu$4({ run: handler })\n      };\n    };\n    var runActionExtra = function (name, action, extra) {\n      return {\n        key: name,\n        value: nu$4({\n          run: function (component, simulatedEvent) {\n            action.apply(undefined, [\n              component,\n              simulatedEvent\n            ].concat(extra));\n          }\n        })\n      };\n    };\n    var runOnName = function (name) {\n      return function (handler) {\n        return run(name, handler);\n      };\n    };\n    var runOnSourceName = function (name) {\n      return function (handler) {\n        return {\n          key: name,\n          value: nu$4({\n            run: function (component, simulatedEvent) {\n              if (isSource(component, simulatedEvent)) {\n                handler(component, simulatedEvent);\n              }\n            }\n          })\n        };\n      };\n    };\n    var redirectToUid = function (name, uid) {\n      return run(name, function (component, simulatedEvent) {\n        component.getSystem().getByUid(uid).each(function (redirectee) {\n          dispatchEvent(redirectee, redirectee.element, name, simulatedEvent);\n        });\n      });\n    };\n    var redirectToPart = function (name, detail, partName) {\n      var uid = detail.partUids[partName];\n      return redirectToUid(name, uid);\n    };\n    var runWithTarget = function (name, f) {\n      return run(name, function (component, simulatedEvent) {\n        var ev = simulatedEvent.event;\n        var target = component.getSystem().getByDom(ev.target).fold(function () {\n          var closest$1 = closest(ev.target, function (el) {\n            return component.getSystem().getByDom(el).toOptional();\n          }, never);\n          return closest$1.getOr(component);\n        }, function (c) {\n          return c;\n        });\n        f(component, target, simulatedEvent);\n      });\n    };\n    var cutter = function (name) {\n      return run(name, function (component, simulatedEvent) {\n        simulatedEvent.cut();\n      });\n    };\n    var stopper = function (name) {\n      return run(name, function (component, simulatedEvent) {\n        simulatedEvent.stop();\n      });\n    };\n    var runOnSource = function (name, f) {\n      return runOnSourceName(name)(f);\n    };\n    var runOnAttached = runOnSourceName(attachedToDom());\n    var runOnDetached = runOnSourceName(detachedFromDom());\n    var runOnInit = runOnSourceName(systemInit());\n    var runOnExecute = runOnName(execute());\n\n    var Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n    var isDocument = isType$1(DOCUMENT);\n    var isDocumentFragment = isType$1(DOCUMENT_FRAGMENT);\n\n    var owner = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner(dos);\n    };\n    var documentElement = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parentNode = function (element) {\n      return parent(element);\n    };\n    var offsetParent = function (element) {\n      return Optional.from(element.dom.offsetParent).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos) && isNonNullable(dos.dom.host);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getContentContainer = function (dos) {\n      return isShadowRoot(dos) ? dos : SugarElement.fromDom(documentOrOwner(dos).dom.body);\n    };\n    var isInShadowRoot = function (e) {\n      return getShadowRoot(e).isSome();\n    };\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var appendAt = function (parent, element, index) {\n      child(parent, index).fold(function () {\n        append(parent, element);\n      }, function (v) {\n        before(v, element);\n      });\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each(children(element), function (rogue) {\n        remove(rogue);\n      });\n    };\n    var remove = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove(wrapper);\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n\n    var get$2 = function (element) {\n      return element.dom.innerHTML;\n    };\n    var set = function (element, content) {\n      var owner$1 = owner(element);\n      var docDom = owner$1.dom;\n      var fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml$1(content, docDom);\n      append$1(fragment, contentElements);\n      empty(element);\n      append(element, fragment);\n    };\n    var getOuter = function (element) {\n      var container = SugarElement.fromTag('div');\n      var clone = SugarElement.fromDom(element.dom.cloneNode(true));\n      append(container, clone);\n      return get$2(container);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set$1 = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom;\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$3 = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$3(element, key));\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove$1 = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n\n    var clone = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow$1 = function (original) {\n      return clone(original, false);\n    };\n\n    var getHtml = function (element) {\n      if (isShadowRoot(element)) {\n        return '#shadow-root';\n      } else {\n        var clone = shallow$1(element);\n        return getOuter(clone);\n      }\n    };\n\n    var element = function (elem) {\n      return getHtml(elem);\n    };\n\n    var isRecursive = function (component, originator, target) {\n      return eq$1(originator, component.element) && !eq$1(originator, target);\n    };\n    var events = derive([can(focus(), function (component, simulatedEvent) {\n        var event = simulatedEvent.event;\n        var originator = event.originator;\n        var target = event.target;\n        if (isRecursive(component, originator, target)) {\n          console.warn(focus() + ' did not get interpreted by the desired target. ' + '\\nOriginator: ' + element(originator) + '\\nTarget: ' + element(target) + '\\nCheck the ' + focus() + ' event handlers');\n          return false;\n        } else {\n          return true;\n        }\n      })]);\n\n    var DefaultEvents = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events\n    });\n\n    var unique = 0;\n    var generate$1 = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var prefix = constant('alloy-id-');\n    var idAttr = constant('data-alloy-id');\n\n    var prefix$1 = prefix();\n    var idAttr$1 = idAttr();\n    var write = function (label, elem) {\n      var id = generate$1(prefix$1 + label);\n      writeOnly(elem, id);\n      return id;\n    };\n    var writeOnly = function (elem, uid) {\n      Object.defineProperty(elem.dom, idAttr$1, {\n        value: uid,\n        writable: true\n      });\n    };\n    var read$1 = function (elem) {\n      var id = isElement(elem) ? elem.dom[idAttr$1] : null;\n      return Optional.from(id);\n    };\n    var generate$2 = function (prefix) {\n      return generate$1(prefix);\n    };\n\n    var make = identity;\n\n    var NoContextApi = function (getComp) {\n      var fail = function (event) {\n        return function () {\n          throw new Error('The component must be in a context to send: ' + event + (getComp ? '\\n' + element(getComp().element) + ' is not in context.' : ''));\n        };\n      };\n      return {\n        debugInfo: constant('fake'),\n        triggerEvent: fail('triggerEvent'),\n        triggerFocus: fail('triggerFocus'),\n        triggerEscape: fail('triggerEscape'),\n        build: fail('build'),\n        addToWorld: fail('addToWorld'),\n        removeFromWorld: fail('removeFromWorld'),\n        addToGui: fail('addToGui'),\n        removeFromGui: fail('removeFromGui'),\n        getByUid: fail('getByUid'),\n        getByDom: fail('getByDom'),\n        broadcast: fail('broadcast'),\n        broadcastOn: fail('broadcastOn'),\n        broadcastEvent: fail('broadcastEvent'),\n        isConnected: never\n      };\n    };\n    var singleton = NoContextApi();\n\n    var markAsBehaviourApi = function (f, apiName, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: apiName,\n          parameters: cleanParameters(parameters.slice(0, 1).concat(parameters.slice(3)))\n        };\n      };\n      return f;\n    };\n    var cleanParameters = function (parameters) {\n      return map(parameters, function (p) {\n        return endsWith(p, '/*') ? p.substring(0, p.length - '/*'.length) : p;\n      });\n    };\n    var markAsExtraApi = function (f, extraName) {\n      var delegate = f.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: extraName,\n          parameters: cleanParameters(parameters)\n        };\n      };\n      return f;\n    };\n    var markAsSketchApi = function (f, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: 'OVERRIDE',\n          parameters: cleanParameters(parameters.slice(1))\n        };\n      };\n      return f;\n    };\n\n    var premadeTag = generate$1('alloy-premade');\n    var premade = function (comp) {\n      return wrap$1(premadeTag, comp);\n    };\n    var getPremade = function (spec) {\n      return get$1(spec, premadeTag);\n    };\n    var makeApi = function (f) {\n      return markAsSketchApi(function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        return f.apply(void 0, __spreadArrays([\n          component.getApis(),\n          component\n        ], rest));\n      }, f);\n    };\n\n    var NoState = {\n      init: function () {\n        return nu$5({\n          readState: function () {\n            return 'No State required';\n          }\n        });\n      }\n    };\n    var nu$5 = function (spec) {\n      return spec;\n    };\n\n    var generateFrom = function (spec, all) {\n      var schema = map(all, function (a) {\n        return optionObjOf(a.name(), [\n          strict$1('config'),\n          defaulted$1('state', NoState)\n        ]);\n      });\n      var validated = asRaw('component.behaviours', objOf(schema), spec.behaviours).fold(function (errInfo) {\n        throw new Error(formatError(errInfo) + '\\nComplete spec:\\n' + JSON.stringify(spec, null, 2));\n      }, function (v) {\n        return v;\n      });\n      return {\n        list: all,\n        data: map$2(validated, function (optBlobThunk) {\n          var output = optBlobThunk.map(function (blob) {\n            return {\n              config: blob.config,\n              state: blob.state.init(blob.config)\n            };\n          });\n          return function () {\n            return output;\n          };\n        })\n      };\n    };\n    var getBehaviours = function (bData) {\n      return bData.list;\n    };\n    var getData = function (bData) {\n      return bData.data;\n    };\n\n    var byInnerKey = function (data, tuple) {\n      var r = {};\n      each$1(data, function (detail, key) {\n        each$1(detail, function (value, indexKey) {\n          var chain = get$1(r, indexKey).getOr([]);\n          r[indexKey] = chain.concat([tuple(key, value)]);\n        });\n      });\n      return r;\n    };\n\n    var nu$6 = function (s) {\n      return {\n        classes: s.classes !== undefined ? s.classes : [],\n        attributes: s.attributes !== undefined ? s.attributes : {},\n        styles: s.styles !== undefined ? s.styles : {}\n      };\n    };\n    var merge$1 = function (defnA, mod) {\n      return __assign(__assign({}, defnA), {\n        attributes: __assign(__assign({}, defnA.attributes), mod.attributes),\n        styles: __assign(__assign({}, defnA.styles), mod.styles),\n        classes: defnA.classes.concat(mod.classes)\n      });\n    };\n\n    var combine = function (info, baseMod, behaviours, base) {\n      var modsByBehaviour = __assign({}, baseMod);\n      each(behaviours, function (behaviour) {\n        modsByBehaviour[behaviour.name()] = behaviour.exhibit(info, base);\n      });\n      var byAspect = byInnerKey(modsByBehaviour, function (name, modification) {\n        return {\n          name: name,\n          modification: modification\n        };\n      });\n      var combineObjects = function (objects) {\n        return foldr(objects, function (b, a) {\n          return __assign(__assign({}, a.modification), b);\n        }, {});\n      };\n      var combinedClasses = foldr(byAspect.classes, function (b, a) {\n        return a.modification.concat(b);\n      }, []);\n      var combinedAttributes = combineObjects(byAspect.attributes);\n      var combinedStyles = combineObjects(byAspect.styles);\n      return nu$6({\n        classes: combinedClasses,\n        attributes: combinedAttributes,\n        styles: combinedStyles\n      });\n    };\n\n    var sortKeys = function (label, keyName, array, order) {\n      try {\n        var sorted = sort(array, function (a, b) {\n          var aKey = a[keyName];\n          var bKey = b[keyName];\n          var aIndex = order.indexOf(aKey);\n          var bIndex = order.indexOf(bKey);\n          if (aIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + aKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (bIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + bKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (aIndex < bIndex) {\n            return -1;\n          } else if (bIndex < aIndex) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        return Result.value(sorted);\n      } catch (err) {\n        return Result.error([err]);\n      }\n    };\n\n    var uncurried = function (handler, purpose) {\n      return {\n        handler: handler,\n        purpose: purpose\n      };\n    };\n    var curried = function (handler, purpose) {\n      return {\n        cHandler: handler,\n        purpose: purpose\n      };\n    };\n    var curryArgs = function (descHandler, extraArgs) {\n      return curried(curry.apply(undefined, [descHandler.handler].concat(extraArgs)), descHandler.purpose);\n    };\n    var getCurried = function (descHandler) {\n      return descHandler.cHandler;\n    };\n\n    var behaviourTuple = function (name, handler) {\n      return {\n        name: name,\n        handler: handler\n      };\n    };\n    var nameToHandlers = function (behaviours, info) {\n      var r = {};\n      each(behaviours, function (behaviour) {\n        r[behaviour.name()] = behaviour.handlers(info);\n      });\n      return r;\n    };\n    var groupByEvents = function (info, behaviours, base) {\n      var behaviourEvents = __assign(__assign({}, base), nameToHandlers(behaviours, info));\n      return byInnerKey(behaviourEvents, behaviourTuple);\n    };\n    var combine$1 = function (info, eventOrder, behaviours, base) {\n      var byEventName = groupByEvents(info, behaviours, base);\n      return combineGroups(byEventName, eventOrder);\n    };\n    var assemble = function (rawHandler) {\n      var handler = read(rawHandler);\n      return function (component, simulatedEvent) {\n        var rest = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n          rest[_i - 2] = arguments[_i];\n        }\n        var args = [\n          component,\n          simulatedEvent\n        ].concat(rest);\n        if (handler.abort.apply(undefined, args)) {\n          simulatedEvent.stop();\n        } else if (handler.can.apply(undefined, args)) {\n          handler.run.apply(undefined, args);\n        }\n      };\n    };\n    var missingOrderError = function (eventName, tuples) {\n      return Result.error(['The event (' + eventName + ') has more than one behaviour that listens to it.\\nWhen this occurs, you must ' + 'specify an event ordering for the behaviours in your spec (e.g. [ \"listing\", \"toggling\" ]).\\nThe behaviours that ' + 'can trigger it are: ' + JSON.stringify(map(tuples, function (c) {\n          return c.name;\n        }), null, 2)]);\n    };\n    var fuse$1 = function (tuples, eventOrder, eventName) {\n      var order = eventOrder[eventName];\n      if (!order) {\n        return missingOrderError(eventName, tuples);\n      } else {\n        return sortKeys('Event: ' + eventName, 'name', tuples, order).map(function (sortedTuples) {\n          var handlers = map(sortedTuples, function (tuple) {\n            return tuple.handler;\n          });\n          return fuse(handlers);\n        });\n      }\n    };\n    var combineGroups = function (byEventName, eventOrder) {\n      var r = mapToArray(byEventName, function (tuples, eventName) {\n        var combined = tuples.length === 1 ? Result.value(tuples[0].handler) : fuse$1(tuples, eventOrder, eventName);\n        return combined.map(function (handler) {\n          var assembled = assemble(handler);\n          var purpose = tuples.length > 1 ? filter(eventOrder[eventName], function (o) {\n            return exists(tuples, function (t) {\n              return t.name === o;\n            });\n          }).join(' > ') : tuples[0].name;\n          return wrap$1(eventName, uncurried(assembled, purpose));\n        });\n      });\n      return consolidate(r, {});\n    };\n\n    var baseBehaviour = 'alloy.base.behaviour';\n    var toInfo = function (spec) {\n      var _a;\n      return asRaw('custom.definition', objOf([\n        field('dom', 'dom', strict(), objOf([\n          strict$1('tag'),\n          defaulted$1('styles', {}),\n          defaulted$1('classes', []),\n          defaulted$1('attributes', {}),\n          option('value'),\n          option('innerHtml')\n        ])),\n        strict$1('components'),\n        strict$1('uid'),\n        defaulted$1('events', {}),\n        defaulted$1('apis', {}),\n        field('eventOrder', 'eventOrder', mergeWith((_a = {}, _a[execute()] = [\n          'disabling',\n          baseBehaviour,\n          'toggling',\n          'typeaheadevents'\n        ], _a[focus()] = [\n          baseBehaviour,\n          'focusing',\n          'keying'\n        ], _a[systemInit()] = [\n          baseBehaviour,\n          'disabling',\n          'toggling',\n          'representing'\n        ], _a[input()] = [\n          baseBehaviour,\n          'representing',\n          'streaming',\n          'invalidating'\n        ], _a[detachedFromDom()] = [\n          baseBehaviour,\n          'representing',\n          'item-events',\n          'tooltipping'\n        ], _a[mousedown()] = [\n          'focusing',\n          baseBehaviour,\n          'item-type-events'\n        ], _a[touchstart()] = [\n          'focusing',\n          baseBehaviour,\n          'item-type-events'\n        ], _a[mouseover()] = [\n          'item-type-events',\n          'tooltipping'\n        ], _a[receive()] = [\n          'receiving',\n          'reflecting',\n          'tooltipping'\n        ], _a)), anyValue$1()),\n        option('domModification')\n      ]), spec);\n    };\n    var toDefinition = function (detail) {\n      return __assign(__assign({}, detail.dom), {\n        uid: detail.uid,\n        domChildren: map(detail.components, function (comp) {\n          return comp.element;\n        })\n      });\n    };\n    var toModification = function (detail) {\n      return detail.domModification.fold(function () {\n        return nu$6({});\n      }, nu$6);\n    };\n    var toEvents = function (info) {\n      return info.events;\n    };\n\n    var read$2 = function (element, attr) {\n      var value = get$3(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add = function (element, attr, id) {\n      var old = read$2(element, attr);\n      var nu = old.concat([id]);\n      set$1(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$2 = function (element, attr, id) {\n      var nu = filter(read$2(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set$1(element, attr, nu.join(' '));\n      } else {\n        remove$1(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$4 = function (element) {\n      return read$2(element, 'class');\n    };\n    var add$1 = function (element, clazz) {\n      return add(element, 'class', clazz);\n    };\n    var remove$3 = function (element, clazz) {\n      return remove$2(element, 'class', clazz);\n    };\n\n    var add$2 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$1(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$4(element);\n      if (classList.length === 0) {\n        remove$1(element, 'class');\n      }\n    };\n    var remove$4 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$2 = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var add$3 = function (element, classes) {\n      each(classes, function (x) {\n        add$2(element, x);\n      });\n    };\n    var remove$5 = function (element, classes) {\n      each(classes, function (x) {\n        remove$4(element, x);\n      });\n    };\n\n    var isSupported$1 = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n    var body = function () {\n      return getBody(SugarElement.fromDom(document));\n    };\n    var getBody = function (doc) {\n      var b = doc.dom.body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported$1(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported$1(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$2 = function (element, property, value) {\n      var dom = element.dom;\n      internalSet(dom, property, value);\n    };\n    var setAll$1 = function (element, css) {\n      var dom = element.dom;\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var setOptions = function (element, css) {\n      var dom = element.dom;\n      each$1(css, function (v, k) {\n        v.fold(function () {\n          internalRemove(dom, k);\n        }, function (value) {\n          internalSet(dom, k, value);\n        });\n      });\n    };\n    var get$5 = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported$1(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom;\n      if (isSupported$1(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    var isValidValue = function (tag, property, value) {\n      var element = SugarElement.fromTag(tag);\n      set$2(element, property, value);\n      var style = getRaw(element, property);\n      return style.isSome();\n    };\n    var remove$6 = function (element, property) {\n      var dom = element.dom;\n      internalRemove(dom, property);\n      if (getOpt(element, 'style').map(trim).is('')) {\n        remove$1(element, 'style');\n      }\n    };\n    var reflow = function (e) {\n      return e.dom.offsetWidth;\n    };\n\n    var get$6 = function (element) {\n      return element.dom.value;\n    };\n    var set$3 = function (element, value) {\n      if (value === undefined) {\n        throw new Error('Value.set was undefined');\n      }\n      element.dom.value = value;\n    };\n\n    var renderToDom = function (definition) {\n      var subject = SugarElement.fromTag(definition.tag);\n      setAll(subject, definition.attributes);\n      add$3(subject, definition.classes);\n      setAll$1(subject, definition.styles);\n      definition.innerHtml.each(function (html) {\n        return set(subject, html);\n      });\n      var children = definition.domChildren;\n      append$1(subject, children);\n      definition.value.each(function (value) {\n        set$3(subject, value);\n      });\n      if (!definition.uid) {\n        debugger;\n      }\n      writeOnly(subject, definition.uid);\n      return subject;\n    };\n\n    var getBehaviours$1 = function (spec) {\n      var behaviours = get$1(spec, 'behaviours').getOr({});\n      var keys$1 = filter(keys(behaviours), function (k) {\n        return behaviours[k] !== undefined;\n      });\n      return map(keys$1, function (k) {\n        return behaviours[k].me;\n      });\n    };\n    var generateFrom$1 = function (spec, all) {\n      return generateFrom(spec, all);\n    };\n    var generate$3 = function (spec) {\n      var all = getBehaviours$1(spec);\n      return generateFrom$1(spec, all);\n    };\n\n    var getDomDefinition = function (info, bList, bData) {\n      var definition = toDefinition(info);\n      var infoModification = toModification(info);\n      var baseModification = { 'alloy.base.modification': infoModification };\n      var modification = bList.length > 0 ? combine(bData, baseModification, bList, definition) : infoModification;\n      return merge$1(definition, modification);\n    };\n    var getEvents = function (info, bList, bData) {\n      var baseEvents = { 'alloy.base.behaviour': toEvents(info) };\n      return combine$1(bData, info.eventOrder, bList, baseEvents).getOrDie();\n    };\n    var build = function (spec) {\n      var getMe = function () {\n        return me;\n      };\n      var systemApi = Cell(singleton);\n      var info = getOrDie(toInfo(spec));\n      var bBlob = generate$3(spec);\n      var bList = getBehaviours(bBlob);\n      var bData = getData(bBlob);\n      var modDefinition = getDomDefinition(info, bList, bData);\n      var item = renderToDom(modDefinition);\n      var events = getEvents(info, bList, bData);\n      var subcomponents = Cell(info.components);\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(getMe));\n      };\n      var syncComponents = function () {\n        var children$1 = children(item);\n        var subs = bind(children$1, function (child) {\n          return systemApi.get().getByDom(child).fold(function () {\n            return [];\n          }, function (c) {\n            return [c];\n          });\n        });\n        subcomponents.set(subs);\n      };\n      var config = function (behaviour) {\n        var b = bData;\n        var f = isFunction(b[behaviour.name()]) ? b[behaviour.name()] : function () {\n          throw new Error('Could not find ' + behaviour.name() + ' in ' + JSON.stringify(spec, null, 2));\n        };\n        return f();\n      };\n      var hasConfigured = function (behaviour) {\n        return isFunction(bData[behaviour.name()]);\n      };\n      var getApis = function () {\n        return info.apis;\n      };\n      var readState = function (behaviourName) {\n        return bData[behaviourName]().map(function (b) {\n          return b.state.readState();\n        }).getOr('not enabled');\n      };\n      var me = {\n        getSystem: systemApi.get,\n        config: config,\n        hasConfigured: hasConfigured,\n        spec: spec,\n        readState: readState,\n        getApis: getApis,\n        connect: connect,\n        disconnect: disconnect,\n        element: item,\n        syncComponents: syncComponents,\n        components: subcomponents.get,\n        events: events\n      };\n      return me;\n    };\n\n    var buildSubcomponents = function (spec) {\n      var components = get$1(spec, 'components').getOr([]);\n      return map(components, build$1);\n    };\n    var buildFromSpec = function (userSpec) {\n      var _a = make(userSpec), specEvents = _a.events, spec = __rest(_a, ['events']);\n      var components = buildSubcomponents(spec);\n      var completeSpec = __assign(__assign({}, spec), {\n        events: __assign(__assign({}, DefaultEvents), specEvents),\n        components: components\n      });\n      return Result.value(build(completeSpec));\n    };\n    var text = function (textContent) {\n      var element = SugarElement.fromText(textContent);\n      return external({ element: element });\n    };\n    var external = function (spec) {\n      var extSpec = asRawOrDie('external.component', objOfOnly([\n        strict$1('element'),\n        option('uid')\n      ]), spec);\n      var systemApi = Cell(NoContextApi());\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(function () {\n          return me;\n        }));\n      };\n      extSpec.uid.each(function (uid) {\n        writeOnly(extSpec.element, uid);\n      });\n      var me = {\n        getSystem: systemApi.get,\n        config: Optional.none,\n        hasConfigured: never,\n        connect: connect,\n        disconnect: disconnect,\n        getApis: function () {\n          return {};\n        },\n        element: extSpec.element,\n        spec: spec,\n        readState: constant('No state'),\n        syncComponents: noop,\n        components: constant([]),\n        events: {}\n      };\n      return premade(me);\n    };\n    var uids = generate$2;\n    var build$1 = function (spec) {\n      return getPremade(spec).fold(function () {\n        var userSpecWithUid = spec.hasOwnProperty('uid') ? spec : __assign({ uid: uids('') }, spec);\n        return buildFromSpec(userSpecWithUid).getOrDie();\n      }, function (prebuilt) {\n        return prebuilt;\n      });\n    };\n    var premade$1 = premade;\n\n    var Dimension = function (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported$1(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$5(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$5(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    };\n\n    var api = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$7 = function (element) {\n      return api.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api.getOuter(element);\n    };\n    var setMax = function (element, value) {\n      var inclusions = [\n        'margin-top',\n        'border-top-width',\n        'padding-top',\n        'padding-bottom',\n        'border-bottom-width',\n        'margin-bottom'\n      ];\n      var absMax = api.max(element, value, inclusions);\n      set$2(element, 'max-height', absMax + 'px');\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var api$1 = Dimension('width', function (element) {\n      return element.dom.offsetWidth;\n    });\n    var set$4 = function (element, h) {\n      return api$1.set(element, h);\n    };\n    var get$8 = function (element) {\n      return api$1.get(element);\n    };\n    var getOuter$2 = function (element) {\n      return api$1.getOuter(element);\n    };\n    var setMax$1 = function (element, value) {\n      var inclusions = [\n        'margin-left',\n        'border-left-width',\n        'padding-left',\n        'padding-right',\n        'border-right-width',\n        'margin-right'\n      ];\n      var absMax = api$1.max(element, value, inclusions);\n      set$2(element, 'max-width', absMax + 'px');\n    };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: target,\n        x: x,\n        y: y,\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: raw\n      };\n    };\n    var fromRawEvent = function (rawEvent) {\n      var target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      var stop = function () {\n        return rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        return rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (filter(rawEvent)) {\n          handler(fromRawEvent(rawEvent));\n        }\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$2 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var capture = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, true);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    var get$9 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var to = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n\n    var get$a = function (_win) {\n      var win = _win === undefined ? window : _win;\n      return Optional.from(win['visualViewport']);\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds = function (_win) {\n      var win = _win === undefined ? window : _win;\n      var doc = win.document;\n      var scroll = get$9(SugarElement.fromDom(doc));\n      return get$a(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds(scroll.left, scroll.top, width, height);\n      }, function (visualViewport) {\n        return bounds(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n      });\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      var paths = walkUp(navigation, d);\n      return Optional.some(paths);\n    };\n\n    var view = function (doc) {\n      var _a;\n      var element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    var owner$1 = function (element) {\n      return owner(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner$1\n    });\n\n    var find$3 = function (element) {\n      var doc = SugarElement.fromDom(document);\n      var scroll = get$9(doc);\n      var path = pathTo(element, Navigation);\n      return path.fold(curry(absolute, element), function (frames) {\n        var offset = viewport(element);\n        var r = foldr(frames, function (b, a) {\n          var loc = viewport(a);\n          return {\n            left: b.left + loc.left,\n            top: b.top + loc.top\n          };\n        }, {\n          left: 0,\n          top: 0\n        });\n        return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n      });\n    };\n\n    var pointed = function (point, width, height) {\n      return {\n        point: point,\n        width: width,\n        height: height\n      };\n    };\n    var rect = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      };\n    };\n    var bounds$1 = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var box = function (element) {\n      var xy = absolute(element);\n      var w = getOuter$2(element);\n      var h = getOuter$1(element);\n      return bounds$1(xy.left, xy.top, w, h);\n    };\n    var absolute$1 = function (element) {\n      var position = find$3(element);\n      var width = getOuter$2(element);\n      var height = getOuter$1(element);\n      return bounds$1(position.left, position.top, width, height);\n    };\n    var win = function () {\n      return getBounds(window);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor$1 = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$1 = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor$1, scope, predicate, isRoot);\n    };\n    var descendant = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = SugarElement.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Optional.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope.dom);\n    };\n\n    var closest$2 = function (scope, predicate, isRoot) {\n      return closest$1(scope, predicate, isRoot).isSome();\n    };\n\n    var ancestor$2 = function (scope, selector, isRoot) {\n      return ancestor$1(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var descendant$1 = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$3 = function (scope, selector, isRoot) {\n      var is$1 = function (element, selector) {\n        return is(element, selector);\n      };\n      return ClosestOrAncestor(is$1, ancestor$2, scope, selector, isRoot);\n    };\n\n    var find$4 = function (queryElem) {\n      var dependent = closest$1(queryElem, function (elem) {\n        if (!isElement(elem)) {\n          return false;\n        }\n        var id = get$3(elem, 'id');\n        return id !== undefined && id.indexOf('aria-owns') > -1;\n      });\n      return dependent.bind(function (dep) {\n        var id = get$3(dep, 'id');\n        var dos = getRootNode(dep);\n        return descendant$1(dos, '[aria-owns=\"' + id + '\"]');\n      });\n    };\n    var manager = function () {\n      var ariaId = generate$1('aria-owns');\n      var link = function (elem) {\n        set$1(elem, 'aria-owns', ariaId);\n      };\n      var unlink = function (elem) {\n        remove$1(elem, 'aria-owns');\n      };\n      return {\n        id: ariaId,\n        link: link,\n        unlink: unlink\n      };\n    };\n\n    var isAriaPartOf = function (component, queryElem) {\n      return find$4(queryElem).exists(function (owner) {\n        return isPartOf(component, owner);\n      });\n    };\n    var isPartOf = function (component, queryElem) {\n      return closest$2(queryElem, function (el) {\n        return eq$1(el, component.element);\n      }, never) || isAriaPartOf(component, queryElem);\n    };\n\n    var unknown$3 = 'unknown';\n    var EventConfiguration;\n    (function (EventConfiguration) {\n      EventConfiguration[EventConfiguration['STOP'] = 0] = 'STOP';\n      EventConfiguration[EventConfiguration['NORMAL'] = 1] = 'NORMAL';\n      EventConfiguration[EventConfiguration['LOGGING'] = 2] = 'LOGGING';\n    }(EventConfiguration || (EventConfiguration = {})));\n    var eventConfig = Cell({});\n    var makeEventLogger = function (eventName, initialTarget) {\n      var sequence = [];\n      var startTime = new Date().getTime();\n      return {\n        logEventCut: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'cut',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventStopped: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'stopped',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logNoParent: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'no-parent',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventNoHandlers: function (_name, target) {\n          sequence.push({\n            outcome: 'no-handlers-left',\n            target: target\n          });\n        },\n        logEventResponse: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'response',\n            purpose: purpose,\n            target: target\n          });\n        },\n        write: function () {\n          var finishTime = new Date().getTime();\n          if (contains([\n              'mousemove',\n              'mouseover',\n              'mouseout',\n              systemInit()\n            ], eventName)) {\n            return;\n          }\n          console.log(eventName, {\n            event: eventName,\n            time: finishTime - startTime,\n            target: initialTarget.dom,\n            sequence: map(sequence, function (s) {\n              if (!contains([\n                  'cut',\n                  'stopped',\n                  'response'\n                ], s.outcome)) {\n                return s.outcome;\n              } else {\n                return '{' + s.purpose + '} ' + s.outcome + ' at (' + element(s.target) + ')';\n              }\n            })\n          });\n        }\n      };\n    };\n    var processEvent = function (eventName, initialTarget, f) {\n      var status = get$1(eventConfig.get(), eventName).orThunk(function () {\n        var patterns = keys(eventConfig.get());\n        return findMap(patterns, function (p) {\n          return eventName.indexOf(p) > -1 ? Optional.some(eventConfig.get()[p]) : Optional.none();\n        });\n      }).getOr(EventConfiguration.NORMAL);\n      switch (status) {\n      case EventConfiguration.NORMAL:\n        return f(noLogger());\n      case EventConfiguration.LOGGING: {\n          var logger = makeEventLogger(eventName, initialTarget);\n          var output = f(logger);\n          logger.write();\n          return output;\n        }\n      case EventConfiguration.STOP:\n        return true;\n      }\n    };\n    var path = [\n      'alloy/data/Fields',\n      'alloy/debugging/Debugging'\n    ];\n    var getTrace = function () {\n      var err = new Error();\n      if (err.stack !== undefined) {\n        var lines = err.stack.split('\\n');\n        return find(lines, function (line) {\n          return line.indexOf('alloy') > 0 && !exists(path, function (p) {\n            return line.indexOf(p) > -1;\n          });\n        }).getOr(unknown$3);\n      } else {\n        return unknown$3;\n      }\n    };\n    var ignoreEvent = {\n      logEventCut: noop,\n      logEventStopped: noop,\n      logNoParent: noop,\n      logEventNoHandlers: noop,\n      logEventResponse: noop,\n      write: noop\n    };\n    var monitorEvent = function (eventName, initialTarget, f) {\n      return processEvent(eventName, initialTarget, f);\n    };\n    var noLogger = constant(ignoreEvent);\n\n    var menuFields = constant([\n      strict$1('menu'),\n      strict$1('selectedMenu')\n    ]);\n    var itemFields = constant([\n      strict$1('item'),\n      strict$1('selectedItem')\n    ]);\n    var schema = constant(objOf(itemFields().concat(menuFields())));\n    var itemSchema = constant(objOf(itemFields()));\n\n    var _initSize = strictObjOf('initSize', [\n      strict$1('numColumns'),\n      strict$1('numRows')\n    ]);\n    var itemMarkers = function () {\n      return strictOf('markers', itemSchema());\n    };\n    var tieredMenuMarkers = function () {\n      return strictObjOf('markers', [strict$1('backgroundMenu')].concat(menuFields()).concat(itemFields()));\n    };\n    var markers = function (required) {\n      return strictObjOf('markers', map(required, strict$1));\n    };\n    var onPresenceHandler = function (label, fieldName, presence) {\n      var trace = getTrace();\n      return field(fieldName, fieldName, presence, valueOf(function (f) {\n        return Result.value(function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          return f.apply(undefined, args);\n        });\n      }));\n    };\n    var onHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, defaulted(noop));\n    };\n    var onKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, defaulted(Optional.none));\n    };\n    var onStrictHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, strict());\n    };\n    var onStrictKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, strict());\n    };\n    var output = function (name, value) {\n      return state$1(name, constant(value));\n    };\n    var snapshot = function (name) {\n      return state$1(name, identity);\n    };\n    var initSize = constant(_initSize);\n\n    var nu$7 = function (x, y, bubble, direction, boundsRestriction, label) {\n      return {\n        x: x,\n        y: y,\n        bubble: bubble,\n        direction: direction,\n        boundsRestriction: boundsRestriction,\n        label: label\n      };\n    };\n\n    var adt$2 = Adt.generate([\n      { southeast: [] },\n      { southwest: [] },\n      { northeast: [] },\n      { northwest: [] },\n      { south: [] },\n      { north: [] },\n      { east: [] },\n      { west: [] }\n    ]);\n    var cata = function (subject, southeast, southwest, northeast, northwest, south, north, east, west) {\n      return subject.fold(southeast, southwest, northeast, northwest, south, north, east, west);\n    };\n    var cataVertical = function (subject, south, middle, north) {\n      return subject.fold(south, south, north, north, south, north, middle, middle);\n    };\n    var cataHorizontal = function (subject, east, middle, west) {\n      return subject.fold(east, west, east, west, middle, middle, east, west);\n    };\n    var southeast = adt$2.southeast;\n    var southwest = adt$2.southwest;\n    var northeast = adt$2.northeast;\n    var northwest = adt$2.northwest;\n    var south = adt$2.south;\n    var north = adt$2.north;\n    var east = adt$2.east;\n    var west = adt$2.west;\n\n    var getRestriction = function (anchor, restriction) {\n      switch (restriction) {\n      case 1:\n        return anchor.x;\n      case 0:\n        return anchor.x + anchor.width;\n      case 2:\n        return anchor.y;\n      case 3:\n        return anchor.y + anchor.height;\n      }\n    };\n    var boundsRestriction = function (anchor, restrictions) {\n      return mapToObject([\n        'left',\n        'right',\n        'top',\n        'bottom'\n      ], function (dir) {\n        return get$1(restrictions, dir).map(function (restriction) {\n          return getRestriction(anchor, restriction);\n        });\n      });\n    };\n    var adjustBounds = function (bounds, boundsRestrictions, bubbleOffsets) {\n      var applyRestriction = function (dir, current) {\n        var bubbleOffset = dir === 'top' || dir === 'bottom' ? bubbleOffsets.top : bubbleOffsets.left;\n        return get$1(boundsRestrictions, dir).bind(identity).bind(function (restriction) {\n          if (dir === 'left' || dir === 'top') {\n            return restriction >= current ? Optional.some(restriction) : Optional.none();\n          } else {\n            return restriction <= current ? Optional.some(restriction) : Optional.none();\n          }\n        }).map(function (restriction) {\n          return restriction + bubbleOffset;\n        }).getOr(current);\n      };\n      var adjustedLeft = applyRestriction('left', bounds.x);\n      var adjustedTop = applyRestriction('top', bounds.y);\n      var adjustedRight = applyRestriction('right', bounds.right);\n      var adjustedBottom = applyRestriction('bottom', bounds.bottom);\n      return bounds$1(adjustedLeft, adjustedTop, adjustedRight - adjustedLeft, adjustedBottom - adjustedTop);\n    };\n\n    var eastX = function (anchor) {\n      return anchor.x;\n    };\n    var middleX = function (anchor, element) {\n      return anchor.x + anchor.width / 2 - element.width / 2;\n    };\n    var westX = function (anchor, element) {\n      return anchor.x + anchor.width - element.width;\n    };\n    var northY = function (anchor, element) {\n      return anchor.y - element.height;\n    };\n    var southY = function (anchor) {\n      return anchor.y + anchor.height;\n    };\n    var centreY = function (anchor, element) {\n      return anchor.y + anchor.height / 2 - element.height / 2;\n    };\n    var eastEdgeX = function (anchor) {\n      return anchor.x + anchor.width;\n    };\n    var westEdgeX = function (anchor, element) {\n      return anchor.x - element.width;\n    };\n    var southeast$1 = function (anchor, element, bubbles) {\n      return nu$7(eastX(anchor), southY(anchor), bubbles.southeast(), southeast(), boundsRestriction(anchor, {\n        left: 1,\n        top: 3\n      }), 'layout-se');\n    };\n    var southwest$1 = function (anchor, element, bubbles) {\n      return nu$7(westX(anchor, element), southY(anchor), bubbles.southwest(), southwest(), boundsRestriction(anchor, {\n        right: 0,\n        top: 3\n      }), 'layout-sw');\n    };\n    var northeast$1 = function (anchor, element, bubbles) {\n      return nu$7(eastX(anchor), northY(anchor, element), bubbles.northeast(), northeast(), boundsRestriction(anchor, {\n        left: 1,\n        bottom: 2\n      }), 'layout-ne');\n    };\n    var northwest$1 = function (anchor, element, bubbles) {\n      return nu$7(westX(anchor, element), northY(anchor, element), bubbles.northwest(), northwest(), boundsRestriction(anchor, {\n        right: 0,\n        bottom: 2\n      }), 'layout-nw');\n    };\n    var north$1 = function (anchor, element, bubbles) {\n      return nu$7(middleX(anchor, element), northY(anchor, element), bubbles.north(), north(), boundsRestriction(anchor, { bottom: 2 }), 'layout-n');\n    };\n    var south$1 = function (anchor, element, bubbles) {\n      return nu$7(middleX(anchor, element), southY(anchor), bubbles.south(), south(), boundsRestriction(anchor, { top: 3 }), 'layout-s');\n    };\n    var east$1 = function (anchor, element, bubbles) {\n      return nu$7(eastEdgeX(anchor), centreY(anchor, element), bubbles.east(), east(), boundsRestriction(anchor, { left: 0 }), 'layout-e');\n    };\n    var west$1 = function (anchor, element, bubbles) {\n      return nu$7(westEdgeX(anchor, element), centreY(anchor, element), bubbles.west(), west(), boundsRestriction(anchor, { right: 1 }), 'layout-w');\n    };\n    var all$2 = function () {\n      return [\n        southeast$1,\n        southwest$1,\n        northeast$1,\n        northwest$1,\n        south$1,\n        north$1,\n        east$1,\n        west$1\n      ];\n    };\n    var allRtl = function () {\n      return [\n        southwest$1,\n        southeast$1,\n        northwest$1,\n        northeast$1,\n        south$1,\n        north$1,\n        east$1,\n        west$1\n      ];\n    };\n    var aboveOrBelow = function () {\n      return [\n        northeast$1,\n        northwest$1,\n        southeast$1,\n        southwest$1,\n        north$1,\n        south$1\n      ];\n    };\n    var aboveOrBelowRtl = function () {\n      return [\n        northwest$1,\n        northeast$1,\n        southwest$1,\n        southeast$1,\n        north$1,\n        south$1\n      ];\n    };\n    var belowOrAbove = function () {\n      return [\n        southeast$1,\n        southwest$1,\n        northeast$1,\n        northwest$1,\n        south$1,\n        north$1\n      ];\n    };\n    var belowOrAboveRtl = function () {\n      return [\n        southwest$1,\n        southeast$1,\n        northwest$1,\n        northeast$1,\n        south$1,\n        north$1\n      ];\n    };\n\n    var chooseChannels = function (channels, message) {\n      return message.universal ? channels : filter(channels, function (ch) {\n        return contains(message.channels, ch);\n      });\n    };\n    var events$1 = function (receiveConfig) {\n      return derive([run(receive(), function (component, message) {\n          var channelMap = receiveConfig.channels;\n          var channels = keys(channelMap);\n          var receivingData = message;\n          var targetChannels = chooseChannels(channels, receivingData);\n          each(targetChannels, function (ch) {\n            var channelInfo = channelMap[ch];\n            var channelSchema = channelInfo.schema;\n            var data = asRawOrDie('channel[' + ch + '] data\\nReceiver: ' + element(component.element), channelSchema, receivingData.data);\n            channelInfo.onReceive(component, data);\n          });\n        })]);\n    };\n\n    var ActiveReceiving = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$1\n    });\n\n    var ReceivingSchema = [strictOf('channels', setOf$1(Result.value, objOfOnly([\n        onStrictHandler('onReceive'),\n        defaulted$1('schema', anyValue$1())\n      ])))];\n\n    var executeEvent = function (bConfig, bState, executor) {\n      return runOnExecute(function (component) {\n        executor(component, bConfig, bState);\n      });\n    };\n    var loadEvent = function (bConfig, bState, f) {\n      return runOnInit(function (component, _simulatedEvent) {\n        f(component, bConfig, bState);\n      });\n    };\n    var create = function (schema, name, active, apis, extra, state) {\n      var configSchema = objOfOnly(schema);\n      var schemaSchema = optionObjOf(name, [optionObjOfOnly('config', schema)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var createModes = function (modes, name, active, apis, extra, state) {\n      var configSchema = modes;\n      var schemaSchema = optionObjOf(name, [optionOf('config', modes)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var wrapApi = function (bName, apiFunction, apiName) {\n      var f = function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        var args = [component].concat(rest);\n        return component.config({ name: constant(bName) }).fold(function () {\n          throw new Error('We could not find any behaviour configuration for: ' + bName + '. Using API: ' + apiName);\n        }, function (info) {\n          var rest = Array.prototype.slice.call(args, 1);\n          return apiFunction.apply(undefined, [\n            component,\n            info.config,\n            info.state\n          ].concat(rest));\n        });\n      };\n      return markAsBehaviourApi(f, apiName, apiFunction);\n    };\n    var revokeBehaviour = function (name) {\n      return {\n        key: name,\n        value: undefined\n      };\n    };\n    var doCreate = function (configSchema, schemaSchema, name, active, apis, extra, state) {\n      var getConfig = function (info) {\n        return hasNonNullableKey(info, name) ? info[name]() : Optional.none();\n      };\n      var wrappedApis = map$2(apis, function (apiF, apiName) {\n        return wrapApi(name, apiF, apiName);\n      });\n      var wrappedExtra = map$2(extra, function (extraF, extraName) {\n        return markAsExtraApi(extraF, extraName);\n      });\n      var me = __assign(__assign(__assign({}, wrappedExtra), wrappedApis), {\n        revoke: curry(revokeBehaviour, name),\n        config: function (spec) {\n          var prepared = asRawOrDie(name + '-config', configSchema, spec);\n          return {\n            key: name,\n            value: {\n              config: prepared,\n              me: me,\n              configAsRaw: cached(function () {\n                return asRawOrDie(name + '-config', configSchema, spec);\n              }),\n              initialConfig: spec,\n              state: state\n            }\n          };\n        },\n        schema: constant(schemaSchema),\n        exhibit: function (info, base) {\n          return getConfig(info).bind(function (behaviourInfo) {\n            return get$1(active, 'exhibit').map(function (exhibitor) {\n              return exhibitor(base, behaviourInfo.config, behaviourInfo.state);\n            });\n          }).getOr(nu$6({}));\n        },\n        name: constant(name),\n        handlers: function (info) {\n          return getConfig(info).map(function (behaviourInfo) {\n            var getEvents = get$1(active, 'events').getOr(function () {\n              return {};\n            });\n            return getEvents(behaviourInfo.config, behaviourInfo.state);\n          }).getOr({});\n        }\n      });\n      return me;\n    };\n\n    var derive$1 = function (capabilities) {\n      return wrapAll$1(capabilities);\n    };\n    var simpleSchema = objOfOnly([\n      strict$1('fields'),\n      strict$1('name'),\n      defaulted$1('active', {}),\n      defaulted$1('apis', {}),\n      defaulted$1('state', NoState),\n      defaulted$1('extra', {})\n    ]);\n    var create$1 = function (data) {\n      var value = asRawOrDie('Creating behaviour: ' + data.name, simpleSchema, data);\n      return create(value.fields, value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var modeSchema = objOfOnly([\n      strict$1('branchKey'),\n      strict$1('branches'),\n      strict$1('name'),\n      defaulted$1('active', {}),\n      defaulted$1('apis', {}),\n      defaulted$1('state', NoState),\n      defaulted$1('extra', {})\n    ]);\n    var createModes$1 = function (data) {\n      var value = asRawOrDie('Creating behaviour: ' + data.name, modeSchema, data);\n      return createModes(choose$1(value.branchKey, value.branches), value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var revoke = constant(undefined);\n\n    var Receiving = create$1({\n      fields: ReceivingSchema,\n      name: 'receiving',\n      active: ActiveReceiving\n    });\n\n    var exhibit = function (base, posConfig) {\n      return nu$6({\n        classes: [],\n        styles: posConfig.useFixed() ? {} : { position: 'relative' }\n      });\n    };\n\n    var ActivePosition = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit\n    });\n\n    var getDocument = function () {\n      return SugarElement.fromDom(document);\n    };\n\n    var focus$1 = function (element) {\n      return element.dom.focus();\n    };\n    var blur = function (element) {\n      return element.dom.blur();\n    };\n    var hasFocus = function (element) {\n      var root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    var active = function (root) {\n      if (root === void 0) {\n        root = getDocument();\n      }\n      return Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    };\n    var search = function (element) {\n      return active(getRootNode(element)).filter(function (e) {\n        return element.dom.contains(e.dom);\n      });\n    };\n\n    var preserve = function (f, container) {\n      var dos = getRootNode(container);\n      var refocus = active(dos).bind(function (focused) {\n        var hasFocus = function (elem) {\n          return eq$1(focused, elem);\n        };\n        return hasFocus(container) ? Optional.some(container) : descendant(container, hasFocus);\n      });\n      var result = f(container);\n      refocus.each(function (oldFocus) {\n        active(dos).filter(function (newFocus) {\n          return eq$1(newFocus, oldFocus);\n        }).fold(function () {\n          focus$1(oldFocus);\n        }, noop);\n      });\n      return result;\n    };\n\n    var NuPositionCss = function (position, left, top, right, bottom) {\n      return {\n        position: position,\n        left: left,\n        top: top,\n        right: right,\n        bottom: bottom\n      };\n    };\n    var applyPositionCss = function (element, position) {\n      var addPx = function (num) {\n        return num + 'px';\n      };\n      setOptions(element, {\n        position: Optional.some(position.position),\n        left: position.left.map(addPx),\n        top: position.top.map(addPx),\n        right: position.right.map(addPx),\n        bottom: position.bottom.map(addPx)\n      });\n    };\n\n    var adt$3 = Adt.generate([\n      { none: [] },\n      {\n        relative: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      }\n    ]);\n    var positionWithDirection = function (posName, decision, x, y, width, height) {\n      var decisionX = decision.x - x;\n      var decisionY = decision.y - y;\n      var decisionWidth = decision.width;\n      var decisionHeight = decision.height;\n      var decisionRight = width - (decisionX + decisionWidth);\n      var decisionBottom = height - (decisionY + decisionHeight);\n      var left = Optional.some(decisionX);\n      var top = Optional.some(decisionY);\n      var right = Optional.some(decisionRight);\n      var bottom = Optional.some(decisionBottom);\n      var none = Optional.none();\n      return cata(decision.direction, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, none, top, right, none);\n      }, function () {\n        return NuPositionCss(posName, left, none, none, bottom);\n      }, function () {\n        return NuPositionCss(posName, none, none, right, bottom);\n      }, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, left, none, none, bottom);\n      }, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, none, top, right, none);\n      });\n    };\n    var reposition = function (origin, decision) {\n      return origin.fold(function () {\n        return NuPositionCss('absolute', Optional.some(decision.x), Optional.some(decision.y), Optional.none(), Optional.none());\n      }, function (x, y, width, height) {\n        return positionWithDirection('absolute', decision, x, y, width, height);\n      }, function (x, y, width, height) {\n        return positionWithDirection('fixed', decision, x, y, width, height);\n      });\n    };\n    var toBox = function (origin, element) {\n      var rel = curry(find$3, element);\n      var position = origin.fold(rel, rel, function () {\n        var scroll = get$9();\n        return find$3(element).translate(-scroll.left, -scroll.top);\n      });\n      var width = getOuter$2(element);\n      var height = getOuter$1(element);\n      return bounds$1(position.left, position.top, width, height);\n    };\n    var viewport$1 = function (origin, getBounds) {\n      return getBounds.fold(function () {\n        return origin.fold(win, win, bounds$1);\n      }, function (b) {\n        return origin.fold(b, b, function () {\n          var bounds = b();\n          var pos = translate(origin, bounds.x, bounds.y);\n          return bounds$1(pos.left, pos.top, bounds.width, bounds.height);\n        });\n      });\n    };\n    var translate = function (origin, x, y) {\n      var pos = SugarPosition(x, y);\n      var removeScroll = function () {\n        var outerScroll = get$9();\n        return pos.translate(-outerScroll.left, -outerScroll.top);\n      };\n      return origin.fold(constant(pos), constant(pos), removeScroll);\n    };\n    var cata$1 = function (subject, onNone, onRelative, onFixed) {\n      return subject.fold(onNone, onRelative, onFixed);\n    };\n    var none$1 = adt$3.none;\n    var relative = adt$3.relative;\n    var fixed = adt$3.fixed;\n\n    var anchor = function (anchorBox, origin) {\n      return {\n        anchorBox: anchorBox,\n        origin: origin\n      };\n    };\n    var box$1 = function (anchorBox, origin) {\n      return anchor(anchorBox, origin);\n    };\n\n    var cycleBy = function (value, delta, min, max) {\n      var r = value + delta;\n      if (r > max) {\n        return min;\n      } else if (r < min) {\n        return max;\n      } else {\n        return r;\n      }\n    };\n    var clamp = function (value, min, max) {\n      return Math.min(Math.max(value, min), max);\n    };\n\n    var adt$4 = Adt.generate([\n      { fit: ['reposition'] },\n      {\n        nofit: [\n          'reposition',\n          'deltaW',\n          'deltaH'\n        ]\n      }\n    ]);\n    var calcReposition = function (newX, newY, width, height, bounds) {\n      var boundsX = bounds.x;\n      var boundsY = bounds.y;\n      var boundsWidth = bounds.width;\n      var boundsHeight = bounds.height;\n      var xInBounds = newX >= boundsX;\n      var yInBounds = newY >= boundsY;\n      var originInBounds = xInBounds && yInBounds;\n      var xFit = newX + width <= boundsX + boundsWidth;\n      var yFit = newY + height <= boundsY + boundsHeight;\n      var sizeInBounds = xFit && yFit;\n      var deltaW = Math.abs(Math.min(width, xInBounds ? boundsX + boundsWidth - newX : boundsX - (newX + width)));\n      var deltaH = Math.abs(Math.min(height, yInBounds ? boundsY + boundsHeight - newY : boundsY - (newY + height)));\n      var maxX = Math.max(bounds.x, bounds.right - width);\n      var maxY = Math.max(bounds.y, bounds.bottom - height);\n      var limitX = clamp(newX, bounds.x, maxX);\n      var limitY = clamp(newY, bounds.y, maxY);\n      return {\n        originInBounds: originInBounds,\n        sizeInBounds: sizeInBounds,\n        limitX: limitX,\n        limitY: limitY,\n        deltaW: deltaW,\n        deltaH: deltaH\n      };\n    };\n    var attempt = function (candidate, width, height, bounds) {\n      var candidateX = candidate.x;\n      var candidateY = candidate.y;\n      var bubbleOffsets = candidate.bubble.offset;\n      var bubbleLeft = bubbleOffsets.left;\n      var bubbleTop = bubbleOffsets.top;\n      var adjustedBounds = adjustBounds(bounds, candidate.boundsRestriction, bubbleOffsets);\n      var boundsY = adjustedBounds.y;\n      var boundsBottom = adjustedBounds.bottom;\n      var boundsX = adjustedBounds.x;\n      var boundsRight = adjustedBounds.right;\n      var newX = candidateX + bubbleLeft;\n      var newY = candidateY + bubbleTop;\n      var _a = calcReposition(newX, newY, width, height, adjustedBounds), originInBounds = _a.originInBounds, sizeInBounds = _a.sizeInBounds, limitX = _a.limitX, limitY = _a.limitY, deltaW = _a.deltaW, deltaH = _a.deltaH;\n      var upAvailable = constant(limitY + deltaH - boundsY);\n      var downAvailable = constant(boundsBottom - limitY);\n      var maxHeight = cataVertical(candidate.direction, downAvailable, downAvailable, upAvailable);\n      var westAvailable = constant(limitX + deltaW - boundsX);\n      var eastAvailable = constant(boundsRight - limitX);\n      var maxWidth = cataHorizontal(candidate.direction, eastAvailable, eastAvailable, westAvailable);\n      var reposition = {\n        x: limitX,\n        y: limitY,\n        width: deltaW,\n        height: deltaH,\n        maxHeight: maxHeight,\n        maxWidth: maxWidth,\n        direction: candidate.direction,\n        classes: {\n          on: candidate.bubble.classesOn,\n          off: candidate.bubble.classesOff\n        },\n        label: candidate.label,\n        candidateYforTest: newY\n      };\n      return originInBounds && sizeInBounds ? adt$4.fit(reposition) : adt$4.nofit(reposition, deltaW, deltaH);\n    };\n    var attempts = function (candidates, anchorBox, elementBox, bubbles, bounds) {\n      var panelWidth = elementBox.width;\n      var panelHeight = elementBox.height;\n      var attemptBestFit = function (layout, reposition, deltaW, deltaH) {\n        var next = layout(anchorBox, elementBox, bubbles);\n        var attemptLayout = attempt(next, panelWidth, panelHeight, bounds);\n        return attemptLayout.fold(adt$4.fit, function (newReposition, newDeltaW, newDeltaH) {\n          var improved = newDeltaH > deltaH || newDeltaW > deltaW;\n          return improved ? adt$4.nofit(newReposition, newDeltaW, newDeltaH) : adt$4.nofit(reposition, deltaW, deltaH);\n        });\n      };\n      var abc = foldl(candidates, function (b, a) {\n        var bestNext = curry(attemptBestFit, a);\n        return b.fold(adt$4.fit, bestNext);\n      }, adt$4.nofit({\n        x: anchorBox.x,\n        y: anchorBox.y,\n        width: elementBox.width,\n        height: elementBox.height,\n        maxHeight: elementBox.height,\n        maxWidth: elementBox.width,\n        direction: southeast(),\n        classes: {\n          on: [],\n          off: []\n        },\n        label: 'none',\n        candidateYforTest: anchorBox.y\n      }, -1, -1));\n      return abc.fold(identity, identity);\n    };\n\n    var elementSize = function (p) {\n      return {\n        width: getOuter$2(p),\n        height: getOuter$1(p)\n      };\n    };\n    var layout = function (anchorBox, element, bubbles, options) {\n      remove$6(element, 'max-height');\n      remove$6(element, 'max-width');\n      var elementBox = elementSize(element);\n      return attempts(options.preference, anchorBox, elementBox, bubbles, options.bounds);\n    };\n    var setClasses = function (element, decision) {\n      var classInfo = decision.classes;\n      remove$5(element, classInfo.off);\n      add$3(element, classInfo.on);\n    };\n    var setHeight = function (element, decision, options) {\n      var maxHeightFunction = options.maxHeightFunction;\n      maxHeightFunction(element, decision.maxHeight);\n    };\n    var setWidth = function (element, decision, options) {\n      var maxWidthFunction = options.maxWidthFunction;\n      maxWidthFunction(element, decision.maxWidth);\n    };\n    var position = function (element, decision, options) {\n      applyPositionCss(element, reposition(options.origin, decision));\n    };\n\n    var setMaxHeight = function (element, maxHeight) {\n      setMax(element, Math.floor(maxHeight));\n    };\n    var anchored = constant(function (element, available) {\n      setMaxHeight(element, available);\n      setAll$1(element, {\n        'overflow-x': 'hidden',\n        'overflow-y': 'auto'\n      });\n    });\n    var expandable = constant(function (element, available) {\n      setMaxHeight(element, available);\n    });\n\n    var defaultOr = function (options, key, dephault) {\n      return options[key] === undefined ? dephault : options[key];\n    };\n    var simple = function (anchor, element, bubble, layouts, getBounds, overrideOptions) {\n      var maxHeightFunction = defaultOr(overrideOptions, 'maxHeightFunction', anchored());\n      var maxWidthFunction = defaultOr(overrideOptions, 'maxWidthFunction', noop);\n      var anchorBox = anchor.anchorBox;\n      var origin = anchor.origin;\n      var options = {\n        bounds: viewport$1(origin, getBounds),\n        origin: origin,\n        preference: layouts,\n        maxHeightFunction: maxHeightFunction,\n        maxWidthFunction: maxWidthFunction\n      };\n      go(anchorBox, element, bubble, options);\n    };\n    var go = function (anchorBox, element, bubble, options) {\n      var decision = layout(anchorBox, element, bubble, options);\n      position(element, decision, options);\n      setClasses(element, decision);\n      setHeight(element, decision, options);\n      setWidth(element, decision, options);\n    };\n\n    var allAlignments = [\n      'valignCentre',\n      'alignLeft',\n      'alignRight',\n      'alignCentre',\n      'top',\n      'bottom',\n      'left',\n      'right'\n    ];\n    var nu$8 = function (width, yoffset, classes) {\n      var getClasses = function (prop) {\n        return get$1(classes, prop).getOr([]);\n      };\n      var make = function (xDelta, yDelta, alignmentsOn) {\n        var alignmentsOff = difference(allAlignments, alignmentsOn);\n        return {\n          offset: SugarPosition(xDelta, yDelta),\n          classesOn: bind(alignmentsOn, getClasses),\n          classesOff: bind(alignmentsOff, getClasses)\n        };\n      };\n      return {\n        southeast: function () {\n          return make(-width, yoffset, [\n            'top',\n            'alignLeft'\n          ]);\n        },\n        southwest: function () {\n          return make(width, yoffset, [\n            'top',\n            'alignRight'\n          ]);\n        },\n        south: function () {\n          return make(-width / 2, yoffset, [\n            'top',\n            'alignCentre'\n          ]);\n        },\n        northeast: function () {\n          return make(-width, -yoffset, [\n            'bottom',\n            'alignLeft'\n          ]);\n        },\n        northwest: function () {\n          return make(width, -yoffset, [\n            'bottom',\n            'alignRight'\n          ]);\n        },\n        north: function () {\n          return make(-width / 2, -yoffset, [\n            'bottom',\n            'alignCentre'\n          ]);\n        },\n        east: function () {\n          return make(width, -yoffset / 2, [\n            'valignCentre',\n            'left'\n          ]);\n        },\n        west: function () {\n          return make(-width, -yoffset / 2, [\n            'valignCentre',\n            'right'\n          ]);\n        },\n        innerNorthwest: function () {\n          return make(-width, yoffset, [\n            'top',\n            'alignRight'\n          ]);\n        },\n        innerNortheast: function () {\n          return make(width, yoffset, [\n            'top',\n            'alignLeft'\n          ]);\n        },\n        innerNorth: function () {\n          return make(-width / 2, yoffset, [\n            'top',\n            'alignCentre'\n          ]);\n        },\n        innerSouthwest: function () {\n          return make(-width, -yoffset, [\n            'bottom',\n            'alignRight'\n          ]);\n        },\n        innerSoutheast: function () {\n          return make(width, -yoffset, [\n            'bottom',\n            'alignLeft'\n          ]);\n        },\n        innerSouth: function () {\n          return make(-width / 2, -yoffset, [\n            'bottom',\n            'alignCentre'\n          ]);\n        },\n        innerWest: function () {\n          return make(width, -yoffset / 2, [\n            'valignCentre',\n            'right'\n          ]);\n        },\n        innerEast: function () {\n          return make(-width, -yoffset / 2, [\n            'valignCentre',\n            'left'\n          ]);\n        }\n      };\n    };\n    var fallback = function () {\n      return nu$8(0, 0, {});\n    };\n\n    var nu$9 = function (x) {\n      return x;\n    };\n\n    var onDirection = function (isLtr, isRtl) {\n      return function (element) {\n        return getDirection(element) === 'rtl' ? isRtl : isLtr;\n      };\n    };\n    var getDirection = function (element) {\n      return get$5(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var AttributeValue;\n    (function (AttributeValue) {\n      AttributeValue['TopToBottom'] = 'toptobottom';\n      AttributeValue['BottomToTop'] = 'bottomtotop';\n    }(AttributeValue || (AttributeValue = {})));\n    var Attribute = 'data-alloy-vertical-dir';\n    var isBottomToTopDir = function (el) {\n      return closest$2(el, function (current) {\n        return isElement(current) && get$3(current, 'data-alloy-vertical-dir') === AttributeValue.BottomToTop;\n      });\n    };\n\n    var schema$1 = function () {\n      return optionObjOf('layouts', [\n        strict$1('onLtr'),\n        strict$1('onRtl'),\n        option('onBottomLtr'),\n        option('onBottomRtl')\n      ]);\n    };\n    var get$b = function (elem, info, defaultLtr, defaultRtl, defaultBottomLtr, defaultBottomRtl, dirElement) {\n      var isBottomToTop = dirElement.map(isBottomToTopDir).getOr(false);\n      var customLtr = info.layouts.map(function (ls) {\n        return ls.onLtr(elem);\n      });\n      var customRtl = info.layouts.map(function (ls) {\n        return ls.onRtl(elem);\n      });\n      var ltr = isBottomToTop ? info.layouts.bind(function (ls) {\n        return ls.onBottomLtr.map(function (f) {\n          return f(elem);\n        });\n      }).or(customLtr).getOr(defaultBottomLtr) : customLtr.getOr(defaultLtr);\n      var rtl = isBottomToTop ? info.layouts.bind(function (ls) {\n        return ls.onBottomRtl.map(function (f) {\n          return f(elem);\n        });\n      }).or(customRtl).getOr(defaultBottomRtl) : customRtl.getOr(defaultRtl);\n      var f = onDirection(ltr, rtl);\n      return f(elem);\n    };\n\n    var placement = function (component, anchorInfo, origin) {\n      var hotspot = anchorInfo.hotspot;\n      var anchorBox = toBox(origin, hotspot.element);\n      var layouts = get$b(component.element, anchorInfo, belowOrAbove(), belowOrAboveRtl(), aboveOrBelow(), aboveOrBelowRtl(), Optional.some(anchorInfo.hotspot.element));\n      return Optional.some(nu$9({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble.getOr(fallback()),\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var HotspotAnchor = [\n      strict$1('hotspot'),\n      option('bubble'),\n      defaulted$1('overrides', {}),\n      schema$1(),\n      output('placement', placement)\n    ];\n\n    var placement$1 = function (component, anchorInfo, origin) {\n      var pos = translate(origin, anchorInfo.x, anchorInfo.y);\n      var anchorBox = bounds$1(pos.left, pos.top, anchorInfo.width, anchorInfo.height);\n      var layouts = get$b(component.element, anchorInfo, all$2(), allRtl(), all$2(), allRtl(), Optional.none());\n      return Optional.some(nu$9({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble,\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var MakeshiftAnchor = [\n      strict$1('x'),\n      strict$1('y'),\n      defaulted$1('height', 0),\n      defaulted$1('width', 0),\n      defaulted$1('bubble', fallback()),\n      defaulted$1('overrides', {}),\n      schema$1(),\n      output('placement', placement$1)\n    ];\n\n    var adt$5 = Adt.generate([\n      { screen: ['point'] },\n      {\n        absolute: [\n          'point',\n          'scrollLeft',\n          'scrollTop'\n        ]\n      }\n    ]);\n    var toFixed = function (pos) {\n      return pos.fold(identity, function (point, scrollLeft, scrollTop) {\n        return point.translate(-scrollLeft, -scrollTop);\n      });\n    };\n    var toAbsolute = function (pos) {\n      return pos.fold(identity, identity);\n    };\n    var sum = function (points) {\n      return foldl(points, function (b, a) {\n        return b.translate(a.left, a.top);\n      }, SugarPosition(0, 0));\n    };\n    var sumAsFixed = function (positions) {\n      var points = map(positions, toFixed);\n      return sum(points);\n    };\n    var sumAsAbsolute = function (positions) {\n      var points = map(positions, toAbsolute);\n      return sum(points);\n    };\n    var screen = adt$5.screen;\n    var absolute$2 = adt$5.absolute;\n\n    var getOffset = function (component, origin, anchorInfo) {\n      var win = defaultView(anchorInfo.root).dom;\n      var hasSameOwner = function (frame) {\n        var frameOwner = owner(frame);\n        var compOwner = owner(component.element);\n        return eq$1(frameOwner, compOwner);\n      };\n      return Optional.from(win.frameElement).map(SugarElement.fromDom).filter(hasSameOwner).map(absolute);\n    };\n    var getRootPoint = function (component, origin, anchorInfo) {\n      var doc = owner(component.element);\n      var outerScroll = get$9(doc);\n      var offset = getOffset(component, origin, anchorInfo).getOr(outerScroll);\n      return absolute$2(offset, outerScroll.left, outerScroll.top);\n    };\n\n    var capRect = function (left, top, width, height) {\n      var newLeft = left, newTop = top, newWidth = width, newHeight = height;\n      if (left < 0) {\n        newLeft = 0;\n        newWidth = width + left;\n      }\n      if (top < 0) {\n        newTop = 0;\n        newHeight = height + top;\n      }\n      var point = screen(SugarPosition(newLeft, newTop));\n      return Optional.some(pointed(point, newWidth, newHeight));\n    };\n    var calcNewAnchor = function (optBox, rootPoint, anchorInfo, origin, elem) {\n      return optBox.map(function (box) {\n        var points = [\n          rootPoint,\n          box.point\n        ];\n        var topLeft = cata$1(origin, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsFixed(points);\n        });\n        var anchorBox = rect(topLeft.left, topLeft.top, box.width, box.height);\n        var layoutsLtr = anchorInfo.showAbove ? aboveOrBelow() : belowOrAbove();\n        var layoutsRtl = anchorInfo.showAbove ? aboveOrBelowRtl() : belowOrAboveRtl();\n        var layouts = get$b(elem, anchorInfo, layoutsLtr, layoutsRtl, layoutsLtr, layoutsRtl, Optional.none());\n        return nu$9({\n          anchorBox: anchorBox,\n          bubble: anchorInfo.bubble.getOr(fallback()),\n          overrides: anchorInfo.overrides,\n          layouts: layouts,\n          placer: Optional.none()\n        });\n      });\n    };\n\n    var placement$2 = function (component, anchorInfo, origin) {\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      return anchorInfo.node.filter(inBody).bind(function (target) {\n        var rect = target.dom.getBoundingClientRect();\n        var nodeBox = capRect(rect.left, rect.top, rect.width, rect.height);\n        var elem = anchorInfo.node.getOr(component.element);\n        return calcNewAnchor(nodeBox, rootPoint, anchorInfo, origin, elem);\n      });\n    };\n    var NodeAnchor = [\n      strict$1('node'),\n      strict$1('root'),\n      option('bubble'),\n      schema$1(),\n      defaulted$1('overrides', {}),\n      defaulted$1('showAbove', false),\n      output('placement', placement$2)\n    ];\n\n    var zeroWidth = '\\uFEFF';\n    var nbsp = '\\xA0';\n\n    var create$2 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$2 };\n\n    var adt$6 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata$2 = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$2 = adt$6.before;\n    var on = adt$6.on;\n    var after$1 = adt$6.after;\n    var Situ = {\n      before: before$2,\n      on: on,\n      after: after$1,\n      cata: cata$2,\n      getStart: getStart\n    };\n\n    var adt$7 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$7.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$7.domRange;\n    var relative$1 = adt$7.relative;\n    var exact = adt$7.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range$1 = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative$1,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range$1\n    };\n\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom);\n      }, function (e, o) {\n        rng.setStart(e.dom, o);\n      }, function (e) {\n        rng.setStartAfter(e.dom);\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom);\n      }, function (e, o) {\n        rng.setEnd(e.dom, o);\n      }, function (e) {\n        rng.setEndAfter(e.dom);\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom,\n        width: rect.width,\n        height: rect.height\n      };\n    };\n    var getFirstRect = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n\n    var adt$8 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(SugarElement.fromDom(range.startContainer), range.startOffset, SugarElement.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant(rng),\n            rtl: Optional.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Optional.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Optional.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$8.rtl(SugarElement.fromDom(rev.endContainer), rev.endOffset, SugarElement.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$8.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$8.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom, soffset);\n          rng.setEnd(finish.dom, foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom, foffset);\n          rng.setEnd(start.dom, soffset);\n          return rng;\n        }\n      });\n    };\n    var ltr = adt$8.ltr;\n    var rtl = adt$8.rtl;\n\n    var NodeValue = function (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    };\n\n    var api$2 = NodeValue(isText, 'text');\n    var get$c = function (element) {\n      return api$2.get(element);\n    };\n    var getOption = function (element) {\n      return api$2.getOption(element);\n    };\n\n    var getEnd = function (element) {\n      return name(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(nbsp) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains(elementsWithCursorPosition, name(elem));\n    };\n\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children$1 = children(element);\n        for (var i = children$1.length - 1; i >= 0; i--) {\n          var child = children$1[i];\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope);\n    };\n\n    var descendants = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner(start);\n      var rng = doc.dom.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var after$2 = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq$1(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var getNativeSelection = function (win) {\n      return Optional.from(win.getSelection());\n    };\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Optional.some(SimRange.create(SugarElement.fromDom(firstRng.startContainer), firstRng.startOffset, SugarElement.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      if (selection.anchorNode === null || selection.focusNode === null) {\n        return readRange(selection);\n      } else {\n        var anchor = SugarElement.fromDom(selection.anchorNode);\n        var focus_1 = SugarElement.fromDom(selection.focusNode);\n        return after$2(anchor, selection.anchorOffset, focus_1, selection.focusOffset) ? Optional.some(SimRange.create(anchor, selection.anchorOffset, focus_1, selection.focusOffset)) : readRange(selection);\n      }\n    };\n    var getExact = function (win) {\n      return getNativeSelection(win).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var getFirstRect$1 = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect(rng);\n    };\n\n    var point = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n    var descendOnce = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0) {\n        return point(element, offset);\n      } else if (offset < children$1.length) {\n        return point(children$1[offset], 0);\n      } else {\n        var last = children$1[children$1.length - 1];\n        var len = isText(last) ? get$c(last).length : children(last).length;\n        return point(last, len);\n      }\n    };\n\n    var descendOnce$1 = function (element, offset) {\n      return isText(element) ? point(element, offset) : descendOnce(element, offset);\n    };\n    var getAnchorSelection = function (win, anchorInfo) {\n      var getSelection = anchorInfo.getSelection.getOrThunk(function () {\n        return function () {\n          return getExact(win);\n        };\n      });\n      return getSelection().map(function (sel) {\n        var modStart = descendOnce$1(sel.start, sel.soffset);\n        var modFinish = descendOnce$1(sel.finish, sel.foffset);\n        return SimSelection.range(modStart.element, modStart.offset, modFinish.element, modFinish.offset);\n      });\n    };\n    var placement$3 = function (component, anchorInfo, origin) {\n      var win = defaultView(anchorInfo.root).dom;\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      var selectionBox = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        var optRect = getFirstRect$1(win, SimSelection.exactFromRange(sel)).orThunk(function () {\n          var x = SugarElement.fromText(zeroWidth);\n          before(sel.start, x);\n          return getFirstRect$1(win, SimSelection.exact(x, 0, x, 1)).map(function (rect) {\n            remove(x);\n            return rect;\n          });\n        });\n        return optRect.bind(function (rawRect) {\n          return capRect(rawRect.left, rawRect.top, rawRect.width, rawRect.height);\n        });\n      });\n      var targetElement = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        return isElement(sel.start) ? Optional.some(sel.start) : parentNode(sel.start);\n      });\n      var elem = targetElement.getOr(component.element);\n      return calcNewAnchor(selectionBox, rootPoint, anchorInfo, origin, elem);\n    };\n    var SelectionAnchor = [\n      option('getSelection'),\n      strict$1('root'),\n      option('bubble'),\n      schema$1(),\n      defaulted$1('overrides', {}),\n      defaulted$1('showAbove', false),\n      output('placement', placement$3)\n    ];\n\n    var eastX$1 = function (anchor) {\n      return anchor.x + anchor.width;\n    };\n    var westX$1 = function (anchor, element) {\n      return anchor.x - element.width;\n    };\n    var northY$1 = function (anchor, element) {\n      return anchor.y - element.height + anchor.height;\n    };\n    var southY$1 = function (anchor) {\n      return anchor.y;\n    };\n    var southeast$2 = function (anchor, element, bubbles) {\n      return nu$7(eastX$1(anchor), southY$1(anchor), bubbles.southeast(), southeast(), boundsRestriction(anchor, {\n        left: 0,\n        top: 2\n      }), 'link-layout-se');\n    };\n    var southwest$2 = function (anchor, element, bubbles) {\n      return nu$7(westX$1(anchor, element), southY$1(anchor), bubbles.southwest(), southwest(), boundsRestriction(anchor, {\n        right: 1,\n        top: 2\n      }), 'link-layout-sw');\n    };\n    var northeast$2 = function (anchor, element, bubbles) {\n      return nu$7(eastX$1(anchor), northY$1(anchor, element), bubbles.northeast(), northeast(), boundsRestriction(anchor, {\n        left: 0,\n        bottom: 3\n      }), 'link-layout-ne');\n    };\n    var northwest$2 = function (anchor, element, bubbles) {\n      return nu$7(westX$1(anchor, element), northY$1(anchor, element), bubbles.northwest(), northwest(), boundsRestriction(anchor, {\n        right: 1,\n        bottom: 3\n      }), 'link-layout-nw');\n    };\n    var all$3 = function () {\n      return [\n        southeast$2,\n        southwest$2,\n        northeast$2,\n        northwest$2\n      ];\n    };\n    var allRtl$1 = function () {\n      return [\n        southwest$2,\n        southeast$2,\n        northwest$2,\n        northeast$2\n      ];\n    };\n\n    var placement$4 = function (component, submenuInfo, origin) {\n      var anchorBox = toBox(origin, submenuInfo.item.element);\n      var layouts = get$b(component.element, submenuInfo, all$3(), allRtl$1(), all$3(), allRtl$1(), Optional.none());\n      return Optional.some(nu$9({\n        anchorBox: anchorBox,\n        bubble: fallback(),\n        overrides: submenuInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var SubmenuAnchor = [\n      strict$1('item'),\n      schema$1(),\n      defaulted$1('overrides', {}),\n      output('placement', placement$4)\n    ];\n\n    var AnchorSchema = choose$1('anchor', {\n      selection: SelectionAnchor,\n      node: NodeAnchor,\n      hotspot: HotspotAnchor,\n      submenu: SubmenuAnchor,\n      makeshift: MakeshiftAnchor\n    });\n\n    var getFixedOrigin = function () {\n      var html = document.documentElement;\n      return fixed(0, 0, html.clientWidth, html.clientHeight);\n    };\n    var getRelativeOrigin = function (component) {\n      var position = absolute(component.element);\n      var bounds = component.element.dom.getBoundingClientRect();\n      return relative(position.left, position.top, bounds.width, bounds.height);\n    };\n    var place = function (component, origin, anchoring, getBounds, placee) {\n      var anchor = box$1(anchoring.anchorBox, origin);\n      simple(anchor, placee.element, anchoring.bubble, anchoring.layouts, getBounds, anchoring.overrides);\n    };\n    var position$1 = function (component, posConfig, posState, anchor, placee) {\n      positionWithin(component, posConfig, posState, anchor, placee, Optional.none());\n    };\n    var positionWithin = function (component, posConfig, posState, anchor, placee, boxElement) {\n      var boundsBox = boxElement.map(box);\n      return positionWithinBounds(component, posConfig, posState, anchor, placee, boundsBox);\n    };\n    var positionWithinBounds = function (component, posConfig, posState, anchor, placee, bounds) {\n      var anchorage = asRawOrDie('positioning anchor.info', AnchorSchema, anchor);\n      preserve(function () {\n        set$2(placee.element, 'position', 'fixed');\n        var oldVisibility = getRaw(placee.element, 'visibility');\n        set$2(placee.element, 'visibility', 'hidden');\n        var origin = posConfig.useFixed() ? getFixedOrigin() : getRelativeOrigin(component);\n        var placer = anchorage.placement;\n        var getBounds = bounds.map(constant).or(posConfig.getBounds);\n        placer(component, anchorage, origin).each(function (anchoring) {\n          var doPlace = anchoring.placer.getOr(place);\n          doPlace(component, origin, anchoring, getBounds, placee);\n        });\n        oldVisibility.fold(function () {\n          remove$6(placee.element, 'visibility');\n        }, function (vis) {\n          set$2(placee.element, 'visibility', vis);\n        });\n        if (getRaw(placee.element, 'left').isNone() && getRaw(placee.element, 'top').isNone() && getRaw(placee.element, 'right').isNone() && getRaw(placee.element, 'bottom').isNone() && getRaw(placee.element, 'position').is('fixed')) {\n          remove$6(placee.element, 'position');\n        }\n      }, placee.element);\n    };\n    var getMode = function (component, pConfig, _pState) {\n      return pConfig.useFixed() ? 'fixed' : 'absolute';\n    };\n\n    var PositionApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        position: position$1,\n        positionWithin: positionWithin,\n        positionWithinBounds: positionWithinBounds,\n        getMode: getMode\n    });\n\n    var PositionSchema = [\n      defaulted$1('useFixed', never),\n      option('getBounds')\n    ];\n\n    var Positioning = create$1({\n      fields: PositionSchema,\n      name: 'positioning',\n      active: ActivePosition,\n      apis: PositionApis\n    });\n\n    var fireDetaching = function (component) {\n      emit(component, detachedFromDom());\n      var children = component.components();\n      each(children, fireDetaching);\n    };\n    var fireAttaching = function (component) {\n      var children = component.components();\n      each(children, fireAttaching);\n      emit(component, attachedToDom());\n    };\n    var attach = function (parent, child) {\n      append(parent.element, child.element);\n    };\n    var detachChildren = function (component) {\n      each(component.components(), function (childComp) {\n        return remove(childComp.element);\n      });\n      empty(component.element);\n      component.syncComponents();\n    };\n    var replaceChildren = function (component, newChildren) {\n      var subs = component.components();\n      detachChildren(component);\n      var deleted = difference(subs, newChildren);\n      each(deleted, function (comp) {\n        fireDetaching(comp);\n        component.getSystem().removeFromWorld(comp);\n      });\n      each(newChildren, function (childComp) {\n        if (!childComp.getSystem().isConnected()) {\n          component.getSystem().addToWorld(childComp);\n          attach(component, childComp);\n          if (inBody(component.element)) {\n            fireAttaching(childComp);\n          }\n        } else {\n          attach(component, childComp);\n        }\n        component.syncComponents();\n      });\n    };\n\n    var attach$1 = function (parent, child) {\n      attachWith(parent, child, append);\n    };\n    var attachWith = function (parent, child, insertion) {\n      parent.getSystem().addToWorld(child);\n      insertion(parent.element, child.element);\n      if (inBody(parent.element)) {\n        fireAttaching(child);\n      }\n      parent.syncComponents();\n    };\n    var doDetach = function (component) {\n      fireDetaching(component);\n      remove(component.element);\n      component.getSystem().removeFromWorld(component);\n    };\n    var detach = function (component) {\n      var parent$1 = parent(component.element).bind(function (p) {\n        return component.getSystem().getByDom(p).toOptional();\n      });\n      doDetach(component);\n      parent$1.each(function (p) {\n        p.syncComponents();\n      });\n    };\n    var detachChildren$1 = function (component) {\n      var subs = component.components();\n      each(subs, doDetach);\n      empty(component.element);\n      component.syncComponents();\n    };\n    var attachSystem = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, append);\n    };\n    var attachSystemAfter = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, after);\n    };\n    var attachSystemWith = function (element, guiSystem, inserter) {\n      inserter(element, guiSystem.element);\n      var children$1 = children(guiSystem.element);\n      each(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireAttaching);\n      });\n    };\n    var detachSystem = function (guiSystem) {\n      var children$1 = children(guiSystem.element);\n      each(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireDetaching);\n      });\n      remove(guiSystem.element);\n    };\n\n    var rebuild = function (sandbox, sConfig, sState, data) {\n      sState.get().each(function (_data) {\n        detachChildren$1(sandbox);\n      });\n      var point = sConfig.getAttachPoint(sandbox);\n      attach$1(point, sandbox);\n      var built = sandbox.getSystem().build(data);\n      attach$1(sandbox, built);\n      sState.set(built);\n      return built;\n    };\n    var open = function (sandbox, sConfig, sState, data) {\n      var newState = rebuild(sandbox, sConfig, sState, data);\n      sConfig.onOpen(sandbox, newState);\n      return newState;\n    };\n    var setContent = function (sandbox, sConfig, sState, data) {\n      return sState.get().map(function () {\n        return rebuild(sandbox, sConfig, sState, data);\n      });\n    };\n    var openWhileCloaked = function (sandbox, sConfig, sState, data, transaction) {\n      cloak(sandbox, sConfig);\n      open(sandbox, sConfig, sState, data);\n      transaction();\n      decloak(sandbox, sConfig);\n    };\n    var close = function (sandbox, sConfig, sState) {\n      sState.get().each(function (data) {\n        detachChildren$1(sandbox);\n        detach(sandbox);\n        sConfig.onClose(sandbox, data);\n        sState.clear();\n      });\n    };\n    var isOpen = function (_sandbox, _sConfig, sState) {\n      return sState.isOpen();\n    };\n    var isPartOf$1 = function (sandbox, sConfig, sState, queryElem) {\n      return isOpen(sandbox, sConfig, sState) && sState.get().exists(function (data) {\n        return sConfig.isPartOf(sandbox, data, queryElem);\n      });\n    };\n    var getState = function (_sandbox, _sConfig, sState) {\n      return sState.get();\n    };\n    var store = function (sandbox, cssKey, attr, newValue) {\n      getRaw(sandbox.element, cssKey).fold(function () {\n        remove$1(sandbox.element, attr);\n      }, function (v) {\n        set$1(sandbox.element, attr, v);\n      });\n      set$2(sandbox.element, cssKey, newValue);\n    };\n    var restore = function (sandbox, cssKey, attr) {\n      getOpt(sandbox.element, attr).fold(function () {\n        return remove$6(sandbox.element, cssKey);\n      }, function (oldValue) {\n        return set$2(sandbox.element, cssKey, oldValue);\n      });\n    };\n    var cloak = function (sandbox, sConfig, _sState) {\n      var sink = sConfig.getAttachPoint(sandbox);\n      set$2(sandbox.element, 'position', Positioning.getMode(sink));\n      store(sandbox, 'visibility', sConfig.cloakVisibilityAttr, 'hidden');\n    };\n    var hasPosition = function (element) {\n      return exists([\n        'top',\n        'left',\n        'right',\n        'bottom'\n      ], function (pos) {\n        return getRaw(element, pos).isSome();\n      });\n    };\n    var decloak = function (sandbox, sConfig, _sState) {\n      if (!hasPosition(sandbox.element)) {\n        remove$6(sandbox.element, 'position');\n      }\n      restore(sandbox, 'visibility', sConfig.cloakVisibilityAttr);\n    };\n\n    var SandboxApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        cloak: cloak,\n        decloak: decloak,\n        open: open,\n        openWhileCloaked: openWhileCloaked,\n        close: close,\n        isOpen: isOpen,\n        isPartOf: isPartOf$1,\n        getState: getState,\n        setContent: setContent\n    });\n\n    var events$2 = function (sandboxConfig, sandboxState) {\n      return derive([run(sandboxClose(), function (sandbox, _simulatedEvent) {\n          close(sandbox, sandboxConfig, sandboxState);\n        })]);\n    };\n\n    var ActiveSandbox = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$2\n    });\n\n    var SandboxSchema = [\n      onHandler('onOpen'),\n      onHandler('onClose'),\n      strict$1('isPartOf'),\n      strict$1('getAttachPoint'),\n      defaulted$1('cloakVisibilityAttr', 'data-precloak-visibility')\n    ];\n\n    var init = function () {\n      var contents = Cell(Optional.none());\n      var readState = constant('not-implemented');\n      var isOpen = function () {\n        return contents.get().isSome();\n      };\n      var set = function (comp) {\n        contents.set(Optional.some(comp));\n      };\n      var get = function () {\n        return contents.get();\n      };\n      var clear = function () {\n        contents.set(Optional.none());\n      };\n      return nu$5({\n        readState: readState,\n        isOpen: isOpen,\n        clear: clear,\n        set: set,\n        get: get\n      });\n    };\n\n    var SandboxState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init\n    });\n\n    var Sandboxing = create$1({\n      fields: SandboxSchema,\n      name: 'sandboxing',\n      active: ActiveSandbox,\n      apis: SandboxApis,\n      state: SandboxState\n    });\n\n    var dismissPopups = constant('dismiss.popups');\n    var repositionPopups = constant('reposition.popups');\n    var mouseReleased = constant('mouse.released');\n\n    var schema$2 = objOfOnly([\n      defaulted$1('isExtraPart', never),\n      optionObjOf('fireEventInstead', [defaulted$1('event', dismissRequested())])\n    ]);\n    var receivingChannel = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie('Dismissal', schema$2, rawSpec);\n      return _a = {}, _a[dismissPopups()] = {\n        schema: objOfOnly([strict$1('target')]),\n        onReceive: function (sandbox, data) {\n          if (Sandboxing.isOpen(sandbox)) {\n            var isPart = Sandboxing.isPartOf(sandbox, data.target) || detail.isExtraPart(sandbox, data.target);\n            if (!isPart) {\n              detail.fireEventInstead.fold(function () {\n                return Sandboxing.close(sandbox);\n              }, function (fe) {\n                return emit(sandbox, fe.event);\n              });\n            }\n          }\n        }\n      }, _a;\n    };\n\n    var schema$3 = objOfOnly([\n      optionObjOf('fireEventInstead', [defaulted$1('event', repositionRequested())]),\n      strictFunction('doReposition')\n    ]);\n    var receivingChannel$1 = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie('Reposition', schema$3, rawSpec);\n      return _a = {}, _a[repositionPopups()] = {\n        onReceive: function (sandbox) {\n          if (Sandboxing.isOpen(sandbox)) {\n            detail.fireEventInstead.fold(function () {\n              return detail.doReposition(sandbox);\n            }, function (fe) {\n              return emit(sandbox, fe.event);\n            });\n          }\n        }\n      }, _a;\n    };\n\n    var onLoad = function (component, repConfig, repState) {\n      repConfig.store.manager.onLoad(component, repConfig, repState);\n    };\n    var onUnload = function (component, repConfig, repState) {\n      repConfig.store.manager.onUnload(component, repConfig, repState);\n    };\n    var setValue = function (component, repConfig, repState, data) {\n      repConfig.store.manager.setValue(component, repConfig, repState, data);\n    };\n    var getValue = function (component, repConfig, repState) {\n      return repConfig.store.manager.getValue(component, repConfig, repState);\n    };\n    var getState$1 = function (component, repConfig, repState) {\n      return repState;\n    };\n\n    var RepresentApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad,\n        onUnload: onUnload,\n        setValue: setValue,\n        getValue: getValue,\n        getState: getState$1\n    });\n\n    var events$3 = function (repConfig, repState) {\n      var es = repConfig.resetOnDom ? [\n        runOnAttached(function (comp, _se) {\n          onLoad(comp, repConfig, repState);\n        }),\n        runOnDetached(function (comp, _se) {\n          onUnload(comp, repConfig, repState);\n        })\n      ] : [loadEvent(repConfig, repState, onLoad)];\n      return derive(es);\n    };\n\n    var ActiveRepresenting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$3\n    });\n\n    var memory = function () {\n      var data = Cell(null);\n      var readState = function () {\n        return {\n          mode: 'memory',\n          value: data.get()\n        };\n      };\n      var isNotSet = function () {\n        return data.get() === null;\n      };\n      var clear = function () {\n        data.set(null);\n      };\n      return nu$5({\n        set: data.set,\n        get: data.get,\n        isNotSet: isNotSet,\n        clear: clear,\n        readState: readState\n      });\n    };\n    var manual = function () {\n      var readState = noop;\n      return nu$5({ readState: readState });\n    };\n    var dataset = function () {\n      var dataByValue = Cell({});\n      var dataByText = Cell({});\n      var readState = function () {\n        return {\n          mode: 'dataset',\n          dataByValue: dataByValue.get(),\n          dataByText: dataByText.get()\n        };\n      };\n      var clear = function () {\n        dataByValue.set({});\n        dataByText.set({});\n      };\n      var lookup = function (itemString) {\n        return get$1(dataByValue.get(), itemString).orThunk(function () {\n          return get$1(dataByText.get(), itemString);\n        });\n      };\n      var update = function (items) {\n        var currentDataByValue = dataByValue.get();\n        var currentDataByText = dataByText.get();\n        var newDataByValue = {};\n        var newDataByText = {};\n        each(items, function (item) {\n          newDataByValue[item.value] = item;\n          get$1(item, 'meta').each(function (meta) {\n            get$1(meta, 'text').each(function (text) {\n              newDataByText[text] = item;\n            });\n          });\n        });\n        dataByValue.set(__assign(__assign({}, currentDataByValue), newDataByValue));\n        dataByText.set(__assign(__assign({}, currentDataByText), newDataByText));\n      };\n      return nu$5({\n        readState: readState,\n        lookup: lookup,\n        update: update,\n        clear: clear\n      });\n    };\n    var init$1 = function (spec) {\n      return spec.store.manager.state(spec);\n    };\n\n    var RepresentState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        memory: memory,\n        dataset: dataset,\n        manual: manual,\n        init: init$1\n    });\n\n    var setValue$1 = function (component, repConfig, repState, data) {\n      var store = repConfig.store;\n      repState.update([data]);\n      store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue$1 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      var key = store.getDataKey(component);\n      return repState.lookup(key).fold(function () {\n        return store.getFallbackEntry(key);\n      }, function (data) {\n        return data;\n      });\n    };\n    var onLoad$1 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      store.initialValue.each(function (data) {\n        setValue$1(component, repConfig, repState, data);\n      });\n    };\n    var onUnload$1 = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var DatasetStore = [\n      option('initialValue'),\n      strict$1('getFallbackEntry'),\n      strict$1('getDataKey'),\n      strict$1('setValue'),\n      output('manager', {\n        setValue: setValue$1,\n        getValue: getValue$1,\n        onLoad: onLoad$1,\n        onUnload: onUnload$1,\n        state: dataset\n      })\n    ];\n\n    var getValue$2 = function (component, repConfig, _repState) {\n      return repConfig.store.getValue(component);\n    };\n    var setValue$2 = function (component, repConfig, _repState, data) {\n      repConfig.store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var onLoad$2 = function (component, repConfig, _repState) {\n      repConfig.store.initialValue.each(function (data) {\n        repConfig.store.setValue(component, data);\n      });\n    };\n    var ManualStore = [\n      strict$1('getValue'),\n      defaulted$1('setValue', noop),\n      option('initialValue'),\n      output('manager', {\n        setValue: setValue$2,\n        getValue: getValue$2,\n        onLoad: onLoad$2,\n        onUnload: noop,\n        state: NoState.init\n      })\n    ];\n\n    var setValue$3 = function (component, repConfig, repState, data) {\n      repState.set(data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue$3 = function (component, repConfig, repState) {\n      return repState.get();\n    };\n    var onLoad$3 = function (component, repConfig, repState) {\n      repConfig.store.initialValue.each(function (initVal) {\n        if (repState.isNotSet()) {\n          repState.set(initVal);\n        }\n      });\n    };\n    var onUnload$2 = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var MemoryStore = [\n      option('initialValue'),\n      output('manager', {\n        setValue: setValue$3,\n        getValue: getValue$3,\n        onLoad: onLoad$3,\n        onUnload: onUnload$2,\n        state: memory\n      })\n    ];\n\n    var RepresentSchema = [\n      defaultedOf('store', { mode: 'memory' }, choose$1('mode', {\n        memory: MemoryStore,\n        manual: ManualStore,\n        dataset: DatasetStore\n      })),\n      onHandler('onSetValue'),\n      defaulted$1('resetOnDom', false)\n    ];\n\n    var Representing = create$1({\n      fields: RepresentSchema,\n      name: 'representing',\n      active: ActiveRepresenting,\n      apis: RepresentApis,\n      extra: {\n        setValueFrom: function (component, source) {\n          var value = Representing.getValue(source);\n          Representing.setValue(component, value);\n        }\n      },\n      state: RepresentState\n    });\n\n    var field$1 = function (name, forbidden) {\n      return defaultedObjOf(name, {}, map(forbidden, function (f) {\n        return forbid(f.name(), 'Cannot configure ' + f.name() + ' for ' + name);\n      }).concat([state$1('dump', identity)]));\n    };\n    var get$d = function (data) {\n      return data.dump;\n    };\n    var augment = function (data, original) {\n      return __assign(__assign({}, data.dump), derive$1(original));\n    };\n    var SketchBehaviours = {\n      field: field$1,\n      augment: augment,\n      get: get$d\n    };\n\n    var _placeholder = 'placeholder';\n    var adt$9 = Adt.generate([\n      {\n        single: [\n          'required',\n          'valueThunk'\n        ]\n      },\n      {\n        multiple: [\n          'required',\n          'valueThunks'\n        ]\n      }\n    ]);\n    var isSubstituted = function (spec) {\n      return has(spec, 'uiType');\n    };\n    var subPlaceholder = function (owner, detail, compSpec, placeholders) {\n      if (owner.exists(function (o) {\n          return o !== compSpec.owner;\n        })) {\n        return adt$9.single(true, constant(compSpec));\n      }\n      return get$1(placeholders, compSpec.name).fold(function () {\n        throw new Error('Unknown placeholder component: ' + compSpec.name + '\\nKnown: [' + keys(placeholders) + ']\\nNamespace: ' + owner.getOr('none') + '\\nSpec: ' + JSON.stringify(compSpec, null, 2));\n      }, function (newSpec) {\n        return newSpec.replace();\n      });\n    };\n    var scan = function (owner, detail, compSpec, placeholders) {\n      if (isSubstituted(compSpec) && compSpec.uiType === _placeholder) {\n        return subPlaceholder(owner, detail, compSpec, placeholders);\n      } else {\n        return adt$9.single(false, constant(compSpec));\n      }\n    };\n    var substitute = function (owner, detail, compSpec, placeholders) {\n      var base = scan(owner, detail, compSpec, placeholders);\n      return base.fold(function (req, valueThunk) {\n        var value = isSubstituted(compSpec) ? valueThunk(detail, compSpec.config, compSpec.validated) : valueThunk(detail);\n        var childSpecs = get$1(value, 'components').getOr([]);\n        var substituted = bind(childSpecs, function (c) {\n          return substitute(owner, detail, c, placeholders);\n        });\n        return [__assign(__assign({}, value), { components: substituted })];\n      }, function (req, valuesThunk) {\n        if (isSubstituted(compSpec)) {\n          var values = valuesThunk(detail, compSpec.config, compSpec.validated);\n          var preprocessor = compSpec.validated.preprocess.getOr(identity);\n          return preprocessor(values);\n        } else {\n          return valuesThunk(detail);\n        }\n      });\n    };\n    var substituteAll = function (owner, detail, components, placeholders) {\n      return bind(components, function (c) {\n        return substitute(owner, detail, c, placeholders);\n      });\n    };\n    var oneReplace = function (label, replacements) {\n      var called = false;\n      var used = function () {\n        return called;\n      };\n      var replace = function () {\n        if (called) {\n          throw new Error('Trying to use the same placeholder more than once: ' + label);\n        }\n        called = true;\n        return replacements;\n      };\n      var required = function () {\n        return replacements.fold(function (req, _) {\n          return req;\n        }, function (req, _) {\n          return req;\n        });\n      };\n      return {\n        name: constant(label),\n        required: required,\n        used: used,\n        replace: replace\n      };\n    };\n    var substitutePlaces = function (owner, detail, components, placeholders) {\n      var ps = map$2(placeholders, function (ph, name) {\n        return oneReplace(name, ph);\n      });\n      var outcome = substituteAll(owner, detail, components, ps);\n      each$1(ps, function (p) {\n        if (p.used() === false && p.required()) {\n          throw new Error('Placeholder: ' + p.name() + ' was not found in components list\\nNamespace: ' + owner.getOr('none') + '\\nComponents: ' + JSON.stringify(detail.components, null, 2));\n        }\n      });\n      return outcome;\n    };\n    var single = adt$9.single;\n    var multiple = adt$9.multiple;\n    var placeholder = constant(_placeholder);\n\n    var adt$a = Adt.generate([\n      { required: ['data'] },\n      { external: ['data'] },\n      { optional: ['data'] },\n      { group: ['data'] }\n    ]);\n    var fFactory = defaulted$1('factory', { sketch: identity });\n    var fSchema = defaulted$1('schema', []);\n    var fName = strict$1('name');\n    var fPname = field('pname', 'pname', defaultedThunk(function (typeSpec) {\n      return '<alloy.' + generate$1(typeSpec.name) + '>';\n    }), anyValue$1());\n    var fGroupSchema = state$1('schema', function () {\n      return [option('preprocess')];\n    });\n    var fDefaults = defaulted$1('defaults', constant({}));\n    var fOverrides = defaulted$1('overrides', constant({}));\n    var requiredSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var externalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fDefaults,\n      fOverrides\n    ]);\n    var optionalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var groupSpec = objOf([\n      fFactory,\n      fGroupSchema,\n      fName,\n      strict$1('unit'),\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var asNamedPart = function (part) {\n      return part.fold(Optional.some, Optional.none, Optional.some, Optional.some);\n    };\n    var name$1 = function (part) {\n      var get = function (data) {\n        return data.name;\n      };\n      return part.fold(get, get, get, get);\n    };\n    var asCommon = function (part) {\n      return part.fold(identity, identity, identity, identity);\n    };\n    var convert = function (adtConstructor, partSchema) {\n      return function (spec) {\n        var data = asRawOrDie('Converting part type', partSchema, spec);\n        return adtConstructor(data);\n      };\n    };\n    var required = convert(adt$a.required, requiredSpec);\n    var external$1 = convert(adt$a.external, externalSpec);\n    var optional = convert(adt$a.optional, optionalSpec);\n    var group = convert(adt$a.group, groupSpec);\n    var original = constant('entirety');\n\n    var PartType = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        required: required,\n        external: external$1,\n        optional: optional,\n        group: group,\n        asNamedPart: asNamedPart,\n        name: name$1,\n        asCommon: asCommon,\n        original: original\n    });\n\n    var combine$2 = function (detail, data, partSpec, partValidated) {\n      return deepMerge(data.defaults(detail, partSpec, partValidated), partSpec, { uid: detail.partUids[data.name] }, data.overrides(detail, partSpec, partValidated));\n    };\n    var subs = function (owner, detail, parts) {\n      var internals = {};\n      var externals = {};\n      each(parts, function (part) {\n        part.fold(function (data) {\n          internals[data.pname] = single(true, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine$2(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          var partSpec = detail.parts[data.name];\n          externals[data.name] = constant(data.factory.sketch(combine$2(detail, data, partSpec[original()]), partSpec));\n        }, function (data) {\n          internals[data.pname] = single(false, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine$2(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          internals[data.pname] = multiple(true, function (detail, _partSpec, _partValidated) {\n            var units = detail[data.name];\n            return map(units, function (u) {\n              return data.factory.sketch(deepMerge(data.defaults(detail, u, _partValidated), u, data.overrides(detail, u)));\n            });\n          });\n        });\n      });\n      return {\n        internals: constant(internals),\n        externals: constant(externals)\n      };\n    };\n\n    var generate$4 = function (owner, parts) {\n      var r = {};\n      each(parts, function (part) {\n        asNamedPart(part).each(function (np) {\n          var g = doGenerateOne(owner, np.pname);\n          r[np.name] = function (config) {\n            var validated = asRawOrDie('Part: ' + np.name + ' in ' + owner, objOf(np.schema), config);\n            return __assign(__assign({}, g), {\n              config: config,\n              validated: validated\n            });\n          };\n        });\n      });\n      return r;\n    };\n    var doGenerateOne = function (owner, pname) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname\n      };\n    };\n    var generateOne = function (owner, pname, config) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname,\n        config: config,\n        validated: {}\n      };\n    };\n    var schemas = function (parts) {\n      return bind(parts, function (part) {\n        return part.fold(Optional.none, Optional.some, Optional.none, Optional.none).map(function (data) {\n          return strictObjOf(data.name, data.schema.concat([snapshot(original())]));\n        }).toArray();\n      });\n    };\n    var names = function (parts) {\n      return map(parts, name$1);\n    };\n    var substitutes = function (owner, detail, parts) {\n      return subs(owner, detail, parts);\n    };\n    var components = function (owner, detail, internals) {\n      return substitutePlaces(Optional.some(owner), detail, detail.components, internals);\n    };\n    var getPart = function (component, detail, partKey) {\n      var uid = detail.partUids[partKey];\n      return component.getSystem().getByUid(uid).toOptional();\n    };\n    var getPartOrDie = function (component, detail, partKey) {\n      return getPart(component, detail, partKey).getOrDie('Could not find part: ' + partKey);\n    };\n    var getParts = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each(partKeys, function (pk) {\n        r[pk] = constant(system.getByUid(uids[pk]));\n      });\n      return r;\n    };\n    var getAllParts = function (component, detail) {\n      var system = component.getSystem();\n      return map$2(detail.partUids, function (pUid, _k) {\n        return constant(system.getByUid(pUid));\n      });\n    };\n    var getAllPartNames = function (detail) {\n      return keys(detail.partUids);\n    };\n    var getPartsOrDie = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each(partKeys, function (pk) {\n        r[pk] = constant(system.getByUid(uids[pk]).getOrDie());\n      });\n      return r;\n    };\n    var defaultUids = function (baseUid, partTypes) {\n      var partNames = names(partTypes);\n      return wrapAll$1(map(partNames, function (pn) {\n        return {\n          key: pn,\n          value: baseUid + '-' + pn\n        };\n      }));\n    };\n    var defaultUidsSchema = function (partTypes) {\n      return field('partUids', 'partUids', mergeWithThunk(function (spec) {\n        return defaultUids(spec.uid, partTypes);\n      }), anyValue$1());\n    };\n\n    var AlloyParts = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        generate: generate$4,\n        generateOne: generateOne,\n        schemas: schemas,\n        names: names,\n        substitutes: substitutes,\n        components: components,\n        defaultUids: defaultUids,\n        defaultUidsSchema: defaultUidsSchema,\n        getAllParts: getAllParts,\n        getAllPartNames: getAllPartNames,\n        getPart: getPart,\n        getPartOrDie: getPartOrDie,\n        getParts: getParts,\n        getPartsOrDie: getPartsOrDie\n    });\n\n    var base = function (partSchemas, partUidsSchemas) {\n      var ps = partSchemas.length > 0 ? [strictObjOf('parts', partSchemas)] : [];\n      return ps.concat([\n        strict$1('uid'),\n        defaulted$1('dom', {}),\n        defaulted$1('components', []),\n        snapshot('originalSpec'),\n        defaulted$1('debug.sketcher', {})\n      ]).concat(partUidsSchemas);\n    };\n    var asRawOrDie$1 = function (label, schema, spec, partSchemas, partUidsSchemas) {\n      var baseS = base(partSchemas, partUidsSchemas);\n      return asRawOrDie(label + ' [SpecSchema]', objOfOnly(baseS.concat(schema)), spec);\n    };\n\n    var single$1 = function (owner, schema, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var detail = asRawOrDie$1(owner, schema, specWithUid, [], []);\n      return factory(detail, specWithUid);\n    };\n    var composite = function (owner, schema, partTypes, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var partSchemas = schemas(partTypes);\n      var partUidsSchema = defaultUidsSchema(partTypes);\n      var detail = asRawOrDie$1(owner, schema, specWithUid, partSchemas, [partUidsSchema]);\n      var subs = substitutes(owner, detail, partTypes);\n      var components$1 = components(owner, detail, subs.internals());\n      return factory(detail, components$1, specWithUid, subs.externals());\n    };\n    var hasUid = function (spec) {\n      return has(spec, 'uid');\n    };\n    var supplyUid = function (spec) {\n      return hasUid(spec) ? spec : __assign(__assign({}, spec), { uid: generate$2('uid') });\n    };\n\n    var isSketchSpec = function (spec) {\n      return spec.uid !== undefined;\n    };\n    var singleSchema = objOfOnly([\n      strict$1('name'),\n      strict$1('factory'),\n      strict$1('configFields'),\n      defaulted$1('apis', {}),\n      defaulted$1('extraApis', {})\n    ]);\n    var compositeSchema = objOfOnly([\n      strict$1('name'),\n      strict$1('factory'),\n      strict$1('configFields'),\n      strict$1('partFields'),\n      defaulted$1('apis', {}),\n      defaulted$1('extraApis', {})\n    ]);\n    var single$2 = function (rawConfig) {\n      var config = asRawOrDie('Sketcher for ' + rawConfig.name, singleSchema, rawConfig);\n      var sketch = function (spec) {\n        return single$1(config.name, config.configFields, config.factory, spec);\n      };\n      var apis = map$2(config.apis, makeApi);\n      var extraApis = map$2(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: config.name,\n        configFields: config.configFields,\n        sketch: sketch\n      }, apis), extraApis);\n    };\n    var composite$1 = function (rawConfig) {\n      var config = asRawOrDie('Sketcher for ' + rawConfig.name, compositeSchema, rawConfig);\n      var sketch = function (spec) {\n        return composite(config.name, config.configFields, config.partFields, config.factory, spec);\n      };\n      var parts = generate$4(config.name, config.partFields);\n      var apis = map$2(config.apis, makeApi);\n      var extraApis = map$2(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: config.name,\n        partFields: config.partFields,\n        configFields: config.configFields,\n        sketch: sketch,\n        parts: parts\n      }, apis), extraApis);\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var sequence = function (arr) {\n      var r = [];\n      for (var i = 0; i < arr.length; i++) {\n        var x = arr[i];\n        if (x.isSome()) {\n          r.push(x.getOrDie());\n        } else {\n          return Optional.none();\n        }\n      }\n      return Optional.some(r);\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    };\n    var mapFrom = function (a, f) {\n      return a !== undefined && a !== null ? Optional.some(f(a)) : Optional.none();\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var inside = function (target) {\n      return name(target) === 'input' && get$3(target, 'type') !== 'radio' || name(target) === 'textarea';\n    };\n\n    var getCurrent = function (component, composeConfig, _composeState) {\n      return composeConfig.find(component);\n    };\n\n    var ComposeApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCurrent: getCurrent\n    });\n\n    var ComposeSchema = [strict$1('find')];\n\n    var Composing = create$1({\n      fields: ComposeSchema,\n      name: 'composing',\n      apis: ComposeApis\n    });\n\n    var dehighlightAllExcept = function (component, hConfig, hState, skip) {\n      var highlighted = descendants(component.element, '.' + hConfig.highlightClass);\n      each(highlighted, function (h) {\n        if (!exists(skip, function (skipComp) {\n            return skipComp.element === h;\n          })) {\n          remove$4(h, hConfig.highlightClass);\n          component.getSystem().getByDom(h).each(function (target) {\n            hConfig.onDehighlight(component, target);\n            emit(target, dehighlight());\n          });\n        }\n      });\n    };\n    var dehighlightAll = function (component, hConfig, hState) {\n      return dehighlightAllExcept(component, hConfig, hState, []);\n    };\n    var dehighlight$1 = function (component, hConfig, hState, target) {\n      if (isHighlighted(component, hConfig, hState, target)) {\n        remove$4(target.element, hConfig.highlightClass);\n        hConfig.onDehighlight(component, target);\n        emit(target, dehighlight());\n      }\n    };\n    var highlight$1 = function (component, hConfig, hState, target) {\n      dehighlightAllExcept(component, hConfig, hState, [target]);\n      if (!isHighlighted(component, hConfig, hState, target)) {\n        add$2(target.element, hConfig.highlightClass);\n        hConfig.onHighlight(component, target);\n        emit(target, highlight());\n      }\n    };\n    var highlightFirst = function (component, hConfig, hState) {\n      getFirst(component, hConfig).each(function (firstComp) {\n        highlight$1(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightLast = function (component, hConfig, hState) {\n      getLast(component, hConfig).each(function (lastComp) {\n        highlight$1(component, hConfig, hState, lastComp);\n      });\n    };\n    var highlightAt = function (component, hConfig, hState, index) {\n      getByIndex(component, hConfig, hState, index).fold(function (err) {\n        throw err;\n      }, function (firstComp) {\n        highlight$1(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightBy = function (component, hConfig, hState, predicate) {\n      var candidates = getCandidates(component, hConfig);\n      var targetComp = find(candidates, predicate);\n      targetComp.each(function (c) {\n        highlight$1(component, hConfig, hState, c);\n      });\n    };\n    var isHighlighted = function (component, hConfig, hState, queryTarget) {\n      return has$2(queryTarget.element, hConfig.highlightClass);\n    };\n    var getHighlighted = function (component, hConfig, _hState) {\n      return descendant$1(component.element, '.' + hConfig.highlightClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOptional();\n      });\n    };\n    var getByIndex = function (component, hConfig, hState, index) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      return Optional.from(items[index]).fold(function () {\n        return Result.error(new Error('No element found with index ' + index));\n      }, component.getSystem().getByDom);\n    };\n    var getFirst = function (component, hConfig, _hState) {\n      return descendant$1(component.element, '.' + hConfig.itemClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOptional();\n      });\n    };\n    var getLast = function (component, hConfig, _hState) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      var last = items.length > 0 ? Optional.some(items[items.length - 1]) : Optional.none();\n      return last.bind(function (c) {\n        return component.getSystem().getByDom(c).toOptional();\n      });\n    };\n    var getDelta = function (component, hConfig, hState, delta) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      var current = findIndex(items, function (item) {\n        return has$2(item, hConfig.highlightClass);\n      });\n      return current.bind(function (selected) {\n        var dest = cycleBy(selected, delta, 0, items.length - 1);\n        return component.getSystem().getByDom(items[dest]).toOptional();\n      });\n    };\n    var getPrevious = function (component, hConfig, hState) {\n      return getDelta(component, hConfig, hState, -1);\n    };\n    var getNext = function (component, hConfig, hState) {\n      return getDelta(component, hConfig, hState, +1);\n    };\n    var getCandidates = function (component, hConfig, _hState) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      return cat(map(items, function (i) {\n        return component.getSystem().getByDom(i).toOptional();\n      }));\n    };\n\n    var HighlightApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        dehighlightAll: dehighlightAll,\n        dehighlight: dehighlight$1,\n        highlight: highlight$1,\n        highlightFirst: highlightFirst,\n        highlightLast: highlightLast,\n        highlightAt: highlightAt,\n        highlightBy: highlightBy,\n        isHighlighted: isHighlighted,\n        getHighlighted: getHighlighted,\n        getFirst: getFirst,\n        getLast: getLast,\n        getPrevious: getPrevious,\n        getNext: getNext,\n        getCandidates: getCandidates\n    });\n\n    var HighlightSchema = [\n      strict$1('highlightClass'),\n      strict$1('itemClass'),\n      onHandler('onHighlight'),\n      onHandler('onDehighlight')\n    ];\n\n    var Highlighting = create$1({\n      fields: HighlightSchema,\n      name: 'highlighting',\n      apis: HighlightApis\n    });\n\n    var BACKSPACE = [8];\n    var TAB = [9];\n    var ENTER = [13];\n    var ESCAPE = [27];\n    var SPACE = [32];\n    var LEFT = [37];\n    var UP = [38];\n    var RIGHT = [39];\n    var DOWN = [40];\n\n    var cyclePrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      var after = reverse(values.slice(index + 1));\n      return find(before.concat(after), predicate);\n    };\n    var tryPrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      return find(before, predicate);\n    };\n    var cycleNext = function (values, index, predicate) {\n      var before = values.slice(0, index);\n      var after = values.slice(index + 1);\n      return find(after.concat(before), predicate);\n    };\n    var tryNext = function (values, index, predicate) {\n      var after = values.slice(index + 1);\n      return find(after, predicate);\n    };\n\n    var inSet = function (keys) {\n      return function (event) {\n        var raw = event.raw;\n        return contains(keys, raw.which);\n      };\n    };\n    var and = function (preds) {\n      return function (event) {\n        return forall(preds, function (pred) {\n          return pred(event);\n        });\n      };\n    };\n    var isShift = function (event) {\n      var raw = event.raw;\n      return raw.shiftKey === true;\n    };\n    var isControl = function (event) {\n      var raw = event.raw;\n      return raw.ctrlKey === true;\n    };\n    var isNotShift = not(isShift);\n\n    var rule = function (matches, action) {\n      return {\n        matches: matches,\n        classification: action\n      };\n    };\n    var choose$2 = function (transitions, event) {\n      var transition = find(transitions, function (t) {\n        return t.matches(event);\n      });\n      return transition.map(function (t) {\n        return t.classification;\n      });\n    };\n\n    var reportFocusShifting = function (component, prevFocus, newFocus) {\n      var noChange = prevFocus.exists(function (p) {\n        return newFocus.exists(function (n) {\n          return eq$1(n, p);\n        });\n      });\n      if (!noChange) {\n        emitWith(component, focusShifted(), {\n          prevFocus: prevFocus,\n          newFocus: newFocus\n        });\n      }\n    };\n    var dom = function () {\n      var get = function (component) {\n        return search(component.element);\n      };\n      var set = function (component, focusee) {\n        var prevFocus = get(component);\n        component.getSystem().triggerFocus(focusee, component.element);\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n    var highlights = function () {\n      var get = function (component) {\n        return Highlighting.getHighlighted(component).map(function (item) {\n          return item.element;\n        });\n      };\n      var set = function (component, element) {\n        var prevFocus = get(component);\n        component.getSystem().getByDom(element).fold(noop, function (item) {\n          Highlighting.highlight(component, item);\n        });\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var FocusInsideModes;\n    (function (FocusInsideModes) {\n      FocusInsideModes['OnFocusMode'] = 'onFocus';\n      FocusInsideModes['OnEnterOrSpaceMode'] = 'onEnterOrSpace';\n      FocusInsideModes['OnApiMode'] = 'onApi';\n    }(FocusInsideModes || (FocusInsideModes = {})));\n\n    var typical = function (infoSchema, stateInit, getKeydownRules, getKeyupRules, optFocusIn) {\n      var schema = function () {\n        return infoSchema.concat([\n          defaulted$1('focusManager', dom()),\n          defaultedOf('focusInside', 'onFocus', valueOf(function (val) {\n            return contains([\n              'onFocus',\n              'onEnterOrSpace',\n              'onApi'\n            ], val) ? Result.value(val) : Result.error('Invalid value for focusInside');\n          })),\n          output('handler', me),\n          output('state', stateInit),\n          output('sendFocusIn', optFocusIn)\n        ]);\n      };\n      var processKey = function (component, simulatedEvent, getRules, keyingConfig, keyingState) {\n        var rules = getRules(component, simulatedEvent, keyingConfig, keyingState);\n        return choose$2(rules, simulatedEvent.event).bind(function (rule) {\n          return rule(component, simulatedEvent, keyingConfig, keyingState);\n        });\n      };\n      var toEvents = function (keyingConfig, keyingState) {\n        var onFocusHandler = keyingConfig.focusInside !== FocusInsideModes.OnFocusMode ? Optional.none() : optFocusIn(keyingConfig).map(function (focusIn) {\n          return run(focus(), function (component, simulatedEvent) {\n            focusIn(component, keyingConfig, keyingState);\n            simulatedEvent.stop();\n          });\n        });\n        var tryGoInsideComponent = function (component, simulatedEvent) {\n          var isEnterOrSpace = inSet(SPACE.concat(ENTER))(simulatedEvent.event);\n          if (keyingConfig.focusInside === FocusInsideModes.OnEnterOrSpaceMode && isEnterOrSpace && isSource(component, simulatedEvent)) {\n            optFocusIn(keyingConfig).each(function (focusIn) {\n              focusIn(component, keyingConfig, keyingState);\n              simulatedEvent.stop();\n            });\n          }\n        };\n        var keyboardEvents = [\n          run(keydown(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeydownRules, keyingConfig, keyingState).fold(function () {\n              tryGoInsideComponent(component, simulatedEvent);\n            }, function (_) {\n              simulatedEvent.stop();\n            });\n          }),\n          run(keyup(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeyupRules, keyingConfig, keyingState).each(function (_) {\n              simulatedEvent.stop();\n            });\n          })\n        ];\n        return derive(onFocusHandler.toArray().concat(keyboardEvents));\n      };\n      var me = {\n        schema: schema,\n        processKey: processKey,\n        toEvents: toEvents\n      };\n      return me;\n    };\n\n    var create$3 = function (cyclicField) {\n      var schema = [\n        option('onEscape'),\n        option('onEnter'),\n        defaulted$1('selector', '[data-alloy-tabstop=\"true\"]:not(:disabled)'),\n        defaulted$1('firstTabstop', 0),\n        defaulted$1('useTabstopAt', always),\n        option('visibilitySelector')\n      ].concat([cyclicField]);\n      var isVisible = function (tabbingConfig, element) {\n        var target = tabbingConfig.visibilitySelector.bind(function (sel) {\n          return closest$3(element, sel);\n        }).getOr(element);\n        return get$7(target) > 0;\n      };\n      var findInitial = function (component, tabbingConfig) {\n        var tabstops = descendants(component.element, tabbingConfig.selector);\n        var visibles = filter(tabstops, function (elem) {\n          return isVisible(tabbingConfig, elem);\n        });\n        return Optional.from(visibles[tabbingConfig.firstTabstop]);\n      };\n      var findCurrent = function (component, tabbingConfig) {\n        return tabbingConfig.focusManager.get(component).bind(function (elem) {\n          return closest$3(elem, tabbingConfig.selector);\n        });\n      };\n      var isTabstop = function (tabbingConfig, element) {\n        return isVisible(tabbingConfig, element) && tabbingConfig.useTabstopAt(element);\n      };\n      var focusIn = function (component, tabbingConfig, _tabbingState) {\n        findInitial(component, tabbingConfig).each(function (target) {\n          tabbingConfig.focusManager.set(component, target);\n        });\n      };\n      var goFromTabstop = function (component, tabstops, stopIndex, tabbingConfig, cycle) {\n        return cycle(tabstops, stopIndex, function (elem) {\n          return isTabstop(tabbingConfig, elem);\n        }).fold(function () {\n          return tabbingConfig.cyclic ? Optional.some(true) : Optional.none();\n        }, function (target) {\n          tabbingConfig.focusManager.set(component, target);\n          return Optional.some(true);\n        });\n      };\n      var go = function (component, _simulatedEvent, tabbingConfig, cycle) {\n        var tabstops = descendants(component.element, tabbingConfig.selector);\n        return findCurrent(component, tabbingConfig).bind(function (tabstop) {\n          var optStopIndex = findIndex(tabstops, curry(eq$1, tabstop));\n          return optStopIndex.bind(function (stopIndex) {\n            return goFromTabstop(component, tabstops, stopIndex, tabbingConfig, cycle);\n          });\n        });\n      };\n      var goBackwards = function (component, simulatedEvent, tabbingConfig) {\n        var navigate = tabbingConfig.cyclic ? cyclePrev : tryPrev;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var goForwards = function (component, simulatedEvent, tabbingConfig) {\n        var navigate = tabbingConfig.cyclic ? cycleNext : tryNext;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var execute = function (component, simulatedEvent, tabbingConfig) {\n        return tabbingConfig.onEnter.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var exit = function (component, simulatedEvent, tabbingConfig) {\n        return tabbingConfig.onEscape.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var getKeydownRules = constant([\n        rule(and([\n          isShift,\n          inSet(TAB)\n        ]), goBackwards),\n        rule(inSet(TAB), goForwards),\n        rule(inSet(ESCAPE), exit),\n        rule(and([\n          isNotShift,\n          inSet(ENTER)\n        ]), execute)\n      ]);\n      var getKeyupRules = constant([]);\n      return typical(schema, NoState.init, getKeydownRules, getKeyupRules, function () {\n        return Optional.some(focusIn);\n      });\n    };\n\n    var AcyclicType = create$3(state$1('cyclic', never));\n\n    var CyclicType = create$3(state$1('cyclic', always));\n\n    var doDefaultExecute = function (component, _simulatedEvent, focused) {\n      dispatch(component, focused, execute());\n      return Optional.some(true);\n    };\n    var defaultExecute = function (component, simulatedEvent, focused) {\n      var isComplex = inside(focused) && inSet(SPACE)(simulatedEvent.event);\n      return isComplex ? Optional.none() : doDefaultExecute(component, simulatedEvent, focused);\n    };\n    var stopEventForFirefox = function (_component, _simulatedEvent) {\n      return Optional.some(true);\n    };\n\n    var schema$4 = [\n      defaulted$1('execute', defaultExecute),\n      defaulted$1('useSpace', false),\n      defaulted$1('useEnter', true),\n      defaulted$1('useControlEnter', false),\n      defaulted$1('useDown', false)\n    ];\n    var execute$1 = function (component, simulatedEvent, executeConfig) {\n      return executeConfig.execute(component, simulatedEvent, component.element);\n    };\n    var getKeydownRules = function (component, _simulatedEvent, executeConfig, _executeState) {\n      var spaceExec = executeConfig.useSpace && !inside(component.element) ? SPACE : [];\n      var enterExec = executeConfig.useEnter ? ENTER : [];\n      var downExec = executeConfig.useDown ? DOWN : [];\n      var execKeys = spaceExec.concat(enterExec).concat(downExec);\n      return [rule(inSet(execKeys), execute$1)].concat(executeConfig.useControlEnter ? [rule(and([\n          isControl,\n          inSet(ENTER)\n        ]), execute$1)] : []);\n    };\n    var getKeyupRules = function (component, _simulatedEvent, executeConfig, _executeState) {\n      return executeConfig.useSpace && !inside(component.element) ? [rule(inSet(SPACE), stopEventForFirefox)] : [];\n    };\n    var ExecutionType = typical(schema$4, NoState.init, getKeydownRules, getKeyupRules, function () {\n      return Optional.none();\n    });\n\n    var flatgrid = function () {\n      var dimensions = Cell(Optional.none());\n      var setGridSize = function (numRows, numColumns) {\n        dimensions.set(Optional.some({\n          numRows: numRows,\n          numColumns: numColumns\n        }));\n      };\n      var getNumRows = function () {\n        return dimensions.get().map(function (d) {\n          return d.numRows;\n        });\n      };\n      var getNumColumns = function () {\n        return dimensions.get().map(function (d) {\n          return d.numColumns;\n        });\n      };\n      return nu$5({\n        readState: function () {\n          return dimensions.get().map(function (d) {\n            return {\n              numRows: String(d.numRows),\n              numColumns: String(d.numColumns)\n            };\n          }).getOr({\n            numRows: '?',\n            numColumns: '?'\n          });\n        },\n        setGridSize: setGridSize,\n        getNumRows: getNumRows,\n        getNumColumns: getNumColumns\n      });\n    };\n    var init$2 = function (spec) {\n      return spec.state(spec);\n    };\n\n    var KeyingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        flatgrid: flatgrid,\n        init: init$2\n    });\n\n    var useH = function (movement) {\n      return function (component, simulatedEvent, config, state) {\n        var move = movement(component.element);\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var west$2 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveLeft, moveRight);\n      return useH(movement);\n    };\n    var east$2 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveRight, moveLeft);\n      return useH(movement);\n    };\n    var useV = function (move) {\n      return function (component, simulatedEvent, config, state) {\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var use = function (move, component, simulatedEvent, config, state) {\n      var outcome = config.focusManager.get(component).bind(function (focused) {\n        return move(component.element, focused, config, state);\n      });\n      return outcome.map(function (newFocus) {\n        config.focusManager.set(component, newFocus);\n        return true;\n      });\n    };\n    var north$2 = useV;\n    var south$2 = useV;\n    var move = useV;\n\n    var isHidden = function (dom) {\n      return dom.offsetWidth <= 0 && dom.offsetHeight <= 0;\n    };\n    var isVisible = function (element) {\n      return !isHidden(element.dom);\n    };\n\n    var locate = function (candidates, predicate) {\n      return findIndex(candidates, predicate).map(function (index) {\n        return {\n          index: index,\n          candidates: candidates\n        };\n      });\n    };\n\n    var locateVisible = function (container, current, selector) {\n      var predicate = function (x) {\n        return eq$1(x, current);\n      };\n      var candidates = descendants(container, selector);\n      var visible = filter(candidates, isVisible);\n      return locate(visible, predicate);\n    };\n    var findIndex$1 = function (elements, target) {\n      return findIndex(elements, function (elem) {\n        return eq$1(target, elem);\n      });\n    };\n\n    var withGrid = function (values, index, numCols, f) {\n      var oldRow = Math.floor(index / numCols);\n      var oldColumn = index % numCols;\n      return f(oldRow, oldColumn).bind(function (address) {\n        var newIndex = address.row * numCols + address.column;\n        return newIndex >= 0 && newIndex < values.length ? Optional.some(values[newIndex]) : Optional.none();\n      });\n    };\n    var cycleHorizontal = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var onLastRow = oldRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - oldRow * numCols : numCols;\n        var newColumn = cycleBy(oldColumn, delta, 0, colsInRow - 1);\n        return Optional.some({\n          row: oldRow,\n          column: newColumn\n        });\n      });\n    };\n    var cycleVertical = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var newRow = cycleBy(oldRow, delta, 0, numRows - 1);\n        var onLastRow = newRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - newRow * numCols : numCols;\n        var newCol = clamp(oldColumn, 0, colsInRow - 1);\n        return Optional.some({\n          row: newRow,\n          column: newCol\n        });\n      });\n    };\n    var cycleRight = function (values, index, numRows, numCols) {\n      return cycleHorizontal(values, index, numRows, numCols, +1);\n    };\n    var cycleLeft = function (values, index, numRows, numCols) {\n      return cycleHorizontal(values, index, numRows, numCols, -1);\n    };\n    var cycleUp = function (values, index, numRows, numCols) {\n      return cycleVertical(values, index, numRows, numCols, -1);\n    };\n    var cycleDown = function (values, index, numRows, numCols) {\n      return cycleVertical(values, index, numRows, numCols, +1);\n    };\n\n    var schema$5 = [\n      strict$1('selector'),\n      defaulted$1('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted$1('captureTab', false),\n      initSize()\n    ];\n    var focusIn = function (component, gridConfig, _gridState) {\n      descendant$1(component.element, gridConfig.selector).each(function (first) {\n        gridConfig.focusManager.set(component, first);\n      });\n    };\n    var findCurrent = function (component, gridConfig) {\n      return gridConfig.focusManager.get(component).bind(function (elem) {\n        return closest$3(elem, gridConfig.selector);\n      });\n    };\n    var execute$2 = function (component, simulatedEvent, gridConfig, _gridState) {\n      return findCurrent(component, gridConfig).bind(function (focused) {\n        return gridConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var doMove = function (cycle) {\n      return function (element, focused, gridConfig, gridState) {\n        return locateVisible(element, focused, gridConfig.selector).bind(function (identified) {\n          return cycle(identified.candidates, identified.index, gridState.getNumRows().getOr(gridConfig.initSize.numRows), gridState.getNumColumns().getOr(gridConfig.initSize.numColumns));\n        });\n      };\n    };\n    var handleTab = function (_component, _simulatedEvent, gridConfig) {\n      return gridConfig.captureTab ? Optional.some(true) : Optional.none();\n    };\n    var doEscape = function (component, simulatedEvent, gridConfig) {\n      return gridConfig.onEscape(component, simulatedEvent);\n    };\n    var moveLeft = doMove(cycleLeft);\n    var moveRight = doMove(cycleRight);\n    var moveNorth = doMove(cycleUp);\n    var moveSouth = doMove(cycleDown);\n    var getKeydownRules$1 = constant([\n      rule(inSet(LEFT), west$2(moveLeft, moveRight)),\n      rule(inSet(RIGHT), east$2(moveLeft, moveRight)),\n      rule(inSet(UP), north$2(moveNorth)),\n      rule(inSet(DOWN), south$2(moveSouth)),\n      rule(and([\n        isShift,\n        inSet(TAB)\n      ]), handleTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), handleTab),\n      rule(inSet(ESCAPE), doEscape),\n      rule(inSet(SPACE.concat(ENTER)), execute$2)\n    ]);\n    var getKeyupRules$1 = constant([rule(inSet(SPACE), stopEventForFirefox)]);\n    var FlatgridType = typical(schema$5, flatgrid, getKeydownRules$1, getKeyupRules$1, function () {\n      return Optional.some(focusIn);\n    });\n\n    var horizontal = function (container, selector, current, delta) {\n      var isDisabledButton = function (candidate) {\n        return name(candidate) === 'button' && get$3(candidate, 'disabled') === 'disabled';\n      };\n      var tryCycle = function (initial, index, candidates) {\n        var newIndex = cycleBy(index, delta, 0, candidates.length - 1);\n        if (newIndex === initial) {\n          return Optional.none();\n        } else {\n          return isDisabledButton(candidates[newIndex]) ? tryCycle(initial, newIndex, candidates) : Optional.from(candidates[newIndex]);\n        }\n      };\n      return locateVisible(container, current, selector).bind(function (identified) {\n        var index = identified.index;\n        var candidates = identified.candidates;\n        return tryCycle(index, index, candidates);\n      });\n    };\n\n    var schema$6 = [\n      strict$1('selector'),\n      defaulted$1('getInitial', Optional.none),\n      defaulted$1('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted$1('executeOnMove', false),\n      defaulted$1('allowVertical', true)\n    ];\n    var findCurrent$1 = function (component, flowConfig) {\n      return flowConfig.focusManager.get(component).bind(function (elem) {\n        return closest$3(elem, flowConfig.selector);\n      });\n    };\n    var execute$3 = function (component, simulatedEvent, flowConfig) {\n      return findCurrent$1(component, flowConfig).bind(function (focused) {\n        return flowConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn$1 = function (component, flowConfig, _state) {\n      flowConfig.getInitial(component).orThunk(function () {\n        return descendant$1(component.element, flowConfig.selector);\n      }).each(function (first) {\n        flowConfig.focusManager.set(component, first);\n      });\n    };\n    var moveLeft$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveRight$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var doMove$1 = function (movement) {\n      return function (component, simulatedEvent, flowConfig, flowState) {\n        return movement(component, simulatedEvent, flowConfig, flowState).bind(function () {\n          return flowConfig.executeOnMove ? execute$3(component, simulatedEvent, flowConfig) : Optional.some(true);\n        });\n      };\n    };\n    var doEscape$1 = function (component, simulatedEvent, flowConfig) {\n      return flowConfig.onEscape(component, simulatedEvent);\n    };\n    var getKeydownRules$2 = function (_component, _se, flowConfig, _flowState) {\n      var westMovers = LEFT.concat(flowConfig.allowVertical ? UP : []);\n      var eastMovers = RIGHT.concat(flowConfig.allowVertical ? DOWN : []);\n      return [\n        rule(inSet(westMovers), doMove$1(west$2(moveLeft$1, moveRight$1))),\n        rule(inSet(eastMovers), doMove$1(east$2(moveLeft$1, moveRight$1))),\n        rule(inSet(ENTER), execute$3),\n        rule(inSet(SPACE), execute$3),\n        rule(inSet(ESCAPE), doEscape$1)\n      ];\n    };\n    var getKeyupRules$2 = constant([rule(inSet(SPACE), stopEventForFirefox)]);\n    var FlowType = typical(schema$6, NoState.init, getKeydownRules$2, getKeyupRules$2, function () {\n      return Optional.some(focusIn$1);\n    });\n\n    var toCell = function (matrix, rowIndex, columnIndex) {\n      return Optional.from(matrix[rowIndex]).bind(function (row) {\n        return Optional.from(row[columnIndex]).map(function (cell) {\n          return {\n            rowIndex: rowIndex,\n            columnIndex: columnIndex,\n            cell: cell\n          };\n        });\n      });\n    };\n    var cycleHorizontal$1 = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = cycleBy(startCol, deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var cycleVertical$1 = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = cycleBy(startRow, deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = clamp(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var moveHorizontal = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = clamp(startCol + deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var moveVertical = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = clamp(startRow + deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = clamp(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var cycleRight$1 = function (matrix, startRow, startCol) {\n      return cycleHorizontal$1(matrix, startRow, startCol, +1);\n    };\n    var cycleLeft$1 = function (matrix, startRow, startCol) {\n      return cycleHorizontal$1(matrix, startRow, startCol, -1);\n    };\n    var cycleUp$1 = function (matrix, startRow, startCol) {\n      return cycleVertical$1(matrix, startCol, startRow, -1);\n    };\n    var cycleDown$1 = function (matrix, startRow, startCol) {\n      return cycleVertical$1(matrix, startCol, startRow, +1);\n    };\n    var moveLeft$2 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, -1);\n    };\n    var moveRight$2 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, +1);\n    };\n    var moveUp = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, -1);\n    };\n    var moveDown = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, +1);\n    };\n\n    var schema$7 = [\n      strictObjOf('selectors', [\n        strict$1('row'),\n        strict$1('cell')\n      ]),\n      defaulted$1('cycles', true),\n      defaulted$1('previousSelector', Optional.none),\n      defaulted$1('execute', defaultExecute)\n    ];\n    var focusIn$2 = function (component, matrixConfig, _state) {\n      var focused = matrixConfig.previousSelector(component).orThunk(function () {\n        var selectors = matrixConfig.selectors;\n        return descendant$1(component.element, selectors.cell);\n      });\n      focused.each(function (cell) {\n        matrixConfig.focusManager.set(component, cell);\n      });\n    };\n    var execute$4 = function (component, simulatedEvent, matrixConfig) {\n      return search(component.element).bind(function (focused) {\n        return matrixConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var toMatrix = function (rows, matrixConfig) {\n      return map(rows, function (row) {\n        return descendants(row, matrixConfig.selectors.cell);\n      });\n    };\n    var doMove$2 = function (ifCycle, ifMove) {\n      return function (element, focused, matrixConfig) {\n        var move = matrixConfig.cycles ? ifCycle : ifMove;\n        return closest$3(focused, matrixConfig.selectors.row).bind(function (inRow) {\n          var cellsInRow = descendants(inRow, matrixConfig.selectors.cell);\n          return findIndex$1(cellsInRow, focused).bind(function (colIndex) {\n            var allRows = descendants(element, matrixConfig.selectors.row);\n            return findIndex$1(allRows, inRow).bind(function (rowIndex) {\n              var matrix = toMatrix(allRows, matrixConfig);\n              return move(matrix, rowIndex, colIndex).map(function (next) {\n                return next.cell;\n              });\n            });\n          });\n        });\n      };\n    };\n    var moveLeft$3 = doMove$2(cycleLeft$1, moveLeft$2);\n    var moveRight$3 = doMove$2(cycleRight$1, moveRight$2);\n    var moveNorth$1 = doMove$2(cycleUp$1, moveUp);\n    var moveSouth$1 = doMove$2(cycleDown$1, moveDown);\n    var getKeydownRules$3 = constant([\n      rule(inSet(LEFT), west$2(moveLeft$3, moveRight$3)),\n      rule(inSet(RIGHT), east$2(moveLeft$3, moveRight$3)),\n      rule(inSet(UP), north$2(moveNorth$1)),\n      rule(inSet(DOWN), south$2(moveSouth$1)),\n      rule(inSet(SPACE.concat(ENTER)), execute$4)\n    ]);\n    var getKeyupRules$3 = constant([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MatrixType = typical(schema$7, NoState.init, getKeydownRules$3, getKeyupRules$3, function () {\n      return Optional.some(focusIn$2);\n    });\n\n    var schema$8 = [\n      strict$1('selector'),\n      defaulted$1('execute', defaultExecute),\n      defaulted$1('moveOnTab', false)\n    ];\n    var execute$5 = function (component, simulatedEvent, menuConfig) {\n      return menuConfig.focusManager.get(component).bind(function (focused) {\n        return menuConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn$3 = function (component, menuConfig, _state) {\n      descendant$1(component.element, menuConfig.selector).each(function (first) {\n        menuConfig.focusManager.set(component, first);\n      });\n    };\n    var moveUp$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveDown$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var fireShiftTab = function (component, simulatedEvent, menuConfig, menuState) {\n      return menuConfig.moveOnTab ? move(moveUp$1)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    };\n    var fireTab = function (component, simulatedEvent, menuConfig, menuState) {\n      return menuConfig.moveOnTab ? move(moveDown$1)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    };\n    var getKeydownRules$4 = constant([\n      rule(inSet(UP), move(moveUp$1)),\n      rule(inSet(DOWN), move(moveDown$1)),\n      rule(and([\n        isShift,\n        inSet(TAB)\n      ]), fireShiftTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), fireTab),\n      rule(inSet(ENTER), execute$5),\n      rule(inSet(SPACE), execute$5)\n    ]);\n    var getKeyupRules$4 = constant([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MenuType = typical(schema$8, NoState.init, getKeydownRules$4, getKeyupRules$4, function () {\n      return Optional.some(focusIn$3);\n    });\n\n    var schema$9 = [\n      onKeyboardHandler('onSpace'),\n      onKeyboardHandler('onEnter'),\n      onKeyboardHandler('onShiftEnter'),\n      onKeyboardHandler('onLeft'),\n      onKeyboardHandler('onRight'),\n      onKeyboardHandler('onTab'),\n      onKeyboardHandler('onShiftTab'),\n      onKeyboardHandler('onUp'),\n      onKeyboardHandler('onDown'),\n      onKeyboardHandler('onEscape'),\n      defaulted$1('stopSpaceKeyup', false),\n      option('focusIn')\n    ];\n    var getKeydownRules$5 = function (component, simulatedEvent, specialInfo) {\n      return [\n        rule(inSet(SPACE), specialInfo.onSpace),\n        rule(and([\n          isNotShift,\n          inSet(ENTER)\n        ]), specialInfo.onEnter),\n        rule(and([\n          isShift,\n          inSet(ENTER)\n        ]), specialInfo.onShiftEnter),\n        rule(and([\n          isShift,\n          inSet(TAB)\n        ]), specialInfo.onShiftTab),\n        rule(and([\n          isNotShift,\n          inSet(TAB)\n        ]), specialInfo.onTab),\n        rule(inSet(UP), specialInfo.onUp),\n        rule(inSet(DOWN), specialInfo.onDown),\n        rule(inSet(LEFT), specialInfo.onLeft),\n        rule(inSet(RIGHT), specialInfo.onRight),\n        rule(inSet(SPACE), specialInfo.onSpace),\n        rule(inSet(ESCAPE), specialInfo.onEscape)\n      ];\n    };\n    var getKeyupRules$5 = function (component, simulatedEvent, specialInfo) {\n      return specialInfo.stopSpaceKeyup ? [rule(inSet(SPACE), stopEventForFirefox)] : [];\n    };\n    var SpecialType = typical(schema$9, NoState.init, getKeydownRules$5, getKeyupRules$5, function (specialInfo) {\n      return specialInfo.focusIn;\n    });\n\n    var acyclic = AcyclicType.schema();\n    var cyclic = CyclicType.schema();\n    var flow = FlowType.schema();\n    var flatgrid$1 = FlatgridType.schema();\n    var matrix = MatrixType.schema();\n    var execution = ExecutionType.schema();\n    var menu = MenuType.schema();\n    var special = SpecialType.schema();\n\n    var KeyboardBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        acyclic: acyclic,\n        cyclic: cyclic,\n        flow: flow,\n        flatgrid: flatgrid$1,\n        matrix: matrix,\n        execution: execution,\n        menu: menu,\n        special: special\n    });\n\n    var isFlatgridState = function (keyState) {\n      return hasNonNullableKey(keyState, 'setGridSize');\n    };\n    var Keying = createModes$1({\n      branchKey: 'mode',\n      branches: KeyboardBranches,\n      name: 'keying',\n      active: {\n        events: function (keyingConfig, keyingState) {\n          var handler = keyingConfig.handler;\n          return handler.toEvents(keyingConfig, keyingState);\n        }\n      },\n      apis: {\n        focusIn: function (component, keyConfig, keyState) {\n          keyConfig.sendFocusIn(keyConfig).fold(function () {\n            component.getSystem().triggerFocus(component.element, component.element);\n          }, function (sendFocusIn) {\n            sendFocusIn(component, keyConfig, keyState);\n          });\n        },\n        setGridSize: function (component, keyConfig, keyState, numRows, numColumns) {\n          if (!isFlatgridState(keyState)) {\n            console.error('Layout does not support setGridSize');\n          } else {\n            keyState.setGridSize(numRows, numColumns);\n          }\n        }\n      },\n      state: KeyingState\n    });\n\n    var set$5 = function (component, replaceConfig, replaceState, data) {\n      preserve(function () {\n        var newChildren = map(data, component.getSystem().build);\n        replaceChildren(component, newChildren);\n      }, component.element);\n    };\n    var insert = function (component, replaceConfig, insertion, childSpec) {\n      var child = component.getSystem().build(childSpec);\n      attachWith(component, child, insertion);\n    };\n    var append$2 = function (component, replaceConfig, replaceState, appendee) {\n      insert(component, replaceConfig, append, appendee);\n    };\n    var prepend$1 = function (component, replaceConfig, replaceState, prependee) {\n      insert(component, replaceConfig, prepend, prependee);\n    };\n    var remove$7 = function (component, replaceConfig, replaceState, removee) {\n      var children = contents(component);\n      var foundChild = find(children, function (child) {\n        return eq$1(removee.element, child.element);\n      });\n      foundChild.each(detach);\n    };\n    var contents = function (component, _replaceConfig) {\n      return component.components();\n    };\n    var replaceAt = function (component, replaceConfig, replaceState, replaceeIndex, replacer) {\n      var children = contents(component);\n      return Optional.from(children[replaceeIndex]).map(function (replacee) {\n        remove$7(component, replaceConfig, replaceState, replacee);\n        replacer.each(function (r) {\n          insert(component, replaceConfig, function (p, c) {\n            appendAt(p, c, replaceeIndex);\n          }, r);\n        });\n        return replacee;\n      });\n    };\n    var replaceBy = function (component, replaceConfig, replaceState, replaceePred, replacer) {\n      var children = contents(component);\n      return findIndex(children, replaceePred).bind(function (replaceeIndex) {\n        return replaceAt(component, replaceConfig, replaceState, replaceeIndex, replacer);\n      });\n    };\n\n    var ReplaceApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        append: append$2,\n        prepend: prepend$1,\n        remove: remove$7,\n        replaceAt: replaceAt,\n        replaceBy: replaceBy,\n        set: set$5,\n        contents: contents\n    });\n\n    var Replacing = create$1({\n      fields: [],\n      name: 'replacing',\n      apis: ReplaceApis\n    });\n\n    var events$4 = function (name, eventHandlers) {\n      var events = derive(eventHandlers);\n      return create$1({\n        fields: [strict$1('enabled')],\n        name: name,\n        active: { events: constant(events) }\n      });\n    };\n    var config = function (name, eventHandlers) {\n      var me = events$4(name, eventHandlers);\n      return {\n        key: name,\n        value: {\n          config: {},\n          me: me,\n          configAsRaw: constant({}),\n          initialConfig: {},\n          state: NoState\n        }\n      };\n    };\n\n    var focus$2 = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        focus$1(component.element);\n        focusConfig.onFocus(component);\n      }\n    };\n    var blur$1 = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        blur(component.element);\n      }\n    };\n    var isFocused = function (component) {\n      return hasFocus(component.element);\n    };\n\n    var FocusApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        focus: focus$2,\n        blur: blur$1,\n        isFocused: isFocused\n    });\n\n    var exhibit$1 = function (base, focusConfig) {\n      var mod = focusConfig.ignore ? {} : { attributes: { tabindex: '-1' } };\n      return nu$6(mod);\n    };\n    var events$5 = function (focusConfig) {\n      return derive([run(focus(), function (component, simulatedEvent) {\n          focus$2(component, focusConfig);\n          simulatedEvent.stop();\n        })].concat(focusConfig.stopMousedown ? [run(mousedown(), function (_, simulatedEvent) {\n          simulatedEvent.event.prevent();\n        })] : []));\n    };\n\n    var ActiveFocus = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$1,\n        events: events$5\n    });\n\n    var FocusSchema = [\n      onHandler('onFocus'),\n      defaulted$1('stopMousedown', false),\n      defaulted$1('ignore', false)\n    ];\n\n    var Focusing = create$1({\n      fields: FocusSchema,\n      name: 'focusing',\n      active: ActiveFocus,\n      apis: FocusApis\n    });\n\n    var SetupBehaviourCellState = function (initialState) {\n      var init = function () {\n        var cell = Cell(initialState);\n        var get = function () {\n          return cell.get();\n        };\n        var set = function (newState) {\n          return cell.set(newState);\n        };\n        var clear = function () {\n          return cell.set(initialState);\n        };\n        var readState = function () {\n          return cell.get();\n        };\n        return {\n          get: get,\n          set: set,\n          clear: clear,\n          readState: readState\n        };\n      };\n      return { init: init };\n    };\n\n    var updateAriaState = function (component, toggleConfig, toggleState) {\n      var ariaInfo = toggleConfig.aria;\n      ariaInfo.update(component, ariaInfo, toggleState.get());\n    };\n    var updateClass = function (component, toggleConfig, toggleState) {\n      toggleConfig.toggleClass.each(function (toggleClass) {\n        if (toggleState.get()) {\n          add$2(component.element, toggleClass);\n        } else {\n          remove$4(component.element, toggleClass);\n        }\n      });\n    };\n    var toggle = function (component, toggleConfig, toggleState) {\n      set$6(component, toggleConfig, toggleState, !toggleState.get());\n    };\n    var on$1 = function (component, toggleConfig, toggleState) {\n      toggleState.set(true);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var off = function (component, toggleConfig, toggleState) {\n      toggleState.set(false);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var set$6 = function (component, toggleConfig, toggleState, state) {\n      var action = state ? on$1 : off;\n      action(component, toggleConfig, toggleState);\n    };\n    var isOn = function (component, toggleConfig, toggleState) {\n      return toggleState.get();\n    };\n    var onLoad$4 = function (component, toggleConfig, toggleState) {\n      set$6(component, toggleConfig, toggleState, toggleConfig.selected);\n    };\n\n    var ToggleApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad$4,\n        toggle: toggle,\n        isOn: isOn,\n        on: on$1,\n        off: off,\n        set: set$6\n    });\n\n    var exhibit$2 = function () {\n      return nu$6({});\n    };\n    var events$6 = function (toggleConfig, toggleState) {\n      var execute = executeEvent(toggleConfig, toggleState, toggle);\n      var load = loadEvent(toggleConfig, toggleState, onLoad$4);\n      return derive(flatten([\n        toggleConfig.toggleOnExecute ? [execute] : [],\n        [load]\n      ]));\n    };\n\n    var ActiveToggle = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$2,\n        events: events$6\n    });\n\n    var updatePressed = function (component, ariaInfo, status) {\n      set$1(component.element, 'aria-pressed', status);\n      if (ariaInfo.syncWithExpanded) {\n        updateExpanded(component, ariaInfo, status);\n      }\n    };\n    var updateSelected = function (component, ariaInfo, status) {\n      set$1(component.element, 'aria-selected', status);\n    };\n    var updateChecked = function (component, ariaInfo, status) {\n      set$1(component.element, 'aria-checked', status);\n    };\n    var updateExpanded = function (component, ariaInfo, status) {\n      set$1(component.element, 'aria-expanded', status);\n    };\n\n    var ToggleSchema = [\n      defaulted$1('selected', false),\n      option('toggleClass'),\n      defaulted$1('toggleOnExecute', true),\n      defaultedOf('aria', { mode: 'none' }, choose$1('mode', {\n        pressed: [\n          defaulted$1('syncWithExpanded', false),\n          output('update', updatePressed)\n        ],\n        checked: [output('update', updateChecked)],\n        expanded: [output('update', updateExpanded)],\n        selected: [output('update', updateSelected)],\n        none: [output('update', noop)]\n      }))\n    ];\n\n    var Toggling = create$1({\n      fields: ToggleSchema,\n      name: 'toggling',\n      active: ActiveToggle,\n      apis: ToggleApis,\n      state: SetupBehaviourCellState(false)\n    });\n\n    var pointerEvents = function () {\n      var onClick = function (component, simulatedEvent) {\n        simulatedEvent.stop();\n        emitExecute(component);\n      };\n      return [\n        run(click(), onClick),\n        run(tap(), onClick),\n        cutter(touchstart()),\n        cutter(mousedown())\n      ];\n    };\n    var events$7 = function (optAction) {\n      var executeHandler = function (action) {\n        return runOnExecute(function (component, simulatedEvent) {\n          action(component);\n          simulatedEvent.stop();\n        });\n      };\n      return derive(flatten([\n        optAction.map(executeHandler).toArray(),\n        pointerEvents()\n      ]));\n    };\n\n    var hoverEvent = 'alloy.item-hover';\n    var focusEvent = 'alloy.item-focus';\n    var onHover = function (item) {\n      if (search(item.element).isNone() || Focusing.isFocused(item)) {\n        if (!Focusing.isFocused(item)) {\n          Focusing.focus(item);\n        }\n        emitWith(item, hoverEvent, { item: item });\n      }\n    };\n    var onFocus = function (item) {\n      emitWith(item, focusEvent, { item: item });\n    };\n    var hover = constant(hoverEvent);\n    var focus$3 = constant(focusEvent);\n\n    var builder = function (detail) {\n      return {\n        dom: detail.dom,\n        domModification: __assign(__assign({}, detail.domModification), { attributes: __assign(__assign(__assign({ 'role': detail.toggling.isSome() ? 'menuitemcheckbox' : 'menuitem' }, detail.domModification.attributes), { 'aria-haspopup': detail.hasSubmenu }), detail.hasSubmenu ? { 'aria-expanded': false } : {}) }),\n        behaviours: SketchBehaviours.augment(detail.itemBehaviours, [\n          detail.toggling.fold(Toggling.revoke, function (tConfig) {\n            return Toggling.config(__assign({ aria: { mode: 'checked' } }, tConfig));\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            stopMousedown: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus(component);\n            }\n          }),\n          Keying.config({ mode: 'execution' }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          config('item-type-events', __spreadArrays(pointerEvents(), [\n            run(mouseover(), onHover),\n            run(focusItem(), Focusing.focus)\n          ]))\n        ]),\n        components: detail.components,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var schema$a = [\n      strict$1('data'),\n      strict$1('components'),\n      strict$1('dom'),\n      defaulted$1('hasSubmenu', false),\n      option('toggling'),\n      SketchBehaviours.field('itemBehaviours', [\n        Toggling,\n        Focusing,\n        Keying,\n        Representing\n      ]),\n      defaulted$1('ignoreFocus', false),\n      defaulted$1('domModification', {}),\n      output('builder', builder),\n      defaulted$1('eventOrder', {})\n    ];\n\n    var builder$1 = function (detail) {\n      return {\n        dom: detail.dom,\n        components: detail.components,\n        events: derive([stopper(focusItem())])\n      };\n    };\n    var schema$b = [\n      strict$1('dom'),\n      strict$1('components'),\n      output('builder', builder$1)\n    ];\n\n    var owner$2 = constant('item-widget');\n    var parts = constant([required({\n        name: 'widget',\n        overrides: function (detail) {\n          return {\n            behaviours: derive$1([Representing.config({\n                store: {\n                  mode: 'manual',\n                  getValue: function (_component) {\n                    return detail.data;\n                  },\n                  setValue: noop\n                }\n              })])\n          };\n        }\n      })]);\n\n    var builder$2 = function (detail) {\n      var subs = substitutes(owner$2(), detail, parts());\n      var components$1 = components(owner$2(), detail, subs.internals());\n      var focusWidget = function (component) {\n        return getPart(component, detail, 'widget').map(function (widget) {\n          Keying.focusIn(widget);\n          return widget;\n        });\n      };\n      var onHorizontalArrow = function (component, simulatedEvent) {\n        return inside(simulatedEvent.event.target) ? Optional.none() : function () {\n          if (detail.autofocus) {\n            simulatedEvent.setSource(component.element);\n            return Optional.none();\n          } else {\n            return Optional.none();\n          }\n        }();\n      };\n      return {\n        dom: detail.dom,\n        components: components$1,\n        domModification: detail.domModification,\n        events: derive([\n          runOnExecute(function (component, simulatedEvent) {\n            focusWidget(component).each(function (_widget) {\n              simulatedEvent.stop();\n            });\n          }),\n          run(mouseover(), onHover),\n          run(focusItem(), function (component, _simulatedEvent) {\n            if (detail.autofocus) {\n              focusWidget(component);\n            } else {\n              Focusing.focus(component);\n            }\n          })\n        ]),\n        behaviours: SketchBehaviours.augment(detail.widgetBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus(component);\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            focusIn: detail.autofocus ? function (component) {\n              focusWidget(component);\n            } : revoke(),\n            onLeft: onHorizontalArrow,\n            onRight: onHorizontalArrow,\n            onEscape: function (component, simulatedEvent) {\n              if (!Focusing.isFocused(component) && !detail.autofocus) {\n                Focusing.focus(component);\n                return Optional.some(true);\n              } else if (detail.autofocus) {\n                simulatedEvent.setSource(component.element);\n                return Optional.none();\n              } else {\n                return Optional.none();\n              }\n            }\n          })\n        ])\n      };\n    };\n    var schema$c = [\n      strict$1('uid'),\n      strict$1('data'),\n      strict$1('components'),\n      strict$1('dom'),\n      defaulted$1('autofocus', false),\n      defaulted$1('ignoreFocus', false),\n      SketchBehaviours.field('widgetBehaviours', [\n        Representing,\n        Focusing,\n        Keying\n      ]),\n      defaulted$1('domModification', {}),\n      defaultUidsSchema(parts()),\n      output('builder', builder$2)\n    ];\n\n    var itemSchema$1 = choose$1('type', {\n      widget: schema$c,\n      item: schema$a,\n      separator: schema$b\n    });\n    var configureGrid = function (detail, movementInfo) {\n      return {\n        mode: 'flatgrid',\n        selector: '.' + detail.markers.item,\n        initSize: {\n          numColumns: movementInfo.initSize.numColumns,\n          numRows: movementInfo.initSize.numRows\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMatrix = function (detail, movementInfo) {\n      return {\n        mode: 'matrix',\n        selectors: {\n          row: movementInfo.rowSelector,\n          cell: '.' + detail.markers.item\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMenu = function (detail, movementInfo) {\n      return {\n        mode: 'menu',\n        selector: '.' + detail.markers.item,\n        moveOnTab: movementInfo.moveOnTab,\n        focusManager: detail.focusManager\n      };\n    };\n    var parts$1 = constant([group({\n        factory: {\n          sketch: function (spec) {\n            var itemInfo = asRawOrDie('menu.spec item', itemSchema$1, spec);\n            return itemInfo.builder(itemInfo);\n          }\n        },\n        name: 'items',\n        unit: 'item',\n        defaults: function (detail, u) {\n          return u.hasOwnProperty('uid') ? u : __assign(__assign({}, u), { uid: generate$2('item') });\n        },\n        overrides: function (detail, u) {\n          return {\n            type: u.type,\n            ignoreFocus: detail.fakeFocus,\n            domModification: { classes: [detail.markers.item] }\n          };\n        }\n      })]);\n    var schema$d = constant([\n      strict$1('value'),\n      strict$1('items'),\n      strict$1('dom'),\n      strict$1('components'),\n      defaulted$1('eventOrder', {}),\n      field$1('menuBehaviours', [\n        Highlighting,\n        Representing,\n        Composing,\n        Keying\n      ]),\n      defaultedOf('movement', {\n        mode: 'menu',\n        moveOnTab: true\n      }, choose$1('mode', {\n        grid: [\n          initSize(),\n          output('config', configureGrid)\n        ],\n        matrix: [\n          output('config', configureMatrix),\n          strict$1('rowSelector')\n        ],\n        menu: [\n          defaulted$1('moveOnTab', true),\n          output('config', configureMenu)\n        ]\n      })),\n      itemMarkers(),\n      defaulted$1('fakeFocus', false),\n      defaulted$1('focusManager', dom()),\n      onHandler('onHighlight')\n    ]);\n\n    var focus$4 = constant('alloy.menu-focus');\n\n    var make$1 = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.menuBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedItem,\n            itemClass: detail.markers.item,\n            onHighlight: detail.onHighlight\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          }),\n          Composing.config({ find: Optional.some }),\n          Keying.config(detail.movement.config(detail, detail.movement))\n        ]),\n        events: derive([\n          run(focus$3(), function (menu, simulatedEvent) {\n            var event = simulatedEvent.event;\n            menu.getSystem().getByDom(event.target).each(function (item) {\n              Highlighting.highlight(menu, item);\n              simulatedEvent.stop();\n              emitWith(menu, focus$4(), {\n                menu: menu,\n                item: item\n              });\n            });\n          }),\n          run(hover(), function (menu, simulatedEvent) {\n            var item = simulatedEvent.event.item;\n            Highlighting.highlight(menu, item);\n          })\n        ]),\n        components: components,\n        eventOrder: detail.eventOrder,\n        domModification: { attributes: { role: 'menu' } }\n      };\n    };\n\n    var Menu = composite$1({\n      name: 'Menu',\n      configFields: schema$d(),\n      partFields: parts$1(),\n      factory: make$1\n    });\n\n    var transpose = function (obj) {\n      return tupleMap(obj, function (v, k) {\n        return {\n          k: v,\n          v: k\n        };\n      });\n    };\n    var trace = function (items, byItem, byMenu, finish) {\n      return get$1(byMenu, finish).bind(function (triggerItem) {\n        return get$1(items, triggerItem).bind(function (triggerMenu) {\n          var rest = trace(items, byItem, byMenu, triggerMenu);\n          return Optional.some([triggerMenu].concat(rest));\n        });\n      }).getOr([]);\n    };\n    var generate$5 = function (menus, expansions) {\n      var items = {};\n      each$1(menus, function (menuItems, menu) {\n        each(menuItems, function (item) {\n          items[item] = menu;\n        });\n      });\n      var byItem = expansions;\n      var byMenu = transpose(expansions);\n      var menuPaths = map$2(byMenu, function (_triggerItem, submenu) {\n        return [submenu].concat(trace(items, byItem, byMenu, submenu));\n      });\n      return map$2(items, function (menu) {\n        return get$1(menuPaths, menu).getOr([menu]);\n      });\n    };\n\n    var init$3 = function () {\n      var expansions = Cell({});\n      var menus = Cell({});\n      var paths = Cell({});\n      var primary = Cell(Optional.none());\n      var directory = Cell({});\n      var clear = function () {\n        expansions.set({});\n        menus.set({});\n        paths.set({});\n        primary.set(Optional.none());\n      };\n      var isClear = function () {\n        return primary.get().isNone();\n      };\n      var setMenuBuilt = function (menuName, built) {\n        var _a;\n        menus.set(__assign(__assign({}, menus.get()), (_a = {}, _a[menuName] = {\n          type: 'prepared',\n          menu: built\n        }, _a)));\n      };\n      var setContents = function (sPrimary, sMenus, sExpansions, dir) {\n        primary.set(Optional.some(sPrimary));\n        expansions.set(sExpansions);\n        menus.set(sMenus);\n        directory.set(dir);\n        var sPaths = generate$5(dir, sExpansions);\n        paths.set(sPaths);\n      };\n      var getTriggeringItem = function (menuValue) {\n        return find$1(expansions.get(), function (v, _k) {\n          return v === menuValue;\n        });\n      };\n      var getTriggerData = function (menuValue, getItemByValue, path) {\n        return getPreparedMenu(menuValue).bind(function (menu) {\n          return getTriggeringItem(menuValue).bind(function (triggeringItemValue) {\n            return getItemByValue(triggeringItemValue).map(function (triggeredItem) {\n              return {\n                triggeredMenu: menu,\n                triggeringItem: triggeredItem,\n                triggeringPath: path\n              };\n            });\n          });\n        });\n      };\n      var getTriggeringPath = function (itemValue, getItemByValue) {\n        var extraPath = filter(lookupItem(itemValue).toArray(), function (menuValue) {\n          return getPreparedMenu(menuValue).isSome();\n        });\n        return get$1(paths.get(), itemValue).bind(function (path) {\n          var revPath = reverse(extraPath.concat(path));\n          var triggers = bind(revPath, function (menuValue, menuIndex) {\n            return getTriggerData(menuValue, getItemByValue, revPath.slice(0, menuIndex + 1)).fold(function () {\n              return primary.get().is(menuValue) ? [] : [Optional.none()];\n            }, function (data) {\n              return [Optional.some(data)];\n            });\n          });\n          return sequence(triggers);\n        });\n      };\n      var expand = function (itemValue) {\n        return get$1(expansions.get(), itemValue).map(function (menu) {\n          var current = get$1(paths.get(), itemValue).getOr([]);\n          return [menu].concat(current);\n        });\n      };\n      var collapse = function (itemValue) {\n        return get$1(paths.get(), itemValue).bind(function (path) {\n          return path.length > 1 ? Optional.some(path.slice(1)) : Optional.none();\n        });\n      };\n      var refresh = function (itemValue) {\n        return get$1(paths.get(), itemValue);\n      };\n      var getPreparedMenu = function (menuValue) {\n        return lookupMenu(menuValue).bind(extractPreparedMenu);\n      };\n      var lookupMenu = function (menuValue) {\n        return get$1(menus.get(), menuValue);\n      };\n      var lookupItem = function (itemValue) {\n        return get$1(expansions.get(), itemValue);\n      };\n      var otherMenus = function (path) {\n        var menuValues = directory.get();\n        return difference(keys(menuValues), path);\n      };\n      var getPrimary = function () {\n        return primary.get().bind(getPreparedMenu);\n      };\n      var getMenus = function () {\n        return menus.get();\n      };\n      return {\n        setMenuBuilt: setMenuBuilt,\n        setContents: setContents,\n        expand: expand,\n        refresh: refresh,\n        collapse: collapse,\n        lookupMenu: lookupMenu,\n        lookupItem: lookupItem,\n        otherMenus: otherMenus,\n        getPrimary: getPrimary,\n        getMenus: getMenus,\n        clear: clear,\n        isClear: isClear,\n        getTriggeringPath: getTriggeringPath\n      };\n    };\n    var extractPreparedMenu = function (prep) {\n      return prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none();\n    };\n    var LayeredState = {\n      init: init$3,\n      extractPreparedMenu: extractPreparedMenu\n    };\n\n    var make$2 = function (detail, _rawUiSpec) {\n      var submenuParentItems = Cell(Optional.none());\n      var buildMenus = function (container, primaryName, menus) {\n        return map$2(menus, function (spec, name) {\n          var makeSketch = function () {\n            return Menu.sketch(__assign(__assign({}, spec), {\n              value: name,\n              markers: detail.markers,\n              fakeFocus: detail.fakeFocus,\n              onHighlight: detail.onHighlight,\n              focusManager: detail.fakeFocus ? highlights() : dom()\n            }));\n          };\n          return name === primaryName ? {\n            type: 'prepared',\n            menu: container.getSystem().build(makeSketch())\n          } : {\n            type: 'notbuilt',\n            nbMenu: makeSketch\n          };\n        });\n      };\n      var layeredState = LayeredState.init();\n      var setup = function (container) {\n        var componentMap = buildMenus(container, detail.data.primary, detail.data.menus);\n        var directory = toDirectory();\n        layeredState.setContents(detail.data.primary, componentMap, detail.data.expansions, directory);\n        return layeredState.getPrimary();\n      };\n      var getItemValue = function (item) {\n        return Representing.getValue(item).value;\n      };\n      var getItemByValue = function (_container, menus, itemValue) {\n        return findMap(menus, function (menu) {\n          if (!menu.getSystem().isConnected()) {\n            return Optional.none();\n          }\n          var candidates = Highlighting.getCandidates(menu);\n          return find(candidates, function (c) {\n            return getItemValue(c) === itemValue;\n          });\n        });\n      };\n      var toDirectory = function (_container) {\n        return map$2(detail.data.menus, function (data, _menuName) {\n          return bind(data.items, function (item) {\n            return item.type === 'separator' ? [] : [item.data.value];\n          });\n        });\n      };\n      var setActiveMenu = function (container, menu) {\n        Highlighting.highlight(container, menu);\n        Highlighting.getHighlighted(menu).orThunk(function () {\n          return Highlighting.getFirst(menu);\n        }).each(function (item) {\n          dispatch(container, item.element, focusItem());\n        });\n      };\n      var getMenus = function (state, menuValues) {\n        return cat(map(menuValues, function (mv) {\n          return state.lookupMenu(mv).bind(function (prep) {\n            return prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none();\n          });\n        }));\n      };\n      var closeOthers = function (container, state, path) {\n        var others = getMenus(state, state.otherMenus(path));\n        each(others, function (o) {\n          remove$5(o.element, [detail.markers.backgroundMenu]);\n          if (!detail.stayInDom) {\n            Replacing.remove(container, o);\n          }\n        });\n      };\n      var getSubmenuParents = function (container) {\n        return submenuParentItems.get().getOrThunk(function () {\n          var r = {};\n          var items = descendants(container.element, '.' + detail.markers.item);\n          var parentItems = filter(items, function (i) {\n            return get$3(i, 'aria-haspopup') === 'true';\n          });\n          each(parentItems, function (i) {\n            container.getSystem().getByDom(i).each(function (itemComp) {\n              var key = getItemValue(itemComp);\n              r[key] = itemComp;\n            });\n          });\n          submenuParentItems.set(Optional.some(r));\n          return r;\n        });\n      };\n      var updateAriaExpansions = function (container, path) {\n        var parentItems = getSubmenuParents(container);\n        each$1(parentItems, function (v, k) {\n          var expanded = contains(path, k);\n          set$1(v.element, 'aria-expanded', expanded);\n        });\n      };\n      var updateMenuPath = function (container, state, path) {\n        return Optional.from(path[0]).bind(function (latestMenuName) {\n          return state.lookupMenu(latestMenuName).bind(function (menuPrep) {\n            if (menuPrep.type === 'notbuilt') {\n              return Optional.none();\n            } else {\n              var activeMenu = menuPrep.menu;\n              var rest = getMenus(state, path.slice(1));\n              each(rest, function (r) {\n                add$2(r.element, detail.markers.backgroundMenu);\n              });\n              if (!inBody(activeMenu.element)) {\n                Replacing.append(container, premade$1(activeMenu));\n              }\n              remove$5(activeMenu.element, [detail.markers.backgroundMenu]);\n              setActiveMenu(container, activeMenu);\n              closeOthers(container, state, path);\n              return Optional.some(activeMenu);\n            }\n          });\n        });\n      };\n      var ExpandHighlightDecision;\n      (function (ExpandHighlightDecision) {\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightSubmenu'] = 0] = 'HighlightSubmenu';\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightParent'] = 1] = 'HighlightParent';\n      }(ExpandHighlightDecision || (ExpandHighlightDecision = {})));\n      var buildIfRequired = function (container, menuName, menuPrep) {\n        if (menuPrep.type === 'notbuilt') {\n          var menu = container.getSystem().build(menuPrep.nbMenu());\n          layeredState.setMenuBuilt(menuName, menu);\n          return menu;\n        } else {\n          return menuPrep.menu;\n        }\n      };\n      var expandRight = function (container, item, decision) {\n        if (decision === void 0) {\n          decision = ExpandHighlightDecision.HighlightSubmenu;\n        }\n        var value = getItemValue(item);\n        return layeredState.expand(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return Optional.from(path[0]).bind(function (menuName) {\n            return layeredState.lookupMenu(menuName).bind(function (activeMenuPrep) {\n              var activeMenu = buildIfRequired(container, menuName, activeMenuPrep);\n              if (!inBody(activeMenu.element)) {\n                Replacing.append(container, premade$1(activeMenu));\n              }\n              detail.onOpenSubmenu(container, item, activeMenu, reverse(path));\n              if (decision === ExpandHighlightDecision.HighlightSubmenu) {\n                Highlighting.highlightFirst(activeMenu);\n                return updateMenuPath(container, layeredState, path);\n              } else {\n                Highlighting.dehighlightAll(activeMenu);\n                return Optional.some(item);\n              }\n            });\n          });\n        });\n      };\n      var collapseLeft = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.collapse(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path).map(function (activeMenu) {\n            detail.onCollapseMenu(container, item, activeMenu);\n            return activeMenu;\n          });\n        });\n      };\n      var updateView = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.refresh(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path);\n        });\n      };\n      var onRight = function (container, item) {\n        return inside(item.element) ? Optional.none() : expandRight(container, item, ExpandHighlightDecision.HighlightSubmenu);\n      };\n      var onLeft = function (container, item) {\n        return inside(item.element) ? Optional.none() : collapseLeft(container, item);\n      };\n      var onEscape = function (container, item) {\n        return collapseLeft(container, item).orThunk(function () {\n          return detail.onEscape(container, item).map(function () {\n            return container;\n          });\n        });\n      };\n      var keyOnItem = function (f) {\n        return function (container, simulatedEvent) {\n          return closest$3(simulatedEvent.getSource(), '.' + detail.markers.item).bind(function (target) {\n            return container.getSystem().getByDom(target).toOptional().bind(function (item) {\n              return f(container, item).map(always);\n            });\n          });\n        };\n      };\n      var events = derive([\n        run(focus$4(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event.item;\n          layeredState.lookupItem(getItemValue(item)).each(function () {\n            var menu = simulatedEvent.event.menu;\n            Highlighting.highlight(sandbox, menu);\n            var value = getItemValue(simulatedEvent.event.item);\n            layeredState.refresh(value).each(function (path) {\n              return closeOthers(sandbox, layeredState, path);\n            });\n          });\n        }),\n        runOnExecute(function (component, simulatedEvent) {\n          var target = simulatedEvent.event.target;\n          component.getSystem().getByDom(target).each(function (item) {\n            var itemValue = getItemValue(item);\n            if (itemValue.indexOf('collapse-item') === 0) {\n              collapseLeft(component, item);\n            }\n            expandRight(component, item, ExpandHighlightDecision.HighlightSubmenu).fold(function () {\n              detail.onExecute(component, item);\n            }, noop);\n          });\n        }),\n        runOnAttached(function (container, _simulatedEvent) {\n          setup(container).each(function (primary) {\n            Replacing.append(container, premade$1(primary));\n            detail.onOpenMenu(container, primary);\n            if (detail.highlightImmediately) {\n              setActiveMenu(container, primary);\n            }\n          });\n        })\n      ].concat(detail.navigateOnHover ? [run(hover(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event.item;\n          updateView(sandbox, item);\n          expandRight(sandbox, item, ExpandHighlightDecision.HighlightParent);\n          detail.onHover(sandbox, item);\n        })] : []));\n      var getActiveItem = function (container) {\n        return Highlighting.getHighlighted(container).bind(Highlighting.getHighlighted);\n      };\n      var collapseMenuApi = function (container) {\n        getActiveItem(container).each(function (currentItem) {\n          collapseLeft(container, currentItem);\n        });\n      };\n      var highlightPrimary = function (container) {\n        layeredState.getPrimary().each(function (primary) {\n          setActiveMenu(container, primary);\n        });\n      };\n      var extractMenuFromContainer = function (container) {\n        return Optional.from(container.components()[0]).filter(function (comp) {\n          return get$3(comp.element, 'role') === 'menu';\n        });\n      };\n      var repositionMenus = function (container) {\n        var maybeActivePrimary = layeredState.getPrimary().bind(function (primary) {\n          return getActiveItem(container).bind(function (currentItem) {\n            var itemValue = getItemValue(currentItem);\n            var allMenus = values(layeredState.getMenus());\n            var preparedMenus = cat(map(allMenus, LayeredState.extractPreparedMenu));\n            return layeredState.getTriggeringPath(itemValue, function (v) {\n              return getItemByValue(container, preparedMenus, v);\n            });\n          }).map(function (triggeringPath) {\n            return {\n              primary: primary,\n              triggeringPath: triggeringPath\n            };\n          });\n        });\n        maybeActivePrimary.fold(function () {\n          extractMenuFromContainer(container).each(function (primaryMenu) {\n            detail.onRepositionMenu(container, primaryMenu, []);\n          });\n        }, function (_a) {\n          var primary = _a.primary, triggeringPath = _a.triggeringPath;\n          detail.onRepositionMenu(container, primary, triggeringPath);\n        });\n      };\n      var apis = {\n        collapseMenu: collapseMenuApi,\n        highlightPrimary: highlightPrimary,\n        repositionMenus: repositionMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.tmenuBehaviours, [\n          Keying.config({\n            mode: 'special',\n            onRight: keyOnItem(onRight),\n            onLeft: keyOnItem(onLeft),\n            onEscape: keyOnItem(onEscape),\n            focusIn: function (container, _keyInfo) {\n              layeredState.getPrimary().each(function (primary) {\n                dispatch(container, primary.element, focusItem());\n              });\n            }\n          }),\n          Highlighting.config({\n            highlightClass: detail.markers.selectedMenu,\n            itemClass: detail.markers.menu\n          }),\n          Composing.config({\n            find: function (container) {\n              return Highlighting.getHighlighted(container);\n            }\n          }),\n          Replacing.config({})\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis,\n        events: events\n      };\n    };\n    var collapseItem = constant('collapse-item');\n\n    var tieredData = function (primary, menus, expansions) {\n      return {\n        primary: primary,\n        menus: menus,\n        expansions: expansions\n      };\n    };\n    var singleData = function (name, menu) {\n      return {\n        primary: name,\n        menus: wrap$1(name, menu),\n        expansions: {}\n      };\n    };\n    var collapseItem$1 = function (text) {\n      return {\n        value: generate$1(collapseItem()),\n        meta: { text: text }\n      };\n    };\n    var tieredMenu = single$2({\n      name: 'TieredMenu',\n      configFields: [\n        onStrictKeyboardHandler('onExecute'),\n        onStrictKeyboardHandler('onEscape'),\n        onStrictHandler('onOpenMenu'),\n        onStrictHandler('onOpenSubmenu'),\n        onHandler('onRepositionMenu'),\n        onHandler('onCollapseMenu'),\n        defaulted$1('highlightImmediately', true),\n        strictObjOf('data', [\n          strict$1('primary'),\n          strict$1('menus'),\n          strict$1('expansions')\n        ]),\n        defaulted$1('fakeFocus', false),\n        onHandler('onHighlight'),\n        onHandler('onHover'),\n        tieredMenuMarkers(),\n        strict$1('dom'),\n        defaulted$1('navigateOnHover', true),\n        defaulted$1('stayInDom', false),\n        field$1('tmenuBehaviours', [\n          Keying,\n          Highlighting,\n          Composing,\n          Replacing\n        ]),\n        defaulted$1('eventOrder', {})\n      ],\n      apis: {\n        collapseMenu: function (apis, tmenu) {\n          apis.collapseMenu(tmenu);\n        },\n        highlightPrimary: function (apis, tmenu) {\n          apis.highlightPrimary(tmenu);\n        },\n        repositionMenus: function (apis, tmenu) {\n          apis.repositionMenus(tmenu);\n        }\n      },\n      factory: make$2,\n      extraApis: {\n        tieredData: tieredData,\n        singleData: singleData,\n        collapseItem: collapseItem$1\n      }\n    });\n\n    var makeMenu = function (detail, menuSandbox, anchor, menuSpec, getBounds) {\n      var lazySink = function () {\n        return detail.lazySink(menuSandbox);\n      };\n      var layouts = menuSpec.type === 'horizontal' ? {\n        layouts: {\n          onLtr: function () {\n            return belowOrAbove();\n          },\n          onRtl: function () {\n            return belowOrAboveRtl();\n          }\n        }\n      } : {};\n      var isFirstTierSubmenu = function (triggeringPaths) {\n        return triggeringPaths.length === 2;\n      };\n      var getSubmenuLayouts = function (triggeringPaths) {\n        return isFirstTierSubmenu(triggeringPaths) ? layouts : {};\n      };\n      return tieredMenu.sketch({\n        dom: { tag: 'div' },\n        data: menuSpec.data,\n        markers: menuSpec.menu.markers,\n        highlightImmediately: menuSpec.menu.highlightImmediately,\n        onEscape: function () {\n          Sandboxing.close(menuSandbox);\n          detail.onEscape.map(function (handler) {\n            return handler(menuSandbox);\n          });\n          return Optional.some(true);\n        },\n        onExecute: function () {\n          return Optional.some(true);\n        },\n        onOpenMenu: function (tmenu, menu) {\n          Positioning.positionWithinBounds(lazySink().getOrDie(), anchor, menu, getBounds());\n        },\n        onOpenSubmenu: function (tmenu, item, submenu, triggeringPaths) {\n          var sink = lazySink().getOrDie();\n          Positioning.position(sink, __assign({\n            anchor: 'submenu',\n            item: item\n          }, getSubmenuLayouts(triggeringPaths)), submenu);\n        },\n        onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n          var sink = lazySink().getOrDie();\n          Positioning.positionWithinBounds(sink, anchor, primaryMenu, getBounds());\n          each(submenuTriggers, function (st) {\n            var submenuLayouts = getSubmenuLayouts(st.triggeringPath);\n            Positioning.position(sink, __assign({\n              anchor: 'submenu',\n              item: st.triggeringItem\n            }, submenuLayouts), st.triggeredMenu);\n          });\n        }\n      });\n    };\n    var factory = function (detail, spec) {\n      var isPartOfRelated = function (sandbox, queryElem) {\n        var related = detail.getRelated(sandbox);\n        return related.exists(function (rel) {\n          return isPartOf(rel, queryElem);\n        });\n      };\n      var setContent = function (sandbox, thing) {\n        Sandboxing.setContent(sandbox, thing);\n      };\n      var showAt = function (sandbox, anchor, thing) {\n        showWithin(sandbox, anchor, thing, Optional.none());\n      };\n      var showWithin = function (sandbox, anchor, thing, boxElement) {\n        showWithinBounds(sandbox, anchor, thing, function () {\n          return boxElement.map(function (elem) {\n            return box(elem);\n          });\n        });\n      };\n      var showWithinBounds = function (sandbox, anchor, thing, getBounds) {\n        var sink = detail.lazySink(sandbox).getOrDie();\n        Sandboxing.openWhileCloaked(sandbox, thing, function () {\n          return Positioning.positionWithinBounds(sink, anchor, sandbox, getBounds());\n        });\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'position',\n          anchor: anchor,\n          getBounds: getBounds\n        }));\n      };\n      var showMenuAt = function (sandbox, anchor, menuSpec) {\n        showMenuWithinBounds(sandbox, anchor, menuSpec, function () {\n          return Optional.none();\n        });\n      };\n      var showMenuWithinBounds = function (sandbox, anchor, menuSpec, getBounds) {\n        var menu = makeMenu(detail, sandbox, anchor, menuSpec, getBounds);\n        Sandboxing.open(sandbox, menu);\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'menu',\n          menu: menu\n        }));\n      };\n      var hide = function (sandbox) {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.setValue(sandbox, Optional.none());\n          Sandboxing.close(sandbox);\n        }\n      };\n      var getContent = function (sandbox) {\n        return Sandboxing.getState(sandbox);\n      };\n      var reposition = function (sandbox) {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.getValue(sandbox).each(function (state) {\n            switch (state.mode) {\n            case 'menu':\n              Sandboxing.getState(sandbox).each(function (tmenu) {\n                tieredMenu.repositionMenus(tmenu);\n              });\n              break;\n            case 'position':\n              var sink = detail.lazySink(sandbox).getOrDie();\n              Positioning.positionWithinBounds(sink, state.anchor, sandbox, state.getBounds());\n              break;\n            }\n          });\n        }\n      };\n      var apis = {\n        setContent: setContent,\n        showAt: showAt,\n        showWithin: showWithin,\n        showWithinBounds: showWithinBounds,\n        showMenuAt: showMenuAt,\n        showMenuWithinBounds: showMenuWithinBounds,\n        hide: hide,\n        getContent: getContent,\n        reposition: reposition,\n        isOpen: Sandboxing.isOpen\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.inlineBehaviours, [\n          Sandboxing.config({\n            isPartOf: function (sandbox, data, queryElem) {\n              return isPartOf(data, queryElem) || isPartOfRelated(sandbox, queryElem);\n            },\n            getAttachPoint: function (sandbox) {\n              return detail.lazySink(sandbox).getOrDie();\n            },\n            onOpen: function (sandbox) {\n              detail.onShow(sandbox);\n            },\n            onClose: function (sandbox) {\n              detail.onHide(sandbox);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: Optional.none()\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel(__assign({ isExtraPart: spec.isExtraPart }, detail.fireDismissalEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})))), receivingChannel$1(__assign(__assign({}, detail.fireRepositionEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})), { doReposition: reposition })))\n          })\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis\n      };\n    };\n    var InlineView = single$2({\n      name: 'InlineView',\n      configFields: [\n        strict$1('lazySink'),\n        onHandler('onShow'),\n        onHandler('onHide'),\n        optionFunction('onEscape'),\n        field$1('inlineBehaviours', [\n          Sandboxing,\n          Representing,\n          Receiving\n        ]),\n        optionObjOf('fireDismissalEventInstead', [defaulted$1('event', dismissRequested())]),\n        optionObjOf('fireRepositionEventInstead', [defaulted$1('event', repositionRequested())]),\n        defaulted$1('getRelated', Optional.none),\n        defaulted$1('isExtraPart', never),\n        defaulted$1('eventOrder', Optional.none)\n      ],\n      factory: factory,\n      apis: {\n        showAt: function (apis, component, anchor, thing) {\n          apis.showAt(component, anchor, thing);\n        },\n        showWithin: function (apis, component, anchor, thing, boxElement) {\n          apis.showWithin(component, anchor, thing, boxElement);\n        },\n        showWithinBounds: function (apis, component, anchor, thing, bounds) {\n          apis.showWithinBounds(component, anchor, thing, bounds);\n        },\n        showMenuAt: function (apis, component, anchor, menuSpec) {\n          apis.showMenuAt(component, anchor, menuSpec);\n        },\n        showMenuWithinBounds: function (apis, component, anchor, menuSpec, bounds) {\n          apis.showMenuWithinBounds(component, anchor, menuSpec, bounds);\n        },\n        hide: function (apis, component) {\n          apis.hide(component);\n        },\n        isOpen: function (apis, component) {\n          return apis.isOpen(component);\n        },\n        getContent: function (apis, component) {\n          return apis.getContent(component);\n        },\n        setContent: function (apis, component, thing) {\n          apis.setContent(component, thing);\n        },\n        reposition: function (apis, component) {\n          apis.reposition(component);\n        }\n      }\n    });\n\n    var westEdgeX$1 = function (anchor) {\n      return anchor.x;\n    };\n    var middleX$1 = function (anchor, element) {\n      return anchor.x + anchor.width / 2 - element.width / 2;\n    };\n    var eastEdgeX$1 = function (anchor, element) {\n      return anchor.x + anchor.width - element.width;\n    };\n    var northY$2 = function (anchor) {\n      return anchor.y;\n    };\n    var southY$2 = function (anchor, element) {\n      return anchor.y + anchor.height - element.height;\n    };\n    var southeast$3 = function (anchor, element, bubbles) {\n      return nu$7(eastEdgeX$1(anchor, element), southY$2(anchor, element), bubbles.innerSoutheast(), northwest(), boundsRestriction(anchor, {\n        right: 0,\n        bottom: 3\n      }), 'layout-inner-se');\n    };\n    var southwest$3 = function (anchor, element, bubbles) {\n      return nu$7(westEdgeX$1(anchor), southY$2(anchor, element), bubbles.innerSouthwest(), northeast(), boundsRestriction(anchor, {\n        left: 1,\n        bottom: 3\n      }), 'layout-inner-sw');\n    };\n    var northeast$3 = function (anchor, element, bubbles) {\n      return nu$7(eastEdgeX$1(anchor, element), northY$2(anchor), bubbles.innerNortheast(), southwest(), boundsRestriction(anchor, {\n        right: 0,\n        top: 2\n      }), 'layout-inner-ne');\n    };\n    var northwest$3 = function (anchor, element, bubbles) {\n      return nu$7(westEdgeX$1(anchor), northY$2(anchor), bubbles.innerNorthwest(), southeast(), boundsRestriction(anchor, {\n        left: 1,\n        top: 2\n      }), 'layout-inner-nw');\n    };\n    var north$3 = function (anchor, element, bubbles) {\n      return nu$7(middleX$1(anchor, element), northY$2(anchor), bubbles.innerNorth(), south(), boundsRestriction(anchor, { top: 2 }), 'layout-inner-n');\n    };\n    var south$3 = function (anchor, element, bubbles) {\n      return nu$7(middleX$1(anchor, element), southY$2(anchor, element), bubbles.innerSouth(), north(), boundsRestriction(anchor, { bottom: 3 }), 'layout-inner-s');\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var factory$1 = function (detail) {\n      var events = events$7(detail.action);\n      var tag = detail.dom.tag;\n      var lookupAttr = function (attr) {\n        return get$1(detail.dom, 'attributes').bind(function (attrs) {\n          return get$1(attrs, attr);\n        });\n      };\n      var getModAttributes = function () {\n        if (tag === 'button') {\n          var type = lookupAttr('type').getOr('button');\n          var roleAttrs = lookupAttr('role').map(function (role) {\n            return { role: role };\n          }).getOr({});\n          return __assign({ type: type }, roleAttrs);\n        } else {\n          var role = lookupAttr('role').getOr('button');\n          return { role: role };\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events,\n        behaviours: SketchBehaviours.augment(detail.buttonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          })\n        ]),\n        domModification: { attributes: getModAttributes() },\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Button = single$2({\n      name: 'Button',\n      factory: factory$1,\n      configFields: [\n        defaulted$1('uid', undefined),\n        strict$1('dom'),\n        defaulted$1('components', []),\n        SketchBehaviours.field('buttonBehaviours', [\n          Focusing,\n          Keying\n        ]),\n        option('action'),\n        option('role'),\n        defaulted$1('eventOrder', {})\n      ]\n    });\n\n    var record = function (spec) {\n      var uid = isSketchSpec(spec) && hasNonNullableKey(spec, 'uid') ? spec.uid : generate$2('memento');\n      var get = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).getOrDie();\n      };\n      var getOpt = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).toOptional();\n      };\n      var asSpec = function () {\n        return __assign(__assign({}, spec), { uid: uid });\n      };\n      return {\n        get: get,\n        getOpt: getOpt,\n        asSpec: asSpec\n      };\n    };\n\n    var defaultIcon = function (icons) {\n      return Optional.from(icons()['temporary-placeholder']).getOr('!not found!');\n    };\n    var get$e = function (name, icons) {\n      return Optional.from(icons()[name.toLowerCase()]).getOrThunk(function () {\n        return defaultIcon(icons);\n      });\n    };\n    var getOr = function (name, icons, fallback) {\n      return Optional.from(icons()[name.toLowerCase()]).or(fallback).getOrThunk(function () {\n        return defaultIcon(icons);\n      });\n    };\n    var getFirst$1 = function (names, icons) {\n      return findMap(names, function (name) {\n        return Optional.from(icons()[name.toLowerCase()]);\n      }).getOrThunk(function () {\n        return defaultIcon(icons);\n      });\n    };\n\n    var notificationIconMap = {\n      success: 'checkmark',\n      error: 'warning',\n      err: 'error',\n      warning: 'warning',\n      warn: 'warning',\n      info: 'info'\n    };\n    var factory$2 = function (detail) {\n      var memBannerText = record({\n        dom: {\n          tag: 'p',\n          innerHtml: detail.translationProvider(detail.text)\n        },\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var renderPercentBar = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-bar'],\n            attributes: { style: 'width: ' + percent + '%' }\n          }\n        };\n      };\n      var renderPercentText = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-text'],\n            innerHtml: percent + '%'\n          }\n        };\n      };\n      var memBannerProgress = record({\n        dom: {\n          tag: 'div',\n          classes: detail.progress ? [\n            'tox-progress-bar',\n            'tox-progress-indicator'\n          ] : ['tox-progress-bar']\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-bar-container']\n            },\n            components: [renderPercentBar(0)]\n          },\n          renderPercentText(0)\n        ],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var updateProgress = function (comp, percent) {\n        if (comp.getSystem().isConnected()) {\n          memBannerProgress.getOpt(comp).each(function (progress) {\n            Replacing.set(progress, [\n              {\n                dom: {\n                  tag: 'div',\n                  classes: ['tox-bar-container']\n                },\n                components: [renderPercentBar(percent)]\n              },\n              renderPercentText(percent)\n            ]);\n          });\n        }\n      };\n      var updateText = function (comp, text$1) {\n        if (comp.getSystem().isConnected()) {\n          var banner = memBannerText.get(comp);\n          Replacing.set(banner, [text(text$1)]);\n        }\n      };\n      var apis = {\n        updateProgress: updateProgress,\n        updateText: updateText\n      };\n      var iconChoices = flatten([\n        detail.icon.toArray(),\n        detail.level.toArray(),\n        detail.level.bind(function (level) {\n          return Optional.from(notificationIconMap[level]);\n        }).toArray()\n      ]);\n      var memButton = record(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-notification__dismiss',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ]\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-icon'],\n              innerHtml: get$e('close', detail.iconProvider),\n              attributes: { 'aria-label': detail.translationProvider('Close') }\n            }\n          }],\n        action: function (comp) {\n          detail.onAction(comp);\n        }\n      }));\n      var components = [\n        {\n          dom: {\n            tag: 'div',\n            classes: ['tox-notification__icon'],\n            innerHtml: getFirst$1(iconChoices, detail.iconProvider)\n          }\n        },\n        {\n          dom: {\n            tag: 'div',\n            classes: ['tox-notification__body']\n          },\n          components: [memBannerText.asSpec()],\n          behaviours: derive$1([Replacing.config({})])\n        }\n      ];\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: detail.level.map(function (level) {\n            return [\n              'tox-notification',\n              'tox-notification--in',\n              'tox-notification--' + level\n            ];\n          }).getOr([\n            'tox-notification',\n            'tox-notification--in'\n          ])\n        },\n        behaviours: derive$1([\n          Focusing.config({}),\n          config('notification-events', [run(focusin(), function (comp) {\n              memButton.getOpt(comp).each(Focusing.focus);\n            })])\n        ]),\n        components: components.concat(detail.progress ? [memBannerProgress.asSpec()] : []).concat(!detail.closeButton ? [] : [memButton.asSpec()]),\n        apis: apis\n      };\n    };\n    var Notification = single$2({\n      name: 'Notification',\n      factory: factory$2,\n      configFields: [\n        option('level'),\n        strict$1('progress'),\n        strict$1('icon'),\n        strict$1('onAction'),\n        strict$1('text'),\n        strict$1('iconProvider'),\n        strict$1('translationProvider'),\n        defaultedBoolean('closeButton', true)\n      ],\n      apis: {\n        updateProgress: function (apis, comp, percent) {\n          apis.updateProgress(comp, percent);\n        },\n        updateText: function (apis, comp, text) {\n          apis.updateText(comp, text);\n        }\n      }\n    });\n\n    function NotificationManagerImpl (editor, extras, uiMothership) {\n      var backstage = extras.backstage;\n      var getLayoutDirection = function (rel) {\n        switch (rel) {\n        case 'bc-bc':\n          return south$3;\n        case 'tc-tc':\n          return north$3;\n        case 'tc-bc':\n          return north$1;\n        case 'bc-tc':\n        default:\n          return south$1;\n        }\n      };\n      var prePositionNotifications = function (notifications) {\n        each(notifications, function (notification) {\n          return notification.moveTo(0, 0);\n        });\n      };\n      var positionNotifications = function (notifications) {\n        if (notifications.length > 0) {\n          head(notifications).each(function (firstItem) {\n            return firstItem.moveRel(null, 'banner');\n          });\n          each(notifications, function (notification, index) {\n            if (index > 0) {\n              notification.moveRel(notifications[index - 1].getEl(), 'bc-tc');\n            }\n          });\n        }\n      };\n      var reposition = function (notifications) {\n        prePositionNotifications(notifications);\n        positionNotifications(notifications);\n      };\n      var open = function (settings, closeCallback) {\n        var hideCloseButton = !settings.closeButton && settings.timeout && (settings.timeout > 0 || settings.timeout < 0);\n        var close = function () {\n          closeCallback();\n          InlineView.hide(notificationWrapper);\n        };\n        var notification = build$1(Notification.sketch({\n          text: settings.text,\n          level: contains([\n            'success',\n            'error',\n            'warning',\n            'warn',\n            'info'\n          ], settings.type) ? settings.type : undefined,\n          progress: settings.progressBar === true,\n          icon: Optional.from(settings.icon),\n          closeButton: !hideCloseButton,\n          onAction: close,\n          iconProvider: backstage.shared.providers.icons,\n          translationProvider: backstage.shared.providers.translate\n        }));\n        var notificationWrapper = build$1(InlineView.sketch(__assign({\n          dom: {\n            tag: 'div',\n            classes: ['tox-notifications-container']\n          },\n          lazySink: extras.backstage.shared.getSink,\n          fireDismissalEventInstead: {}\n        }, backstage.shared.header.isPositionedAtTop() ? {} : { fireRepositionEventInstead: {} })));\n        uiMothership.add(notificationWrapper);\n        if (settings.timeout > 0) {\n          global$2.setTimeout(function () {\n            close();\n          }, settings.timeout);\n        }\n        return {\n          close: close,\n          moveTo: function (x, y) {\n            InlineView.showAt(notificationWrapper, {\n              anchor: 'makeshift',\n              x: x,\n              y: y\n            }, premade$1(notification));\n          },\n          moveRel: function (element, rel) {\n            if (rel !== 'banner') {\n              var layoutDirection_1 = getLayoutDirection(rel);\n              var nodeAnchor = {\n                anchor: 'node',\n                root: body(),\n                node: Optional.some(SugarElement.fromDom(element)),\n                layouts: {\n                  onRtl: function () {\n                    return [layoutDirection_1];\n                  },\n                  onLtr: function () {\n                    return [layoutDirection_1];\n                  }\n                }\n              };\n              InlineView.showAt(notificationWrapper, nodeAnchor, premade$1(notification));\n            } else {\n              InlineView.showAt(notificationWrapper, extras.backstage.shared.anchors.banner(), premade$1(notification));\n            }\n          },\n          text: function (nuText) {\n            Notification.updateText(notification, nuText);\n          },\n          settings: settings,\n          getEl: function () {\n            return notification.element.dom;\n          },\n          progressBar: {\n            value: function (percent) {\n              Notification.updateProgress(notification, percent);\n            }\n          }\n        };\n      };\n      var close = function (notification) {\n        notification.close();\n      };\n      var getArgs = function (notification) {\n        return notification.settings;\n      };\n      return {\n        open: open,\n        close: close,\n        reposition: reposition,\n        getArgs: getArgs\n      };\n    }\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer === null) {\n          timer = setTimeout(function () {\n            fn.apply(null, args);\n            timer = null;\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          clearTimeout(timer);\n        }\n        timer = setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.TextSeeker');\n\n    var isBoundary = function (dom, node) {\n      return dom.isBlock(node) || contains([\n        'BR',\n        'IMG',\n        'HR',\n        'INPUT'\n      ], node.nodeName) || dom.getContentEditable(node) === 'false';\n    };\n    var repeatLeft = function (dom, node, offset, process, rootNode) {\n      var search = global$3(dom, function (node) {\n        return isBoundary(dom, node);\n      });\n      return Optional.from(search.backwards(node, offset, process, rootNode));\n    };\n\n    var autocompleteSelector = '[data-mce-autocompleter]';\n    var create$4 = function (editor, range) {\n      return detect$4(SugarElement.fromDom(editor.selection.getNode())).getOrThunk(function () {\n        var wrapper = SugarElement.fromHtml('<span data-mce-autocompleter=\"1\" data-mce-bogus=\"1\"></span>', editor.getDoc());\n        append(wrapper, SugarElement.fromDom(range.extractContents()));\n        range.insertNode(wrapper.dom);\n        parent(wrapper).each(function (elm) {\n          return elm.dom.normalize();\n        });\n        last$1(wrapper).map(function (last) {\n          editor.selection.setCursorLocation(last.dom, getEnd(last));\n        });\n        return wrapper;\n      });\n    };\n    var detect$4 = function (elm) {\n      return closest$3(elm, autocompleteSelector);\n    };\n\n    var isValidTextRange = function (rng) {\n      return rng.collapsed && rng.startContainer.nodeType === 3;\n    };\n    var getText = function (rng) {\n      return rng.toString().replace(/\\u00A0/g, ' ').replace(/\\uFEFF/g, '');\n    };\n    var isWhitespace = function (chr) {\n      return chr !== '' && ' \\xA0\\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    };\n\n    var stripTriggerChar = function (text, triggerCh) {\n      return text.substring(triggerCh.length);\n    };\n    var findChar = function (text, index, ch) {\n      var i;\n      for (i = index - 1; i >= 0; i--) {\n        var char = text.charAt(i);\n        if (isWhitespace(char)) {\n          return Optional.none();\n        }\n        if (char === ch) {\n          break;\n        }\n      }\n      return Optional.some(i);\n    };\n    var findStart = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      if (!isValidTextRange(initRange)) {\n        return Optional.none();\n      }\n      var findTriggerChIndex = function (element, offset, text) {\n        return findChar(text, offset, ch).getOr(offset);\n      };\n      var root = dom.getParent(initRange.startContainer, dom.isBlock) || dom.getRoot();\n      return repeatLeft(dom, initRange.startContainer, initRange.startOffset, findTriggerChIndex, root).bind(function (spot) {\n        var range = initRange.cloneRange();\n        range.setStart(spot.container, spot.offset);\n        range.setEnd(initRange.endContainer, initRange.endOffset);\n        if (range.collapsed) {\n          return Optional.none();\n        }\n        var text = getText(range);\n        var triggerCharIndex = text.lastIndexOf(ch);\n        if (triggerCharIndex !== 0 || stripTriggerChar(text, ch).length < minChars) {\n          return Optional.none();\n        } else {\n          return Optional.some({\n            text: stripTriggerChar(text, ch),\n            range: range,\n            triggerChar: ch\n          });\n        }\n      });\n    };\n    var getContext = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      return detect$4(SugarElement.fromDom(initRange.startContainer)).fold(function () {\n        return findStart(dom, initRange, ch, minChars);\n      }, function (elm) {\n        var range = dom.createRng();\n        range.selectNode(elm.dom);\n        var text = getText(range);\n        return Optional.some({\n          range: range,\n          text: stripTriggerChar(text, ch),\n          triggerChar: ch\n        });\n      });\n    };\n\n    var setup = function (api, editor) {\n      editor.on('keypress compositionend', api.onKeypress.throttle);\n      editor.on('remove', api.onKeypress.cancel);\n      var redirectKeyToItem = function (item, e) {\n        emitWith(item, keydown(), { raw: e });\n      };\n      editor.on('keydown', function (e) {\n        var getItem = function () {\n          return api.getView().bind(Highlighting.getHighlighted);\n        };\n        if (e.which === 8) {\n          api.onKeypress.throttle(e);\n        }\n        if (api.isActive()) {\n          if (e.which === 27) {\n            api.cancelIfNecessary();\n          }\n          if (api.isMenuOpen()) {\n            if (e.which === 13) {\n              getItem().each(emitExecute);\n              e.preventDefault();\n            } else if (e.which === 40) {\n              getItem().fold(function () {\n                api.getView().each(Highlighting.highlightFirst);\n              }, function (item) {\n                redirectKeyToItem(item, e);\n              });\n              e.preventDefault();\n              e.stopImmediatePropagation();\n            } else if (e.which === 37 || e.which === 38 || e.which === 39) {\n              getItem().each(function (item) {\n                redirectKeyToItem(item, e);\n                e.preventDefault();\n                e.stopImmediatePropagation();\n              });\n            }\n          } else {\n            if (e.which === 13 || e.which === 38 || e.which === 40) {\n              api.cancelIfNecessary();\n            }\n          }\n        }\n      });\n      editor.on('NodeChange', function (e) {\n        if (api.isActive() && !api.isProcessingAction() && detect$4(SugarElement.fromDom(e.element)).isNone()) {\n          api.cancelIfNecessary();\n        }\n      });\n    };\n    var AutocompleterEditorEvents = { setup: setup };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var point$1 = function (container, offset) {\n      return {\n        container: container,\n        offset: offset\n      };\n    };\n\n    var isText$1 = function (node) {\n      return node.nodeType === TEXT;\n    };\n    var isElement$1 = function (node) {\n      return node.nodeType === ELEMENT;\n    };\n    var toLast = function (node) {\n      if (isText$1(node)) {\n        return point$1(node, node.data.length);\n      } else {\n        var children = node.childNodes;\n        return children.length > 0 ? toLast(children[children.length - 1]) : point$1(node, children.length);\n      }\n    };\n    var toLeaf = function (node, offset) {\n      var children = node.childNodes;\n      if (children.length > 0 && offset < children.length) {\n        return toLeaf(children[offset], 0);\n      } else if (children.length > 0 && isElement$1(node) && children.length === offset) {\n        return toLast(children[children.length - 1]);\n      } else {\n        return point$1(node, offset);\n      }\n    };\n\n    var isPreviousCharContent = function (dom, leaf) {\n      return repeatLeft(dom, leaf.container, leaf.offset, function (element, offset) {\n        return offset === 0 ? -1 : offset;\n      }, dom.getRoot()).filter(function (spot) {\n        var char = spot.container.data.charAt(spot.offset - 1);\n        return !isWhitespace(char);\n      }).isSome();\n    };\n    var isStartOfWord = function (dom) {\n      return function (rng) {\n        var leaf = toLeaf(rng.startContainer, rng.startOffset);\n        return !isPreviousCharContent(dom, leaf);\n      };\n    };\n    var getTriggerContext = function (dom, initRange, database) {\n      return findMap(database.triggerChars, function (ch) {\n        return getContext(dom, initRange, ch);\n      });\n    };\n    var lookup = function (editor, getDatabase) {\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      return getTriggerContext(editor.dom, rng, database).bind(function (context) {\n        return lookupWithContext(editor, getDatabase, context);\n      });\n    };\n    var lookupWithContext = function (editor, getDatabase, context, fetchOptions) {\n      if (fetchOptions === void 0) {\n        fetchOptions = {};\n      }\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      var startText = rng.startContainer.nodeValue;\n      var autocompleters = filter(database.lookupByChar(context.triggerChar), function (autocompleter) {\n        return context.text.length >= autocompleter.minChars && autocompleter.matches.getOrThunk(function () {\n          return isStartOfWord(editor.dom);\n        })(context.range, startText, context.text);\n      });\n      if (autocompleters.length === 0) {\n        return Optional.none();\n      }\n      var lookupData = global$4.all(map(autocompleters, function (ac) {\n        var fetchResult = ac.fetch(context.text, ac.maxResults, fetchOptions);\n        return fetchResult.then(function (results) {\n          return {\n            matchText: context.text,\n            items: results,\n            columns: ac.columns,\n            onAction: ac.onAction,\n            highlightOn: ac.highlightOn\n          };\n        });\n      }));\n      return Optional.some({\n        lookupData: lookupData,\n        context: context\n      });\n    };\n\n    var separatorMenuItemSchema = objOf([\n      strictString('type'),\n      optionString('text')\n    ]);\n    var createSeparatorMenuItem = function (spec) {\n      return asRaw('separatormenuitem', separatorMenuItemSchema, spec);\n    };\n\n    var autocompleterItemSchema = objOf([\n      defaulted$1('type', 'autocompleteitem'),\n      defaulted$1('active', false),\n      defaulted$1('disabled', false),\n      defaulted$1('meta', {}),\n      strictString('value'),\n      optionString('text'),\n      optionString('icon')\n    ]);\n    var autocompleterSchema = objOf([\n      strictString('type'),\n      strictString('ch'),\n      defaultedNumber('minChars', 1),\n      defaulted$1('columns', 1),\n      defaultedNumber('maxResults', 10),\n      optionFunction('matches'),\n      strictFunction('fetch'),\n      strictFunction('onAction'),\n      defaultedArrayOf('highlightOn', [], string)\n    ]);\n    var createSeparatorItem = function (spec) {\n      return asRaw('Autocompleter.Separator', separatorMenuItemSchema, spec);\n    };\n    var createAutocompleterItem = function (spec) {\n      return asRaw('Autocompleter.Item', autocompleterItemSchema, spec);\n    };\n    var createAutocompleter = function (spec) {\n      return asRaw('Autocompleter', autocompleterSchema, spec);\n    };\n\n    var baseToolbarButtonFields = [\n      defaultedBoolean('disabled', false),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n    var toolbarButtonSchema = objOf([\n      strictString('type'),\n      strictFunction('onAction')\n    ].concat(baseToolbarButtonFields));\n    var createToolbarButton = function (spec) {\n      return asRaw('toolbarbutton', toolbarButtonSchema, spec);\n    };\n\n    var baseToolbarToggleButtonFields = [defaultedBoolean('active', false)].concat(baseToolbarButtonFields);\n    var toggleButtonSchema = objOf(baseToolbarToggleButtonFields.concat([\n      strictString('type'),\n      strictFunction('onAction')\n    ]));\n    var createToggleButton = function (spec) {\n      return asRaw('ToggleButton', toggleButtonSchema, spec);\n    };\n\n    var contextBarFields = [\n      defaultedFunction('predicate', never),\n      defaultedStringEnum('scope', 'node', [\n        'node',\n        'editor'\n      ]),\n      defaultedStringEnum('position', 'selection', [\n        'node',\n        'selection',\n        'line'\n      ])\n    ];\n\n    var contextButtonFields = baseToolbarButtonFields.concat([\n      defaulted$1('type', 'contextformbutton'),\n      defaulted$1('primary', false),\n      strictFunction('onAction'),\n      state$1('original', identity)\n    ]);\n    var contextToggleButtonFields = baseToolbarToggleButtonFields.concat([\n      defaulted$1('type', 'contextformbutton'),\n      defaulted$1('primary', false),\n      strictFunction('onAction'),\n      state$1('original', identity)\n    ]);\n    var launchButtonFields = baseToolbarButtonFields.concat([defaulted$1('type', 'contextformbutton')]);\n    var launchToggleButtonFields = baseToolbarToggleButtonFields.concat([defaulted$1('type', 'contextformtogglebutton')]);\n    var toggleOrNormal = choose$1('type', {\n      contextformbutton: contextButtonFields,\n      contextformtogglebutton: contextToggleButtonFields\n    });\n    var contextFormSchema = objOf([\n      defaulted$1('type', 'contextform'),\n      defaultedFunction('initValue', function () {\n        return '';\n      }),\n      optionString('label'),\n      strictArrayOf('commands', toggleOrNormal),\n      optionOf('launch', choose$1('type', {\n        contextformbutton: launchButtonFields,\n        contextformtogglebutton: launchToggleButtonFields\n      }))\n    ].concat(contextBarFields));\n    var createContextForm = function (spec) {\n      return asRaw('ContextForm', contextFormSchema, spec);\n    };\n\n    var contextToolbarSchema = objOf([\n      defaulted$1('type', 'contexttoolbar'),\n      strictString('items')\n    ].concat(contextBarFields));\n    var createContextToolbar = function (spec) {\n      return asRaw('ContextToolbar', contextToolbarSchema, spec);\n    };\n\n    var stringArray = function (a) {\n      var all = {};\n      each(a, function (key) {\n        all[key] = {};\n      });\n      return keys(all);\n    };\n\n    var register = function (editor) {\n      var popups = editor.ui.registry.getAll().popups;\n      var dataset = map$2(popups, function (popup) {\n        return createAutocompleter(popup).fold(function (err) {\n          throw new Error(formatError(err));\n        }, function (x) {\n          return x;\n        });\n      });\n      var triggerChars = stringArray(mapToArray(dataset, function (v) {\n        return v.ch;\n      }));\n      var datasetValues = values(dataset);\n      var lookupByChar = function (ch) {\n        return filter(datasetValues, function (dv) {\n          return dv.ch === ch;\n        });\n      };\n      return {\n        dataset: dataset,\n        triggerChars: triggerChars,\n        lookupByChar: lookupByChar\n      };\n    };\n\n    var ItemResponse;\n    (function (ItemResponse) {\n      ItemResponse[ItemResponse['CLOSE_ON_EXECUTE'] = 0] = 'CLOSE_ON_EXECUTE';\n      ItemResponse[ItemResponse['BUBBLE_TO_SANDBOX'] = 1] = 'BUBBLE_TO_SANDBOX';\n    }(ItemResponse || (ItemResponse = {})));\n    var ItemResponse$1 = ItemResponse;\n\n    var navClass = 'tox-menu-nav__js';\n    var selectableClass = 'tox-collection__item';\n    var colorClass = 'tox-swatch';\n    var presetClasses = {\n      normal: navClass,\n      color: colorClass\n    };\n    var tickedClass = 'tox-collection__item--enabled';\n    var groupHeadingClass = 'tox-collection__group-heading';\n    var iconClass = 'tox-collection__item-icon';\n    var textClass = 'tox-collection__item-label';\n    var accessoryClass = 'tox-collection__item-accessory';\n    var caretClass = 'tox-collection__item-caret';\n    var checkmarkClass = 'tox-collection__item-checkmark';\n    var activeClass = 'tox-collection__item--active';\n    var iconClassRtl = 'tox-collection__item-icon-rtl';\n    var containerClass = 'tox-collection__item-container';\n    var containerColumnClass = 'tox-collection__item-container--column';\n    var containerRowClass = 'tox-collection__item-container--row';\n    var containerAlignRightClass = 'tox-collection__item-container--align-right';\n    var containerAlignLeftClass = 'tox-collection__item-container--align-left';\n    var containerValignTopClass = 'tox-collection__item-container--valign-top';\n    var containerValignMiddleClass = 'tox-collection__item-container--valign-middle';\n    var containerValignBottomClass = 'tox-collection__item-container--valign-bottom';\n    var classForPreset = function (presets) {\n      return get$1(presetClasses, presets).getOr(navClass);\n    };\n\n    var forMenu = function (presets) {\n      if (presets === 'color') {\n        return 'tox-swatches';\n      } else {\n        return 'tox-menu';\n      }\n    };\n    var classes = function (presets) {\n      return {\n        backgroundMenu: 'tox-background-menu',\n        selectedMenu: 'tox-selected-menu',\n        selectedItem: 'tox-collection__item--active',\n        hasIcons: 'tox-menu--has-icons',\n        menu: forMenu(presets),\n        tieredMenu: 'tox-tiered-menu'\n      };\n    };\n\n    var markers$1 = function (presets) {\n      var menuClasses = classes(presets);\n      return {\n        backgroundMenu: menuClasses.backgroundMenu,\n        selectedMenu: menuClasses.selectedMenu,\n        menu: menuClasses.menu,\n        selectedItem: menuClasses.selectedItem,\n        item: classForPreset(presets)\n      };\n    };\n    var dom$1 = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      return {\n        tag: 'div',\n        classes: flatten([\n          [\n            menuClasses.menu,\n            'tox-menu-' + columns + '-column'\n          ],\n          hasIcons ? [menuClasses.hasIcons] : []\n        ])\n      };\n    };\n    var components$1 = [Menu.parts.items({})];\n    var part = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      var d = {\n        tag: 'div',\n        classes: flatten([[menuClasses.tieredMenu]])\n      };\n      return {\n        dom: d,\n        markers: markers$1(presets)\n      };\n    };\n\n    var chunk$1 = function (rowDom, numColumns) {\n      return function (items) {\n        var chunks = chunk(items, numColumns);\n        return map(chunks, function (c) {\n          return {\n            dom: rowDom,\n            components: c\n          };\n        });\n      };\n    };\n    var forSwatch = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-swatches-menu'\n          ]\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-swatches']\n            },\n            components: [Menu.parts.items({\n                preprocess: columns !== 'auto' ? chunk$1({\n                  tag: 'div',\n                  classes: ['tox-swatches__row']\n                }, columns) : identity\n              })]\n          }]\n      };\n    };\n    var forToolbar = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection',\n            'tox-collection--toolbar',\n            'tox-collection--toolbar-lg'\n          ]\n        },\n        components: [Menu.parts.items({\n            preprocess: chunk$1({\n              tag: 'div',\n              classes: ['tox-collection__group']\n            }, columns)\n          })]\n      };\n    };\n    var preprocessCollection = function (items, isSeparator) {\n      var allSplits = [];\n      var currentSplit = [];\n      each(items, function (item, i) {\n        if (isSeparator(item, i)) {\n          if (currentSplit.length > 0) {\n            allSplits.push(currentSplit);\n          }\n          currentSplit = [];\n          if (has(item.dom, 'innerHtml')) {\n            currentSplit.push(item);\n          }\n        } else {\n          currentSplit.push(item);\n        }\n      });\n      if (currentSplit.length > 0) {\n        allSplits.push(currentSplit);\n      }\n      return map(allSplits, function (s) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-collection__group']\n          },\n          components: s\n        };\n      });\n    };\n    var forCollection = function (columns, initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection'\n          ].concat(columns === 1 ? ['tox-collection--list'] : ['tox-collection--grid'])\n        },\n        components: [Menu.parts.items({\n            preprocess: function (items) {\n              if (columns !== 'auto' && columns > 1) {\n                return chunk$1({\n                  tag: 'div',\n                  classes: ['tox-collection__group']\n                }, columns)(items);\n              } else {\n                return preprocessCollection(items, function (_item, i) {\n                  return initItems[i].type === 'separator';\n                });\n              }\n            }\n          })]\n      };\n    };\n    var forHorizontalCollection = function (initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-collection',\n            'tox-collection--horizontal'\n          ]\n        },\n        components: [Menu.parts.items({\n            preprocess: function (items) {\n              return preprocessCollection(items, function (_item, i) {\n                return initItems[i].type === 'separator';\n              });\n            }\n          })]\n      };\n    };\n\n    var menuHasIcons = function (xs) {\n      return exists(xs, function (item) {\n        return 'icon' in item && item.icon !== undefined;\n      });\n    };\n    var handleError = function (error) {\n      console.error(formatError(error));\n      console.log(error);\n      return Optional.none();\n    };\n    var createHorizontalPartialMenuWithAlloyItems = function (value, _hasIcons, items, _columns, _presets) {\n      var structure = forHorizontalCollection(items);\n      return {\n        value: value,\n        dom: structure.dom,\n        components: structure.components,\n        items: items\n      };\n    };\n    var createPartialMenuWithAlloyItems = function (value, hasIcons, items, columns, presets) {\n      if (presets === 'color') {\n        var structure = forSwatch(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 'auto') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 1) {\n        var structure = forCollection(1, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'listpreview' && columns !== 'auto') {\n        var structure = forToolbar(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      return {\n        value: value,\n        dom: dom$1(hasIcons, columns, presets),\n        components: components$1,\n        items: items\n      };\n    };\n\n    var cardImageFields = [\n      strictString('type'),\n      strictString('src'),\n      optionString('alt'),\n      defaultedArrayOf('classes', [], string)\n    ];\n    var cardImageSchema = objOf(cardImageFields);\n\n    var cardTextFields = [\n      strictString('type'),\n      strictString('text'),\n      optionString('name'),\n      defaultedArrayOf('classes', ['tox-collection__item-label'], string)\n    ];\n    var cardTextSchema = objOf(cardTextFields);\n\n    var itemSchema$2 = valueThunkOf(function () {\n      return chooseProcessor('type', {\n        cardimage: cardImageSchema,\n        cardtext: cardTextSchema,\n        cardcontainer: cardContainerSchema\n      });\n    });\n    var cardContainerSchema = objOf([\n      strictString('type'),\n      defaultedString('direction', 'horizontal'),\n      defaultedString('align', 'left'),\n      defaultedString('valign', 'middle'),\n      strictArrayOf('items', itemSchema$2)\n    ]);\n\n    var commonMenuItemFields = [\n      defaultedBoolean('disabled', false),\n      optionString('text'),\n      optionString('shortcut'),\n      field('value', 'value', defaultedThunk(function () {\n        return generate$1('menuitem-value');\n      }), anyValue$1()),\n      defaulted$1('meta', {})\n    ];\n\n    var cardMenuItemSchema = objOf([\n      strictString('type'),\n      optionString('label'),\n      strictArrayOf('items', itemSchema$2),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedFunction('onAction', noop)\n    ].concat(commonMenuItemFields));\n    var createCardMenuItem = function (spec) {\n      return asRaw('cardmenuitem', cardMenuItemSchema, spec);\n    };\n\n    var choiceMenuItemSchema = objOf([\n      strictString('type'),\n      defaultedBoolean('active', false),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createChoiceMenuItem = function (spec) {\n      return asRaw('choicemenuitem', choiceMenuItemSchema, spec);\n    };\n\n    var fancyTypes = [\n      'inserttable',\n      'colorswatch'\n    ];\n    var fancyMenuItemSchema = objOf([\n      strictString('type'),\n      strictStringEnum('fancytype', fancyTypes),\n      defaultedFunction('onAction', noop)\n    ]);\n    var createFancyMenuItem = function (spec) {\n      return asRaw('fancymenuitem', fancyMenuItemSchema, spec);\n    };\n\n    var menuItemSchema = objOf([\n      strictString('type'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedFunction('onAction', noop),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createMenuItem = function (spec) {\n      return asRaw('menuitem', menuItemSchema, spec);\n    };\n\n    var nestedMenuItemSchema = objOf([\n      strictString('type'),\n      strictFunction('getSubmenuItems'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createNestedMenuItem = function (spec) {\n      return asRaw('nestedmenuitem', nestedMenuItemSchema, spec);\n    };\n\n    var toggleMenuItemSchema = objOf([\n      strictString('type'),\n      optionString('icon'),\n      defaultedBoolean('active', false),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      strictFunction('onAction')\n    ].concat(commonMenuItemFields));\n    var createToggleMenuItem = function (spec) {\n      return asRaw('togglemenuitem', toggleMenuItemSchema, spec);\n    };\n\n    var detectSize = function (comp, margin, selectorClass) {\n      var descendants$1 = descendants(comp.element, '.' + selectorClass);\n      if (descendants$1.length > 0) {\n        var columnLength = findIndex(descendants$1, function (c) {\n          var thisTop = c.dom.getBoundingClientRect().top;\n          var cTop = descendants$1[0].dom.getBoundingClientRect().top;\n          return Math.abs(thisTop - cTop) > margin;\n        }).getOr(descendants$1.length);\n        return Optional.some({\n          numColumns: columnLength,\n          numRows: Math.ceil(descendants$1.length / columnLength)\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var namedEvents = function (name, handlers) {\n      return derive$1([config(name, handlers)]);\n    };\n    var unnamedEvents = function (handlers) {\n      return namedEvents(generate$1('unnamed-events'), handlers);\n    };\n    var SimpleBehaviours = {\n      namedEvents: namedEvents,\n      unnamedEvents: unnamedEvents\n    };\n\n    var ExclusivityChannel = generate$1('tooltip.exclusive');\n    var ShowTooltipEvent = generate$1('tooltip.show');\n    var HideTooltipEvent = generate$1('tooltip.hide');\n\n    var hideAllExclusive = function (component, _tConfig, _tState) {\n      component.getSystem().broadcastOn([ExclusivityChannel], {});\n    };\n    var setComponents = function (component, tConfig, tState, specs) {\n      tState.getTooltip().each(function (tooltip) {\n        if (tooltip.getSystem().isConnected()) {\n          Replacing.set(tooltip, specs);\n        }\n      });\n    };\n\n    var TooltippingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        hideAllExclusive: hideAllExclusive,\n        setComponents: setComponents\n    });\n\n    var events$8 = function (tooltipConfig, state) {\n      var hide = function (comp) {\n        state.getTooltip().each(function (p) {\n          detach(p);\n          tooltipConfig.onHide(comp, p);\n          state.clearTooltip();\n        });\n        state.clearTimer();\n      };\n      var show = function (comp) {\n        if (!state.isShowing()) {\n          hideAllExclusive(comp);\n          var sink = tooltipConfig.lazySink(comp).getOrDie();\n          var popup = comp.getSystem().build({\n            dom: tooltipConfig.tooltipDom,\n            components: tooltipConfig.tooltipComponents,\n            events: derive(tooltipConfig.mode === 'normal' ? [\n              run(mouseover(), function (_) {\n                emit(comp, ShowTooltipEvent);\n              }),\n              run(mouseout(), function (_) {\n                emit(comp, HideTooltipEvent);\n              })\n            ] : []),\n            behaviours: derive$1([Replacing.config({})])\n          });\n          state.setTooltip(popup);\n          attach$1(sink, popup);\n          tooltipConfig.onShow(comp, popup);\n          Positioning.position(sink, tooltipConfig.anchor(comp), popup);\n        }\n      };\n      return derive(flatten([\n        [\n          run(ShowTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              show(comp);\n            }, tooltipConfig.delay);\n          }),\n          run(HideTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              hide(comp);\n            }, tooltipConfig.delay);\n          }),\n          run(receive(), function (comp, message) {\n            var receivingData = message;\n            if (!receivingData.universal) {\n              if (contains(receivingData.channels, ExclusivityChannel)) {\n                hide(comp);\n              }\n            }\n          }),\n          runOnDetached(function (comp) {\n            hide(comp);\n          })\n        ],\n        tooltipConfig.mode === 'normal' ? [\n          run(focusin(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run(postBlur(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          }),\n          run(mouseover(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run(mouseout(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ] : [\n          run(highlight(), function (comp, _se) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run(dehighlight(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ]\n      ]));\n    };\n\n    var ActiveTooltipping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$8\n    });\n\n    var TooltippingSchema = [\n      strict$1('lazySink'),\n      strict$1('tooltipDom'),\n      defaulted$1('exclusive', true),\n      defaulted$1('tooltipComponents', []),\n      defaulted$1('delay', 300),\n      defaultedStringEnum('mode', 'normal', [\n        'normal',\n        'follow-highlight'\n      ]),\n      defaulted$1('anchor', function (comp) {\n        return {\n          anchor: 'hotspot',\n          hotspot: comp,\n          layouts: {\n            onLtr: constant([\n              south$1,\n              north$1,\n              southeast$1,\n              northeast$1,\n              southwest$1,\n              northwest$1\n            ]),\n            onRtl: constant([\n              south$1,\n              north$1,\n              southeast$1,\n              northeast$1,\n              southwest$1,\n              northwest$1\n            ])\n          }\n        };\n      }),\n      onHandler('onHide'),\n      onHandler('onShow')\n    ];\n\n    var init$4 = function () {\n      var timer = Cell(Optional.none());\n      var popup = Cell(Optional.none());\n      var getTooltip = function () {\n        return popup.get();\n      };\n      var setTooltip = function (comp) {\n        popup.set(Optional.some(comp));\n      };\n      var clearTooltip = function () {\n        popup.set(Optional.none());\n      };\n      var clearTimer = function () {\n        timer.get().each(function (t) {\n          clearTimeout(t);\n        });\n      };\n      var resetTimer = function (f, delay) {\n        clearTimer();\n        timer.set(Optional.some(setTimeout(function () {\n          f();\n        }, delay)));\n      };\n      var isShowing = function () {\n        return popup.get().isSome();\n      };\n      var readState = constant('not-implemented');\n      return nu$5({\n        getTooltip: getTooltip,\n        isShowing: isShowing,\n        setTooltip: setTooltip,\n        clearTooltip: clearTooltip,\n        clearTimer: clearTimer,\n        resetTimer: resetTimer,\n        readState: readState\n      });\n    };\n\n    var TooltippingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$4\n    });\n\n    var Tooltipping = create$1({\n      fields: TooltippingSchema,\n      name: 'tooltipping',\n      active: ActiveTooltipping,\n      state: TooltippingState,\n      apis: TooltippingApis\n    });\n\n    var escape = function (text) {\n      return text.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var nativeDisabled = [\n      'input',\n      'button',\n      'textarea',\n      'select'\n    ];\n    var onLoad$5 = function (component, disableConfig, disableState) {\n      var f = disableConfig.disabled() ? disable : enable;\n      f(component, disableConfig);\n    };\n    var hasNative = function (component, config) {\n      return config.useNative === true && contains(nativeDisabled, name(component.element));\n    };\n    var nativeIsDisabled = function (component) {\n      return has$1(component.element, 'disabled');\n    };\n    var nativeDisable = function (component) {\n      set$1(component.element, 'disabled', 'disabled');\n    };\n    var nativeEnable = function (component) {\n      remove$1(component.element, 'disabled');\n    };\n    var ariaIsDisabled = function (component) {\n      return get$3(component.element, 'aria-disabled') === 'true';\n    };\n    var ariaDisable = function (component) {\n      set$1(component.element, 'aria-disabled', 'true');\n    };\n    var ariaEnable = function (component) {\n      set$1(component.element, 'aria-disabled', 'false');\n    };\n    var disable = function (component, disableConfig, _disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        add$2(component.element, disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeDisable : ariaDisable;\n      f(component);\n      disableConfig.onDisabled(component);\n    };\n    var enable = function (component, disableConfig, _disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        remove$4(component.element, disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeEnable : ariaEnable;\n      f(component);\n      disableConfig.onEnabled(component);\n    };\n    var isDisabled = function (component, disableConfig) {\n      return hasNative(component, disableConfig) ? nativeIsDisabled(component) : ariaIsDisabled(component);\n    };\n    var set$7 = function (component, disableConfig, disableState, disabled) {\n      var f = disabled ? disable : enable;\n      f(component, disableConfig);\n    };\n\n    var DisableApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        enable: enable,\n        disable: disable,\n        isDisabled: isDisabled,\n        onLoad: onLoad$5,\n        set: set$7\n    });\n\n    var exhibit$3 = function (base, disableConfig) {\n      return nu$6({ classes: disableConfig.disabled() ? disableConfig.disableClass.toArray() : [] });\n    };\n    var events$9 = function (disableConfig, disableState) {\n      return derive([\n        abort(execute(), function (component, _simulatedEvent) {\n          return isDisabled(component, disableConfig);\n        }),\n        loadEvent(disableConfig, disableState, onLoad$5)\n      ]);\n    };\n\n    var ActiveDisable = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$3,\n        events: events$9\n    });\n\n    var DisableSchema = [\n      defaultedFunction('disabled', never),\n      defaulted$1('useNative', true),\n      option('disableClass'),\n      onHandler('onDisabled'),\n      onHandler('onEnabled')\n    ];\n\n    var Disabling = create$1({\n      fields: DisableSchema,\n      name: 'disabling',\n      active: ActiveDisable,\n      apis: DisableApis\n    });\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var getSkinUrl = function (editor) {\n      var skin = editor.getParam('skin');\n      var skinUrl = editor.getParam('skin_url');\n      if (skin !== false) {\n        var skinName = skin ? skin : 'oxide';\n        if (skinUrl) {\n          skinUrl = editor.documentBaseURI.toAbsolute(skinUrl);\n        } else {\n          skinUrl = global$7.baseURL + '/skins/ui/' + skinName;\n        }\n      }\n      return skinUrl;\n    };\n    var isReadOnly = function (editor) {\n      return editor.getParam('readonly', false, 'boolean');\n    };\n    var isSkinDisabled = function (editor) {\n      return editor.getParam('skin') === false;\n    };\n    var getHeightSetting = function (editor) {\n      return editor.getParam('height', Math.max(editor.getElement().offsetHeight, 200));\n    };\n    var getWidthSetting = function (editor) {\n      return editor.getParam('width', global$5.DOM.getStyle(editor.getElement(), 'width'));\n    };\n    var getMinWidthSetting = function (editor) {\n      return Optional.from(editor.getParam('min_width')).filter(isNumber);\n    };\n    var getMinHeightSetting = function (editor) {\n      return Optional.from(editor.getParam('min_height')).filter(isNumber);\n    };\n    var getMaxWidthSetting = function (editor) {\n      return Optional.from(editor.getParam('max_width')).filter(isNumber);\n    };\n    var getMaxHeightSetting = function (editor) {\n      return Optional.from(editor.getParam('max_height')).filter(isNumber);\n    };\n    var getUserStyleFormats = function (editor) {\n      return Optional.from(editor.getParam('style_formats')).filter(isArray);\n    };\n    var isMergeStyleFormats = function (editor) {\n      return editor.getParam('style_formats_merge', false, 'boolean');\n    };\n    var getLineHeightFormats = function (editor) {\n      return editor.getParam('lineheight_formats', '1 1.1 1.2 1.3 1.4 1.5 2', 'string').split(' ');\n    };\n    var getRemovedMenuItems = function (editor) {\n      return editor.getParam('removed_menuitems', '');\n    };\n    var isMenubarEnabled = function (editor) {\n      return editor.getParam('menubar', true, 'boolean') !== false;\n    };\n    var isToolbarEnabled = function (editor) {\n      var toolbar = editor.getParam('toolbar', true);\n      var isToolbarTrue = toolbar === true;\n      var isToolbarString = isString(toolbar);\n      var isToolbarObjectArray = isArray(toolbar) && toolbar.length > 0;\n      return !isMultipleToolbars(editor) && (isToolbarObjectArray || isToolbarString || isToolbarTrue);\n    };\n    var getMultipleToolbarsSetting = function (editor) {\n      var toolbars = range(9, function (num) {\n        return editor.getParam('toolbar' + (num + 1), false, 'string');\n      });\n      var toolbarArray = filter(toolbars, function (toolbar) {\n        return typeof toolbar === 'string';\n      });\n      return toolbarArray.length > 0 ? Optional.some(toolbarArray) : Optional.none();\n    };\n    var isMultipleToolbars = function (editor) {\n      return getMultipleToolbarsSetting(editor).fold(function () {\n        var toolbar = editor.getParam('toolbar', [], 'string[]');\n        return toolbar.length > 0;\n      }, always);\n    };\n    var ToolbarMode;\n    (function (ToolbarMode) {\n      ToolbarMode['default'] = 'wrap';\n      ToolbarMode['floating'] = 'floating';\n      ToolbarMode['sliding'] = 'sliding';\n      ToolbarMode['scrolling'] = 'scrolling';\n    }(ToolbarMode || (ToolbarMode = {})));\n    var getToolbarMode = function (editor) {\n      return editor.getParam('toolbar_mode', '', 'string');\n    };\n    var ToolbarLocation;\n    (function (ToolbarLocation) {\n      ToolbarLocation['auto'] = 'auto';\n      ToolbarLocation['top'] = 'top';\n      ToolbarLocation['bottom'] = 'bottom';\n    }(ToolbarLocation || (ToolbarLocation = {})));\n    var getToolbarGroups = function (editor) {\n      return editor.getParam('toolbar_groups', {}, 'object');\n    };\n    var getToolbarLocation = function (editor) {\n      return editor.getParam('toolbar_location', ToolbarLocation.auto, 'string');\n    };\n    var isToolbarLocationBottom = function (editor) {\n      return getToolbarLocation(editor) === ToolbarLocation.bottom;\n    };\n    var fixedContainerSelector = function (editor) {\n      return editor.getParam('fixed_toolbar_container', '', 'string');\n    };\n    var fixedToolbarContainerTarget = function (editor) {\n      return editor.getParam('fixed_toolbar_container_target');\n    };\n    var isToolbarPersist = function (editor) {\n      return editor.getParam('toolbar_persist', false, 'boolean');\n    };\n    var fixedContainerTarget = function (editor) {\n      if (!editor.inline) {\n        return Optional.none();\n      }\n      var selector = fixedContainerSelector(editor);\n      if (selector.length > 0) {\n        return descendant$1(body(), selector);\n      }\n      var element = fixedToolbarContainerTarget(editor);\n      if (isNonNullable(element)) {\n        return Optional.some(SugarElement.fromDom(element));\n      }\n      return Optional.none();\n    };\n    var useFixedContainer = function (editor) {\n      return editor.inline && fixedContainerTarget(editor).isSome();\n    };\n    var getUiContainer = function (editor) {\n      var fixedContainer = fixedContainerTarget(editor);\n      return fixedContainer.getOrThunk(function () {\n        return getContentContainer(getRootNode(SugarElement.fromDom(editor.getElement())));\n      });\n    };\n    var isDistractionFree = function (editor) {\n      return editor.inline && !isMenubarEnabled(editor) && !isToolbarEnabled(editor) && !isMultipleToolbars(editor);\n    };\n    var isStickyToolbar = function (editor) {\n      var isStickyToolbar = editor.getParam('toolbar_sticky', false, 'boolean');\n      return (isStickyToolbar || editor.inline) && !useFixedContainer(editor) && !isDistractionFree(editor);\n    };\n    var isDraggableModal = function (editor) {\n      return editor.getParam('draggable_modal', false, 'boolean');\n    };\n    var getMenus = function (editor) {\n      var menu = editor.getParam('menu');\n      if (menu) {\n        return map$2(menu, function (menu) {\n          return __assign(__assign({}, menu), { items: menu.items });\n        });\n      } else {\n        return {};\n      }\n    };\n    var getMenubar = function (editor) {\n      return editor.getParam('menubar');\n    };\n    var getToolbar = function (editor) {\n      return editor.getParam('toolbar', true);\n    };\n    var getFilePickerCallback = function (editor) {\n      return editor.getParam('file_picker_callback');\n    };\n    var getFilePickerTypes = function (editor) {\n      return editor.getParam('file_picker_types');\n    };\n    var getFileBrowserCallbackTypes = function (editor) {\n      return editor.getParam('file_browser_callback_types');\n    };\n    var noTypeaheadUrls = function (editor) {\n      return editor.getParam('typeahead_urls') === false;\n    };\n    var getAnchorTop = function (editor) {\n      return editor.getParam('anchor_top', '#top');\n    };\n    var getAnchorBottom = function (editor) {\n      return editor.getParam('anchor_bottom', '#bottom');\n    };\n    var getFilePickerValidatorHandler = function (editor) {\n      var handler = editor.getParam('file_picker_validator_handler', undefined, 'function');\n      if (handler === undefined) {\n        return editor.getParam('filepicker_validator_handler', undefined, 'function');\n      } else {\n        return handler;\n      }\n    };\n\n    var ReadOnlyChannel = 'silver.readonly';\n    var ReadOnlyDataSchema = objOf([strictBoolean('readonly')]);\n    var broadcastReadonly = function (uiComponents, readonly) {\n      var outerContainer = uiComponents.outerContainer;\n      var target = outerContainer.element;\n      if (readonly) {\n        uiComponents.mothership.broadcastOn([dismissPopups()], { target: target });\n        uiComponents.uiMothership.broadcastOn([dismissPopups()], { target: target });\n      }\n      uiComponents.mothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n      uiComponents.uiMothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n    };\n    var setupReadonlyModeSwitch = function (editor, uiComponents) {\n      editor.on('init', function () {\n        if (editor.mode.isReadOnly()) {\n          broadcastReadonly(uiComponents, true);\n        }\n      });\n      editor.on('SwitchMode', function () {\n        return broadcastReadonly(uiComponents, editor.mode.isReadOnly());\n      });\n      if (isReadOnly(editor)) {\n        editor.setMode('readonly');\n      }\n    };\n    var receivingConfig = function () {\n      var _a;\n      return Receiving.config({\n        channels: (_a = {}, _a[ReadOnlyChannel] = {\n          schema: ReadOnlyDataSchema,\n          onReceive: function (comp, data) {\n            Disabling.set(comp, data.readonly);\n          }\n        }, _a)\n      });\n    };\n\n    var item = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-collection__item--state-disabled'\n      });\n    };\n    var button = function (disabled) {\n      return Disabling.config({ disabled: disabled });\n    };\n    var splitButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled'\n      });\n    };\n    var toolbarButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled',\n        useNative: false\n      });\n    };\n    var DisablingConfigs = {\n      item: item,\n      button: button,\n      splitButton: splitButton,\n      toolbarButton: toolbarButton\n    };\n\n    var runWithApi = function (info, comp) {\n      var api = info.getApi(comp);\n      return function (f) {\n        f(api);\n      };\n    };\n    var onControlAttached = function (info, editorOffCell) {\n      return runOnAttached(function (comp) {\n        var run = runWithApi(info, comp);\n        run(function (api) {\n          var onDestroy = info.onSetup(api);\n          if (isFunction(onDestroy)) {\n            editorOffCell.set(onDestroy);\n          }\n        });\n      });\n    };\n    var onControlDetached = function (getApi, editorOffCell) {\n      return runOnDetached(function (comp) {\n        return runWithApi(getApi, comp)(editorOffCell.get());\n      });\n    };\n\n    var _a;\n    var onMenuItemExecute = function (info, itemResponse) {\n      return runOnExecute(function (comp, simulatedEvent) {\n        runWithApi(info, comp)(info.onAction);\n        if (!info.triggersSubmenu && itemResponse === ItemResponse$1.CLOSE_ON_EXECUTE) {\n          if (comp.getSystem().isConnected()) {\n            emit(comp, sandboxClose());\n          }\n          simulatedEvent.stop();\n        }\n      });\n    };\n    var menuItemEventOrder = (_a = {}, _a[execute()] = [\n      'disabling',\n      'alloy.base.behaviour',\n      'toggling',\n      'item-events'\n    ], _a);\n\n    var componentRenderPipeline = function (xs) {\n      return bind(xs, function (o) {\n        return o.toArray();\n      });\n    };\n    var renderCommonItem = function (spec, structure, itemResponse, providersbackstage) {\n      var editorOffCell = Cell(noop);\n      return {\n        type: 'item',\n        dom: structure.dom,\n        components: componentRenderPipeline(structure.optComponents),\n        data: spec.data,\n        eventOrder: menuItemEventOrder,\n        hasSubmenu: spec.triggersSubmenu,\n        itemBehaviours: derive$1([\n          config('item-events', [\n            onMenuItemExecute(spec, itemResponse),\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          DisablingConfigs.item(function () {\n            return spec.disabled || providersbackstage.isDisabled();\n          }),\n          receivingConfig(),\n          Replacing.config({})\n        ].concat(spec.itemBehaviours))\n      };\n    };\n    var buildData = function (source) {\n      return {\n        value: source.value,\n        meta: __assign({ text: source.text.getOr('') }, source.meta)\n      };\n    };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var convertText = function (source) {\n      var mac = {\n        alt: '&#x2325;',\n        ctrl: '&#x2303;',\n        shift: '&#x21E7;',\n        meta: '&#x2318;',\n        access: '&#x2303;&#x2325;'\n      };\n      var other = {\n        meta: 'Ctrl',\n        access: 'Shift+Alt'\n      };\n      var replace = global$8.mac ? mac : other;\n      var shortcut = source.split('+');\n      var updated = map(shortcut, function (segment) {\n        var search = segment.toLowerCase().trim();\n        return has(replace, search) ? replace[search] : segment;\n      });\n      return global$8.mac ? updated.join('') : updated.join('+');\n    };\n\n    var renderIcon = function (iconHtml) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [iconClass],\n          innerHtml: iconHtml\n        }\n      };\n    };\n    var renderText = function (text$1) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [text(global$6.translate(text$1))]\n      };\n    };\n    var renderHtml = function (html, classes) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: classes,\n          innerHtml: html\n        }\n      };\n    };\n    var renderStyledText = function (style, text$1) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [{\n            dom: {\n              tag: style.tag,\n              styles: style.styles\n            },\n            components: [text(global$6.translate(text$1))]\n          }]\n      };\n    };\n    var renderShortcut = function (shortcut) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [accessoryClass],\n          innerHtml: convertText(shortcut)\n        }\n      };\n    };\n    var renderCheckmark = function (icons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [checkmarkClass],\n          innerHtml: get$e('checkmark', icons)\n        }\n      };\n    };\n    var renderSubmenuCaret = function (icons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [caretClass],\n          innerHtml: get$e('chevron-right', icons)\n        }\n      };\n    };\n    var renderDownwardsCaret = function (icons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [caretClass],\n          innerHtml: get$e('chevron-down', icons)\n        }\n      };\n    };\n    var renderContainer = function (container, components) {\n      var directionClass = container.direction === 'vertical' ? containerColumnClass : containerRowClass;\n      var alignClass = container.align === 'left' ? containerAlignLeftClass : containerAlignRightClass;\n      var getValignClass = function () {\n        switch (container.valign) {\n        case 'top':\n          return containerValignTopClass;\n        case 'middle':\n          return containerValignMiddleClass;\n        case 'bottom':\n          return containerValignBottomClass;\n        }\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            containerClass,\n            directionClass,\n            alignClass,\n            getValignClass()\n          ]\n        },\n        components: components\n      };\n    };\n    var renderImage = function (src, classes, alt) {\n      return {\n        dom: {\n          tag: 'img',\n          classes: classes,\n          attributes: {\n            src: src,\n            alt: alt.getOr('')\n          }\n        }\n      };\n    };\n\n    var renderColorStructure = function (itemText, itemValue, iconSvg, providerBackstage) {\n      var colorPickerCommand = 'custom';\n      var removeColorCommand = 'remove';\n      var getDom = function () {\n        var common = colorClass;\n        var icon = iconSvg.getOr('');\n        var attributes = itemText.map(function (text) {\n          return { title: providerBackstage.translate(text) };\n        }).getOr({});\n        var baseDom = {\n          tag: 'div',\n          attributes: attributes,\n          classes: [common]\n        };\n        if (itemValue === colorPickerCommand) {\n          return __assign(__assign({}, baseDom), {\n            tag: 'button',\n            classes: __spreadArrays(baseDom.classes, ['tox-swatches__picker-btn']),\n            innerHtml: icon\n          });\n        } else if (itemValue === removeColorCommand) {\n          return __assign(__assign({}, baseDom), {\n            classes: __spreadArrays(baseDom.classes, ['tox-swatch--remove']),\n            innerHtml: icon\n          });\n        } else {\n          return __assign(__assign({}, baseDom), {\n            attributes: __assign(__assign({}, baseDom.attributes), { 'data-mce-color': itemValue }),\n            styles: { 'background-color': itemValue }\n          });\n        }\n      };\n      return {\n        dom: getDom(),\n        optComponents: []\n      };\n    };\n    var renderItemDomStructure = function (rtlClass, ariaLabel) {\n      var domTitle = ariaLabel.map(function (label) {\n        return { attributes: { title: global$6.translate(label) } };\n      }).getOr({});\n      return __assign({\n        tag: 'div',\n        classes: [\n          navClass,\n          selectableClass\n        ].concat(rtlClass ? [iconClassRtl] : [])\n      }, domTitle);\n    };\n    var renderNormalItemStructure = function (info, icon, renderIcons, textRender, rtlClass) {\n      var leftIcon = renderIcons ? icon.or(Optional.some('')).map(renderIcon) : Optional.none();\n      var checkmark = info.checkMark;\n      var content = info.htmlContent.fold(function () {\n        return info.textContent.map(textRender);\n      }, function (html) {\n        return Optional.some(renderHtml(html, [textClass]));\n      });\n      var menuItem = {\n        dom: renderItemDomStructure(rtlClass, info.ariaLabel),\n        optComponents: [\n          leftIcon,\n          content,\n          info.shortcutContent.map(renderShortcut),\n          checkmark,\n          info.caret\n        ]\n      };\n      return menuItem;\n    };\n    var rtlIcon = [\n      'list-num-default',\n      'list-num-lower-alpha',\n      'list-num-lower-greek',\n      'list-num-lower-roman',\n      'list-num-upper-alpha',\n      'list-num-upper-roman'\n    ];\n    var rtlTransform = [\n      'list-bull-circle',\n      'list-bull-default',\n      'list-bull-square'\n    ];\n    var renderItemStructure = function (info, providersBackstage, renderIcons, fallbackIcon) {\n      if (fallbackIcon === void 0) {\n        fallbackIcon = Optional.none();\n      }\n      var getIconName = function (iconName) {\n        return iconName.map(function (name) {\n          return global$6.isRtl() && contains(rtlIcon, name) ? name + '-rtl' : name;\n        });\n      };\n      var needRtlClass = global$6.isRtl() && info.iconContent.exists(function (name) {\n        return contains(rtlTransform, name);\n      });\n      var icon = getIconName(info.iconContent).map(function (iconName) {\n        return getOr(iconName, providersBackstage.icons, fallbackIcon);\n      });\n      var textRender = Optional.from(info.meta).fold(function () {\n        return renderText;\n      }, function (meta) {\n        return has(meta, 'style') ? curry(renderStyledText, meta.style) : renderText;\n      });\n      if (info.presets === 'color') {\n        return renderColorStructure(info.ariaLabel, info.value, icon, providersBackstage);\n      } else {\n        return renderNormalItemStructure(info, icon, renderIcons, textRender, needRtlClass);\n      }\n    };\n\n    var tooltipBehaviour = function (meta, sharedBackstage) {\n      return get$1(meta, 'tooltipWorker').map(function (tooltipWorker) {\n        return [Tooltipping.config({\n            lazySink: sharedBackstage.getSink,\n            tooltipDom: {\n              tag: 'div',\n              classes: ['tox-tooltip-worker-container']\n            },\n            tooltipComponents: [],\n            anchor: function (comp) {\n              return {\n                anchor: 'submenu',\n                item: comp,\n                overrides: { maxHeightFunction: expandable }\n              };\n            },\n            mode: 'follow-highlight',\n            onShow: function (component, _tooltip) {\n              tooltipWorker(function (elm) {\n                Tooltipping.setComponents(component, [external({ element: SugarElement.fromDom(elm) })]);\n              });\n            }\n          })];\n      }).getOr([]);\n    };\n    var encodeText = function (text) {\n      return global$5.DOM.encode(text);\n    };\n    var replaceText = function (text, matchText) {\n      var translated = global$6.translate(text);\n      var encoded = encodeText(translated);\n      if (matchText.length > 0) {\n        var escapedMatchRegex = new RegExp(escape(matchText), 'gi');\n        return encoded.replace(escapedMatchRegex, function (match) {\n          return '<span class=\"tox-autocompleter-highlight\">' + match + '</span>';\n        });\n      } else {\n        return encoded;\n      }\n    };\n    var renderAutocompleteItem = function (spec, matchText, useText, presets, onItemValueHandler, itemResponse, sharedBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: Optional.none(),\n        htmlContent: useText ? spec.text.map(function (text) {\n          return replaceText(text, matchText);\n        }) : Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: Optional.none(),\n        checkMark: Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, sharedBackstage.providers, renderIcons, spec.icon);\n      return renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: constant({}),\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value, spec.meta);\n        },\n        onSetup: constant(noop),\n        triggersSubmenu: false,\n        itemBehaviours: tooltipBehaviour(spec.meta, sharedBackstage)\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    var render = function (items, extras) {\n      return map(items, function (item) {\n        switch (item.type) {\n        case 'cardcontainer':\n          return renderContainer(item, render(item.items, extras));\n        case 'cardimage':\n          return renderImage(item.src, item.classes, item.alt);\n        case 'cardtext':\n          var shouldHighlight = item.name.exists(function (name) {\n            return contains(extras.cardText.highlightOn, name);\n          });\n          var matchText = shouldHighlight ? Optional.from(extras.cardText.matchText).getOr('') : '';\n          return renderHtml(replaceText(item.text, matchText), item.classes);\n        }\n      });\n    };\n    var renderCardMenuItem = function (spec, itemResponse, sharedBackstage, extras) {\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            Disabling.set(component, state);\n            each(descendants(component.element, '*'), function (elm) {\n              component.getSystem().getByDom(elm).each(function (comp) {\n                if (comp.hasConfigured(Disabling)) {\n                  Disabling.set(comp, state);\n                }\n              });\n            });\n          }\n        };\n      };\n      var structure = {\n        dom: renderItemDomStructure(false, spec.label),\n        optComponents: [Optional.some({\n            dom: {\n              tag: 'div',\n              classes: [\n                containerClass,\n                containerRowClass\n              ]\n            },\n            components: render(spec.items, extras)\n          })]\n      };\n      return renderCommonItem({\n        data: buildData(__assign({ text: Optional.none() }, spec)),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: Optional.from(extras.itemBehaviours).getOr([])\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    var renderChoiceItem = function (spec, useText, presets, onItemValueHandler, isSelected, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: useText ? spec.text : Optional.none(),\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: useText ? spec.shortcut : Optional.none(),\n        checkMark: useText ? Optional.some(renderCheckmark(providersBackstage.icons)) : Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value);\n        },\n        onSetup: function (api) {\n          api.setActive(isSelected);\n          return noop;\n        },\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var parts$2 = generate$4(owner$2(), parts());\n\n    var hexColour = function (value) {\n      return { value: value };\n    };\n    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    var longformRegex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n    var isHexString = function (hex) {\n      return shorthandRegex.test(hex) || longformRegex.test(hex);\n    };\n    var getLongForm = function (hex) {\n      var hexString = hex.value.replace(shorthandRegex, function (m, r, g, b) {\n        return r + r + g + g + b + b;\n      });\n      return { value: hexString };\n    };\n    var extractValues = function (hex) {\n      var longForm = getLongForm(hex);\n      var splitForm = longformRegex.exec(longForm.value);\n      return splitForm === null ? [\n        'FFFFFF',\n        'FF',\n        'FF',\n        'FF'\n      ] : splitForm;\n    };\n    var toHex = function (component) {\n      var hex = component.toString(16);\n      return (hex.length === 1 ? '0' + hex : hex).toUpperCase();\n    };\n    var fromRgba = function (rgbaColour) {\n      var value = toHex(rgbaColour.red) + toHex(rgbaColour.green) + toHex(rgbaColour.blue);\n      return hexColour(value);\n    };\n\n    var min = Math.min;\n    var max = Math.max;\n    var round = Math.round;\n    var rgbRegex = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/;\n    var rgbaRegex = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d?(?:\\.\\d+)?)\\)/;\n    var rgbaColour = function (red, green, blue, alpha) {\n      return {\n        red: red,\n        green: green,\n        blue: blue,\n        alpha: alpha\n      };\n    };\n    var isRgbaComponent = function (value) {\n      var num = parseInt(value, 10);\n      return num.toString() === value && num >= 0 && num <= 255;\n    };\n    var fromHsv = function (hsv) {\n      var r;\n      var g;\n      var b;\n      var hue = (hsv.hue || 0) % 360;\n      var saturation = hsv.saturation / 100;\n      var brightness = hsv.value / 100;\n      saturation = max(0, min(saturation, 1));\n      brightness = max(0, min(brightness, 1));\n      if (saturation === 0) {\n        r = g = b = round(255 * brightness);\n        return rgbaColour(r, g, b, 1);\n      }\n      var side = hue / 60;\n      var chroma = brightness * saturation;\n      var x = chroma * (1 - Math.abs(side % 2 - 1));\n      var match = brightness - chroma;\n      switch (Math.floor(side)) {\n      case 0:\n        r = chroma;\n        g = x;\n        b = 0;\n        break;\n      case 1:\n        r = x;\n        g = chroma;\n        b = 0;\n        break;\n      case 2:\n        r = 0;\n        g = chroma;\n        b = x;\n        break;\n      case 3:\n        r = 0;\n        g = x;\n        b = chroma;\n        break;\n      case 4:\n        r = x;\n        g = 0;\n        b = chroma;\n        break;\n      case 5:\n        r = chroma;\n        g = 0;\n        b = x;\n        break;\n      default:\n        r = g = b = 0;\n      }\n      r = round(255 * (r + match));\n      g = round(255 * (g + match));\n      b = round(255 * (b + match));\n      return rgbaColour(r, g, b, 1);\n    };\n    var fromHex = function (hexColour) {\n      var result = extractValues(hexColour);\n      var red = parseInt(result[1], 16);\n      var green = parseInt(result[2], 16);\n      var blue = parseInt(result[3], 16);\n      return rgbaColour(red, green, blue, 1);\n    };\n    var fromStringValues = function (red, green, blue, alpha) {\n      var r = parseInt(red, 10);\n      var g = parseInt(green, 10);\n      var b = parseInt(blue, 10);\n      var a = parseFloat(alpha);\n      return rgbaColour(r, g, b, a);\n    };\n    var fromString = function (rgbaString) {\n      if (rgbaString === 'transparent') {\n        return Optional.some(rgbaColour(0, 0, 0, 0));\n      }\n      var rgbMatch = rgbRegex.exec(rgbaString);\n      if (rgbMatch !== null) {\n        return Optional.some(fromStringValues(rgbMatch[1], rgbMatch[2], rgbMatch[3], '1'));\n      }\n      var rgbaMatch = rgbaRegex.exec(rgbaString);\n      if (rgbaMatch !== null) {\n        return Optional.some(fromStringValues(rgbaMatch[1], rgbaMatch[2], rgbaMatch[3], rgbaMatch[4]));\n      }\n      return Optional.none();\n    };\n    var toString = function (rgba) {\n      return 'rgba(' + rgba.red + ',' + rgba.green + ',' + rgba.blue + ',' + rgba.alpha + ')';\n    };\n    var red = rgbaColour(255, 0, 0, 1);\n\n    var fireSkinLoaded = function (editor) {\n      return editor.fire('SkinLoaded');\n    };\n    var fireSkinLoadError = function (editor, error) {\n      return editor.fire('SkinLoadError', error);\n    };\n    var fireResizeEditor = function (editor) {\n      return editor.fire('ResizeEditor');\n    };\n    var fireResizeContent = function (editor, e) {\n      return editor.fire('ResizeContent', e);\n    };\n    var fireScrollContent = function (editor, e) {\n      return editor.fire('ScrollContent', e);\n    };\n    var fireTextColorChange = function (editor, data) {\n      return editor.fire('TextColorChange', data);\n    };\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.util.LocalStorage');\n\n    var storageName = 'tinymce-custom-colors';\n    function ColorCache (max) {\n      if (max === void 0) {\n        max = 10;\n      }\n      var storageString = global$9.getItem(storageName);\n      var localstorage = isString(storageString) ? JSON.parse(storageString) : [];\n      var prune = function (list) {\n        var diff = max - list.length;\n        return diff < 0 ? list.slice(0, max) : list;\n      };\n      var cache = prune(localstorage);\n      var add = function (key) {\n        indexOf(cache, key).each(remove);\n        cache.unshift(key);\n        if (cache.length > max) {\n          cache.pop();\n        }\n        global$9.setItem(storageName, JSON.stringify(cache));\n      };\n      var remove = function (idx) {\n        cache.splice(idx, 1);\n      };\n      var state = function () {\n        return cache.slice(0);\n      };\n      return {\n        add: add,\n        state: state\n      };\n    }\n\n    var choiceItem = 'choiceitem';\n    var defaultColors = [\n      {\n        type: choiceItem,\n        text: 'Light Green',\n        value: '#BFEDD2'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Yellow',\n        value: '#FBEEB8'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Red',\n        value: '#F8CAC6'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Purple',\n        value: '#ECCAFA'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Blue',\n        value: '#C2E0F4'\n      },\n      {\n        type: choiceItem,\n        text: 'Green',\n        value: '#2DC26B'\n      },\n      {\n        type: choiceItem,\n        text: 'Yellow',\n        value: '#F1C40F'\n      },\n      {\n        type: choiceItem,\n        text: 'Red',\n        value: '#E03E2D'\n      },\n      {\n        type: choiceItem,\n        text: 'Purple',\n        value: '#B96AD9'\n      },\n      {\n        type: choiceItem,\n        text: 'Blue',\n        value: '#3598DB'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Turquoise',\n        value: '#169179'\n      },\n      {\n        type: choiceItem,\n        text: 'Orange',\n        value: '#E67E23'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Red',\n        value: '#BA372A'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Purple',\n        value: '#843FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Blue',\n        value: '#236FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Gray',\n        value: '#ECF0F1'\n      },\n      {\n        type: choiceItem,\n        text: 'Medium Gray',\n        value: '#CED4D9'\n      },\n      {\n        type: choiceItem,\n        text: 'Gray',\n        value: '#95A5A6'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Gray',\n        value: '#7E8C8D'\n      },\n      {\n        type: choiceItem,\n        text: 'Navy Blue',\n        value: '#34495E'\n      },\n      {\n        type: choiceItem,\n        text: 'Black',\n        value: '#000000'\n      },\n      {\n        type: choiceItem,\n        text: 'White',\n        value: '#ffffff'\n      }\n    ];\n    var colorCache = ColorCache(10);\n    var mapColors = function (colorMap) {\n      var colors = [];\n      var canvas = document.createElement('canvas');\n      canvas.height = 1;\n      canvas.width = 1;\n      var ctx = canvas.getContext('2d');\n      var byteAsHex = function (colorByte, alphaByte) {\n        var bg = 255;\n        var alpha = alphaByte / 255;\n        var colorByteWithWhiteBg = Math.round(colorByte * alpha + bg * (1 - alpha));\n        return ('0' + colorByteWithWhiteBg.toString(16)).slice(-2).toUpperCase();\n      };\n      var asHexColor = function (color) {\n        if (/^[0-9A-Fa-f]{6}$/.test(color)) {\n          return '#' + color.toUpperCase();\n        }\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.fillStyle = '#FFFFFF';\n        ctx.fillStyle = color;\n        ctx.fillRect(0, 0, 1, 1);\n        var rgba = ctx.getImageData(0, 0, 1, 1).data;\n        var r = rgba[0], g = rgba[1], b = rgba[2], a = rgba[3];\n        return '#' + byteAsHex(r, a) + byteAsHex(g, a) + byteAsHex(b, a);\n      };\n      for (var i = 0; i < colorMap.length; i += 2) {\n        colors.push({\n          text: colorMap[i + 1],\n          value: asHexColor(colorMap[i]),\n          type: 'choiceitem'\n        });\n      }\n      return colors;\n    };\n    var getColorCols = function (editor, defaultCols) {\n      return editor.getParam('color_cols', defaultCols, 'number');\n    };\n    var hasCustomColors = function (editor) {\n      return editor.getParam('custom_colors') !== false;\n    };\n    var getColorMap = function (editor) {\n      return editor.getParam('color_map');\n    };\n    var getColors = function (editor) {\n      var unmapped = getColorMap(editor);\n      return unmapped !== undefined ? mapColors(unmapped) : defaultColors;\n    };\n    var getCurrentColors = function () {\n      return map(colorCache.state(), function (color) {\n        return {\n          type: choiceItem,\n          text: color,\n          value: color\n        };\n      });\n    };\n    var addColor = function (color) {\n      colorCache.add(color);\n    };\n\n    var getCurrentColor = function (editor, format) {\n      var color;\n      editor.dom.getParents(editor.selection.getStart(), function (elm) {\n        var value;\n        if (value = elm.style[format === 'forecolor' ? 'color' : 'background-color']) {\n          color = color ? color : value;\n        }\n      });\n      return color;\n    };\n    var applyFormat = function (editor, format, value) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.apply(format, { value: value });\n        editor.nodeChanged();\n      });\n    };\n    var removeFormat = function (editor, format) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.remove(format, { value: null }, null, true);\n        editor.nodeChanged();\n      });\n    };\n    var registerCommands = function (editor) {\n      editor.addCommand('mceApplyTextcolor', function (format, value) {\n        applyFormat(editor, format, value);\n      });\n      editor.addCommand('mceRemoveTextcolor', function (format) {\n        removeFormat(editor, format);\n      });\n    };\n    var calcCols = function (colors) {\n      return Math.max(5, Math.ceil(Math.sqrt(colors)));\n    };\n    var getColorCols$1 = function (editor) {\n      var colors = getColors(editor);\n      var defaultCols = calcCols(colors.length);\n      return getColorCols(editor, defaultCols);\n    };\n    var getAdditionalColors = function (hasCustom) {\n      var type = 'choiceitem';\n      var remove = {\n        type: type,\n        text: 'Remove color',\n        icon: 'color-swatch-remove-color',\n        value: 'remove'\n      };\n      var custom = {\n        type: type,\n        text: 'Custom color',\n        icon: 'color-picker',\n        value: 'custom'\n      };\n      return hasCustom ? [\n        remove,\n        custom\n      ] : [remove];\n    };\n    var applyColor = function (editor, format, value, onChoice) {\n      if (value === 'custom') {\n        var dialog = colorPickerDialog(editor);\n        dialog(function (colorOpt) {\n          colorOpt.each(function (color) {\n            addColor(color);\n            editor.execCommand('mceApplyTextcolor', format, color);\n            onChoice(color);\n          });\n        }, '#000000');\n      } else if (value === 'remove') {\n        onChoice('');\n        editor.execCommand('mceRemoveTextcolor', format);\n      } else {\n        onChoice(value);\n        editor.execCommand('mceApplyTextcolor', format, value);\n      }\n    };\n    var getColors$1 = function (colors, hasCustom) {\n      return colors.concat(getCurrentColors().concat(getAdditionalColors(hasCustom)));\n    };\n    var getFetch = function (colors, hasCustom) {\n      return function (callback) {\n        callback(getColors$1(colors, hasCustom));\n      };\n    };\n    var setIconColor = function (splitButtonApi, name, newColor) {\n      var id = name === 'forecolor' ? 'tox-icon-text-color__color' : 'tox-icon-highlight-bg-color__color';\n      splitButtonApi.setIconFill(id, newColor);\n    };\n    var registerTextColorButton = function (editor, name, format, tooltip, lastColor) {\n      editor.ui.registry.addSplitButton(name, {\n        tooltip: tooltip,\n        presets: 'color',\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        select: function (value) {\n          var optCurrentRgb = Optional.from(getCurrentColor(editor, format));\n          return optCurrentRgb.bind(function (currentRgb) {\n            return fromString(currentRgb).map(function (rgba) {\n              var currentHex = fromRgba(rgba).value;\n              return contains$1(value.toLowerCase(), currentHex);\n            });\n          }).getOr(false);\n        },\n        columns: getColorCols$1(editor),\n        fetch: getFetch(getColors(editor), hasCustomColors(editor)),\n        onAction: function (_splitButtonApi) {\n          if (lastColor.get() !== null) {\n            applyColor(editor, format, lastColor.get(), noop);\n          }\n        },\n        onItemAction: function (_splitButtonApi, value) {\n          applyColor(editor, format, value, function (newColor) {\n            lastColor.set(newColor);\n            fireTextColorChange(editor, {\n              name: name,\n              color: newColor\n            });\n          });\n        },\n        onSetup: function (splitButtonApi) {\n          if (lastColor.get() !== null) {\n            setIconColor(splitButtonApi, name, lastColor.get());\n          }\n          var handler = function (e) {\n            if (e.name === name) {\n              setIconColor(splitButtonApi, e.name, e.color);\n            }\n          };\n          editor.on('TextColorChange', handler);\n          return function () {\n            editor.off('TextColorChange', handler);\n          };\n        }\n      });\n    };\n    var registerTextColorMenuItem = function (editor, name, format, text) {\n      editor.ui.registry.addNestedMenuItem(name, {\n        text: text,\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        getSubmenuItems: function () {\n          return [{\n              type: 'fancymenuitem',\n              fancytype: 'colorswatch',\n              onAction: function (data) {\n                applyColor(editor, format, data.value, noop);\n              }\n            }];\n        }\n      });\n    };\n    var colorPickerDialog = function (editor) {\n      return function (callback, value) {\n        var isValid = false;\n        var onSubmit = function (api) {\n          var data = api.getData();\n          var hex = data.colorpicker;\n          if (isValid) {\n            callback(Optional.from(hex));\n            api.close();\n          } else {\n            editor.windowManager.alert(editor.translate([\n              'Invalid hex color code: {0}',\n              hex\n            ]));\n          }\n        };\n        var onAction = function (_api, details) {\n          if (details.name === 'hex-valid') {\n            isValid = details.value;\n          }\n        };\n        var initialData = { colorpicker: value };\n        editor.windowManager.open({\n          title: 'Color Picker',\n          size: 'normal',\n          body: {\n            type: 'panel',\n            items: [{\n                type: 'colorpicker',\n                name: 'colorpicker',\n                label: 'Color'\n              }]\n          },\n          buttons: [\n            {\n              type: 'cancel',\n              name: 'cancel',\n              text: 'Cancel'\n            },\n            {\n              type: 'submit',\n              name: 'save',\n              text: 'Save',\n              primary: true\n            }\n          ],\n          initialData: initialData,\n          onAction: onAction,\n          onSubmit: onSubmit,\n          onClose: noop,\n          onCancel: function () {\n            callback(Optional.none());\n          }\n        });\n      };\n    };\n    var register$1 = function (editor) {\n      registerCommands(editor);\n      var lastForeColor = Cell(null);\n      var lastBackColor = Cell(null);\n      registerTextColorButton(editor, 'forecolor', 'forecolor', 'Text color', lastForeColor);\n      registerTextColorButton(editor, 'backcolor', 'hilitecolor', 'Background color', lastBackColor);\n      registerTextColorMenuItem(editor, 'forecolor', 'forecolor', 'Text color');\n      registerTextColorMenuItem(editor, 'backcolor', 'hilitecolor', 'Background color');\n    };\n\n    var createPartialChoiceMenu = function (value, items, onItemValueHandler, columns, presets, itemResponse, select, providersBackstage) {\n      var hasIcons = menuHasIcons(items);\n      var presetItemTypes = presets !== 'color' ? 'normal' : 'color';\n      var alloyItems = createChoiceItems(items, onItemValueHandler, columns, presetItemTypes, itemResponse, select, providersBackstage);\n      return createPartialMenuWithAlloyItems(value, hasIcons, alloyItems, columns, presets);\n    };\n    var createChoiceItems = function (items, onItemValueHandler, columns, itemPresets, itemResponse, select, providersBackstage) {\n      return cat(map(items, function (item) {\n        if (item.type === 'choiceitem') {\n          return createChoiceMenuItem(item).fold(handleError, function (d) {\n            return Optional.some(renderChoiceItem(d, columns === 1, itemPresets, onItemValueHandler, select(item.value), itemResponse, providersBackstage, menuHasIcons(items)));\n          });\n        } else {\n          return Optional.none();\n        }\n      }));\n    };\n\n    var deriveMenuMovement = function (columns, presets) {\n      var menuMarkers = markers$1(presets);\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: true\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'grid',\n          selector: '.' + menuMarkers.item,\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        var rowClass = presets === 'color' ? 'tox-swatches__row' : 'tox-collection__group';\n        return {\n          mode: 'matrix',\n          rowSelector: '.' + rowClass\n        };\n      }\n    };\n    var deriveCollectionMovement = function (columns, presets) {\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: false,\n          selector: '.tox-collection__item'\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'flatgrid',\n          selector: '.' + 'tox-collection__item',\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        return {\n          mode: 'matrix',\n          selectors: {\n            row: presets === 'color' ? '.tox-swatches__row' : '.tox-collection__group',\n            cell: presets === 'color' ? '.' + colorClass : '.' + selectableClass\n          }\n        };\n      }\n    };\n\n    var renderColorSwatchItem = function (spec, backstage) {\n      var items = getColors$1(backstage.colorinput.getColors(), backstage.colorinput.hasCustomColors());\n      var columns = backstage.colorinput.getColorCols();\n      var presets = 'color';\n      var menuSpec = createPartialChoiceMenu(generate$1('menu-value'), items, function (value) {\n        spec.onAction({ value: value });\n      }, columns, presets, ItemResponse$1.CLOSE_ON_EXECUTE, never, backstage.shared.providers);\n      var widgetSpec = __assign(__assign({}, menuSpec), {\n        markers: markers$1(presets),\n        movement: deriveMenuMovement(columns, presets)\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$1('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$2.widget(Menu.sketch(widgetSpec))]\n      };\n    };\n\n    var cellOverEvent = generate$1('cell-over');\n    var cellExecuteEvent = generate$1('cell-execute');\n    var makeCell = function (row, col, labelId) {\n      var _a;\n      var emitCellOver = function (c) {\n        return emitWith(c, cellOverEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var emitExecute = function (c) {\n        return emitWith(c, cellExecuteEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var onClick = function (c, se) {\n        se.stop();\n        emitExecute(c);\n      };\n      return build$1({\n        dom: {\n          tag: 'div',\n          attributes: (_a = { role: 'button' }, _a['aria-labelledby'] = labelId, _a)\n        },\n        behaviours: derive$1([\n          config('insert-table-picker-cell', [\n            run(mouseover(), Focusing.focus),\n            run(execute(), emitExecute),\n            run(click(), onClick),\n            run(tap(), onClick)\n          ]),\n          Toggling.config({\n            toggleClass: 'tox-insert-table-picker__selected',\n            toggleOnExecute: false\n          }),\n          Focusing.config({ onFocus: emitCellOver })\n        ])\n      });\n    };\n    var makeCells = function (labelId, numRows, numCols) {\n      var cells = [];\n      for (var i = 0; i < numRows; i++) {\n        var row = [];\n        for (var j = 0; j < numCols; j++) {\n          row.push(makeCell(i, j, labelId));\n        }\n        cells.push(row);\n      }\n      return cells;\n    };\n    var selectCells = function (cells, selectedRow, selectedColumn, numRows, numColumns) {\n      for (var i = 0; i < numRows; i++) {\n        for (var j = 0; j < numColumns; j++) {\n          Toggling.set(cells[i][j], i <= selectedRow && j <= selectedColumn);\n        }\n      }\n    };\n    var makeComponents = function (cells) {\n      return bind(cells, function (cellRow) {\n        return map(cellRow, premade$1);\n      });\n    };\n    var makeLabelText = function (row, col) {\n      return text(col + 1 + 'x' + (row + 1));\n    };\n    var renderInsertTableMenuItem = function (spec) {\n      var numRows = 10;\n      var numColumns = 10;\n      var sizeLabelId = generate$1('size-label');\n      var cells = makeCells(sizeLabelId, numRows, numColumns);\n      var memLabel = record({\n        dom: {\n          tag: 'span',\n          classes: ['tox-insert-table-picker__label'],\n          attributes: { id: sizeLabelId }\n        },\n        components: [text('0x0')],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$1('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$2.widget({\n            dom: {\n              tag: 'div',\n              classes: ['tox-insert-table-picker']\n            },\n            components: makeComponents(cells).concat(memLabel.asSpec()),\n            behaviours: derive$1([\n              config('insert-table-picker', [\n                runWithTarget(cellOverEvent, function (c, t, e) {\n                  var row = e.event.row;\n                  var col = e.event.col;\n                  selectCells(cells, row, col, numRows, numColumns);\n                  Replacing.set(memLabel.get(c), [makeLabelText(row, col)]);\n                }),\n                runWithTarget(cellExecuteEvent, function (c, _, e) {\n                  spec.onAction({\n                    numRows: e.event.row + 1,\n                    numColumns: e.event.col + 1\n                  });\n                  emit(c, sandboxClose());\n                })\n              ]),\n              Keying.config({\n                initSize: {\n                  numRows: numRows,\n                  numColumns: numColumns\n                },\n                mode: 'flatgrid',\n                selector: '[role=\"button\"]'\n              })\n            ])\n          })]\n      };\n    };\n\n    var fancyMenuItems = {\n      inserttable: renderInsertTableMenuItem,\n      colorswatch: renderColorSwatchItem\n    };\n    var valueOpt = function (obj, key) {\n      return Object.prototype.hasOwnProperty.call(obj, key) ? Optional.some(obj[key]) : Optional.none();\n    };\n    var renderFancyMenuItem = function (spec, backstage) {\n      return valueOpt(fancyMenuItems, spec.fancytype).map(function (render) {\n        return render(spec, backstage);\n      });\n    };\n\n    var renderNestedItem = function (spec, itemResponse, providersBackstage, renderIcons, downwardsCaret) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      if (downwardsCaret === void 0) {\n        downwardsCaret = false;\n      }\n      var caret = downwardsCaret ? renderDownwardsCaret(providersBackstage.icons) : renderSubmenuCaret(providersBackstage.icons);\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.some(caret),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: noop,\n        onSetup: spec.onSetup,\n        triggersSubmenu: true,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    var renderNormalItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.none(),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    var renderSeparatorItem = function (spec) {\n      var innerHtml = spec.text.fold(function () {\n        return {};\n      }, function (text) {\n        return { innerHtml: text };\n      });\n      return {\n        type: 'separator',\n        dom: __assign({\n          tag: 'div',\n          classes: [\n            selectableClass,\n            groupHeadingClass\n          ]\n        }, innerHtml),\n        components: []\n      };\n    };\n\n    var renderToggleMenuItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        checkMark: Optional.some(renderCheckmark(providersBackstage.icons)),\n        caret: Optional.none(),\n        shortcutContent: spec.shortcut,\n        presets: 'normal',\n        meta: spec.meta\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var autocomplete = renderAutocompleteItem;\n    var separator = renderSeparatorItem;\n    var normal = renderNormalItem;\n    var nested = renderNestedItem;\n    var toggle$1 = renderToggleMenuItem;\n    var fancy = renderFancyMenuItem;\n    var card = renderCardMenuItem;\n\n    var FocusMode;\n    (function (FocusMode) {\n      FocusMode[FocusMode['ContentFocus'] = 0] = 'ContentFocus';\n      FocusMode[FocusMode['UiFocus'] = 1] = 'UiFocus';\n    }(FocusMode || (FocusMode = {})));\n    var createMenuItemFromBridge = function (item, itemResponse, backstage, menuHasIcons, isHorizontalMenu) {\n      var providersBackstage = backstage.shared.providers;\n      var parseForHorizontalMenu = function (menuitem) {\n        return !isHorizontalMenu ? menuitem : __assign(__assign({}, menuitem), {\n          shortcut: Optional.none(),\n          icon: menuitem.text.isSome() ? Optional.none() : menuitem.icon\n        });\n      };\n      switch (item.type) {\n      case 'menuitem':\n        return createMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(normal(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'nestedmenuitem':\n        return createNestedMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(nested(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons, isHorizontalMenu));\n        });\n      case 'togglemenuitem':\n        return createToggleMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(toggle$1(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'separator':\n        return createSeparatorMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(separator(d));\n        });\n      case 'fancymenuitem':\n        return createFancyMenuItem(item).fold(handleError, function (d) {\n          return fancy(parseForHorizontalMenu(d), backstage);\n        });\n      default: {\n          console.error('Unknown item in general menu', item);\n          return Optional.none();\n        }\n      }\n    };\n    var createAutocompleteItems = function (items, matchText, onItemValueHandler, columns, itemResponse, sharedBackstage, highlightOn) {\n      var renderText = columns === 1;\n      var renderIcons = !renderText || menuHasIcons(items);\n      return cat(map(items, function (item) {\n        switch (item.type) {\n        case 'separator':\n          return createSeparatorItem(item).fold(handleError, function (d) {\n            return Optional.some(separator(d));\n          });\n        case 'cardmenuitem':\n          return createCardMenuItem(item).fold(handleError, function (d) {\n            return Optional.some(card(__assign(__assign({}, d), {\n              onAction: function (api) {\n                d.onAction(api);\n                onItemValueHandler(d.value, d.meta);\n              }\n            }), itemResponse, sharedBackstage, {\n              itemBehaviours: tooltipBehaviour(d.meta, sharedBackstage),\n              cardText: {\n                matchText: matchText,\n                highlightOn: highlightOn\n              }\n            }));\n          });\n        case 'autocompleteitem':\n        default:\n          return createAutocompleterItem(item).fold(handleError, function (d) {\n            return Optional.some(autocomplete(d, matchText, renderText, 'normal', onItemValueHandler, itemResponse, sharedBackstage, renderIcons));\n          });\n        }\n      }));\n    };\n    var createPartialMenu = function (value, items, itemResponse, backstage, isHorizontalMenu) {\n      var hasIcons = menuHasIcons(items);\n      var alloyItems = cat(map(items, function (item) {\n        var itemHasIcon = function (i) {\n          return isHorizontalMenu ? !i.hasOwnProperty('text') : hasIcons;\n        };\n        var createItem = function (i) {\n          return createMenuItemFromBridge(i, itemResponse, backstage, itemHasIcon(i), isHorizontalMenu);\n        };\n        if (item.type === 'nestedmenuitem' && item.getSubmenuItems().length <= 0) {\n          return createItem(__assign(__assign({}, item), { disabled: true }));\n        } else {\n          return createItem(item);\n        }\n      }));\n      var createPartial = isHorizontalMenu ? createHorizontalPartialMenuWithAlloyItems : createPartialMenuWithAlloyItems;\n      return createPartial(value, hasIcons, alloyItems, 1, 'normal');\n    };\n    var createTieredDataFrom = function (partialMenu) {\n      return tieredMenu.singleData(partialMenu.value, partialMenu);\n    };\n    var createMenuFrom = function (partialMenu, columns, focusMode, presets) {\n      var focusManager = focusMode === FocusMode.ContentFocus ? highlights() : dom();\n      var movement = deriveMenuMovement(columns, presets);\n      var menuMarkers = markers$1(presets);\n      return {\n        dom: partialMenu.dom,\n        components: partialMenu.components,\n        items: partialMenu.items,\n        value: partialMenu.value,\n        markers: {\n          selectedItem: menuMarkers.selectedItem,\n          item: menuMarkers.item\n        },\n        movement: movement,\n        fakeFocus: focusMode === FocusMode.ContentFocus,\n        focusManager: focusManager,\n        menuBehaviours: SimpleBehaviours.unnamedEvents(columns !== 'auto' ? [] : [runOnAttached(function (comp, _se) {\n            detectSize(comp, 4, menuMarkers.item).each(function (_a) {\n              var numColumns = _a.numColumns, numRows = _a.numRows;\n              Keying.setGridSize(comp, numRows, numColumns);\n            });\n          })])\n      };\n    };\n\n    var register$2 = function (editor, sharedBackstage) {\n      var activeAutocompleter = Cell(Optional.none());\n      var processingAction = Cell(false);\n      var autocompleter = build$1(InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-autocompleter']\n        },\n        components: [],\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissAutocompleter', [run(dismissRequested(), function () {\n              return cancelIfNecessary();\n            })])]),\n        lazySink: sharedBackstage.getSink\n      }));\n      var isMenuOpen = function () {\n        return InlineView.isOpen(autocompleter);\n      };\n      var isActive = function () {\n        return activeAutocompleter.get().isSome();\n      };\n      var hideIfNecessary = function () {\n        if (isActive()) {\n          InlineView.hide(autocompleter);\n        }\n      };\n      var cancelIfNecessary = function () {\n        if (isActive()) {\n          var lastElement = activeAutocompleter.get().map(function (ac) {\n            return ac.element;\n          });\n          detect$4(lastElement.getOr(SugarElement.fromDom(editor.selection.getNode()))).each(unwrap);\n          hideIfNecessary();\n          activeAutocompleter.set(Optional.none());\n          processingAction.set(false);\n        }\n      };\n      var getAutocompleters = cached(function () {\n        return register(editor);\n      });\n      var getCombinedItems = function (triggerChar, matches) {\n        var columns = findMap(matches, function (m) {\n          return Optional.from(m.columns);\n        }).getOr(1);\n        return bind(matches, function (match) {\n          var choices = match.items;\n          return createAutocompleteItems(choices, match.matchText, function (itemValue, itemMeta) {\n            var nr = editor.selection.getRng();\n            getContext(editor.dom, nr, triggerChar).fold(function () {\n              return console.error('Lost context. Cursor probably moved');\n            }, function (_a) {\n              var range = _a.range;\n              var autocompleterApi = {\n                hide: function () {\n                  cancelIfNecessary();\n                },\n                reload: function (fetchOptions) {\n                  hideIfNecessary();\n                  load(fetchOptions);\n                }\n              };\n              processingAction.set(true);\n              match.onAction(autocompleterApi, range, itemValue, itemMeta);\n              processingAction.set(false);\n            });\n          }, columns, ItemResponse$1.BUBBLE_TO_SANDBOX, sharedBackstage, match.highlightOn);\n        });\n      };\n      var commenceIfNecessary = function (context) {\n        if (!isActive()) {\n          var wrapper = create$4(editor, context.range);\n          activeAutocompleter.set(Optional.some({\n            triggerChar: context.triggerChar,\n            element: wrapper,\n            matchLength: context.text.length\n          }));\n          processingAction.set(false);\n        }\n      };\n      var display = function (ac, context, lookupData, items) {\n        ac.matchLength = context.text.length;\n        var columns = findMap(lookupData, function (ld) {\n          return Optional.from(ld.columns);\n        }).getOr(1);\n        InlineView.showAt(autocompleter, {\n          anchor: 'node',\n          root: SugarElement.fromDom(editor.getBody()),\n          node: Optional.from(ac.element)\n        }, Menu.sketch(createMenuFrom(createPartialMenuWithAlloyItems('autocompleter-value', true, items, columns, 'normal'), columns, FocusMode.ContentFocus, 'normal')));\n        InlineView.getContent(autocompleter).each(Highlighting.highlightFirst);\n      };\n      var doLookup = function (fetchOptions) {\n        return activeAutocompleter.get().map(function (ac) {\n          return getContext(editor.dom, editor.selection.getRng(), ac.triggerChar).bind(function (newContext) {\n            return lookupWithContext(editor, getAutocompleters, newContext, fetchOptions);\n          });\n        }).getOrThunk(function () {\n          return lookup(editor, getAutocompleters);\n        });\n      };\n      var load = function (fetchOptions) {\n        doLookup(fetchOptions).fold(cancelIfNecessary, function (lookupInfo) {\n          commenceIfNecessary(lookupInfo.context);\n          lookupInfo.lookupData.then(function (lookupData) {\n            activeAutocompleter.get().map(function (ac) {\n              var context = lookupInfo.context;\n              if (ac.triggerChar === context.triggerChar) {\n                var combinedItems = getCombinedItems(context.triggerChar, lookupData);\n                if (combinedItems.length > 0) {\n                  display(ac, context, lookupData, combinedItems);\n                } else if (context.text.length - ac.matchLength >= 10) {\n                  cancelIfNecessary();\n                } else {\n                  hideIfNecessary();\n                }\n              }\n            });\n          });\n        });\n      };\n      var onKeypress = last$2(function (e) {\n        if (e.which === 27) {\n          return;\n        }\n        load();\n      }, 50);\n      var autocompleterUiApi = {\n        onKeypress: onKeypress,\n        cancelIfNecessary: cancelIfNecessary,\n        isMenuOpen: isMenuOpen,\n        isActive: isActive,\n        isProcessingAction: processingAction.get,\n        getView: function () {\n          return InlineView.getContent(autocompleter);\n        }\n      };\n      if (editor.hasPlugin('rtc') === false) {\n        AutocompleterEditorEvents.setup(autocompleterUiApi, editor);\n      }\n    };\n    var Autocompleter = { register: register$2 };\n\n    var filter$2 = always;\n    var bind$3 = function (element, event, handler) {\n      return bind$2(element, event, filter$2, handler);\n    };\n    var capture$1 = function (element, event, handler) {\n      return capture(element, event, filter$2, handler);\n    };\n    var fromRawEvent$1 = fromRawEvent;\n\n    var closest$4 = function (scope, selector, isRoot) {\n      return closest$3(scope, selector, isRoot).isSome();\n    };\n\n    var DelayedFunction = function (fun, delay) {\n      var ref = null;\n      var schedule = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        ref = setTimeout(function () {\n          fun.apply(null, args);\n          ref = null;\n        }, delay);\n      };\n      var cancel = function () {\n        if (ref !== null) {\n          clearTimeout(ref);\n          ref = null;\n        }\n      };\n      return {\n        cancel: cancel,\n        schedule: schedule\n      };\n    };\n\n    var SIGNIFICANT_MOVE = 5;\n    var LONGPRESS_DELAY = 400;\n    var getTouch = function (event) {\n      var raw = event.raw;\n      if (raw.touches === undefined || raw.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(raw.touches[0]);\n    };\n    var isFarEnough = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x);\n      var distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    var monitor = function (settings) {\n      var startData = Cell(Optional.none());\n      var longpressFired = Cell(false);\n      var longpress$1 = DelayedFunction(function (event) {\n        settings.triggerEvent(longpress(), event);\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      var handleTouchstart = function (event) {\n        getTouch(event).each(function (touch) {\n          longpress$1.cancel();\n          var data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: event.target\n          };\n          longpress$1.schedule(event);\n          longpressFired.set(false);\n          startData.set(Optional.some(data));\n        });\n        return Optional.none();\n      };\n      var handleTouchmove = function (event) {\n        longpress$1.cancel();\n        getTouch(event).each(function (touch) {\n          startData.get().each(function (data) {\n            if (isFarEnough(touch, data)) {\n              startData.set(Optional.none());\n            }\n          });\n        });\n        return Optional.none();\n      };\n      var handleTouchend = function (event) {\n        longpress$1.cancel();\n        var isSame = function (data) {\n          return eq$1(data.target, event.target);\n        };\n        return startData.get().filter(isSame).map(function (_data) {\n          if (longpressFired.get()) {\n            event.prevent();\n            return false;\n          } else {\n            return settings.triggerEvent(tap(), event);\n          }\n        });\n      };\n      var handlers = wrapAll$1([\n        {\n          key: touchstart(),\n          value: handleTouchstart\n        },\n        {\n          key: touchmove(),\n          value: handleTouchmove\n        },\n        {\n          key: touchend(),\n          value: handleTouchend\n        }\n      ]);\n      var fireIfReady = function (event, type) {\n        return get$1(handlers, type).bind(function (handler) {\n          return handler(event);\n        });\n      };\n      return { fireIfReady: fireIfReady };\n    };\n\n    var isDangerous = function (event) {\n      var keyEv = event.raw;\n      return keyEv.which === BACKSPACE[0] && !contains([\n        'input',\n        'textarea'\n      ], name(event.target)) && !closest$4(event.target, '[contenteditable=\"true\"]');\n    };\n    var isFirefox = function () {\n      return detect$3().browser.isFirefox();\n    };\n    var settingsSchema = objOfOnly([\n      strictFunction('triggerEvent'),\n      defaulted$1('stopBackspace', true)\n    ]);\n    var bindFocus = function (container, handler) {\n      if (isFirefox()) {\n        return capture$1(container, 'focus', handler);\n      } else {\n        return bind$3(container, 'focusin', handler);\n      }\n    };\n    var bindBlur = function (container, handler) {\n      if (isFirefox()) {\n        return capture$1(container, 'blur', handler);\n      } else {\n        return bind$3(container, 'focusout', handler);\n      }\n    };\n    var setup$1 = function (container, rawSettings) {\n      var settings = asRawOrDie('Getting GUI events settings', settingsSchema, rawSettings);\n      var pointerEvents = [\n        'touchstart',\n        'touchmove',\n        'touchend',\n        'touchcancel',\n        'gesturestart',\n        'mousedown',\n        'mouseup',\n        'mouseover',\n        'mousemove',\n        'mouseout',\n        'click'\n      ];\n      var tapEvent = monitor(settings);\n      var simpleEvents = map(pointerEvents.concat([\n        'selectstart',\n        'input',\n        'contextmenu',\n        'change',\n        'transitionend',\n        'drag',\n        'dragstart',\n        'dragend',\n        'dragenter',\n        'dragleave',\n        'dragover',\n        'drop',\n        'keyup'\n      ]), function (type) {\n        return bind$3(container, type, function (event) {\n          tapEvent.fireIfReady(event, type).each(function (tapStopped) {\n            if (tapStopped) {\n              event.kill();\n            }\n          });\n          var stopped = settings.triggerEvent(type, event);\n          if (stopped) {\n            event.kill();\n          }\n        });\n      });\n      var pasteTimeout = Cell(Optional.none());\n      var onPaste = bind$3(container, 'paste', function (event) {\n        tapEvent.fireIfReady(event, 'paste').each(function (tapStopped) {\n          if (tapStopped) {\n            event.kill();\n          }\n        });\n        var stopped = settings.triggerEvent('paste', event);\n        if (stopped) {\n          event.kill();\n        }\n        pasteTimeout.set(Optional.some(setTimeout(function () {\n          settings.triggerEvent(postPaste(), event);\n        }, 0)));\n      });\n      var onKeydown = bind$3(container, 'keydown', function (event) {\n        var stopped = settings.triggerEvent('keydown', event);\n        if (stopped) {\n          event.kill();\n        } else if (settings.stopBackspace === true && isDangerous(event)) {\n          event.prevent();\n        }\n      });\n      var onFocusIn = bindFocus(container, function (event) {\n        var stopped = settings.triggerEvent('focusin', event);\n        if (stopped) {\n          event.kill();\n        }\n      });\n      var focusoutTimeout = Cell(Optional.none());\n      var onFocusOut = bindBlur(container, function (event) {\n        var stopped = settings.triggerEvent('focusout', event);\n        if (stopped) {\n          event.kill();\n        }\n        focusoutTimeout.set(Optional.some(setTimeout(function () {\n          settings.triggerEvent(postBlur(), event);\n        }, 0)));\n      });\n      var unbind = function () {\n        each(simpleEvents, function (e) {\n          e.unbind();\n        });\n        onKeydown.unbind();\n        onFocusIn.unbind();\n        onFocusOut.unbind();\n        onPaste.unbind();\n        pasteTimeout.get().each(clearTimeout);\n        focusoutTimeout.get().each(clearTimeout);\n      };\n      return { unbind: unbind };\n    };\n\n    var derive$2 = function (rawEvent, rawTarget) {\n      var source = get$1(rawEvent, 'target').getOr(rawTarget);\n      return Cell(source);\n    };\n\n    var fromSource = function (event, source) {\n      var stopper = Cell(false);\n      var cutter = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      var cut = function () {\n        cutter.set(true);\n      };\n      return {\n        stop: stop,\n        cut: cut,\n        isStopped: stopper.get,\n        isCut: cutter.get,\n        event: event,\n        setSource: source.set,\n        getSource: source.get\n      };\n    };\n    var fromExternal = function (event) {\n      var stopper = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      return {\n        stop: stop,\n        cut: noop,\n        isStopped: stopper.get,\n        isCut: never,\n        event: event,\n        setSource: die('Cannot set source of a broadcasted event'),\n        getSource: die('Cannot get source of a broadcasted event')\n      };\n    };\n\n    var adt$b = Adt.generate([\n      { stopped: [] },\n      { resume: ['element'] },\n      { complete: [] }\n    ]);\n    var doTriggerHandler = function (lookup, eventType, rawEvent, target, source, logger) {\n      var handler = lookup(eventType, target);\n      var simulatedEvent = fromSource(rawEvent, source);\n      return handler.fold(function () {\n        logger.logEventNoHandlers(eventType, target);\n        return adt$b.complete();\n      }, function (handlerInfo) {\n        var descHandler = handlerInfo.descHandler;\n        var eventHandler = getCurried(descHandler);\n        eventHandler(simulatedEvent);\n        if (simulatedEvent.isStopped()) {\n          logger.logEventStopped(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$b.stopped();\n        } else if (simulatedEvent.isCut()) {\n          logger.logEventCut(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$b.complete();\n        } else {\n          return parent(handlerInfo.element).fold(function () {\n            logger.logNoParent(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$b.complete();\n          }, function (parent) {\n            logger.logEventResponse(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$b.resume(parent);\n          });\n        }\n      });\n    };\n    var doTriggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, source, logger) {\n      return doTriggerHandler(lookup, eventType, rawEvent, rawTarget, source, logger).fold(always, function (parent) {\n        return doTriggerOnUntilStopped(lookup, eventType, rawEvent, parent, source, logger);\n      }, never);\n    };\n    var triggerHandler = function (lookup, eventType, rawEvent, target, logger) {\n      var source = derive$2(rawEvent, target);\n      return doTriggerHandler(lookup, eventType, rawEvent, target, source, logger);\n    };\n    var broadcast = function (listeners, rawEvent, _logger) {\n      var simulatedEvent = fromExternal(rawEvent);\n      each(listeners, function (listener) {\n        var descHandler = listener.descHandler;\n        var handler = getCurried(descHandler);\n        handler(simulatedEvent);\n      });\n      return simulatedEvent.isStopped();\n    };\n    var triggerUntilStopped = function (lookup, eventType, rawEvent, logger) {\n      return triggerOnUntilStopped(lookup, eventType, rawEvent, rawEvent.target, logger);\n    };\n    var triggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, logger) {\n      var source = derive$2(rawEvent, rawTarget);\n      return doTriggerOnUntilStopped(lookup, eventType, rawEvent, rawTarget, source, logger);\n    };\n\n    var eventHandler = function (element, descHandler) {\n      return {\n        element: element,\n        descHandler: descHandler\n      };\n    };\n    var broadcastHandler = function (id, handler) {\n      return {\n        id: id,\n        descHandler: handler\n      };\n    };\n    var EventRegistry = function () {\n      var registry = {};\n      var registerId = function (extraArgs, id, events) {\n        each$1(events, function (v, k) {\n          var handlers = registry[k] !== undefined ? registry[k] : {};\n          handlers[id] = curryArgs(v, extraArgs);\n          registry[k] = handlers;\n        });\n      };\n      var findHandler = function (handlers, elem) {\n        return read$1(elem).fold(function () {\n          return Optional.none();\n        }, function (id) {\n          return handlers.bind(function (h) {\n            return get$1(h, id);\n          }).map(function (descHandler) {\n            return eventHandler(elem, descHandler);\n          });\n        });\n      };\n      var filterByType = function (type) {\n        return get$1(registry, type).map(function (handlers) {\n          return mapToArray(handlers, function (f, id) {\n            return broadcastHandler(id, f);\n          });\n        }).getOr([]);\n      };\n      var find = function (isAboveRoot, type, target) {\n        var handlers = get$1(registry, type);\n        return closest(target, function (elem) {\n          return findHandler(handlers, elem);\n        }, isAboveRoot);\n      };\n      var unregisterId = function (id) {\n        each$1(registry, function (handlersById, _eventName) {\n          if (handlersById.hasOwnProperty(id)) {\n            delete handlersById[id];\n          }\n        });\n      };\n      return {\n        registerId: registerId,\n        unregisterId: unregisterId,\n        filterByType: filterByType,\n        find: find\n      };\n    };\n\n    var Registry = function () {\n      var events = EventRegistry();\n      var components = {};\n      var readOrTag = function (component) {\n        var elem = component.element;\n        return read$1(elem).fold(function () {\n          return write('uid-', component.element);\n        }, function (uid) {\n          return uid;\n        });\n      };\n      var failOnDuplicate = function (component, tagId) {\n        var conflict = components[tagId];\n        if (conflict === component) {\n          unregister(component);\n        } else {\n          throw new Error('The tagId \"' + tagId + '\" is already used by: ' + element(conflict.element) + '\\nCannot use it for: ' + element(component.element) + '\\n' + 'The conflicting element is' + (inBody(conflict.element) ? ' ' : ' not ') + 'already in the DOM');\n        }\n      };\n      var register = function (component) {\n        var tagId = readOrTag(component);\n        if (hasNonNullableKey(components, tagId)) {\n          failOnDuplicate(component, tagId);\n        }\n        var extraArgs = [component];\n        events.registerId(extraArgs, tagId, component.events);\n        components[tagId] = component;\n      };\n      var unregister = function (component) {\n        read$1(component.element).each(function (tagId) {\n          delete components[tagId];\n          events.unregisterId(tagId);\n        });\n      };\n      var filter = function (type) {\n        return events.filterByType(type);\n      };\n      var find = function (isAboveRoot, type, target) {\n        return events.find(isAboveRoot, type, target);\n      };\n      var getById = function (id) {\n        return get$1(components, id);\n      };\n      return {\n        find: find,\n        filter: filter,\n        register: register,\n        unregister: unregister,\n        getById: getById\n      };\n    };\n\n    var factory$3 = function (detail) {\n      var _a = detail.dom, attributes = _a.attributes, domWithoutAttributes = __rest(_a, ['attributes']);\n      return {\n        uid: detail.uid,\n        dom: __assign({\n          tag: 'div',\n          attributes: __assign({ role: 'presentation' }, attributes)\n        }, domWithoutAttributes),\n        components: detail.components,\n        behaviours: get$d(detail.containerBehaviours),\n        events: detail.events,\n        domModification: detail.domModification,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Container = single$2({\n      name: 'Container',\n      factory: factory$3,\n      configFields: [\n        defaulted$1('components', []),\n        field$1('containerBehaviours', []),\n        defaulted$1('events', {}),\n        defaulted$1('domModification', {}),\n        defaulted$1('eventOrder', {})\n      ]\n    });\n\n    var takeover = function (root) {\n      var isAboveRoot = function (el) {\n        return parent(root.element).fold(always, function (parent) {\n          return eq$1(el, parent);\n        });\n      };\n      var registry = Registry();\n      var lookup = function (eventName, target) {\n        return registry.find(isAboveRoot, eventName, target);\n      };\n      var domEvents = setup$1(root.element, {\n        triggerEvent: function (eventName, event) {\n          return monitorEvent(eventName, event.target, function (logger) {\n            return triggerUntilStopped(lookup, eventName, event, logger);\n          });\n        }\n      });\n      var systemApi = {\n        debugInfo: constant('real'),\n        triggerEvent: function (eventName, target, data) {\n          monitorEvent(eventName, target, function (logger) {\n            return triggerOnUntilStopped(lookup, eventName, data, target, logger);\n          });\n        },\n        triggerFocus: function (target, originator) {\n          read$1(target).fold(function () {\n            focus$1(target);\n          }, function (_alloyId) {\n            monitorEvent(focus(), target, function (logger) {\n              triggerHandler(lookup, focus(), {\n                originator: originator,\n                kill: noop,\n                prevent: noop,\n                target: target\n              }, target, logger);\n              return false;\n            });\n          });\n        },\n        triggerEscape: function (comp, simulatedEvent) {\n          systemApi.triggerEvent('keydown', comp.element, simulatedEvent.event);\n        },\n        getByUid: function (uid) {\n          return getByUid(uid);\n        },\n        getByDom: function (elem) {\n          return getByDom(elem);\n        },\n        build: build$1,\n        addToGui: function (c) {\n          add(c);\n        },\n        removeFromGui: function (c) {\n          remove$1(c);\n        },\n        addToWorld: function (c) {\n          addToWorld(c);\n        },\n        removeFromWorld: function (c) {\n          removeFromWorld(c);\n        },\n        broadcast: function (message) {\n          broadcast$1(message);\n        },\n        broadcastOn: function (channels, message) {\n          broadcastOn(channels, message);\n        },\n        broadcastEvent: function (eventName, event) {\n          broadcastEvent(eventName, event);\n        },\n        isConnected: always\n      };\n      var addToWorld = function (component) {\n        component.connect(systemApi);\n        if (!isText(component.element)) {\n          registry.register(component);\n          each(component.components(), addToWorld);\n          systemApi.triggerEvent(systemInit(), component.element, { target: component.element });\n        }\n      };\n      var removeFromWorld = function (component) {\n        if (!isText(component.element)) {\n          each(component.components(), removeFromWorld);\n          registry.unregister(component);\n        }\n        component.disconnect();\n      };\n      var add = function (component) {\n        attach$1(root, component);\n      };\n      var remove$1 = function (component) {\n        detach(component);\n      };\n      var destroy = function () {\n        domEvents.unbind();\n        remove(root.element);\n      };\n      var broadcastData = function (data) {\n        var receivers = registry.filter(receive());\n        each(receivers, function (receiver) {\n          var descHandler = receiver.descHandler;\n          var handler = getCurried(descHandler);\n          handler(data);\n        });\n      };\n      var broadcast$1 = function (message) {\n        broadcastData({\n          universal: true,\n          data: message\n        });\n      };\n      var broadcastOn = function (channels, message) {\n        broadcastData({\n          universal: false,\n          channels: channels,\n          data: message\n        });\n      };\n      var broadcastEvent = function (eventName, event) {\n        var listeners = registry.filter(eventName);\n        return broadcast(listeners, event);\n      };\n      var getByUid = function (uid) {\n        return registry.getById(uid).fold(function () {\n          return Result.error(new Error('Could not find component with uid: \"' + uid + '\" in system.'));\n        }, Result.value);\n      };\n      var getByDom = function (elem) {\n        var uid = read$1(elem).getOr('not found');\n        return getByUid(uid);\n      };\n      addToWorld(root);\n      return {\n        root: root,\n        element: root.element,\n        destroy: destroy,\n        add: add,\n        remove: remove$1,\n        getByUid: getByUid,\n        getByDom: getByDom,\n        addToWorld: addToWorld,\n        removeFromWorld: removeFromWorld,\n        broadcast: broadcast$1,\n        broadcastOn: broadcastOn,\n        broadcastEvent: broadcastEvent\n      };\n    };\n\n    var renderBar = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-bar',\n            'tox-form__controls-h-stack'\n          ]\n        },\n        components: map(spec.items, backstage.interpreter)\n      };\n    };\n\n    var schema$e = constant([\n      defaulted$1('prefix', 'form-field'),\n      field$1('fieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var parts$3 = constant([\n      optional({\n        schema: [strict$1('dom')],\n        name: 'label'\n      }),\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [strict$1('text')],\n        name: 'aria-descriptor'\n      }),\n      required({\n        factory: {\n          sketch: function (spec) {\n            var excludeFactory = exclude$1(spec, ['factory']);\n            return spec.factory.sketch(excludeFactory);\n          }\n        },\n        schema: [strict$1('factory')],\n        name: 'field'\n      })\n    ]);\n\n    var factory$4 = function (detail, components, _spec, _externals) {\n      var behaviours = augment(detail.fieldBehaviours, [\n        Composing.config({\n          find: function (container) {\n            return getPart(container, detail, 'field');\n          }\n        }),\n        Representing.config({\n          store: {\n            mode: 'manual',\n            getValue: function (field) {\n              return Composing.getCurrent(field).bind(Representing.getValue);\n            },\n            setValue: function (field, value) {\n              Composing.getCurrent(field).each(function (current) {\n                Representing.setValue(current, value);\n              });\n            }\n          }\n        })\n      ]);\n      var events = derive([runOnAttached(function (component, _simulatedEvent) {\n          var ps = getParts(component, detail, [\n            'label',\n            'field',\n            'aria-descriptor'\n          ]);\n          ps.field().each(function (field) {\n            var id = generate$1(detail.prefix);\n            ps.label().each(function (label) {\n              set$1(label.element, 'for', id);\n              set$1(field.element, 'id', id);\n            });\n            ps['aria-descriptor']().each(function (descriptor) {\n              var descriptorId = generate$1(detail.prefix);\n              set$1(descriptor.element, 'id', descriptorId);\n              set$1(field.element, 'aria-describedby', descriptorId);\n            });\n          });\n        })]);\n      var apis = {\n        getField: function (container) {\n          return getPart(container, detail, 'field');\n        },\n        getLabel: function (container) {\n          return getPart(container, detail, 'label');\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: behaviours,\n        events: events,\n        apis: apis\n      };\n    };\n    var FormField = composite$1({\n      name: 'FormField',\n      configFields: schema$e(),\n      partFields: parts$3(),\n      factory: factory$4,\n      apis: {\n        getField: function (apis, comp) {\n          return apis.getField(comp);\n        },\n        getLabel: function (apis, comp) {\n          return apis.getLabel(comp);\n        }\n      }\n    });\n\n    var exhibit$4 = function (base, tabConfig) {\n      return nu$6({\n        attributes: wrapAll$1([{\n            key: tabConfig.tabAttr,\n            value: 'true'\n          }])\n      });\n    };\n\n    var ActiveTabstopping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$4\n    });\n\n    var TabstopSchema = [defaulted$1('tabAttr', 'data-alloy-tabstop')];\n\n    var Tabstopping = create$1({\n      fields: TabstopSchema,\n      name: 'tabstopping',\n      active: ActiveTabstopping\n    });\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.html.Entities');\n\n    var renderFormFieldWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      var spec = renderFormFieldSpecWith(pLabel, pField, extraClasses, extraBehaviours);\n      return FormField.sketch(spec);\n    };\n    var renderFormField = function (pLabel, pField) {\n      return renderFormFieldWith(pLabel, pField, [], []);\n    };\n    var renderFormFieldSpecWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      return {\n        dom: renderFormFieldDomWith(extraClasses),\n        components: pLabel.toArray().concat([pField]),\n        fieldBehaviours: derive$1(extraBehaviours)\n      };\n    };\n    var renderFormFieldDom = function () {\n      return renderFormFieldDomWith([]);\n    };\n    var renderFormFieldDomWith = function (extraClasses) {\n      return {\n        tag: 'div',\n        classes: ['tox-form__group'].concat(extraClasses)\n      };\n    };\n    var renderLabel = function (label, providersBackstage) {\n      return FormField.parts.label({\n        dom: {\n          tag: 'label',\n          classes: ['tox-label'],\n          innerHtml: providersBackstage.translate(label)\n        }\n      });\n    };\n\n    var formChangeEvent = generate$1('form-component-change');\n    var formCloseEvent = generate$1('form-close');\n    var formCancelEvent = generate$1('form-cancel');\n    var formActionEvent = generate$1('form-action');\n    var formSubmitEvent = generate$1('form-submit');\n    var formBlockEvent = generate$1('form-block');\n    var formUnblockEvent = generate$1('form-unblock');\n    var formTabChangeEvent = generate$1('form-tabchange');\n    var formResizeEvent = generate$1('form-resize');\n\n    var renderCollection = function (spec, providersBackstage) {\n      var _a;\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var runOnItem = function (f) {\n        return function (comp, se) {\n          closest$3(se.event.target, '[data-collection-item-value]').each(function (target) {\n            f(comp, se, target, get$3(target, 'data-collection-item-value'));\n          });\n        };\n      };\n      var setContents = function (comp, items) {\n        var htmlLines = map(items, function (item) {\n          var itemText = global$6.translate(item.text);\n          var textContent = spec.columns === 1 ? '<div class=\"tox-collection__item-label\">' + itemText + '</div>' : '';\n          var iconContent = '<div class=\"tox-collection__item-icon\">' + item.icon + '</div>';\n          var mapItemName = {\n            '_': ' ',\n            ' - ': ' ',\n            '-': ' '\n          };\n          var ariaLabel = itemText.replace(/\\_| \\- |\\-/g, function (match) {\n            return mapItemName[match];\n          });\n          var disabledClass = providersBackstage.isDisabled() ? ' tox-collection__item--state-disabled' : '';\n          return '<div class=\"tox-collection__item' + disabledClass + '\" tabindex=\"-1\" data-collection-item-value=\"' + global$a.encodeAllRaw(item.value) + '\" title=\"' + ariaLabel + '\" aria-label=\"' + ariaLabel + '\">' + iconContent + textContent + '</div>';\n        });\n        var chunks = spec.columns !== 'auto' && spec.columns > 1 ? chunk(htmlLines, spec.columns) : [htmlLines];\n        var html = map(chunks, function (ch) {\n          return '<div class=\"tox-collection__group\">' + ch.join('') + '</div>';\n        });\n        set(comp.element, html.join(''));\n      };\n      var onClick = runOnItem(function (comp, se, tgt, itemValue) {\n        se.stop();\n        if (!providersBackstage.isDisabled()) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }\n      });\n      var collectionEvents = [\n        run(mouseover(), runOnItem(function (comp, se, tgt) {\n          focus$1(tgt);\n        })),\n        run(click(), onClick),\n        run(tap(), onClick),\n        run(focusin(), runOnItem(function (comp, se, tgt) {\n          descendant$1(comp.element, '.' + activeClass).each(function (currentActive) {\n            remove$4(currentActive, activeClass);\n          });\n          add$2(tgt, activeClass);\n        })),\n        run(focusout(), runOnItem(function (comp) {\n          descendant$1(comp.element, '.' + activeClass).each(function (currentActive) {\n            remove$4(currentActive, activeClass);\n          });\n        })),\n        runOnExecute(runOnItem(function (comp, se, tgt, itemValue) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }))\n      ];\n      var iterCollectionItems = function (comp, applyAttributes) {\n        return map(descendants(comp.element, '.tox-collection__item'), applyAttributes);\n      };\n      var pField = FormField.parts.field({\n        dom: {\n          tag: 'div',\n          classes: ['tox-collection'].concat(spec.columns !== 1 ? ['tox-collection--grid'] : ['tox-collection--list'])\n        },\n        components: [],\n        factory: { sketch: identity },\n        behaviours: derive$1([\n          Disabling.config({\n            disabled: providersBackstage.isDisabled,\n            onDisabled: function (comp) {\n              iterCollectionItems(comp, function (childElm) {\n                add$2(childElm, 'tox-collection__item--state-disabled');\n                set$1(childElm, 'aria-disabled', true);\n              });\n            },\n            onEnabled: function (comp) {\n              iterCollectionItems(comp, function (childElm) {\n                remove$4(childElm, 'tox-collection__item--state-disabled');\n                remove$1(childElm, 'aria-disabled');\n              });\n            }\n          }),\n          receivingConfig(),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: []\n            },\n            onSetValue: function (comp, items) {\n              setContents(comp, items);\n              if (spec.columns === 'auto') {\n                detectSize(comp, 5, 'tox-collection__item').each(function (_a) {\n                  var numRows = _a.numRows, numColumns = _a.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              }\n              emit(comp, formResizeEvent);\n            }\n          }),\n          Tabstopping.config({}),\n          Keying.config(deriveCollectionMovement(spec.columns, 'normal')),\n          config('collection-events', collectionEvents)\n        ]),\n        eventOrder: (_a = {}, _a[execute()] = [\n          'disabling',\n          'alloy.base.behaviour',\n          'collection-events'\n        ], _a)\n      });\n      var extraClasses = ['tox-form__group--collection'];\n      return renderFormFieldWith(pLabel, pField, extraClasses, []);\n    };\n\n    var schema$f = constant([\n      option('data'),\n      defaulted$1('inputAttributes', {}),\n      defaulted$1('inputStyles', {}),\n      defaulted$1('tag', 'input'),\n      defaulted$1('inputClasses', []),\n      onHandler('onSetValue'),\n      defaulted$1('styles', {}),\n      defaulted$1('eventOrder', {}),\n      field$1('inputBehaviours', [\n        Representing,\n        Focusing\n      ]),\n      defaulted$1('selectOnFocus', true)\n    ]);\n    var focusBehaviours = function (detail) {\n      return derive$1([Focusing.config({\n          onFocus: !detail.selectOnFocus ? noop : function (component) {\n            var input = component.element;\n            var value = get$6(input);\n            input.dom.setSelectionRange(0, value.length);\n          }\n        })]);\n    };\n    var behaviours = function (detail) {\n      return __assign(__assign({}, focusBehaviours(detail)), augment(detail.inputBehaviours, [Representing.config({\n          store: __assign(__assign({ mode: 'manual' }, detail.data.map(function (data) {\n            return { initialValue: data };\n          }).getOr({})), {\n            getValue: function (input) {\n              return get$6(input.element);\n            },\n            setValue: function (input, data) {\n              var current = get$6(input.element);\n              if (current !== data) {\n                set$3(input.element, data);\n              }\n            }\n          }),\n          onSetValue: detail.onSetValue\n        })]));\n    };\n    var dom$2 = function (detail) {\n      return {\n        tag: detail.tag,\n        attributes: __assign({ type: 'text' }, detail.inputAttributes),\n        styles: detail.inputStyles,\n        classes: detail.inputClasses\n      };\n    };\n\n    var factory$5 = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: dom$2(detail),\n        components: [],\n        behaviours: behaviours(detail),\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Input = single$2({\n      name: 'Input',\n      configFields: schema$f(),\n      factory: factory$5\n    });\n\n    var exports$1 = {}, module = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module, undefined));\n    var Promise = module.exports.boltExport;\n\n    var nu$a = function (baseFn) {\n      var data = Optional.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$a(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        if (!isReady()) {\n          data = Optional.some(x);\n          run(callbacks);\n          callbacks = [];\n        }\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure = function (a) {\n      return nu$a(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$a,\n      pure: pure\n    };\n\n    var errorReporter = function (err) {\n      setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make$3 = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make$3(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make$3(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make$3(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make$3(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$b = function (baseFn) {\n      return make$3(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$1 = function (a) {\n      return make$3(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$b,\n      pure: pure$1\n    };\n\n    var ariaElements = [\n      'input',\n      'textarea'\n    ];\n    var isAriaElement = function (elem) {\n      var name$1 = name(elem);\n      return contains(ariaElements, name$1);\n    };\n    var markValid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      remove$4(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element)) {\n          set$1(component.element, 'aria-invalid', false);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set(container, notifyInfo.validHtml);\n        });\n        notifyInfo.onValid(component);\n      });\n    };\n    var markInvalid = function (component, invalidConfig, invalidState, text) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      add$2(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element)) {\n          set$1(component.element, 'aria-invalid', true);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set(container, text);\n        });\n        notifyInfo.onInvalid(component, text);\n      });\n    };\n    var query = function (component, invalidConfig, _invalidState) {\n      return invalidConfig.validator.fold(function () {\n        return Future.pure(Result.value(true));\n      }, function (validatorInfo) {\n        return validatorInfo.validate(component);\n      });\n    };\n    var run$1 = function (component, invalidConfig, invalidState) {\n      invalidConfig.notify.each(function (notifyInfo) {\n        notifyInfo.onValidate(component);\n      });\n      return query(component, invalidConfig).map(function (valid) {\n        if (component.getSystem().isConnected()) {\n          return valid.fold(function (err) {\n            markInvalid(component, invalidConfig, invalidState, err);\n            return Result.error(err);\n          }, function (v) {\n            markValid(component, invalidConfig);\n            return Result.value(v);\n          });\n        } else {\n          return Result.error('No longer in system');\n        }\n      });\n    };\n    var isInvalid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      return has$2(elem, invalidConfig.invalidClass);\n    };\n\n    var InvalidateApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        markValid: markValid,\n        markInvalid: markInvalid,\n        query: query,\n        run: run$1,\n        isInvalid: isInvalid\n    });\n\n    var events$a = function (invalidConfig, invalidState) {\n      return invalidConfig.validator.map(function (validatorInfo) {\n        return derive([run(validatorInfo.onEvent, function (component) {\n            run$1(component, invalidConfig, invalidState).get(identity);\n          })].concat(validatorInfo.validateOnLoad ? [runOnAttached(function (component) {\n            run$1(component, invalidConfig, invalidState).get(noop);\n          })] : []));\n      }).getOr({});\n    };\n\n    var ActiveInvalidate = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$a\n    });\n\n    var InvalidateSchema = [\n      strict$1('invalidClass'),\n      defaulted$1('getRoot', Optional.none),\n      optionObjOf('notify', [\n        defaulted$1('aria', 'alert'),\n        defaulted$1('getContainer', Optional.none),\n        defaulted$1('validHtml', ''),\n        onHandler('onValid'),\n        onHandler('onInvalid'),\n        onHandler('onValidate')\n      ]),\n      optionObjOf('validator', [\n        strict$1('validate'),\n        defaulted$1('onEvent', 'input'),\n        defaulted$1('validateOnLoad', true)\n      ])\n    ];\n\n    var Invalidating = create$1({\n      fields: InvalidateSchema,\n      name: 'invalidating',\n      active: ActiveInvalidate,\n      apis: InvalidateApis,\n      extra: {\n        validation: function (validator) {\n          return function (component) {\n            var v = Representing.getValue(component);\n            return Future.pure(validator(v));\n          };\n        }\n      }\n    });\n\n    var getCoupled = function (component, coupleConfig, coupleState, name) {\n      return coupleState.getOrCreate(component, coupleConfig, name);\n    };\n\n    var CouplingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCoupled: getCoupled\n    });\n\n    var CouplingSchema = [strictOf('others', setOf$1(Result.value, anyValue$1()))];\n\n    var init$5 = function () {\n      var coupled = {};\n      var getOrCreate = function (component, coupleConfig, name) {\n        var available = keys(coupleConfig.others);\n        if (!available) {\n          throw new Error('Cannot find coupled component: ' + name + '. Known coupled components: ' + JSON.stringify(available, null, 2));\n        } else {\n          return get$1(coupled, name).getOrThunk(function () {\n            var builder = get$1(coupleConfig.others, name).getOrDie('No information found for coupled component: ' + name);\n            var spec = builder(component);\n            var built = component.getSystem().build(spec);\n            coupled[name] = built;\n            return built;\n          });\n        }\n      };\n      var readState = constant({});\n      return nu$5({\n        readState: readState,\n        getOrCreate: getOrCreate\n      });\n    };\n\n    var CouplingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$5\n    });\n\n    var Coupling = create$1({\n      fields: CouplingSchema,\n      name: 'coupling',\n      apis: CouplingApis,\n      state: CouplingState\n    });\n\n    var suffix = constant('sink');\n    var partType = constant(optional({\n      name: suffix(),\n      overrides: constant({\n        dom: { tag: 'div' },\n        behaviours: derive$1([Positioning.config({ useFixed: always })]),\n        events: derive([\n          cutter(keydown()),\n          cutter(mousedown()),\n          cutter(click())\n        ])\n      })\n    }));\n\n    var HighlightOnOpen;\n    (function (HighlightOnOpen) {\n      HighlightOnOpen[HighlightOnOpen['HighlightFirst'] = 0] = 'HighlightFirst';\n      HighlightOnOpen[HighlightOnOpen['HighlightNone'] = 1] = 'HighlightNone';\n    }(HighlightOnOpen || (HighlightOnOpen = {})));\n    var getAnchor = function (detail, component) {\n      var hotspot = detail.getHotspot(component).getOr(component);\n      var anchor = 'hotspot';\n      var overrides = detail.getAnchorOverrides();\n      return detail.layouts.fold(function () {\n        return {\n          anchor: anchor,\n          hotspot: hotspot,\n          overrides: overrides\n        };\n      }, function (layouts) {\n        return {\n          anchor: anchor,\n          hotspot: hotspot,\n          overrides: overrides,\n          layouts: layouts\n        };\n      });\n    };\n    var fetch = function (detail, mapFetch, component) {\n      var fetcher = detail.fetch;\n      return fetcher(component).map(mapFetch);\n    };\n    var openF = function (detail, mapFetch, anchor, component, sandbox, externals, highlightOnOpen) {\n      var futureData = fetch(detail, mapFetch, component);\n      var getLazySink = getSink(component, detail);\n      return futureData.map(function (tdata) {\n        return tdata.bind(function (data) {\n          return Optional.from(tieredMenu.sketch(__assign(__assign({}, externals.menu()), {\n            uid: generate$2(''),\n            data: data,\n            highlightImmediately: highlightOnOpen === HighlightOnOpen.HighlightFirst,\n            onOpenMenu: function (tmenu, menu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, anchor, menu);\n              Sandboxing.decloak(sandbox);\n            },\n            onOpenSubmenu: function (tmenu, item, submenu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, {\n                anchor: 'submenu',\n                item: item\n              }, submenu);\n              Sandboxing.decloak(sandbox);\n            },\n            onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, anchor, primaryMenu);\n              each(submenuTriggers, function (st) {\n                Positioning.position(sink, {\n                  anchor: 'submenu',\n                  item: st.triggeringItem\n                }, st.triggeredMenu);\n              });\n            },\n            onEscape: function () {\n              Focusing.focus(component);\n              Sandboxing.close(sandbox);\n              return Optional.some(true);\n            }\n          })));\n        });\n      });\n    };\n    var open$1 = function (detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen) {\n      var anchor = getAnchor(detail, hotspot);\n      var processed = openF(detail, mapFetch, anchor, hotspot, sandbox, externals, highlightOnOpen);\n      return processed.map(function (tdata) {\n        tdata.fold(function () {\n          if (Sandboxing.isOpen(sandbox)) {\n            Sandboxing.close(sandbox);\n          }\n        }, function (data) {\n          Sandboxing.cloak(sandbox);\n          Sandboxing.open(sandbox, data);\n          onOpenSync(sandbox);\n        });\n        return sandbox;\n      });\n    };\n    var close$1 = function (detail, mapFetch, component, sandbox, _externals, _onOpenSync, _highlightOnOpen) {\n      Sandboxing.close(sandbox);\n      return Future.pure(sandbox);\n    };\n    var togglePopup = function (detail, mapFetch, hotspot, externals, onOpenSync, highlightOnOpen) {\n      var sandbox = Coupling.getCoupled(hotspot, 'sandbox');\n      var showing = Sandboxing.isOpen(sandbox);\n      var action = showing ? close$1 : open$1;\n      return action(detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen);\n    };\n    var matchWidth = function (hotspot, container, useMinWidth) {\n      var menu = Composing.getCurrent(container).getOr(container);\n      var buttonWidth = get$8(hotspot.element);\n      if (useMinWidth) {\n        set$2(menu.element, 'min-width', buttonWidth + 'px');\n      } else {\n        set$4(menu.element, buttonWidth);\n      }\n    };\n    var getSink = function (anyInSystem, sinkDetail) {\n      return anyInSystem.getSystem().getByUid(sinkDetail.uid + '-' + suffix()).map(function (internalSink) {\n        return function () {\n          return Result.value(internalSink);\n        };\n      }).getOrThunk(function () {\n        return sinkDetail.lazySink.fold(function () {\n          return function () {\n            return Result.error(new Error('No internal sink is specified, nor could an external sink be found'));\n          };\n        }, function (lazySinkFn) {\n          return function () {\n            return lazySinkFn(anyInSystem);\n          };\n        });\n      });\n    };\n    var doRepositionMenus = function (sandbox) {\n      Sandboxing.getState(sandbox).each(function (tmenu) {\n        tieredMenu.repositionMenus(tmenu);\n      });\n    };\n    var makeSandbox = function (detail, hotspot, extras) {\n      var ariaOwner = manager();\n      var onOpen = function (component, menu) {\n        var anchor = getAnchor(detail, hotspot);\n        ariaOwner.link(hotspot.element);\n        if (detail.matchWidth) {\n          matchWidth(anchor.hotspot, menu, detail.useMinWidth);\n        }\n        detail.onOpen(anchor, component, menu);\n        if (extras !== undefined && extras.onOpen !== undefined) {\n          extras.onOpen(component, menu);\n        }\n      };\n      var onClose = function (component, menu) {\n        ariaOwner.unlink(hotspot.element);\n        if (extras !== undefined && extras.onClose !== undefined) {\n          extras.onClose(component, menu);\n        }\n      };\n      var lazySink = getSink(hotspot, detail);\n      return {\n        dom: {\n          tag: 'div',\n          classes: detail.sandboxClasses,\n          attributes: {\n            id: ariaOwner.id,\n            role: 'listbox'\n          }\n        },\n        behaviours: SketchBehaviours.augment(detail.sandboxBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: hotspot\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf(data, queryElem) || isPartOf(hotspot, queryElem);\n            },\n            getAttachPoint: function () {\n              return lazySink().getOrDie();\n            }\n          }),\n          Composing.config({\n            find: function (sandbox) {\n              return Sandboxing.getState(sandbox).bind(function (menu) {\n                return Composing.getCurrent(menu);\n              });\n            }\n          }),\n          Receiving.config({ channels: __assign(__assign({}, receivingChannel({ isExtraPart: never })), receivingChannel$1({ doReposition: doRepositionMenus })) })\n        ])\n      };\n    };\n    var repositionMenus = function (comp) {\n      var sandbox = Coupling.getCoupled(comp, 'sandbox');\n      doRepositionMenus(sandbox);\n    };\n\n    var sandboxFields = function () {\n      return [\n        defaulted$1('sandboxClasses', []),\n        SketchBehaviours.field('sandboxBehaviours', [\n          Composing,\n          Receiving,\n          Sandboxing,\n          Representing\n        ])\n      ];\n    };\n\n    var schema$g = constant([\n      strict$1('dom'),\n      strict$1('fetch'),\n      onHandler('onOpen'),\n      onKeyboardHandler('onExecute'),\n      defaulted$1('getHotspot', Optional.some),\n      defaulted$1('getAnchorOverrides', constant({})),\n      schema$1(),\n      field$1('dropdownBehaviours', [\n        Toggling,\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      strict$1('toggleClass'),\n      defaulted$1('eventOrder', {}),\n      option('lazySink'),\n      defaulted$1('matchWidth', false),\n      defaulted$1('useMinWidth', false),\n      option('role')\n    ].concat(sandboxFields()));\n    var parts$4 = constant([\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return { onExecute: detail.onExecute };\n        }\n      }),\n      partType()\n    ]);\n\n    var factory$6 = function (detail, components, _spec, externals) {\n      var _a;\n      var lookupAttr = function (attr) {\n        return get$1(detail.dom, 'attributes').bind(function (attrs) {\n          return get$1(attrs, attr);\n        });\n      };\n      var switchToMenu = function (sandbox) {\n        Sandboxing.getState(sandbox).each(function (tmenu) {\n          tieredMenu.highlightPrimary(tmenu);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, function (x) {\n          return x;\n        }, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var apis = {\n        expand: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, function (x) {\n              return x;\n            }, comp, externals, noop, HighlightOnOpen.HighlightNone).get(noop);\n          }\n        },\n        open: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, function (x) {\n              return x;\n            }, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        isOpen: Toggling.isOn,\n        close: function (comp) {\n          if (Toggling.isOn(comp)) {\n            togglePopup(detail, function (x) {\n              return x;\n            }, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      var triggerExecute = function (comp, _se) {\n        emitExecute(comp);\n        return Optional.some(true);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.dropdownBehaviours, [\n          Toggling.config({\n            toggleClass: detail.toggleClass,\n            aria: { mode: 'expanded' }\n          }),\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                return makeSandbox(detail, hotspot, {\n                  onOpen: function () {\n                    return Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    return Toggling.off(hotspot);\n                  }\n                });\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: triggerExecute,\n            onEnter: triggerExecute,\n            onDown: function (comp, _se) {\n              if (Dropdown.isOpen(comp)) {\n                var sandbox = Coupling.getCoupled(comp, 'sandbox');\n                switchToMenu(sandbox);\n              } else {\n                Dropdown.open(comp);\n              }\n              return Optional.some(true);\n            },\n            onEscape: function (comp, _se) {\n              if (Dropdown.isOpen(comp)) {\n                Dropdown.close(comp);\n                return Optional.some(true);\n              } else {\n                return Optional.none();\n              }\n            }\n          }),\n          Focusing.config({})\n        ]),\n        events: events$7(Optional.some(action)),\n        eventOrder: __assign(__assign({}, detail.eventOrder), (_a = {}, _a[execute()] = [\n          'disabling',\n          'toggling',\n          'alloy.base.behaviour'\n        ], _a)),\n        apis: apis,\n        domModification: {\n          attributes: __assign(__assign({ 'aria-haspopup': 'true' }, detail.role.fold(function () {\n            return {};\n          }, function (role) {\n            return { role: role };\n          })), detail.dom.tag === 'button' ? { type: lookupAttr('type').getOr('button') } : {})\n        }\n      };\n    };\n    var Dropdown = composite$1({\n      name: 'Dropdown',\n      configFields: schema$g(),\n      partFields: parts$4(),\n      factory: factory$6,\n      apis: {\n        open: function (apis, comp) {\n          return apis.open(comp);\n        },\n        expand: function (apis, comp) {\n          return apis.expand(comp);\n        },\n        close: function (apis, comp) {\n          return apis.close(comp);\n        },\n        isOpen: function (apis, comp) {\n          return apis.isOpen(comp);\n        },\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var exhibit$5 = function () {\n      return nu$6({\n        styles: {\n          '-webkit-user-select': 'none',\n          'user-select': 'none',\n          '-ms-user-select': 'none',\n          '-moz-user-select': '-moz-none'\n        },\n        attributes: { unselectable: 'on' }\n      });\n    };\n    var events$b = function () {\n      return derive([abort(selectstart(), always)]);\n    };\n\n    var ActiveUnselecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$b,\n        exhibit: exhibit$5\n    });\n\n    var Unselecting = create$1({\n      fields: [],\n      name: 'unselecting',\n      active: ActiveUnselecting\n    });\n\n    var renderPanelButton = function (spec, sharedBackstage) {\n      return Dropdown.sketch({\n        dom: spec.dom,\n        components: spec.components,\n        toggleClass: 'mce-active',\n        dropdownBehaviours: derive$1([\n          DisablingConfigs.button(sharedBackstage.providers.isDisabled),\n          receivingConfig(),\n          Unselecting.config({}),\n          Tabstopping.config({})\n        ]),\n        layouts: spec.layouts,\n        sandboxClasses: ['tox-dialog__popups'],\n        lazySink: sharedBackstage.getSink,\n        fetch: function (comp) {\n          return Future.nu(function (callback) {\n            return spec.fetch(callback);\n          }).map(function (items) {\n            return Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$1('menu-value'), items, function (value) {\n              spec.onItemAction(comp, value);\n            }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, never, sharedBackstage.providers), { movement: deriveMenuMovement(spec.columns, spec.presets) })));\n          });\n        },\n        parts: { menu: part(false, 1, spec.presets) }\n      });\n    };\n\n    var colorInputChangeEvent = generate$1('color-input-change');\n    var colorSwatchChangeEvent = generate$1('color-swatch-change');\n    var colorPickerCancelEvent = generate$1('color-picker-cancel');\n    var renderColorInput = function (spec, sharedBackstage, colorInputBackstage) {\n      var pField = FormField.parts.field({\n        factory: Input,\n        inputClasses: ['tox-textfield'],\n        onSetValue: function (c) {\n          return Invalidating.run(c).get(noop);\n        },\n        inputBehaviours: derive$1([\n          Disabling.config({ disabled: sharedBackstage.providers.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Invalidating.config({\n            invalidClass: 'tox-textbox-field-invalid',\n            getRoot: function (comp) {\n              return parent(comp.element);\n            },\n            notify: {\n              onValid: function (comp) {\n                var val = Representing.getValue(comp);\n                emitWith(comp, colorInputChangeEvent, { color: val });\n              }\n            },\n            validator: {\n              validateOnLoad: false,\n              validate: function (input) {\n                var inputValue = Representing.getValue(input);\n                if (inputValue.length === 0) {\n                  return Future.pure(Result.value(true));\n                } else {\n                  var span = SugarElement.fromTag('span');\n                  set$2(span, 'background-color', inputValue);\n                  var res = getRaw(span, 'background-color').fold(function () {\n                    return Result.error('blah');\n                  }, function (_) {\n                    return Result.value(inputValue);\n                  });\n                  return Future.pure(res);\n                }\n              }\n            }\n          })\n        ]),\n        selectOnFocus: false\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, sharedBackstage.providers);\n      });\n      var emitSwatchChange = function (colorBit, value) {\n        emitWith(colorBit, colorSwatchChangeEvent, { value: value });\n      };\n      var onItemAction = function (comp, value) {\n        memColorButton.getOpt(comp).each(function (colorBit) {\n          if (value === 'custom') {\n            colorInputBackstage.colorPicker(function (valueOpt) {\n              valueOpt.fold(function () {\n                return emit(colorBit, colorPickerCancelEvent);\n              }, function (value) {\n                emitSwatchChange(colorBit, value);\n                addColor(value);\n              });\n            }, '#ffffff');\n          } else if (value === 'remove') {\n            emitSwatchChange(colorBit, '');\n          } else {\n            emitSwatchChange(colorBit, value);\n          }\n        });\n      };\n      var memColorButton = record(renderPanelButton({\n        dom: {\n          tag: 'span',\n          attributes: { 'aria-label': sharedBackstage.providers.translate('Color swatch') }\n        },\n        layouts: {\n          onRtl: function () {\n            return [\n              southwest$1,\n              southeast$1,\n              south$1\n            ];\n          },\n          onLtr: function () {\n            return [\n              southeast$1,\n              southwest$1,\n              south$1\n            ];\n          }\n        },\n        components: [],\n        fetch: getFetch(colorInputBackstage.getColors(), colorInputBackstage.hasCustomColors()),\n        columns: colorInputBackstage.getColorCols(),\n        presets: 'color',\n        onItemAction: onItemAction\n      }, sharedBackstage));\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: pLabel.toArray().concat([{\n            dom: {\n              tag: 'div',\n              classes: ['tox-color-input']\n            },\n            components: [\n              pField,\n              memColorButton.asSpec()\n            ]\n          }]),\n        fieldBehaviours: derive$1([config('form-field-events', [\n            run(colorInputChangeEvent, function (comp, se) {\n              memColorButton.getOpt(comp).each(function (colorButton) {\n                set$2(colorButton.element, 'background-color', se.event.color);\n              });\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            }),\n            run(colorSwatchChangeEvent, function (comp, se) {\n              FormField.getField(comp).each(function (field) {\n                Representing.setValue(field, se.event.value);\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            }),\n            run(colorPickerCancelEvent, function (comp, _se) {\n              FormField.getField(comp).each(function (_field) {\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            })\n          ])])\n      });\n    };\n\n    var labelPart = optional({\n      schema: [strict$1('dom')],\n      name: 'label'\n    });\n    var edgePart = function (name) {\n      return optional({\n        name: '' + name + '-edge',\n        overrides: function (detail) {\n          var action = detail.model.manager.edgeActions[name];\n          return action.fold(function () {\n            return {};\n          }, function (a) {\n            return {\n              events: derive([\n                runActionExtra(touchstart(), function (comp, se, d) {\n                  return a(comp, d);\n                }, [detail]),\n                runActionExtra(mousedown(), function (comp, se, d) {\n                  return a(comp, d);\n                }, [detail]),\n                runActionExtra(mousemove(), function (comp, se, det) {\n                  if (det.mouseIsDown.get()) {\n                    a(comp, det);\n                  }\n                }, [detail])\n              ])\n            };\n          });\n        }\n      });\n    };\n    var tlEdgePart = edgePart('top-left');\n    var tedgePart = edgePart('top');\n    var trEdgePart = edgePart('top-right');\n    var redgePart = edgePart('right');\n    var brEdgePart = edgePart('bottom-right');\n    var bedgePart = edgePart('bottom');\n    var blEdgePart = edgePart('bottom-left');\n    var ledgePart = edgePart('left');\n    var thumbPart = required({\n      name: 'thumb',\n      defaults: constant({ dom: { styles: { position: 'absolute' } } }),\n      overrides: function (detail) {\n        return {\n          events: derive([\n            redirectToPart(touchstart(), detail, 'spectrum'),\n            redirectToPart(touchmove(), detail, 'spectrum'),\n            redirectToPart(touchend(), detail, 'spectrum'),\n            redirectToPart(mousedown(), detail, 'spectrum'),\n            redirectToPart(mousemove(), detail, 'spectrum'),\n            redirectToPart(mouseup(), detail, 'spectrum')\n          ])\n        };\n      }\n    });\n    var spectrumPart = required({\n      schema: [state$1('mouseIsDown', function () {\n          return Cell(false);\n        })],\n      name: 'spectrum',\n      overrides: function (detail) {\n        var modelDetail = detail.model;\n        var model = modelDetail.manager;\n        var setValueFrom = function (component, simulatedEvent) {\n          return model.getValueFromEvent(simulatedEvent).map(function (value) {\n            return model.setValueFrom(component, detail, value);\n          });\n        };\n        return {\n          behaviours: derive$1([\n            Keying.config({\n              mode: 'special',\n              onLeft: function (spectrum) {\n                return model.onLeft(spectrum, detail);\n              },\n              onRight: function (spectrum) {\n                return model.onRight(spectrum, detail);\n              },\n              onUp: function (spectrum) {\n                return model.onUp(spectrum, detail);\n              },\n              onDown: function (spectrum) {\n                return model.onDown(spectrum, detail);\n              }\n            }),\n            Focusing.config({})\n          ]),\n          events: derive([\n            run(touchstart(), setValueFrom),\n            run(touchmove(), setValueFrom),\n            run(mousedown(), setValueFrom),\n            run(mousemove(), function (spectrum, se) {\n              if (detail.mouseIsDown.get()) {\n                setValueFrom(spectrum, se);\n              }\n            })\n          ])\n        };\n      }\n    });\n    var SliderParts = [\n      labelPart,\n      ledgePart,\n      redgePart,\n      tedgePart,\n      bedgePart,\n      tlEdgePart,\n      trEdgePart,\n      blEdgePart,\n      brEdgePart,\n      thumbPart,\n      spectrumPart\n    ];\n\n    var _sliderChangeEvent = 'slider.change.value';\n    var sliderChangeEvent = constant(_sliderChangeEvent);\n    var isTouchEvent = function (evt) {\n      return evt.type.indexOf('touch') !== -1;\n    };\n    var getEventSource = function (simulatedEvent) {\n      var evt = simulatedEvent.event.raw;\n      if (isTouchEvent(evt)) {\n        var touchEvent = evt;\n        return touchEvent.touches !== undefined && touchEvent.touches.length === 1 ? Optional.some(touchEvent.touches[0]).map(function (t) {\n          return SugarPosition(t.clientX, t.clientY);\n        }) : Optional.none();\n      } else {\n        var mouseEvent = evt;\n        return mouseEvent.clientX !== undefined ? Optional.some(mouseEvent).map(function (me) {\n          return SugarPosition(me.clientX, me.clientY);\n        }) : Optional.none();\n      }\n    };\n\n    var t = 'top', r$1 = 'right', b = 'bottom', l = 'left';\n    var minX = function (detail) {\n      return detail.model.minX;\n    };\n    var minY = function (detail) {\n      return detail.model.minY;\n    };\n    var min1X = function (detail) {\n      return detail.model.minX - 1;\n    };\n    var min1Y = function (detail) {\n      return detail.model.minY - 1;\n    };\n    var maxX = function (detail) {\n      return detail.model.maxX;\n    };\n    var maxY = function (detail) {\n      return detail.model.maxY;\n    };\n    var max1X = function (detail) {\n      return detail.model.maxX + 1;\n    };\n    var max1Y = function (detail) {\n      return detail.model.maxY + 1;\n    };\n    var range$2 = function (detail, max, min) {\n      return max(detail) - min(detail);\n    };\n    var xRange = function (detail) {\n      return range$2(detail, maxX, minX);\n    };\n    var yRange = function (detail) {\n      return range$2(detail, maxY, minY);\n    };\n    var halfX = function (detail) {\n      return xRange(detail) / 2;\n    };\n    var halfY = function (detail) {\n      return yRange(detail) / 2;\n    };\n    var step = function (detail) {\n      return detail.stepSize;\n    };\n    var snap = function (detail) {\n      return detail.snapToGrid;\n    };\n    var snapStart = function (detail) {\n      return detail.snapStart;\n    };\n    var rounded = function (detail) {\n      return detail.rounded;\n    };\n    var hasEdge = function (detail, edgeName) {\n      return detail[edgeName + '-edge'] !== undefined;\n    };\n    var hasLEdge = function (detail) {\n      return hasEdge(detail, l);\n    };\n    var hasREdge = function (detail) {\n      return hasEdge(detail, r$1);\n    };\n    var hasTEdge = function (detail) {\n      return hasEdge(detail, t);\n    };\n    var hasBEdge = function (detail) {\n      return hasEdge(detail, b);\n    };\n    var currentValue = function (detail) {\n      return detail.model.value.get();\n    };\n\n    var xValue = function (x) {\n      return { x: x };\n    };\n    var yValue = function (y) {\n      return { y: y };\n    };\n    var xyValue = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var fireSliderChange = function (component, value) {\n      emitWith(component, sliderChangeEvent(), { value: value });\n    };\n    var setToTLEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(min1X(detail), min1Y(detail)));\n    };\n    var setToTEdge = function (edge, detail) {\n      fireSliderChange(edge, yValue(min1Y(detail)));\n    };\n    var setToTEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(halfX(detail), min1Y(detail)));\n    };\n    var setToTREdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(max1X(detail), min1Y(detail)));\n    };\n    var setToREdge = function (edge, detail) {\n      fireSliderChange(edge, xValue(max1X(detail)));\n    };\n    var setToREdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(max1X(detail), halfY(detail)));\n    };\n    var setToBREdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(max1X(detail), max1Y(detail)));\n    };\n    var setToBEdge = function (edge, detail) {\n      fireSliderChange(edge, yValue(max1Y(detail)));\n    };\n    var setToBEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(halfX(detail), max1Y(detail)));\n    };\n    var setToBLEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(min1X(detail), max1Y(detail)));\n    };\n    var setToLEdge = function (edge, detail) {\n      fireSliderChange(edge, xValue(min1X(detail)));\n    };\n    var setToLEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(min1X(detail), halfY(detail)));\n    };\n\n    var reduceBy = function (value, min, max, step) {\n      if (value < min) {\n        return value;\n      } else if (value > max) {\n        return max;\n      } else if (value === min) {\n        return min - 1;\n      } else {\n        return Math.max(min, value - step);\n      }\n    };\n    var increaseBy = function (value, min, max, step) {\n      if (value > max) {\n        return value;\n      } else if (value < min) {\n        return min;\n      } else if (value === max) {\n        return max + 1;\n      } else {\n        return Math.min(max, value + step);\n      }\n    };\n    var capValue = function (value, min, max) {\n      return Math.max(min, Math.min(max, value));\n    };\n    var snapValueOf = function (value, min, max, step, snapStart) {\n      return snapStart.fold(function () {\n        var initValue = value - min;\n        var extraValue = Math.round(initValue / step) * step;\n        return capValue(min + extraValue, min - 1, max + 1);\n      }, function (start) {\n        var remainder = (value - start) % step;\n        var adjustment = Math.round(remainder / step);\n        var rawSteps = Math.floor((value - start) / step);\n        var maxSteps = Math.floor((max - start) / step);\n        var numSteps = Math.min(maxSteps, rawSteps + adjustment);\n        var r = start + numSteps * step;\n        return Math.max(start, r);\n      });\n    };\n    var findOffsetOf = function (value, min, max) {\n      return Math.min(max, Math.max(value, min)) - min;\n    };\n    var findValueOf = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, step = args.step, snap = args.snap, snapStart = args.snapStart, rounded = args.rounded, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, minBound = args.minBound, maxBound = args.maxBound, screenRange = args.screenRange;\n      var capMin = hasMinEdge ? min - 1 : min;\n      var capMax = hasMaxEdge ? max + 1 : max;\n      if (value < minBound) {\n        return capMin;\n      } else if (value > maxBound) {\n        return capMax;\n      } else {\n        var offset = findOffsetOf(value, minBound, maxBound);\n        var newValue = capValue(offset / screenRange * range + min, capMin, capMax);\n        if (snap && newValue >= min && newValue <= max) {\n          return snapValueOf(newValue, min, max, step, snapStart);\n        } else if (rounded) {\n          return Math.round(newValue);\n        } else {\n          return newValue;\n        }\n      }\n    };\n    var findOffsetOfValue = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, maxBound = args.maxBound, maxOffset = args.maxOffset, centerMinEdge = args.centerMinEdge, centerMaxEdge = args.centerMaxEdge;\n      if (value < min) {\n        return hasMinEdge ? 0 : centerMinEdge;\n      } else if (value > max) {\n        return hasMaxEdge ? maxBound : centerMaxEdge;\n      } else {\n        return (value - min) / range * maxOffset;\n      }\n    };\n\n    var top = 'top', right = 'right', bottom = 'bottom', left = 'left', width = 'width', height = 'height';\n    var getBounds$1 = function (component) {\n      return component.element.dom.getBoundingClientRect();\n    };\n    var getBoundsProperty = function (bounds, property) {\n      return bounds[property];\n    };\n    var getMinXBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, left);\n    };\n    var getMaxXBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, right);\n    };\n    var getMinYBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, top);\n    };\n    var getMaxYBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, bottom);\n    };\n    var getXScreenRange = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, width);\n    };\n    var getYScreenRange = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, height);\n    };\n    var getCenterOffsetOf = function (componentMinEdge, componentMaxEdge, spectrumMinEdge) {\n      return (componentMinEdge + componentMaxEdge) / 2 - spectrumMinEdge;\n    };\n    var getXCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds$1(component);\n      var spectrumBounds = getBounds$1(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, left);\n      var componentMaxEdge = getBoundsProperty(componentBounds, right);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, left);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n    var getYCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds$1(component);\n      var spectrumBounds = getBounds$1(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, top);\n      var componentMaxEdge = getBoundsProperty(componentBounds, bottom);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, top);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n\n    var fireSliderChange$1 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue = function (x) {\n      return { x: x };\n    };\n    var findValueOfOffset = function (spectrum, detail, left) {\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: left,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        maxBound: getMaxXBounds(spectrum),\n        screenRange: getXScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset(spectrum, detail, value);\n      var sliderVal = sliderValue(xValue);\n      fireSliderChange$1(spectrum, sliderVal);\n      return xValue;\n    };\n    var setToMin = function (spectrum, detail) {\n      var min = minX(detail);\n      fireSliderChange$1(spectrum, sliderValue(min));\n    };\n    var setToMax = function (spectrum, detail) {\n      var max = maxX(detail);\n      fireSliderChange$1(spectrum, sliderValue(max));\n    };\n    var moveBy = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = f(currentValue(detail).x, minX(detail), maxX(detail), step(detail));\n      fireSliderChange$1(spectrum, sliderValue(xValue));\n      return Optional.some(xValue);\n    };\n    var handleMovement = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy(direction, spectrum, detail).map(always);\n      };\n    };\n    var getValueFromEvent = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.left;\n      });\n    };\n    var findOffsetOfValue$1 = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getXScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Optional.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Optional.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: value,\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxXBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue(args);\n    };\n    var findPositionOfValue = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue$1(spectrum, detail, value, minEdge, maxEdge);\n      return getMinXBounds(spectrum) - getMinXBounds(slider) + offset;\n    };\n    var setPositionFromValue = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue(slider, edges.getSpectrum(slider), value.x, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var thumbRadius = get$8(thumb.element) / 2;\n      set$2(thumb.element, 'left', pos - thumbRadius + 'px');\n    };\n    var onLeft = handleMovement(-1);\n    var onRight = handleMovement(1);\n    var onUp = Optional.none;\n    var onDown = Optional.none;\n    var edgeActions = {\n      'top-left': Optional.none(),\n      'top': Optional.none(),\n      'top-right': Optional.none(),\n      'right': Optional.some(setToREdge),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.none(),\n      'bottom-left': Optional.none(),\n      'left': Optional.some(setToLEdge)\n    };\n\n    var HorizontalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom,\n        setToMin: setToMin,\n        setToMax: setToMax,\n        findValueOfOffset: findValueOfOffset,\n        getValueFromEvent: getValueFromEvent,\n        findPositionOfValue: findPositionOfValue,\n        setPositionFromValue: setPositionFromValue,\n        onLeft: onLeft,\n        onRight: onRight,\n        onUp: onUp,\n        onDown: onDown,\n        edgeActions: edgeActions\n    });\n\n    var fireSliderChange$2 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$1 = function (y) {\n      return { y: y };\n    };\n    var findValueOfOffset$1 = function (spectrum, detail, top) {\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: top,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        maxBound: getMaxYBounds(spectrum),\n        screenRange: getYScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom$1 = function (spectrum, detail, value) {\n      var yValue = findValueOfOffset$1(spectrum, detail, value);\n      var sliderVal = sliderValue$1(yValue);\n      fireSliderChange$2(spectrum, sliderVal);\n      return yValue;\n    };\n    var setToMin$1 = function (spectrum, detail) {\n      var min = minY(detail);\n      fireSliderChange$2(spectrum, sliderValue$1(min));\n    };\n    var setToMax$1 = function (spectrum, detail) {\n      var max = maxY(detail);\n      fireSliderChange$2(spectrum, sliderValue$1(max));\n    };\n    var moveBy$1 = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var yValue = f(currentValue(detail).y, minY(detail), maxY(detail), step(detail));\n      fireSliderChange$2(spectrum, sliderValue$1(yValue));\n      return Optional.some(yValue);\n    };\n    var handleMovement$1 = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy$1(direction, spectrum, detail).map(always);\n      };\n    };\n    var getValueFromEvent$1 = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.top;\n      });\n    };\n    var findOffsetOfValue$2 = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getYScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Optional.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Optional.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: value,\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxYBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue(args);\n    };\n    var findPositionOfValue$1 = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue$2(spectrum, detail, value, minEdge, maxEdge);\n      return getMinYBounds(spectrum) - getMinYBounds(slider) + offset;\n    };\n    var setPositionFromValue$1 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.y, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbRadius = get$7(thumb.element) / 2;\n      set$2(thumb.element, 'top', pos - thumbRadius + 'px');\n    };\n    var onLeft$1 = Optional.none;\n    var onRight$1 = Optional.none;\n    var onUp$1 = handleMovement$1(-1);\n    var onDown$1 = handleMovement$1(1);\n    var edgeActions$1 = {\n      'top-left': Optional.none(),\n      'top': Optional.some(setToTEdge),\n      'top-right': Optional.none(),\n      'right': Optional.none(),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.some(setToBEdge),\n      'bottom-left': Optional.none(),\n      'left': Optional.none()\n    };\n\n    var VerticalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$1,\n        setToMin: setToMin$1,\n        setToMax: setToMax$1,\n        findValueOfOffset: findValueOfOffset$1,\n        getValueFromEvent: getValueFromEvent$1,\n        findPositionOfValue: findPositionOfValue$1,\n        setPositionFromValue: setPositionFromValue$1,\n        onLeft: onLeft$1,\n        onRight: onRight$1,\n        onUp: onUp$1,\n        onDown: onDown$1,\n        edgeActions: edgeActions$1\n    });\n\n    var fireSliderChange$3 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$2 = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var setValueFrom$2 = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset(spectrum, detail, value.left);\n      var yValue = findValueOfOffset$1(spectrum, detail, value.top);\n      var val = sliderValue$2(xValue, yValue);\n      fireSliderChange$3(spectrum, val);\n      return val;\n    };\n    var moveBy$2 = function (direction, isVerticalMovement, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = isVerticalMovement ? currentValue(detail).x : f(currentValue(detail).x, minX(detail), maxX(detail), step(detail));\n      var yValue = !isVerticalMovement ? currentValue(detail).y : f(currentValue(detail).y, minY(detail), maxY(detail), step(detail));\n      fireSliderChange$3(spectrum, sliderValue$2(xValue, yValue));\n      return Optional.some(xValue);\n    };\n    var handleMovement$2 = function (direction, isVerticalMovement) {\n      return function (spectrum, detail) {\n        return moveBy$2(direction, isVerticalMovement, spectrum, detail).map(always);\n      };\n    };\n    var setToMin$2 = function (spectrum, detail) {\n      var mX = minX(detail);\n      var mY = minY(detail);\n      fireSliderChange$3(spectrum, sliderValue$2(mX, mY));\n    };\n    var setToMax$2 = function (spectrum, detail) {\n      var mX = maxX(detail);\n      var mY = maxY(detail);\n      fireSliderChange$3(spectrum, sliderValue$2(mX, mY));\n    };\n    var getValueFromEvent$2 = function (simulatedEvent) {\n      return getEventSource(simulatedEvent);\n    };\n    var setPositionFromValue$2 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var xPos = findPositionOfValue(slider, edges.getSpectrum(slider), value.x, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var yPos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.y, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbXRadius = get$8(thumb.element) / 2;\n      var thumbYRadius = get$7(thumb.element) / 2;\n      set$2(thumb.element, 'left', xPos - thumbXRadius + 'px');\n      set$2(thumb.element, 'top', yPos - thumbYRadius + 'px');\n    };\n    var onLeft$2 = handleMovement$2(-1, false);\n    var onRight$2 = handleMovement$2(1, false);\n    var onUp$2 = handleMovement$2(-1, true);\n    var onDown$2 = handleMovement$2(1, true);\n    var edgeActions$2 = {\n      'top-left': Optional.some(setToTLEdgeXY),\n      'top': Optional.some(setToTEdgeXY),\n      'top-right': Optional.some(setToTREdgeXY),\n      'right': Optional.some(setToREdgeXY),\n      'bottom-right': Optional.some(setToBREdgeXY),\n      'bottom': Optional.some(setToBEdgeXY),\n      'bottom-left': Optional.some(setToBLEdgeXY),\n      'left': Optional.some(setToLEdgeXY)\n    };\n\n    var TwoDModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$2,\n        setToMin: setToMin$2,\n        setToMax: setToMax$2,\n        getValueFromEvent: getValueFromEvent$2,\n        setPositionFromValue: setPositionFromValue$2,\n        onLeft: onLeft$2,\n        onRight: onRight$2,\n        onUp: onUp$2,\n        onDown: onDown$2,\n        edgeActions: edgeActions$2\n    });\n\n    var SliderSchema = [\n      defaulted$1('stepSize', 1),\n      defaulted$1('onChange', noop),\n      defaulted$1('onChoose', noop),\n      defaulted$1('onInit', noop),\n      defaulted$1('onDragStart', noop),\n      defaulted$1('onDragEnd', noop),\n      defaulted$1('snapToGrid', false),\n      defaulted$1('rounded', true),\n      option('snapStart'),\n      strictOf('model', choose$1('mode', {\n        x: [\n          defaulted$1('minX', 0),\n          defaulted$1('maxX', 100),\n          state$1('value', function (spec) {\n            return Cell(spec.mode.minX);\n          }),\n          strict$1('getInitialValue'),\n          output('manager', HorizontalModel)\n        ],\n        y: [\n          defaulted$1('minY', 0),\n          defaulted$1('maxY', 100),\n          state$1('value', function (spec) {\n            return Cell(spec.mode.minY);\n          }),\n          strict$1('getInitialValue'),\n          output('manager', VerticalModel)\n        ],\n        xy: [\n          defaulted$1('minX', 0),\n          defaulted$1('maxX', 100),\n          defaulted$1('minY', 0),\n          defaulted$1('maxY', 100),\n          state$1('value', function (spec) {\n            return Cell({\n              x: spec.mode.minX,\n              y: spec.mode.minY\n            });\n          }),\n          strict$1('getInitialValue'),\n          output('manager', TwoDModel)\n        ]\n      })),\n      field$1('sliderBehaviours', [\n        Keying,\n        Representing\n      ]),\n      state$1('mouseIsDown', function () {\n        return Cell(false);\n      })\n    ];\n\n    var sketch = function (detail, components, _spec, _externals) {\n      var _a;\n      var getThumb = function (component) {\n        return getPartOrDie(component, detail, 'thumb');\n      };\n      var getSpectrum = function (component) {\n        return getPartOrDie(component, detail, 'spectrum');\n      };\n      var getLeftEdge = function (component) {\n        return getPart(component, detail, 'left-edge');\n      };\n      var getRightEdge = function (component) {\n        return getPart(component, detail, 'right-edge');\n      };\n      var getTopEdge = function (component) {\n        return getPart(component, detail, 'top-edge');\n      };\n      var getBottomEdge = function (component) {\n        return getPart(component, detail, 'bottom-edge');\n      };\n      var modelDetail = detail.model;\n      var model = modelDetail.manager;\n      var refresh = function (slider, thumb) {\n        model.setPositionFromValue(slider, thumb, detail, {\n          getLeftEdge: getLeftEdge,\n          getRightEdge: getRightEdge,\n          getTopEdge: getTopEdge,\n          getBottomEdge: getBottomEdge,\n          getSpectrum: getSpectrum\n        });\n      };\n      var setValue = function (slider, newValue) {\n        modelDetail.value.set(newValue);\n        var thumb = getThumb(slider);\n        refresh(slider, thumb);\n      };\n      var changeValue = function (slider, newValue) {\n        setValue(slider, newValue);\n        var thumb = getThumb(slider);\n        detail.onChange(slider, thumb, newValue);\n        return Optional.some(true);\n      };\n      var resetToMin = function (slider) {\n        model.setToMin(slider, detail);\n      };\n      var resetToMax = function (slider) {\n        model.setToMax(slider, detail);\n      };\n      var choose = function (slider) {\n        var fireOnChoose = function () {\n          getPart(slider, detail, 'thumb').each(function (thumb) {\n            var value = modelDetail.value.get();\n            detail.onChoose(slider, thumb, value);\n          });\n        };\n        var wasDown = detail.mouseIsDown.get();\n        detail.mouseIsDown.set(false);\n        if (wasDown) {\n          fireOnChoose();\n        }\n      };\n      var onDragStart = function (slider, simulatedEvent) {\n        simulatedEvent.stop();\n        detail.mouseIsDown.set(true);\n        detail.onDragStart(slider, getThumb(slider));\n      };\n      var onDragEnd = function (slider, simulatedEvent) {\n        simulatedEvent.stop();\n        detail.onDragEnd(slider, getThumb(slider));\n        choose(slider);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.sliderBehaviours, [\n          Keying.config({\n            mode: 'special',\n            focusIn: function (slider) {\n              return getPart(slider, detail, 'spectrum').map(Keying.focusIn).map(always);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (_) {\n                return modelDetail.value.get();\n              }\n            }\n          }),\n          Receiving.config({ channels: (_a = {}, _a[mouseReleased()] = { onReceive: choose }, _a) })\n        ]),\n        events: derive([\n          run(sliderChangeEvent(), function (slider, simulatedEvent) {\n            changeValue(slider, simulatedEvent.event.value);\n          }),\n          runOnAttached(function (slider, _simulatedEvent) {\n            var getInitial = modelDetail.getInitialValue();\n            modelDetail.value.set(getInitial);\n            var thumb = getThumb(slider);\n            refresh(slider, thumb);\n            var spectrum = getSpectrum(slider);\n            detail.onInit(slider, thumb, spectrum, modelDetail.value.get());\n          }),\n          run(touchstart(), onDragStart),\n          run(touchend(), onDragEnd),\n          run(mousedown(), onDragStart),\n          run(mouseup(), onDragEnd)\n        ]),\n        apis: {\n          resetToMin: resetToMin,\n          resetToMax: resetToMax,\n          setValue: setValue,\n          refresh: refresh\n        },\n        domModification: { styles: { position: 'relative' } }\n      };\n    };\n\n    var Slider = composite$1({\n      name: 'Slider',\n      configFields: SliderSchema,\n      partFields: SliderParts,\n      factory: sketch,\n      apis: {\n        setValue: function (apis, slider, value) {\n          apis.setValue(slider, value);\n        },\n        resetToMin: function (apis, slider) {\n          apis.resetToMin(slider);\n        },\n        resetToMax: function (apis, slider) {\n          apis.resetToMax(slider);\n        },\n        refresh: function (apis, slider) {\n          apis.refresh(slider);\n        }\n      }\n    });\n\n    var hsvColour = function (hue, saturation, value) {\n      return {\n        hue: hue,\n        saturation: saturation,\n        value: value\n      };\n    };\n    var fromRgb = function (rgbaColour) {\n      var h = 0;\n      var s = 0;\n      var v = 0;\n      var r = rgbaColour.red / 255;\n      var g = rgbaColour.green / 255;\n      var b = rgbaColour.blue / 255;\n      var minRGB = Math.min(r, Math.min(g, b));\n      var maxRGB = Math.max(r, Math.max(g, b));\n      if (minRGB === maxRGB) {\n        v = minRGB;\n        return hsvColour(0, 0, v * 100);\n      }\n      var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n      h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n      h = 60 * (h - d / (maxRGB - minRGB));\n      s = (maxRGB - minRGB) / maxRGB;\n      v = maxRGB;\n      return hsvColour(Math.round(h), Math.round(s * 100), Math.round(v * 100));\n    };\n\n    var hexToHsv = function (hex) {\n      return fromRgb(fromHex(hex));\n    };\n    var hsvToHex = function (hsv) {\n      return fromRgba(fromHsv(hsv));\n    };\n\n    var fieldsUpdate = generate$1('rgb-hex-update');\n    var sliderUpdate = generate$1('slider-update');\n    var paletteUpdate = generate$1('palette-update');\n\n    var sliderFactory = function (translate, getClass) {\n      var spectrum = Slider.parts.spectrum({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-spectrum')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var thumb = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-thumb')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      return Slider.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider')],\n          attributes: { role: 'presentation' }\n        },\n        rounded: false,\n        model: {\n          mode: 'y',\n          getInitialValue: constant({ y: 0 })\n        },\n        components: [\n          spectrum,\n          thumb\n        ],\n        sliderBehaviours: derive$1([Focusing.config({})]),\n        onChange: function (slider, _thumb, value) {\n          emitWith(slider, sliderUpdate, { value: value });\n        }\n      });\n    };\n\n    var owner$3 = 'form';\n    var schema$h = [field$1('formBehaviours', [Representing])];\n    var getPartName = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch$1 = function (fSpec) {\n      var parts = function () {\n        var record = [];\n        var field = function (name, config) {\n          record.push(name);\n          return generateOne(owner$3, getPartName(name), config);\n        };\n        return {\n          field: field,\n          record: function () {\n            return record;\n          }\n        };\n      }();\n      var spec = fSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName(n)\n        });\n      });\n      return composite(owner$3, schema$h, fieldParts, make$4, spec);\n    };\n    var toResult$1 = function (o, e) {\n      return o.fold(function () {\n        return Result.error(e);\n      }, Result.value);\n    };\n    var make$4 = function (detail, components) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.formBehaviours, [Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (form) {\n                var resPs = getAllParts(form, detail);\n                return map$2(resPs, function (resPThunk, pName) {\n                  return resPThunk().bind(function (v) {\n                    var opt = Composing.getCurrent(v);\n                    return toResult$1(opt, new Error('Cannot find a current component to extract the value from for form part \\'' + pName + '\\': ' + element(v.element)));\n                  }).map(Representing.getValue);\n                });\n              },\n              setValue: function (form, values) {\n                each$1(values, function (newValue, key) {\n                  getPart(form, detail, key).each(function (wrapper) {\n                    Composing.getCurrent(wrapper).each(function (field) {\n                      Representing.setValue(field, newValue);\n                    });\n                  });\n                });\n              }\n            }\n          })]),\n        apis: {\n          getField: function (form, key) {\n            return getPart(form, detail, key).bind(Composing.getCurrent);\n          }\n        }\n      };\n    };\n    var Form = {\n      getField: makeApi(function (apis, component, key) {\n        return apis.getField(component, key);\n      }),\n      sketch: sketch$1\n    };\n\n    var validInput = generate$1('valid-input');\n    var invalidInput = generate$1('invalid-input');\n    var validatingInput = generate$1('validating-input');\n    var translatePrefix = 'colorcustom.rgb.';\n    var rgbFormFactory = function (translate, getClass, onValidHexx, onInvalidHexx) {\n      var invalidation = function (label, isValid) {\n        return Invalidating.config({\n          invalidClass: getClass('invalid'),\n          notify: {\n            onValidate: function (comp) {\n              emitWith(comp, validatingInput, { type: label });\n            },\n            onValid: function (comp) {\n              emitWith(comp, validInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            },\n            onInvalid: function (comp) {\n              emitWith(comp, invalidInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            }\n          },\n          validator: {\n            validate: function (comp) {\n              var value = Representing.getValue(comp);\n              var res = isValid(value) ? Result.value(true) : Result.error(translate('aria.input.invalid'));\n              return Future.pure(res);\n            },\n            validateOnLoad: false\n          }\n        });\n      };\n      var renderTextField = function (isValid, name, label, description, data) {\n        var helptext = translate(translatePrefix + 'range');\n        var pLabel = FormField.parts.label({\n          dom: {\n            tag: 'label',\n            innerHtml: label,\n            attributes: { 'aria-label': description }\n          }\n        });\n        var pField = FormField.parts.field({\n          data: data,\n          factory: Input,\n          inputAttributes: __assign({ type: 'text' }, name === 'hex' ? { 'aria-live': 'polite' } : {}),\n          inputClasses: [getClass('textfield')],\n          inputBehaviours: derive$1([\n            invalidation(name, isValid),\n            Tabstopping.config({})\n          ]),\n          onSetValue: function (input) {\n            if (Invalidating.isInvalid(input)) {\n              var run = Invalidating.run(input);\n              run.get(noop);\n            }\n          }\n        });\n        var comps = [\n          pLabel,\n          pField\n        ];\n        var concats = name !== 'hex' ? [FormField.parts['aria-descriptor']({ text: helptext })] : [];\n        var components = comps.concat(concats);\n        return {\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' }\n          },\n          components: components\n        };\n      };\n      var copyRgbToHex = function (form, rgba) {\n        var hex = fromRgba(rgba);\n        Form.getField(form, 'hex').each(function (hexField) {\n          if (!Focusing.isFocused(hexField)) {\n            Representing.setValue(form, { hex: hex.value });\n          }\n        });\n        return hex;\n      };\n      var copyRgbToForm = function (form, rgb) {\n        var red = rgb.red;\n        var green = rgb.green;\n        var blue = rgb.blue;\n        Representing.setValue(form, {\n          red: red,\n          green: green,\n          blue: blue\n        });\n      };\n      var memPreview = record({\n        dom: {\n          tag: 'div',\n          classes: [getClass('rgba-preview')],\n          styles: { 'background-color': 'white' },\n          attributes: { role: 'presentation' }\n        }\n      });\n      var updatePreview = function (anyInSystem, hex) {\n        memPreview.getOpt(anyInSystem).each(function (preview) {\n          set$2(preview.element, 'background-color', '#' + hex.value);\n        });\n      };\n      var factory = function () {\n        var state = {\n          red: Cell(Optional.some(255)),\n          green: Cell(Optional.some(255)),\n          blue: Cell(Optional.some(255)),\n          hex: Cell(Optional.some('ffffff'))\n        };\n        var copyHexToRgb = function (form, hex) {\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n        };\n        var get = function (prop) {\n          return state[prop].get();\n        };\n        var set = function (prop, value) {\n          state[prop].set(value);\n        };\n        var getValueRgb = function () {\n          return get('red').bind(function (red) {\n            return get('green').bind(function (green) {\n              return get('blue').map(function (blue) {\n                return rgbaColour(red, green, blue, 1);\n              });\n            });\n          });\n        };\n        var setValueRgb = function (rgb) {\n          var red = rgb.red;\n          var green = rgb.green;\n          var blue = rgb.blue;\n          set('red', Optional.some(red));\n          set('green', Optional.some(green));\n          set('blue', Optional.some(blue));\n        };\n        var onInvalidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event;\n          if (data.type !== 'hex') {\n            set(data.type, Optional.none());\n          } else {\n            onInvalidHexx(form);\n          }\n        };\n        var onValidHex = function (form, value) {\n          onValidHexx(form);\n          var hex = hexColour(value);\n          set('hex', Optional.some(value));\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n          emitWith(form, fieldsUpdate, { hex: hex });\n          updatePreview(form, hex);\n        };\n        var onValidRgb = function (form, prop, value) {\n          var val = parseInt(value, 10);\n          set(prop, Optional.some(val));\n          getValueRgb().each(function (rgb) {\n            var hex = copyRgbToHex(form, rgb);\n            emitWith(form, fieldsUpdate, { hex: hex });\n            updatePreview(form, hex);\n          });\n        };\n        var isHexInputEvent = function (data) {\n          return data.type === 'hex';\n        };\n        var onValidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event;\n          if (isHexInputEvent(data)) {\n            onValidHex(form, data.value);\n          } else {\n            onValidRgb(form, data.type, data.value);\n          }\n        };\n        var formPartStrings = function (key) {\n          return {\n            label: translate(translatePrefix + key + '.label'),\n            description: translate(translatePrefix + key + '.description')\n          };\n        };\n        var redStrings = formPartStrings('red');\n        var greenStrings = formPartStrings('green');\n        var blueStrings = formPartStrings('blue');\n        var hexStrings = formPartStrings('hex');\n        return deepMerge(Form.sketch(function (parts) {\n          return {\n            dom: {\n              tag: 'form',\n              classes: [getClass('rgb-form')],\n              attributes: { 'aria-label': translate('aria.color.picker') }\n            },\n            components: [\n              parts.field('red', FormField.sketch(renderTextField(isRgbaComponent, 'red', redStrings.label, redStrings.description, 255))),\n              parts.field('green', FormField.sketch(renderTextField(isRgbaComponent, 'green', greenStrings.label, greenStrings.description, 255))),\n              parts.field('blue', FormField.sketch(renderTextField(isRgbaComponent, 'blue', blueStrings.label, blueStrings.description, 255))),\n              parts.field('hex', FormField.sketch(renderTextField(isHexString, 'hex', hexStrings.label, hexStrings.description, 'ffffff'))),\n              memPreview.asSpec()\n            ],\n            formBehaviours: derive$1([\n              Invalidating.config({ invalidClass: getClass('form-invalid') }),\n              config('rgb-form-events', [\n                run(validInput, onValidInput),\n                run(invalidInput, onInvalidInput),\n                run(validatingInput, onInvalidInput)\n              ])\n            ])\n          };\n        }), {\n          apis: {\n            updateHex: function (form, hex) {\n              Representing.setValue(form, { hex: hex.value });\n              copyHexToRgb(form, hex);\n              updatePreview(form, hex);\n            }\n          }\n        });\n      };\n      var rgbFormSketcher = single$2({\n        factory: factory,\n        name: 'RgbForm',\n        configFields: [],\n        apis: {\n          updateHex: function (apis, form, hex) {\n            apis.updateHex(form, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return rgbFormSketcher;\n    };\n\n    var paletteFactory = function (_translate, getClass) {\n      var spectrumPart = Slider.parts.spectrum({\n        dom: {\n          tag: 'canvas',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-spectrum')]\n        }\n      });\n      var thumbPart = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-thumb')],\n          innerHtml: '<div class=' + getClass('sv-palette-inner-thumb') + ' role=\"presentation\"></div>'\n        }\n      });\n      var setColour = function (canvas, rgba) {\n        var width = canvas.width, height = canvas.height;\n        var ctx = canvas.getContext('2d');\n        if (ctx === null) {\n          return;\n        }\n        ctx.fillStyle = rgba;\n        ctx.fillRect(0, 0, width, height);\n        var grdWhite = ctx.createLinearGradient(0, 0, width, 0);\n        grdWhite.addColorStop(0, 'rgba(255,255,255,1)');\n        grdWhite.addColorStop(1, 'rgba(255,255,255,0)');\n        ctx.fillStyle = grdWhite;\n        ctx.fillRect(0, 0, width, height);\n        var grdBlack = ctx.createLinearGradient(0, 0, 0, height);\n        grdBlack.addColorStop(0, 'rgba(0,0,0,0)');\n        grdBlack.addColorStop(1, 'rgba(0,0,0,1)');\n        ctx.fillStyle = grdBlack;\n        ctx.fillRect(0, 0, width, height);\n      };\n      var setPaletteHue = function (slider, hue) {\n        var canvas = slider.components()[0].element.dom;\n        var hsv = hsvColour(hue, 100, 100);\n        var rgba = fromHsv(hsv);\n        setColour(canvas, toString(rgba));\n      };\n      var setPaletteThumb = function (slider, hex) {\n        var hsv = fromRgb(fromHex(hex));\n        Slider.setValue(slider, {\n          x: hsv.saturation,\n          y: 100 - hsv.value\n        });\n      };\n      var factory = function (_detail) {\n        var getInitialValue = constant({\n          x: 0,\n          y: 0\n        });\n        var onChange = function (slider, _thumb, value) {\n          emitWith(slider, paletteUpdate, { value: value });\n        };\n        var onInit = function (_slider, _thumb, spectrum, _value) {\n          setColour(spectrum.element.dom, toString(red));\n        };\n        var sliderBehaviours = derive$1([\n          Composing.config({ find: Optional.some }),\n          Focusing.config({})\n        ]);\n        return Slider.sketch({\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' },\n            classes: [getClass('sv-palette')]\n          },\n          model: {\n            mode: 'xy',\n            getInitialValue: getInitialValue\n          },\n          rounded: false,\n          components: [\n            spectrumPart,\n            thumbPart\n          ],\n          onChange: onChange,\n          onInit: onInit,\n          sliderBehaviours: sliderBehaviours\n        });\n      };\n      var saturationBrightnessPaletteSketcher = single$2({\n        factory: factory,\n        name: 'SaturationBrightnessPalette',\n        configFields: [],\n        apis: {\n          setHue: function (_apis, slider, hue) {\n            setPaletteHue(slider, hue);\n          },\n          setThumb: function (_apis, slider, hex) {\n            setPaletteThumb(slider, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return saturationBrightnessPaletteSketcher;\n    };\n\n    var makeFactory = function (translate, getClass) {\n      var factory = function (detail) {\n        var rgbForm = rgbFormFactory(translate, getClass, detail.onValidHex, detail.onInvalidHex);\n        var sbPalette = paletteFactory(translate, getClass);\n        var hueSliderToDegrees = function (hue) {\n          return (100 - hue) / 100 * 360;\n        };\n        var hueDegreesToSlider = function (hue) {\n          return 100 - hue / 360 * 100;\n        };\n        var state = {\n          paletteRgba: Cell(red),\n          paletteHue: Cell(0)\n        };\n        var memSlider = record(sliderFactory(translate, getClass));\n        var memPalette = record(sbPalette.sketch({}));\n        var memRgb = record(rgbForm.sketch({}));\n        var updatePalette = function (anyInSystem, _hex, hue) {\n          memPalette.getOpt(anyInSystem).each(function (palette) {\n            sbPalette.setHue(palette, hue);\n          });\n        };\n        var updateFields = function (anyInSystem, hex) {\n          memRgb.getOpt(anyInSystem).each(function (form) {\n            rgbForm.updateHex(form, hex);\n          });\n        };\n        var updateSlider = function (anyInSystem, _hex, hue) {\n          memSlider.getOpt(anyInSystem).each(function (slider) {\n            Slider.setValue(slider, { y: hueDegreesToSlider(hue) });\n          });\n        };\n        var updatePaletteThumb = function (anyInSystem, hex) {\n          memPalette.getOpt(anyInSystem).each(function (palette) {\n            sbPalette.setThumb(palette, hex);\n          });\n        };\n        var updateState = function (hex, hue) {\n          var rgba = fromHex(hex);\n          state.paletteRgba.set(rgba);\n          state.paletteHue.set(hue);\n        };\n        var runUpdates = function (anyInSystem, hex, hue, updates) {\n          updateState(hex, hue);\n          each(updates, function (update) {\n            update(anyInSystem, hex, hue);\n          });\n        };\n        var onPaletteUpdate = function () {\n          var updates = [updateFields];\n          return function (form, simulatedEvent) {\n            var value = simulatedEvent.event.value;\n            var oldHue = state.paletteHue.get();\n            var newHsv = hsvColour(oldHue, value.x, 100 - value.y);\n            var newHex = hsvToHex(newHsv);\n            runUpdates(form, newHex, oldHue, updates);\n          };\n        };\n        var onSliderUpdate = function () {\n          var updates = [\n            updatePalette,\n            updateFields\n          ];\n          return function (form, simulatedEvent) {\n            var hue = hueSliderToDegrees(simulatedEvent.event.value.y);\n            var oldRgb = state.paletteRgba.get();\n            var oldHsv = fromRgb(oldRgb);\n            var newHsv = hsvColour(hue, oldHsv.saturation, oldHsv.value);\n            var newHex = hsvToHex(newHsv);\n            runUpdates(form, newHex, hue, updates);\n          };\n        };\n        var onFieldsUpdate = function () {\n          var updates = [\n            updatePalette,\n            updateSlider,\n            updatePaletteThumb\n          ];\n          return function (form, simulatedEvent) {\n            var hex = simulatedEvent.event.hex;\n            var hsv = hexToHsv(hex);\n            runUpdates(form, hex, hsv.hue, updates);\n          };\n        };\n        return {\n          uid: detail.uid,\n          dom: detail.dom,\n          components: [\n            memPalette.asSpec(),\n            memSlider.asSpec(),\n            memRgb.asSpec()\n          ],\n          behaviours: derive$1([\n            config('colour-picker-events', [\n              run(fieldsUpdate, onFieldsUpdate()),\n              run(paletteUpdate, onPaletteUpdate()),\n              run(sliderUpdate, onSliderUpdate())\n            ]),\n            Composing.config({\n              find: function (comp) {\n                return memRgb.getOpt(comp);\n              }\n            }),\n            Keying.config({ mode: 'acyclic' })\n          ])\n        };\n      };\n      var colourPickerSketcher = single$2({\n        name: 'ColourPicker',\n        configFields: [\n          strict$1('dom'),\n          defaulted$1('onValidHex', noop),\n          defaulted$1('onInvalidHex', noop)\n        ],\n        factory: factory\n      });\n      return colourPickerSketcher;\n    };\n\n    var self$1 = function () {\n      return Composing.config({ find: Optional.some });\n    };\n    var memento = function (mem) {\n      return Composing.config({ find: mem.getOpt });\n    };\n    var childAt = function (index) {\n      return Composing.config({\n        find: function (comp) {\n          return child(comp.element, index).bind(function (element) {\n            return comp.getSystem().getByDom(element).toOptional();\n          });\n        }\n      });\n    };\n    var ComposingConfigs = {\n      self: self$1,\n      memento: memento,\n      childAt: childAt\n    };\n\n    var english = {\n      'colorcustom.rgb.red.label': 'R',\n      'colorcustom.rgb.red.description': 'Red component',\n      'colorcustom.rgb.green.label': 'G',\n      'colorcustom.rgb.green.description': 'Green component',\n      'colorcustom.rgb.blue.label': 'B',\n      'colorcustom.rgb.blue.description': 'Blue component',\n      'colorcustom.rgb.hex.label': '#',\n      'colorcustom.rgb.hex.description': 'Hex color code',\n      'colorcustom.rgb.range': 'Range 0 to 255',\n      'colorcustom.sb.saturation': 'Saturation',\n      'colorcustom.sb.brightness': 'Brightness',\n      'colorcustom.sb.picker': 'Saturation and Brightness Picker',\n      'colorcustom.sb.palette': 'Saturation and Brightness Palette',\n      'colorcustom.sb.instructions': 'Use arrow keys to select saturation and brightness, on x and y axes',\n      'colorcustom.hue.hue': 'Hue',\n      'colorcustom.hue.slider': 'Hue Slider',\n      'colorcustom.hue.palette': 'Hue Palette',\n      'colorcustom.hue.instructions': 'Use arrow keys to select a hue',\n      'aria.color.picker': 'Color Picker',\n      'aria.input.invalid': 'Invalid input'\n    };\n    var getEnglishText = function (key) {\n      return english[key];\n    };\n    var translate$1 = function (key) {\n      return getEnglishText(key);\n    };\n    var renderColorPicker = function (_spec) {\n      var getClass = function (key) {\n        return 'tox-' + key;\n      };\n      var colourPickerFactory = makeFactory(translate$1, getClass);\n      var onValidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: true\n        });\n      };\n      var onInvalidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: false\n        });\n      };\n      var memPicker = record(colourPickerFactory.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('color-picker-container')],\n          attributes: { role: 'presentation' }\n        },\n        onValidHex: onValidHex,\n        onInvalidHex: onInvalidHex\n      }));\n      return {\n        dom: { tag: 'div' },\n        components: [memPicker.asSpec()],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                var optHex = optRgbForm.bind(function (rgbForm) {\n                  var formValues = Representing.getValue(rgbForm);\n                  return formValues.hex;\n                });\n                return optHex.map(function (hex) {\n                  return '#' + hex;\n                }).getOr('');\n              },\n              setValue: function (comp, newValue) {\n                var pattern = /^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/;\n                var m = pattern.exec(newValue);\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                optRgbForm.fold(function () {\n                  console.log('Can not find form');\n                }, function (rgbForm) {\n                  Representing.setValue(rgbForm, { hex: Optional.from(m[1]).getOr('') });\n                  Form.getField(rgbForm, 'hex').each(function (hexField) {\n                    emit(hexField, input());\n                  });\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.Resource');\n\n    var isOldCustomEditor = function (spec) {\n      return Object.prototype.hasOwnProperty.call(spec, 'init');\n    };\n    var renderCustomEditor = function (spec) {\n      var editorApi = Cell(Optional.none());\n      var memReplaced = record({ dom: { tag: spec.tag } });\n      var initialValue = Cell(Optional.none());\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-custom-editor']\n        },\n        behaviours: derive$1([\n          config('custom-editor-events', [runOnAttached(function (component) {\n              memReplaced.getOpt(component).each(function (ta) {\n                (isOldCustomEditor(spec) ? spec.init(ta.element.dom) : global$b.load(spec.scriptId, spec.scriptUrl).then(function (init) {\n                  return init(ta.element.dom, spec.settings);\n                })).then(function (ea) {\n                  initialValue.get().each(function (cvalue) {\n                    ea.setValue(cvalue);\n                  });\n                  initialValue.set(Optional.none());\n                  editorApi.set(Optional.some(ea));\n                });\n              });\n            })]),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return editorApi.get().fold(function () {\n                  return initialValue.get().getOr('');\n                }, function (ed) {\n                  return ed.getValue();\n                });\n              },\n              setValue: function (component, value) {\n                editorApi.get().fold(function () {\n                  initialValue.set(Optional.some(value));\n                }, function (ed) {\n                  return ed.setValue(value);\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ]),\n        components: [memReplaced.asSpec()]\n      };\n    };\n\n    var global$c = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var processors = objOf([\n      defaulted$1('preprocess', identity),\n      defaulted$1('postprocess', identity)\n    ]);\n    var memento$1 = function (mem, rawProcessors) {\n      var ps = asRawOrDie('RepresentingConfigs.memento processors', processors, rawProcessors);\n      return Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var other = mem.get(comp);\n            var rawValue = Representing.getValue(other);\n            return ps.postprocess(rawValue);\n          },\n          setValue: function (comp, rawValue) {\n            var newValue = ps.preprocess(rawValue);\n            var other = mem.get(comp);\n            Representing.setValue(other, newValue);\n          }\n        }\n      });\n    };\n    var withComp = function (optInitialValue, getter, setter) {\n      return Representing.config(deepMerge({\n        store: {\n          mode: 'manual',\n          getValue: getter,\n          setValue: setter\n        }\n      }, optInitialValue.map(function (initialValue) {\n        return { store: { initialValue: initialValue } };\n      }).getOr({})));\n    };\n    var withElement = function (initialValue, getter, setter) {\n      return withComp(initialValue, function (c) {\n        return getter(c.element);\n      }, function (c, v) {\n        return setter(c.element, v);\n      });\n    };\n    var domValue = function (optInitialValue) {\n      return withElement(optInitialValue, get$6, set$3);\n    };\n    var domHtml = function (optInitialValue) {\n      return withElement(optInitialValue, get$2, set);\n    };\n    var memory$1 = function (initialValue) {\n      return Representing.config({\n        store: {\n          mode: 'memory',\n          initialValue: initialValue\n        }\n      });\n    };\n    var RepresentingConfigs = {\n      memento: memento$1,\n      withElement: withElement,\n      withComp: withComp,\n      domValue: domValue,\n      domHtml: domHtml,\n      memory: memory$1\n    };\n\n    var defaultImageFileTypes = 'jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp';\n    var filterByExtension = function (files, providersBackstage) {\n      var allowedImageFileTypes = global$c.explode(providersBackstage.getSetting('images_file_types', defaultImageFileTypes, 'string'));\n      var isFileInAllowedTypes = function (file) {\n        return exists(allowedImageFileTypes, function (type) {\n          return endsWith(file.name.toLowerCase(), '.' + type.toLowerCase());\n        });\n      };\n      return filter(from$1(files), isFileInAllowedTypes);\n    };\n    var renderDropZone = function (spec, providersBackstage) {\n      var stopper = function (_, se) {\n        se.stop();\n      };\n      var sequence = function (actions) {\n        return function (comp, se) {\n          each(actions, function (a) {\n            a(comp, se);\n          });\n        };\n      };\n      var onDrop = function (comp, se) {\n        if (!Disabling.isDisabled(comp)) {\n          var transferEvent = se.event.raw;\n          handleFiles(comp, transferEvent.dataTransfer.files);\n        }\n      };\n      var onSelect = function (component, simulatedEvent) {\n        var input = simulatedEvent.event.raw.target;\n        handleFiles(component, input.files);\n      };\n      var handleFiles = function (component, files) {\n        Representing.setValue(component, filterByExtension(files, providersBackstage));\n        emitWith(component, formChangeEvent, { name: spec.name });\n      };\n      var memInput = record({\n        dom: {\n          tag: 'input',\n          attributes: {\n            type: 'file',\n            accept: 'image/*'\n          },\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([config('input-file-events', [\n            cutter(click()),\n            cutter(tap())\n          ])])\n      });\n      var renderField = function (s) {\n        return {\n          uid: s.uid,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dropzone-container']\n          },\n          behaviours: derive$1([\n            RepresentingConfigs.memory([]),\n            ComposingConfigs.self(),\n            Disabling.config({}),\n            Toggling.config({\n              toggleClass: 'dragenter',\n              toggleOnExecute: false\n            }),\n            config('dropzone-events', [\n              run('dragenter', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run('dragleave', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run('dragover', stopper),\n              run('drop', sequence([\n                stopper,\n                onDrop\n              ])),\n              run(change(), onSelect)\n            ])\n          ]),\n          components: [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-dropzone'],\n                styles: {}\n              },\n              components: [\n                {\n                  dom: {\n                    tag: 'p',\n                    innerHtml: providersBackstage.translate('Drop an image here')\n                  }\n                },\n                Button.sketch({\n                  dom: {\n                    tag: 'button',\n                    innerHtml: providersBackstage.translate('Browse for an image'),\n                    styles: { position: 'relative' },\n                    classes: [\n                      'tox-button',\n                      'tox-button--secondary'\n                    ]\n                  },\n                  components: [memInput.asSpec()],\n                  action: function (comp) {\n                    var inputComp = memInput.get(comp);\n                    inputComp.element.dom.click();\n                  },\n                  buttonBehaviours: derive$1([\n                    Tabstopping.config({}),\n                    DisablingConfigs.button(providersBackstage.isDisabled),\n                    receivingConfig()\n                  ])\n                })\n              ]\n            }]\n        };\n      };\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({ factory: { sketch: renderField } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    var renderGrid = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-form__grid',\n            'tox-form__grid--' + spec.columns + 'col'\n          ]\n        },\n        components: map(spec.items, backstage.interpreter)\n      };\n    };\n\n    var beforeObject = generate$1('alloy-fake-before-tabstop');\n    var afterObject = generate$1('alloy-fake-after-tabstop');\n    var craftWithClasses = function (classes) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: {\n            width: '1px',\n            height: '1px',\n            outline: 'none'\n          },\n          attributes: { tabindex: '0' },\n          classes: classes\n        },\n        behaviours: derive$1([\n          Focusing.config({ ignore: true }),\n          Tabstopping.config({})\n        ])\n      };\n    };\n    var craft = function (spec) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-navobj']\n        },\n        components: [\n          craftWithClasses([beforeObject]),\n          spec,\n          craftWithClasses([afterObject])\n        ],\n        behaviours: derive$1([ComposingConfigs.childAt(1)])\n      };\n    };\n    var triggerTab = function (placeholder, shiftKey) {\n      emitWith(placeholder, keydown(), {\n        raw: {\n          which: 9,\n          shiftKey: shiftKey\n        }\n      });\n    };\n    var onFocus$1 = function (container, targetComp) {\n      var target = targetComp.element;\n      if (has$2(target, beforeObject)) {\n        triggerTab(container, true);\n      } else if (has$2(target, afterObject)) {\n        triggerTab(container, false);\n      }\n    };\n    var isPseudoStop = function (element) {\n      return closest$4(element, [\n        '.' + beforeObject,\n        '.' + afterObject\n      ].join(','), never);\n    };\n\n    var platformNeedsSandboxing = !(detect$3().browser.isIE() || detect$3().browser.isEdge());\n    var getDynamicSource = function (isSandbox) {\n      var cachedValue = Cell('');\n      return {\n        getValue: function (_frameComponent) {\n          return cachedValue.get();\n        },\n        setValue: function (frameComponent, html) {\n          if (!isSandbox) {\n            set$1(frameComponent.element, 'src', 'javascript:\\'\\'');\n            var doc = frameComponent.element.dom.contentWindow.document;\n            doc.open();\n            doc.write(html);\n            doc.close();\n          } else {\n            set$1(frameComponent.element, 'srcdoc', html);\n          }\n          cachedValue.set(html);\n        }\n      };\n    };\n    var renderIFrame = function (spec, providersBackstage) {\n      var isSandbox = platformNeedsSandboxing && spec.sandboxed;\n      var attributes = __assign(__assign({}, spec.label.map(function (title) {\n        return { title: title };\n      }).getOr({})), isSandbox ? { sandbox: 'allow-scripts allow-same-origin' } : {});\n      var sourcing = getDynamicSource(isSandbox);\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var factory = function (newSpec) {\n        return craft({\n          uid: newSpec.uid,\n          dom: {\n            tag: 'iframe',\n            attributes: attributes\n          },\n          behaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({}),\n            RepresentingConfigs.withComp(Optional.none(), sourcing.getValue, sourcing.setValue)\n          ])\n        });\n      };\n      var pField = FormField.parts.field({ factory: { sketch: factory } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    var create$5 = function (width, height) {\n      return resize(document.createElement('canvas'), width, height);\n    };\n    var clone$1 = function (canvas) {\n      var tCanvas = create$5(canvas.width, canvas.height);\n      var ctx = get2dContext(tCanvas);\n      ctx.drawImage(canvas, 0, 0);\n      return tCanvas;\n    };\n    var get2dContext = function (canvas) {\n      return canvas.getContext('2d');\n    };\n    var resize = function (canvas, width, height) {\n      canvas.width = width;\n      canvas.height = height;\n      return canvas;\n    };\n\n    var getWidth = function (image) {\n      return image.naturalWidth || image.width;\n    };\n    var getHeight = function (image) {\n      return image.naturalHeight || image.height;\n    };\n\n    var promise = function () {\n      var Promise = function (fn) {\n        if (typeof this !== 'object') {\n          throw new TypeError('Promises must be constructed via new');\n        }\n        if (typeof fn !== 'function') {\n          throw new TypeError('not a function');\n        }\n        this._state = null;\n        this._value = null;\n        this._deferreds = [];\n        doResolve(fn, bind(resolve, this), bind(reject, this));\n      };\n      var anyWindow = window;\n      var asap = Promise.immediateFn || typeof anyWindow.setImmediate === 'function' && anyWindow.setImmediate || function (fn) {\n        return setTimeout(fn, 1);\n      };\n      var bind = function (fn, thisArg) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          return fn.apply(thisArg, args);\n        };\n      };\n      var isArray = Array.isArray || function (value) {\n        return Object.prototype.toString.call(value) === '[object Array]';\n      };\n      function handle(deferred) {\n        var me = this;\n        if (this._state === null) {\n          this._deferreds.push(deferred);\n          return;\n        }\n        asap(function () {\n          var cb = me._state ? deferred.onFulfilled : deferred.onRejected;\n          if (cb === null) {\n            (me._state ? deferred.resolve : deferred.reject)(me._value);\n            return;\n          }\n          var ret;\n          try {\n            ret = cb(me._value);\n          } catch (e) {\n            deferred.reject(e);\n            return;\n          }\n          deferred.resolve(ret);\n        });\n      }\n      function resolve(newValue) {\n        try {\n          if (newValue === this) {\n            throw new TypeError('A promise cannot be resolved with itself.');\n          }\n          if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n            var then = newValue.then;\n            if (typeof then === 'function') {\n              doResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));\n              return;\n            }\n          }\n          this._state = true;\n          this._value = newValue;\n          finale.call(this);\n        } catch (e) {\n          reject.call(this, e);\n        }\n      }\n      function reject(newValue) {\n        this._state = false;\n        this._value = newValue;\n        finale.call(this);\n      }\n      function finale() {\n        for (var _i = 0, _a = this._deferreds; _i < _a.length; _i++) {\n          var deferred = _a[_i];\n          handle.call(this, deferred);\n        }\n        this._deferreds = [];\n      }\n      function Handler(onFulfilled, onRejected, resolve, reject) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n      }\n      var doResolve = function (fn, onFulfilled, onRejected) {\n        var done = false;\n        try {\n          fn(function (value) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onFulfilled(value);\n          }, function (reason) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onRejected(reason);\n          });\n        } catch (ex) {\n          if (done) {\n            return;\n          }\n          done = true;\n          onRejected(ex);\n        }\n      };\n      Promise.prototype.catch = function (onRejected) {\n        return this.then(null, onRejected);\n      };\n      Promise.prototype.then = function (onFulfilled, onRejected) {\n        var me = this;\n        return new Promise(function (resolve, reject) {\n          handle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));\n        });\n      };\n      Promise.all = function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        var args = Array.prototype.slice.call(values.length === 1 && isArray(values[0]) ? values[0] : values);\n        return new Promise(function (resolve, reject) {\n          if (args.length === 0) {\n            return resolve([]);\n          }\n          var remaining = args.length;\n          var res = function (i, val) {\n            try {\n              if (val && (typeof val === 'object' || typeof val === 'function')) {\n                var then = val.then;\n                if (typeof then === 'function') {\n                  then.call(val, function (val) {\n                    res(i, val);\n                  }, reject);\n                  return;\n                }\n              }\n              args[i] = val;\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            } catch (ex) {\n              reject(ex);\n            }\n          };\n          for (var i = 0; i < args.length; i++) {\n            res(i, args[i]);\n          }\n        });\n      };\n      Promise.resolve = function (value) {\n        if (value && typeof value === 'object' && value.constructor === Promise) {\n          return value;\n        }\n        return new Promise(function (resolve) {\n          resolve(value);\n        });\n      };\n      Promise.reject = function (reason) {\n        return new Promise(function (resolve, reject) {\n          reject(reason);\n        });\n      };\n      Promise.race = function (values) {\n        return new Promise(function (resolve, reject) {\n          for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n            var value = values_1[_i];\n            value.then(resolve, reject);\n          }\n        });\n      };\n      return Promise;\n    };\n    var Promise$1 = window.Promise ? window.Promise : promise();\n\n    var blobToImage = function (blob) {\n      return new Promise$1(function (resolve, reject) {\n        var blobUrl = URL.createObjectURL(blob);\n        var image = new Image();\n        var removeListeners = function () {\n          image.removeEventListener('load', loaded);\n          image.removeEventListener('error', error);\n        };\n        var loaded = function () {\n          removeListeners();\n          resolve(image);\n        };\n        var error = function () {\n          removeListeners();\n          reject('Unable to load data of type ' + blob.type + ': ' + blobUrl);\n        };\n        image.addEventListener('load', loaded);\n        image.addEventListener('error', error);\n        image.src = blobUrl;\n        if (image.complete) {\n          setTimeout(loaded, 0);\n        }\n      });\n    };\n    var dataUriToBlobSync = function (uri) {\n      var data = uri.split(',');\n      var matches = /data:([^;]+)/.exec(data[0]);\n      if (!matches) {\n        return Optional.none();\n      }\n      var mimetype = matches[1];\n      var base64 = data[1];\n      var sliceSize = 1024;\n      var byteCharacters = atob(base64);\n      var bytesLength = byteCharacters.length;\n      var slicesCount = Math.ceil(bytesLength / sliceSize);\n      var byteArrays = new Array(slicesCount);\n      for (var sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n        var begin = sliceIndex * sliceSize;\n        var end = Math.min(begin + sliceSize, bytesLength);\n        var bytes = new Array(end - begin);\n        for (var offset = begin, i = 0; offset < end; ++i, ++offset) {\n          bytes[i] = byteCharacters[offset].charCodeAt(0);\n        }\n        byteArrays[sliceIndex] = new Uint8Array(bytes);\n      }\n      return Optional.some(new Blob(byteArrays, { type: mimetype }));\n    };\n    var dataUriToBlob = function (uri) {\n      return new Promise$1(function (resolve, reject) {\n        dataUriToBlobSync(uri).fold(function () {\n          reject('uri is not base64: ' + uri);\n        }, resolve);\n      });\n    };\n    var canvasToBlob = function (canvas, type, quality) {\n      type = type || 'image/png';\n      if (isFunction(HTMLCanvasElement.prototype.toBlob)) {\n        return new Promise$1(function (resolve, reject) {\n          canvas.toBlob(function (blob) {\n            if (blob) {\n              resolve(blob);\n            } else {\n              reject();\n            }\n          }, type, quality);\n        });\n      } else {\n        return dataUriToBlob(canvas.toDataURL(type, quality));\n      }\n    };\n    var canvasToDataURL = function (canvas, type, quality) {\n      type = type || 'image/png';\n      return canvas.toDataURL(type, quality);\n    };\n    var blobToCanvas = function (blob) {\n      return blobToImage(blob).then(function (image) {\n        revokeImageUrl(image);\n        var canvas = create$5(getWidth(image), getHeight(image));\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0);\n        return canvas;\n      });\n    };\n    var blobToDataUri = function (blob) {\n      return new Promise$1(function (resolve) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n    var revokeImageUrl = function (image) {\n      URL.revokeObjectURL(image.src);\n    };\n\n    var create$6 = function (getCanvas, blob, uri) {\n      var initialType = blob.type;\n      var getType = constant(initialType);\n      var toBlob = function () {\n        return Promise$1.resolve(blob);\n      };\n      var toDataURL = constant(uri);\n      var toBase64 = function () {\n        return uri.split(',')[1];\n      };\n      var toAdjustedBlob = function (type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToBlob(canvas, type, quality);\n        });\n      };\n      var toAdjustedDataURL = function (type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToDataURL(canvas, type, quality);\n        });\n      };\n      var toAdjustedBase64 = function (type, quality) {\n        return toAdjustedDataURL(type, quality).then(function (dataurl) {\n          return dataurl.split(',')[1];\n        });\n      };\n      var toCanvas = function () {\n        return getCanvas.then(clone$1);\n      };\n      return {\n        getType: getType,\n        toBlob: toBlob,\n        toDataURL: toDataURL,\n        toBase64: toBase64,\n        toAdjustedBlob: toAdjustedBlob,\n        toAdjustedDataURL: toAdjustedDataURL,\n        toAdjustedBase64: toAdjustedBase64,\n        toCanvas: toCanvas\n      };\n    };\n    var fromBlob = function (blob) {\n      return blobToDataUri(blob).then(function (uri) {\n        return create$6(blobToCanvas(blob), blob, uri);\n      });\n    };\n    var fromCanvas = function (canvas, type) {\n      return canvasToBlob(canvas, type).then(function (blob) {\n        return create$6(Promise$1.resolve(canvas), blob, canvas.toDataURL());\n      });\n    };\n\n    var blobToImageResult = function (blob) {\n      return fromBlob(blob);\n    };\n\n    var clamp$1 = function (value, min, max) {\n      var parsedValue = typeof value === 'string' ? parseFloat(value) : value;\n      if (parsedValue > max) {\n        parsedValue = max;\n      } else if (parsedValue < min) {\n        parsedValue = min;\n      }\n      return parsedValue;\n    };\n    var identity$1 = function () {\n      return [\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ];\n    };\n    var DELTA_INDEX = [\n      0,\n      0.01,\n      0.02,\n      0.04,\n      0.05,\n      0.06,\n      0.07,\n      0.08,\n      0.1,\n      0.11,\n      0.12,\n      0.14,\n      0.15,\n      0.16,\n      0.17,\n      0.18,\n      0.2,\n      0.21,\n      0.22,\n      0.24,\n      0.25,\n      0.27,\n      0.28,\n      0.3,\n      0.32,\n      0.34,\n      0.36,\n      0.38,\n      0.4,\n      0.42,\n      0.44,\n      0.46,\n      0.48,\n      0.5,\n      0.53,\n      0.56,\n      0.59,\n      0.62,\n      0.65,\n      0.68,\n      0.71,\n      0.74,\n      0.77,\n      0.8,\n      0.83,\n      0.86,\n      0.89,\n      0.92,\n      0.95,\n      0.98,\n      1,\n      1.06,\n      1.12,\n      1.18,\n      1.24,\n      1.3,\n      1.36,\n      1.42,\n      1.48,\n      1.54,\n      1.6,\n      1.66,\n      1.72,\n      1.78,\n      1.84,\n      1.9,\n      1.96,\n      2,\n      2.12,\n      2.25,\n      2.37,\n      2.5,\n      2.62,\n      2.75,\n      2.87,\n      3,\n      3.2,\n      3.4,\n      3.6,\n      3.8,\n      4,\n      4.3,\n      4.7,\n      4.9,\n      5,\n      5.5,\n      6,\n      6.5,\n      6.8,\n      7,\n      7.3,\n      7.5,\n      7.8,\n      8,\n      8.4,\n      8.7,\n      9,\n      9.4,\n      9.6,\n      9.8,\n      10\n    ];\n    var multiply = function (matrix1, matrix2) {\n      var col = [];\n      var out = new Array(25);\n      var val;\n      for (var i = 0; i < 5; i++) {\n        for (var j = 0; j < 5; j++) {\n          col[j] = matrix2[j + i * 5];\n        }\n        for (var j = 0; j < 5; j++) {\n          val = 0;\n          for (var k = 0; k < 5; k++) {\n            val += matrix1[j + k * 5] * col[k];\n          }\n          out[j + i * 5] = val;\n        }\n      }\n      return out;\n    };\n    var adjustContrast = function (matrix, value) {\n      var x;\n      value = clamp$1(value, -1, 1);\n      value *= 100;\n      if (value < 0) {\n        x = 127 + value / 100 * 127;\n      } else {\n        x = value % 1;\n        if (x === 0) {\n          x = DELTA_INDEX[value];\n        } else {\n          x = DELTA_INDEX[Math.floor(value)] * (1 - x) + DELTA_INDEX[Math.floor(value) + 1] * x;\n        }\n        x = x * 127 + 127;\n      }\n      return multiply(matrix, [\n        x / 127,\n        0,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        x / 127,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        x / 127,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    };\n    var adjustBrightness = function (matrix, value) {\n      value = clamp$1(255 * value, -255, 255);\n      return multiply(matrix, [\n        1,\n        0,\n        0,\n        0,\n        value,\n        0,\n        1,\n        0,\n        0,\n        value,\n        0,\n        0,\n        1,\n        0,\n        value,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    };\n    var adjustColors = function (matrix, adjustR, adjustG, adjustB) {\n      adjustR = clamp$1(adjustR, 0, 2);\n      adjustG = clamp$1(adjustG, 0, 2);\n      adjustB = clamp$1(adjustB, 0, 2);\n      return multiply(matrix, [\n        adjustR,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustG,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustB,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    };\n\n    var colorFilter = function (ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyColorFilter(canvas, ir.getType(), matrix);\n      });\n    };\n    var applyColorFilter = function (canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      var applyMatrix = function (pixelsData, m) {\n        var r, g, b, a;\n        var data = pixelsData.data, m0 = m[0], m1 = m[1], m2 = m[2], m3 = m[3], m4 = m[4], m5 = m[5], m6 = m[6], m7 = m[7], m8 = m[8], m9 = m[9], m10 = m[10], m11 = m[11], m12 = m[12], m13 = m[13], m14 = m[14], m15 = m[15], m16 = m[16], m17 = m[17], m18 = m[18], m19 = m[19];\n        for (var i = 0; i < data.length; i += 4) {\n          r = data[i];\n          g = data[i + 1];\n          b = data[i + 2];\n          a = data[i + 3];\n          data[i] = r * m0 + g * m1 + b * m2 + a * m3 + m4;\n          data[i + 1] = r * m5 + g * m6 + b * m7 + a * m8 + m9;\n          data[i + 2] = r * m10 + g * m11 + b * m12 + a * m13 + m14;\n          data[i + 3] = r * m15 + g * m16 + b * m17 + a * m18 + m19;\n        }\n        return pixelsData;\n      };\n      var pixels = applyMatrix(context.getImageData(0, 0, canvas.width, canvas.height), matrix);\n      context.putImageData(pixels, 0, 0);\n      return fromCanvas(canvas, type);\n    };\n    var convoluteFilter = function (ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyConvoluteFilter(canvas, ir.getType(), matrix);\n      });\n    };\n    var applyConvoluteFilter = function (canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      var applyMatrix = function (pIn, pOut, aMatrix) {\n        var clamp = function (value, min, max) {\n          if (value > max) {\n            value = max;\n          } else if (value < min) {\n            value = min;\n          }\n          return value;\n        };\n        var side = Math.round(Math.sqrt(aMatrix.length));\n        var halfSide = Math.floor(side / 2);\n        var rgba = pIn.data;\n        var drgba = pOut.data;\n        var w = pIn.width;\n        var h = pIn.height;\n        for (var y = 0; y < h; y++) {\n          for (var x = 0; x < w; x++) {\n            var r = 0;\n            var g = 0;\n            var b = 0;\n            for (var cy = 0; cy < side; cy++) {\n              for (var cx = 0; cx < side; cx++) {\n                var scx = clamp(x + cx - halfSide, 0, w - 1);\n                var scy = clamp(y + cy - halfSide, 0, h - 1);\n                var innerOffset = (scy * w + scx) * 4;\n                var wt = aMatrix[cy * side + cx];\n                r += rgba[innerOffset] * wt;\n                g += rgba[innerOffset + 1] * wt;\n                b += rgba[innerOffset + 2] * wt;\n              }\n            }\n            var offset = (y * w + x) * 4;\n            drgba[offset] = clamp(r, 0, 255);\n            drgba[offset + 1] = clamp(g, 0, 255);\n            drgba[offset + 2] = clamp(b, 0, 255);\n          }\n        }\n        return pOut;\n      };\n      var pixelsIn = context.getImageData(0, 0, canvas.width, canvas.height);\n      var pixelsOut = context.getImageData(0, 0, canvas.width, canvas.height);\n      pixelsOut = applyMatrix(pixelsIn, pixelsOut, matrix);\n      context.putImageData(pixelsOut, 0, 0);\n      return fromCanvas(canvas, type);\n    };\n    var functionColorFilter = function (colorFn) {\n      var filterImpl = function (canvas, type, value) {\n        var context = get2dContext(canvas);\n        var lookup = new Array(256);\n        var applyLookup = function (pixelsData, lookupData) {\n          var data = pixelsData.data;\n          for (var i = 0; i < data.length; i += 4) {\n            data[i] = lookupData[data[i]];\n            data[i + 1] = lookupData[data[i + 1]];\n            data[i + 2] = lookupData[data[i + 2]];\n          }\n          return pixelsData;\n        };\n        for (var i = 0; i < lookup.length; i++) {\n          lookup[i] = colorFn(i, value);\n        }\n        var pixels = applyLookup(context.getImageData(0, 0, canvas.width, canvas.height), lookup);\n        context.putImageData(pixels, 0, 0);\n        return fromCanvas(canvas, type);\n      };\n      return function (ir, value) {\n        return ir.toCanvas().then(function (canvas) {\n          return filterImpl(canvas, ir.getType(), value);\n        });\n      };\n    };\n    var complexAdjustableColorFilter = function (matrixAdjustFn) {\n      return function (ir, adjust) {\n        return colorFilter(ir, matrixAdjustFn(identity$1(), adjust));\n      };\n    };\n    var basicColorFilter = function (matrix) {\n      return function (ir) {\n        return colorFilter(ir, matrix);\n      };\n    };\n    var basicConvolutionFilter = function (kernel) {\n      return function (ir) {\n        return convoluteFilter(ir, kernel);\n      };\n    };\n    var invert = basicColorFilter([\n      -1,\n      0,\n      0,\n      0,\n      255,\n      0,\n      -1,\n      0,\n      0,\n      255,\n      0,\n      0,\n      -1,\n      0,\n      255,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      1\n    ]);\n    var brightness = complexAdjustableColorFilter(adjustBrightness);\n    var contrast = complexAdjustableColorFilter(adjustContrast);\n    var colorize = function (ir, adjustR, adjustG, adjustB) {\n      return colorFilter(ir, adjustColors(identity$1(), adjustR, adjustG, adjustB));\n    };\n    var sharpen = basicConvolutionFilter([\n      0,\n      -1,\n      0,\n      -1,\n      5,\n      -1,\n      0,\n      -1,\n      0\n    ]);\n    var gamma = functionColorFilter(function (color, value) {\n      return Math.pow(color / 255, 1 - value) * 255;\n    });\n\n    var scale = function (image, dW, dH) {\n      var sW = getWidth(image);\n      var sH = getHeight(image);\n      var wRatio = dW / sW;\n      var hRatio = dH / sH;\n      var scaleCapped = false;\n      if (wRatio < 0.5 || wRatio > 2) {\n        wRatio = wRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      if (hRatio < 0.5 || hRatio > 2) {\n        hRatio = hRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      var scaled = _scale(image, wRatio, hRatio);\n      return !scaleCapped ? scaled : scaled.then(function (tCanvas) {\n        return scale(tCanvas, dW, dH);\n      });\n    };\n    var _scale = function (image, wRatio, hRatio) {\n      return new Promise$1(function (resolve) {\n        var sW = getWidth(image);\n        var sH = getHeight(image);\n        var dW = Math.floor(sW * wRatio);\n        var dH = Math.floor(sH * hRatio);\n        var canvas = create$5(dW, dH);\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0, sW, sH, 0, 0, dW, dH);\n        resolve(canvas);\n      });\n    };\n\n    var ceilWithPrecision = function (num, precision) {\n      if (precision === void 0) {\n        precision = 2;\n      }\n      var mul = Math.pow(10, precision);\n      var upper = Math.round(num * mul);\n      return Math.ceil(upper / mul);\n    };\n    var rotate = function (ir, angle) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyRotate(canvas, ir.getType(), angle);\n      });\n    };\n    var applyRotate = function (image, type, angle) {\n      var degrees = angle < 0 ? 360 + angle : angle;\n      var rad = degrees * Math.PI / 180;\n      var width = image.width;\n      var height = image.height;\n      var sin = Math.sin(rad);\n      var cos = Math.cos(rad);\n      var newWidth = ceilWithPrecision(Math.abs(width * cos) + Math.abs(height * sin));\n      var newHeight = ceilWithPrecision(Math.abs(width * sin) + Math.abs(height * cos));\n      var canvas = create$5(newWidth, newHeight);\n      var context = get2dContext(canvas);\n      context.translate(newWidth / 2, newHeight / 2);\n      context.rotate(rad);\n      context.drawImage(image, -width / 2, -height / 2);\n      return fromCanvas(canvas, type);\n    };\n    var flip = function (ir, axis) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyFlip(canvas, ir.getType(), axis);\n      });\n    };\n    var applyFlip = function (image, type, axis) {\n      var canvas = create$5(image.width, image.height);\n      var context = get2dContext(canvas);\n      if (axis === 'v') {\n        context.scale(1, -1);\n        context.drawImage(image, 0, -canvas.height);\n      } else {\n        context.scale(-1, 1);\n        context.drawImage(image, -canvas.width, 0);\n      }\n      return fromCanvas(canvas, type);\n    };\n    var crop = function (ir, x, y, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyCrop(canvas, ir.getType(), x, y, w, h);\n      });\n    };\n    var applyCrop = function (image, type, x, y, w, h) {\n      var canvas = create$5(w, h);\n      var context = get2dContext(canvas);\n      context.drawImage(image, -x, -y);\n      return fromCanvas(canvas, type);\n    };\n    var resize$1 = function (ir, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return scale(canvas, w, h).then(function (newCanvas) {\n          return fromCanvas(newCanvas, ir.getType());\n        });\n      });\n    };\n\n    var invert$1 = function (ir) {\n      return invert(ir);\n    };\n    var sharpen$1 = function (ir) {\n      return sharpen(ir);\n    };\n    var gamma$1 = function (ir, value) {\n      return gamma(ir, value);\n    };\n    var colorize$1 = function (ir, adjustR, adjustG, adjustB) {\n      return colorize(ir, adjustR, adjustG, adjustB);\n    };\n    var brightness$1 = function (ir, adjust) {\n      return brightness(ir, adjust);\n    };\n    var contrast$1 = function (ir, adjust) {\n      return contrast(ir, adjust);\n    };\n    var flip$1 = function (ir, axis) {\n      return flip(ir, axis);\n    };\n    var crop$1 = function (ir, x, y, w, h) {\n      return crop(ir, x, y, w, h);\n    };\n    var resize$2 = function (ir, w, h) {\n      return resize$1(ir, w, h);\n    };\n    var rotate$1 = function (ir, angle) {\n      return rotate(ir, angle);\n    };\n\n    var renderIcon$1 = function (iconHtml, behaviours) {\n      return __assign({\n        dom: {\n          tag: 'span',\n          innerHtml: iconHtml,\n          classes: [\n            'tox-icon',\n            'tox-tbtn__icon-wrap'\n          ]\n        }\n      }, behaviours);\n    };\n    var renderIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon$1(get$e(iconName, iconsProvider), {});\n    };\n    var renderReplacableIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon$1(get$e(iconName, iconsProvider), { behaviours: derive$1([Replacing.config({})]) });\n    };\n    var renderLabel$1 = function (text, prefix, providersBackstage) {\n      return {\n        dom: {\n          tag: 'span',\n          innerHtml: providersBackstage.translate(text),\n          classes: [prefix + '__select-label']\n        },\n        behaviours: derive$1([Replacing.config({})])\n      };\n    };\n\n    var _a$1;\n    var internalToolbarButtonExecute = generate$1('toolbar.button.execute');\n    var onToolbarButtonExecute = function (info) {\n      return runOnExecute(function (comp, _simulatedEvent) {\n        runWithApi(info, comp)(function (itemApi) {\n          emitWith(comp, internalToolbarButtonExecute, { buttonApi: itemApi });\n          info.onAction(itemApi);\n        });\n      });\n    };\n    var toolbarButtonEventOrder = (_a$1 = {}, _a$1[execute()] = [\n      'disabling',\n      'alloy.base.behaviour',\n      'toggling',\n      'toolbar-button-events'\n    ], _a$1);\n\n    var updateMenuText = generate$1('update-menu-text');\n    var updateMenuIcon = generate$1('update-menu-icon');\n    var renderCommonDropdown = function (spec, prefix, sharedBackstage) {\n      var editorOffCell = Cell(noop);\n      var optMemDisplayText = spec.text.map(function (text) {\n        return record(renderLabel$1(text, prefix, sharedBackstage.providers));\n      });\n      var optMemDisplayIcon = spec.icon.map(function (iconName) {\n        return record(renderReplacableIconFromPack(iconName, sharedBackstage.providers.icons));\n      });\n      var onLeftOrRightInMenu = function (comp, se) {\n        var dropdown = Representing.getValue(comp);\n        Focusing.focus(dropdown);\n        emitWith(dropdown, 'keydown', { raw: se.event.raw });\n        Dropdown.close(dropdown);\n        return Optional.some(true);\n      };\n      var role = spec.role.fold(function () {\n        return {};\n      }, function (role) {\n        return { role: role };\n      });\n      var tooltipAttributes = spec.tooltip.fold(function () {\n        return {};\n      }, function (tooltip) {\n        var translatedTooltip = sharedBackstage.providers.translate(tooltip);\n        return {\n          'title': translatedTooltip,\n          'aria-label': translatedTooltip\n        };\n      });\n      var memDropdown = record(Dropdown.sketch(__assign(__assign(__assign({}, spec.uid ? { uid: spec.uid } : {}), role), {\n        dom: {\n          tag: 'button',\n          classes: [\n            prefix,\n            prefix + '--select'\n          ].concat(map(spec.classes, function (c) {\n            return prefix + '--' + c;\n          })),\n          attributes: __assign({}, tooltipAttributes)\n        },\n        components: componentRenderPipeline([\n          optMemDisplayIcon.map(function (mem) {\n            return mem.asSpec();\n          }),\n          optMemDisplayText.map(function (mem) {\n            return mem.asSpec();\n          }),\n          Optional.some({\n            dom: {\n              tag: 'div',\n              classes: [prefix + '__select-chevron'],\n              innerHtml: get$e('chevron-down', sharedBackstage.providers.icons)\n            }\n          })\n        ]),\n        matchWidth: true,\n        useMinWidth: true,\n        dropdownBehaviours: derive$1(__spreadArrays(spec.dropdownBehaviours, [\n          DisablingConfigs.button(function () {\n            return spec.disabled || sharedBackstage.providers.isDisabled();\n          }),\n          receivingConfig(),\n          Unselecting.config({}),\n          Replacing.config({}),\n          config('dropdown-events', [\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          config('menubutton-update-display-text', [\n            run(updateMenuText, function (comp, se) {\n              optMemDisplayText.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayText) {\n                Replacing.set(displayText, [text(sharedBackstage.providers.translate(se.event.text))]);\n              });\n            }),\n            run(updateMenuIcon, function (comp, se) {\n              optMemDisplayIcon.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayIcon) {\n                Replacing.set(displayIcon, [renderReplacableIconFromPack(se.event.icon, sharedBackstage.providers.icons)]);\n              });\n            })\n          ])\n        ])),\n        eventOrder: deepMerge(toolbarButtonEventOrder, {\n          mousedown: [\n            'focusing',\n            'alloy.base.behaviour',\n            'item-type-events',\n            'normal-dropdown-events'\n          ]\n        }),\n        sandboxBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onLeft: onLeftOrRightInMenu,\n            onRight: onLeftOrRightInMenu\n          })]),\n        lazySink: sharedBackstage.getSink,\n        toggleClass: prefix + '--active',\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        fetch: function (comp) {\n          return Future.nu(curry(spec.fetch, comp));\n        }\n      })));\n      return memDropdown.asSpec();\n    };\n\n    var isMenuItemReference = function (item) {\n      return isString(item);\n    };\n    var isSeparator = function (item) {\n      return item.type === 'separator';\n    };\n    var isExpandingMenuItem = function (item) {\n      return has(item, 'getSubmenuItems');\n    };\n    var separator$1 = { type: 'separator' };\n    var unwrapReferences = function (items, menuItems) {\n      var realItems = foldl(items, function (acc, item) {\n        if (isMenuItemReference(item)) {\n          if (item === '') {\n            return acc;\n          } else if (item === '|') {\n            return acc.length > 0 && !isSeparator(acc[acc.length - 1]) ? acc.concat([separator$1]) : acc;\n          } else if (has(menuItems, item.toLowerCase())) {\n            return acc.concat([menuItems[item.toLowerCase()]]);\n          } else {\n            return acc;\n          }\n        } else {\n          return acc.concat([item]);\n        }\n      }, []);\n      if (realItems.length > 0 && isSeparator(realItems[realItems.length - 1])) {\n        realItems.pop();\n      }\n      return realItems;\n    };\n    var getFromExpandingItem = function (item, menuItems) {\n      var submenuItems = item.getSubmenuItems();\n      var rest = expand(submenuItems, menuItems);\n      var newMenus = deepMerge(rest.menus, wrap$1(item.value, rest.items));\n      var newExpansions = deepMerge(rest.expansions, wrap$1(item.value, item.value));\n      return {\n        item: item,\n        menus: newMenus,\n        expansions: newExpansions\n      };\n    };\n    var getFromItem = function (item, menuItems) {\n      return isExpandingMenuItem(item) ? getFromExpandingItem(item, menuItems) : {\n        item: item,\n        menus: {},\n        expansions: {}\n      };\n    };\n    var generateValueIfRequired = function (item) {\n      if (isSeparator(item)) {\n        return item;\n      } else {\n        var itemValue = get$1(item, 'value').getOrThunk(function () {\n          return generate$1('generated-menu-item');\n        });\n        return deepMerge({ value: itemValue }, item);\n      }\n    };\n    var expand = function (items, menuItems) {\n      var realItems = unwrapReferences(isString(items) ? items.split(' ') : items, menuItems);\n      return foldr(realItems, function (acc, item) {\n        var itemWithValue = generateValueIfRequired(item);\n        var newData = getFromItem(itemWithValue, menuItems);\n        return {\n          menus: deepMerge(acc.menus, newData.menus),\n          items: [newData.item].concat(acc.items),\n          expansions: deepMerge(acc.expansions, newData.expansions)\n        };\n      }, {\n        menus: {},\n        expansions: {},\n        items: []\n      });\n    };\n\n    var build$2 = function (items, itemResponse, backstage, isHorizontalMenu) {\n      var primary = generate$1('primary-menu');\n      var data = expand(items, backstage.shared.providers.menuItems());\n      if (data.items.length === 0) {\n        return Optional.none();\n      }\n      var mainMenu = createPartialMenu(primary, data.items, itemResponse, backstage, isHorizontalMenu);\n      var submenus = map$2(data.menus, function (menuItems, menuName) {\n        return createPartialMenu(menuName, menuItems, itemResponse, backstage, false);\n      });\n      var menus = deepMerge(submenus, wrap$1(primary, mainMenu));\n      return Optional.from(tieredMenu.tieredData(primary, menus, data.expansions));\n    };\n\n    var getMenuButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        },\n        setActive: function (state) {\n          var elm = component.element;\n          if (state) {\n            add$2(elm, 'tox-tbtn--enabled');\n            set$1(elm, 'aria-pressed', true);\n          } else {\n            remove$4(elm, 'tox-tbtn--enabled');\n            remove$1(elm, 'aria-pressed');\n          }\n        },\n        isActive: function () {\n          return has$2(component.element, 'tox-tbtn--enabled');\n        }\n      };\n    };\n    var renderMenuButton = function (spec, prefix, backstage, role) {\n      return renderCommonDropdown({\n        text: spec.text,\n        icon: spec.icon,\n        tooltip: spec.tooltip,\n        role: role,\n        fetch: function (_comp, callback) {\n          spec.fetch(function (items) {\n            callback(build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false));\n          });\n        },\n        onSetup: spec.onSetup,\n        getApi: getMenuButtonApi,\n        columns: 1,\n        presets: 'normal',\n        classes: [],\n        dropdownBehaviours: [Tabstopping.config({})]\n      }, prefix, backstage.shared);\n    };\n    var getFetch$1 = function (items, getButton, backstage) {\n      var getMenuItemAction = function (item) {\n        return function (api) {\n          var newValue = !api.isActive();\n          api.setActive(newValue);\n          item.storage.set(newValue);\n          backstage.shared.getSink().each(function (sink) {\n            getButton().getOpt(sink).each(function (orig) {\n              focus$1(orig.element);\n              emitWith(orig, formActionEvent, {\n                name: item.name,\n                value: item.storage.get()\n              });\n            });\n          });\n        };\n      };\n      var getMenuItemSetup = function (item) {\n        return function (api) {\n          api.setActive(item.storage.get());\n        };\n      };\n      return function (success) {\n        success(map(items, function (item) {\n          var text = item.text.fold(function () {\n            return {};\n          }, function (text) {\n            return { text: text };\n          });\n          return __assign(__assign({\n            type: item.type,\n            active: false\n          }, text), {\n            onAction: getMenuItemAction(item),\n            onSetup: getMenuItemSetup(item)\n          });\n        }));\n      };\n    };\n\n    var renderCommonSpec = function (spec, actionOpt, extraBehaviours, dom, components, providersBackstage) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var action = actionOpt.fold(function () {\n        return {};\n      }, function (action) {\n        return { action: action };\n      });\n      var common = __assign({\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          config('button press', [\n            preventDefault('click'),\n            preventDefault('mousedown')\n          ])\n        ].concat(extraBehaviours)),\n        eventOrder: {\n          click: [\n            'button press',\n            'alloy.base.behaviour'\n          ],\n          mousedown: [\n            'button press',\n            'alloy.base.behaviour'\n          ]\n        }\n      }, action);\n      var domFinal = deepMerge(common, { dom: dom });\n      return deepMerge(domFinal, { components: components });\n    };\n    var renderIconButtonSpec = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var tooltipAttributes = spec.tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n      var dom = {\n        tag: 'button',\n        classes: ['tox-tbtn'],\n        attributes: tooltipAttributes\n      };\n      var icon = spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      });\n      var components = componentRenderPipeline([icon]);\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    var renderIconButton = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var iconButtonSpec = renderIconButtonSpec(spec, Optional.some(action), providersBackstage, extraBehaviours);\n      return Button.sketch(iconButtonSpec);\n    };\n    var renderButtonSpec = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var translatedText = providersBackstage.translate(spec.text);\n      var icon = spec.icon ? spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      }) : Optional.none();\n      var components = icon.isSome() ? componentRenderPipeline([icon]) : [];\n      var innerHtml = icon.isSome() ? {} : { innerHtml: translatedText };\n      var classes = __spreadArrays(!spec.primary && !spec.borderless ? [\n        'tox-button',\n        'tox-button--secondary'\n      ] : ['tox-button'], icon.isSome() ? ['tox-button--icon'] : [], spec.borderless ? ['tox-button--naked'] : [], extraClasses);\n      var dom = __assign(__assign({\n        tag: 'button',\n        classes: classes\n      }, innerHtml), { attributes: { title: translatedText } });\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    var renderButton = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var buttonSpec = renderButtonSpec(spec, Optional.some(action), providersBackstage, extraBehaviours, extraClasses);\n      return Button.sketch(buttonSpec);\n    };\n    var getAction = function (name, buttonType) {\n      return function (comp) {\n        if (buttonType === 'custom') {\n          emitWith(comp, formActionEvent, {\n            name: name,\n            value: {}\n          });\n        } else if (buttonType === 'submit') {\n          emit(comp, formSubmitEvent);\n        } else if (buttonType === 'cancel') {\n          emit(comp, formCancelEvent);\n        } else {\n          console.error('Unknown button type: ', buttonType);\n        }\n      };\n    };\n    var isMenuFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'menu';\n    };\n    var isNormalFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'custom' || buttonType === 'cancel' || buttonType === 'submit';\n    };\n    var renderFooterButton = function (spec, buttonType, backstage) {\n      if (isMenuFooterButtonSpec(spec, buttonType)) {\n        var getButton = function () {\n          return memButton_1;\n        };\n        var menuButtonSpec = spec;\n        var fixedSpec = __assign(__assign({}, spec), {\n          onSetup: function (api) {\n            api.setDisabled(spec.disabled);\n            return noop;\n          },\n          fetch: getFetch$1(menuButtonSpec.items, getButton, backstage)\n        });\n        var memButton_1 = record(renderMenuButton(fixedSpec, 'tox-tbtn', backstage, Optional.none()));\n        return memButton_1.asSpec();\n      } else if (isNormalFooterButtonSpec(spec, buttonType)) {\n        var action = getAction(spec.name, buttonType);\n        var buttonSpec = __assign(__assign({}, spec), { borderless: false });\n        return renderButton(buttonSpec, action, backstage.shared.providers, []);\n      } else {\n        console.error('Unknown footer button type: ', buttonType);\n      }\n    };\n    var renderDialogButton = function (spec, providersBackstage) {\n      var action = getAction(spec.name, 'custom');\n      return renderFormField(Optional.none(), FormField.parts.field(__assign({ factory: Button }, renderButtonSpec(spec, Optional.some(action), providersBackstage, [\n        RepresentingConfigs.memory(''),\n        ComposingConfigs.self()\n      ]))));\n    };\n\n    var schema$i = constant([\n      defaulted$1('field1Name', 'field1'),\n      defaulted$1('field2Name', 'field2'),\n      onStrictHandler('onLockedChange'),\n      markers(['lockClass']),\n      defaulted$1('locked', false),\n      SketchBehaviours.field('coupledFieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var getField = function (comp, detail, partName) {\n      return getPart(comp, detail, partName).bind(Composing.getCurrent);\n    };\n    var coupledPart = function (selfName, otherName) {\n      return required({\n        factory: FormField,\n        name: selfName,\n        overrides: function (detail) {\n          return {\n            fieldBehaviours: derive$1([config('coupled-input-behaviour', [run(input(), function (me) {\n                  getField(me, detail, otherName).each(function (other) {\n                    getPart(me, detail, 'lock').each(function (lock) {\n                      if (Toggling.isOn(lock)) {\n                        detail.onLockedChange(me, other, lock);\n                      }\n                    });\n                  });\n                })])])\n          };\n        }\n      });\n    };\n    var parts$5 = constant([\n      coupledPart('field1', 'field2'),\n      coupledPart('field2', 'field1'),\n      required({\n        factory: Button,\n        schema: [strict$1('dom')],\n        name: 'lock',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                selected: detail.locked,\n                toggleClass: detail.markers.lockClass,\n                aria: { mode: 'pressed' }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var factory$7 = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: SketchBehaviours.augment(detail.coupledFieldBehaviours, [\n          Composing.config({ find: Optional.some }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var _a;\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                return _a = {}, _a[detail.field1Name] = Representing.getValue(parts.field1()), _a[detail.field2Name] = Representing.getValue(parts.field2()), _a;\n              },\n              setValue: function (comp, value) {\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                if (hasNonNullableKey(value, detail.field1Name)) {\n                  Representing.setValue(parts.field1(), value[detail.field1Name]);\n                }\n                if (hasNonNullableKey(value, detail.field2Name)) {\n                  Representing.setValue(parts.field2(), value[detail.field2Name]);\n                }\n              }\n            }\n          })\n        ]),\n        apis: {\n          getField1: function (component) {\n            return getPart(component, detail, 'field1');\n          },\n          getField2: function (component) {\n            return getPart(component, detail, 'field2');\n          },\n          getLock: function (component) {\n            return getPart(component, detail, 'lock');\n          }\n        }\n      };\n    };\n    var FormCoupledInputs = composite$1({\n      name: 'FormCoupledInputs',\n      configFields: schema$i(),\n      partFields: parts$5(),\n      factory: factory$7,\n      apis: {\n        getField1: function (apis, component) {\n          return apis.getField1(component);\n        },\n        getField2: function (apis, component) {\n          return apis.getField2(component);\n        },\n        getLock: function (apis, component) {\n          return apis.getLock(component);\n        }\n      }\n    });\n\n    var formatSize = function (size) {\n      var unitDec = {\n        '': 0,\n        'px': 0,\n        'pt': 1,\n        'mm': 1,\n        'pc': 2,\n        'ex': 2,\n        'em': 2,\n        'ch': 2,\n        'rem': 2,\n        'cm': 3,\n        'in': 4,\n        '%': 4\n      };\n      var maxDecimal = function (unit) {\n        return unit in unitDec ? unitDec[unit] : 1;\n      };\n      var numText = size.value.toFixed(maxDecimal(size.unit));\n      if (numText.indexOf('.') !== -1) {\n        numText = numText.replace(/\\.?0*$/, '');\n      }\n      return numText + size.unit;\n    };\n    var parseSize = function (sizeText) {\n      var numPattern = /^\\s*(\\d+(?:\\.\\d+)?)\\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\\s*$/;\n      var match = numPattern.exec(sizeText);\n      if (match !== null) {\n        var value = parseFloat(match[1]);\n        var unit = match[2];\n        return Result.value({\n          value: value,\n          unit: unit\n        });\n      } else {\n        return Result.error(sizeText);\n      }\n    };\n    var convertUnit = function (size, unit) {\n      var inInch = {\n        '': 96,\n        'px': 96,\n        'pt': 72,\n        'cm': 2.54,\n        'pc': 12,\n        'mm': 25.4,\n        'in': 1\n      };\n      var supported = function (u) {\n        return Object.prototype.hasOwnProperty.call(inInch, u);\n      };\n      if (size.unit === unit) {\n        return Optional.some(size.value);\n      } else if (supported(size.unit) && supported(unit)) {\n        if (inInch[size.unit] === inInch[unit]) {\n          return Optional.some(size.value);\n        } else {\n          return Optional.some(size.value / inInch[size.unit] * inInch[unit]);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    var noSizeConversion = function (_input) {\n      return Optional.none();\n    };\n    var ratioSizeConversion = function (scale, unit) {\n      return function (size) {\n        return convertUnit(size, unit).map(function (value) {\n          return {\n            value: value * scale,\n            unit: unit\n          };\n        });\n      };\n    };\n    var makeRatioConverter = function (currentFieldText, otherFieldText) {\n      var cValue = parseSize(currentFieldText).toOptional();\n      var oValue = parseSize(otherFieldText).toOptional();\n      return lift2(cValue, oValue, function (cSize, oSize) {\n        return convertUnit(cSize, oSize.unit).map(function (val) {\n          return oSize.value / val;\n        }).map(function (r) {\n          return ratioSizeConversion(r, oSize.unit);\n        }).getOr(noSizeConversion);\n      }).getOr(noSizeConversion);\n    };\n\n    var renderSizeInput = function (spec, providersBackstage) {\n      var converter = noSizeConversion;\n      var ratioEvent = generate$1('ratio-event');\n      var pLock = FormCoupledInputs.parts.lock({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-lock',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ],\n          attributes: { title: providersBackstage.translate(spec.label.getOr('Constrain proportions')) }\n        },\n        components: [\n          {\n            dom: {\n              tag: 'span',\n              classes: [\n                'tox-icon',\n                'tox-lock-icon__lock'\n              ],\n              innerHtml: get$e('lock', providersBackstage.icons)\n            }\n          },\n          {\n            dom: {\n              tag: 'span',\n              classes: [\n                'tox-icon',\n                'tox-lock-icon__unlock'\n              ],\n              innerHtml: get$e('unlock', providersBackstage.icons)\n            }\n          }\n        ],\n        buttonBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          }),\n          receivingConfig(),\n          Tabstopping.config({})\n        ])\n      });\n      var formGroup = function (components) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group']\n          },\n          components: components\n        };\n      };\n      var getFieldPart = function (isField1) {\n        return FormField.parts.field({\n          factory: Input,\n          inputClasses: ['tox-textfield'],\n          inputBehaviours: derive$1([\n            Disabling.config({\n              disabled: function () {\n                return spec.disabled || providersBackstage.isDisabled();\n              }\n            }),\n            receivingConfig(),\n            Tabstopping.config({}),\n            config('size-input-events', [\n              run(focusin(), function (component, _simulatedEvent) {\n                emitWith(component, ratioEvent, { isField1: isField1 });\n              }),\n              run(change(), function (component, _simulatedEvent) {\n                emitWith(component, formChangeEvent, { name: spec.name });\n              })\n            ])\n          ]),\n          selectOnFocus: false\n        });\n      };\n      var getLabel = function (label) {\n        return {\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        };\n      };\n      var widthField = FormCoupledInputs.parts.field1(formGroup([\n        FormField.parts.label(getLabel('Width')),\n        getFieldPart(true)\n      ]));\n      var heightField = FormCoupledInputs.parts.field2(formGroup([\n        FormField.parts.label(getLabel('Height')),\n        getFieldPart(false)\n      ]));\n      return FormCoupledInputs.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-form__controls-h-stack']\n            },\n            components: [\n              widthField,\n              heightField,\n              formGroup([\n                getLabel('&nbsp;'),\n                pLock\n              ])\n            ]\n          }],\n        field1Name: 'width',\n        field2Name: 'height',\n        locked: true,\n        markers: { lockClass: 'tox-locked' },\n        onLockedChange: function (current, other, _lock) {\n          parseSize(Representing.getValue(current)).each(function (size) {\n            converter(size).each(function (newSize) {\n              Representing.setValue(other, formatSize(newSize));\n            });\n          });\n        },\n        coupledFieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getLock(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getLock(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('size-input-events2', [run(ratioEvent, function (component, simulatedEvent) {\n              var isField1 = simulatedEvent.event.isField1;\n              var optCurrent = isField1 ? FormCoupledInputs.getField1(component) : FormCoupledInputs.getField2(component);\n              var optOther = isField1 ? FormCoupledInputs.getField2(component) : FormCoupledInputs.getField1(component);\n              var value1 = optCurrent.map(Representing.getValue).getOr('');\n              var value2 = optOther.map(Representing.getValue).getOr('');\n              converter = makeRatioConverter(value1, value2);\n            })])\n        ])\n      });\n    };\n\n    var undo = constant(generate$1('undo'));\n    var redo = constant(generate$1('redo'));\n    var zoom = constant(generate$1('zoom'));\n    var back = constant(generate$1('back'));\n    var apply = constant(generate$1('apply'));\n    var swap = constant(generate$1('swap'));\n    var transform = constant(generate$1('transform'));\n    var tempTransform = constant(generate$1('temp-transform'));\n    var transformApply = constant(generate$1('transform-apply'));\n    var internal = {\n      undo: undo,\n      redo: redo,\n      zoom: zoom,\n      back: back,\n      apply: apply,\n      swap: swap,\n      transform: transform,\n      tempTransform: tempTransform,\n      transformApply: transformApply\n    };\n    var saveState = constant('save-state');\n    var disable$1 = constant('disable');\n    var enable$1 = constant('enable');\n    var external$2 = {\n      formActionEvent: formActionEvent,\n      saveState: saveState,\n      disable: disable$1,\n      enable: enable$1\n    };\n\n    var renderEditPanel = function (imagePanel, providersBackstage) {\n      var createButton = function (text, action, disabled, primary) {\n        return record(renderButton({\n          name: text,\n          text: text,\n          disabled: disabled,\n          primary: primary,\n          icon: Optional.none(),\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var createIconButton = function (icon, tooltip, action, disabled) {\n        return record(renderIconButton({\n          name: icon,\n          icon: Optional.some(icon),\n          tooltip: Optional.some(tooltip),\n          disabled: disabled,\n          primary: false,\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var disableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.disable(component);\n          }\n        });\n      };\n      var enableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.enable(component);\n          }\n        });\n      };\n      var panelDom = {\n        tag: 'div',\n        classes: [\n          'tox-image-tools__toolbar',\n          'tox-image-tools-edit-panel'\n        ]\n      };\n      var noop$1 = noop;\n      var emit$1 = function (comp, event, data) {\n        emitWith(comp, event, data);\n      };\n      var emitDisable = function (component) {\n        return emit(component, external$2.disable());\n      };\n      var emitEnable = function (component) {\n        return emit(component, external$2.enable());\n      };\n      var emitTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var emitTempTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.tempTransform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var getBackSwap = function (anyInSystem) {\n        return function () {\n          memContainer.getOpt(anyInSystem).each(function (container) {\n            Replacing.set(container, [ButtonPanel]);\n          });\n        };\n      };\n      var emitTransformApply = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transformApply(), {\n          transform: transform,\n          swap: getBackSwap(comp)\n        });\n        emitEnable(comp);\n      };\n      var createBackButton = function () {\n        return createButton('Back', function (button) {\n          return emit$1(button, internal.back(), { swap: getBackSwap(button) });\n        }, false, false);\n      };\n      var createSpacer = function () {\n        return record({\n          dom: {\n            tag: 'div',\n            classes: ['tox-spacer']\n          },\n          behaviours: derive$1([Disabling.config({})])\n        });\n      };\n      var createApplyButton = function () {\n        return createButton('Apply', function (button) {\n          return emit$1(button, internal.apply(), { swap: getBackSwap(button) });\n        }, true, true);\n      };\n      var makeCropTransform = function () {\n        return function (ir) {\n          var rect = imagePanel.getRect();\n          return crop$1(ir, rect.x, rect.y, rect.w, rect.h);\n        };\n      };\n      var cropPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createButton('Apply', function (button) {\n          var transform = makeCropTransform();\n          emitTransformApply(button, transform);\n          imagePanel.hideCrop();\n        }, false, true)\n      ];\n      var CropPanel = Container.sketch({\n        dom: panelDom,\n        components: cropPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-crop-buttons-events', [\n            run(external$2.disable(), function (comp, _se) {\n              disableAllComponents(cropPanelComponents, comp);\n            }),\n            run(external$2.enable(), function (comp, _se) {\n              enableAllComponents(cropPanelComponents, comp);\n            })\n          ])])\n      });\n      var memSize = record(renderSizeInput({\n        name: 'size',\n        label: Optional.none(),\n        constrain: true,\n        disabled: false\n      }, providersBackstage));\n      var makeResizeTransform = function (width, height) {\n        return function (ir) {\n          return resize$2(ir, width, height);\n        };\n      };\n      var resizePanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        memSize,\n        createSpacer(),\n        createButton('Apply', function (button) {\n          memSize.getOpt(button).each(function (sizeInput) {\n            var value = Representing.getValue(sizeInput);\n            var width = parseInt(value.width, 10);\n            var height = parseInt(value.height, 10);\n            var transform = makeResizeTransform(width, height);\n            emitTransformApply(button, transform);\n          });\n        }, false, true)\n      ];\n      var ResizePanel = Container.sketch({\n        dom: panelDom,\n        components: resizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-resize-buttons-events', [\n            run(external$2.disable(), function (comp, _se) {\n              disableAllComponents(resizePanelComponents, comp);\n            }),\n            run(external$2.enable(), function (comp, _se) {\n              enableAllComponents(resizePanelComponents, comp);\n            })\n          ])])\n      });\n      var makeValueTransform = function (transform, value) {\n        return function (ir) {\n          return transform(ir, value);\n        };\n      };\n      var horizontalFlip = makeValueTransform(flip$1, 'h');\n      var verticalFlip = makeValueTransform(flip$1, 'v');\n      var counterclockwiseRotate = makeValueTransform(rotate$1, -90);\n      var clockwiseRotate = makeValueTransform(rotate$1, 90);\n      var flipRotateOnAction = function (comp, operation) {\n        emitTempTransform(comp, operation);\n      };\n      var flipRotateComponents = [\n        createBackButton(),\n        createSpacer(),\n        createIconButton('flip-horizontally', 'Flip horizontally', function (button) {\n          flipRotateOnAction(button, horizontalFlip);\n        }, false),\n        createIconButton('flip-vertically', 'Flip vertically', function (button) {\n          flipRotateOnAction(button, verticalFlip);\n        }, false),\n        createIconButton('rotate-left', 'Rotate counterclockwise', function (button) {\n          flipRotateOnAction(button, counterclockwiseRotate);\n        }, false),\n        createIconButton('rotate-right', 'Rotate clockwise', function (button) {\n          flipRotateOnAction(button, clockwiseRotate);\n        }, false),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FlipRotatePanel = Container.sketch({\n        dom: panelDom,\n        components: flipRotateComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-fliprotate-buttons-events', [\n            run(external$2.disable(), function (comp, _se) {\n              disableAllComponents(flipRotateComponents, comp);\n            }),\n            run(external$2.enable(), function (comp, _se) {\n              enableAllComponents(flipRotateComponents, comp);\n            })\n          ])])\n      });\n      var makeSlider = function (label, onChoose, min, value, max) {\n        var labelPart = Slider.parts.label({\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        });\n        var spectrum = Slider.parts.spectrum({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__rail'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        var thumb = Slider.parts.thumb({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__handle'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        return record(Slider.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider'],\n            attributes: { role: 'presentation' }\n          },\n          model: {\n            mode: 'x',\n            minX: min,\n            maxX: max,\n            getInitialValue: constant({ x: value })\n          },\n          components: [\n            labelPart,\n            spectrum,\n            thumb\n          ],\n          sliderBehaviours: derive$1([Focusing.config({})]),\n          onChoose: onChoose\n        }));\n      };\n      var makeVariableSlider = function (label, transform, min, value, max) {\n        var onChoose = function (slider, _thumb, value) {\n          var valTransform = makeValueTransform(transform, value.x / 100);\n          emitTransform(slider, valTransform);\n        };\n        return makeSlider(label, onChoose, min, value, max);\n      };\n      var variableFilterPanelComponents = function (label, transform, min, value, max) {\n        return [\n          createBackButton(),\n          makeVariableSlider(label, transform, min, value, max),\n          createApplyButton()\n        ];\n      };\n      var createVariableFilterPanel = function (label, transform, min, value, max) {\n        var filterPanelComponents = variableFilterPanelComponents(label, transform, min, value, max);\n        return Container.sketch({\n          dom: panelDom,\n          components: filterPanelComponents.map(function (mem) {\n            return mem.asSpec();\n          }),\n          containerBehaviours: derive$1([config('image-tools-filter-panel-buttons-events', [\n              run(external$2.disable(), function (comp, _se) {\n                disableAllComponents(filterPanelComponents, comp);\n              }),\n              run(external$2.enable(), function (comp, _se) {\n                enableAllComponents(filterPanelComponents, comp);\n              })\n            ])])\n        });\n      };\n      var filterPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FilterPanel = Container.sketch({\n        dom: panelDom,\n        components: filterPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var BrightnessPanel = createVariableFilterPanel('Brightness', brightness$1, -100, 0, 100);\n      var ContrastPanel = createVariableFilterPanel('Contrast', contrast$1, -100, 0, 100);\n      var GammaPanel = createVariableFilterPanel('Gamma', gamma$1, -100, 0, 100);\n      var makeColorTransform = function (red, green, blue) {\n        return function (ir) {\n          return colorize$1(ir, red, green, blue);\n        };\n      };\n      var makeColorSlider = function (label) {\n        var onChoose = function (slider, _thumb, _value) {\n          var redOpt = memRed.getOpt(slider);\n          var blueOpt = memBlue.getOpt(slider);\n          var greenOpt = memGreen.getOpt(slider);\n          redOpt.each(function (red) {\n            blueOpt.each(function (blue) {\n              greenOpt.each(function (green) {\n                var r = Representing.getValue(red).x / 100;\n                var g = Representing.getValue(green).x / 100;\n                var b = Representing.getValue(blue).x / 100;\n                var transform = makeColorTransform(r, g, b);\n                emitTransform(slider, transform);\n              });\n            });\n          });\n        };\n        return makeSlider(label, onChoose, 0, 100, 200);\n      };\n      var memRed = makeColorSlider('R');\n      var memGreen = makeColorSlider('G');\n      var memBlue = makeColorSlider('B');\n      var colorizePanelComponents = [\n        createBackButton(),\n        memRed,\n        memGreen,\n        memBlue,\n        createApplyButton()\n      ];\n      var ColorizePanel = Container.sketch({\n        dom: panelDom,\n        components: colorizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var getTransformPanelEvent = function (panel, transform, update) {\n        return function (button) {\n          var swap = function () {\n            memContainer.getOpt(button).each(function (container) {\n              Replacing.set(container, [panel]);\n              update(container);\n            });\n          };\n          emit$1(button, internal.swap(), {\n            transform: transform,\n            swap: swap\n          });\n        };\n      };\n      var cropPanelUpdate = function (_anyInSystem) {\n        imagePanel.showCrop();\n      };\n      var resizePanelUpdate = function (anyInSystem) {\n        memSize.getOpt(anyInSystem).each(function (sizeInput) {\n          var measurements = imagePanel.getMeasurements();\n          var width = measurements.width;\n          var height = measurements.height;\n          Representing.setValue(sizeInput, {\n            width: width,\n            height: height\n          });\n        });\n      };\n      var sharpenTransform = Optional.some(sharpen$1);\n      var invertTransform = Optional.some(invert$1);\n      var buttonPanelComponents = [\n        createIconButton('crop', 'Crop', getTransformPanelEvent(CropPanel, Optional.none(), cropPanelUpdate), false),\n        createIconButton('resize', 'Resize', getTransformPanelEvent(ResizePanel, Optional.none(), resizePanelUpdate), false),\n        createIconButton('orientation', 'Orientation', getTransformPanelEvent(FlipRotatePanel, Optional.none(), noop$1), false),\n        createIconButton('brightness', 'Brightness', getTransformPanelEvent(BrightnessPanel, Optional.none(), noop$1), false),\n        createIconButton('sharpen', 'Sharpen', getTransformPanelEvent(FilterPanel, sharpenTransform, noop$1), false),\n        createIconButton('contrast', 'Contrast', getTransformPanelEvent(ContrastPanel, Optional.none(), noop$1), false),\n        createIconButton('color-levels', 'Color levels', getTransformPanelEvent(ColorizePanel, Optional.none(), noop$1), false),\n        createIconButton('gamma', 'Gamma', getTransformPanelEvent(GammaPanel, Optional.none(), noop$1), false),\n        createIconButton('invert', 'Invert', getTransformPanelEvent(FilterPanel, invertTransform, noop$1), false)\n      ];\n      var ButtonPanel = Container.sketch({\n        dom: panelDom,\n        components: buttonPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var container = Container.sketch({\n        dom: { tag: 'div' },\n        components: [ButtonPanel],\n        containerBehaviours: derive$1([Replacing.config({})])\n      });\n      var memContainer = record(container);\n      var getApplyButton = function (anyInSystem) {\n        return memContainer.getOpt(anyInSystem).map(function (container) {\n          var panel = container.components()[0];\n          return panel.components()[panel.components().length - 1];\n        });\n      };\n      return {\n        memContainer: memContainer,\n        getApplyButton: getApplyButton\n      };\n    };\n\n    var global$d = tinymce.util.Tools.resolve('tinymce.geom.Rect');\n\n    var global$e = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var global$f = tinymce.util.Tools.resolve('tinymce.util.Observable');\n\n    var global$g = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var getDocumentSize = function (doc) {\n      var max = Math.max;\n      var documentElement = doc.documentElement;\n      var body = doc.body;\n      var scrollWidth = max(documentElement.scrollWidth, body.scrollWidth);\n      var clientWidth = max(documentElement.clientWidth, body.clientWidth);\n      var offsetWidth = max(documentElement.offsetWidth, body.offsetWidth);\n      var scrollHeight = max(documentElement.scrollHeight, body.scrollHeight);\n      var clientHeight = max(documentElement.clientHeight, body.clientHeight);\n      var offsetHeight = max(documentElement.offsetHeight, body.offsetHeight);\n      return {\n        width: scrollWidth < offsetWidth ? clientWidth : scrollWidth,\n        height: scrollHeight < offsetHeight ? clientHeight : scrollHeight\n      };\n    };\n    var updateWithTouchData = function (e) {\n      var keys, i;\n      if (e.changedTouches) {\n        keys = 'screenX screenY pageX pageY clientX clientY'.split(' ');\n        for (i = 0; i < keys.length; i++) {\n          e[keys[i]] = e.changedTouches[0][keys[i]];\n        }\n      }\n    };\n    function DragHelper (id, settings) {\n      var $eventOverlay;\n      var doc = settings.document || document;\n      var downButton;\n      var startX, startY;\n      var handleElement = doc.getElementById(settings.handle || id);\n      var start = function (e) {\n        var docSize = getDocumentSize(doc);\n        var cursor;\n        updateWithTouchData(e);\n        e.preventDefault();\n        downButton = e.button;\n        var handleElm = handleElement;\n        startX = e.screenX;\n        startY = e.screenY;\n        if (window.getComputedStyle) {\n          cursor = window.getComputedStyle(handleElm, null).getPropertyValue('cursor');\n        } else {\n          cursor = handleElm.runtimeStyle.cursor;\n        }\n        $eventOverlay = global$e('<div></div>').css({\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: docSize.width,\n          height: docSize.height,\n          zIndex: 2147483647,\n          opacity: 0.0001,\n          cursor: cursor\n        }).appendTo(doc.body);\n        global$e(doc).on('mousemove touchmove', drag).on('mouseup touchend', stop);\n        settings.start(e);\n      };\n      var drag = function (e) {\n        updateWithTouchData(e);\n        if (e.button !== downButton) {\n          return stop(e);\n        }\n        e.deltaX = e.screenX - startX;\n        e.deltaY = e.screenY - startY;\n        e.preventDefault();\n        settings.drag(e);\n      };\n      var stop = function (e) {\n        updateWithTouchData(e);\n        global$e(doc).off('mousemove touchmove', drag).off('mouseup touchend', stop);\n        $eventOverlay.remove();\n        if (settings.stop) {\n          settings.stop(e);\n        }\n      };\n      var destroy = function () {\n        global$e(handleElement).off();\n      };\n      global$e(handleElement).on('mousedown touchstart', start);\n      return { destroy: destroy };\n    }\n\n    var count = 0;\n    var create$7 = function (currentRect, viewPortRect, clampRect, containerElm, action) {\n      var dragHelpers;\n      var prefix = 'tox-';\n      var id = prefix + 'crid-' + count++;\n      var handles = [\n        {\n          name: 'move',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: 0,\n          deltaH: 0,\n          label: 'Crop Mask'\n        },\n        {\n          name: 'nw',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: -1,\n          deltaH: -1,\n          label: 'Top Left Crop Handle'\n        },\n        {\n          name: 'ne',\n          xMul: 1,\n          yMul: 0,\n          deltaX: 0,\n          deltaY: 1,\n          deltaW: 1,\n          deltaH: -1,\n          label: 'Top Right Crop Handle'\n        },\n        {\n          name: 'sw',\n          xMul: 0,\n          yMul: 1,\n          deltaX: 1,\n          deltaY: 0,\n          deltaW: -1,\n          deltaH: 1,\n          label: 'Bottom Left Crop Handle'\n        },\n        {\n          name: 'se',\n          xMul: 1,\n          yMul: 1,\n          deltaX: 0,\n          deltaY: 0,\n          deltaW: 1,\n          deltaH: 1,\n          label: 'Bottom Right Crop Handle'\n        }\n      ];\n      var blockers = [\n        'top',\n        'right',\n        'bottom',\n        'left'\n      ];\n      var getAbsoluteRect = function (outerRect, relativeRect) {\n        return {\n          x: relativeRect.x + outerRect.x,\n          y: relativeRect.y + outerRect.y,\n          w: relativeRect.w,\n          h: relativeRect.h\n        };\n      };\n      var getRelativeRect = function (outerRect, innerRect) {\n        return {\n          x: innerRect.x - outerRect.x,\n          y: innerRect.y - outerRect.y,\n          w: innerRect.w,\n          h: innerRect.h\n        };\n      };\n      var getInnerRect = function () {\n        return getRelativeRect(clampRect, currentRect);\n      };\n      var moveRect = function (handle, startRect, deltaX, deltaY) {\n        var x, y, w, h, rect;\n        x = startRect.x;\n        y = startRect.y;\n        w = startRect.w;\n        h = startRect.h;\n        x += deltaX * handle.deltaX;\n        y += deltaY * handle.deltaY;\n        w += deltaX * handle.deltaW;\n        h += deltaY * handle.deltaH;\n        if (w < 20) {\n          w = 20;\n        }\n        if (h < 20) {\n          h = 20;\n        }\n        rect = currentRect = global$d.clamp({\n          x: x,\n          y: y,\n          w: w,\n          h: h\n        }, clampRect, handle.name === 'move');\n        rect = getRelativeRect(clampRect, rect);\n        instance.fire('updateRect', { rect: rect });\n        setInnerRect(rect);\n      };\n      var render = function () {\n        var createDragHelper = function (handle) {\n          var startRect;\n          return DragHelper(id, {\n            document: containerElm.ownerDocument,\n            handle: id + '-' + handle.name,\n            start: function () {\n              startRect = currentRect;\n            },\n            drag: function (e) {\n              moveRect(handle, startRect, e.deltaX, e.deltaY);\n            }\n          });\n        };\n        global$e('<div id=\"' + id + '\" class=\"' + prefix + 'croprect-container\"' + ' role=\"grid\" aria-dropeffect=\"execute\">').appendTo(containerElm);\n        global$c.each(blockers, function (blocker) {\n          global$e('#' + id, containerElm).append('<div id=\"' + id + '-' + blocker + '\"class=\"' + prefix + 'croprect-block\" style=\"display: none\" data-mce-bogus=\"all\">');\n        });\n        global$c.each(handles, function (handle) {\n          global$e('#' + id, containerElm).append('<div id=\"' + id + '-' + handle.name + '\" class=\"' + prefix + 'croprect-handle ' + prefix + 'croprect-handle-' + handle.name + '\"' + 'style=\"display: none\" data-mce-bogus=\"all\" role=\"gridcell\" tabindex=\"-1\"' + ' aria-label=\"' + handle.label + '\" aria-grabbed=\"false\" title=\"' + handle.label + '\">');\n        });\n        dragHelpers = global$c.map(handles, createDragHelper);\n        repaint(currentRect);\n        global$e(containerElm).on('focusin focusout', function (e) {\n          global$e(e.target).attr('aria-grabbed', e.type === 'focus' ? 'true' : 'false');\n        });\n        global$e(containerElm).on('keydown', function (e) {\n          var activeHandle;\n          global$c.each(handles, function (handle) {\n            if (e.target.id === id + '-' + handle.name) {\n              activeHandle = handle;\n              return false;\n            }\n          });\n          var moveAndBlock = function (evt, handle, startRect, deltaX, deltaY) {\n            evt.stopPropagation();\n            evt.preventDefault();\n            moveRect(activeHandle, startRect, deltaX, deltaY);\n          };\n          switch (e.keyCode) {\n          case global$g.LEFT:\n            moveAndBlock(e, activeHandle, currentRect, -10, 0);\n            break;\n          case global$g.RIGHT:\n            moveAndBlock(e, activeHandle, currentRect, 10, 0);\n            break;\n          case global$g.UP:\n            moveAndBlock(e, activeHandle, currentRect, 0, -10);\n            break;\n          case global$g.DOWN:\n            moveAndBlock(e, activeHandle, currentRect, 0, 10);\n            break;\n          case global$g.ENTER:\n          case global$g.SPACEBAR:\n            e.preventDefault();\n            action();\n            break;\n          }\n        });\n      };\n      var toggleVisibility = function (state) {\n        var selectors = global$c.map(handles, function (handle) {\n          return '#' + id + '-' + handle.name;\n        }).concat(global$c.map(blockers, function (blocker) {\n          return '#' + id + '-' + blocker;\n        })).join(',');\n        if (state) {\n          global$e(selectors, containerElm).show();\n        } else {\n          global$e(selectors, containerElm).hide();\n        }\n      };\n      var repaint = function (rect) {\n        var updateElementRect = function (name, rect) {\n          if (rect.h < 0) {\n            rect.h = 0;\n          }\n          if (rect.w < 0) {\n            rect.w = 0;\n          }\n          global$e('#' + id + '-' + name, containerElm).css({\n            left: rect.x,\n            top: rect.y,\n            width: rect.w,\n            height: rect.h\n          });\n        };\n        global$c.each(handles, function (handle) {\n          global$e('#' + id + '-' + handle.name, containerElm).css({\n            left: rect.w * handle.xMul + rect.x,\n            top: rect.h * handle.yMul + rect.y\n          });\n        });\n        updateElementRect('top', {\n          x: viewPortRect.x,\n          y: viewPortRect.y,\n          w: viewPortRect.w,\n          h: rect.y - viewPortRect.y\n        });\n        updateElementRect('right', {\n          x: rect.x + rect.w,\n          y: rect.y,\n          w: viewPortRect.w - rect.x - rect.w + viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('bottom', {\n          x: viewPortRect.x,\n          y: rect.y + rect.h,\n          w: viewPortRect.w,\n          h: viewPortRect.h - rect.y - rect.h + viewPortRect.y\n        });\n        updateElementRect('left', {\n          x: viewPortRect.x,\n          y: rect.y,\n          w: rect.x - viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('move', rect);\n      };\n      var setRect = function (rect) {\n        currentRect = rect;\n        repaint(currentRect);\n      };\n      var setViewPortRect = function (rect) {\n        viewPortRect = rect;\n        repaint(currentRect);\n      };\n      var setInnerRect = function (rect) {\n        setRect(getAbsoluteRect(clampRect, rect));\n      };\n      var setClampRect = function (rect) {\n        clampRect = rect;\n        repaint(currentRect);\n      };\n      var destroy = function () {\n        global$c.each(dragHelpers, function (helper) {\n          helper.destroy();\n        });\n        dragHelpers = [];\n      };\n      render();\n      var instance = global$c.extend({\n        toggleVisibility: toggleVisibility,\n        setClampRect: setClampRect,\n        setRect: setRect,\n        getInnerRect: getInnerRect,\n        setInnerRect: setInnerRect,\n        setViewPortRect: setViewPortRect,\n        destroy: destroy\n      }, global$f);\n      return instance;\n    };\n    var CropRect = { create: create$7 };\n\n    var loadImage = function (image) {\n      return new global$4(function (resolve) {\n        var loaded = function () {\n          image.removeEventListener('load', loaded);\n          resolve(image);\n        };\n        if (image.complete) {\n          resolve(image);\n        } else {\n          image.addEventListener('load', loaded);\n        }\n      });\n    };\n    var renderImagePanel = function (initialUrl) {\n      var memBg = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image-bg'],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var zoomState = Cell(1);\n      var cropRect = Cell(Optional.none());\n      var rectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var viewRectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var repaintImg = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var zoom = zoomState.get();\n          var panelW = get$8(panel.element);\n          var panelH = get$7(panel.element);\n          var width = img.dom.naturalWidth * zoom;\n          var height = img.dom.naturalHeight * zoom;\n          var left = Math.max(0, panelW / 2 - width / 2);\n          var top = Math.max(0, panelH / 2 - height / 2);\n          var css = {\n            left: left.toString() + 'px',\n            top: top.toString() + 'px',\n            width: width.toString() + 'px',\n            height: height.toString() + 'px',\n            position: 'absolute'\n          };\n          setAll$1(img, css);\n          memBg.getOpt(panel).each(function (bg) {\n            setAll$1(bg.element, css);\n          });\n          cropRect.get().each(function (cRect) {\n            var rect = rectState.get();\n            cRect.setRect({\n              x: rect.x * zoom + left,\n              y: rect.y * zoom + top,\n              w: rect.w * zoom,\n              h: rect.h * zoom\n            });\n            cRect.setClampRect({\n              x: left,\n              y: top,\n              w: width,\n              h: height\n            });\n            cRect.setViewPortRect({\n              x: 0,\n              y: 0,\n              w: panelW,\n              h: panelH\n            });\n          });\n        });\n      };\n      var zoomFit = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var panelW = get$8(panel.element);\n          var panelH = get$7(panel.element);\n          var width = img.dom.naturalWidth;\n          var height = img.dom.naturalHeight;\n          var zoom = Math.min(panelW / width, panelH / height);\n          if (zoom >= 1) {\n            zoomState.set(1);\n          } else {\n            zoomState.set(zoom);\n          }\n        });\n      };\n      var updateSrc = function (anyInSystem, url) {\n        var img = SugarElement.fromTag('img');\n        set$1(img, 'src', url);\n        return loadImage(img.dom).then(function () {\n          return memContainer.getOpt(anyInSystem).map(function (panel) {\n            var aImg = external({ element: img });\n            Replacing.replaceAt(panel, 1, Optional.some(aImg));\n            var lastViewRect = viewRectState.get();\n            var viewRect = {\n              x: 0,\n              y: 0,\n              w: img.dom.naturalWidth,\n              h: img.dom.naturalHeight\n            };\n            viewRectState.set(viewRect);\n            var rect = global$d.inflate(viewRect, -20, -20);\n            rectState.set(rect);\n            if (lastViewRect.w !== viewRect.w || lastViewRect.h !== viewRect.h) {\n              zoomFit(panel, img);\n            }\n            repaintImg(panel, img);\n            return img;\n          });\n        });\n      };\n      var zoom = function (anyInSystem, direction) {\n        var currentZoom = zoomState.get();\n        var newZoom = direction > 0 ? Math.min(2, currentZoom + 0.1) : Math.max(0.1, currentZoom - 0.1);\n        zoomState.set(newZoom);\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var img = panel.components()[1].element;\n          repaintImg(panel, img);\n        });\n      };\n      var showCrop = function () {\n        cropRect.get().each(function (cRect) {\n          cRect.toggleVisibility(true);\n        });\n      };\n      var hideCrop = function () {\n        cropRect.get().each(function (cRect) {\n          cRect.toggleVisibility(false);\n        });\n      };\n      var getRect = function () {\n        return rectState.get();\n      };\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image']\n        },\n        components: [\n          memBg.asSpec(),\n          {\n            dom: {\n              tag: 'img',\n              attributes: { src: initialUrl }\n            }\n          },\n          {\n            dom: { tag: 'div' },\n            behaviours: derive$1([config('image-panel-crop-events', [runOnAttached(function (comp) {\n                  memContainer.getOpt(comp).each(function (container) {\n                    var el = container.element.dom;\n                    var cRect = CropRect.create({\n                      x: 10,\n                      y: 10,\n                      w: 100,\n                      h: 100\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, el, noop);\n                    cRect.toggleVisibility(false);\n                    cRect.on('updateRect', function (e) {\n                      var rect = e.rect;\n                      var zoom = zoomState.get();\n                      var newRect = {\n                        x: Math.round(rect.x / zoom),\n                        y: Math.round(rect.y / zoom),\n                        w: Math.round(rect.w / zoom),\n                        h: Math.round(rect.h / zoom)\n                      };\n                      rectState.set(newRect);\n                    });\n                    cropRect.set(Optional.some(cRect));\n                  });\n                })])])\n          }\n        ],\n        containerBehaviours: derive$1([\n          Replacing.config({}),\n          config('image-panel-events', [runOnAttached(function (comp) {\n              updateSrc(comp, initialUrl);\n            })])\n        ])\n      });\n      var memContainer = record(container);\n      var getMeasurements = function () {\n        var viewRect = viewRectState.get();\n        return {\n          width: viewRect.w,\n          height: viewRect.h\n        };\n      };\n      return {\n        memContainer: memContainer,\n        updateSrc: updateSrc,\n        zoom: zoom,\n        showCrop: showCrop,\n        hideCrop: hideCrop,\n        getRect: getRect,\n        getMeasurements: getMeasurements\n      };\n    };\n\n    var createButton = function (innerHtml, icon, disabled, action, providersBackstage) {\n      return renderIconButton({\n        name: innerHtml,\n        icon: Optional.some(icon),\n        disabled: disabled,\n        tooltip: Optional.some(innerHtml),\n        primary: false,\n        borderless: false\n      }, action, providersBackstage);\n    };\n    var setButtonEnabled = function (button, enabled) {\n      if (enabled) {\n        Disabling.enable(button);\n      } else {\n        Disabling.disable(button);\n      }\n    };\n    var renderSideBar = function (providersBackstage) {\n      var updateButtonUndoStates = function (anyInSystem, undoEnabled, redoEnabled) {\n        memUndo.getOpt(anyInSystem).each(function (undo) {\n          setButtonEnabled(undo, undoEnabled);\n        });\n        memRedo.getOpt(anyInSystem).each(function (redo) {\n          setButtonEnabled(redo, redoEnabled);\n        });\n      };\n      var memUndo = record(createButton('Undo', 'undo', true, function (button) {\n        emitWith(button, internal.undo(), { direction: 1 });\n      }, providersBackstage));\n      var memRedo = record(createButton('Redo', 'redo', true, function (button) {\n        emitWith(button, internal.redo(), { direction: 1 });\n      }, providersBackstage));\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-image-tools__toolbar',\n            'tox-image-tools__sidebar'\n          ]\n        },\n        components: [\n          memUndo.asSpec(),\n          memRedo.asSpec(),\n          createButton('Zoom in', 'zoom-in', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: 1 });\n          }, providersBackstage),\n          createButton('Zoom out', 'zoom-out', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: -1 });\n          }, providersBackstage)\n        ]\n      });\n      return {\n        container: container,\n        updateButtonUndoStates: updateButtonUndoStates\n      };\n    };\n\n    function UndoStack () {\n      var data = [];\n      var index = -1;\n      var add = function (state) {\n        var removed = data.splice(++index);\n        data.push(state);\n        return {\n          state: state,\n          removed: removed\n        };\n      };\n      var undo = function () {\n        if (canUndo()) {\n          return data[--index];\n        }\n      };\n      var redo = function () {\n        if (canRedo()) {\n          return data[++index];\n        }\n      };\n      var canUndo = function () {\n        return index > 0;\n      };\n      var canRedo = function () {\n        return index !== -1 && index < data.length - 1;\n      };\n      return {\n        data: data,\n        add: add,\n        undo: undo,\n        redo: redo,\n        canUndo: canUndo,\n        canRedo: canRedo\n      };\n    }\n\n    var makeState = function (initialState) {\n      var blobState = Cell(initialState);\n      var tempState = Cell(Optional.none());\n      var undoStack = UndoStack();\n      undoStack.add(initialState);\n      var getBlobState = function () {\n        return blobState.get();\n      };\n      var setBlobState = function (state) {\n        blobState.set(state);\n      };\n      var getTempState = function () {\n        return tempState.get().fold(function () {\n          return blobState.get();\n        }, function (temp) {\n          return temp;\n        });\n      };\n      var updateTempState = function (blob) {\n        var newTempState = createState(blob);\n        destroyTempState();\n        tempState.set(Optional.some(newTempState));\n        return newTempState.url;\n      };\n      var createState = function (blob) {\n        return {\n          blob: blob,\n          url: URL.createObjectURL(blob)\n        };\n      };\n      var destroyState = function (state) {\n        URL.revokeObjectURL(state.url);\n      };\n      var destroyStates = function (states) {\n        global$c.each(states, destroyState);\n      };\n      var destroyTempState = function () {\n        tempState.get().each(destroyState);\n        tempState.set(Optional.none());\n      };\n      var addBlobState = function (blob) {\n        var newState = createState(blob);\n        setBlobState(newState);\n        var removed = undoStack.add(newState).removed;\n        destroyStates(removed);\n        return newState.url;\n      };\n      var addTempState = function (blob) {\n        var newState = createState(blob);\n        tempState.set(Optional.some(newState));\n        return newState.url;\n      };\n      var applyTempState = function (postApply) {\n        return tempState.get().fold(noop, function (temp) {\n          addBlobState(temp.blob);\n          postApply();\n        });\n      };\n      var undo = function () {\n        var currentState = undoStack.undo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var redo = function () {\n        var currentState = undoStack.redo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var getHistoryStates = function () {\n        var undoEnabled = undoStack.canUndo();\n        var redoEnabled = undoStack.canRedo();\n        return {\n          undoEnabled: undoEnabled,\n          redoEnabled: redoEnabled\n        };\n      };\n      return {\n        getBlobState: getBlobState,\n        setBlobState: setBlobState,\n        addBlobState: addBlobState,\n        getTempState: getTempState,\n        updateTempState: updateTempState,\n        addTempState: addTempState,\n        applyTempState: applyTempState,\n        destroyTempState: destroyTempState,\n        undo: undo,\n        redo: redo,\n        getHistoryStates: getHistoryStates\n      };\n    };\n\n    var renderImageTools = function (detail, providersBackstage) {\n      var state = makeState(detail.currentState);\n      var zoom = function (anyInSystem, simulatedEvent) {\n        var direction = simulatedEvent.event.direction;\n        imagePanel.zoom(anyInSystem, direction);\n      };\n      var updateButtonUndoStates = function (anyInSystem) {\n        var historyStates = state.getHistoryStates();\n        sideBar.updateButtonUndoStates(anyInSystem, historyStates.undoEnabled, historyStates.redoEnabled);\n        emitWith(anyInSystem, external$2.formActionEvent, {\n          name: external$2.saveState(),\n          value: historyStates.undoEnabled\n        });\n      };\n      var disableUndoRedo = function (anyInSystem) {\n        sideBar.updateButtonUndoStates(anyInSystem, false, false);\n      };\n      var undo = function (anyInSystem, _simulatedEvent) {\n        var url = state.undo();\n        updateSrc(anyInSystem, url).then(function (_oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var redo = function (anyInSystem, _simulatedEvent) {\n        var url = state.redo();\n        updateSrc(anyInSystem, url).then(function (_oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var imageResultToBlob = function (ir) {\n        return ir.toBlob();\n      };\n      var block = function (anyInSystem) {\n        emitWith(anyInSystem, external$2.formActionEvent, {\n          name: external$2.disable(),\n          value: {}\n        });\n      };\n      var unblock = function (anyInSystem) {\n        editPanel.getApplyButton(anyInSystem).each(function (applyButton) {\n          Disabling.enable(applyButton);\n        });\n        emitWith(anyInSystem, external$2.formActionEvent, {\n          name: external$2.enable(),\n          value: {}\n        });\n      };\n      var updateSrc = function (anyInSystem, src) {\n        block(anyInSystem);\n        return imagePanel.updateSrc(anyInSystem, src);\n      };\n      var blobManipulate = function (anyInSystem, blob, filter, action, swap) {\n        block(anyInSystem);\n        return blobToImageResult(blob).then(filter).then(imageResultToBlob).then(action).then(function (url) {\n          return updateSrc(anyInSystem, url).then(function (oImg) {\n            updateButtonUndoStates(anyInSystem);\n            swap();\n            unblock(anyInSystem);\n            return oImg;\n          });\n        }).catch(function (err) {\n          console.log(err);\n          unblock(anyInSystem);\n          return err;\n        });\n      };\n      var manipulate = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          return state.updateTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var tempManipulate = function (anyInSystem, filter) {\n        var blob = state.getTempState().blob;\n        var action = function (blob) {\n          return state.addTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, noop);\n      };\n      var manipulateApply = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          var url = state.addBlobState(blob);\n          destroyTempState(anyInSystem);\n          return url;\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var apply = function (anyInSystem, simulatedEvent) {\n        var postApply = function () {\n          destroyTempState(anyInSystem);\n          var swap = simulatedEvent.event.swap;\n          swap();\n        };\n        state.applyTempState(postApply);\n      };\n      var destroyTempState = function (anyInSystem) {\n        var currentUrl = state.getBlobState().url;\n        state.destroyTempState();\n        updateButtonUndoStates(anyInSystem);\n        return currentUrl;\n      };\n      var cancel = function (anyInSystem) {\n        var currentUrl = destroyTempState(anyInSystem);\n        updateSrc(anyInSystem, currentUrl).then(function (_oImg) {\n          unblock(anyInSystem);\n        });\n      };\n      var back = function (anyInSystem, simulatedEvent) {\n        cancel(anyInSystem);\n        var swap = simulatedEvent.event.swap;\n        swap();\n        imagePanel.hideCrop();\n      };\n      var transform = function (anyInSystem, simulatedEvent) {\n        return manipulate(anyInSystem, simulatedEvent.event.transform, noop);\n      };\n      var tempTransform = function (anyInSystem, simulatedEvent) {\n        return tempManipulate(anyInSystem, simulatedEvent.event.transform);\n      };\n      var transformApply = function (anyInSystem, simulatedEvent) {\n        return manipulateApply(anyInSystem, simulatedEvent.event.transform, simulatedEvent.event.swap);\n      };\n      var imagePanel = renderImagePanel(detail.currentState.url);\n      var sideBar = renderSideBar(providersBackstage);\n      var editPanel = renderEditPanel(imagePanel, providersBackstage);\n      var swap = function (anyInSystem, simulatedEvent) {\n        disableUndoRedo(anyInSystem);\n        var transform = simulatedEvent.event.transform;\n        var swap = simulatedEvent.event.swap;\n        transform.fold(function () {\n          swap();\n        }, function (transform) {\n          manipulate(anyInSystem, transform, swap);\n        });\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' }\n        },\n        components: [\n          editPanel.memContainer.asSpec(),\n          imagePanel.memContainer.asSpec(),\n          sideBar.container\n        ],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return state.getBlobState();\n              }\n            }\n          }),\n          config('image-tools-events', [\n            run(internal.undo(), undo),\n            run(internal.redo(), redo),\n            run(internal.zoom(), zoom),\n            run(internal.back(), back),\n            run(internal.apply(), apply),\n            run(internal.transform(), transform),\n            run(internal.tempTransform(), tempTransform),\n            run(internal.transformApply(), transformApply),\n            run(internal.swap(), swap)\n          ]),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var renderLabel$2 = function (spec, backstageShared) {\n      var label = {\n        dom: {\n          tag: 'label',\n          innerHtml: backstageShared.providers.translate(spec.label),\n          classes: ['tox-label']\n        }\n      };\n      var comps = map(spec.items, backstageShared.interpreter);\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [label].concat(comps),\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Replacing.config({}),\n          RepresentingConfigs.domHtml(Optional.none()),\n          Keying.config({ mode: 'acyclic' })\n        ])\n      };\n    };\n\n    var isSingleListItem = function (item) {\n      return !has(item, 'items');\n    };\n    var dataAttribute = 'data-value';\n    var fetchItems = function (dropdownComp, name, items, selectedValue) {\n      return map(items, function (item) {\n        if (!isSingleListItem(item)) {\n          return {\n            type: 'nestedmenuitem',\n            text: item.text,\n            getSubmenuItems: function () {\n              return fetchItems(dropdownComp, name, item.items, selectedValue);\n            }\n          };\n        } else {\n          return {\n            type: 'togglemenuitem',\n            text: item.text,\n            value: item.value,\n            active: item.value === selectedValue,\n            onAction: function () {\n              Representing.setValue(dropdownComp, item.value);\n              emitWith(dropdownComp, formChangeEvent, { name: name });\n              Focusing.focus(dropdownComp);\n            }\n          };\n        }\n      });\n    };\n    var findItemByValue = function (items, value) {\n      return findMap(items, function (item) {\n        if (!isSingleListItem(item)) {\n          return findItemByValue(item.items, value);\n        } else {\n          return someIf(item.value === value, item);\n        }\n      });\n    };\n    var renderListBox = function (spec, backstage) {\n      var providersBackstage = backstage.shared.providers;\n      var initialItem = head(spec.items).filter(isSingleListItem);\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({\n        dom: {},\n        factory: {\n          sketch: function (sketchSpec) {\n            return renderCommonDropdown({\n              uid: sketchSpec.uid,\n              text: initialItem.map(function (item) {\n                return item.text;\n              }),\n              icon: Optional.none(),\n              tooltip: spec.label,\n              role: Optional.none(),\n              fetch: function (comp, callback) {\n                var items = fetchItems(comp, spec.name, spec.items, Representing.getValue(comp));\n                callback(build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false));\n              },\n              onSetup: constant(noop),\n              getApi: constant({}),\n              columns: 1,\n              presets: 'normal',\n              classes: [],\n              dropdownBehaviours: [\n                Tabstopping.config({}),\n                Representing.config({\n                  store: {\n                    mode: 'manual',\n                    initialValue: initialItem.map(function (item) {\n                      return item.value;\n                    }).getOr(''),\n                    getValue: function (comp) {\n                      return get$3(comp.element, dataAttribute);\n                    },\n                    setValue: function (comp, data) {\n                      findItemByValue(spec.items, data).each(function (item) {\n                        set$1(comp.element, dataAttribute, item.value);\n                        emitWith(comp, updateMenuText, { text: item.text });\n                      });\n                    }\n                  }\n                })\n              ]\n            }, 'tox-listbox', backstage.shared);\n          }\n        }\n      });\n      var listBoxWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-listboxfield']\n        },\n        components: [pField]\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [listBoxWrap]\n        ]),\n        fieldBehaviours: derive$1([Disabling.config({\n            disabled: constant(spec.disabled),\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          })])\n      });\n    };\n\n    var renderPanel = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: spec.classes\n        },\n        components: map(spec.items, backstage.shared.interpreter)\n      };\n    };\n\n    var factory$8 = function (detail, _spec) {\n      var options = map(detail.options, function (option) {\n        return {\n          dom: {\n            tag: 'option',\n            value: option.value,\n            innerHtml: option.text\n          }\n        };\n      });\n      var initialValues = detail.data.map(function (v) {\n        return wrap$1('initialValue', v);\n      }).getOr({});\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'select',\n          classes: detail.selectClasses,\n          attributes: detail.selectAttributes\n        },\n        components: options,\n        behaviours: augment(detail.selectBehaviours, [\n          Focusing.config({}),\n          Representing.config({\n            store: __assign({\n              mode: 'manual',\n              getValue: function (select) {\n                return get$6(select.element);\n              },\n              setValue: function (select, newValue) {\n                var found = find(detail.options, function (opt) {\n                  return opt.value === newValue;\n                });\n                if (found.isSome()) {\n                  set$3(select.element, newValue);\n                }\n              }\n            }, initialValues)\n          })\n        ])\n      };\n    };\n    var HtmlSelect = single$2({\n      name: 'HtmlSelect',\n      configFields: [\n        strict$1('options'),\n        field$1('selectBehaviours', [\n          Focusing,\n          Representing\n        ]),\n        defaulted$1('selectClasses', []),\n        defaulted$1('selectAttributes', {}),\n        option('data')\n      ],\n      factory: factory$8\n    });\n\n    var renderSelectBox = function (spec, providersBackstage) {\n      var translatedOptions = map(spec.items, function (item) {\n        return {\n          text: providersBackstage.translate(item.text),\n          value: item.value\n        };\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({\n        dom: {},\n        selectAttributes: { size: spec.size },\n        options: translatedOptions,\n        factory: HtmlSelect,\n        selectBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          }),\n          Tabstopping.config({}),\n          config('selectbox-change', [run(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var chevron = spec.size > 1 ? Optional.none() : Optional.some({\n        dom: {\n          tag: 'div',\n          classes: ['tox-selectfield__icon-js'],\n          innerHtml: get$e('chevron-down', providersBackstage.icons)\n        }\n      });\n      var selectWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-selectfield']\n        },\n        components: flatten([\n          [pField],\n          chevron.toArray()\n        ])\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [selectWrap]\n        ]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    var renderTable = function (spec, providersBackstage) {\n      var renderTh = function (text) {\n        return {\n          dom: {\n            tag: 'th',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderHeader = function (header) {\n        return {\n          dom: { tag: 'thead' },\n          components: [{\n              dom: { tag: 'tr' },\n              components: map(header, renderTh)\n            }]\n        };\n      };\n      var renderTd = function (text) {\n        return {\n          dom: {\n            tag: 'td',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderTr = function (row) {\n        return {\n          dom: { tag: 'tr' },\n          components: map(row, renderTd)\n        };\n      };\n      var renderRows = function (rows) {\n        return {\n          dom: { tag: 'tbody' },\n          components: map(rows, renderTr)\n        };\n      };\n      return {\n        dom: {\n          tag: 'table',\n          classes: ['tox-dialog__table']\n        },\n        components: [\n          renderHeader(spec.header),\n          renderRows(spec.cells)\n        ],\n        behaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n\n    var renderTextField = function (spec, providersBackstage) {\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var baseInputBehaviours = [\n        Disabling.config({\n          disabled: function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }\n        }),\n        receivingConfig(),\n        Keying.config({\n          mode: 'execution',\n          useEnter: spec.multiline !== true,\n          useControlEnter: spec.multiline === true,\n          execute: function (comp) {\n            emit(comp, formSubmitEvent);\n            return Optional.some(true);\n          }\n        }),\n        config('textfield-change', [\n          run(input(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          }),\n          run(postPaste(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          })\n        ]),\n        Tabstopping.config({})\n      ];\n      var validatingBehaviours = spec.validation.map(function (vl) {\n        return Invalidating.config({\n          getRoot: function (input) {\n            return parent(input.element);\n          },\n          invalidClass: 'tox-invalid',\n          validator: {\n            validate: function (input) {\n              var v = Representing.getValue(input);\n              var result = vl.validator(v);\n              return Future.pure(result === true ? Result.value(v) : Result.error(result));\n            },\n            validateOnLoad: vl.validateOnLoad\n          }\n        });\n      }).toArray();\n      var placeholder = spec.placeholder.fold(constant({}), function (p) {\n        return { placeholder: providersBackstage.translate(p) };\n      });\n      var inputMode = spec.inputMode.fold(constant({}), function (mode) {\n        return { inputmode: mode };\n      });\n      var inputAttributes = __assign(__assign({}, placeholder), inputMode);\n      var pField = FormField.parts.field({\n        tag: spec.multiline === true ? 'textarea' : 'input',\n        inputAttributes: inputAttributes,\n        inputClasses: [spec.classname],\n        inputBehaviours: derive$1(flatten([\n          baseInputBehaviours,\n          validatingBehaviours\n        ])),\n        selectOnFocus: false,\n        factory: Input\n      });\n      var extraClasses = spec.flex ? ['tox-form__group--stretched'] : [];\n      var extraClasses2 = extraClasses.concat(spec.maximized ? ['tox-form-group--maximize'] : []);\n      var extraBehaviours = [\n        Disabling.config({\n          disabled: function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          },\n          onDisabled: function (comp) {\n            FormField.getField(comp).each(Disabling.disable);\n          },\n          onEnabled: function (comp) {\n            FormField.getField(comp).each(Disabling.enable);\n          }\n        }),\n        receivingConfig()\n      ];\n      return renderFormFieldWith(pLabel, pField, extraClasses2, extraBehaviours);\n    };\n    var renderInput = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: false,\n        label: spec.label,\n        inputMode: spec.inputMode,\n        placeholder: spec.placeholder,\n        flex: false,\n        disabled: spec.disabled,\n        classname: 'tox-textfield',\n        validation: Optional.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n    var renderTextarea = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: true,\n        label: spec.label,\n        inputMode: Optional.none(),\n        placeholder: spec.placeholder,\n        flex: true,\n        disabled: spec.disabled,\n        classname: 'tox-textarea',\n        validation: Optional.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n\n    var events$c = function (streamConfig, streamState) {\n      var streams = streamConfig.stream.streams;\n      var processor = streams.setup(streamConfig, streamState);\n      return derive([\n        run(streamConfig.event, processor),\n        runOnDetached(function () {\n          return streamState.cancel();\n        })\n      ].concat(streamConfig.cancelEvent.map(function (e) {\n        return [run(e, function () {\n            return streamState.cancel();\n          })];\n      }).getOr([])));\n    };\n\n    var ActiveStreaming = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$c\n    });\n\n    var throttle = function (_config) {\n      var state = Cell(null);\n      var readState = function () {\n        return { timer: state.get() !== null ? 'set' : 'unset' };\n      };\n      var setTimer = function (t) {\n        state.set(t);\n      };\n      var cancel = function () {\n        var t = state.get();\n        if (t !== null) {\n          t.cancel();\n        }\n      };\n      return nu$5({\n        readState: readState,\n        setTimer: setTimer,\n        cancel: cancel\n      });\n    };\n    var init$6 = function (spec) {\n      return spec.stream.streams.state(spec);\n    };\n\n    var StreamingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        throttle: throttle,\n        init: init$6\n    });\n\n    var setup$2 = function (streamInfo, streamState) {\n      var sInfo = streamInfo.stream;\n      var throttler = last$2(streamInfo.onStream, sInfo.delay);\n      streamState.setTimer(throttler);\n      return function (component, simulatedEvent) {\n        throttler.throttle(component, simulatedEvent);\n        if (sInfo.stopEvent) {\n          simulatedEvent.stop();\n        }\n      };\n    };\n    var StreamingSchema = [\n      strictOf('stream', choose$1('mode', {\n        throttle: [\n          strict$1('delay'),\n          defaulted$1('stopEvent', true),\n          output('streams', {\n            setup: setup$2,\n            state: throttle\n          })\n        ]\n      })),\n      defaulted$1('event', 'input'),\n      option('cancelEvent'),\n      onStrictHandler('onStream')\n    ];\n\n    var Streaming = create$1({\n      fields: StreamingSchema,\n      name: 'streaming',\n      active: ActiveStreaming,\n      state: StreamingState\n    });\n\n    var setValueFromItem = function (model, input, item) {\n      var itemData = Representing.getValue(item);\n      Representing.setValue(input, itemData);\n      setCursorAtEnd(input);\n    };\n    var setSelectionOn = function (input, f) {\n      var el = input.element;\n      var value = get$6(el);\n      var node = el.dom;\n      if (get$3(el, 'type') !== 'number') {\n        f(node, value);\n      }\n    };\n    var setCursorAtEnd = function (input) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(value.length, value.length);\n      });\n    };\n    var setSelectionToEnd = function (input, startOffset) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(startOffset, value.length);\n      });\n    };\n    var attemptSelectOver = function (model, input, item) {\n      if (!model.selectsOver) {\n        return Optional.none();\n      } else {\n        var currentValue = Representing.getValue(input);\n        var inputDisplay_1 = model.getDisplayText(currentValue);\n        var itemValue = Representing.getValue(item);\n        var itemDisplay = model.getDisplayText(itemValue);\n        return itemDisplay.indexOf(inputDisplay_1) === 0 ? Optional.some(function () {\n          setValueFromItem(model, input, item);\n          setSelectionToEnd(input, inputDisplay_1.length);\n        }) : Optional.none();\n      }\n    };\n\n    var itemExecute = constant('alloy.typeahead.itemexecute');\n\n    var make$5 = function (detail, components, spec, externals) {\n      var navigateList = function (comp, simulatedEvent, highlighter) {\n        detail.previewing.set(false);\n        var sandbox = Coupling.getCoupled(comp, 'sandbox');\n        if (Sandboxing.isOpen(sandbox)) {\n          Composing.getCurrent(sandbox).each(function (menu) {\n            Highlighting.getHighlighted(menu).fold(function () {\n              highlighter(menu);\n            }, function () {\n              dispatchEvent(sandbox, menu.element, 'keydown', simulatedEvent);\n            });\n          });\n        } else {\n          var onOpenSync = function (sandbox) {\n            Composing.getCurrent(sandbox).each(highlighter);\n          };\n          open$1(detail, mapFetch(comp), comp, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n        }\n      };\n      var focusBehaviours$1 = focusBehaviours(detail);\n      var mapFetch = function (comp) {\n        return function (tdata) {\n          return tdata.map(function (data) {\n            var menus = values(data.menus);\n            var items = bind(menus, function (menu) {\n              return filter(menu.items, function (item) {\n                return item.type === 'item';\n              });\n            });\n            var repState = Representing.getState(comp);\n            repState.update(map(items, function (item) {\n              return item.data;\n            }));\n            return data;\n          });\n        };\n      };\n      var behaviours = [\n        Focusing.config({}),\n        Representing.config({\n          onSetValue: detail.onSetValue,\n          store: __assign({\n            mode: 'dataset',\n            getDataKey: function (comp) {\n              return get$6(comp.element);\n            },\n            getFallbackEntry: function (itemString) {\n              return {\n                value: itemString,\n                meta: {}\n              };\n            },\n            setValue: function (comp, data) {\n              set$3(comp.element, detail.model.getDisplayText(data));\n            }\n          }, detail.initialData.map(function (d) {\n            return wrap$1('initialValue', d);\n          }).getOr({}))\n        }),\n        Streaming.config({\n          stream: {\n            mode: 'throttle',\n            delay: detail.responseTime,\n            stopEvent: false\n          },\n          onStream: function (component, _simulatedEvent) {\n            var sandbox = Coupling.getCoupled(component, 'sandbox');\n            var focusInInput = Focusing.isFocused(component);\n            if (focusInInput) {\n              if (get$6(component.element).length >= detail.minChars) {\n                var previousValue_1 = Composing.getCurrent(sandbox).bind(function (menu) {\n                  return Highlighting.getHighlighted(menu).map(Representing.getValue);\n                });\n                detail.previewing.set(true);\n                var onOpenSync = function (_sandbox) {\n                  Composing.getCurrent(sandbox).each(function (menu) {\n                    previousValue_1.fold(function () {\n                      if (detail.model.selectsOver) {\n                        Highlighting.highlightFirst(menu);\n                      }\n                    }, function (pv) {\n                      Highlighting.highlightBy(menu, function (item) {\n                        var itemData = Representing.getValue(item);\n                        return itemData.value === pv.value;\n                      });\n                      Highlighting.getHighlighted(menu).orThunk(function () {\n                        Highlighting.highlightFirst(menu);\n                        return Optional.none();\n                      });\n                    });\n                  });\n                };\n                open$1(detail, mapFetch(component), component, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n              }\n            }\n          },\n          cancelEvent: typeaheadCancel()\n        }),\n        Keying.config({\n          mode: 'special',\n          onDown: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightFirst);\n            return Optional.some(true);\n          },\n          onEscape: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            if (Sandboxing.isOpen(sandbox)) {\n              Sandboxing.close(sandbox);\n              return Optional.some(true);\n            }\n            return Optional.none();\n          },\n          onUp: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightLast);\n            return Optional.some(true);\n          },\n          onEnter: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            var sandboxIsOpen = Sandboxing.isOpen(sandbox);\n            if (sandboxIsOpen && !detail.previewing.get()) {\n              return Composing.getCurrent(sandbox).bind(function (menu) {\n                return Highlighting.getHighlighted(menu);\n              }).map(function (item) {\n                emitWith(comp, itemExecute(), { item: item });\n                return true;\n              });\n            } else {\n              var currentValue = Representing.getValue(comp);\n              emit(comp, typeaheadCancel());\n              detail.onExecute(sandbox, comp, currentValue);\n              if (sandboxIsOpen) {\n                Sandboxing.close(sandbox);\n              }\n              return Optional.some(true);\n            }\n          }\n        }),\n        Toggling.config({\n          toggleClass: detail.markers.openClass,\n          aria: { mode: 'expanded' }\n        }),\n        Coupling.config({\n          others: {\n            sandbox: function (hotspot) {\n              return makeSandbox(detail, hotspot, {\n                onOpen: function () {\n                  return Toggling.on(hotspot);\n                },\n                onClose: function () {\n                  return Toggling.off(hotspot);\n                }\n              });\n            }\n          }\n        }),\n        config('typeaheadevents', [\n          runOnExecute(function (comp) {\n            var onOpenSync = noop;\n            togglePopup(detail, mapFetch(comp), comp, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n          }),\n          run(itemExecute(), function (comp, se) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            setValueFromItem(detail.model, comp, se.event.item);\n            emit(comp, typeaheadCancel());\n            detail.onItemExecute(comp, sandbox, se.event.item, Representing.getValue(comp));\n            Sandboxing.close(sandbox);\n            setCursorAtEnd(comp);\n          })\n        ].concat(detail.dismissOnBlur ? [run(postBlur(), function (typeahead) {\n            var sandbox = Coupling.getCoupled(typeahead, 'sandbox');\n            if (search(sandbox.element).isNone()) {\n              Sandboxing.close(sandbox);\n            }\n          })] : []))\n      ];\n      return {\n        uid: detail.uid,\n        dom: dom$2(deepMerge(detail, {\n          inputAttributes: {\n            'role': 'combobox',\n            'aria-autocomplete': 'list',\n            'aria-haspopup': 'true'\n          }\n        })),\n        behaviours: __assign(__assign({}, focusBehaviours$1), augment(detail.typeaheadBehaviours, behaviours)),\n        eventOrder: detail.eventOrder\n      };\n    };\n\n    var schema$j = constant([\n      option('lazySink'),\n      strict$1('fetch'),\n      defaulted$1('minChars', 5),\n      defaulted$1('responseTime', 1000),\n      onHandler('onOpen'),\n      defaulted$1('getHotspot', Optional.some),\n      defaulted$1('getAnchorOverrides', constant({})),\n      defaulted$1('layouts', Optional.none()),\n      defaulted$1('eventOrder', {}),\n      defaultedObjOf('model', {}, [\n        defaulted$1('getDisplayText', function (itemData) {\n          return itemData.meta !== undefined && itemData.meta.text !== undefined ? itemData.meta.text : itemData.value;\n        }),\n        defaulted$1('selectsOver', true),\n        defaulted$1('populateFromBrowse', true)\n      ]),\n      onHandler('onSetValue'),\n      onKeyboardHandler('onExecute'),\n      onHandler('onItemExecute'),\n      defaulted$1('inputClasses', []),\n      defaulted$1('inputAttributes', {}),\n      defaulted$1('inputStyles', {}),\n      defaulted$1('matchWidth', true),\n      defaulted$1('useMinWidth', false),\n      defaulted$1('dismissOnBlur', true),\n      markers(['openClass']),\n      option('initialData'),\n      field$1('typeaheadBehaviours', [\n        Focusing,\n        Representing,\n        Streaming,\n        Keying,\n        Toggling,\n        Coupling\n      ]),\n      state$1('previewing', function () {\n        return Cell(true);\n      })\n    ].concat(schema$f()).concat(sandboxFields()));\n    var parts$6 = constant([external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        overrides: function (detail) {\n          return {\n            fakeFocus: true,\n            onHighlight: function (menu, item) {\n              if (!detail.previewing.get()) {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  if (detail.model.populateFromBrowse) {\n                    setValueFromItem(detail.model, input, item);\n                  }\n                });\n              } else {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  attemptSelectOver(detail.model, input, item).fold(function () {\n                    return Highlighting.dehighlight(menu, item);\n                  }, function (fn) {\n                    return fn();\n                  });\n                });\n              }\n              detail.previewing.set(false);\n            },\n            onExecute: function (menu, item) {\n              return menu.getSystem().getByUid(detail.uid).toOptional().map(function (typeahead) {\n                emitWith(typeahead, itemExecute(), { item: item });\n                return true;\n              });\n            },\n            onHover: function (menu, item) {\n              detail.previewing.set(false);\n              menu.getSystem().getByUid(detail.uid).each(function (input) {\n                if (detail.model.populateFromBrowse) {\n                  setValueFromItem(detail.model, input, item);\n                }\n              });\n            }\n          };\n        }\n      })]);\n\n    var Typeahead = composite$1({\n      name: 'Typeahead',\n      configFields: schema$j(),\n      partFields: parts$6(),\n      factory: make$5\n    });\n\n    var wrap$2 = function (delegate) {\n      var toCached = function () {\n        return wrap$2(delegate.toCached());\n      };\n      var bindFuture = function (f) {\n        return wrap$2(delegate.bind(function (resA) {\n          return resA.fold(function (err) {\n            return Future.pure(Result.error(err));\n          }, function (a) {\n            return f(a);\n          });\n        }));\n      };\n      var bindResult = function (f) {\n        return wrap$2(delegate.map(function (resA) {\n          return resA.bind(f);\n        }));\n      };\n      var mapResult = function (f) {\n        return wrap$2(delegate.map(function (resA) {\n          return resA.map(f);\n        }));\n      };\n      var mapError = function (f) {\n        return wrap$2(delegate.map(function (resA) {\n          return resA.mapError(f);\n        }));\n      };\n      var foldResult = function (whenError, whenValue) {\n        return delegate.map(function (res) {\n          return res.fold(whenError, whenValue);\n        });\n      };\n      var withTimeout = function (timeout, errorThunk) {\n        return wrap$2(Future.nu(function (callback) {\n          var timedOut = false;\n          var timer = setTimeout(function () {\n            timedOut = true;\n            callback(Result.error(errorThunk()));\n          }, timeout);\n          delegate.get(function (result) {\n            if (!timedOut) {\n              clearTimeout(timer);\n              callback(result);\n            }\n          });\n        }));\n      };\n      return __assign(__assign({}, delegate), {\n        toCached: toCached,\n        bindFuture: bindFuture,\n        bindResult: bindResult,\n        mapResult: mapResult,\n        mapError: mapError,\n        foldResult: foldResult,\n        withTimeout: withTimeout\n      });\n    };\n    var nu$c = function (worker) {\n      return wrap$2(Future.nu(worker));\n    };\n    var value$2 = function (value) {\n      return wrap$2(Future.pure(Result.value(value)));\n    };\n    var error$1 = function (error) {\n      return wrap$2(Future.pure(Result.error(error)));\n    };\n    var fromResult$1 = function (result) {\n      return wrap$2(Future.pure(result));\n    };\n    var fromFuture = function (future) {\n      return wrap$2(future.map(Result.value));\n    };\n    var fromPromise = function (promise) {\n      return nu$c(function (completer) {\n        promise.then(function (value) {\n          completer(Result.value(value));\n        }, function (error) {\n          completer(Result.error(error));\n        });\n      });\n    };\n    var FutureResult = {\n      nu: nu$c,\n      wrap: wrap$2,\n      pure: value$2,\n      value: value$2,\n      error: error$1,\n      fromResult: fromResult$1,\n      fromFuture: fromFuture,\n      fromPromise: fromPromise\n    };\n\n    var separator$2 = { type: 'separator' };\n    var toMenuItem = function (target) {\n      return {\n        type: 'menuitem',\n        value: target.url,\n        text: target.title,\n        meta: { attach: target.attach },\n        onAction: noop\n      };\n    };\n    var staticMenuItem = function (title, url) {\n      return {\n        type: 'menuitem',\n        value: url,\n        text: title,\n        meta: { attach: undefined },\n        onAction: noop\n      };\n    };\n    var toMenuItems = function (targets) {\n      return map(targets, toMenuItem);\n    };\n    var filterLinkTargets = function (type, targets) {\n      return filter(targets, function (target) {\n        return target.type === type;\n      });\n    };\n    var filteredTargets = function (type, targets) {\n      return toMenuItems(filterLinkTargets(type, targets));\n    };\n    var headerTargets = function (linkInfo) {\n      return filteredTargets('header', linkInfo.targets);\n    };\n    var anchorTargets = function (linkInfo) {\n      return filteredTargets('anchor', linkInfo.targets);\n    };\n    var anchorTargetTop = function (linkInfo) {\n      return Optional.from(linkInfo.anchorTop).map(function (url) {\n        return staticMenuItem('<top>', url);\n      }).toArray();\n    };\n    var anchorTargetBottom = function (linkInfo) {\n      return Optional.from(linkInfo.anchorBottom).map(function (url) {\n        return staticMenuItem('<bottom>', url);\n      }).toArray();\n    };\n    var historyTargets = function (history) {\n      return map(history, function (url) {\n        return staticMenuItem(url, url);\n      });\n    };\n    var joinMenuLists = function (items) {\n      return foldl(items, function (a, b) {\n        var bothEmpty = a.length === 0 || b.length === 0;\n        return bothEmpty ? a.concat(b) : a.concat(separator$2, b);\n      }, []);\n    };\n    var filterByQuery = function (term, menuItems) {\n      var lowerCaseTerm = term.toLowerCase();\n      return filter(menuItems, function (item) {\n        var text = item.meta !== undefined && item.meta.text !== undefined ? item.meta.text : item.text;\n        return contains$1(text.toLowerCase(), lowerCaseTerm) || contains$1(item.value.toLowerCase(), lowerCaseTerm);\n      });\n    };\n\n    var getItems = function (fileType, input, urlBackstage) {\n      var urlInputValue = Representing.getValue(input);\n      var term = urlInputValue.meta.text !== undefined ? urlInputValue.meta.text : urlInputValue.value;\n      var info = urlBackstage.getLinkInformation();\n      return info.fold(function () {\n        return [];\n      }, function (linkInfo) {\n        var history = filterByQuery(term, historyTargets(urlBackstage.getHistory(fileType)));\n        return fileType === 'file' ? joinMenuLists([\n          history,\n          filterByQuery(term, headerTargets(linkInfo)),\n          filterByQuery(term, flatten([\n            anchorTargetTop(linkInfo),\n            anchorTargets(linkInfo),\n            anchorTargetBottom(linkInfo)\n          ]))\n        ]) : history;\n      });\n    };\n    var errorId = generate$1('aria-invalid');\n    var renderUrlInput = function (spec, backstage, urlBackstage) {\n      var _a;\n      var providersBackstage = backstage.shared.providers;\n      var updateHistory = function (component) {\n        var urlEntry = Representing.getValue(component);\n        urlBackstage.addToHistory(urlEntry.value, spec.filetype);\n      };\n      var pField = FormField.parts.field({\n        factory: Typeahead,\n        dismissOnBlur: true,\n        inputClasses: ['tox-textfield'],\n        sandboxClasses: ['tox-dialog__popups'],\n        inputAttributes: {\n          'aria-errormessage': errorId,\n          'type': 'url'\n        },\n        minChars: 0,\n        responseTime: 0,\n        fetch: function (input) {\n          var items = getItems(spec.filetype, input, urlBackstage);\n          var tdata = build$2(items, ItemResponse$1.BUBBLE_TO_SANDBOX, backstage, false);\n          return Future.pure(tdata);\n        },\n        getHotspot: function (comp) {\n          return memUrlBox.getOpt(comp);\n        },\n        onSetValue: function (comp, _newValue) {\n          if (comp.hasConfigured(Invalidating)) {\n            Invalidating.run(comp).get(noop);\n          }\n        },\n        typeaheadBehaviours: derive$1(flatten([\n          urlBackstage.getValidationHandler().map(function (handler) {\n            return Invalidating.config({\n              getRoot: function (comp) {\n                return parent(comp.element);\n              },\n              invalidClass: 'tox-control-wrap--status-invalid',\n              notify: {\n                onInvalid: function (comp, err) {\n                  memInvalidIcon.getOpt(comp).each(function (invalidComp) {\n                    set$1(invalidComp.element, 'title', providersBackstage.translate(err));\n                  });\n                }\n              },\n              validator: {\n                validate: function (input) {\n                  var urlEntry = Representing.getValue(input);\n                  return FutureResult.nu(function (completer) {\n                    handler({\n                      type: spec.filetype,\n                      url: urlEntry.value\n                    }, function (validation) {\n                      if (validation.status === 'invalid') {\n                        var err = Result.error(validation.message);\n                        completer(err);\n                      } else {\n                        var val = Result.value(validation.message);\n                        completer(val);\n                      }\n                    });\n                  });\n                },\n                validateOnLoad: false\n              }\n            });\n          }).toArray(),\n          [\n            Disabling.config({\n              disabled: function () {\n                return spec.disabled || providersBackstage.isDisabled();\n              }\n            }),\n            Tabstopping.config({}),\n            config('urlinput-events', flatten([\n              spec.filetype === 'file' ? [run(input(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                })] : [],\n              [\n                run(change(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                }),\n                run(postPaste(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                })\n              ]\n            ]))\n          ]\n        ])),\n        eventOrder: (_a = {}, _a[input()] = [\n          'streaming',\n          'urlinput-events',\n          'invalidating'\n        ], _a),\n        model: {\n          getDisplayText: function (itemData) {\n            return itemData.value;\n          },\n          selectsOver: false,\n          populateFromBrowse: false\n        },\n        markers: { openClass: 'tox-textfield--popup-open' },\n        lazySink: backstage.shared.getSink,\n        parts: { menu: part(false, 1, 'normal') },\n        onExecute: function (_menu, component, _entry) {\n          emitWith(component, formSubmitEvent, {});\n        },\n        onItemExecute: function (typeahead, _sandbox, _item, _value) {\n          updateHistory(typeahead);\n          emitWith(typeahead, formChangeEvent, { name: spec.name });\n        }\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var makeIcon = function (name, errId, icon, label) {\n        if (icon === void 0) {\n          icon = name;\n        }\n        if (label === void 0) {\n          label = name;\n        }\n        return {\n          dom: {\n            tag: 'div',\n            classes: [\n              'tox-icon',\n              'tox-control-wrap__status-icon-' + name\n            ],\n            innerHtml: get$e(icon, providersBackstage.icons),\n            attributes: __assign({\n              'title': providersBackstage.translate(label),\n              'aria-live': 'polite'\n            }, errId.fold(function () {\n              return {};\n            }, function (id) {\n              return { id: id };\n            }))\n          }\n        };\n      };\n      var memInvalidIcon = record(makeIcon('invalid', Optional.some(errorId), 'warning'));\n      var memStatus = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap__status-icon-wrap']\n        },\n        components: [memInvalidIcon.asSpec()]\n      });\n      var optUrlPicker = urlBackstage.getUrlPicker(spec.filetype);\n      var browseUrlEvent = generate$1('browser.url.event');\n      var memUrlBox = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap']\n        },\n        components: [\n          pField,\n          memStatus.asSpec()\n        ],\n        behaviours: derive$1([Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          })])\n      });\n      var memUrlPickerButton = record(renderButton({\n        name: spec.name,\n        icon: Optional.some('browse'),\n        text: spec.label.getOr(''),\n        disabled: spec.disabled,\n        primary: false,\n        borderless: true\n      }, function (component) {\n        return emit(component, browseUrlEvent);\n      }, providersBackstage, [], ['tox-browse-url']));\n      var controlHWrapper = function () {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__controls-h-stack']\n          },\n          components: flatten([\n            [memUrlBox.asSpec()],\n            optUrlPicker.map(function () {\n              return memUrlPickerButton.asSpec();\n            }).toArray()\n          ])\n        };\n      };\n      var openUrlPicker = function (comp) {\n        Composing.getCurrent(comp).each(function (field) {\n          var componentData = Representing.getValue(field);\n          var urlData = __assign({ fieldname: spec.name }, componentData);\n          optUrlPicker.each(function (picker) {\n            picker(urlData).get(function (chosenData) {\n              Representing.setValue(field, chosenData);\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            });\n          });\n        });\n      };\n      return FormField.sketch({\n        dom: renderFormFieldDom(),\n        components: pLabel.toArray().concat([controlHWrapper()]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('url-input-events', [run(browseUrlEvent, openUrlPicker)])\n        ])\n      });\n    };\n\n    var renderAlertBanner = function (spec, providersBackstage) {\n      return Container.sketch({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: [\n            'tox-notification',\n            'tox-notification--in',\n            'tox-notification--' + spec.level\n          ]\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__icon']\n            },\n            components: [Button.sketch({\n                dom: {\n                  tag: 'button',\n                  classes: [\n                    'tox-button',\n                    'tox-button--naked',\n                    'tox-button--icon'\n                  ],\n                  innerHtml: get$e(spec.icon, providersBackstage.icons),\n                  attributes: { title: providersBackstage.translate(spec.iconTooltip) }\n                },\n                action: function (comp) {\n                  emitWith(comp, formActionEvent, {\n                    name: 'alert-banner',\n                    value: spec.url\n                  });\n                }\n              })]\n          },\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__body'],\n              innerHtml: providersBackstage.translate(spec.text)\n            }\n          }\n        ]\n      });\n    };\n\n    var renderCheckbox = function (spec, providerBackstage) {\n      var repBehaviour = Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var el = comp.element.dom;\n            return el.checked;\n          },\n          setValue: function (comp, value) {\n            var el = comp.element.dom;\n            el.checked = value;\n          }\n        }\n      });\n      var toggleCheckboxHandler = function (comp) {\n        comp.element.dom.click();\n        return Optional.some(true);\n      };\n      var pField = FormField.parts.field({\n        factory: { sketch: identity },\n        dom: {\n          tag: 'input',\n          classes: ['tox-checkbox__input'],\n          attributes: { type: 'checkbox' }\n        },\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providerBackstage.isDisabled();\n            }\n          }),\n          Tabstopping.config({}),\n          Focusing.config({}),\n          repBehaviour,\n          Keying.config({\n            mode: 'special',\n            onEnter: toggleCheckboxHandler,\n            onSpace: toggleCheckboxHandler,\n            stopSpaceKeyup: true\n          }),\n          config('checkbox-events', [run(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var pLabel = FormField.parts.label({\n        dom: {\n          tag: 'span',\n          classes: ['tox-checkbox__label'],\n          innerHtml: providerBackstage.translate(spec.label)\n        },\n        behaviours: derive$1([Unselecting.config({})])\n      });\n      var makeIcon = function (className) {\n        var iconName = className === 'checked' ? 'selected' : 'unselected';\n        return {\n          dom: {\n            tag: 'span',\n            classes: [\n              'tox-icon',\n              'tox-checkbox-icon__' + className\n            ],\n            innerHtml: get$e(iconName, providerBackstage.icons)\n          }\n        };\n      };\n      var memIcons = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-checkbox__icons']\n        },\n        components: [\n          makeIcon('checked'),\n          makeIcon('unchecked')\n        ]\n      });\n      return FormField.sketch({\n        dom: {\n          tag: 'label',\n          classes: ['tox-checkbox']\n        },\n        components: [\n          pField,\n          memIcons.asSpec(),\n          pLabel\n        ],\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providerBackstage.isDisabled();\n            },\n            disableClass: 'tox-checkbox--disabled',\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    var renderHtmlPanel = function (spec) {\n      if (spec.presets === 'presentation') {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html\n          }\n        });\n      } else {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html,\n            attributes: { role: 'document' }\n          },\n          containerBehaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({})\n          ])\n        });\n      }\n    };\n\n    var make$6 = function (render) {\n      return function (parts, spec, backstage) {\n        return get$1(spec, 'name').fold(function () {\n          return render(spec, backstage);\n        }, function (fieldName) {\n          return parts.field(fieldName, render(spec, backstage));\n        });\n      };\n    };\n    var makeIframe = function (render) {\n      return function (parts, spec, backstage) {\n        var iframeSpec = deepMerge(spec, { source: 'dynamic' });\n        return make$6(render)(parts, iframeSpec, backstage);\n      };\n    };\n    var factories = {\n      bar: make$6(function (spec, backstage) {\n        return renderBar(spec, backstage.shared);\n      }),\n      collection: make$6(function (spec, backstage) {\n        return renderCollection(spec, backstage.shared.providers);\n      }),\n      alertbanner: make$6(function (spec, backstage) {\n        return renderAlertBanner(spec, backstage.shared.providers);\n      }),\n      input: make$6(function (spec, backstage) {\n        return renderInput(spec, backstage.shared.providers);\n      }),\n      textarea: make$6(function (spec, backstage) {\n        return renderTextarea(spec, backstage.shared.providers);\n      }),\n      label: make$6(function (spec, backstage) {\n        return renderLabel$2(spec, backstage.shared);\n      }),\n      iframe: makeIframe(function (spec, backstage) {\n        return renderIFrame(spec, backstage.shared.providers);\n      }),\n      button: make$6(function (spec, backstage) {\n        return renderDialogButton(spec, backstage.shared.providers);\n      }),\n      checkbox: make$6(function (spec, backstage) {\n        return renderCheckbox(spec, backstage.shared.providers);\n      }),\n      colorinput: make$6(function (spec, backstage) {\n        return renderColorInput(spec, backstage.shared, backstage.colorinput);\n      }),\n      colorpicker: make$6(renderColorPicker),\n      dropzone: make$6(function (spec, backstage) {\n        return renderDropZone(spec, backstage.shared.providers);\n      }),\n      grid: make$6(function (spec, backstage) {\n        return renderGrid(spec, backstage.shared);\n      }),\n      listbox: make$6(function (spec, backstage) {\n        return renderListBox(spec, backstage);\n      }),\n      selectbox: make$6(function (spec, backstage) {\n        return renderSelectBox(spec, backstage.shared.providers);\n      }),\n      sizeinput: make$6(function (spec, backstage) {\n        return renderSizeInput(spec, backstage.shared.providers);\n      }),\n      urlinput: make$6(function (spec, backstage) {\n        return renderUrlInput(spec, backstage, backstage.urlinput);\n      }),\n      customeditor: make$6(renderCustomEditor),\n      htmlpanel: make$6(renderHtmlPanel),\n      imagetools: make$6(function (spec, backstage) {\n        return renderImageTools(spec, backstage.shared.providers);\n      }),\n      table: make$6(function (spec, backstage) {\n        return renderTable(spec, backstage.shared.providers);\n      }),\n      panel: make$6(function (spec, backstage) {\n        return renderPanel(spec, backstage);\n      })\n    };\n    var noFormParts = {\n      field: function (_name, spec) {\n        return spec;\n      }\n    };\n    var interpretInForm = function (parts, spec, oldBackstage) {\n      var newBackstage = deepMerge(oldBackstage, {\n        shared: {\n          interpreter: function (childSpec) {\n            return interpretParts(parts, childSpec, newBackstage);\n          }\n        }\n      });\n      return interpretParts(parts, spec, newBackstage);\n    };\n    var interpretParts = function (parts, spec, backstage) {\n      return get$1(factories, spec.type).fold(function () {\n        console.error('Unknown factory type \"' + spec.type + '\", defaulting to container: ', spec);\n        return spec;\n      }, function (factory) {\n        return factory(parts, spec, backstage);\n      });\n    };\n    var interpretWithoutForm = function (spec, backstage) {\n      var parts = noFormParts;\n      return interpretParts(parts, spec, backstage);\n    };\n\n    var bubbleAlignments = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: [],\n      alignRight: [],\n      right: [],\n      left: [],\n      bottom: [],\n      top: []\n    };\n    var getInlineDialogAnchor = function (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) {\n      var bubble = nu$8(-12, 12, bubbleAlignments);\n      var overrides = { maxHeightFunction: expandable() };\n      var editableAreaAnchor = function () {\n        return {\n          anchor: 'node',\n          root: getContentContainer(contentAreaElement()),\n          node: Optional.from(contentAreaElement()),\n          bubble: bubble,\n          layouts: {\n            onRtl: function () {\n              return [northwest$3];\n            },\n            onLtr: function () {\n              return [northeast$3];\n            }\n          },\n          overrides: overrides\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          anchor: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          bubble: bubble,\n          layouts: {\n            onRtl: function () {\n              return [southeast$1];\n            },\n            onLtr: function () {\n              return [southwest$1];\n            }\n          },\n          overrides: overrides\n        };\n      };\n      return function () {\n        return lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n      };\n    };\n    var getBannerAnchor = function (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) {\n      var editableAreaAnchor = function () {\n        return {\n          anchor: 'node',\n          root: getContentContainer(contentAreaElement()),\n          node: Optional.from(contentAreaElement()),\n          layouts: {\n            onRtl: function () {\n              return [north$3];\n            },\n            onLtr: function () {\n              return [north$3];\n            }\n          }\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          anchor: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          layouts: {\n            onRtl: function () {\n              return [south$1];\n            },\n            onLtr: function () {\n              return [south$1];\n            }\n          }\n        };\n      };\n      return function () {\n        return lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n      };\n    };\n    var getCursorAnchor = function (editor, bodyElement) {\n      return function () {\n        return {\n          anchor: 'selection',\n          root: bodyElement(),\n          getSelection: function () {\n            var rng = editor.selection.getRng();\n            return Optional.some(SimSelection.range(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset));\n          }\n        };\n      };\n    };\n    var getNodeAnchor = function (bodyElement) {\n      return function (element) {\n        return {\n          anchor: 'node',\n          root: bodyElement(),\n          node: element\n        };\n      };\n    };\n    var getAnchors = function (editor, lazyAnchorbar, isToolbarTop) {\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var bodyElement = function () {\n        return SugarElement.fromDom(editor.getBody());\n      };\n      var contentAreaElement = function () {\n        return SugarElement.fromDom(editor.getContentAreaContainer());\n      };\n      var lazyUseEditableAreaAnchor = function () {\n        return useFixedToolbarContainer || !isToolbarTop();\n      };\n      return {\n        inlineDialog: getInlineDialogAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        banner: getBannerAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        cursor: getCursorAnchor(editor, bodyElement),\n        node: getNodeAnchor(bodyElement)\n      };\n    };\n\n    var colorPicker = function (editor) {\n      return function (callback, value) {\n        var dialog = colorPickerDialog(editor);\n        dialog(callback, value);\n      };\n    };\n    var hasCustomColors$1 = function (editor) {\n      return function () {\n        return hasCustomColors(editor);\n      };\n    };\n    var getColors$2 = function (editor) {\n      return function () {\n        return getColors(editor);\n      };\n    };\n    var getColorCols$2 = function (editor) {\n      return function () {\n        return getColorCols$1(editor);\n      };\n    };\n    var ColorInputBackstage = function (editor) {\n      return {\n        colorPicker: colorPicker(editor),\n        hasCustomColors: hasCustomColors$1(editor),\n        getColors: getColors$2(editor),\n        getColorCols: getColorCols$2(editor)\n      };\n    };\n\n    var isDraggableModal$1 = function (editor) {\n      return function () {\n        return isDraggableModal(editor);\n      };\n    };\n    var DialogBackstage = function (editor) {\n      return { isDraggableModal: isDraggableModal$1(editor) };\n    };\n\n    var HeaderBackstage = function (editor) {\n      var mode = Cell(isToolbarLocationBottom(editor) ? 'bottom' : 'top');\n      return {\n        isPositionedAtTop: function () {\n          return mode.get() === 'top';\n        },\n        getDockingMode: mode.get,\n        setDockingMode: mode.set\n      };\n    };\n\n    var defaultStyleFormats = [\n      {\n        title: 'Headings',\n        items: [\n          {\n            title: 'Heading 1',\n            format: 'h1'\n          },\n          {\n            title: 'Heading 2',\n            format: 'h2'\n          },\n          {\n            title: 'Heading 3',\n            format: 'h3'\n          },\n          {\n            title: 'Heading 4',\n            format: 'h4'\n          },\n          {\n            title: 'Heading 5',\n            format: 'h5'\n          },\n          {\n            title: 'Heading 6',\n            format: 'h6'\n          }\n        ]\n      },\n      {\n        title: 'Inline',\n        items: [\n          {\n            title: 'Bold',\n            format: 'bold'\n          },\n          {\n            title: 'Italic',\n            format: 'italic'\n          },\n          {\n            title: 'Underline',\n            format: 'underline'\n          },\n          {\n            title: 'Strikethrough',\n            format: 'strikethrough'\n          },\n          {\n            title: 'Superscript',\n            format: 'superscript'\n          },\n          {\n            title: 'Subscript',\n            format: 'subscript'\n          },\n          {\n            title: 'Code',\n            format: 'code'\n          }\n        ]\n      },\n      {\n        title: 'Blocks',\n        items: [\n          {\n            title: 'Paragraph',\n            format: 'p'\n          },\n          {\n            title: 'Blockquote',\n            format: 'blockquote'\n          },\n          {\n            title: 'Div',\n            format: 'div'\n          },\n          {\n            title: 'Pre',\n            format: 'pre'\n          }\n        ]\n      },\n      {\n        title: 'Align',\n        items: [\n          {\n            title: 'Left',\n            format: 'alignleft'\n          },\n          {\n            title: 'Center',\n            format: 'aligncenter'\n          },\n          {\n            title: 'Right',\n            format: 'alignright'\n          },\n          {\n            title: 'Justify',\n            format: 'alignjustify'\n          }\n        ]\n      }\n    ];\n    var isNestedFormat = function (format) {\n      return has(format, 'items');\n    };\n    var isBlockFormat = function (format) {\n      return has(format, 'block');\n    };\n    var isInlineFormat = function (format) {\n      return has(format, 'inline');\n    };\n    var isSelectorFormat = function (format) {\n      return has(format, 'selector');\n    };\n    var mapFormats = function (userFormats) {\n      return foldl(userFormats, function (acc, fmt) {\n        if (isNestedFormat(fmt)) {\n          var result = mapFormats(fmt.items);\n          return {\n            customFormats: acc.customFormats.concat(result.customFormats),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                items: result.formats\n              }])\n          };\n        } else if (isInlineFormat(fmt) || isBlockFormat(fmt) || isSelectorFormat(fmt)) {\n          var formatName = isString(fmt.name) ? fmt.name : fmt.title.toLowerCase();\n          var formatNameWithPrefix = 'custom-' + formatName;\n          return {\n            customFormats: acc.customFormats.concat([{\n                name: formatNameWithPrefix,\n                format: fmt\n              }]),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                format: formatNameWithPrefix,\n                icon: fmt.icon\n              }])\n          };\n        } else {\n          return __assign(__assign({}, acc), { formats: acc.formats.concat(fmt) });\n        }\n      }, {\n        customFormats: [],\n        formats: []\n      });\n    };\n    var registerCustomFormats = function (editor, userFormats) {\n      var result = mapFormats(userFormats);\n      var registerFormats = function (customFormats) {\n        each(customFormats, function (fmt) {\n          if (!editor.formatter.has(fmt.name)) {\n            editor.formatter.register(fmt.name, fmt.format);\n          }\n        });\n      };\n      if (editor.formatter) {\n        registerFormats(result.customFormats);\n      } else {\n        editor.on('init', function () {\n          registerFormats(result.customFormats);\n        });\n      }\n      return result.formats;\n    };\n    var getStyleFormats = function (editor) {\n      return getUserStyleFormats(editor).map(function (userFormats) {\n        var registeredUserFormats = registerCustomFormats(editor, userFormats);\n        return isMergeStyleFormats(editor) ? defaultStyleFormats.concat(registeredUserFormats) : registeredUserFormats;\n      }).getOr(defaultStyleFormats);\n    };\n\n    var processBasic = function (item, isSelectedFor, getPreviewFor) {\n      var formatterSpec = {\n        type: 'formatter',\n        isSelected: isSelectedFor(item.format),\n        getStylePreview: getPreviewFor(item.format)\n      };\n      return deepMerge(item, formatterSpec);\n    };\n    var register$3 = function (editor, formats, isSelectedFor, getPreviewFor) {\n      var enrichSupported = function (item) {\n        return processBasic(item, isSelectedFor, getPreviewFor);\n      };\n      var enrichMenu = function (item) {\n        var submenuSpec = { type: 'submenu' };\n        return deepMerge(item, submenuSpec);\n      };\n      var enrichCustom = function (item) {\n        var formatName = isString(item.name) ? item.name : generate$1(item.title);\n        var formatNameWithPrefix = 'custom-' + formatName;\n        var customSpec = {\n          type: 'formatter',\n          format: formatNameWithPrefix,\n          isSelected: isSelectedFor(formatNameWithPrefix),\n          getStylePreview: getPreviewFor(formatNameWithPrefix)\n        };\n        var newItem = deepMerge(item, customSpec);\n        editor.formatter.register(formatName, newItem);\n        return newItem;\n      };\n      var doEnrich = function (items) {\n        return map(items, function (item) {\n          var keys$1 = keys(item);\n          if (hasNonNullableKey(item, 'items')) {\n            var newItems_1 = doEnrich(item.items);\n            return deepMerge(enrichMenu(item), {\n              getStyleItems: function () {\n                return newItems_1;\n              }\n            });\n          } else if (hasNonNullableKey(item, 'format')) {\n            return enrichSupported(item);\n          } else if (keys$1.length === 1 && contains(keys$1, 'title')) {\n            return deepMerge(item, { type: 'separator' });\n          } else {\n            return enrichCustom(item);\n          }\n        });\n      };\n      return doEnrich(formats);\n    };\n\n    var init$7 = function (editor) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          }) : Optional.none();\n        };\n      };\n      var flatten = function (fmt) {\n        var subs = fmt.items;\n        return subs !== undefined && subs.length > 0 ? bind(subs, flatten) : [fmt.format];\n      };\n      var settingsFormats = Cell([]);\n      var settingsFlattenedFormats = Cell([]);\n      var eventsFormats = Cell([]);\n      var eventsFlattenedFormats = Cell([]);\n      var replaceSettings = Cell(false);\n      editor.on('PreInit', function (_e) {\n        var formats = getStyleFormats(editor);\n        var enriched = register$3(editor, formats, isSelectedFor, getPreviewFor);\n        settingsFormats.set(enriched);\n        settingsFlattenedFormats.set(bind(enriched, flatten));\n      });\n      editor.on('addStyleModifications', function (e) {\n        var modifications = register$3(editor, e.items, isSelectedFor, getPreviewFor);\n        eventsFormats.set(modifications);\n        replaceSettings.set(e.replace);\n        eventsFlattenedFormats.set(bind(modifications, flatten));\n      });\n      var getData = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFormats.get();\n        var fromEvents = eventsFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      var getFlattenedKeys = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFlattenedFormats.get();\n        var fromEvents = eventsFlattenedFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      return {\n        getData: getData,\n        getFlattenedKeys: getFlattenedKeys\n      };\n    };\n\n    var isElement$2 = function (node) {\n      return isNonNullable(node) && node.nodeType === 1;\n    };\n    var trim$1 = global$c.trim;\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (isElement$2(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n    var create$8 = function (type, title, url, level, attach) {\n      return {\n        type: type,\n        title: title,\n        url: url,\n        level: level,\n        attach: attach\n      };\n    };\n    var isChildOfContentEditableTrue = function (node) {\n      while (node = node.parentNode) {\n        var value = node.contentEditable;\n        if (value && value !== 'inherit') {\n          return isContentEditableTrue(node);\n        }\n      }\n      return false;\n    };\n    var select = function (selector, root) {\n      return map(descendants(SugarElement.fromDom(root), selector), function (element) {\n        return element.dom;\n      });\n    };\n    var getElementText = function (elm) {\n      return elm.innerText || elm.textContent;\n    };\n    var getOrGenerateId = function (elm) {\n      return elm.id ? elm.id : generate$1('h');\n    };\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName === 'A' && (elm.id || elm.name) !== undefined;\n    };\n    var isValidAnchor = function (elm) {\n      return isAnchor(elm) && isEditable(elm);\n    };\n    var isHeader = function (elm) {\n      return elm && /^(H[1-6])$/.test(elm.nodeName);\n    };\n    var isEditable = function (elm) {\n      return isChildOfContentEditableTrue(elm) && !isContentEditableFalse(elm);\n    };\n    var isValidHeader = function (elm) {\n      return isHeader(elm) && isEditable(elm);\n    };\n    var getLevel = function (elm) {\n      return isHeader(elm) ? parseInt(elm.nodeName.substr(1), 10) : 0;\n    };\n    var headerTarget = function (elm) {\n      var headerId = getOrGenerateId(elm);\n      var attach = function () {\n        elm.id = headerId;\n      };\n      return create$8('header', getElementText(elm), '#' + headerId, getLevel(elm), attach);\n    };\n    var anchorTarget = function (elm) {\n      var anchorId = elm.id || elm.name;\n      var anchorText = getElementText(elm);\n      return create$8('anchor', anchorText ? anchorText : '#' + anchorId, '#' + anchorId, 0, noop);\n    };\n    var getHeaderTargets = function (elms) {\n      return map(filter(elms, isValidHeader), headerTarget);\n    };\n    var getAnchorTargets = function (elms) {\n      return map(filter(elms, isValidAnchor), anchorTarget);\n    };\n    var getTargetElements = function (elm) {\n      var elms = select('h1,h2,h3,h4,h5,h6,a:not([href])', elm);\n      return elms;\n    };\n    var hasTitle = function (target) {\n      return trim$1(target.title).length > 0;\n    };\n    var find$5 = function (elm) {\n      var elms = getTargetElements(elm);\n      return filter(getHeaderTargets(elms).concat(getAnchorTargets(elms)), hasTitle);\n    };\n    var LinkTargets = { find: find$5 };\n\n    var STORAGE_KEY = 'tinymce-url-history';\n    var HISTORY_LENGTH = 5;\n    var isHttpUrl = function (url) {\n      return isString(url) && /^https?/.test(url);\n    };\n    var isArrayOfUrl = function (a) {\n      return isArray(a) && a.length <= HISTORY_LENGTH && forall(a, isHttpUrl);\n    };\n    var isRecordOfUrlArray = function (r) {\n      return isObject(r) && find$1(r, function (value) {\n        return !isArrayOfUrl(value);\n      }).isNone();\n    };\n    var getAllHistory = function () {\n      var unparsedHistory = global$9.getItem(STORAGE_KEY);\n      if (unparsedHistory === null) {\n        return {};\n      }\n      var history;\n      try {\n        history = JSON.parse(unparsedHistory);\n      } catch (e) {\n        if (e instanceof SyntaxError) {\n          console.log('Local storage ' + STORAGE_KEY + ' was not valid JSON', e);\n          return {};\n        }\n        throw e;\n      }\n      if (!isRecordOfUrlArray(history)) {\n        console.log('Local storage ' + STORAGE_KEY + ' was not valid format', history);\n        return {};\n      }\n      return history;\n    };\n    var setAllHistory = function (history) {\n      if (!isRecordOfUrlArray(history)) {\n        throw new Error('Bad format for history:\\n' + JSON.stringify(history));\n      }\n      global$9.setItem(STORAGE_KEY, JSON.stringify(history));\n    };\n    var getHistory = function (fileType) {\n      var history = getAllHistory();\n      return Object.prototype.hasOwnProperty.call(history, fileType) ? history[fileType] : [];\n    };\n    var addToHistory = function (url, fileType) {\n      if (!isHttpUrl(url)) {\n        return;\n      }\n      var history = getAllHistory();\n      var items = Object.prototype.hasOwnProperty.call(history, fileType) ? history[fileType] : [];\n      var itemsWithoutUrl = filter(items, function (item) {\n        return item !== url;\n      });\n      history[fileType] = [url].concat(itemsWithoutUrl).slice(0, HISTORY_LENGTH);\n      setAllHistory(history);\n    };\n\n    var isTruthy = function (value) {\n      return !!value;\n    };\n    var makeMap = function (value) {\n      return map$2(global$c.makeMap(value, /[, ]/), isTruthy);\n    };\n    var getPicker = function (editor) {\n      return Optional.from(getFilePickerCallback(editor)).filter(isFunction);\n    };\n    var getPickerTypes = function (editor) {\n      var optFileTypes = Optional.some(getFilePickerTypes(editor)).filter(isTruthy);\n      var optLegacyTypes = Optional.some(getFileBrowserCallbackTypes(editor)).filter(isTruthy);\n      var optTypes = optFileTypes.or(optLegacyTypes).map(makeMap);\n      return getPicker(editor).fold(never, function (_picker) {\n        return optTypes.fold(always, function (types) {\n          return keys(types).length > 0 ? types : false;\n        });\n      });\n    };\n    var getPickerSetting = function (editor, filetype) {\n      var pickerTypes = getPickerTypes(editor);\n      if (isBoolean(pickerTypes)) {\n        return pickerTypes ? getPicker(editor) : Optional.none();\n      } else {\n        return pickerTypes[filetype] ? getPicker(editor) : Optional.none();\n      }\n    };\n    var getUrlPicker = function (editor, filetype) {\n      return getPickerSetting(editor, filetype).map(function (picker) {\n        return function (entry) {\n          return Future.nu(function (completer) {\n            var handler = function (value, meta) {\n              if (!isString(value)) {\n                throw new Error('Expected value to be string');\n              }\n              if (meta !== undefined && !isObject(meta)) {\n                throw new Error('Expected meta to be a object');\n              }\n              var r = {\n                value: value,\n                meta: meta\n              };\n              completer(r);\n            };\n            var meta = __assign({\n              filetype: filetype,\n              fieldname: entry.fieldname\n            }, Optional.from(entry.meta).getOr({}));\n            picker.call(editor, handler, entry.value, meta);\n          });\n        };\n      });\n    };\n    var getTextSetting = function (value) {\n      return Optional.from(value).filter(isString).getOrUndefined();\n    };\n    var getLinkInformation = function (editor) {\n      if (noTypeaheadUrls(editor)) {\n        return Optional.none();\n      }\n      return Optional.some({\n        targets: LinkTargets.find(editor.getBody()),\n        anchorTop: getTextSetting(getAnchorTop(editor)),\n        anchorBottom: getTextSetting(getAnchorBottom(editor))\n      });\n    };\n    var getValidationHandler = function (editor) {\n      return Optional.from(getFilePickerValidatorHandler(editor));\n    };\n    var UrlInputBackstage = function (editor) {\n      return {\n        getHistory: getHistory,\n        addToHistory: addToHistory,\n        getLinkInformation: function () {\n          return getLinkInformation(editor);\n        },\n        getValidationHandler: function () {\n          return getValidationHandler(editor);\n        },\n        getUrlPicker: function (filetype) {\n          return getUrlPicker(editor, filetype);\n        }\n      };\n    };\n\n    var init$8 = function (sink, editor, lazyAnchorbar) {\n      var contextMenuState = Cell(false);\n      var toolbar = HeaderBackstage(editor);\n      var backstage = {\n        shared: {\n          providers: {\n            icons: function () {\n              return editor.ui.registry.getAll().icons;\n            },\n            menuItems: function () {\n              return editor.ui.registry.getAll().menuItems;\n            },\n            translate: global$6.translate,\n            isDisabled: function () {\n              return editor.mode.isReadOnly() || editor.ui.isDisabled();\n            },\n            getSetting: editor.getParam.bind(editor)\n          },\n          interpreter: function (s) {\n            return interpretWithoutForm(s, backstage);\n          },\n          anchors: getAnchors(editor, lazyAnchorbar, toolbar.isPositionedAtTop),\n          header: toolbar,\n          getSink: function () {\n            return Result.value(sink);\n          }\n        },\n        urlinput: UrlInputBackstage(editor),\n        styleselect: init$7(editor),\n        colorinput: ColorInputBackstage(editor),\n        dialog: DialogBackstage(editor),\n        isContextMenuOpen: function () {\n          return contextMenuState.get();\n        },\n        setContextMenuState: function (state) {\n          return contextMenuState.set(state);\n        }\n      };\n      return backstage;\n    };\n\n    var expandable$1 = constant(function (element, available) {\n      setMax$1(element, Math.floor(available));\n    });\n\n    var showContextToolbarEvent = 'contexttoolbar-show';\n    var hideContextToolbarEvent = 'contexttoolbar-hide';\n\n    var schema$k = constant([\n      strict$1('dom'),\n      defaulted$1('shell', true),\n      field$1('toolbarBehaviours', [Replacing])\n    ]);\n    var enhanceGroups = function () {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var parts$7 = constant([optional({\n        name: 'groups',\n        overrides: enhanceGroups\n      })]);\n\n    var factory$9 = function (detail, components, _spec, _externals) {\n      var setGroups = function (toolbar, groups) {\n        getGroupContainer(toolbar).fold(function () {\n          console.error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n          throw new Error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n        }, function (container) {\n          Replacing.set(container, groups);\n        });\n      };\n      var getGroupContainer = function (component) {\n        return detail.shell ? Optional.some(component) : getPart(component, detail, 'groups');\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.toolbarBehaviours, extra.behaviours),\n        apis: { setGroups: setGroups },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var Toolbar = composite$1({\n      name: 'Toolbar',\n      configFields: schema$k(),\n      partFields: parts$7(),\n      factory: factory$9,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        }\n      }\n    });\n\n    var generate$6 = function (xs, f) {\n      var init = {\n        len: 0,\n        list: []\n      };\n      var r = foldl(xs, function (b, a) {\n        var value = f(a, b.len);\n        return value.fold(constant(b), function (v) {\n          return {\n            len: v.finish,\n            list: b.list.concat([v])\n          };\n        });\n      }, init);\n      return r.list;\n    };\n\n    var output$1 = function (within, extra, withinWidth) {\n      return {\n        within: within,\n        extra: extra,\n        withinWidth: withinWidth\n      };\n    };\n    var apportion = function (units, total, len) {\n      var parray = generate$6(units, function (unit, current) {\n        var width = len(unit);\n        return Optional.some({\n          element: unit,\n          start: current,\n          finish: current + width,\n          width: width\n        });\n      });\n      var within = filter(parray, function (unit) {\n        return unit.finish <= total;\n      });\n      var withinWidth = foldr(within, function (acc, el) {\n        return acc + el.width;\n      }, 0);\n      var extra = parray.slice(within.length);\n      return {\n        within: within,\n        extra: extra,\n        withinWidth: withinWidth\n      };\n    };\n    var toUnit = function (parray) {\n      return map(parray, function (unit) {\n        return unit.element;\n      });\n    };\n    var fitLast = function (within, extra, withinWidth) {\n      var fits = toUnit(within.concat(extra));\n      return output$1(fits, [], withinWidth);\n    };\n    var overflow = function (within, extra, overflower, withinWidth) {\n      var fits = toUnit(within).concat([overflower]);\n      return output$1(fits, toUnit(extra), withinWidth);\n    };\n    var fitAll = function (within, extra, withinWidth) {\n      return output$1(toUnit(within), [], withinWidth);\n    };\n    var tryFit = function (total, units, len) {\n      var divide = apportion(units, total, len);\n      return divide.extra.length === 0 ? Optional.some(divide) : Optional.none();\n    };\n    var partition$3 = function (total, units, len, overflower) {\n      var divide = tryFit(total, units, len).getOrThunk(function () {\n        return apportion(units, total - len(overflower), len);\n      });\n      var within = divide.within;\n      var extra = divide.extra;\n      var withinWidth = divide.withinWidth;\n      if (extra.length === 1 && extra[0].width <= len(overflower)) {\n        return fitLast(within, extra, withinWidth);\n      } else if (extra.length >= 1) {\n        return overflow(within, extra, overflower, withinWidth);\n      } else {\n        return fitAll(within, extra, withinWidth);\n      }\n    };\n\n    var setGroups = function (toolbar, storedGroups) {\n      var bGroups = map(storedGroups, function (g) {\n        return premade$1(g);\n      });\n      Toolbar.setGroups(toolbar, bGroups);\n    };\n    var findFocusedComp = function (comps) {\n      return findMap(comps, function (comp) {\n        return search(comp.element).bind(function (focusedElm) {\n          return comp.getSystem().getByDom(focusedElm).toOptional();\n        });\n      });\n    };\n    var refresh = function (toolbar, detail, setOverflow) {\n      var primary = getPartOrDie(toolbar, detail, 'primary');\n      var overflowGroup = Coupling.getCoupled(toolbar, 'overflowGroup');\n      set$2(primary.element, 'visibility', 'hidden');\n      var groups = detail.builtGroups.get().concat([overflowGroup]);\n      var focusedComp = findFocusedComp(groups);\n      setOverflow([]);\n      setGroups(primary, groups);\n      var availableWidth = get$8(primary.element);\n      var overflows = partition$3(availableWidth, detail.builtGroups.get(), function (comp) {\n        return get$8(comp.element);\n      }, overflowGroup);\n      if (overflows.extra.length === 0) {\n        Replacing.remove(primary, overflowGroup);\n        setOverflow([]);\n      } else {\n        setGroups(primary, overflows.within);\n        setOverflow(overflows.extra);\n      }\n      remove$6(primary.element, 'visibility');\n      reflow(primary.element);\n      focusedComp.each(Focusing.focus);\n    };\n\n    var schema$l = constant([\n      field$1('splitToolbarBehaviours', [Coupling]),\n      state$1('builtGroups', function () {\n        return Cell([]);\n      })\n    ]);\n\n    var schema$m = constant([\n      markers(['overflowToggledClass']),\n      optionFunction('getOverflowBounds'),\n      strict$1('lazySink'),\n      state$1('overflowGroups', function () {\n        return Cell([]);\n      })\n    ].concat(schema$l()));\n    var parts$8 = constant([\n      required({\n        factory: Toolbar,\n        schema: schema$k(),\n        name: 'primary'\n      }),\n      external$1({\n        schema: schema$k(),\n        name: 'overflow'\n      }),\n      external$1({ name: 'overflow-button' }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var schema$n = constant([\n      markers(['toggledClass']),\n      strict$1('lazySink'),\n      strictFunction('fetch'),\n      optionFunction('getBounds'),\n      optionObjOf('fireDismissalEventInstead', [defaulted$1('event', dismissRequested())]),\n      schema$1()\n    ]);\n    var parts$9 = constant([\n      external$1({\n        name: 'button',\n        overrides: function (detail) {\n          return {\n            dom: { attributes: { 'aria-haspopup': 'true' } },\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.toggledClass,\n                aria: { mode: 'expanded' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({\n        factory: Toolbar,\n        schema: schema$k(),\n        name: 'toolbar',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([Keying.config({\n                mode: 'cyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'button').each(Focusing.focus);\n                  return Optional.none();\n                }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var toggle$2 = function (button, externals) {\n      var toolbarSandbox = Coupling.getCoupled(button, 'toolbarSandbox');\n      if (Sandboxing.isOpen(toolbarSandbox)) {\n        Sandboxing.close(toolbarSandbox);\n      } else {\n        Sandboxing.open(toolbarSandbox, externals.toolbar());\n      }\n    };\n    var position$2 = function (button, toolbar, detail, layouts) {\n      var bounds = detail.getBounds.map(function (bounder) {\n        return bounder();\n      });\n      var sink = detail.lazySink(button).getOrDie();\n      Positioning.positionWithinBounds(sink, {\n        anchor: 'hotspot',\n        hotspot: button,\n        layouts: layouts,\n        overrides: { maxWidthFunction: expandable$1() }\n      }, toolbar, bounds);\n    };\n    var setGroups$1 = function (button, toolbar, detail, layouts, groups) {\n      Toolbar.setGroups(toolbar, groups);\n      position$2(button, toolbar, detail, layouts);\n      Toggling.on(button);\n    };\n    var makeSandbox$1 = function (button, spec, detail) {\n      var ariaOwner = manager();\n      var onOpen = function (sandbox, toolbar) {\n        detail.fetch().get(function (groups) {\n          setGroups$1(button, toolbar, detail, spec.layouts, groups);\n          ariaOwner.link(button.element);\n          Keying.focusIn(toolbar);\n        });\n      };\n      var onClose = function () {\n        Toggling.off(button);\n        Focusing.focus(button);\n        ariaOwner.unlink(button.element);\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { id: ariaOwner.id }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              Sandboxing.close(comp);\n              return Optional.some(true);\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf(data, queryElem) || isPartOf(button, queryElem);\n            },\n            getAttachPoint: function () {\n              return detail.lazySink(button).getOrDie();\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel(__assign({ isExtraPart: never }, detail.fireDismissalEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})))), receivingChannel$1({\n              doReposition: function () {\n                Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n                  position$2(button, toolbar, detail, spec.layouts);\n                });\n              }\n            }))\n          })\n        ])\n      };\n    };\n    var factory$a = function (detail, components, spec, externals) {\n      return __assign(__assign({}, Button.sketch(__assign(__assign({}, externals.button()), {\n        action: function (button) {\n          toggle$2(button, externals);\n        },\n        buttonBehaviours: SketchBehaviours.augment({ dump: externals.button().buttonBehaviours }, [Coupling.config({\n            others: {\n              toolbarSandbox: function (button) {\n                return makeSandbox$1(button, spec, detail);\n              }\n            }\n          })])\n      }))), {\n        apis: {\n          setGroups: function (button, groups) {\n            Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n              setGroups$1(button, toolbar, detail, spec.layouts, groups);\n            });\n          },\n          reposition: function (button) {\n            Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n              position$2(button, toolbar, detail, spec.layouts);\n            });\n          },\n          toggle: function (button) {\n            toggle$2(button, externals);\n          },\n          getToolbar: function (button) {\n            return Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox'));\n          },\n          isOpen: function (button) {\n            return Sandboxing.isOpen(Coupling.getCoupled(button, 'toolbarSandbox'));\n          }\n        }\n      });\n    };\n    var FloatingToolbarButton = composite$1({\n      name: 'FloatingToolbarButton',\n      factory: factory$a,\n      configFields: schema$n(),\n      partFields: parts$9(),\n      apis: {\n        setGroups: function (apis, button, groups) {\n          apis.setGroups(button, groups);\n        },\n        reposition: function (apis, button) {\n          apis.reposition(button);\n        },\n        toggle: function (apis, button) {\n          apis.toggle(button);\n        },\n        getToolbar: function (apis, button) {\n          return apis.getToolbar(button);\n        },\n        isOpen: function (apis, button) {\n          return apis.isOpen(button);\n        }\n      }\n    });\n\n    var schema$o = constant([\n      strict$1('items'),\n      markers(['itemSelector']),\n      field$1('tgroupBehaviours', [Keying])\n    ]);\n    var parts$a = constant([group({\n        name: 'items',\n        unit: 'item'\n      })]);\n\n    var factory$b = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.tgroupBehaviours, [Keying.config({\n            mode: 'flow',\n            selector: detail.markers.itemSelector\n          })]),\n        domModification: { attributes: { role: 'toolbar' } }\n      };\n    };\n    var ToolbarGroup = composite$1({\n      name: 'ToolbarGroup',\n      configFields: schema$o(),\n      partFields: parts$a(),\n      factory: factory$b\n    });\n\n    var buildGroups = function (comps) {\n      return map(comps, function (g) {\n        return premade$1(g);\n      });\n    };\n    var refresh$1 = function (toolbar, memFloatingToolbarButton, detail) {\n      refresh(toolbar, detail, function (overflowGroups) {\n        detail.overflowGroups.set(overflowGroups);\n        memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n          FloatingToolbarButton.setGroups(floatingToolbarButton, buildGroups(overflowGroups));\n        });\n      });\n    };\n    var factory$c = function (detail, components, spec, externals) {\n      var memFloatingToolbarButton = record(FloatingToolbarButton.sketch({\n        fetch: function () {\n          return Future.nu(function (resolve) {\n            resolve(buildGroups(detail.overflowGroups.get()));\n          });\n        },\n        layouts: {\n          onLtr: function () {\n            return [\n              southwest$1,\n              southeast$1\n            ];\n          },\n          onRtl: function () {\n            return [\n              southeast$1,\n              southwest$1\n            ];\n          },\n          onBottomLtr: function () {\n            return [\n              northwest$1,\n              northeast$1\n            ];\n          },\n          onBottomRtl: function () {\n            return [\n              northeast$1,\n              northwest$1\n            ];\n          }\n        },\n        getBounds: spec.getOverflowBounds,\n        lazySink: detail.lazySink,\n        fireDismissalEventInstead: {},\n        markers: { toggledClass: detail.markers.overflowToggledClass },\n        parts: {\n          button: externals['overflow-button'](),\n          toolbar: externals.overflow()\n        }\n      }));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [Coupling.config({\n            others: {\n              overflowGroup: function () {\n                return ToolbarGroup.sketch(__assign(__assign({}, externals['overflow-group']()), { items: [memFloatingToolbarButton.asSpec()] }));\n              }\n            }\n          })]),\n        apis: {\n          setGroups: function (toolbar, groups) {\n            detail.builtGroups.set(map(groups, toolbar.getSystem().build));\n            refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          refresh: function (toolbar) {\n            return refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          toggle: function (toolbar) {\n            memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n              FloatingToolbarButton.toggle(floatingToolbarButton);\n            });\n          },\n          isOpen: function (toolbar) {\n            return memFloatingToolbarButton.getOpt(toolbar).map(FloatingToolbarButton.isOpen).getOr(false);\n          },\n          reposition: function (toolbar) {\n            memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n              FloatingToolbarButton.reposition(floatingToolbarButton);\n            });\n          },\n          getOverflow: function (toolbar) {\n            return memFloatingToolbarButton.getOpt(toolbar).bind(FloatingToolbarButton.getToolbar);\n          }\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var SplitFloatingToolbar = composite$1({\n      name: 'SplitFloatingToolbar',\n      configFields: schema$m(),\n      partFields: parts$8(),\n      factory: factory$c,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        reposition: function (apis, toolbar) {\n          apis.reposition(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        },\n        isOpen: function (apis, toolbar) {\n          return apis.isOpen(toolbar);\n        },\n        getOverflow: function (apis, toolbar) {\n          return apis.getOverflow(toolbar);\n        }\n      }\n    });\n\n    var getAnimationRoot = function (component, slideConfig) {\n      return slideConfig.getAnimationRoot.fold(function () {\n        return component.element;\n      }, function (get) {\n        return get(component);\n      });\n    };\n\n    var getDimensionProperty = function (slideConfig) {\n      return slideConfig.dimension.property;\n    };\n    var getDimension = function (slideConfig, elem) {\n      return slideConfig.dimension.getDimension(elem);\n    };\n    var disableTransitions = function (component, slideConfig) {\n      var root = getAnimationRoot(component, slideConfig);\n      remove$5(root, [\n        slideConfig.shrinkingClass,\n        slideConfig.growingClass\n      ]);\n    };\n    var setShrunk = function (component, slideConfig) {\n      remove$4(component.element, slideConfig.openClass);\n      add$2(component.element, slideConfig.closedClass);\n      set$2(component.element, getDimensionProperty(slideConfig), '0px');\n      reflow(component.element);\n    };\n    var setGrown = function (component, slideConfig) {\n      remove$4(component.element, slideConfig.closedClass);\n      add$2(component.element, slideConfig.openClass);\n      remove$6(component.element, getDimensionProperty(slideConfig));\n    };\n    var doImmediateShrink = function (component, slideConfig, slideState, _calculatedSize) {\n      slideState.setCollapsed();\n      set$2(component.element, getDimensionProperty(slideConfig), getDimension(slideConfig, component.element));\n      reflow(component.element);\n      disableTransitions(component, slideConfig);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n      slideConfig.onShrunk(component);\n    };\n    var doStartShrink = function (component, slideConfig, slideState, calculatedSize) {\n      var size = calculatedSize.getOrThunk(function () {\n        return getDimension(slideConfig, component.element);\n      });\n      slideState.setCollapsed();\n      set$2(component.element, getDimensionProperty(slideConfig), size);\n      reflow(component.element);\n      var root = getAnimationRoot(component, slideConfig);\n      remove$4(root, slideConfig.growingClass);\n      add$2(root, slideConfig.shrinkingClass);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n    };\n    var doStartSmartShrink = function (component, slideConfig, slideState) {\n      var size = getDimension(slideConfig, component.element);\n      var shrinker = size === '0px' ? doImmediateShrink : doStartShrink;\n      shrinker(component, slideConfig, slideState, Optional.some(size));\n    };\n    var doStartGrow = function (component, slideConfig, slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      var wasShrinking = has$2(root, slideConfig.shrinkingClass);\n      var beforeSize = getDimension(slideConfig, component.element);\n      setGrown(component, slideConfig);\n      var fullSize = getDimension(slideConfig, component.element);\n      var startPartialGrow = function () {\n        set$2(component.element, getDimensionProperty(slideConfig), beforeSize);\n        reflow(component.element);\n      };\n      var startCompleteGrow = function () {\n        setShrunk(component, slideConfig);\n      };\n      var setStartSize = wasShrinking ? startPartialGrow : startCompleteGrow;\n      setStartSize();\n      remove$4(root, slideConfig.shrinkingClass);\n      add$2(root, slideConfig.growingClass);\n      setGrown(component, slideConfig);\n      set$2(component.element, getDimensionProperty(slideConfig), fullSize);\n      slideState.setExpanded();\n      slideConfig.onStartGrow(component);\n    };\n    var refresh$2 = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        remove$6(component.element, getDimensionProperty(slideConfig));\n        var fullSize = getDimension(slideConfig, component.element);\n        set$2(component.element, getDimensionProperty(slideConfig), fullSize);\n      }\n    };\n    var grow = function (component, slideConfig, slideState) {\n      if (!slideState.isExpanded()) {\n        doStartGrow(component, slideConfig, slideState);\n      }\n    };\n    var shrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doStartSmartShrink(component, slideConfig, slideState);\n      }\n    };\n    var immediateShrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doImmediateShrink(component, slideConfig, slideState, Optional.none());\n      }\n    };\n    var hasGrown = function (component, slideConfig, slideState) {\n      return slideState.isExpanded();\n    };\n    var hasShrunk = function (component, slideConfig, slideState) {\n      return slideState.isCollapsed();\n    };\n    var isGrowing = function (component, slideConfig, _slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has$2(root, slideConfig.growingClass) === true;\n    };\n    var isShrinking = function (component, slideConfig, _slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has$2(root, slideConfig.shrinkingClass) === true;\n    };\n    var isTransitioning = function (component, slideConfig, slideState) {\n      return isGrowing(component, slideConfig) || isShrinking(component, slideConfig);\n    };\n    var toggleGrow = function (component, slideConfig, slideState) {\n      var f = slideState.isExpanded() ? doStartSmartShrink : doStartGrow;\n      f(component, slideConfig, slideState);\n    };\n\n    var SlidingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$2,\n        grow: grow,\n        shrink: shrink,\n        immediateShrink: immediateShrink,\n        hasGrown: hasGrown,\n        hasShrunk: hasShrunk,\n        isGrowing: isGrowing,\n        isShrinking: isShrinking,\n        isTransitioning: isTransitioning,\n        toggleGrow: toggleGrow,\n        disableTransitions: disableTransitions\n    });\n\n    var exhibit$6 = function (base, slideConfig, _slideState) {\n      var expanded = slideConfig.expanded;\n      return expanded ? nu$6({\n        classes: [slideConfig.openClass],\n        styles: {}\n      }) : nu$6({\n        classes: [slideConfig.closedClass],\n        styles: wrap$1(slideConfig.dimension.property, '0px')\n      });\n    };\n    var events$d = function (slideConfig, slideState) {\n      return derive([runOnSource(transitionend(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event.raw;\n          if (raw.propertyName === slideConfig.dimension.property) {\n            disableTransitions(component, slideConfig);\n            if (slideState.isExpanded()) {\n              remove$6(component.element, slideConfig.dimension.property);\n            }\n            var notify = slideState.isExpanded() ? slideConfig.onGrown : slideConfig.onShrunk;\n            notify(component);\n          }\n        })]);\n    };\n\n    var ActiveSliding = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$6,\n        events: events$d\n    });\n\n    var SlidingSchema = [\n      strict$1('closedClass'),\n      strict$1('openClass'),\n      strict$1('shrinkingClass'),\n      strict$1('growingClass'),\n      option('getAnimationRoot'),\n      onHandler('onShrunk'),\n      onHandler('onStartShrink'),\n      onHandler('onGrown'),\n      onHandler('onStartGrow'),\n      defaulted$1('expanded', false),\n      strictOf('dimension', choose$1('property', {\n        width: [\n          output('property', 'width'),\n          output('getDimension', function (elem) {\n            return get$8(elem) + 'px';\n          })\n        ],\n        height: [\n          output('property', 'height'),\n          output('getDimension', function (elem) {\n            return get$7(elem) + 'px';\n          })\n        ]\n      }))\n    ];\n\n    var init$9 = function (spec) {\n      var state = Cell(spec.expanded);\n      var readState = function () {\n        return 'expanded: ' + state.get();\n      };\n      return nu$5({\n        isExpanded: function () {\n          return state.get() === true;\n        },\n        isCollapsed: function () {\n          return state.get() === false;\n        },\n        setCollapsed: curry(state.set, false),\n        setExpanded: curry(state.set, true),\n        readState: readState\n      });\n    };\n\n    var SlidingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$9\n    });\n\n    var Sliding = create$1({\n      fields: SlidingSchema,\n      name: 'sliding',\n      active: ActiveSliding,\n      apis: SlidingApis,\n      state: SlidingState\n    });\n\n    var schema$p = constant([\n      markers([\n        'closedClass',\n        'openClass',\n        'shrinkingClass',\n        'growingClass',\n        'overflowToggledClass'\n      ]),\n      onHandler('onOpened'),\n      onHandler('onClosed')\n    ].concat(schema$l()));\n    var parts$b = constant([\n      required({\n        factory: Toolbar,\n        schema: schema$k(),\n        name: 'primary'\n      }),\n      required({\n        factory: Toolbar,\n        schema: schema$k(),\n        name: 'overflow',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([\n              Sliding.config({\n                dimension: { property: 'height' },\n                closedClass: detail.markers.closedClass,\n                openClass: detail.markers.openClass,\n                shrinkingClass: detail.markers.shrinkingClass,\n                growingClass: detail.markers.growingClass,\n                onShrunk: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(function (button) {\n                    Toggling.off(button);\n                    Focusing.focus(button);\n                  });\n                  detail.onClosed(comp);\n                },\n                onGrown: function (comp) {\n                  Keying.focusIn(comp);\n                  detail.onOpened(comp);\n                },\n                onStartGrow: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Toggling.on);\n                }\n              }),\n              Keying.config({\n                mode: 'acyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Focusing.focus);\n                  return Optional.some(true);\n                }\n              })\n            ])\n          };\n        }\n      }),\n      external$1({\n        name: 'overflow-button',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.overflowToggledClass,\n                aria: { mode: 'pressed' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var isOpen$1 = function (toolbar, detail) {\n      return getPart(toolbar, detail, 'overflow').map(Sliding.hasGrown).getOr(false);\n    };\n    var toggleToolbar = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow-button').bind(function () {\n        return getPart(toolbar, detail, 'overflow');\n      }).each(function (overf) {\n        refresh$3(toolbar, detail);\n        Sliding.toggleGrow(overf);\n      });\n    };\n    var refresh$3 = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow').each(function (overflow) {\n        refresh(toolbar, detail, function (groups) {\n          var builtGroups = map(groups, function (g) {\n            return premade$1(g);\n          });\n          Toolbar.setGroups(overflow, builtGroups);\n        });\n        getPart(toolbar, detail, 'overflow-button').each(function (button) {\n          if (Sliding.hasGrown(overflow)) {\n            Toggling.on(button);\n          }\n        });\n        Sliding.refresh(overflow);\n      });\n    };\n    var factory$d = function (detail, components, spec, externals) {\n      var toolbarToggleEvent = 'alloy.toolbar.toggle';\n      var doSetGroups = function (toolbar, groups) {\n        var built = map(groups, toolbar.getSystem().build);\n        detail.builtGroups.set(built);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [\n          Coupling.config({\n            others: {\n              overflowGroup: function (toolbar) {\n                return ToolbarGroup.sketch(__assign(__assign({}, externals['overflow-group']()), {\n                  items: [Button.sketch(__assign(__assign({}, externals['overflow-button']()), {\n                      action: function (_button) {\n                        emit(toolbar, toolbarToggleEvent);\n                      }\n                    }))]\n                }));\n              }\n            }\n          }),\n          config('toolbar-toggle-events', [run(toolbarToggleEvent, function (toolbar) {\n              toggleToolbar(toolbar, detail);\n            })])\n        ]),\n        apis: {\n          setGroups: function (toolbar, groups) {\n            doSetGroups(toolbar, groups);\n            refresh$3(toolbar, detail);\n          },\n          refresh: function (toolbar) {\n            return refresh$3(toolbar, detail);\n          },\n          toggle: function (toolbar) {\n            return toggleToolbar(toolbar, detail);\n          },\n          isOpen: function (toolbar) {\n            return isOpen$1(toolbar, detail);\n          }\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var SplitSlidingToolbar = composite$1({\n      name: 'SplitSlidingToolbar',\n      configFields: schema$p(),\n      partFields: parts$b(),\n      factory: factory$d,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        },\n        isOpen: function (apis, toolbar) {\n          return apis.isOpen(toolbar);\n        }\n      }\n    });\n\n    var toolbarHeightChange = constant(generate$1('toolbar-height-change'));\n\n    var renderToolbarGroupCommon = function (toolbarGroup) {\n      var attributes = toolbarGroup.title.fold(function () {\n        return {};\n      }, function (title) {\n        return { attributes: { title: title } };\n      });\n      return {\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-toolbar__group']\n        }, attributes),\n        components: [ToolbarGroup.parts.items({})],\n        items: toolbarGroup.items,\n        markers: { itemSelector: '*:not(.tox-split-button) > .tox-tbtn:not([disabled]), ' + '.tox-split-button:not([disabled]), ' + '.tox-toolbar-nav-js:not([disabled])' },\n        tgroupBehaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n    var renderToolbarGroup = function (toolbarGroup) {\n      return ToolbarGroup.sketch(renderToolbarGroupCommon(toolbarGroup));\n    };\n    var getToolbarbehaviours = function (toolbarSpec, modeName) {\n      var onAttached = runOnAttached(function (component) {\n        var groups = map(toolbarSpec.initGroups, renderToolbarGroup);\n        Toolbar.setGroups(component, groups);\n      });\n      return derive$1([\n        DisablingConfigs.toolbarButton(toolbarSpec.providers.isDisabled),\n        receivingConfig(),\n        Keying.config({\n          mode: modeName,\n          onEscape: toolbarSpec.onEscape,\n          selector: '.tox-toolbar__group'\n        }),\n        config('toolbar-events', [onAttached])\n      ]);\n    };\n    var renderMoreToolbarCommon = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return {\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        parts: {\n          'overflow-group': renderToolbarGroupCommon({\n            title: Optional.none(),\n            items: []\n          }),\n          'overflow-button': renderIconButtonSpec({\n            name: 'more',\n            icon: Optional.some('more-drawer'),\n            disabled: false,\n            tooltip: Optional.some('More...'),\n            primary: false,\n            borderless: false\n          }, Optional.none(), toolbarSpec.providers)\n        },\n        splitToolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName)\n      };\n    };\n    var renderFloatingMoreToolbar = function (toolbarSpec) {\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      var overflowXOffset = 4;\n      var primary = SplitFloatingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      return SplitFloatingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        lazySink: toolbarSpec.getSink,\n        getOverflowBounds: function () {\n          var headerElem = toolbarSpec.moreDrawerData.lazyHeader().element;\n          var headerBounds = absolute$1(headerElem);\n          var docElem = documentElement(headerElem);\n          var docBounds = absolute$1(docElem);\n          var height = Math.max(docElem.dom.scrollHeight, docBounds.height);\n          return bounds$1(headerBounds.x + overflowXOffset, docBounds.y, headerBounds.width - overflowXOffset * 2, height);\n        },\n        parts: __assign(__assign({}, baseSpec.parts), {\n          overflow: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: toolbarSpec.attributes\n            }\n          }\n        }),\n        components: [primary],\n        markers: { overflowToggledClass: 'tox-tbtn--enabled' }\n      }));\n    };\n    var renderSlidingMoreToolbar = function (toolbarSpec) {\n      var primary = SplitSlidingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      var overflow = SplitSlidingToolbar.parts.overflow({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__overflow']\n        }\n      });\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      return SplitSlidingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        components: [\n          primary,\n          overflow\n        ],\n        markers: {\n          openClass: 'tox-toolbar__overflow--open',\n          closedClass: 'tox-toolbar__overflow--closed',\n          growingClass: 'tox-toolbar__overflow--growing',\n          shrinkingClass: 'tox-toolbar__overflow--shrinking',\n          overflowToggledClass: 'tox-tbtn--enabled'\n        },\n        onOpened: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'opened' });\n        },\n        onClosed: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'closed' });\n        }\n      }));\n    };\n    var renderToolbar = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return Toolbar.sketch({\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar'].concat(toolbarSpec.type === ToolbarMode.scrolling ? ['tox-toolbar--scrolling'] : [])\n        },\n        components: [Toolbar.parts.groups({})],\n        toolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName)\n      });\n    };\n\n    var groupToolbarButtonSchema = objOf([\n      strictString('type'),\n      strictOf('items', oneOf([\n        arrOfObj$1([\n          strictString('name'),\n          strictArrayOf('items', string)\n        ]),\n        string\n      ]))\n    ].concat(baseToolbarButtonFields));\n    var createGroupToolbarButton = function (spec) {\n      return asRaw('GroupToolbarButton', groupToolbarButtonSchema, spec);\n    };\n\n    var baseMenuButtonFields = [\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      strictFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n\n    var MenuButtonSchema = objOf(__spreadArrays([strictString('type')], baseMenuButtonFields));\n    var createMenuButton = function (spec) {\n      return asRaw('menubutton', MenuButtonSchema, spec);\n    };\n\n    var splitButtonSchema = objOf([\n      strictString('type'),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      optionFunction('select'),\n      strictFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedStringEnum('presets', 'normal', [\n        'normal',\n        'color',\n        'listpreview'\n      ]),\n      defaulted$1('columns', 1),\n      strictFunction('onAction'),\n      strictFunction('onItemAction')\n    ]);\n    var createSplitButton = function (spec) {\n      return asRaw('SplitButton', splitButtonSchema, spec);\n    };\n\n    var events$e = function (reflectingConfig, reflectingState) {\n      var update = function (component, data) {\n        reflectingConfig.updateState.each(function (updateState) {\n          var newState = updateState(component, data);\n          reflectingState.set(newState);\n        });\n        reflectingConfig.renderComponents.each(function (renderComponents) {\n          var newComponents = renderComponents(data, reflectingState.get());\n          var newChildren = map(newComponents, component.getSystem().build);\n          replaceChildren(component, newChildren);\n        });\n      };\n      return derive([\n        run(receive(), function (component, message) {\n          var receivingData = message;\n          if (!receivingData.universal) {\n            var channel = reflectingConfig.channel;\n            if (contains(receivingData.channels, channel)) {\n              update(component, receivingData.data);\n            }\n          }\n        }),\n        runOnAttached(function (comp, _se) {\n          reflectingConfig.initialData.each(function (rawData) {\n            update(comp, rawData);\n          });\n        })\n      ]);\n    };\n\n    var ActiveReflecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$e\n    });\n\n    var getState$2 = function (component, replaceConfig, reflectState) {\n      return reflectState;\n    };\n\n    var ReflectingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getState: getState$2\n    });\n\n    var ReflectingSchema = [\n      strict$1('channel'),\n      option('renderComponents'),\n      option('updateState'),\n      option('initialData')\n    ];\n\n    var init$a = function () {\n      var cell = Cell(Optional.none());\n      var set = function (optS) {\n        return cell.set(optS);\n      };\n      var clear = function () {\n        return cell.set(Optional.none());\n      };\n      var get = function () {\n        return cell.get();\n      };\n      var readState = function () {\n        return cell.get().fold(function () {\n          return 'none';\n        }, function (x) {\n          return x;\n        });\n      };\n      return {\n        readState: readState,\n        get: get,\n        set: set,\n        clear: clear\n      };\n    };\n\n    var ReflectingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$a\n    });\n\n    var Reflecting = create$1({\n      fields: ReflectingSchema,\n      name: 'reflecting',\n      active: ActiveReflecting,\n      apis: ReflectingApis,\n      state: ReflectingState\n    });\n\n    var schema$q = constant([\n      strict$1('toggleClass'),\n      strict$1('fetch'),\n      onStrictHandler('onExecute'),\n      defaulted$1('getHotspot', Optional.some),\n      defaulted$1('getAnchorOverrides', constant({})),\n      schema$1(),\n      onStrictHandler('onItemExecute'),\n      option('lazySink'),\n      strict$1('dom'),\n      onHandler('onOpen'),\n      field$1('splitDropdownBehaviours', [\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      defaulted$1('matchWidth', false),\n      defaulted$1('useMinWidth', false),\n      defaulted$1('eventOrder', {}),\n      option('role')\n    ].concat(sandboxFields()));\n    var arrowPart = required({\n      factory: Button,\n      schema: [strict$1('dom')],\n      name: 'arrow',\n      defaults: function () {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (arrow) {\n            arrow.getSystem().getByUid(detail.uid).each(emitExecute);\n          },\n          buttonBehaviours: derive$1([Toggling.config({\n              toggleOnExecute: false,\n              toggleClass: detail.toggleClass\n            })])\n        };\n      }\n    });\n    var buttonPart = required({\n      factory: Button,\n      schema: [strict$1('dom')],\n      name: 'button',\n      defaults: function () {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (btn) {\n            btn.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n              detail.onExecute(splitDropdown, btn);\n            });\n          }\n        };\n      }\n    });\n    var parts$c = constant([\n      arrowPart,\n      buttonPart,\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [strict$1('text')],\n        name: 'aria-descriptor'\n      }),\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return {\n            onExecute: function (tmenu, item) {\n              tmenu.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n                detail.onItemExecute(splitDropdown, tmenu, item);\n              });\n            }\n          };\n        }\n      }),\n      partType()\n    ]);\n\n    var factory$e = function (detail, components, spec, externals) {\n      var _a;\n      var switchToMenu = function (sandbox) {\n        Composing.getCurrent(sandbox).each(function (current) {\n          Highlighting.highlightFirst(current);\n          Keying.focusIn(current);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, function (x) {\n          return x;\n        }, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var openMenu = function (comp) {\n        action(comp);\n        return Optional.some(true);\n      };\n      var executeOnButton = function (comp) {\n        var button = getPartOrDie(comp, detail, 'button');\n        emitExecute(button);\n        return Optional.some(true);\n      };\n      var buttonEvents = __assign(__assign({}, derive([runOnAttached(function (component, _simulatedEvent) {\n          var ariaDescriptor = getPart(component, detail, 'aria-descriptor');\n          ariaDescriptor.each(function (descriptor) {\n            var descriptorId = generate$1('aria');\n            set$1(descriptor.element, 'id', descriptorId);\n            set$1(component.element, 'aria-describedby', descriptorId);\n          });\n        })])), events$7(Optional.some(action)));\n      var apis = {\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        eventOrder: __assign(__assign({}, detail.eventOrder), (_a = {}, _a[execute()] = [\n          'disabling',\n          'toggling',\n          'alloy.base.behaviour'\n        ], _a)),\n        events: buttonEvents,\n        behaviours: augment(detail.splitDropdownBehaviours, [\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                var arrow = getPartOrDie(hotspot, detail, 'arrow');\n                var extras = {\n                  onOpen: function () {\n                    Toggling.on(arrow);\n                    Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    Toggling.off(arrow);\n                    Toggling.off(hotspot);\n                  }\n                };\n                return makeSandbox(detail, hotspot, extras);\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: executeOnButton,\n            onEnter: executeOnButton,\n            onDown: openMenu\n          }),\n          Focusing.config({}),\n          Toggling.config({\n            toggleOnExecute: false,\n            aria: { mode: 'expanded' }\n          })\n        ]),\n        domModification: {\n          attributes: {\n            'role': detail.role.getOr('button'),\n            'aria-haspopup': true\n          }\n        }\n      };\n    };\n    var SplitDropdown = composite$1({\n      name: 'SplitDropdown',\n      configFields: schema$q(),\n      partFields: parts$c(),\n      factory: factory$e,\n      apis: {\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var getButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getToggleApi = function (component) {\n      return {\n        setActive: function (state) {\n          Toggling.set(component, state);\n        },\n        isActive: function () {\n          return Toggling.isOn(component);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getTooltipAttributes = function (tooltip, providersBackstage) {\n      return tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n    };\n    var focusButtonEvent = generate$1('focus-button');\n    var rtlIcon$1 = [\n      'checklist',\n      'ordered-list'\n    ];\n    var rtlTransform$1 = [\n      'indent',\n      'outdent',\n      'table-insert-column-after',\n      'table-insert-column-before',\n      'unordered-list'\n    ];\n    var renderCommonStructure = function (icon, text, tooltip, receiver, behaviours, providersBackstage) {\n      var _d;\n      var getIconName = function (iconName) {\n        return global$6.isRtl() && contains(rtlIcon$1, iconName) ? iconName + '-rtl' : iconName;\n      };\n      var needsRtlClass = global$6.isRtl() && icon.exists(function (name) {\n        return contains(rtlTransform$1, name);\n      });\n      return {\n        dom: {\n          tag: 'button',\n          classes: ['tox-tbtn'].concat(text.isSome() ? ['tox-tbtn--select'] : []).concat(needsRtlClass ? ['tox-tbtn__icon-rtl'] : []),\n          attributes: getTooltipAttributes(tooltip, providersBackstage)\n        },\n        components: componentRenderPipeline([\n          icon.map(function (iconName) {\n            return renderIconFromPack(getIconName(iconName), providersBackstage.icons);\n          }),\n          text.map(function (text) {\n            return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n          })\n        ]),\n        eventOrder: (_d = {}, _d[mousedown()] = [\n          'focusing',\n          'alloy.base.behaviour',\n          'common-button-display-events'\n        ], _d),\n        buttonBehaviours: derive$1([\n          DisablingConfigs.toolbarButton(providersBackstage.isDisabled),\n          receivingConfig(),\n          config('common-button-display-events', [run(mousedown(), function (button, se) {\n              se.event.prevent();\n              emit(button, focusButtonEvent);\n            })])\n        ].concat(receiver.map(function (r) {\n          return Reflecting.config({\n            channel: r,\n            initialData: {\n              icon: icon,\n              text: text\n            },\n            renderComponents: function (data, _state) {\n              return componentRenderPipeline([\n                data.icon.map(function (iconName) {\n                  return renderIconFromPack(getIconName(iconName), providersBackstage.icons);\n                }),\n                data.text.map(function (text) {\n                  return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n                })\n              ]);\n            }\n          });\n        }).toArray()).concat(behaviours.getOr([])))\n      };\n    };\n    var renderFloatingToolbarButton = function (spec, backstage, identifyButtons, attributes) {\n      var sharedBackstage = backstage.shared;\n      return FloatingToolbarButton.sketch({\n        lazySink: sharedBackstage.getSink,\n        fetch: function () {\n          return Future.nu(function (resolve) {\n            resolve(map(identifyButtons(spec.items), renderToolbarGroup));\n          });\n        },\n        markers: { toggledClass: 'tox-tbtn--enabled' },\n        parts: {\n          button: renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.none(), Optional.none(), sharedBackstage.providers),\n          toolbar: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: attributes\n            }\n          }\n        }\n      });\n    };\n    var renderCommonToolbarButton = function (spec, specialisation, providersBackstage) {\n      var editorOffCell = Cell(noop);\n      var structure = renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.none(), Optional.none(), providersBackstage);\n      return Button.sketch({\n        dom: structure.dom,\n        components: structure.components,\n        eventOrder: toolbarButtonEventOrder,\n        buttonBehaviours: derive$1([\n          config('toolbar-button-events', [\n            onToolbarButtonExecute({\n              onAction: spec.onAction,\n              getApi: specialisation.getApi\n            }),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          DisablingConfigs.toolbarButton(function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }),\n          receivingConfig()\n        ].concat(specialisation.toolbarButtonBehaviours))\n      });\n    };\n    var renderToolbarButton = function (spec, providersBackstage) {\n      return renderToolbarButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [].concat(bonusEvents.length > 0 ? [config('toolbarButtonWith', bonusEvents)] : []),\n        getApi: getButtonApi,\n        onSetup: spec.onSetup\n      }, providersBackstage);\n    };\n    var renderToolbarToggleButton = function (spec, providersBackstage) {\n      return renderToolbarToggleButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarToggleButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return deepMerge(renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [\n          Replacing.config({}),\n          Toggling.config({\n            toggleClass: 'tox-tbtn--enabled',\n            aria: { mode: 'pressed' },\n            toggleOnExecute: false\n          })\n        ].concat(bonusEvents.length > 0 ? [config('toolbarToggleButtonWith', bonusEvents)] : []),\n        getApi: getToggleApi,\n        onSetup: spec.onSetup\n      }, providersBackstage));\n    };\n    var fetchChoices = function (getApi, spec, providersBackstage) {\n      return function (comp) {\n        return Future.nu(function (callback) {\n          return spec.fetch(callback);\n        }).map(function (items) {\n          return Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$1('menu-value'), items, function (value) {\n            spec.onItemAction(getApi(comp), value);\n          }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, spec.select.getOr(never), providersBackstage), {\n            movement: deriveMenuMovement(spec.columns, spec.presets),\n            menuBehaviours: SimpleBehaviours.unnamedEvents(spec.columns !== 'auto' ? [] : [runOnAttached(function (comp, _se) {\n                detectSize(comp, 4, classForPreset(spec.presets)).each(function (_d) {\n                  var numRows = _d.numRows, numColumns = _d.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              })])\n          })));\n        });\n      };\n    };\n    var renderSplitButton = function (spec, sharedBackstage) {\n      var _d;\n      var displayChannel = generate$1('channel-update-split-dropdown-display');\n      var getApi = function (comp) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(comp);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(comp, state);\n          },\n          setIconFill: function (id, value) {\n            descendant$1(comp.element, 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$1(underlinePath, 'fill', value);\n            });\n          },\n          setIconStroke: function (id, value) {\n            descendant$1(comp.element, 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$1(underlinePath, 'stroke', value);\n            });\n          },\n          setActive: function (state) {\n            if (comp.getSystem().isConnected()) {\n              set$1(comp.element, 'aria-pressed', state);\n              descendant$1(comp.element, 'span').each(function (button) {\n                comp.getSystem().getByDom(button).each(function (buttonComp) {\n                  return Toggling.set(buttonComp, state);\n                });\n              });\n            }\n          },\n          isActive: function () {\n            return descendant$1(comp.element, 'span').exists(function (button) {\n              if (comp.getSystem().isConnected()) {\n                return comp.getSystem().getByDom(button).exists(Toggling.isOn);\n              } else {\n                return false;\n              }\n            });\n          }\n        };\n      };\n      var editorOffCell = Cell(noop);\n      var specialisation = {\n        getApi: getApi,\n        onSetup: spec.onSetup\n      };\n      return SplitDropdown.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-split-button'],\n          attributes: __assign({ 'aria-pressed': false }, getTooltipAttributes(spec.tooltip, sharedBackstage.providers))\n        },\n        onExecute: function (button) {\n          spec.onAction(getApi(button));\n        },\n        onItemExecute: function (_a, _b, _c) {\n        },\n        splitDropdownBehaviours: derive$1([\n          DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n          receivingConfig(),\n          config('split-dropdown-events', [\n            run(focusButtonEvent, Focusing.focus),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          Unselecting.config({})\n        ]),\n        eventOrder: (_d = {}, _d[attachedToDom()] = [\n          'alloy.base.behaviour',\n          'split-dropdown-events'\n        ], _d),\n        toggleClass: 'tox-tbtn--enabled',\n        lazySink: sharedBackstage.getSink,\n        fetch: fetchChoices(getApi, spec, sharedBackstage.providers),\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        components: [\n          SplitDropdown.parts.button(renderCommonStructure(spec.icon, spec.text, Optional.none(), Optional.some(displayChannel), Optional.some([Toggling.config({\n              toggleClass: 'tox-tbtn--enabled',\n              toggleOnExecute: false\n            })]), sharedBackstage.providers)),\n          SplitDropdown.parts.arrow({\n            dom: {\n              tag: 'button',\n              classes: [\n                'tox-tbtn',\n                'tox-split-button__chevron'\n              ],\n              innerHtml: get$e('chevron-down', sharedBackstage.providers.icons)\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n              receivingConfig()\n            ])\n          }),\n          SplitDropdown.parts['aria-descriptor']({ text: sharedBackstage.providers.translate('To open the popup, press Shift+Enter') })\n        ]\n      });\n    };\n\n    var getFormApi = function (input) {\n      return {\n        hide: function () {\n          return emit(input, sandboxClose());\n        },\n        getValue: function () {\n          return Representing.getValue(input);\n        }\n      };\n    };\n    var runOnExecute$1 = function (memInput, original) {\n      return run(internalToolbarButtonExecute, function (comp, se) {\n        var input = memInput.get(comp);\n        var formApi = getFormApi(input);\n        original.onAction(formApi, se.event.buttonApi);\n      });\n    };\n    var renderContextButton = function (memInput, button, extras) {\n      var _a = button.original, primary = _a.primary, rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToolbarButton(__assign(__assign({}, rest), {\n        type: 'button',\n        onAction: noop\n      })));\n      return renderToolbarButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute$1(memInput, button)]);\n    };\n    var renderContextToggleButton = function (memInput, button, extras) {\n      var _a = button.original, primary = _a.primary, rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToggleButton(__assign(__assign({}, rest), {\n        type: 'togglebutton',\n        onAction: noop\n      })));\n      return renderToolbarToggleButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute$1(memInput, button)]);\n    };\n    var generateOne$1 = function (memInput, button, providersBackstage) {\n      var extras = { backstage: { shared: { providers: providersBackstage } } };\n      if (button.type === 'contextformtogglebutton') {\n        return renderContextToggleButton(memInput, button, extras);\n      } else {\n        return renderContextButton(memInput, button, extras);\n      }\n    };\n    var generate$7 = function (memInput, buttons, providersBackstage) {\n      var mementos = map(buttons, function (button) {\n        return record(generateOne$1(memInput, button, providersBackstage));\n      });\n      var asSpecs = function () {\n        return map(mementos, function (mem) {\n          return mem.asSpec();\n        });\n      };\n      var findPrimary = function (compInSystem) {\n        return findMap(buttons, function (button, i) {\n          if (button.primary) {\n            return Optional.from(mementos[i]).bind(function (mem) {\n              return mem.getOpt(compInSystem);\n            }).filter(not(Disabling.isDisabled));\n          } else {\n            return Optional.none();\n          }\n        });\n      };\n      return {\n        asSpecs: asSpecs,\n        findPrimary: findPrimary\n      };\n    };\n\n    var buildInitGroups = function (ctx, providers) {\n      var inputAttributes = ctx.label.fold(function () {\n        return {};\n      }, function (label) {\n        return { 'aria-label': label };\n      });\n      var memInput = record(Input.sketch({\n        inputClasses: [\n          'tox-toolbar-textfield',\n          'tox-toolbar-nav-js'\n        ],\n        data: ctx.initValue(),\n        inputAttributes: inputAttributes,\n        selectOnFocus: true,\n        inputBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onEnter: function (input) {\n              return commands.findPrimary(input).map(function (primary) {\n                emitExecute(primary);\n                return true;\n              });\n            },\n            onLeft: function (comp, se) {\n              se.cut();\n              return Optional.none();\n            },\n            onRight: function (comp, se) {\n              se.cut();\n              return Optional.none();\n            }\n          })])\n      }));\n      var commands = generate$7(memInput, ctx.commands, providers);\n      return [\n        {\n          title: Optional.none(),\n          items: [memInput.asSpec()]\n        },\n        {\n          title: Optional.none(),\n          items: commands.asSpecs()\n        }\n      ];\n    };\n    var renderContextForm = function (toolbarType, ctx, providers) {\n      return renderToolbar({\n        type: toolbarType,\n        uid: generate$1('context-toolbar'),\n        initGroups: buildInitGroups(ctx, providers),\n        onEscape: Optional.none,\n        cyclicKeying: true,\n        providers: providers\n      });\n    };\n    var ContextForm = {\n      renderContextForm: renderContextForm,\n      buildInitGroups: buildInitGroups\n    };\n\n    var getHorizontalBounds = function (contentAreaBox, viewportBounds) {\n      var x = Math.max(viewportBounds.x, contentAreaBox.x);\n      var contentBoxWidth = contentAreaBox.right - x;\n      var maxViewportWidth = viewportBounds.width - (x - viewportBounds.x);\n      var width = Math.min(contentBoxWidth, maxViewportWidth);\n      return {\n        x: x,\n        width: width\n      };\n    };\n    var getVerticalBounds = function (editor, contentAreaBox, viewportBounds, isToolbarLocationTop) {\n      var container = SugarElement.fromDom(editor.getContainer());\n      var header = descendant$1(container, '.tox-editor-header').getOr(container);\n      var headerBox = box(header);\n      var isToolbarBelowContentArea = headerBox.y >= contentAreaBox.bottom;\n      var isToolbarAbove = isToolbarLocationTop && !isToolbarBelowContentArea;\n      if (editor.inline && isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom, viewportBounds.y),\n          bottom: viewportBounds.bottom\n        };\n      }\n      if (editor.inline && !isToolbarAbove) {\n        return {\n          y: viewportBounds.y,\n          bottom: Math.min(headerBox.y, viewportBounds.bottom)\n        };\n      }\n      var containerBounds = box(container);\n      if (isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom, viewportBounds.y),\n          bottom: Math.min(containerBounds.bottom, viewportBounds.bottom)\n        };\n      }\n      return {\n        y: Math.max(containerBounds.y, viewportBounds.y),\n        bottom: Math.min(headerBox.y, viewportBounds.bottom)\n      };\n    };\n    var getContextToolbarBounds = function (editor, sharedBackstage) {\n      var viewportBounds = getBounds(window);\n      var contentAreaBox = box(SugarElement.fromDom(editor.getContentAreaContainer()));\n      var toolbarOrMenubarEnabled = isMenubarEnabled(editor) || isToolbarEnabled(editor) || isMultipleToolbars(editor);\n      var _a = getHorizontalBounds(contentAreaBox, viewportBounds), x = _a.x, width = _a.width;\n      if (editor.inline && !toolbarOrMenubarEnabled) {\n        return bounds$1(x, viewportBounds.y, width, viewportBounds.height);\n      } else {\n        var isToolbarTop = sharedBackstage.header.isPositionedAtTop();\n        var _b = getVerticalBounds(editor, contentAreaBox, viewportBounds, isToolbarTop), y = _b.y, bottom = _b.bottom;\n        return bounds$1(x, y, width, bottom - y);\n      }\n    };\n\n    var matchTargetWith = function (elem, candidates) {\n      var ctxs = filter(candidates, function (toolbarApi) {\n        return toolbarApi.predicate(elem.dom);\n      });\n      var _a = partition(ctxs, function (t) {\n          return t.type === 'contexttoolbar';\n        }), pass = _a.pass, fail = _a.fail;\n      return {\n        contextToolbars: pass,\n        contextForms: fail\n      };\n    };\n    var filterByPositionForStartNode = function (toolbars) {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        var doesPositionExist = function (value) {\n          return exists(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var filterToolbarsByPosition = function (value) {\n          return filter(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var hasSelectionToolbars = doesPositionExist('selection');\n        var hasNodeToolbars = doesPositionExist('node');\n        if (hasSelectionToolbars || hasNodeToolbars) {\n          if (hasNodeToolbars && hasSelectionToolbars) {\n            var nodeToolbars = filterToolbarsByPosition('node');\n            var selectionToolbars = map(filterToolbarsByPosition('selection'), function (t) {\n              return __assign(__assign({}, t), { position: 'node' });\n            });\n            return nodeToolbars.concat(selectionToolbars);\n          } else {\n            return hasSelectionToolbars ? filterToolbarsByPosition('selection') : filterToolbarsByPosition('node');\n          }\n        } else {\n          return filterToolbarsByPosition('line');\n        }\n      }\n    };\n    var filterByPositionForAncestorNode = function (toolbars) {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        var findPosition_1 = function (value) {\n          return find(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var basePosition = findPosition_1('selection').orThunk(function () {\n          return findPosition_1('node');\n        }).orThunk(function () {\n          return findPosition_1('line');\n        }).map(function (t) {\n          return t.position;\n        });\n        return basePosition.fold(function () {\n          return [];\n        }, function (pos) {\n          return filter(toolbars, function (t) {\n            return t.position === pos;\n          });\n        });\n      }\n    };\n    var matchStartNode = function (elem, nodeCandidates, editorCandidates) {\n      var nodeMatches = matchTargetWith(elem, nodeCandidates);\n      if (nodeMatches.contextForms.length > 0) {\n        return Optional.some({\n          elem: elem,\n          toolbars: [nodeMatches.contextForms[0]]\n        });\n      } else {\n        var editorMatches = matchTargetWith(elem, editorCandidates);\n        if (editorMatches.contextForms.length > 0) {\n          return Optional.some({\n            elem: elem,\n            toolbars: [editorMatches.contextForms[0]]\n          });\n        } else if (nodeMatches.contextToolbars.length > 0 || editorMatches.contextToolbars.length > 0) {\n          var toolbars = filterByPositionForStartNode(nodeMatches.contextToolbars.concat(editorMatches.contextToolbars));\n          return Optional.some({\n            elem: elem,\n            toolbars: toolbars\n          });\n        } else {\n          return Optional.none();\n        }\n      }\n    };\n    var matchAncestor = function (isRoot, startNode, scopes) {\n      if (isRoot(startNode)) {\n        return Optional.none();\n      } else {\n        return ancestor(startNode, function (ancestorElem) {\n          var _a = matchTargetWith(ancestorElem, scopes.inNodeScope), contextToolbars = _a.contextToolbars, contextForms = _a.contextForms;\n          var toolbars = contextForms.length > 0 ? contextForms : filterByPositionForAncestorNode(contextToolbars);\n          return toolbars.length > 0 ? Optional.some({\n            elem: ancestorElem,\n            toolbars: toolbars\n          }) : Optional.none();\n        }, isRoot);\n      }\n    };\n    var lookup$1 = function (scopes, editor) {\n      var rootElem = SugarElement.fromDom(editor.getBody());\n      var isRoot = function (elem) {\n        return eq$1(elem, rootElem);\n      };\n      var isOutsideRoot = function (startNode) {\n        return !isRoot(startNode) && !contains$2(rootElem, startNode);\n      };\n      var startNode = SugarElement.fromDom(editor.selection.getNode());\n      if (isOutsideRoot(startNode)) {\n        return Optional.none();\n      }\n      return matchStartNode(startNode, scopes.inNodeScope, scopes.inEditorScope).orThunk(function () {\n        return matchAncestor(isRoot, startNode, scopes);\n      });\n    };\n\n    var categorise = function (contextToolbars, navigate) {\n      var forms = {};\n      var inNodeScope = [];\n      var inEditorScope = [];\n      var formNavigators = {};\n      var lookupTable = {};\n      var registerForm = function (key, toolbarSpec) {\n        var contextForm = getOrDie(createContextForm(toolbarSpec));\n        forms[key] = contextForm;\n        contextForm.launch.map(function (launch) {\n          formNavigators['form:' + key + ''] = __assign(__assign({}, toolbarSpec.launch), {\n            type: launch.type === 'contextformtogglebutton' ? 'togglebutton' : 'button',\n            onAction: function () {\n              navigate(contextForm);\n            }\n          });\n        });\n        if (contextForm.scope === 'editor') {\n          inEditorScope.push(contextForm);\n        } else {\n          inNodeScope.push(contextForm);\n        }\n        lookupTable[key] = contextForm;\n      };\n      var registerToolbar = function (key, toolbarSpec) {\n        createContextToolbar(toolbarSpec).each(function (contextToolbar) {\n          if (toolbarSpec.scope === 'editor') {\n            inEditorScope.push(contextToolbar);\n          } else {\n            inNodeScope.push(contextToolbar);\n          }\n          lookupTable[key] = contextToolbar;\n        });\n      };\n      var keys$1 = keys(contextToolbars);\n      each(keys$1, function (key) {\n        var toolbarApi = contextToolbars[key];\n        if (toolbarApi.type === 'contextform') {\n          registerForm(key, toolbarApi);\n        } else if (toolbarApi.type === 'contexttoolbar') {\n          registerToolbar(key, toolbarApi);\n        }\n      });\n      return {\n        forms: forms,\n        inNodeScope: inNodeScope,\n        inEditorScope: inEditorScope,\n        lookupTable: lookupTable,\n        formNavigators: formNavigators\n      };\n    };\n\n    var forwardSlideEvent = generate$1('forward-slide');\n    var backSlideEvent = generate$1('backward-slide');\n    var changeSlideEvent = generate$1('change-slide-event');\n    var resizingClass = 'tox-pop--resizing';\n    var renderContextToolbar = function (spec) {\n      var stack = Cell([]);\n      return InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-pop']\n        },\n        fireDismissalEventInstead: { event: 'doNotDismissYet' },\n        onShow: function (comp) {\n          stack.set([]);\n          InlineView.getContent(comp).each(function (c) {\n            remove$6(c.element, 'visibility');\n          });\n          remove$4(comp.element, resizingClass);\n          remove$6(comp.element, 'width');\n        },\n        inlineBehaviours: derive$1([\n          config('context-toolbar-events', [\n            runOnSource(transitionend(), function (comp, _se) {\n              remove$4(comp.element, resizingClass);\n              remove$6(comp.element, 'width');\n            }),\n            run(changeSlideEvent, function (comp, se) {\n              var elem = comp.element;\n              remove$6(elem, 'width');\n              var currentWidth = get$8(elem);\n              InlineView.setContent(comp, se.event.contents);\n              add$2(elem, resizingClass);\n              var newWidth = get$8(elem);\n              set$2(elem, 'width', currentWidth + 'px');\n              InlineView.getContent(comp).each(function (newContents) {\n                se.event.focus.bind(function (f) {\n                  focus$1(f);\n                  return search(elem);\n                }).orThunk(function () {\n                  Keying.focusIn(newContents);\n                  return active(getRootNode(elem));\n                });\n              });\n              global$2.setTimeout(function () {\n                set$2(comp.element, 'width', newWidth + 'px');\n              }, 0);\n            }),\n            run(forwardSlideEvent, function (comp, se) {\n              InlineView.getContent(comp).each(function (oldContents) {\n                stack.set(stack.get().concat([{\n                    bar: oldContents,\n                    focus: active(getRootNode(comp.element))\n                  }]));\n              });\n              emitWith(comp, changeSlideEvent, {\n                contents: se.event.forwardContents,\n                focus: Optional.none()\n              });\n            }),\n            run(backSlideEvent, function (comp, _se) {\n              last(stack.get()).each(function (last) {\n                stack.set(stack.get().slice(0, stack.get().length - 1));\n                emitWith(comp, changeSlideEvent, {\n                  contents: premade$1(last.bar),\n                  focus: last.focus\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              return last(stack.get()).fold(function () {\n                return spec.onEscape();\n              }, function (_) {\n                emit(comp, backSlideEvent);\n                return Optional.some(true);\n              });\n            }\n          })\n        ]),\n        lazySink: function () {\n          return Result.value(spec.sink);\n        }\n      });\n    };\n\n    var generateSelectItems = function (_editor, backstage, spec) {\n      var generateItem = function (rawItem, response, disabled, value) {\n        var translatedText = backstage.shared.providers.translate(rawItem.title);\n        if (rawItem.type === 'separator') {\n          return Optional.some({\n            type: 'separator',\n            text: translatedText\n          });\n        } else if (rawItem.type === 'submenu') {\n          var items = bind(rawItem.getStyleItems(), function (si) {\n            return validate(si, response, value);\n          });\n          if (response === 0 && items.length <= 0) {\n            return Optional.none();\n          } else {\n            return Optional.some({\n              type: 'nestedmenuitem',\n              text: translatedText,\n              disabled: items.length <= 0,\n              getSubmenuItems: function () {\n                return bind(rawItem.getStyleItems(), function (si) {\n                  return validate(si, response, value);\n                });\n              }\n            });\n          }\n        } else {\n          return Optional.some(__assign({\n            type: 'togglemenuitem',\n            text: translatedText,\n            icon: rawItem.icon,\n            active: rawItem.isSelected(value),\n            disabled: disabled,\n            onAction: spec.onAction(rawItem)\n          }, rawItem.getStylePreview().fold(function () {\n            return {};\n          }, function (preview) {\n            return { meta: { style: preview } };\n          })));\n        }\n      };\n      var validate = function (item, response, value) {\n        var invalid = item.type === 'formatter' && spec.isInvalid(item);\n        if (response === 0) {\n          return invalid ? [] : generateItem(item, response, false, value).toArray();\n        } else {\n          return generateItem(item, response, invalid, value).toArray();\n        }\n      };\n      var validateItems = function (preItems) {\n        var value = spec.getCurrentValue();\n        var response = spec.shouldHide ? 0 : 1;\n        return bind(preItems, function (item) {\n          return validate(item, response, value);\n        });\n      };\n      var getFetch = function (backstage, getStyleItems) {\n        return function (comp, callback) {\n          var preItems = getStyleItems();\n          var items = validateItems(preItems);\n          var menu = build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false);\n          callback(menu);\n        };\n      };\n      return {\n        validateItems: validateItems,\n        getFetch: getFetch\n      };\n    };\n    var createMenuItems = function (editor, backstage, spec) {\n      var dataset = spec.dataset;\n      var getStyleItems = dataset.type === 'basic' ? function () {\n        return map(dataset.data, function (d) {\n          return processBasic(d, spec.isSelectedFor, spec.getPreviewFor);\n        });\n      } : dataset.getData;\n      return {\n        items: generateSelectItems(editor, backstage, spec),\n        getStyleItems: getStyleItems\n      };\n    };\n    var createSelectButton = function (editor, backstage, spec) {\n      var _a = createMenuItems(editor, backstage, spec), items = _a.items, getStyleItems = _a.getStyleItems;\n      var getApi = function (comp) {\n        return { getComponent: constant(comp) };\n      };\n      var onSetup = function (api) {\n        var updateText = function () {\n          var comp = api.getComponent();\n          if (comp.getSystem().isConnected()) {\n            spec.updateText(comp);\n          }\n        };\n        updateText();\n        editor.on('NodeChange', updateText);\n        return function () {\n          editor.off('NodeChange', updateText);\n        };\n      };\n      return renderCommonDropdown({\n        text: spec.icon.isSome() ? Optional.none() : Optional.some(''),\n        icon: spec.icon,\n        tooltip: Optional.from(spec.tooltip),\n        role: Optional.none(),\n        fetch: items.getFetch(backstage, getStyleItems),\n        onSetup: onSetup,\n        getApi: getApi,\n        columns: 1,\n        presets: 'normal',\n        classes: spec.icon.isSome() ? [] : ['bespoke'],\n        dropdownBehaviours: []\n      }, 'tox-tbtn', backstage.shared);\n    };\n\n    var process = function (rawFormats) {\n      return map(rawFormats, function (item) {\n        var title = item, format = item;\n        var values = item.split('=');\n        if (values.length > 1) {\n          title = values[0];\n          format = values[1];\n        }\n        return {\n          title: title,\n          format: format\n        };\n      });\n    };\n    var buildBasicStaticDataset = function (data) {\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n    var Delimiter;\n    (function (Delimiter) {\n      Delimiter[Delimiter['SemiColon'] = 0] = 'SemiColon';\n      Delimiter[Delimiter['Space'] = 1] = 'Space';\n    }(Delimiter || (Delimiter = {})));\n    var split = function (rawFormats, delimiter) {\n      if (delimiter === Delimiter.SemiColon) {\n        return rawFormats.replace(/;$/, '').split(';');\n      } else {\n        return rawFormats.split(' ');\n      }\n    };\n    var buildBasicSettingsDataset = function (editor, settingName, defaults, delimiter) {\n      var rawFormats = editor.getParam(settingName, defaults, 'string');\n      var data = process(split(rawFormats, delimiter));\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n\n    var alignMenuItems = [\n      {\n        title: 'Left',\n        icon: 'align-left',\n        format: 'alignleft',\n        command: 'JustifyLeft'\n      },\n      {\n        title: 'Center',\n        icon: 'align-center',\n        format: 'aligncenter',\n        command: 'JustifyCenter'\n      },\n      {\n        title: 'Right',\n        icon: 'align-right',\n        format: 'alignright',\n        command: 'JustifyRight'\n      },\n      {\n        title: 'Justify',\n        icon: 'align-justify',\n        format: 'alignjustify',\n        command: 'JustifyFull'\n      }\n    ];\n    var getSpec = function (editor) {\n      var getMatchingValue = function () {\n        return find(alignMenuItems, function (item) {\n          return editor.formatter.match(item.format);\n        });\n      };\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (_format) {\n        return function () {\n          return Optional.none();\n        };\n      };\n      var updateSelectMenuIcon = function (comp) {\n        var match = getMatchingValue();\n        var alignment = match.fold(function () {\n          return 'left';\n        }, function (item) {\n          return item.title.toLowerCase();\n        });\n        emitWith(comp, updateMenuIcon, { icon: 'align-' + alignment });\n      };\n      var dataset = buildBasicStaticDataset(alignMenuItems);\n      var onAction = function (rawItem) {\n        return function () {\n          return find(alignMenuItems, function (item) {\n            return item.format === rawItem.format;\n          }).each(function (item) {\n            return editor.execCommand(item.command);\n          });\n        };\n      };\n      return {\n        tooltip: 'Align',\n        icon: Optional.some('align-left'),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        updateText: updateSelectMenuIcon,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createAlignSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec(editor));\n    };\n    var alignSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec(editor));\n      editor.ui.registry.addNestedMenuItem('align', {\n        text: backstage.shared.providers.translate('Align'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsFormats = 'Andale Mono=andale mono,monospace;' + 'Arial=arial,helvetica,sans-serif;' + 'Arial Black=arial black,sans-serif;' + 'Book Antiqua=book antiqua,palatino,serif;' + 'Comic Sans MS=comic sans ms,sans-serif;' + 'Courier New=courier new,courier,monospace;' + 'Georgia=georgia,palatino,serif;' + 'Helvetica=helvetica,arial,sans-serif;' + 'Impact=impact,sans-serif;' + 'Symbol=symbol;' + 'Tahoma=tahoma,arial,helvetica,sans-serif;' + 'Terminal=terminal,monaco,monospace;' + 'Times New Roman=times new roman,times,serif;' + 'Trebuchet MS=trebuchet ms,geneva,sans-serif;' + 'Verdana=verdana,geneva,sans-serif;' + 'Webdings=webdings;' + 'Wingdings=wingdings,zapf dingbats';\n    var systemStackFonts = [\n      '-apple-system',\n      'Segoe UI',\n      'Roboto',\n      'Helvetica Neue',\n      'sans-serif'\n    ];\n    var splitFonts = function (fontFamily) {\n      var fonts = fontFamily.split(/\\s*,\\s*/);\n      return map(fonts, function (font) {\n        return font.replace(/^['\"]+|['\"]+$/g, '');\n      });\n    };\n    var isSystemFontStack = function (fontFamily) {\n      var matchesSystemStack = function () {\n        var fonts = splitFonts(fontFamily.toLowerCase());\n        return forall(systemStackFonts, function (font) {\n          return fonts.indexOf(font.toLowerCase()) > -1;\n        });\n      };\n      return fontFamily.indexOf('-apple-system') === 0 && matchesSystemStack();\n    };\n    var getSpec$1 = function (editor) {\n      var getMatchingValue = function () {\n        var getFirstFont = function (fontFamily) {\n          return fontFamily ? splitFonts(fontFamily)[0] : '';\n        };\n        var fontFamily = editor.queryCommandValue('FontName');\n        var items = dataset.data;\n        var font = fontFamily ? fontFamily.toLowerCase() : '';\n        var matchOpt = find(items, function (item) {\n          var format = item.format;\n          return format.toLowerCase() === font || getFirstFont(format).toLowerCase() === getFirstFont(font).toLowerCase();\n        }).orThunk(function () {\n          if (isSystemFontStack(font)) {\n            return Optional.from({\n              title: 'System Font',\n              format: font\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n        return {\n          matchOpt: matchOpt,\n          font: fontFamily\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = function (item) {\n        return function () {\n          return Optional.some({\n            tag: 'div',\n            styles: item.indexOf('dings') === -1 ? { 'font-family': item } : {}\n          });\n        };\n      };\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontName', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, font = _a.font;\n        var text = matchOpt.fold(function () {\n          return font;\n        }, function (item) {\n          return item.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var dataset = buildBasicSettingsDataset(editor, 'font_formats', defaultFontsFormats, Delimiter.SemiColon);\n      return {\n        tooltip: 'Fonts',\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: getCurrentValue,\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        updateText: updateSelectMenuText,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: never\n      };\n    };\n    var createFontSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$1(editor));\n    };\n    var fontSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$1(editor));\n      editor.ui.registry.addNestedMenuItem('fontformats', {\n        text: backstage.shared.providers.translate('Fonts'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsizeFormats = '8pt 10pt 12pt 14pt 18pt 24pt 36pt';\n    var legacyFontSizes = {\n      '8pt': '1',\n      '10pt': '2',\n      '12pt': '3',\n      '14pt': '4',\n      '18pt': '5',\n      '24pt': '6',\n      '36pt': '7'\n    };\n    var keywordFontSizes = {\n      'xx-small': '7pt',\n      'x-small': '8pt',\n      'small': '10pt',\n      'medium': '12pt',\n      'large': '14pt',\n      'x-large': '18pt',\n      'xx-large': '24pt'\n    };\n    var round$1 = function (number, precision) {\n      var factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    };\n    var toPt = function (fontSize, precision) {\n      if (/[0-9.]+px$/.test(fontSize)) {\n        return round$1(parseInt(fontSize, 10) * 72 / 96, precision || 0) + 'pt';\n      } else {\n        return get$1(keywordFontSizes, fontSize).getOr(fontSize);\n      }\n    };\n    var toLegacy = function (fontSize) {\n      return get$1(legacyFontSizes, fontSize).getOr('');\n    };\n    var getSpec$2 = function (editor) {\n      var getMatchingValue = function () {\n        var matchOpt = Optional.none();\n        var items = dataset.data;\n        var fontSize = editor.queryCommandValue('FontSize');\n        if (fontSize) {\n          var _loop_1 = function (precision) {\n            var pt = toPt(fontSize, precision);\n            var legacy = toLegacy(pt);\n            matchOpt = find(items, function (item) {\n              return item.format === fontSize || item.format === pt || item.format === legacy;\n            });\n          };\n          for (var precision = 3; matchOpt.isNone() && precision >= 0; precision--) {\n            _loop_1(precision);\n          }\n        }\n        return {\n          matchOpt: matchOpt,\n          size: fontSize\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = constant(Optional.none);\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontSize', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, size = _a.size;\n        var text = matchOpt.fold(function () {\n          return size;\n        }, function (match) {\n          return match.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var dataset = buildBasicSettingsDataset(editor, 'fontsize_formats', defaultFontsizeFormats, Delimiter.Space);\n      return {\n        tooltip: 'Font sizes',\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getPreviewFor: getPreviewFor,\n        getCurrentValue: getCurrentValue,\n        onAction: onAction,\n        updateText: updateSelectMenuText,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: never\n      };\n    };\n    var createFontsizeSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$2(editor));\n    };\n    var fontsizeSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$2(editor));\n      editor.ui.registry.addNestedMenuItem('fontsizes', {\n        text: 'Font sizes',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var findNearest = function (editor, getStyles) {\n      var styles = getStyles();\n      var formats = map(styles, function (style) {\n        return style.format;\n      });\n      return Optional.from(editor.formatter.closest(formats)).bind(function (fmt) {\n        return find(styles, function (data) {\n          return data.format === fmt;\n        });\n      }).orThunk(function () {\n        return someIf(editor.formatter.match('p'), {\n          title: 'Paragraph',\n          format: 'p'\n        });\n      });\n    };\n\n    var revocable = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        set: set\n      };\n    };\n    var destroyable = function () {\n      return revocable(function (s) {\n        return s.destroy();\n      });\n    };\n    var unbindable = function () {\n      return revocable(function (s) {\n        return s.unbind();\n      });\n    };\n    var value$3 = function () {\n      var subject = Cell(Optional.none());\n      var clear = function () {\n        return subject.set(Optional.none());\n      };\n      var set = function (s) {\n        return subject.set(Optional.some(s));\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var onSetupFormatToggle = function (editor, name) {\n      return function (api) {\n        var boundCallback = unbindable();\n        var init = function () {\n          api.setActive(editor.formatter.match(name));\n          var binding = editor.formatter.formatChanged(name, api.setActive);\n          boundCallback.set(binding);\n        };\n        editor.initialized ? init() : editor.on('init', init);\n        return boundCallback.clear;\n      };\n    };\n    var onActionToggleFormat = function (editor) {\n      return function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('mceToggleFormat', false, rawItem.format);\n          });\n        };\n      };\n    };\n\n    var defaultBlocks = 'Paragraph=p;' + 'Heading 1=h1;' + 'Heading 2=h2;' + 'Heading 3=h3;' + 'Heading 4=h4;' + 'Heading 5=h5;' + 'Heading 6=h6;' + 'Preformatted=pre';\n    var getSpec$3 = function (editor) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var detectedFormat = findNearest(editor, function () {\n          return dataset.data;\n        });\n        var text = detectedFormat.fold(function () {\n          return 'Paragraph';\n        }, function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var dataset = buildBasicSettingsDataset(editor, 'block_formats', defaultBlocks, Delimiter.SemiColon);\n      return {\n        tooltip: 'Blocks',\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat(editor),\n        updateText: updateSelectMenuText,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createFormatSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$3(editor));\n    };\n    var formatSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$3(editor));\n      editor.ui.registry.addNestedMenuItem('blockformats', {\n        text: 'Blocks',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var getSpec$4 = function (editor, dataset) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          }) : Optional.none();\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var getFormatItems = function (fmt) {\n          var subs = fmt.items;\n          return subs !== undefined && subs.length > 0 ? bind(subs, getFormatItems) : [{\n              title: fmt.title,\n              format: fmt.format\n            }];\n        };\n        var flattenedItems = bind(getStyleFormats(editor), getFormatItems);\n        var detectedFormat = findNearest(editor, function () {\n          return flattenedItems;\n        });\n        var text = detectedFormat.fold(function () {\n          return 'Paragraph';\n        }, function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      return {\n        tooltip: 'Formats',\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat(editor),\n        updateText: updateSelectMenuText,\n        shouldHide: editor.getParam('style_formats_autohide', false, 'boolean'),\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        },\n        dataset: dataset\n      };\n    };\n    var createStyleSelect = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      return createSelectButton(editor, backstage, getSpec$4(editor, dataset));\n    };\n    var styleSelectMenu = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      var menuItems = createMenuItems(editor, backstage, getSpec$4(editor, dataset));\n      editor.ui.registry.addNestedMenuItem('formats', {\n        text: 'Formats',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultToolbar = [\n      {\n        name: 'history',\n        items: [\n          'undo',\n          'redo'\n        ]\n      },\n      {\n        name: 'styles',\n        items: ['styleselect']\n      },\n      {\n        name: 'formatting',\n        items: [\n          'bold',\n          'italic'\n        ]\n      },\n      {\n        name: 'alignment',\n        items: [\n          'alignleft',\n          'aligncenter',\n          'alignright',\n          'alignjustify'\n        ]\n      },\n      {\n        name: 'indentation',\n        items: [\n          'outdent',\n          'indent'\n        ]\n      },\n      {\n        name: 'permanent pen',\n        items: ['permanentpen']\n      },\n      {\n        name: 'comments',\n        items: ['addcomment']\n      }\n    ];\n    var renderFromBridge = function (bridgeBuilder, render) {\n      return function (spec, extras, editor) {\n        var internal = bridgeBuilder(spec).mapError(function (errInfo) {\n          return formatError(errInfo);\n        }).getOrDie();\n        return render(internal, extras, editor);\n      };\n    };\n    var types = {\n      button: renderFromBridge(createToolbarButton, function (s, extras) {\n        return renderToolbarButton(s, extras.backstage.shared.providers);\n      }),\n      togglebutton: renderFromBridge(createToggleButton, function (s, extras) {\n        return renderToolbarToggleButton(s, extras.backstage.shared.providers);\n      }),\n      menubutton: renderFromBridge(createMenuButton, function (s, extras) {\n        return renderMenuButton(s, 'tox-tbtn', extras.backstage, Optional.none());\n      }),\n      splitbutton: renderFromBridge(createSplitButton, function (s, extras) {\n        return renderSplitButton(s, extras.backstage.shared);\n      }),\n      grouptoolbarbutton: renderFromBridge(createGroupToolbarButton, function (s, extras, editor) {\n        var _a;\n        var buttons = editor.ui.registry.getAll().buttons;\n        var identify = function (toolbar) {\n          return identifyButtons(editor, {\n            buttons: buttons,\n            toolbar: toolbar,\n            allowToolbarGroups: false\n          }, extras, Optional.none());\n        };\n        var attributes = (_a = {}, _a[Attribute] = extras.backstage.shared.header.isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop, _a);\n        switch (getToolbarMode(editor)) {\n        case ToolbarMode.floating:\n          return renderFloatingToolbarButton(s, extras.backstage, identify, attributes);\n        default:\n          throw new Error('Toolbar groups are only supported when using floating toolbar mode');\n        }\n      }),\n      styleSelectButton: function (editor, extras) {\n        return createStyleSelect(editor, extras.backstage);\n      },\n      fontsizeSelectButton: function (editor, extras) {\n        return createFontsizeSelect(editor, extras.backstage);\n      },\n      fontSelectButton: function (editor, extras) {\n        return createFontSelect(editor, extras.backstage);\n      },\n      formatButton: function (editor, extras) {\n        return createFormatSelect(editor, extras.backstage);\n      },\n      alignMenuButton: function (editor, extras) {\n        return createAlignSelect(editor, extras.backstage);\n      }\n    };\n    var extractFrom = function (spec, extras, editor) {\n      return get$1(types, spec.type).fold(function () {\n        console.error('skipping button defined by', spec);\n        return Optional.none();\n      }, function (render) {\n        return Optional.some(render(spec, extras, editor));\n      });\n    };\n    var bespokeButtons = {\n      styleselect: types.styleSelectButton,\n      fontsizeselect: types.fontsizeSelectButton,\n      fontselect: types.fontSelectButton,\n      formatselect: types.formatButton,\n      align: types.alignMenuButton\n    };\n    var removeUnusedDefaults = function (buttons) {\n      var filteredItemGroups = map(defaultToolbar, function (group) {\n        var items = filter(group.items, function (subItem) {\n          return has(buttons, subItem) || has(bespokeButtons, subItem);\n        });\n        return {\n          name: group.name,\n          items: items\n        };\n      });\n      return filter(filteredItemGroups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n    var convertStringToolbar = function (strToolbar) {\n      var groupsStrings = strToolbar.split('|');\n      return map(groupsStrings, function (g) {\n        return { items: g.trim().split(' ') };\n      });\n    };\n    var isToolbarGroupSettingArray = function (toolbar) {\n      return isArrayOf(toolbar, function (t) {\n        return has(t, 'name') && has(t, 'items');\n      });\n    };\n    var createToolbar = function (toolbarConfig) {\n      var toolbar = toolbarConfig.toolbar;\n      var buttons = toolbarConfig.buttons;\n      if (toolbar === false) {\n        return [];\n      } else if (toolbar === undefined || toolbar === true) {\n        return removeUnusedDefaults(buttons);\n      } else if (isString(toolbar)) {\n        return convertStringToolbar(toolbar);\n      } else if (isToolbarGroupSettingArray(toolbar)) {\n        return toolbar;\n      } else {\n        console.error('Toolbar type should be string, string[], boolean or ToolbarGroup[]');\n        return [];\n      }\n    };\n    var lookupButton = function (editor, buttons, toolbarItem, allowToolbarGroups, extras, prefixes) {\n      return get$1(buttons, toolbarItem.toLowerCase()).orThunk(function () {\n        return prefixes.bind(function (ps) {\n          return findMap(ps, function (prefix) {\n            return get$1(buttons, prefix + toolbarItem.toLowerCase());\n          });\n        });\n      }).fold(function () {\n        return get$1(bespokeButtons, toolbarItem.toLowerCase()).map(function (r) {\n          return r(editor, extras);\n        }).orThunk(function () {\n          return Optional.none();\n        });\n      }, function (spec) {\n        if (spec.type === 'grouptoolbarbutton' && !allowToolbarGroups) {\n          console.warn('Ignoring the \\'' + toolbarItem + '\\' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.');\n          return Optional.none();\n        } else {\n          return extractFrom(spec, extras, editor);\n        }\n      });\n    };\n    var identifyButtons = function (editor, toolbarConfig, extras, prefixes) {\n      var toolbarGroups = createToolbar(toolbarConfig);\n      var groups = map(toolbarGroups, function (group) {\n        var items = bind(group.items, function (toolbarItem) {\n          return toolbarItem.trim().length === 0 ? [] : lookupButton(editor, toolbarConfig.buttons, toolbarItem, toolbarConfig.allowToolbarGroups, extras, prefixes).toArray();\n        });\n        return {\n          title: Optional.from(editor.translate(group.name)),\n          items: items\n        };\n      });\n      return filter(groups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n\n    var bubbleSize = 12;\n    var bubbleAlignments$1 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top']\n    };\n    var anchorOverrides = {\n      maxHeightFunction: expandable(),\n      maxWidthFunction: expandable$1()\n    };\n    var desktopAnchorSpecLayouts = {\n      onLtr: function () {\n        return [\n          north$1,\n          south$1,\n          northeast$1,\n          southeast$1,\n          northwest$1,\n          southwest$1,\n          north$3,\n          south$3,\n          northeast$3,\n          southeast$3,\n          northwest$3,\n          southwest$3\n        ];\n      },\n      onRtl: function () {\n        return [\n          north$1,\n          south$1,\n          northwest$1,\n          southwest$1,\n          northeast$1,\n          southeast$1,\n          north$3,\n          south$3,\n          northwest$3,\n          southwest$3,\n          northeast$3,\n          southeast$3\n        ];\n      }\n    };\n    var mobileAnchorSpecLayouts = {\n      onLtr: function () {\n        return [\n          south$1,\n          southeast$1,\n          southwest$1,\n          northeast$1,\n          northwest$1,\n          north$1,\n          north$3,\n          south$3,\n          northeast$3,\n          southeast$3,\n          northwest$3,\n          southwest$3\n        ];\n      },\n      onRtl: function () {\n        return [\n          south$1,\n          southwest$1,\n          southeast$1,\n          northwest$1,\n          northeast$1,\n          north$1,\n          north$3,\n          south$3,\n          northwest$3,\n          southwest$3,\n          northeast$3,\n          southeast$3\n        ];\n      }\n    };\n    var getAnchorLayout = function (position, isTouch) {\n      if (position === 'line') {\n        return {\n          bubble: nu$8(bubbleSize, 0, bubbleAlignments$1),\n          layouts: {\n            onLtr: function () {\n              return [east$1];\n            },\n            onRtl: function () {\n              return [west$1];\n            }\n          },\n          overrides: anchorOverrides\n        };\n      } else {\n        return {\n          bubble: nu$8(0, bubbleSize, bubbleAlignments$1),\n          layouts: isTouch ? mobileAnchorSpecLayouts : desktopAnchorSpecLayouts,\n          overrides: anchorOverrides\n        };\n      }\n    };\n    var register$4 = function (editor, registryContextToolbars, sink, extras) {\n      var isTouch = detect$3().deviceType.isTouch;\n      var contextbar = build$1(renderContextToolbar({\n        sink: sink,\n        onEscape: function () {\n          editor.focus();\n          return Optional.some(true);\n        }\n      }));\n      var getBounds = function () {\n        return getContextToolbarBounds(editor, extras.backstage.shared);\n      };\n      var isRangeOverlapping = function (aTop, aBottom, bTop, bBottom) {\n        return Math.max(aTop, bTop) <= Math.min(aBottom, bBottom);\n      };\n      var getLastElementVerticalBound = function () {\n        var nodeBounds = lastElement.get().filter(function (ele) {\n          return inBody(SugarElement.fromDom(ele));\n        }).map(function (ele) {\n          return ele.getBoundingClientRect();\n        }).getOrThunk(function () {\n          return editor.selection.getRng().getBoundingClientRect();\n        });\n        var diffTop = editor.inline ? get$9().top : absolute$1(SugarElement.fromDom(editor.getBody())).y;\n        return {\n          y: nodeBounds.top + diffTop,\n          bottom: nodeBounds.bottom + diffTop\n        };\n      };\n      var shouldContextToolbarHide = function () {\n        if (isTouch() && extras.backstage.isContextMenuOpen()) {\n          return true;\n        }\n        var lastElementBounds = getLastElementVerticalBound();\n        var contextToolbarBounds = getBounds();\n        return !isRangeOverlapping(lastElementBounds.y, lastElementBounds.bottom, contextToolbarBounds.y, contextToolbarBounds.bottom);\n      };\n      var close = function () {\n        lastAnchor.set(Optional.none());\n        InlineView.hide(contextbar);\n      };\n      var forceHide = function () {\n        InlineView.hide(contextbar);\n      };\n      var hideOrRepositionIfNecessary = function () {\n        lastAnchor.get().each(function (anchor) {\n          var contextBarEle = contextbar.element;\n          remove$6(contextBarEle, 'display');\n          if (shouldContextToolbarHide()) {\n            set$2(contextBarEle, 'display', 'none');\n          } else {\n            Positioning.positionWithinBounds(sink, anchor, contextbar, Optional.some(getBounds()));\n          }\n        });\n      };\n      var lastAnchor = Cell(Optional.none());\n      var lastElement = Cell(Optional.none());\n      var timer = Cell(null);\n      var wrapInPopDialog = function (toolbarSpec) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-pop__dialog']\n          },\n          components: [toolbarSpec],\n          behaviours: derive$1([\n            Keying.config({ mode: 'acyclic' }),\n            config('pop-dialog-wrap-events', [\n              runOnAttached(function (comp) {\n                editor.shortcuts.add('ctrl+F9', 'focus statusbar', function () {\n                  return Keying.focusIn(comp);\n                });\n              }),\n              runOnDetached(function (_comp) {\n                editor.shortcuts.remove('ctrl+F9');\n              })\n            ])\n          ])\n        };\n      };\n      var getScopes = cached(function () {\n        return categorise(registryContextToolbars, function (toolbarApi) {\n          var alloySpec = buildToolbar([toolbarApi]);\n          emitWith(contextbar, forwardSlideEvent, { forwardContents: wrapInPopDialog(alloySpec) });\n        });\n      });\n      var buildContextToolbarGroups = function (allButtons, ctx) {\n        return identifyButtons(editor, {\n          buttons: allButtons,\n          toolbar: ctx.items,\n          allowToolbarGroups: false\n        }, extras, Optional.some(['form:']));\n      };\n      var buildContextMenuGroups = function (ctx, providers) {\n        return ContextForm.buildInitGroups(ctx, providers);\n      };\n      var buildToolbar = function (toolbars) {\n        var buttons = editor.ui.registry.getAll().buttons;\n        var scopes = getScopes();\n        var allButtons = __assign(__assign({}, buttons), scopes.formNavigators);\n        var toolbarType = getToolbarMode(editor) === ToolbarMode.scrolling ? ToolbarMode.scrolling : ToolbarMode.default;\n        var initGroups = flatten(map(toolbars, function (ctx) {\n          return ctx.type === 'contexttoolbar' ? buildContextToolbarGroups(allButtons, ctx) : buildContextMenuGroups(ctx, extras.backstage.shared.providers);\n        }));\n        return renderToolbar({\n          type: toolbarType,\n          uid: generate$1('context-toolbar'),\n          initGroups: initGroups,\n          onEscape: Optional.none,\n          cyclicKeying: true,\n          providers: extras.backstage.shared.providers\n        });\n      };\n      editor.on(showContextToolbarEvent, function (e) {\n        var scopes = getScopes();\n        get$1(scopes.lookupTable, e.toolbarKey).each(function (ctx) {\n          launchContext([ctx], e.target === editor ? Optional.none() : Optional.some(e));\n          InlineView.getContent(contextbar).each(Keying.focusIn);\n        });\n      });\n      var getAnchor = function (position, element) {\n        var anchorage = position === 'node' ? extras.backstage.shared.anchors.node(element) : extras.backstage.shared.anchors.cursor();\n        return deepMerge(anchorage, getAnchorLayout(position, isTouch()));\n      };\n      var launchContext = function (toolbarApi, elem) {\n        clearTimer();\n        if (isTouch() && extras.backstage.isContextMenuOpen()) {\n          return;\n        }\n        var toolbarSpec = buildToolbar(toolbarApi);\n        var sElem = elem.map(SugarElement.fromDom);\n        var anchor = getAnchor(toolbarApi[0].position, sElem);\n        lastAnchor.set(Optional.some(anchor));\n        lastElement.set(elem);\n        var contextBarEle = contextbar.element;\n        remove$6(contextBarEle, 'display');\n        InlineView.showWithinBounds(contextbar, anchor, wrapInPopDialog(toolbarSpec), function () {\n          return Optional.some(getBounds());\n        });\n        if (shouldContextToolbarHide()) {\n          set$2(contextBarEle, 'display', 'none');\n        }\n      };\n      var launchContextToolbar = function () {\n        if (!editor.hasFocus()) {\n          return;\n        }\n        var scopes = getScopes();\n        lookup$1(scopes, editor).fold(close, function (info) {\n          launchContext(info.toolbars, Optional.some(info.elem.dom));\n        });\n      };\n      var clearTimer = function () {\n        var current = timer.get();\n        if (current !== null) {\n          global$2.clearTimeout(current);\n          timer.set(null);\n        }\n      };\n      var asyncOpen = function () {\n        clearTimer();\n        timer.set(global$2.setEditorTimeout(editor, launchContextToolbar, 0));\n      };\n      editor.on('init', function () {\n        editor.on(hideContextToolbarEvent, forceHide);\n        editor.on('ScrollContent ScrollWindow longpress', hideOrRepositionIfNecessary);\n        editor.on('click keyup focus SetContent ObjectResized ResizeEditor', function () {\n          asyncOpen();\n        });\n        editor.on('focusout', function (_e) {\n          global$2.setEditorTimeout(editor, function () {\n            if (search(sink.element).isNone() && search(contextbar.element).isNone()) {\n              close();\n            }\n          }, 0);\n        });\n        editor.on('SwitchMode', function () {\n          if (editor.mode.isReadOnly()) {\n            close();\n          }\n        });\n        editor.on('AfterProgressState', function (event) {\n          if (event.state) {\n            close();\n          } else if (editor.hasFocus()) {\n            asyncOpen();\n          }\n        });\n        editor.on('NodeChange', function (_e) {\n          search(contextbar.element).fold(asyncOpen, noop);\n        });\n      });\n    };\n\n    var setup$3 = function (editor, mothership, uiMothership) {\n      var broadcastEvent = function (name, evt) {\n        each([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastEvent(name, evt);\n        });\n      };\n      var broadcastOn = function (channel, message) {\n        each([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastOn([channel], message);\n        });\n      };\n      var fireDismissPopups = function (evt) {\n        return broadcastOn(dismissPopups(), { target: evt.target });\n      };\n      var onTouchstart = bind$3(SugarElement.fromDom(document), 'touchstart', fireDismissPopups);\n      var onTouchmove = bind$3(SugarElement.fromDom(document), 'touchmove', function (evt) {\n        return broadcastEvent(documentTouchmove(), evt);\n      });\n      var onTouchend = bind$3(SugarElement.fromDom(document), 'touchend', function (evt) {\n        return broadcastEvent(documentTouchend(), evt);\n      });\n      var onMousedown = bind$3(SugarElement.fromDom(document), 'mousedown', fireDismissPopups);\n      var onMouseup = bind$3(SugarElement.fromDom(document), 'mouseup', function (evt) {\n        if (evt.raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: evt.target });\n        }\n      });\n      var onContentClick = function (raw) {\n        return broadcastOn(dismissPopups(), { target: SugarElement.fromDom(raw.target) });\n      };\n      var onContentMouseup = function (raw) {\n        if (raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: SugarElement.fromDom(raw.target) });\n        }\n      };\n      var onWindowScroll = function (evt) {\n        return broadcastEvent(windowScroll(), fromRawEvent$1(evt));\n      };\n      var onWindowResize = function (evt) {\n        broadcastOn(repositionPopups(), {});\n        broadcastEvent(windowResize(), fromRawEvent$1(evt));\n      };\n      var onEditorResize = function () {\n        return broadcastOn(repositionPopups(), {});\n      };\n      var onEditorProgress = function (evt) {\n        if (evt.state) {\n          broadcastOn(dismissPopups(), { target: SugarElement.fromDom(editor.getContainer()) });\n        }\n      };\n      editor.on('PostRender', function () {\n        editor.on('click', onContentClick);\n        editor.on('tap', onContentClick);\n        editor.on('mouseup', onContentMouseup);\n        editor.on('ScrollWindow', onWindowScroll);\n        editor.on('ResizeWindow', onWindowResize);\n        editor.on('ResizeEditor', onEditorResize);\n        editor.on('AfterProgressState', onEditorProgress);\n      });\n      editor.on('remove', function () {\n        editor.off('click', onContentClick);\n        editor.off('tap', onContentClick);\n        editor.off('mouseup', onContentMouseup);\n        editor.off('ScrollWindow', onWindowScroll);\n        editor.off('ResizeWindow', onWindowResize);\n        editor.off('ResizeEditor', onEditorResize);\n        editor.off('AfterProgressState', onEditorProgress);\n        onMousedown.unbind();\n        onTouchstart.unbind();\n        onTouchmove.unbind();\n        onTouchend.unbind();\n        onMouseup.unbind();\n      });\n      editor.on('detach', function () {\n        detachSystem(mothership);\n        detachSystem(uiMothership);\n        mothership.destroy();\n        uiMothership.destroy();\n      });\n    };\n\n    var parts$d = AlloyParts;\n    var partType$1 = PartType;\n\n    var schema$r = constant([\n      defaulted$1('shell', false),\n      strict$1('makeItem'),\n      defaulted$1('setupItem', noop),\n      SketchBehaviours.field('listBehaviours', [Replacing])\n    ]);\n    var customListDetail = function () {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var itemsPart = optional({\n      name: 'items',\n      overrides: customListDetail\n    });\n    var parts$e = constant([itemsPart]);\n    var name$2 = constant('CustomList');\n\n    var factory$f = function (detail, components, _spec, _external) {\n      var setItems = function (list, items) {\n        getListContainer(list).fold(function () {\n          console.error('Custom List was defined to not be a shell, but no item container was specified in components');\n          throw new Error('Custom List was defined to not be a shell, but no item container was specified in components');\n        }, function (container) {\n          var itemComps = Replacing.contents(container);\n          var numListsRequired = items.length;\n          var numListsToAdd = numListsRequired - itemComps.length;\n          var itemsToAdd = numListsToAdd > 0 ? range(numListsToAdd, function () {\n            return detail.makeItem();\n          }) : [];\n          var itemsToRemove = itemComps.slice(numListsRequired);\n          each(itemsToRemove, function (item) {\n            return Replacing.remove(container, item);\n          });\n          each(itemsToAdd, function (item) {\n            return Replacing.append(container, item);\n          });\n          var builtLists = Replacing.contents(container);\n          each(builtLists, function (item, i) {\n            detail.setupItem(list, item, items[i], i);\n          });\n        });\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      var getListContainer = function (component) {\n        return detail.shell ? Optional.some(component) : getPart(component, detail, 'items');\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.listBehaviours, extra.behaviours),\n        apis: { setItems: setItems }\n      };\n    };\n    var CustomList = composite$1({\n      name: name$2(),\n      configFields: schema$r(),\n      partFields: parts$e(),\n      factory: factory$f,\n      apis: {\n        setItems: function (apis, list, items) {\n          apis.setItems(list, items);\n        }\n      }\n    });\n\n    var setup$4 = noop;\n    var isDocked = never;\n    var getBehaviours$2 = constant([]);\n\n    var StaticHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$4,\n        isDocked: isDocked,\n        getBehaviours: getBehaviours$2\n    });\n\n    var getOffsetParent = function (element) {\n      var isFixed = getRaw(element, 'position').is('fixed');\n      var offsetParent$1 = isFixed ? Optional.none() : offsetParent(element);\n      return offsetParent$1.orThunk(function () {\n        var marker = SugarElement.fromTag('span');\n        return parent(element).bind(function (parent) {\n          append(parent, marker);\n          var offsetParent$1 = offsetParent(marker);\n          remove(marker);\n          return offsetParent$1;\n        });\n      });\n    };\n    var getOrigin = function (element) {\n      return getOffsetParent(element).map(absolute).getOrThunk(function () {\n        return SugarPosition(0, 0);\n      });\n    };\n\n    var morphAdt = Adt.generate([\n      { static: [] },\n      { absolute: ['positionCss'] },\n      { fixed: ['positionCss'] }\n    ]);\n    var appear = function (component, contextualInfo) {\n      var elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$4(elem, contextualInfo.fadeOutClass);\n      add$2(elem, contextualInfo.fadeInClass);\n      contextualInfo.onShow(component);\n    };\n    var disappear = function (component, contextualInfo) {\n      var elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$4(elem, contextualInfo.fadeInClass);\n      add$2(elem, contextualInfo.fadeOutClass);\n      contextualInfo.onHide(component);\n    };\n    var isPartiallyVisible = function (box, viewport) {\n      return box.y < viewport.bottom && box.bottom > viewport.y;\n    };\n    var isTopCompletelyVisible = function (box, viewport) {\n      return box.y >= viewport.y;\n    };\n    var isBottomCompletelyVisible = function (box, viewport) {\n      return box.bottom <= viewport.bottom;\n    };\n    var isVisibleForModes = function (modes, box, viewport) {\n      return forall(modes, function (mode) {\n        switch (mode) {\n        case 'bottom':\n          return isBottomCompletelyVisible(box, viewport);\n        case 'top':\n          return isTopCompletelyVisible(box, viewport);\n        }\n      });\n    };\n    var getPrior = function (elem, state) {\n      return state.getInitialPosition().map(function (pos) {\n        return bounds$1(pos.bounds.x, pos.bounds.y, get$8(elem), get$7(elem));\n      });\n    };\n    var storePrior = function (elem, box, state) {\n      state.setInitialPosition(Optional.some({\n        style: getAllRaw(elem),\n        position: get$5(elem, 'position') || 'static',\n        bounds: box\n      }));\n    };\n    var revertToOriginal = function (elem, box$1, state) {\n      return state.getInitialPosition().bind(function (position) {\n        state.setInitialPosition(Optional.none());\n        switch (position.position) {\n        case 'static':\n          return Optional.some(morphAdt.static());\n        case 'absolute':\n          var offsetBox_1 = getOffsetParent(elem).map(box).getOrThunk(function () {\n            return box(body());\n          });\n          return Optional.some(morphAdt.absolute(NuPositionCss('absolute', get$1(position.style, 'left').map(function (_left) {\n            return box$1.x - offsetBox_1.x;\n          }), get$1(position.style, 'top').map(function (_top) {\n            return box$1.y - offsetBox_1.y;\n          }), get$1(position.style, 'right').map(function (_right) {\n            return offsetBox_1.right - box$1.right;\n          }), get$1(position.style, 'bottom').map(function (_bottom) {\n            return offsetBox_1.bottom - box$1.bottom;\n          }))));\n        default:\n          return Optional.none();\n        }\n      });\n    };\n    var morphToOriginal = function (elem, viewport, state) {\n      return getPrior(elem, state).filter(function (box) {\n        return isVisibleForModes(state.getModes(), box, viewport);\n      }).bind(function (box) {\n        return revertToOriginal(elem, box, state);\n      });\n    };\n    var morphToFixed = function (elem, viewport, state) {\n      var box$1 = box(elem);\n      if (!isVisibleForModes(state.getModes(), box$1, viewport)) {\n        storePrior(elem, box$1, state);\n        var winBox = win();\n        var left = box$1.x - winBox.x;\n        var top_1 = viewport.y - winBox.y;\n        var bottom = winBox.bottom - viewport.bottom;\n        var isTop = box$1.y <= viewport.y;\n        return Optional.some(morphAdt.fixed(NuPositionCss('fixed', Optional.some(left), isTop ? Optional.some(top_1) : Optional.none(), Optional.none(), !isTop ? Optional.some(bottom) : Optional.none())));\n      } else {\n        return Optional.none();\n      }\n    };\n    var getMorph = function (component, viewport, state) {\n      var elem = component.element;\n      var isDocked = getRaw(elem, 'position').is('fixed');\n      return isDocked ? morphToOriginal(elem, viewport, state) : morphToFixed(elem, viewport, state);\n    };\n    var getMorphToOriginal = function (component, state) {\n      var elem = component.element;\n      return getPrior(elem, state).bind(function (box) {\n        return revertToOriginal(elem, box, state);\n      });\n    };\n\n    var morphToStatic = function (component, config) {\n      each([\n        'left',\n        'right',\n        'top',\n        'bottom',\n        'position'\n      ], function (prop) {\n        return remove$6(component.element, prop);\n      });\n      config.onUndocked(component);\n    };\n    var morphToCoord = function (component, config, position) {\n      applyPositionCss(component.element, position);\n      var method = position.position === 'fixed' ? config.onDocked : config.onUndocked;\n      method(component);\n    };\n    var updateVisibility = function (component, config, state, viewport, morphToDocked) {\n      if (morphToDocked === void 0) {\n        morphToDocked = false;\n      }\n      config.contextual.each(function (contextInfo) {\n        contextInfo.lazyContext(component).each(function (box) {\n          var isVisible = isPartiallyVisible(box, viewport);\n          if (isVisible !== state.isVisible()) {\n            state.setVisible(isVisible);\n            if (morphToDocked && !isVisible) {\n              add$3(component.element, [contextInfo.fadeOutClass]);\n              contextInfo.onHide(component);\n            } else {\n              var method = isVisible ? appear : disappear;\n              method(component, contextInfo);\n            }\n          }\n        });\n      });\n    };\n    var refreshInternal = function (component, config, state) {\n      var viewport = config.lazyViewport(component);\n      var isDocked = state.isDocked();\n      if (isDocked) {\n        updateVisibility(component, config, state, viewport);\n      }\n      getMorph(component, viewport, state).each(function (morph) {\n        state.setDocked(!isDocked);\n        morph.fold(function () {\n          return morphToStatic(component, config);\n        }, function (position) {\n          return morphToCoord(component, config, position);\n        }, function (position) {\n          updateVisibility(component, config, state, viewport, true);\n          morphToCoord(component, config, position);\n        });\n      });\n    };\n    var resetInternal = function (component, config, state) {\n      var elem = component.element;\n      state.setDocked(false);\n      getMorphToOriginal(component, state).each(function (morph) {\n        morph.fold(function () {\n          return morphToStatic(component, config);\n        }, function (position) {\n          return morphToCoord(component, config, position);\n        }, noop);\n      });\n      state.setVisible(true);\n      config.contextual.each(function (contextInfo) {\n        remove$5(elem, [\n          contextInfo.fadeInClass,\n          contextInfo.fadeOutClass,\n          contextInfo.transitionClass\n        ]);\n        contextInfo.onShow(component);\n      });\n      refresh$4(component, config, state);\n    };\n    var refresh$4 = function (component, config, state) {\n      if (component.getSystem().isConnected()) {\n        refreshInternal(component, config, state);\n      }\n    };\n    var reset = function (component, config, state) {\n      if (state.isDocked()) {\n        resetInternal(component, config, state);\n      }\n    };\n    var isDocked$1 = function (component, config, state) {\n      return state.isDocked();\n    };\n    var setModes = function (component, config, state, modes) {\n      return state.setModes(modes);\n    };\n    var getModes = function (component, config, state) {\n      return state.getModes();\n    };\n\n    var DockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$4,\n        reset: reset,\n        isDocked: isDocked$1,\n        getModes: getModes,\n        setModes: setModes\n    });\n\n    var events$f = function (dockInfo, dockState) {\n      return derive([\n        runOnSource(transitionend(), function (component, simulatedEvent) {\n          dockInfo.contextual.each(function (contextInfo) {\n            if (has$2(component.element, contextInfo.transitionClass)) {\n              remove$5(component.element, [\n                contextInfo.transitionClass,\n                contextInfo.fadeInClass\n              ]);\n              var notify = dockState.isVisible() ? contextInfo.onShown : contextInfo.onHidden;\n              notify(component);\n            }\n            simulatedEvent.stop();\n          });\n        }),\n        run(windowScroll(), function (component, _) {\n          refresh$4(component, dockInfo, dockState);\n        }),\n        run(windowResize(), function (component, _) {\n          reset(component, dockInfo, dockState);\n        })\n      ]);\n    };\n\n    var ActiveDocking = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$f\n    });\n\n    var DockingSchema = [\n      optionObjOf('contextual', [\n        strictString('fadeInClass'),\n        strictString('fadeOutClass'),\n        strictString('transitionClass'),\n        strictFunction('lazyContext'),\n        onHandler('onShow'),\n        onHandler('onShown'),\n        onHandler('onHide'),\n        onHandler('onHidden')\n      ]),\n      defaultedFunction('lazyViewport', win),\n      defaultedArrayOf('modes', [\n        'top',\n        'bottom'\n      ], string),\n      onHandler('onDocked'),\n      onHandler('onUndocked')\n    ];\n\n    var init$b = function (spec) {\n      var docked = Cell(false);\n      var visible = Cell(true);\n      var initialBounds = Cell(Optional.none());\n      var modes = Cell(spec.modes);\n      var readState = function () {\n        return 'docked:  ' + docked.get() + ', visible: ' + visible.get() + ', modes: ' + modes.get().join(',');\n      };\n      return nu$5({\n        isDocked: docked.get,\n        setDocked: docked.set,\n        getInitialPosition: initialBounds.get,\n        setInitialPosition: initialBounds.set,\n        isVisible: visible.get,\n        setVisible: visible.set,\n        getModes: modes.get,\n        setModes: modes.set,\n        readState: readState\n      });\n    };\n\n    var DockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$b\n    });\n\n    var Docking = create$1({\n      fields: DockingSchema,\n      name: 'docking',\n      active: ActiveDocking,\n      apis: DockingApis,\n      state: DockingState\n    });\n\n    var visibility = {\n      fadeInClass: 'tox-editor-dock-fadein',\n      fadeOutClass: 'tox-editor-dock-fadeout',\n      transitionClass: 'tox-editor-dock-transition'\n    };\n    var editorStickyOnClass = 'tox-tinymce--toolbar-sticky-on';\n    var editorStickyOffClass = 'tox-tinymce--toolbar-sticky-off';\n    var scrollFromBehindHeader = function (e, containerHeader) {\n      var doc = owner(containerHeader);\n      var viewHeight = doc.dom.defaultView.innerHeight;\n      var scrollPos = get$9(doc);\n      var markerElement = SugarElement.fromDom(e.elm);\n      var markerPos = absolute$1(markerElement);\n      var markerHeight = get$7(markerElement);\n      var markerTop = markerPos.y;\n      var markerBottom = markerTop + markerHeight;\n      var editorHeaderPos = absolute(containerHeader);\n      var editorHeaderHeight = get$7(containerHeader);\n      var editorHeaderTop = editorHeaderPos.top;\n      var editorHeaderBottom = editorHeaderTop + editorHeaderHeight;\n      var editorHeaderDockedAtTop = Math.abs(editorHeaderTop - scrollPos.top) < 2;\n      var editorHeaderDockedAtBottom = Math.abs(editorHeaderBottom - (scrollPos.top + viewHeight)) < 2;\n      if (editorHeaderDockedAtTop && markerTop < editorHeaderBottom) {\n        to(scrollPos.left, markerTop - editorHeaderHeight, doc);\n      } else if (editorHeaderDockedAtBottom && markerBottom > editorHeaderTop) {\n        var y = markerTop - viewHeight + markerHeight + editorHeaderHeight;\n        to(scrollPos.left, y, doc);\n      }\n    };\n    var isDockedMode = function (header, mode) {\n      return contains(Docking.getModes(header), mode);\n    };\n    var updateIframeContentFlow = function (header) {\n      var getOccupiedHeight = function (elm) {\n        return getOuter$1(elm) + (parseInt(get$5(elm, 'margin-top'), 10) || 0) + (parseInt(get$5(elm, 'margin-bottom'), 10) || 0);\n      };\n      var elm = header.element;\n      parent(elm).each(function (parentElem) {\n        var padding = 'padding-' + Docking.getModes(header)[0];\n        if (Docking.isDocked(header)) {\n          var parentWidth = get$8(parentElem);\n          set$2(elm, 'width', parentWidth + 'px');\n          set$2(parentElem, padding, getOccupiedHeight(elm) + 'px');\n        } else {\n          remove$6(elm, 'width');\n          remove$6(parentElem, padding);\n        }\n      });\n    };\n    var updateSinkVisibility = function (sinkElem, visible) {\n      if (visible) {\n        remove$4(sinkElem, visibility.fadeOutClass);\n        add$3(sinkElem, [\n          visibility.transitionClass,\n          visibility.fadeInClass\n        ]);\n      } else {\n        remove$4(sinkElem, visibility.fadeInClass);\n        add$3(sinkElem, [\n          visibility.fadeOutClass,\n          visibility.transitionClass\n        ]);\n      }\n    };\n    var updateEditorClasses = function (editor, docked) {\n      var editorContainer = SugarElement.fromDom(editor.getContainer());\n      if (docked) {\n        add$2(editorContainer, editorStickyOnClass);\n        remove$4(editorContainer, editorStickyOffClass);\n      } else {\n        add$2(editorContainer, editorStickyOffClass);\n        remove$4(editorContainer, editorStickyOnClass);\n      }\n    };\n    var restoreFocus = function (headerElem, focusedElem) {\n      var ownerDoc = owner(focusedElem);\n      active(ownerDoc).filter(function (activeElm) {\n        return !eq$1(focusedElem, activeElm);\n      }).filter(function (activeElm) {\n        return eq$1(activeElm, SugarElement.fromDom(ownerDoc.dom.body)) || contains$2(headerElem, activeElm);\n      }).each(function () {\n        return focus$1(focusedElem);\n      });\n    };\n    var findFocusedElem = function (rootElm, lazySink) {\n      return search(rootElm).orThunk(function () {\n        return lazySink().toOptional().bind(function (sink) {\n          return search(sink.element);\n        });\n      });\n    };\n    var setup$5 = function (editor, sharedBackstage, lazyHeader) {\n      if (!editor.inline) {\n        if (!sharedBackstage.header.isPositionedAtTop()) {\n          editor.on('ResizeEditor', function () {\n            lazyHeader().each(Docking.reset);\n          });\n        }\n        editor.on('ResizeWindow ResizeEditor', function () {\n          lazyHeader().each(updateIframeContentFlow);\n        });\n        editor.on('SkinLoaded', function () {\n          lazyHeader().each(function (comp) {\n            Docking.isDocked(comp) ? Docking.reset(comp) : Docking.refresh(comp);\n          });\n        });\n        editor.on('FullscreenStateChanged', function () {\n          lazyHeader().each(Docking.reset);\n        });\n      }\n      editor.on('AfterScrollIntoView', function (e) {\n        lazyHeader().each(function (header) {\n          Docking.refresh(header);\n          var headerElem = header.element;\n          if (isVisible(headerElem)) {\n            scrollFromBehindHeader(e, headerElem);\n          }\n        });\n      });\n      editor.on('PostRender', function () {\n        updateEditorClasses(editor, false);\n      });\n    };\n    var isDocked$2 = function (lazyHeader) {\n      return lazyHeader().map(Docking.isDocked).getOr(false);\n    };\n    var getIframeBehaviours = function () {\n      var _a;\n      return [Receiving.config({ channels: (_a = {}, _a[toolbarHeightChange()] = { onReceive: updateIframeContentFlow }, _a) })];\n    };\n    var getBehaviours$3 = function (editor, sharedBackstage) {\n      var focusedElm = Cell(Optional.none());\n      var lazySink = sharedBackstage.getSink;\n      var runOnSinkElement = function (f) {\n        lazySink().each(function (sink) {\n          return f(sink.element);\n        });\n      };\n      var onDockingSwitch = function (comp) {\n        if (!editor.inline) {\n          updateIframeContentFlow(comp);\n        }\n        updateEditorClasses(editor, Docking.isDocked(comp));\n        comp.getSystem().broadcastOn([repositionPopups()], {});\n        lazySink().each(function (sink) {\n          return sink.getSystem().broadcastOn([repositionPopups()], {});\n        });\n      };\n      var additionalBehaviours = editor.inline ? [] : getIframeBehaviours();\n      return __spreadArrays([\n        Focusing.config({}),\n        Docking.config({\n          contextual: __assign({\n            lazyContext: function (comp) {\n              var headerHeight = getOuter$1(comp.element);\n              var container = editor.inline ? editor.getContentAreaContainer() : editor.getContainer();\n              var box$1 = box(SugarElement.fromDom(container));\n              var boxHeight = box$1.height - headerHeight;\n              var topBound = box$1.y + (isDockedMode(comp, 'top') ? 0 : headerHeight);\n              return Optional.some(bounds$1(box$1.x, topBound, box$1.width, boxHeight));\n            },\n            onShow: function () {\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, true);\n              });\n            },\n            onShown: function (comp) {\n              runOnSinkElement(function (elem) {\n                return remove$5(elem, [\n                  visibility.transitionClass,\n                  visibility.fadeInClass\n                ]);\n              });\n              focusedElm.get().each(function (elem) {\n                restoreFocus(comp.element, elem);\n                focusedElm.set(Optional.none());\n              });\n            },\n            onHide: function (comp) {\n              focusedElm.set(findFocusedElem(comp.element, lazySink));\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, false);\n              });\n            },\n            onHidden: function () {\n              runOnSinkElement(function (elem) {\n                return remove$5(elem, [visibility.transitionClass]);\n              });\n            }\n          }, visibility),\n          modes: [sharedBackstage.header.getDockingMode()],\n          onDocked: onDockingSwitch,\n          onUndocked: onDockingSwitch\n        })\n      ], additionalBehaviours);\n    };\n\n    var StickyHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$5,\n        isDocked: isDocked$2,\n        getBehaviours: getBehaviours$3\n    });\n\n    var renderHeader = function (spec) {\n      var editor = spec.editor;\n      var getBehaviours = spec.sticky ? getBehaviours$3 : getBehaviours$2;\n      return {\n        uid: spec.uid,\n        dom: spec.dom,\n        components: spec.components,\n        behaviours: derive$1(getBehaviours(editor, spec.sharedBackstage))\n      };\n    };\n\n    var factory$g = function (detail, spec) {\n      var setMenus = function (comp, menus) {\n        var newMenus = map(menus, function (m) {\n          var buttonSpec = {\n            type: 'menubutton',\n            text: m.text,\n            fetch: function (callback) {\n              callback(m.getItems());\n            }\n          };\n          var internal = createMenuButton(buttonSpec).mapError(function (errInfo) {\n            return formatError(errInfo);\n          }).getOrDie();\n          return renderMenuButton(internal, 'tox-mbtn', spec.backstage, Optional.some('menuitem'));\n        });\n        Replacing.set(comp, newMenus);\n      };\n      var apis = {\n        focus: Keying.focusIn,\n        setMenus: setMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: [],\n        behaviours: derive$1([\n          Replacing.config({}),\n          config('menubar-events', [\n            runOnAttached(function (component) {\n              detail.onSetup(component);\n            }),\n            run(mouseover(), function (comp, se) {\n              descendant$1(comp.element, '.' + 'tox-mbtn--active').each(function (activeButton) {\n                closest$3(se.event.target, '.' + 'tox-mbtn').each(function (hoveredButton) {\n                  if (!eq$1(activeButton, hoveredButton)) {\n                    comp.getSystem().getByDom(activeButton).each(function (activeComp) {\n                      comp.getSystem().getByDom(hoveredButton).each(function (hoveredComp) {\n                        Dropdown.expand(hoveredComp);\n                        Dropdown.close(activeComp);\n                        Focusing.focus(hoveredComp);\n                      });\n                    });\n                  }\n                });\n              });\n            }),\n            run(focusShifted(), function (comp, se) {\n              se.event.prevFocus.bind(function (prev) {\n                return comp.getSystem().getByDom(prev).toOptional();\n              }).each(function (prev) {\n                se.event.newFocus.bind(function (nu) {\n                  return comp.getSystem().getByDom(nu).toOptional();\n                }).each(function (nu) {\n                  if (Dropdown.isOpen(prev)) {\n                    Dropdown.expand(nu);\n                    Dropdown.close(prev);\n                  }\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'flow',\n            selector: '.' + 'tox-mbtn',\n            onEscape: function (comp) {\n              detail.onEscape(comp);\n              return Optional.some(true);\n            }\n          }),\n          Tabstopping.config({})\n        ]),\n        apis: apis,\n        domModification: { attributes: { role: 'menubar' } }\n      };\n    };\n    var SilverMenubar = single$2({\n      factory: factory$g,\n      name: 'silver.Menubar',\n      configFields: [\n        strict$1('dom'),\n        strict$1('uid'),\n        strict$1('onEscape'),\n        strict$1('backstage'),\n        defaulted$1('onSetup', noop)\n      ],\n      apis: {\n        focus: function (apis, comp) {\n          apis.focus(comp);\n        },\n        setMenus: function (apis, comp, menus) {\n          apis.setMenus(comp, menus);\n        }\n      }\n    });\n\n    var owner$4 = 'container';\n    var schema$s = [field$1('slotBehaviours', [])];\n    var getPartName$1 = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch$2 = function (sSpec) {\n      var parts = function () {\n        var record = [];\n        var slot = function (name, config) {\n          record.push(name);\n          return generateOne(owner$4, getPartName$1(name), config);\n        };\n        return {\n          slot: slot,\n          record: function () {\n            return record;\n          }\n        };\n      }();\n      var spec = sSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName$1(n)\n        });\n      });\n      return composite(owner$4, schema$s, fieldParts, make$7, spec);\n    };\n    var make$7 = function (detail, components) {\n      var getSlotNames = function (_) {\n        return getAllPartNames(detail);\n      };\n      var getSlot = function (container, key) {\n        return getPart(container, detail, key);\n      };\n      var onSlot = function (f, def) {\n        return function (container, key) {\n          return getPart(container, detail, key).map(function (slot) {\n            return f(slot, key);\n          }).getOr(def);\n        };\n      };\n      var onSlots = function (f) {\n        return function (container, keys) {\n          each(keys, function (key) {\n            return f(container, key);\n          });\n        };\n      };\n      var doShowing = function (comp, _key) {\n        return get$3(comp.element, 'aria-hidden') !== 'true';\n      };\n      var doShow = function (comp, key) {\n        if (!doShowing(comp)) {\n          var element = comp.element;\n          remove$6(element, 'display');\n          remove$1(element, 'aria-hidden');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: true\n          });\n        }\n      };\n      var doHide = function (comp, key) {\n        if (doShowing(comp)) {\n          var element = comp.element;\n          set$2(element, 'display', 'none');\n          set$1(element, 'aria-hidden', 'true');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: false\n          });\n        }\n      };\n      var isShowing = onSlot(doShowing, false);\n      var hideSlot = onSlot(doHide);\n      var hideSlots = onSlots(hideSlot);\n      var hideAllSlots = function (container) {\n        return hideSlots(container, getSlotNames());\n      };\n      var showSlot = onSlot(doShow);\n      var apis = {\n        getSlotNames: getSlotNames,\n        getSlot: getSlot,\n        isShowing: isShowing,\n        hideSlot: hideSlot,\n        hideAllSlots: hideAllSlots,\n        showSlot: showSlot\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$d(detail.slotBehaviours),\n        apis: apis\n      };\n    };\n    var slotApis = map$2({\n      getSlotNames: function (apis, c) {\n        return apis.getSlotNames(c);\n      },\n      getSlot: function (apis, c, key) {\n        return apis.getSlot(c, key);\n      },\n      isShowing: function (apis, c, key) {\n        return apis.isShowing(c, key);\n      },\n      hideSlot: function (apis, c, key) {\n        return apis.hideSlot(c, key);\n      },\n      hideAllSlots: function (apis, c) {\n        return apis.hideAllSlots(c);\n      },\n      showSlot: function (apis, c, key) {\n        return apis.showSlot(c, key);\n      }\n    }, function (value) {\n      return makeApi(value);\n    });\n    var SlotContainer = __assign(__assign({}, slotApis), { sketch: sketch$2 });\n\n    var sidebarSchema = objOf([\n      optionString('icon'),\n      optionString('tooltip'),\n      defaultedFunction('onShow', noop),\n      defaultedFunction('onHide', noop),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ]);\n    var createSidebar = function (spec) {\n      return asRaw('sidebar', sidebarSchema, spec);\n    };\n\n    var setup$6 = function (editor) {\n      var sidebars = editor.ui.registry.getAll().sidebars;\n      each(keys(sidebars), function (name) {\n        var spec = sidebars[name];\n        var isActive = function () {\n          return Optional.from(editor.queryCommandValue('ToggleSidebar')).is(name);\n        };\n        editor.ui.registry.addToggleButton(name, {\n          icon: spec.icon,\n          tooltip: spec.tooltip,\n          onAction: function (buttonApi) {\n            editor.execCommand('ToggleSidebar', false, name);\n            buttonApi.setActive(isActive());\n          },\n          onSetup: function (buttonApi) {\n            var handleToggle = function () {\n              return buttonApi.setActive(isActive());\n            };\n            editor.on('ToggleSidebar', handleToggle);\n            return function () {\n              editor.off('ToggleSidebar', handleToggle);\n            };\n          }\n        });\n      });\n    };\n    var getApi = function (comp) {\n      return {\n        element: function () {\n          return comp.element.dom;\n        }\n      };\n    };\n    var makePanels = function (parts, panelConfigs) {\n      var specs = map(keys(panelConfigs), function (name) {\n        var spec = panelConfigs[name];\n        var bridged = getOrDie(createSidebar(spec));\n        return {\n          name: name,\n          getApi: getApi,\n          onSetup: bridged.onSetup,\n          onShow: bridged.onShow,\n          onHide: bridged.onHide\n        };\n      });\n      return map(specs, function (spec) {\n        var editorOffCell = Cell(noop);\n        return parts.slot(spec.name, {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane']\n          },\n          behaviours: SimpleBehaviours.unnamedEvents([\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell),\n            run(slotVisibility(), function (sidepanel, se) {\n              var data = se.event;\n              var optSidePanelSpec = find(specs, function (config) {\n                return config.name === data.name;\n              });\n              optSidePanelSpec.each(function (sidePanelSpec) {\n                var handler = data.visible ? sidePanelSpec.onShow : sidePanelSpec.onHide;\n                handler(sidePanelSpec.getApi(sidepanel));\n              });\n            })\n          ])\n        });\n      });\n    };\n    var makeSidebar = function (panelConfigs) {\n      return SlotContainer.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane-container']\n          },\n          components: makePanels(parts, panelConfigs),\n          slotBehaviours: SimpleBehaviours.unnamedEvents([runOnAttached(function (slotContainer) {\n              return SlotContainer.hideAllSlots(slotContainer);\n            })])\n        };\n      });\n    };\n    var setSidebar = function (sidebar, panelConfigs) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        return Replacing.set(slider, [makeSidebar(panelConfigs)]);\n      });\n    };\n    var toggleSidebar = function (sidebar, name) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        var optSlotContainer = Composing.getCurrent(slider);\n        optSlotContainer.each(function (slotContainer) {\n          if (Sliding.hasGrown(slider)) {\n            if (SlotContainer.isShowing(slotContainer, name)) {\n              Sliding.shrink(slider);\n            } else {\n              SlotContainer.hideAllSlots(slotContainer);\n              SlotContainer.showSlot(slotContainer, name);\n            }\n          } else {\n            SlotContainer.hideAllSlots(slotContainer);\n            SlotContainer.showSlot(slotContainer, name);\n            Sliding.grow(slider);\n          }\n        });\n      });\n    };\n    var whichSidebar = function (sidebar) {\n      var optSlider = Composing.getCurrent(sidebar);\n      return optSlider.bind(function (slider) {\n        var sidebarOpen = Sliding.isGrowing(slider) || Sliding.hasGrown(slider);\n        if (sidebarOpen) {\n          var optSlotContainer = Composing.getCurrent(slider);\n          return optSlotContainer.bind(function (slotContainer) {\n            return find(SlotContainer.getSlotNames(slotContainer), function (name) {\n              return SlotContainer.isShowing(slotContainer, name);\n            });\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var fixSize = generate$1('FixSizeEvent');\n    var autoSize = generate$1('AutoSizeEvent');\n    var renderSidebar = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar'],\n          attributes: { role: 'complementary' }\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-sidebar__slider']\n            },\n            components: [],\n            behaviours: derive$1([\n              Tabstopping.config({}),\n              Focusing.config({}),\n              Sliding.config({\n                dimension: { property: 'width' },\n                closedClass: 'tox-sidebar--sliding-closed',\n                openClass: 'tox-sidebar--sliding-open',\n                shrinkingClass: 'tox-sidebar--sliding-shrinking',\n                growingClass: 'tox-sidebar--sliding-growing',\n                onShrunk: function (slider) {\n                  var optSlotContainer = Composing.getCurrent(slider);\n                  optSlotContainer.each(SlotContainer.hideAllSlots);\n                  emit(slider, autoSize);\n                },\n                onGrown: function (slider) {\n                  emit(slider, autoSize);\n                },\n                onStartGrow: function (slider) {\n                  emitWith(slider, fixSize, { width: getRaw(slider.element, 'width').getOr('') });\n                },\n                onStartShrink: function (slider) {\n                  emitWith(slider, fixSize, { width: get$8(slider.element) + 'px' });\n                }\n              }),\n              Replacing.config({}),\n              Composing.config({\n                find: function (comp) {\n                  var children = Replacing.contents(comp);\n                  return head(children);\n                }\n              })\n            ])\n          }],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          config('sidebar-sliding-events', [\n            run(fixSize, function (comp, se) {\n              set$2(comp.element, 'width', se.event.width);\n            }),\n            run(autoSize, function (comp, _se) {\n              remove$6(comp.element, 'width');\n            })\n          ])\n        ])\n      };\n    };\n\n    var getAttrs = function (elem) {\n      var attributes = elem.dom.attributes !== undefined ? elem.dom.attributes : [];\n      return foldl(attributes, function (b, attr) {\n        var _a;\n        if (attr.name === 'class') {\n          return b;\n        } else {\n          return __assign(__assign({}, b), (_a = {}, _a[attr.name] = attr.value, _a));\n        }\n      }, {});\n    };\n    var getClasses = function (elem) {\n      return Array.prototype.slice.call(elem.dom.classList, 0);\n    };\n    var fromHtml$2 = function (html) {\n      var elem = SugarElement.fromHtml(html);\n      var children$1 = children(elem);\n      var attrs = getAttrs(elem);\n      var classes = getClasses(elem);\n      var contents = children$1.length === 0 ? {} : { innerHtml: get$2(elem) };\n      return __assign({\n        tag: name(elem),\n        classes: classes,\n        attributes: attrs\n      }, contents);\n    };\n\n    var renderSpinner = function (providerBackstage) {\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { 'aria-label': providerBackstage.translate('Loading...') },\n          classes: ['tox-throbber__busy-spinner']\n        },\n        components: [{ dom: fromHtml$2('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }],\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onTab: function () {\n              return Optional.some(true);\n            },\n            onShiftTab: function () {\n              return Optional.some(true);\n            }\n          }),\n          Focusing.config({})\n        ])\n      };\n    };\n    var toggleThrobber = function (comp, state, providerBackstage) {\n      var element = comp.element;\n      if (state === true) {\n        Replacing.set(comp, [renderSpinner(providerBackstage)]);\n        remove$6(element, 'display');\n        remove$1(element, 'aria-hidden');\n      } else {\n        Replacing.set(comp, []);\n        set$2(element, 'display', 'none');\n        set$1(element, 'aria-hidden', 'true');\n      }\n    };\n    var renderThrobber = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          attributes: { 'aria-hidden': 'true' },\n          classes: ['tox-throbber'],\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([Replacing.config({})]),\n        components: []\n      };\n    };\n    var setup$7 = function (editor, lazyThrobber, sharedBackstage) {\n      var throbberState = Cell(false);\n      var timer = Cell(Optional.none());\n      var toggle = function (state) {\n        if (state !== throbberState.get()) {\n          toggleThrobber(lazyThrobber(), state, sharedBackstage.providers);\n          throbberState.set(state);\n          editor.fire('AfterProgressState', { state: state });\n        }\n      };\n      editor.on('ProgressState', function (e) {\n        timer.get().each(global$2.clearTimeout);\n        if (isNumber(e.time)) {\n          var timerId = global$2.setEditorTimeout(editor, function () {\n            return toggle(e.state);\n          }, e.time);\n          timer.set(Optional.some(timerId));\n        } else {\n          toggle(e.state);\n          timer.set(Optional.none());\n        }\n      });\n    };\n\n    var factory$h = function (detail, components, _spec) {\n      var apis = {\n        getSocket: function (comp) {\n          return parts$d.getPart(comp, detail, 'socket');\n        },\n        setSidebar: function (comp, panelConfigs) {\n          parts$d.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return setSidebar(sidebar, panelConfigs);\n          });\n        },\n        toggleSidebar: function (comp, name) {\n          parts$d.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return toggleSidebar(sidebar, name);\n          });\n        },\n        whichSidebar: function (comp) {\n          return parts$d.getPart(comp, detail, 'sidebar').bind(whichSidebar).getOrNull();\n        },\n        getHeader: function (comp) {\n          return parts$d.getPart(comp, detail, 'header');\n        },\n        getToolbar: function (comp) {\n          return parts$d.getPart(comp, detail, 'toolbar');\n        },\n        setToolbar: function (comp, groups) {\n          parts$d.getPart(comp, detail, 'toolbar').each(function (toolbar) {\n            toolbar.getApis().setGroups(toolbar, groups);\n          });\n        },\n        setToolbars: function (comp, toolbars) {\n          parts$d.getPart(comp, detail, 'multiple-toolbar').each(function (mToolbar) {\n            CustomList.setItems(mToolbar, toolbars);\n          });\n        },\n        refreshToolbar: function (comp) {\n          var toolbar = parts$d.getPart(comp, detail, 'toolbar');\n          toolbar.each(function (toolbar) {\n            return toolbar.getApis().refresh(toolbar);\n          });\n        },\n        toggleToolbarDrawer: function (comp) {\n          parts$d.getPart(comp, detail, 'toolbar').each(function (toolbar) {\n            mapFrom(toolbar.getApis().toggle, function (toggle) {\n              return toggle(toolbar);\n            });\n          });\n        },\n        isToolbarDrawerToggled: function (comp) {\n          return parts$d.getPart(comp, detail, 'toolbar').bind(function (toolbar) {\n            return Optional.from(toolbar.getApis().isOpen).map(function (isOpen) {\n              return isOpen(toolbar);\n            });\n          }).getOr(false);\n        },\n        getThrobber: function (comp) {\n          return parts$d.getPart(comp, detail, 'throbber');\n        },\n        focusToolbar: function (comp) {\n          var optToolbar = parts$d.getPart(comp, detail, 'toolbar').orThunk(function () {\n            return parts$d.getPart(comp, detail, 'multiple-toolbar');\n          });\n          optToolbar.each(function (toolbar) {\n            Keying.focusIn(toolbar);\n          });\n        },\n        setMenubar: function (comp, menus) {\n          parts$d.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.setMenus(menubar, menus);\n          });\n        },\n        focusMenubar: function (comp) {\n          parts$d.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.focus(menubar);\n          });\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        behaviours: detail.behaviours\n      };\n    };\n    var partMenubar = partType$1.optional({\n      factory: SilverMenubar,\n      name: 'menubar',\n      schema: [strict$1('backstage')]\n    });\n    var toolbarFactory = function (spec) {\n      if (spec.type === ToolbarMode.sliding) {\n        return renderSlidingMoreToolbar;\n      } else if (spec.type === ToolbarMode.floating) {\n        return renderFloatingMoreToolbar;\n      } else {\n        return renderToolbar;\n      }\n    };\n    var partMultipleToolbar = partType$1.optional({\n      factory: {\n        sketch: function (spec) {\n          return CustomList.sketch({\n            uid: spec.uid,\n            dom: spec.dom,\n            listBehaviours: derive$1([Keying.config({\n                mode: 'acyclic',\n                selector: '.tox-toolbar'\n              })]),\n            makeItem: function () {\n              return renderToolbar({\n                type: spec.type,\n                uid: generate$1('multiple-toolbar-item'),\n                cyclicKeying: false,\n                initGroups: [],\n                providers: spec.providers,\n                onEscape: function () {\n                  spec.onEscape();\n                  return Optional.some(true);\n                }\n              });\n            },\n            setupItem: function (_mToolbar, tc, data, _index) {\n              Toolbar.setGroups(tc, data);\n            },\n            shell: true\n          });\n        }\n      },\n      name: 'multiple-toolbar',\n      schema: [\n        strict$1('dom'),\n        strict$1('onEscape')\n      ]\n    });\n    var partToolbar = partType$1.optional({\n      factory: {\n        sketch: function (spec) {\n          var renderer = toolbarFactory(spec);\n          var toolbarSpec = {\n            type: spec.type,\n            uid: spec.uid,\n            onEscape: function () {\n              spec.onEscape();\n              return Optional.some(true);\n            },\n            cyclicKeying: false,\n            initGroups: [],\n            getSink: spec.getSink,\n            providers: spec.providers,\n            moreDrawerData: {\n              lazyToolbar: spec.lazyToolbar,\n              lazyMoreButton: spec.lazyMoreButton,\n              lazyHeader: spec.lazyHeader\n            },\n            attributes: spec.attributes\n          };\n          return renderer(toolbarSpec);\n        }\n      },\n      name: 'toolbar',\n      schema: [\n        strict$1('dom'),\n        strict$1('onEscape'),\n        strict$1('getSink')\n      ]\n    });\n    var partHeader = partType$1.optional({\n      factory: { sketch: renderHeader },\n      name: 'header',\n      schema: [strict$1('dom')]\n    });\n    var partSocket = partType$1.optional({\n      name: 'socket',\n      schema: [strict$1('dom')]\n    });\n    var partSidebar = partType$1.optional({\n      factory: { sketch: renderSidebar },\n      name: 'sidebar',\n      schema: [strict$1('dom')]\n    });\n    var partThrobber = partType$1.optional({\n      factory: { sketch: renderThrobber },\n      name: 'throbber',\n      schema: [strict$1('dom')]\n    });\n    var OuterContainer = composite$1({\n      name: 'OuterContainer',\n      factory: factory$h,\n      configFields: [\n        strict$1('dom'),\n        strict$1('behaviours')\n      ],\n      partFields: [\n        partHeader,\n        partMenubar,\n        partToolbar,\n        partMultipleToolbar,\n        partSocket,\n        partSidebar,\n        partThrobber\n      ],\n      apis: {\n        getSocket: function (apis, comp) {\n          return apis.getSocket(comp);\n        },\n        setSidebar: function (apis, comp, panelConfigs) {\n          apis.setSidebar(comp, panelConfigs);\n        },\n        toggleSidebar: function (apis, comp, name) {\n          apis.toggleSidebar(comp, name);\n        },\n        whichSidebar: function (apis, comp) {\n          return apis.whichSidebar(comp);\n        },\n        getHeader: function (apis, comp) {\n          return apis.getHeader(comp);\n        },\n        getToolbar: function (apis, comp) {\n          return apis.getToolbar(comp);\n        },\n        setToolbar: function (apis, comp, grps) {\n          var groups = map(grps, function (grp) {\n            return renderToolbarGroup(grp);\n          });\n          apis.setToolbar(comp, groups);\n        },\n        setToolbars: function (apis, comp, ts) {\n          var renderedToolbars = map(ts, function (g) {\n            return map(g, renderToolbarGroup);\n          });\n          apis.setToolbars(comp, renderedToolbars);\n        },\n        refreshToolbar: function (apis, comp) {\n          return apis.refreshToolbar(comp);\n        },\n        toggleToolbarDrawer: function (apis, comp) {\n          apis.toggleToolbarDrawer(comp);\n        },\n        isToolbarDrawerToggled: function (apis, comp) {\n          return apis.isToolbarDrawerToggled(comp);\n        },\n        getThrobber: function (apis, comp) {\n          return apis.getThrobber(comp);\n        },\n        setMenubar: function (apis, comp, menus) {\n          apis.setMenubar(comp, menus);\n        },\n        focusMenubar: function (apis, comp) {\n          apis.focusMenubar(comp);\n        },\n        focusToolbar: function (apis, comp) {\n          apis.focusToolbar(comp);\n        }\n      }\n    });\n\n    var defaultMenubar = 'file edit view insert format tools table help';\n    var defaultMenus = {\n      file: {\n        title: 'File',\n        items: 'newdocument restoredraft | preview | export print | deleteallconversations'\n      },\n      edit: {\n        title: 'Edit',\n        items: 'undo redo | cut copy paste pastetext | selectall | searchreplace'\n      },\n      view: {\n        title: 'View',\n        items: 'code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments'\n      },\n      insert: {\n        title: 'Insert',\n        items: 'image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime'\n      },\n      format: {\n        title: 'Format',\n        items: 'bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | removeformat'\n      },\n      tools: {\n        title: 'Tools',\n        items: 'spellchecker spellcheckerlanguage | a11ycheck code wordcount'\n      },\n      table: {\n        title: 'Table',\n        items: 'inserttable | cell row column | advtablesort | tableprops deletetable'\n      },\n      help: {\n        title: 'Help',\n        items: 'help'\n      }\n    };\n    var make$8 = function (menu, registry, editor) {\n      var removedMenuItems = getRemovedMenuItems(editor).split(/[ ,]/);\n      return {\n        text: menu.title,\n        getItems: function () {\n          return bind(menu.items, function (i) {\n            var itemName = i.toLowerCase();\n            if (itemName.trim().length === 0) {\n              return [];\n            } else if (exists(removedMenuItems, function (removedMenuItem) {\n                return removedMenuItem === itemName;\n              })) {\n              return [];\n            } else if (itemName === 'separator' || itemName === '|') {\n              return [{ type: 'separator' }];\n            } else if (registry.menuItems[itemName]) {\n              return [registry.menuItems[itemName]];\n            } else {\n              return [];\n            }\n          });\n        }\n      };\n    };\n    var parseItemsString = function (items) {\n      if (typeof items === 'string') {\n        return items.split(' ');\n      }\n      return items;\n    };\n    var identifyMenus = function (editor, registry) {\n      var rawMenuData = __assign(__assign({}, defaultMenus), registry.menus);\n      var userDefinedMenus = keys(registry.menus).length > 0;\n      var menubar = registry.menubar === undefined || registry.menubar === true ? parseItemsString(defaultMenubar) : parseItemsString(registry.menubar === false ? '' : registry.menubar);\n      var validMenus = filter(menubar, function (menuName) {\n        return userDefinedMenus ? registry.menus.hasOwnProperty(menuName) && registry.menus[menuName].hasOwnProperty('items') || defaultMenus.hasOwnProperty(menuName) : defaultMenus.hasOwnProperty(menuName);\n      });\n      var menus = map(validMenus, function (menuName) {\n        var menuData = rawMenuData[menuName];\n        return make$8({\n          title: menuData.title,\n          items: parseItemsString(menuData.items)\n        }, registry, editor);\n      });\n      return filter(menus, function (menu) {\n        var isNotSeparator = function (item) {\n          return item.type !== 'separator';\n        };\n        return menu.getItems().length > 0 && exists(menu.getItems(), isNotSeparator);\n      });\n    };\n\n    var fireSkinLoaded$1 = function (editor) {\n      var done = function () {\n        editor._skinLoaded = true;\n        fireSkinLoaded(editor);\n      };\n      return function () {\n        if (editor.initialized) {\n          done();\n        } else {\n          editor.on('init', done);\n        }\n      };\n    };\n    var fireSkinLoadError$1 = function (editor, err) {\n      return function () {\n        return fireSkinLoadError(editor, { message: err });\n      };\n    };\n\n    var loadStylesheet = function (editor, stylesheetUrl, styleSheetLoader) {\n      return new global$4(function (resolve, reject) {\n        styleSheetLoader.load(stylesheetUrl, resolve, reject);\n        editor.on('remove', function () {\n          return styleSheetLoader.unload(stylesheetUrl);\n        });\n      });\n    };\n    var loadUiSkins = function (editor, skinUrl) {\n      var skinUiCss = skinUrl + '/skin.min.css';\n      return loadStylesheet(editor, skinUiCss, editor.ui.styleSheetLoader);\n    };\n    var loadShadowDomUiSkins = function (editor, skinUrl) {\n      var isInShadowRoot$1 = isInShadowRoot(SugarElement.fromDom(editor.getElement()));\n      if (isInShadowRoot$1) {\n        var shadowDomSkinCss = skinUrl + '/skin.shadowdom.min.css';\n        return loadStylesheet(editor, shadowDomSkinCss, global$5.DOM.styleSheetLoader);\n      } else {\n        return global$4.resolve();\n      }\n    };\n    var loadSkin = function (isInline, editor) {\n      var skinUrl = getSkinUrl(editor);\n      if (skinUrl) {\n        editor.contentCSS.push(skinUrl + (isInline ? '/content.inline' : '/content') + '.min.css');\n      }\n      if (isSkinDisabled(editor) === false && isString(skinUrl)) {\n        global$4.all([\n          loadUiSkins(editor, skinUrl),\n          loadShadowDomUiSkins(editor, skinUrl)\n        ]).then(fireSkinLoaded$1(editor), fireSkinLoadError$1(editor, 'Skin could not be loaded'));\n      } else {\n        fireSkinLoaded$1(editor)();\n      }\n    };\n    var iframe = curry(loadSkin, false);\n    var inline = curry(loadSkin, true);\n\n    var setToolbar = function (editor, uiComponents, rawUiConfig, backstage) {\n      var comp = uiComponents.outerContainer;\n      var toolbarConfig = rawUiConfig.toolbar;\n      var toolbarButtonsConfig = rawUiConfig.buttons;\n      if (isArrayOf(toolbarConfig, isString)) {\n        var toolbars = toolbarConfig.map(function (t) {\n          var config = {\n            toolbar: t,\n            buttons: toolbarButtonsConfig,\n            allowToolbarGroups: rawUiConfig.allowToolbarGroups\n          };\n          return identifyButtons(editor, config, { backstage: backstage }, Optional.none());\n        });\n        OuterContainer.setToolbars(comp, toolbars);\n      } else {\n        OuterContainer.setToolbar(comp, identifyButtons(editor, rawUiConfig, { backstage: backstage }, Optional.none()));\n      }\n    };\n\n    var detection = detect$3();\n    var isiOS12 = detection.os.isiOS() && detection.os.version.major <= 12;\n    var setupEvents = function (editor, uiComponents) {\n      var dom = editor.dom;\n      var contentWindow = editor.getWin();\n      var initialDocEle = editor.getDoc().documentElement;\n      var lastWindowDimensions = Cell(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n      var lastDocumentDimensions = Cell(SugarPosition(initialDocEle.offsetWidth, initialDocEle.offsetHeight));\n      var resizeWindow = function () {\n        var outer = lastWindowDimensions.get();\n        if (outer.left !== contentWindow.innerWidth || outer.top !== contentWindow.innerHeight) {\n          lastWindowDimensions.set(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n          fireResizeContent(editor);\n        }\n      };\n      var resizeDocument = function () {\n        var docEle = editor.getDoc().documentElement;\n        var inner = lastDocumentDimensions.get();\n        if (inner.left !== docEle.offsetWidth || inner.top !== docEle.offsetHeight) {\n          lastDocumentDimensions.set(SugarPosition(docEle.offsetWidth, docEle.offsetHeight));\n          fireResizeContent(editor);\n        }\n      };\n      var scroll = function (e) {\n        return fireScrollContent(editor, e);\n      };\n      dom.bind(contentWindow, 'resize', resizeWindow);\n      dom.bind(contentWindow, 'scroll', scroll);\n      var elementLoad = capture$1(SugarElement.fromDom(editor.getBody()), 'load', resizeDocument);\n      var mothership = uiComponents.uiMothership.element;\n      editor.on('hide', function () {\n        set$2(mothership, 'display', 'none');\n      });\n      editor.on('show', function () {\n        remove$6(mothership, 'display');\n      });\n      editor.on('NodeChange', resizeDocument);\n      editor.on('remove', function () {\n        elementLoad.unbind();\n        dom.unbind(contentWindow, 'resize', resizeWindow);\n        dom.unbind(contentWindow, 'scroll', scroll);\n        contentWindow = null;\n      });\n    };\n    var render$1 = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var lastToolbarWidth = Cell(0);\n      var outerContainer = uiComponents.outerContainer;\n      iframe(editor);\n      var eTargetNode = SugarElement.fromDom(args.targetNode);\n      var uiRoot = getContentContainer(getRootNode(eTargetNode));\n      attachSystemAfter(eTargetNode, uiComponents.mothership);\n      attachSystem(uiRoot, uiComponents.uiMothership);\n      editor.on('PostRender', function () {\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        lastToolbarWidth.set(editor.getWin().innerWidth);\n        OuterContainer.setMenubar(outerContainer, identifyMenus(editor, rawUiConfig));\n        OuterContainer.setSidebar(outerContainer, rawUiConfig.sidebar);\n        setupEvents(editor, uiComponents);\n      });\n      var socket = OuterContainer.getSocket(outerContainer).getOrDie('Could not find expected socket element');\n      if (isiOS12) {\n        setAll$1(socket.element, {\n          'overflow': 'scroll',\n          '-webkit-overflow-scrolling': 'touch'\n        });\n        var limit = first(function () {\n          editor.fire('ScrollContent');\n        }, 20);\n        var unbinder = bind$3(socket.element, 'scroll', limit.throttle);\n        editor.on('remove', unbinder.unbind);\n      }\n      setupReadonlyModeSwitch(editor, uiComponents);\n      editor.addCommand('ToggleSidebar', function (_ui, value) {\n        OuterContainer.toggleSidebar(outerContainer, value);\n        editor.fire('ToggleSidebar');\n      });\n      editor.addQueryValueHandler('ToggleSidebar', function () {\n        return OuterContainer.whichSidebar(outerContainer);\n      });\n      var toolbarMode = getToolbarMode(editor);\n      var refreshDrawer = function () {\n        OuterContainer.refreshToolbar(uiComponents.outerContainer);\n      };\n      if (toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating) {\n        editor.on('ResizeWindow ResizeEditor ResizeContent', function () {\n          var width = editor.getWin().innerWidth;\n          if (width !== lastToolbarWidth.get()) {\n            refreshDrawer();\n            lastToolbarWidth.set(width);\n          }\n        });\n      }\n      var api = {\n        enable: function () {\n          broadcastReadonly(uiComponents, false);\n        },\n        disable: function () {\n          broadcastReadonly(uiComponents, true);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(outerContainer);\n        }\n      };\n      return {\n        iframeContainer: socket.element.dom,\n        editorContainer: outerContainer.element.dom,\n        api: api\n      };\n    };\n\n    var Iframe = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render$1\n    });\n\n    var parseToInt = function (val) {\n      var re = /^[0-9\\.]+(|px)$/i;\n      if (re.test('' + val)) {\n        return Optional.some(parseInt('' + val, 10));\n      }\n      return Optional.none();\n    };\n    var numToPx = function (val) {\n      return isNumber(val) ? val + 'px' : val;\n    };\n    var calcCappedSize = function (size, minSize, maxSize) {\n      var minOverride = minSize.filter(function (min) {\n        return size < min;\n      });\n      var maxOverride = maxSize.filter(function (max) {\n        return size > max;\n      });\n      return minOverride.or(maxOverride).getOr(size);\n    };\n\n    var getHeight$1 = function (editor) {\n      var baseHeight = getHeightSetting(editor);\n      var minHeight = getMinHeightSetting(editor);\n      var maxHeight = getMaxHeightSetting(editor);\n      return parseToInt(baseHeight).map(function (height) {\n        return calcCappedSize(height, minHeight, maxHeight);\n      });\n    };\n    var getHeightWithFallback = function (editor) {\n      var height = getHeight$1(editor);\n      return height.getOr(getHeightSetting(editor));\n    };\n    var getWidth$1 = function (editor) {\n      var baseWidth = getWidthSetting(editor);\n      var minWidth = getMinWidthSetting(editor);\n      var maxWidth = getMaxWidthSetting(editor);\n      return parseToInt(baseWidth).map(function (width) {\n        return calcCappedSize(width, minWidth, maxWidth);\n      });\n    };\n    var getWidthWithFallback = function (editor) {\n      var width = getWidth$1(editor);\n      return width.getOr(getWidthSetting(editor));\n    };\n\n    var InlineHeader = function (editor, targetElm, uiComponents, backstage, floatContainer) {\n      var uiMothership = uiComponents.uiMothership, outerContainer = uiComponents.outerContainer;\n      var DOM = global$5.DOM;\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var isSticky = isStickyToolbar(editor);\n      var editorMaxWidthOpt = getMaxWidthSetting(editor).or(getWidth$1(editor));\n      var headerBackstage = backstage.shared.header;\n      var isPositionedAtTop = headerBackstage.isPositionedAtTop;\n      var toolbarMode = getToolbarMode(editor);\n      var isSplitToolbar = toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating;\n      var visible = Cell(false);\n      var isVisible = function () {\n        return visible.get() && !editor.removed;\n      };\n      var calcToolbarOffset = function (toolbar) {\n        return isSplitToolbar ? toolbar.fold(function () {\n          return 0;\n        }, function (tbar) {\n          return tbar.components().length > 1 ? get$7(tbar.components()[1].element) : 0;\n        }) : 0;\n      };\n      var calcMode = function (container) {\n        switch (getToolbarLocation(editor)) {\n        case ToolbarLocation.auto:\n          var toolbar_1 = OuterContainer.getToolbar(outerContainer);\n          var offset = calcToolbarOffset(toolbar_1);\n          var toolbarHeight = get$7(container.element) - offset;\n          var targetBounds = box(targetElm);\n          var roomAtTop = targetBounds.y > toolbarHeight;\n          if (roomAtTop) {\n            return 'top';\n          } else {\n            var doc = documentElement(targetElm);\n            var docHeight = Math.max(doc.dom.scrollHeight, get$7(doc));\n            var roomAtBottom = targetBounds.bottom < docHeight - toolbarHeight;\n            if (roomAtBottom) {\n              return 'bottom';\n            } else {\n              var winBounds = win();\n              var isRoomAtBottomViewport = winBounds.bottom < targetBounds.bottom - toolbarHeight;\n              return isRoomAtBottomViewport ? 'bottom' : 'top';\n            }\n          }\n        case ToolbarLocation.bottom:\n          return 'bottom';\n        case ToolbarLocation.top:\n        default:\n          return 'top';\n        }\n      };\n      var setupMode = function (mode) {\n        var container = floatContainer.get();\n        Docking.setModes(container, [mode]);\n        headerBackstage.setDockingMode(mode);\n        var verticalDir = isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop;\n        set$1(container.element, Attribute, verticalDir);\n      };\n      var updateChromeWidth = function () {\n        var maxWidth = editorMaxWidthOpt.getOrThunk(function () {\n          var bodyMargin = parseToInt(get$5(body(), 'margin-left')).getOr(0);\n          return get$8(body()) - absolute(targetElm).left + bodyMargin;\n        });\n        set$2(floatContainer.get().element, 'max-width', maxWidth + 'px');\n      };\n      var updateChromePosition = function () {\n        var toolbar = OuterContainer.getToolbar(outerContainer);\n        var offset = calcToolbarOffset(toolbar);\n        var targetBounds = box(targetElm);\n        var top = isPositionedAtTop() ? Math.max(targetBounds.y - get$7(floatContainer.get().element) + offset, 0) : targetBounds.bottom;\n        setAll$1(outerContainer.element, {\n          position: 'absolute',\n          top: Math.round(top) + 'px',\n          left: Math.round(targetBounds.x) + 'px'\n        });\n      };\n      var repositionPopups$1 = function () {\n        uiMothership.broadcastOn([repositionPopups()], {});\n      };\n      var updateChromeUi = function (resetDocking) {\n        if (resetDocking === void 0) {\n          resetDocking = false;\n        }\n        if (!isVisible()) {\n          return;\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromeWidth();\n        }\n        if (isSplitToolbar) {\n          OuterContainer.refreshToolbar(outerContainer);\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromePosition();\n        }\n        if (isSticky) {\n          var floatContainerComp = floatContainer.get();\n          resetDocking ? Docking.reset(floatContainerComp) : Docking.refresh(floatContainerComp);\n        }\n        repositionPopups$1();\n      };\n      var updateMode = function (updateUi) {\n        if (updateUi === void 0) {\n          updateUi = true;\n        }\n        if (useFixedToolbarContainer || !isSticky || !isVisible()) {\n          return;\n        }\n        var currentMode = headerBackstage.getDockingMode();\n        var newMode = calcMode(floatContainer.get());\n        if (newMode !== currentMode) {\n          setupMode(newMode);\n          if (updateUi) {\n            updateChromeUi(true);\n          }\n        }\n      };\n      var show = function () {\n        visible.set(true);\n        set$2(outerContainer.element, 'display', 'flex');\n        DOM.addClass(editor.getBody(), 'mce-edit-focus');\n        remove$6(uiMothership.element, 'display');\n        updateMode(false);\n        updateChromeUi();\n      };\n      var hide = function () {\n        visible.set(false);\n        if (uiComponents.outerContainer) {\n          set$2(outerContainer.element, 'display', 'none');\n          DOM.removeClass(editor.getBody(), 'mce-edit-focus');\n        }\n        set$2(uiMothership.element, 'display', 'none');\n      };\n      return {\n        isVisible: isVisible,\n        isPositionedAtTop: isPositionedAtTop,\n        show: show,\n        hide: hide,\n        update: updateChromeUi,\n        updateMode: updateMode,\n        repositionPopups: repositionPopups$1\n      };\n    };\n\n    var getTargetPosAndBounds = function (targetElm, isToolbarTop) {\n      var bounds = box(targetElm);\n      return {\n        pos: isToolbarTop ? bounds.y : bounds.bottom,\n        bounds: bounds\n      };\n    };\n    var setupEvents$1 = function (editor, targetElm, ui, toolbarPersist) {\n      var prevPosAndBounds = Cell(getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()));\n      var resizeContent = function (e) {\n        var _a = getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()), pos = _a.pos, bounds = _a.bounds;\n        var _b = prevPosAndBounds.get(), prevPos = _b.pos, prevBounds = _b.bounds;\n        var hasResized = bounds.height !== prevBounds.height || bounds.width !== prevBounds.width;\n        prevPosAndBounds.set({\n          pos: pos,\n          bounds: bounds\n        });\n        if (hasResized) {\n          fireResizeContent(editor, e);\n        }\n        if (ui.isVisible()) {\n          if (prevPos !== pos) {\n            ui.update(true);\n          } else if (hasResized) {\n            ui.updateMode();\n            ui.repositionPopups();\n          }\n        }\n      };\n      if (!toolbarPersist) {\n        editor.on('activate', ui.show);\n        editor.on('deactivate', ui.hide);\n      }\n      editor.on('SkinLoaded ResizeWindow', function () {\n        return ui.update(true);\n      });\n      editor.on('NodeChange keydown', function (e) {\n        global$2.requestAnimationFrame(function () {\n          return resizeContent(e);\n        });\n      });\n      editor.on('ScrollWindow', function () {\n        return ui.updateMode();\n      });\n      var elementLoad = unbindable();\n      elementLoad.set(capture$1(SugarElement.fromDom(editor.getBody()), 'load', resizeContent));\n      editor.on('remove', function () {\n        elementLoad.clear();\n      });\n    };\n    var render$2 = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var mothership = uiComponents.mothership, uiMothership = uiComponents.uiMothership, outerContainer = uiComponents.outerContainer;\n      var floatContainer = Cell(null);\n      var targetElm = SugarElement.fromDom(args.targetNode);\n      var ui = InlineHeader(editor, targetElm, uiComponents, backstage, floatContainer);\n      var toolbarPersist = isToolbarPersist(editor);\n      inline(editor);\n      var render = function () {\n        if (floatContainer.get()) {\n          ui.show();\n          return;\n        }\n        floatContainer.set(OuterContainer.getHeader(outerContainer).getOrDie());\n        var uiContainer = getUiContainer(editor);\n        attachSystem(uiContainer, mothership);\n        attachSystem(uiContainer, uiMothership);\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        OuterContainer.setMenubar(outerContainer, identifyMenus(editor, rawUiConfig));\n        ui.show();\n        setupEvents$1(editor, targetElm, ui, toolbarPersist);\n        editor.nodeChanged();\n      };\n      editor.on('show', render);\n      editor.on('hide', ui.hide);\n      if (!toolbarPersist) {\n        editor.on('focus', render);\n        editor.on('blur', ui.hide);\n      }\n      editor.on('init', function () {\n        if (editor.hasFocus() || toolbarPersist) {\n          render();\n        }\n      });\n      setupReadonlyModeSwitch(editor, uiComponents);\n      var api = {\n        show: function () {\n          ui.show();\n        },\n        hide: function () {\n          ui.hide();\n        },\n        enable: function () {\n          broadcastReadonly(uiComponents, false);\n        },\n        disable: function () {\n          broadcastReadonly(uiComponents, true);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(outerContainer);\n        }\n      };\n      return {\n        editorContainer: outerContainer.element.dom,\n        api: api\n      };\n    };\n\n    var Inline = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render$2\n    });\n\n    var register$5 = function (editor) {\n      var alignToolbarButtons = [\n        {\n          name: 'alignleft',\n          text: 'Align left',\n          cmd: 'JustifyLeft',\n          icon: 'align-left'\n        },\n        {\n          name: 'aligncenter',\n          text: 'Align center',\n          cmd: 'JustifyCenter',\n          icon: 'align-center'\n        },\n        {\n          name: 'alignright',\n          text: 'Align right',\n          cmd: 'JustifyRight',\n          icon: 'align-right'\n        },\n        {\n          name: 'alignjustify',\n          text: 'Justify',\n          cmd: 'JustifyFull',\n          icon: 'align-justify'\n        }\n      ];\n      global$c.each(alignToolbarButtons, function (item) {\n        editor.ui.registry.addToggleButton(item.name, {\n          tooltip: item.text,\n          onAction: function () {\n            return editor.execCommand(item.cmd);\n          },\n          icon: item.icon,\n          onSetup: onSetupFormatToggle(editor, item.name)\n        });\n      });\n      var alignNoneToolbarButton = {\n        name: 'alignnone',\n        text: 'No alignment',\n        cmd: 'JustifyNone',\n        icon: 'align-none'\n      };\n      editor.ui.registry.addButton(alignNoneToolbarButton.name, {\n        tooltip: alignNoneToolbarButton.text,\n        onAction: function () {\n          return editor.execCommand(alignNoneToolbarButton.cmd);\n        },\n        icon: alignNoneToolbarButton.icon\n      });\n    };\n\n    var register$6 = function (editor, backstage) {\n      alignSelectMenu(editor, backstage);\n      fontSelectMenu(editor, backstage);\n      styleSelectMenu(editor, backstage);\n      formatSelectMenu(editor, backstage);\n      fontsizeSelectMenu(editor, backstage);\n    };\n\n    var toggleOutdentState = function (api, editor) {\n      api.setDisabled(!editor.queryCommandState('outdent'));\n      var onNodeChange = function () {\n        api.setDisabled(!editor.queryCommandState('outdent'));\n      };\n      editor.on('NodeChange', onNodeChange);\n      return function () {\n        return editor.off('NodeChange', onNodeChange);\n      };\n    };\n    var registerButtons = function (editor) {\n      editor.ui.registry.addButton('outdent', {\n        tooltip: 'Decrease indent',\n        icon: 'outdent',\n        onSetup: function (api) {\n          return toggleOutdentState(api, editor);\n        },\n        onAction: function () {\n          return editor.execCommand('outdent');\n        }\n      });\n      editor.ui.registry.addButton('indent', {\n        tooltip: 'Increase indent',\n        icon: 'indent',\n        onAction: function () {\n          return editor.execCommand('indent');\n        }\n      });\n    };\n    var register$7 = function (editor) {\n      registerButtons(editor);\n    };\n\n    var units = {\n      unsupportedLength: [\n        'em',\n        'ex',\n        'cap',\n        'ch',\n        'ic',\n        'rem',\n        'lh',\n        'rlh',\n        'vw',\n        'vh',\n        'vi',\n        'vb',\n        'vmin',\n        'vmax',\n        'cm',\n        'mm',\n        'Q',\n        'in',\n        'pc',\n        'pt',\n        'px'\n      ],\n      fixed: [\n        'px',\n        'pt'\n      ],\n      relative: ['%'],\n      empty: ['']\n    };\n    var pattern = function () {\n      var decimalDigits = '[0-9]+';\n      var signedInteger = '[+-]?' + decimalDigits;\n      var exponentPart = '[eE]' + signedInteger;\n      var dot = '\\\\.';\n      var opt = function (input) {\n        return '(?:' + input + ')?';\n      };\n      var unsignedDecimalLiteral = [\n        'Infinity',\n        decimalDigits + dot + opt(decimalDigits) + opt(exponentPart),\n        dot + decimalDigits + opt(exponentPart),\n        decimalDigits + opt(exponentPart)\n      ].join('|');\n      var float = '[+-]?(?:' + unsignedDecimalLiteral + ')';\n      return new RegExp('^(' + float + ')(.*)$');\n    }();\n    var isUnit = function (unit, accepted) {\n      return exists(accepted, function (acc) {\n        return exists(units[acc], function (check) {\n          return unit === check;\n        });\n      });\n    };\n    var parse = function (input, accepted) {\n      var match = Optional.from(pattern.exec(input));\n      return match.bind(function (array) {\n        var value = Number(array[1]);\n        var unitRaw = array[2];\n        if (isUnit(unitRaw, accepted)) {\n          return Optional.some({\n            value: value,\n            unit: unitRaw\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var normalise = function (input, accepted) {\n      return parse(input, accepted).map(function (_a) {\n        var value = _a.value, unit = _a.unit;\n        return value + unit;\n      });\n    };\n\n    var normaliseLineHeight = function (input) {\n      return normalise(input, [\n        'fixed',\n        'relative',\n        'empty'\n      ]).getOr(input);\n    };\n    var getLineHeights = function (editor) {\n      var options = getLineHeightFormats(editor);\n      var apis = new Map();\n      var lastApi = destroyable();\n      var callback = function () {\n        var current = normaliseLineHeight(editor.queryCommandValue('LineHeight'));\n        Optional.from(apis.get(current)).fold(function () {\n          return lastApi.clear();\n        }, function (api) {\n          lastApi.set({\n            destroy: function () {\n              api.setActive(false);\n            }\n          });\n          api.setActive(true);\n        });\n      };\n      editor.on('nodeChange', callback);\n      return map(options, function (value, i) {\n        return {\n          type: 'togglemenuitem',\n          text: value,\n          onSetup: function (api) {\n            apis.set(normaliseLineHeight(value), api);\n            if (i + 1 === options.length) {\n              callback();\n            }\n            return function () {\n              if (i === 0) {\n                editor.off('nodeChange', callback);\n                lastApi.clear();\n              }\n            };\n          },\n          onAction: function () {\n            return editor.execCommand('LineHeight', false, value);\n          }\n        };\n      });\n    };\n    var registerMenuItems = function (editor) {\n      editor.ui.registry.addNestedMenuItem('lineheight', {\n        type: 'nestedmenuitem',\n        text: 'Line height',\n        getSubmenuItems: function () {\n          return getLineHeights(editor);\n        }\n      });\n    };\n    var registerButtons$1 = function (editor) {\n      editor.ui.registry.addMenuButton('lineheight', {\n        tooltip: 'Line height',\n        icon: 'line-height',\n        fetch: function (callback) {\n          return callback(getLineHeights(editor));\n        }\n      });\n    };\n    var register$8 = function (editor) {\n      registerMenuItems(editor);\n      registerButtons$1(editor);\n    };\n\n    var toggleFormat = function (editor, fmt) {\n      return function () {\n        editor.execCommand('mceToggleFormat', false, fmt);\n      };\n    };\n    var registerFormatButtons = function (editor) {\n      global$c.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          icon: 'bold'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          icon: 'italic'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          icon: 'underline'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          icon: 'strike-through'\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          icon: 'subscript'\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          icon: 'superscript'\n        }\n      ], function (btn, _idx) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onSetup: onSetupFormatToggle(editor, btn.name),\n          onAction: toggleFormat(editor, btn.name)\n        });\n      });\n      for (var i = 1; i <= 6; i++) {\n        var name_1 = 'h' + i;\n        editor.ui.registry.addToggleButton(name_1, {\n          text: name_1.toUpperCase(),\n          tooltip: 'Heading ' + i,\n          onSetup: onSetupFormatToggle(editor, name_1),\n          onAction: toggleFormat(editor, name_1)\n        });\n      }\n    };\n    var registerCommandButtons = function (editor) {\n      global$c.each([\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste'\n        },\n        {\n          name: 'help',\n          text: 'Help',\n          action: 'mceHelp',\n          icon: 'help'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all'\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document'\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting'\n        },\n        {\n          name: 'remove',\n          text: 'Remove',\n          action: 'Delete',\n          icon: 'remove'\n        }\n      ], function (btn) {\n        editor.ui.registry.addButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: function () {\n            return editor.execCommand(btn.action);\n          }\n        });\n      });\n    };\n    var registerCommandToggleButtons = function (editor) {\n      global$c.each([{\n          name: 'blockquote',\n          text: 'Blockquote',\n          action: 'mceBlockQuote',\n          icon: 'quote'\n        }], function (btn) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: function () {\n            return editor.execCommand(btn.action);\n          },\n          onSetup: onSetupFormatToggle(editor, btn.name)\n        });\n      });\n    };\n    var registerButtons$2 = function (editor) {\n      registerFormatButtons(editor);\n      registerCommandButtons(editor);\n      registerCommandToggleButtons(editor);\n    };\n    var registerMenuItems$1 = function (editor) {\n      global$c.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          action: 'Bold',\n          icon: 'bold',\n          shortcut: 'Meta+B'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          action: 'Italic',\n          icon: 'italic',\n          shortcut: 'Meta+I'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          action: 'Underline',\n          icon: 'underline',\n          shortcut: 'Meta+U'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          action: 'Strikethrough',\n          icon: 'strike-through',\n          shortcut: ''\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          action: 'Subscript',\n          icon: 'subscript',\n          shortcut: ''\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          action: 'Superscript',\n          icon: 'superscript',\n          shortcut: ''\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting',\n          shortcut: ''\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document',\n          shortcut: ''\n        },\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut',\n          shortcut: 'Meta+X'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy',\n          shortcut: 'Meta+C'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste',\n          shortcut: 'Meta+V'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all',\n          shortcut: 'Meta+A'\n        }\n      ], function (btn) {\n        editor.ui.registry.addMenuItem(btn.name, {\n          text: btn.text,\n          icon: btn.icon,\n          shortcut: btn.shortcut,\n          onAction: function () {\n            return editor.execCommand(btn.action);\n          }\n        });\n      });\n      editor.ui.registry.addMenuItem('codeformat', {\n        text: 'Code',\n        icon: 'sourcecode',\n        onAction: toggleFormat(editor, 'code')\n      });\n    };\n    var register$9 = function (editor) {\n      registerButtons$2(editor);\n      registerMenuItems$1(editor);\n    };\n\n    var toggleUndoRedoState = function (api, editor, type) {\n      var checkState = function () {\n        return editor.undoManager ? editor.undoManager[type]() : false;\n      };\n      var onUndoStateChange = function () {\n        api.setDisabled(editor.mode.isReadOnly() || !checkState());\n      };\n      api.setDisabled(!checkState());\n      editor.on('Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', onUndoStateChange);\n      return function () {\n        return editor.off('Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', onUndoStateChange);\n      };\n    };\n    var registerMenuItems$2 = function (editor) {\n      editor.ui.registry.addMenuItem('undo', {\n        text: 'Undo',\n        icon: 'undo',\n        shortcut: 'Meta+Z',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasUndo');\n        },\n        onAction: function () {\n          return editor.execCommand('undo');\n        }\n      });\n      editor.ui.registry.addMenuItem('redo', {\n        text: 'Redo',\n        icon: 'redo',\n        shortcut: 'Meta+Y',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasRedo');\n        },\n        onAction: function () {\n          return editor.execCommand('redo');\n        }\n      });\n    };\n    var registerButtons$3 = function (editor) {\n      editor.ui.registry.addButton('undo', {\n        tooltip: 'Undo',\n        icon: 'undo',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasUndo');\n        },\n        onAction: function () {\n          return editor.execCommand('undo');\n        }\n      });\n      editor.ui.registry.addButton('redo', {\n        tooltip: 'Redo',\n        icon: 'redo',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasRedo');\n        },\n        onAction: function () {\n          return editor.execCommand('redo');\n        }\n      });\n    };\n    var register$a = function (editor) {\n      registerMenuItems$2(editor);\n      registerButtons$3(editor);\n    };\n\n    var toggleVisualAidState = function (api, editor) {\n      api.setActive(editor.hasVisual);\n      var onVisualAid = function (e) {\n        api.setActive(e.hasVisual);\n      };\n      editor.on('VisualAid', onVisualAid);\n      return function () {\n        return editor.off('VisualAid', onVisualAid);\n      };\n    };\n    var registerMenuItems$3 = function (editor) {\n      editor.ui.registry.addToggleMenuItem('visualaid', {\n        text: 'Visual aids',\n        onSetup: function (api) {\n          return toggleVisualAidState(api, editor);\n        },\n        onAction: function () {\n          editor.execCommand('mceToggleVisualAid');\n        }\n      });\n    };\n    var registerToolbarButton = function (editor) {\n      editor.ui.registry.addButton('visualaid', {\n        tooltip: 'Visual aids',\n        text: 'Visual aids',\n        onAction: function () {\n          return editor.execCommand('mceToggleVisualAid');\n        }\n      });\n    };\n    var register$b = function (editor) {\n      registerToolbarButton(editor);\n      registerMenuItems$3(editor);\n    };\n\n    var setup$8 = function (editor, backstage) {\n      register$5(editor);\n      register$9(editor);\n      register$6(editor, backstage);\n      register$a(editor);\n      register$1(editor);\n      register$b(editor);\n      register$7(editor);\n      register$8(editor);\n    };\n\n    var nu$d = function (x, y) {\n      return {\n        anchor: 'makeshift',\n        x: x,\n        y: y\n      };\n    };\n    var transpose$1 = function (pos, dx, dy) {\n      return nu$d(pos.x + dx, pos.y + dy);\n    };\n    var isTouchEvent$1 = function (e) {\n      return e.type === 'longpress' || e.type.indexOf('touch') === 0;\n    };\n    var fromPageXY = function (e) {\n      if (isTouchEvent$1(e)) {\n        var touch = e.touches[0];\n        return nu$d(touch.pageX, touch.pageY);\n      } else {\n        return nu$d(e.pageX, e.pageY);\n      }\n    };\n    var fromClientXY = function (e) {\n      if (isTouchEvent$1(e)) {\n        var touch = e.touches[0];\n        return nu$d(touch.clientX, touch.clientY);\n      } else {\n        return nu$d(e.clientX, e.clientY);\n      }\n    };\n    var transposeContentAreaContainer = function (element, pos) {\n      var containerPos = global$5.DOM.getPos(element);\n      return transpose$1(pos, containerPos.x, containerPos.y);\n    };\n    var getPointAnchor = function (editor, e) {\n      if (e.type === 'contextmenu' || e.type === 'longpress') {\n        if (editor.inline) {\n          return fromPageXY(e);\n        } else {\n          return transposeContentAreaContainer(editor.getContentAreaContainer(), fromClientXY(e));\n        }\n      } else {\n        return getSelectionAnchor(editor);\n      }\n    };\n    var getSelectionAnchor = function (editor) {\n      return {\n        anchor: 'selection',\n        root: SugarElement.fromDom(editor.selection.getNode())\n      };\n    };\n    var getNodeAnchor$1 = function (editor) {\n      return {\n        anchor: 'node',\n        node: Optional.some(SugarElement.fromDom(editor.selection.getNode())),\n        root: SugarElement.fromDom(editor.getBody())\n      };\n    };\n\n    var initAndShow = function (editor, e, buildMenu, backstage, contextmenu, useNodeAnchor) {\n      var items = buildMenu();\n      var anchorSpec = useNodeAnchor ? getNodeAnchor$1(editor) : getPointAnchor(editor, e);\n      build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuAt(contextmenu, anchorSpec, {\n          menu: { markers: markers$1('normal') },\n          data: menuData\n        });\n      });\n    };\n\n    var layouts = {\n      onLtr: function () {\n        return [\n          south$1,\n          southeast$1,\n          southwest$1,\n          northeast$1,\n          northwest$1,\n          north$1,\n          north$3,\n          south$3,\n          northeast$3,\n          southeast$3,\n          northwest$3,\n          southwest$3\n        ];\n      },\n      onRtl: function () {\n        return [\n          south$1,\n          southwest$1,\n          southeast$1,\n          northwest$1,\n          northeast$1,\n          north$1,\n          north$3,\n          south$3,\n          northwest$3,\n          southwest$3,\n          northeast$3,\n          southeast$3\n        ];\n      }\n    };\n    var bubbleSize$1 = 12;\n    var bubbleAlignments$2 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top']\n    };\n    var isTouchWithinSelection = function (editor, e) {\n      var selection = editor.selection;\n      if (selection.isCollapsed() || e.touches.length < 1) {\n        return false;\n      } else {\n        var touch_1 = e.touches[0];\n        var rng = selection.getRng();\n        var rngRectOpt = getFirstRect$1(editor.getWin(), SimSelection.domRange(rng));\n        return rngRectOpt.exists(function (rngRect) {\n          return rngRect.left <= touch_1.clientX && rngRect.right >= touch_1.clientX && rngRect.top <= touch_1.clientY && rngRect.bottom >= touch_1.clientY;\n        });\n      }\n    };\n    var getPointAnchorSpec = function (editor, e) {\n      return __assign({\n        bubble: nu$8(0, bubbleSize$1, bubbleAlignments$2),\n        layouts: layouts,\n        overrides: {\n          maxWidthFunction: expandable$1(),\n          maxHeightFunction: expandable()\n        }\n      }, getPointAnchor(editor, e));\n    };\n    var setupiOSOverrides = function (editor) {\n      var originalSelection = editor.selection.getRng();\n      var selectionReset = function () {\n        global$2.setEditorTimeout(editor, function () {\n          editor.selection.setRng(originalSelection);\n        }, 10);\n        unbindEventListeners();\n      };\n      editor.once('touchend', selectionReset);\n      var preventMousedown = function (e) {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n      };\n      editor.on('mousedown', preventMousedown, true);\n      var clearSelectionReset = function () {\n        return unbindEventListeners();\n      };\n      editor.once('longpresscancel', clearSelectionReset);\n      var unbindEventListeners = function () {\n        editor.off('touchend', selectionReset);\n        editor.off('longpresscancel', clearSelectionReset);\n        editor.off('mousedown', preventMousedown);\n      };\n    };\n    var show = function (editor, e, items, backstage, contextmenu, useNodeAnchor, highlightImmediately) {\n      var anchorSpec = useNodeAnchor ? getNodeAnchor$1(editor) : getPointAnchorSpec(editor, e);\n      build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, true).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuWithinBounds(contextmenu, anchorSpec, {\n          menu: {\n            markers: markers$1('normal'),\n            highlightImmediately: highlightImmediately\n          },\n          data: menuData,\n          type: 'horizontal'\n        }, function () {\n          return Optional.some(getContextToolbarBounds(editor, backstage.shared));\n        });\n        editor.fire(hideContextToolbarEvent);\n      });\n    };\n    var initAndShow$1 = function (editor, e, buildMenu, backstage, contextmenu, useNodeAnchor) {\n      var detection = detect$3();\n      var isiOS = detection.os.isiOS();\n      var isOSX = detection.os.isOSX();\n      var isAndroid = detection.os.isAndroid();\n      var isTouch = detection.deviceType.isTouch();\n      var shouldHighlightImmediately = function () {\n        return !(isAndroid || isiOS || isOSX && isTouch);\n      };\n      var open = function () {\n        var items = buildMenu();\n        show(editor, e, items, backstage, contextmenu, useNodeAnchor, shouldHighlightImmediately());\n      };\n      if ((isOSX || isiOS) && !useNodeAnchor) {\n        var openiOS_1 = function () {\n          setupiOSOverrides(editor);\n          open();\n        };\n        if (isTouchWithinSelection(editor, e)) {\n          openiOS_1();\n        } else {\n          editor.once('selectionchange', openiOS_1);\n          editor.once('touchend', function () {\n            return editor.off('selectionchange', openiOS_1);\n          });\n        }\n      } else {\n        if (isAndroid && !useNodeAnchor) {\n          editor.selection.setCursorLocation(e.target, 0);\n        }\n        open();\n      }\n    };\n\n    var patchPipeConfig = function (config) {\n      return typeof config === 'string' ? config.split(/[ ,]/) : config;\n    };\n    var shouldNeverUseNative = function (editor) {\n      return editor.getParam('contextmenu_never_use_native', false, 'boolean');\n    };\n    var getMenuItems = function (editor, name, defaultItems) {\n      var contextMenus = editor.ui.registry.getAll().contextMenus;\n      return Optional.from(editor.getParam(name)).map(patchPipeConfig).getOrThunk(function () {\n        return filter(patchPipeConfig(defaultItems), function (item) {\n          return has(contextMenus, item);\n        });\n      });\n    };\n    var isContextMenuDisabled = function (editor) {\n      return editor.getParam('contextmenu') === false;\n    };\n    var getContextMenu = function (editor) {\n      return getMenuItems(editor, 'contextmenu', 'link linkchecker image imagetools table spellchecker configurepermanentpen');\n    };\n    var getAvoidOverlapSelector = function (editor) {\n      return editor.getParam('contextmenu_avoid_overlap', '', 'string');\n    };\n\n    var isSeparator$1 = function (item) {\n      return isString(item) ? item === '|' : item.type === 'separator';\n    };\n    var separator$3 = { type: 'separator' };\n    var makeContextItem = function (item) {\n      var commonMenuItem = function (item) {\n        return {\n          text: item.text,\n          icon: item.icon,\n          disabled: item.disabled,\n          shortcut: item.shortcut\n        };\n      };\n      if (isString(item)) {\n        return item;\n      } else {\n        switch (item.type) {\n        case 'separator':\n          return separator$3;\n        case 'submenu':\n          return __assign(__assign({ type: 'nestedmenuitem' }, commonMenuItem(item)), {\n            getSubmenuItems: function () {\n              var items = item.getSubmenuItems();\n              if (isString(items)) {\n                return items;\n              } else {\n                return map(items, makeContextItem);\n              }\n            }\n          });\n        default:\n          return __assign(__assign({ type: 'menuitem' }, commonMenuItem(item)), { onAction: noarg(item.onAction) });\n        }\n      }\n    };\n    var addContextMenuGroup = function (xs, groupItems) {\n      if (groupItems.length === 0) {\n        return xs;\n      }\n      var lastMenuItem = last(xs).filter(function (item) {\n        return !isSeparator$1(item);\n      });\n      var before = lastMenuItem.fold(function () {\n        return [];\n      }, function (_) {\n        return [separator$3];\n      });\n      return xs.concat(before).concat(groupItems).concat([separator$3]);\n    };\n    var generateContextMenu = function (contextMenus, menuConfig, selectedElement) {\n      var sections = foldl(menuConfig, function (acc, name) {\n        return get$1(contextMenus, name.toLowerCase()).map(function (menu) {\n          var items = menu.update(selectedElement);\n          if (isString(items)) {\n            return addContextMenuGroup(acc, items.split(' '));\n          } else if (items.length > 0) {\n            var allItems = map(items, makeContextItem);\n            return addContextMenuGroup(acc, allItems);\n          } else {\n            return acc;\n          }\n        }).getOrThunk(function () {\n          return acc.concat([name]);\n        });\n      }, []);\n      if (sections.length > 0 && isSeparator$1(sections[sections.length - 1])) {\n        sections.pop();\n      }\n      return sections;\n    };\n    var isNativeOverrideKeyEvent = function (editor, e) {\n      return e.ctrlKey && !shouldNeverUseNative(editor);\n    };\n    var isTriggeredByKeyboard = function (editor, e) {\n      return e.type !== 'longpress' && (e.button !== 2 || e.target === editor.getBody() && e.pointerType === '');\n    };\n    var getSelectedElement = function (editor, e) {\n      return isTriggeredByKeyboard(editor, e) ? editor.selection.getStart(true) : e.target;\n    };\n    var shouldUseNodeAnchor = function (editor, e) {\n      var selector = getAvoidOverlapSelector(editor);\n      if (isTriggeredByKeyboard(editor, e)) {\n        return true;\n      } else if (selector) {\n        var target = getSelectedElement(editor, e);\n        return closest$4(SugarElement.fromDom(target), selector);\n      } else {\n        return false;\n      }\n    };\n    var setup$9 = function (editor, lazySink, backstage) {\n      var detection = detect$3();\n      var isTouch = detection.deviceType.isTouch;\n      var contextmenu = build$1(InlineView.sketch({\n        dom: { tag: 'div' },\n        lazySink: lazySink,\n        onEscape: function () {\n          return editor.focus();\n        },\n        onShow: function () {\n          return backstage.setContextMenuState(true);\n        },\n        onHide: function () {\n          return backstage.setContextMenuState(false);\n        },\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissContextMenu', [run(dismissRequested(), function (comp, _se) {\n              Sandboxing.close(comp);\n              editor.focus();\n            })])])\n      }));\n      var hideContextMenu = function (_e) {\n        return InlineView.hide(contextmenu);\n      };\n      var showContextMenu = function (e) {\n        if (shouldNeverUseNative(editor)) {\n          e.preventDefault();\n        }\n        if (isNativeOverrideKeyEvent(editor, e) || isContextMenuDisabled(editor)) {\n          return;\n        }\n        var useNodeAnchor = shouldUseNodeAnchor(editor, e);\n        var buildMenu = function () {\n          var selectedElement = getSelectedElement(editor, e);\n          var registry = editor.ui.registry.getAll();\n          var menuConfig = getContextMenu(editor);\n          return generateContextMenu(registry.contextMenus, menuConfig, selectedElement);\n        };\n        var initAndShow$2 = isTouch() ? initAndShow$1 : initAndShow;\n        initAndShow$2(editor, e, buildMenu, backstage, contextmenu, useNodeAnchor);\n      };\n      editor.on('init', function () {\n        var hideEvents = 'ResizeEditor ScrollContent ScrollWindow longpresscancel' + (isTouch() ? '' : ' ResizeWindow');\n        editor.on(hideEvents, hideContextMenu);\n        editor.on('longpress contextmenu', showContextMenu);\n      });\n    };\n\n    var adt$c = Adt.generate([\n      {\n        offset: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        absolute: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y'\n        ]\n      }\n    ]);\n    var subtract = function (change) {\n      return function (point) {\n        return point.translate(-change.left, -change.top);\n      };\n    };\n    var add$4 = function (change) {\n      return function (point) {\n        return point.translate(change.left, change.top);\n      };\n    };\n    var transform$1 = function (changes) {\n      return function (x, y) {\n        return foldl(changes, function (rest, f) {\n          return f(rest);\n        }, SugarPosition(x, y));\n      };\n    };\n    var asFixed = function (coord, scroll, origin) {\n      return coord.fold(transform$1([\n        add$4(origin),\n        subtract(scroll)\n      ]), transform$1([subtract(scroll)]), transform$1([]));\n    };\n    var asAbsolute = function (coord, scroll, origin) {\n      return coord.fold(transform$1([add$4(origin)]), transform$1([]), transform$1([add$4(scroll)]));\n    };\n    var asOffset = function (coord, scroll, origin) {\n      return coord.fold(transform$1([]), transform$1([subtract(origin)]), transform$1([\n        add$4(scroll),\n        subtract(origin)\n      ]));\n    };\n    var withinRange = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      return Math.abs(a1.left - a2.left) <= xRange && Math.abs(a1.top - a2.top) <= yRange;\n    };\n    var getDeltas = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      var left = Math.abs(a1.left - a2.left);\n      var top = Math.abs(a1.top - a2.top);\n      return SugarPosition(left, top);\n    };\n    var toStyles = function (coord, scroll, origin) {\n      var stylesOpt = coord.fold(function (x, y) {\n        return {\n          position: Optional.some('absolute'),\n          left: Optional.some(x + 'px'),\n          top: Optional.some(y + 'px')\n        };\n      }, function (x, y) {\n        return {\n          position: Optional.some('absolute'),\n          left: Optional.some(x - origin.left + 'px'),\n          top: Optional.some(y - origin.top + 'px')\n        };\n      }, function (x, y) {\n        return {\n          position: Optional.some('fixed'),\n          left: Optional.some(x + 'px'),\n          top: Optional.some(y + 'px')\n        };\n      });\n      return __assign({\n        right: Optional.none(),\n        bottom: Optional.none()\n      }, stylesOpt);\n    };\n    var translate$2 = function (coord, deltaX, deltaY) {\n      return coord.fold(function (x, y) {\n        return offset(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return absolute$3(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return fixed$1(x + deltaX, y + deltaY);\n      });\n    };\n    var absorb = function (partialCoord, originalCoord, scroll, origin) {\n      var absorbOne = function (stencil, nu) {\n        return function (optX, optY) {\n          var original = stencil(originalCoord, scroll, origin);\n          return nu(optX.getOr(original.left), optY.getOr(original.top));\n        };\n      };\n      return partialCoord.fold(absorbOne(asOffset, offset), absorbOne(asAbsolute, absolute$3), absorbOne(asFixed, fixed$1));\n    };\n    var offset = adt$c.offset;\n    var absolute$3 = adt$c.absolute;\n    var fixed$1 = adt$c.fixed;\n\n    var parseAttrToInt = function (element, name) {\n      var value = get$3(element, name);\n      return isUndefined(value) ? NaN : parseInt(value, 10);\n    };\n    var get$f = function (component, snapsInfo) {\n      var element = component.element;\n      var x = parseAttrToInt(element, snapsInfo.leftAttr);\n      var y = parseAttrToInt(element, snapsInfo.topAttr);\n      return isNaN(x) || isNaN(y) ? Optional.none() : Optional.some(SugarPosition(x, y));\n    };\n    var set$8 = function (component, snapsInfo, pt) {\n      var element = component.element;\n      set$1(element, snapsInfo.leftAttr, pt.left + 'px');\n      set$1(element, snapsInfo.topAttr, pt.top + 'px');\n    };\n    var clear = function (component, snapsInfo) {\n      var element = component.element;\n      remove$1(element, snapsInfo.leftAttr);\n      remove$1(element, snapsInfo.topAttr);\n    };\n\n    var getCoords = function (component, snapInfo, coord, delta) {\n      return get$f(component, snapInfo).fold(function () {\n        return coord;\n      }, function (fixed) {\n        return fixed$1(fixed.left + delta.left, fixed.top + delta.top);\n      });\n    };\n    var moveOrSnap = function (component, snapInfo, coord, delta, scroll, origin) {\n      var newCoord = getCoords(component, snapInfo, coord, delta);\n      var snap = snapInfo.mustSnap ? findClosestSnap(component, snapInfo, newCoord, scroll, origin) : findSnap(component, snapInfo, newCoord, scroll, origin);\n      var fixedCoord = asFixed(newCoord, scroll, origin);\n      set$8(component, snapInfo, fixedCoord);\n      return snap.fold(function () {\n        return {\n          coord: fixed$1(fixedCoord.left, fixedCoord.top),\n          extra: Optional.none()\n        };\n      }, function (spanned) {\n        return {\n          coord: spanned.output,\n          extra: spanned.extra\n        };\n      });\n    };\n    var stopDrag = function (component, snapInfo) {\n      clear(component, snapInfo);\n    };\n    var findMatchingSnap = function (snaps, newCoord, scroll, origin) {\n      return findMap(snaps, function (snap) {\n        var sensor = snap.sensor;\n        var inRange = withinRange(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n        return inRange ? Optional.some({\n          output: absorb(snap.output, newCoord, scroll, origin),\n          extra: snap.extra\n        }) : Optional.none();\n      });\n    };\n    var findClosestSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      var matchSnap = findMatchingSnap(snaps, newCoord, scroll, origin);\n      return matchSnap.orThunk(function () {\n        var bestSnap = foldl(snaps, function (acc, snap) {\n          var sensor = snap.sensor;\n          var deltas = getDeltas(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n          return acc.deltas.fold(function () {\n            return {\n              deltas: Optional.some(deltas),\n              snap: Optional.some(snap)\n            };\n          }, function (bestDeltas) {\n            var currAvg = (deltas.left + deltas.top) / 2;\n            var bestAvg = (bestDeltas.left + bestDeltas.top) / 2;\n            if (currAvg <= bestAvg) {\n              return {\n                deltas: Optional.some(deltas),\n                snap: Optional.some(snap)\n              };\n            } else {\n              return acc;\n            }\n          });\n        }, {\n          deltas: Optional.none(),\n          snap: Optional.none()\n        });\n        return bestSnap.snap.map(function (snap) {\n          return {\n            output: absorb(snap.output, newCoord, scroll, origin),\n            extra: snap.extra\n          };\n        });\n      });\n    };\n    var findSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      return findMatchingSnap(snaps, newCoord, scroll, origin);\n    };\n    var snapTo = function (snap, scroll, origin) {\n      return {\n        coord: absorb(snap.output, snap.output, scroll, origin),\n        extra: snap.extra\n      };\n    };\n\n    var snapTo$1 = function (component, dragConfig, _state, snap) {\n      var target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        var doc = owner(component.element);\n        var scroll_1 = get$9(doc);\n        var origin_1 = getOrigin(target);\n        var snapPin = snapTo(snap, scroll_1, origin_1);\n        var styles = toStyles(snapPin.coord, scroll_1, origin_1);\n        setOptions(target, styles);\n      }\n    };\n\n    var DraggingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        snapTo: snapTo$1\n    });\n\n    var initialAttribute = 'data-initial-z-index';\n    var resetZIndex = function (blocker) {\n      parent(blocker.element).filter(isElement).each(function (root) {\n        getOpt(root, initialAttribute).fold(function () {\n          return remove$6(root, 'z-index');\n        }, function (zIndex) {\n          return set$2(root, 'z-index', zIndex);\n        });\n        remove$1(root, initialAttribute);\n      });\n    };\n    var changeZIndex = function (blocker) {\n      parent(blocker.element).filter(isElement).each(function (root) {\n        getRaw(root, 'z-index').each(function (zindex) {\n          set$1(root, initialAttribute, zindex);\n        });\n        set$2(root, 'z-index', get$5(blocker.element, 'z-index'));\n      });\n    };\n    var instigate = function (anyComponent, blocker) {\n      anyComponent.getSystem().addToGui(blocker);\n      changeZIndex(blocker);\n    };\n    var discard = function (blocker) {\n      resetZIndex(blocker);\n      blocker.getSystem().removeFromGui(blocker);\n    };\n    var createComponent = function (component, blockerClass, blockerEvents) {\n      return component.getSystem().build(Container.sketch({\n        dom: {\n          styles: {\n            'left': '0px',\n            'top': '0px',\n            'width': '100%',\n            'height': '100%',\n            'position': 'fixed',\n            'z-index': '1000000000000000'\n          },\n          classes: [blockerClass]\n        },\n        events: blockerEvents\n      }));\n    };\n\n    var SnapSchema = optionObjOf('snaps', [\n      strict$1('getSnapPoints'),\n      onHandler('onSensor'),\n      strict$1('leftAttr'),\n      strict$1('topAttr'),\n      defaulted$1('lazyViewport', win),\n      defaulted$1('mustSnap', false)\n    ]);\n\n    var schema$t = [\n      defaulted$1('useFixed', never),\n      strict$1('blockerClass'),\n      defaulted$1('getTarget', identity),\n      defaulted$1('onDrag', noop),\n      defaulted$1('repositionTarget', true),\n      defaulted$1('onDrop', noop),\n      defaultedFunction('getBounds', win),\n      SnapSchema\n    ];\n\n    var getCurrentCoord = function (target) {\n      return lift3(getRaw(target, 'left'), getRaw(target, 'top'), getRaw(target, 'position'), function (left, top, position) {\n        var nu = position === 'fixed' ? fixed$1 : offset;\n        return nu(parseInt(left, 10), parseInt(top, 10));\n      }).getOrThunk(function () {\n        var location = absolute(target);\n        return absolute$3(location.left, location.top);\n      });\n    };\n    var clampCoords = function (component, coords, scroll, origin, startData) {\n      var bounds = startData.bounds;\n      var absoluteCoord = asAbsolute(coords, scroll, origin);\n      var newX = clamp(absoluteCoord.left, bounds.x, bounds.x + bounds.width - startData.width);\n      var newY = clamp(absoluteCoord.top, bounds.y, bounds.y + bounds.height - startData.height);\n      var newCoords = absolute$3(newX, newY);\n      return coords.fold(function () {\n        var offset$1 = asOffset(newCoords, scroll, origin);\n        return offset(offset$1.left, offset$1.top);\n      }, function () {\n        return newCoords;\n      }, function () {\n        var fixed = asFixed(newCoords, scroll, origin);\n        return fixed$1(fixed.left, fixed.top);\n      });\n    };\n    var calcNewCoord = function (component, optSnaps, currentCoord, scroll, origin, delta, startData) {\n      var newCoord = optSnaps.fold(function () {\n        var translated = translate$2(currentCoord, delta.left, delta.top);\n        var fixedCoord = asFixed(translated, scroll, origin);\n        return fixed$1(fixedCoord.left, fixedCoord.top);\n      }, function (snapInfo) {\n        var snapping = moveOrSnap(component, snapInfo, currentCoord, delta, scroll, origin);\n        snapping.extra.each(function (extra) {\n          snapInfo.onSensor(component, extra);\n        });\n        return snapping.coord;\n      });\n      return clampCoords(component, newCoord, scroll, origin, startData);\n    };\n    var dragBy = function (component, dragConfig, startData, delta) {\n      var target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        var doc = owner(component.element);\n        var scroll_1 = get$9(doc);\n        var origin_1 = getOrigin(target);\n        var currentCoord = getCurrentCoord(target);\n        var newCoord = calcNewCoord(component, dragConfig.snaps, currentCoord, scroll_1, origin_1, delta, startData);\n        var styles = toStyles(newCoord, scroll_1, origin_1);\n        setOptions(target, styles);\n      }\n      dragConfig.onDrag(component, target, delta);\n    };\n\n    var calcStartData = function (dragConfig, comp) {\n      return {\n        bounds: dragConfig.getBounds(),\n        height: getOuter$1(comp.element),\n        width: getOuter$2(comp.element)\n      };\n    };\n    var move$1 = function (component, dragConfig, dragState, dragMode, event) {\n      var delta = dragState.update(dragMode, event);\n      var dragStartData = dragState.getStartData().getOrThunk(function () {\n        return calcStartData(dragConfig, component);\n      });\n      delta.each(function (dlt) {\n        dragBy(component, dragConfig, dragStartData, dlt);\n      });\n    };\n    var stop = function (component, blocker, dragConfig, dragState) {\n      blocker.each(discard);\n      dragConfig.snaps.each(function (snapInfo) {\n        stopDrag(component, snapInfo);\n      });\n      var target = dragConfig.getTarget(component.element);\n      dragState.reset();\n      dragConfig.onDrop(component, target);\n    };\n    var handlers = function (events) {\n      return function (dragConfig, dragState) {\n        var updateStartState = function (comp) {\n          dragState.setStartData(calcStartData(dragConfig, comp));\n        };\n        return derive(__spreadArrays([run(windowScroll(), function (comp) {\n            dragState.getStartData().each(function () {\n              return updateStartState(comp);\n            });\n          })], events(dragConfig, dragState, updateStartState)));\n      };\n    };\n\n    var init$c = function (dragApi) {\n      return derive([\n        run(mousedown(), dragApi.forceDrop),\n        run(mouseup(), dragApi.drop),\n        run(mousemove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event);\n        }),\n        run(mouseout(), dragApi.delayDrop)\n      ]);\n    };\n\n    var getData$1 = function (event) {\n      return Optional.from(SugarPosition(event.x, event.y));\n    };\n    var getDelta$1 = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n\n    var MouseData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData$1,\n        getDelta: getDelta$1\n    });\n\n    var events$g = function (dragConfig, dragState, updateStartState) {\n      return [run(mousedown(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event.raw;\n          if (raw.button !== 0) {\n            return;\n          }\n          simulatedEvent.stop();\n          var stop$1 = function () {\n            return stop(component, Optional.some(blocker), dragConfig, dragState);\n          };\n          var delayDrop = DelayedFunction(stop$1, 200);\n          var dragApi = {\n            drop: stop$1,\n            delayDrop: delayDrop.schedule,\n            forceDrop: stop$1,\n            move: function (event) {\n              delayDrop.cancel();\n              move$1(component, dragConfig, dragState, MouseData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$c(dragApi));\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        })];\n    };\n    var schema$u = __spreadArrays(schema$t, [output('dragger', { handlers: handlers(events$g) })]);\n\n    var init$d = function (dragApi) {\n      return derive([\n        run(touchstart(), dragApi.forceDrop),\n        run(touchend(), dragApi.drop),\n        run(touchcancel(), dragApi.drop),\n        run(touchmove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event);\n        })\n      ]);\n    };\n\n    var getDataFrom = function (touches) {\n      var touch = touches[0];\n      return Optional.some(SugarPosition(touch.clientX, touch.clientY));\n    };\n    var getData$2 = function (event) {\n      var raw = event.raw;\n      var touches = raw.touches;\n      return touches.length === 1 ? getDataFrom(touches) : Optional.none();\n    };\n    var getDelta$2 = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n\n    var TouchData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData$2,\n        getDelta: getDelta$2\n    });\n\n    var events$h = function (dragConfig, dragState, updateStartState) {\n      var blockerCell = Cell(Optional.none());\n      return [\n        run(touchstart(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          var stop$1 = function () {\n            stop(component, blockerCell.get(), dragConfig, dragState);\n            blockerCell.set(Optional.none());\n          };\n          var dragApi = {\n            drop: stop$1,\n            delayDrop: noop,\n            forceDrop: stop$1,\n            move: function (event) {\n              move$1(component, dragConfig, dragState, TouchData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$d(dragApi));\n          blockerCell.set(Optional.some(blocker));\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        }),\n        run(touchmove(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          move$1(component, dragConfig, dragState, TouchData, simulatedEvent.event);\n        }),\n        run(touchend(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          stop(component, blockerCell.get(), dragConfig, dragState);\n          blockerCell.set(Optional.none());\n        }),\n        run(touchcancel(), function (component) {\n          stop(component, blockerCell.get(), dragConfig, dragState);\n          blockerCell.set(Optional.none());\n        })\n      ];\n    };\n    var schema$v = __spreadArrays(schema$t, [output('dragger', { handlers: handlers(events$h) })]);\n\n    var events$i = function (dragConfig, dragState, updateStartState) {\n      return __spreadArrays(events$g(dragConfig, dragState, updateStartState), events$h(dragConfig, dragState, updateStartState));\n    };\n    var schema$w = __spreadArrays(schema$t, [output('dragger', { handlers: handlers(events$i) })]);\n\n    var mouse = schema$u;\n    var touch = schema$v;\n    var mouseOrTouch = schema$w;\n\n    var DraggingBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        mouse: mouse,\n        touch: touch,\n        mouseOrTouch: mouseOrTouch\n    });\n\n    var init$e = function () {\n      var previous = Optional.none();\n      var startData = Optional.none();\n      var reset = function () {\n        previous = Optional.none();\n        startData = Optional.none();\n      };\n      var calculateDelta = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.getDelta(old, nu);\n        });\n        previous = Optional.some(nu);\n        return result;\n      };\n      var update = function (mode, dragEvent) {\n        return mode.getData(dragEvent).bind(function (nuData) {\n          return calculateDelta(mode, nuData);\n        });\n      };\n      var setStartData = function (data) {\n        startData = Optional.some(data);\n      };\n      var getStartData = function () {\n        return startData;\n      };\n      var readState = constant({});\n      return nu$5({\n        readState: readState,\n        reset: reset,\n        update: update,\n        getStartData: getStartData,\n        setStartData: setStartData\n      });\n    };\n\n    var DragState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$e\n    });\n\n    var Dragging = createModes$1({\n      branchKey: 'mode',\n      branches: DraggingBranches,\n      name: 'dragging',\n      active: {\n        events: function (dragConfig, dragState) {\n          var dragger = dragConfig.dragger;\n          return dragger.handlers(dragConfig, dragState);\n        }\n      },\n      extra: {\n        snap: function (sConfig) {\n          return {\n            sensor: sConfig.sensor,\n            range: sConfig.range,\n            output: sConfig.output,\n            extra: Optional.from(sConfig.extra)\n          };\n        }\n      },\n      state: DragState,\n      apis: DraggingApis\n    });\n\n    var snapWidth = 40;\n    var snapOffset = snapWidth / 2;\n    var calcSnap = function (selectorOpt, td, x, y, width, height) {\n      return selectorOpt.fold(function () {\n        return Dragging.snap({\n          sensor: absolute$3(x - snapOffset, y - snapOffset),\n          range: SugarPosition(width, height),\n          output: absolute$3(Optional.some(x), Optional.some(y)),\n          extra: { td: td }\n        });\n      }, function (selectorHandle) {\n        var sensorLeft = x - snapOffset;\n        var sensorTop = y - snapOffset;\n        var sensorWidth = snapWidth;\n        var sensorHeight = snapWidth;\n        var rect = selectorHandle.element.dom.getBoundingClientRect();\n        return Dragging.snap({\n          sensor: absolute$3(sensorLeft, sensorTop),\n          range: SugarPosition(sensorWidth, sensorHeight),\n          output: absolute$3(Optional.some(x - rect.width / 2), Optional.some(y - rect.height / 2)),\n          extra: { td: td }\n        });\n      });\n    };\n    var getSnapsConfig = function (getSnapPoints, cell, onChange) {\n      var isSameCell = function (cellOpt, td) {\n        return cellOpt.exists(function (currentTd) {\n          return eq$1(currentTd, td);\n        });\n      };\n      return {\n        getSnapPoints: getSnapPoints,\n        leftAttr: 'data-drag-left',\n        topAttr: 'data-drag-top',\n        onSensor: function (component, extra) {\n          var td = extra.td;\n          if (!isSameCell(cell.get(), td)) {\n            cell.set(Optional.some(td));\n            onChange(td);\n          }\n        },\n        mustSnap: true\n      };\n    };\n    var createSelector = function (snaps) {\n      return record(Button.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-selector']\n        },\n        buttonBehaviours: derive$1([\n          Dragging.config({\n            mode: 'mouseOrTouch',\n            blockerClass: 'blocker',\n            snaps: snaps\n          }),\n          Unselecting.config({})\n        ]),\n        eventOrder: {\n          mousedown: [\n            'dragging',\n            'alloy.base.behaviour'\n          ],\n          touchstart: [\n            'dragging',\n            'alloy.base.behaviour'\n          ]\n        }\n      }));\n    };\n    var setup$a = function (editor, sink) {\n      var tlTds = Cell([]);\n      var brTds = Cell([]);\n      var isVisible = Cell(false);\n      var startCell = Cell(Optional.none());\n      var finishCell = Cell(Optional.none());\n      var getTopLeftSnap = function (td) {\n        var box = absolute$1(td);\n        return calcSnap(memTopLeft.getOpt(sink), td, box.x, box.y, box.width, box.height);\n      };\n      var getTopLeftSnaps = function () {\n        return map(tlTds.get(), function (td) {\n          return getTopLeftSnap(td);\n        });\n      };\n      var getBottomRightSnap = function (td) {\n        var box = absolute$1(td);\n        return calcSnap(memBottomRight.getOpt(sink), td, box.right, box.bottom, box.width, box.height);\n      };\n      var getBottomRightSnaps = function () {\n        return map(brTds.get(), function (td) {\n          return getBottomRightSnap(td);\n        });\n      };\n      var topLeftSnaps = getSnapsConfig(getTopLeftSnaps, startCell, function (start) {\n        finishCell.get().each(function (finish) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var bottomRightSnaps = getSnapsConfig(getBottomRightSnaps, finishCell, function (finish) {\n        startCell.get().each(function (start) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var memTopLeft = createSelector(topLeftSnaps);\n      var memBottomRight = createSelector(bottomRightSnaps);\n      var topLeft = build$1(memTopLeft.asSpec());\n      var bottomRight = build$1(memBottomRight.asSpec());\n      var showOrHideHandle = function (selector, cell, isAbove, isBelow) {\n        var cellRect = cell.dom.getBoundingClientRect();\n        remove$6(selector.element, 'display');\n        var viewportHeight = defaultView(SugarElement.fromDom(editor.getBody())).dom.innerHeight;\n        var aboveViewport = isAbove(cellRect);\n        var belowViewport = isBelow(cellRect, viewportHeight);\n        if (aboveViewport || belowViewport) {\n          set$2(selector.element, 'display', 'none');\n        }\n      };\n      var snapTo = function (selector, cell, getSnapConfig, pos) {\n        var snap = getSnapConfig(cell);\n        Dragging.snapTo(selector, snap);\n        var isAbove = function (rect) {\n          return rect[pos] < 0;\n        };\n        var isBelow = function (rect, viewportHeight) {\n          return rect[pos] > viewportHeight;\n        };\n        showOrHideHandle(selector, cell, isAbove, isBelow);\n      };\n      var snapTopLeft = function (cell) {\n        return snapTo(topLeft, cell, getTopLeftSnap, 'top');\n      };\n      var snapLastTopLeft = function () {\n        return startCell.get().each(snapTopLeft);\n      };\n      var snapBottomRight = function (cell) {\n        return snapTo(bottomRight, cell, getBottomRightSnap, 'bottom');\n      };\n      var snapLastBottomRight = function () {\n        return finishCell.get().each(snapBottomRight);\n      };\n      if (detect$3().deviceType.isTouch()) {\n        editor.on('TableSelectionChange', function (e) {\n          if (!isVisible.get()) {\n            attach$1(sink, topLeft);\n            attach$1(sink, bottomRight);\n            isVisible.set(true);\n          }\n          startCell.set(Optional.some(e.start));\n          finishCell.set(Optional.some(e.finish));\n          e.otherCells.each(function (otherCells) {\n            tlTds.set(otherCells.upOrLeftCells);\n            brTds.set(otherCells.downOrRightCells);\n            snapTopLeft(e.start);\n            snapBottomRight(e.finish);\n          });\n        });\n        editor.on('ResizeEditor ResizeWindow ScrollContent', function () {\n          snapLastTopLeft();\n          snapLastBottomRight();\n        });\n        editor.on('TableSelectionClear', function () {\n          if (isVisible.get()) {\n            detach(topLeft);\n            detach(bottomRight);\n            isVisible.set(false);\n          }\n          startCell.set(Optional.none());\n          finishCell.set(Optional.none());\n        });\n      }\n    };\n\n    var isHidden$1 = function (elm) {\n      if (elm.nodeType === 1) {\n        if (elm.nodeName === 'BR' || !!elm.getAttribute('data-mce-bogus')) {\n          return true;\n        }\n        if (elm.getAttribute('data-mce-type') === 'bookmark') {\n          return true;\n        }\n      }\n      return false;\n    };\n    var renderElementPath = function (editor, settings, providersBackstage) {\n      if (!settings.delimiter) {\n        settings.delimiter = '\\xBB';\n      }\n      var getDataPath = function (data) {\n        var parts = data || [];\n        var newPathElements = map(parts, function (part, index) {\n          return Button.sketch({\n            dom: {\n              tag: 'div',\n              classes: ['tox-statusbar__path-item'],\n              attributes: {\n                'role': 'button',\n                'data-index': index,\n                'tab-index': -1,\n                'aria-level': index + 1\n              },\n              innerHtml: part.name\n            },\n            action: function (_btn) {\n              editor.focus();\n              editor.selection.select(part.element);\n              editor.nodeChanged();\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.button(providersBackstage.isDisabled),\n              receivingConfig()\n            ])\n          });\n        });\n        var divider = {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__path-divider'],\n            attributes: { 'aria-hidden': true },\n            innerHtml: ' ' + settings.delimiter + ' '\n          }\n        };\n        return foldl(newPathElements.slice(1), function (acc, element) {\n          var newAcc = acc;\n          newAcc.push(divider);\n          newAcc.push(element);\n          return newAcc;\n        }, [newPathElements[0]]);\n      };\n      var updatePath = function (parents) {\n        var newPath = [];\n        var i = parents.length;\n        while (i-- > 0) {\n          var parent_1 = parents[i];\n          if (parent_1.nodeType === 1 && !isHidden$1(parent_1)) {\n            var args = editor.fire('ResolveName', {\n              name: parent_1.nodeName.toLowerCase(),\n              target: parent_1\n            });\n            if (!args.isDefaultPrevented()) {\n              newPath.push({\n                name: args.name,\n                element: parent_1\n              });\n            }\n            if (args.isPropagationStopped()) {\n              break;\n            }\n          }\n        }\n        return newPath;\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar__path'],\n          attributes: { role: 'navigation' }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'flow',\n            selector: 'div[role=button]'\n          }),\n          Disabling.config({ disabled: providersBackstage.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          config('elementPathEvents', [runOnAttached(function (comp, _e) {\n              editor.shortcuts.add('alt+F11', 'focus statusbar elementpath', function () {\n                return Keying.focusIn(comp);\n              });\n              editor.on('NodeChange', function (e) {\n                var newPath = updatePath(e.parents);\n                if (newPath.length > 0) {\n                  Replacing.set(comp, getDataPath(newPath));\n                } else {\n                  Replacing.set(comp, []);\n                }\n              });\n            })])\n        ]),\n        components: []\n      };\n    };\n\n    var ResizeTypes;\n    (function (ResizeTypes) {\n      ResizeTypes[ResizeTypes['None'] = 0] = 'None';\n      ResizeTypes[ResizeTypes['Both'] = 1] = 'Both';\n      ResizeTypes[ResizeTypes['Vertical'] = 2] = 'Vertical';\n    }(ResizeTypes || (ResizeTypes = {})));\n    var getDimensions = function (editor, deltas, resizeType, originalHeight, originalWidth) {\n      var dimensions = {};\n      dimensions.height = calcCappedSize(originalHeight + deltas.top, getMinHeightSetting(editor), getMaxHeightSetting(editor));\n      if (resizeType === ResizeTypes.Both) {\n        dimensions.width = calcCappedSize(originalWidth + deltas.left, getMinWidthSetting(editor), getMaxWidthSetting(editor));\n      }\n      return dimensions;\n    };\n    var resize$3 = function (editor, deltas, resizeType) {\n      var container = SugarElement.fromDom(editor.getContainer());\n      var dimensions = getDimensions(editor, deltas, resizeType, get$7(container), get$8(container));\n      each$1(dimensions, function (val, dim) {\n        return set$2(container, dim, numToPx(val));\n      });\n      fireResizeEditor(editor);\n    };\n\n    var getResizeType = function (editor) {\n      var fallback = !editor.hasPlugin('autoresize');\n      var resize = editor.getParam('resize', fallback);\n      if (resize === false) {\n        return ResizeTypes.None;\n      } else if (resize === 'both') {\n        return ResizeTypes.Both;\n      } else {\n        return ResizeTypes.Vertical;\n      }\n    };\n    var keyboardHandler = function (editor, resizeType, x, y) {\n      var scale = 20;\n      var delta = SugarPosition(x * scale, y * scale);\n      resize$3(editor, delta, resizeType);\n      return Optional.some(true);\n    };\n    var renderResizeHandler = function (editor, providersBackstage) {\n      var resizeType = getResizeType(editor);\n      if (resizeType === ResizeTypes.None) {\n        return Optional.none();\n      }\n      return Optional.some({\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar__resize-handle'],\n          attributes: { title: providersBackstage.translate('Resize') },\n          innerHtml: get$e('resize-handle', providersBackstage.icons)\n        },\n        behaviours: derive$1([\n          Dragging.config({\n            mode: 'mouse',\n            repositionTarget: false,\n            onDrag: function (_comp, _target, delta) {\n              return resize$3(editor, delta, resizeType);\n            },\n            blockerClass: 'tox-blocker'\n          }),\n          Keying.config({\n            mode: 'special',\n            onLeft: function () {\n              return keyboardHandler(editor, resizeType, -1, 0);\n            },\n            onRight: function () {\n              return keyboardHandler(editor, resizeType, 1, 0);\n            },\n            onUp: function () {\n              return keyboardHandler(editor, resizeType, 0, -1);\n            },\n            onDown: function () {\n              return keyboardHandler(editor, resizeType, 0, 1);\n            }\n          }),\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      });\n    };\n\n    var renderWordCount = function (editor, providersBackstage) {\n      var _a;\n      var replaceCountText = function (comp, count, mode) {\n        return Replacing.set(comp, [text(providersBackstage.translate([\n            '{0} ' + mode,\n            count[mode]\n          ]))]);\n      };\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: ['tox-statusbar__wordcount']\n        },\n        components: [],\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(providersBackstage.isDisabled),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: {\n                mode: 'words',\n                count: {\n                  words: 0,\n                  characters: 0\n                }\n              }\n            }\n          }),\n          config('wordcount-events', [\n            runOnExecute(function (comp) {\n              var currentVal = Representing.getValue(comp);\n              var newMode = currentVal.mode === 'words' ? 'characters' : 'words';\n              Representing.setValue(comp, {\n                mode: newMode,\n                count: currentVal.count\n              });\n              replaceCountText(comp, currentVal.count, newMode);\n            }),\n            runOnAttached(function (comp) {\n              editor.on('wordCountUpdate', function (e) {\n                var mode = Representing.getValue(comp).mode;\n                Representing.setValue(comp, {\n                  mode: mode,\n                  count: e.wordCount\n                });\n                replaceCountText(comp, e.wordCount, mode);\n              });\n            })\n          ])\n        ]),\n        eventOrder: (_a = {}, _a[execute()] = [\n          'disabling',\n          'alloy.base.behaviour',\n          'wordcount-events'\n        ], _a)\n      });\n    };\n\n    var renderStatusbar = function (editor, providersBackstage) {\n      var renderBranding = function () {\n        var label = global$6.translate([\n          'Powered by {0}',\n          'Tiny'\n        ]);\n        var linkHtml = '<a href=\"https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5\" rel=\"noopener\" target=\"_blank\" tabindex=\"-1\" aria-label=\"' + label + '\">' + label + '</a>';\n        return {\n          dom: {\n            tag: 'span',\n            classes: ['tox-statusbar__branding'],\n            innerHtml: linkHtml\n          }\n        };\n      };\n      var getTextComponents = function () {\n        var components = [];\n        if (editor.getParam('elementpath', true, 'boolean')) {\n          components.push(renderElementPath(editor, {}, providersBackstage));\n        }\n        if (editor.hasPlugin('wordcount')) {\n          components.push(renderWordCount(editor, providersBackstage));\n        }\n        if (editor.getParam('branding', true, 'boolean')) {\n          components.push(renderBranding());\n        }\n        if (components.length > 0) {\n          return [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-statusbar__text-container']\n              },\n              components: components\n            }];\n        }\n        return [];\n      };\n      var getComponents = function () {\n        var components = getTextComponents();\n        var resizeHandler = renderResizeHandler(editor, providersBackstage);\n        return components.concat(resizeHandler.toArray());\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar']\n        },\n        components: getComponents()\n      };\n    };\n\n    var setup$b = function (editor) {\n      var _a;\n      var isInline = editor.inline;\n      var mode = isInline ? Inline : Iframe;\n      var header = isStickyToolbar(editor) ? StickyHeader : StaticHeader;\n      var lazyOuterContainer = Optional.none();\n      var platform = detect$3();\n      var isIE = platform.browser.isIE();\n      var platformClasses = isIE ? ['tox-platform-ie'] : [];\n      var isTouch = platform.deviceType.isTouch();\n      var touchPlatformClass = 'tox-platform-touch';\n      var deviceClasses = isTouch ? [touchPlatformClass] : [];\n      var isToolbarBottom = isToolbarLocationBottom(editor);\n      var uiContainer = getUiContainer(editor);\n      var dirAttributes = global$6.isRtl() ? { attributes: { dir: 'rtl' } } : {};\n      var verticalDirAttributes = { attributes: (_a = {}, _a[Attribute] = isToolbarBottom ? AttributeValue.BottomToTop : AttributeValue.TopToBottom, _a) };\n      var lazyHeader = function () {\n        return lazyOuterContainer.bind(OuterContainer.getHeader);\n      };\n      var isHeaderDocked = function () {\n        return header.isDocked(lazyHeader);\n      };\n      var resizeUiMothership = function () {\n        set$2(uiMothership.element, 'width', document.body.clientWidth + 'px');\n      };\n      var makeSinkDefinition = function () {\n        var isGridUiContainer = eq$1(body(), uiContainer) && get$5(uiContainer, 'display') === 'grid';\n        var sinkSpec = {\n          dom: __assign({\n            tag: 'div',\n            classes: [\n              'tox',\n              'tox-silver-sink',\n              'tox-tinymce-aux'\n            ].concat(platformClasses).concat(deviceClasses)\n          }, dirAttributes),\n          behaviours: derive$1([Positioning.config({\n              useFixed: function () {\n                return isHeaderDocked();\n              }\n            })])\n        };\n        var reactiveWidthSpec = {\n          dom: { styles: { width: document.body.clientWidth + 'px' } },\n          events: derive([run(windowResize(), resizeUiMothership)])\n        };\n        return deepMerge(sinkSpec, isGridUiContainer ? reactiveWidthSpec : {});\n      };\n      var sink = build$1(makeSinkDefinition());\n      var lazySink = function () {\n        return Result.value(sink);\n      };\n      var memAnchorBar = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-anchorbar']\n        }\n      });\n      var lazyAnchorBar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return memAnchorBar.getOpt(container);\n        }).getOrDie('Could not find a anchor bar element');\n      };\n      var lazyToolbar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getToolbar(container);\n        }).getOrDie('Could not find more toolbar element');\n      };\n      var lazyThrobber = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getThrobber(container);\n        }).getOrDie('Could not find throbber element');\n      };\n      var backstage = init$8(sink, editor, lazyAnchorBar);\n      var partMenubar = OuterContainer.parts.menubar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-menubar']\n        },\n        backstage: backstage,\n        onEscape: function () {\n          editor.focus();\n        }\n      });\n      var toolbarMode = getToolbarMode(editor);\n      var partToolbar = OuterContainer.parts.toolbar(__assign({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar']\n        },\n        getSink: lazySink,\n        providers: backstage.shared.providers,\n        onEscape: function () {\n          editor.focus();\n        },\n        type: toolbarMode,\n        lazyToolbar: lazyToolbar,\n        lazyHeader: function () {\n          return lazyHeader().getOrDie('Could not find header element');\n        }\n      }, verticalDirAttributes));\n      var partMultipleToolbar = OuterContainer.parts['multiple-toolbar']({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        providers: backstage.shared.providers,\n        onEscape: function () {\n          editor.focus();\n        },\n        type: toolbarMode\n      });\n      var partSocket = OuterContainer.parts.socket({\n        dom: {\n          tag: 'div',\n          classes: ['tox-edit-area']\n        }\n      });\n      var partSidebar = OuterContainer.parts.sidebar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar']\n        }\n      });\n      var partThrobber = OuterContainer.parts.throbber({\n        dom: {\n          tag: 'div',\n          classes: ['tox-throbber']\n        },\n        backstage: backstage\n      });\n      var sb = editor.getParam('statusbar', true, 'boolean');\n      var statusbar = sb && !isInline ? Optional.some(renderStatusbar(editor, backstage.shared.providers)) : Optional.none();\n      var socketSidebarContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar-wrap']\n        },\n        components: [\n          partSocket,\n          partSidebar\n        ]\n      };\n      var hasMultipleToolbar = isMultipleToolbars(editor);\n      var hasToolbar = isToolbarEnabled(editor);\n      var hasMenubar = isMenubarEnabled(editor);\n      var getPartToolbar = function () {\n        if (hasMultipleToolbar) {\n          return [partMultipleToolbar];\n        } else if (hasToolbar) {\n          return [partToolbar];\n        } else {\n          return [];\n        }\n      };\n      var partHeader = OuterContainer.parts.header({\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-editor-header']\n        }, verticalDirAttributes),\n        components: flatten([\n          hasMenubar ? [partMenubar] : [],\n          getPartToolbar(),\n          useFixedContainer(editor) ? [] : [memAnchorBar.asSpec()]\n        ]),\n        sticky: isStickyToolbar(editor),\n        editor: editor,\n        sharedBackstage: backstage.shared\n      });\n      var editorComponents = flatten([\n        isToolbarBottom ? [] : [partHeader],\n        isInline ? [] : [socketSidebarContainer],\n        isToolbarBottom ? [partHeader] : []\n      ]);\n      var editorContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-editor-container']\n        },\n        components: editorComponents\n      };\n      var containerComponents = flatten([\n        [editorContainer],\n        isInline ? [] : statusbar.toArray(),\n        [partThrobber]\n      ]);\n      var isHidden = isDistractionFree(editor);\n      var attributes = __assign(__assign({ role: 'application' }, global$6.isRtl() ? { dir: 'rtl' } : {}), isHidden ? { 'aria-hidden': 'true' } : {});\n      var outerContainer = build$1(OuterContainer.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox',\n            'tox-tinymce'\n          ].concat(isInline ? ['tox-tinymce-inline'] : []).concat(isToolbarBottom ? ['tox-tinymce--toolbar-bottom'] : []).concat(deviceClasses).concat(platformClasses),\n          styles: __assign({ visibility: 'hidden' }, isHidden ? {\n            opacity: '0',\n            border: '0'\n          } : {}),\n          attributes: attributes\n        },\n        components: containerComponents,\n        behaviours: derive$1([\n          receivingConfig(),\n          Disabling.config({ disableClass: 'tox-tinymce--disabled' }),\n          Keying.config({\n            mode: 'cyclic',\n            selector: '.tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle'\n          })\n        ])\n      }));\n      lazyOuterContainer = Optional.some(outerContainer);\n      editor.shortcuts.add('alt+F9', 'focus menubar', function () {\n        OuterContainer.focusMenubar(outerContainer);\n      });\n      editor.shortcuts.add('alt+F10', 'focus toolbar', function () {\n        OuterContainer.focusToolbar(outerContainer);\n      });\n      editor.addCommand('ToggleToolbarDrawer', function () {\n        OuterContainer.toggleToolbarDrawer(outerContainer);\n      });\n      editor.addQueryStateHandler('ToggleToolbarDrawer', function () {\n        return OuterContainer.isToolbarDrawerToggled(outerContainer);\n      });\n      var mothership = takeover(outerContainer);\n      var uiMothership = takeover(sink);\n      setup$3(editor, mothership, uiMothership);\n      var getUi = function () {\n        var channels = {\n          broadcastAll: uiMothership.broadcast,\n          broadcastOn: uiMothership.broadcastOn,\n          register: noop\n        };\n        return { channels: channels };\n      };\n      var setEditorSize = function () {\n        var parsedHeight = numToPx(getHeightWithFallback(editor));\n        var parsedWidth = numToPx(getWidthWithFallback(editor));\n        if (!editor.inline) {\n          if (isValidValue('div', 'width', parsedWidth)) {\n            set$2(outerContainer.element, 'width', parsedWidth);\n          }\n          if (isValidValue('div', 'height', parsedHeight)) {\n            set$2(outerContainer.element, 'height', parsedHeight);\n          } else {\n            set$2(outerContainer.element, 'height', '200px');\n          }\n        }\n        return parsedHeight;\n      };\n      var renderUI = function () {\n        header.setup(editor, backstage.shared, lazyHeader);\n        setup$8(editor, backstage);\n        setup$9(editor, lazySink, backstage);\n        setup$6(editor);\n        setup$7(editor, lazyThrobber, backstage.shared);\n        map$2(getToolbarGroups(editor), function (toolbarGroupButtonConfig, name) {\n          editor.ui.registry.addGroupToolbarButton(name, toolbarGroupButtonConfig);\n        });\n        var _a = editor.ui.registry.getAll(), buttons = _a.buttons, menuItems = _a.menuItems, contextToolbars = _a.contextToolbars, sidebars = _a.sidebars;\n        var toolbarOpt = getMultipleToolbarsSetting(editor);\n        var rawUiConfig = {\n          menuItems: menuItems,\n          menus: getMenus(editor),\n          menubar: getMenubar(editor),\n          toolbar: toolbarOpt.getOrThunk(function () {\n            return getToolbar(editor);\n          }),\n          allowToolbarGroups: toolbarMode === ToolbarMode.floating,\n          buttons: buttons,\n          sidebar: sidebars\n        };\n        register$4(editor, contextToolbars, sink, { backstage: backstage });\n        setup$a(editor, sink);\n        var elm = editor.getElement();\n        var height = setEditorSize();\n        var uiComponents = {\n          mothership: mothership,\n          uiMothership: uiMothership,\n          outerContainer: outerContainer\n        };\n        var args = {\n          targetNode: elm,\n          height: height\n        };\n        return mode.render(editor, uiComponents, rawUiConfig, backstage, args);\n      };\n      return {\n        mothership: mothership,\n        uiMothership: uiMothership,\n        backstage: backstage,\n        renderUI: renderUI,\n        getUi: getUi\n      };\n    };\n\n    var describedBy = function (describedElement, describeElement) {\n      var describeId = Optional.from(get$3(describedElement, 'id')).fold(function () {\n        var id = generate$1('dialog-describe');\n        set$1(describeElement, 'id', id);\n        return id;\n      }, identity);\n      set$1(describedElement, 'aria-describedby', describeId);\n    };\n\n    var labelledBy = function (labelledElement, labelElement) {\n      var labelId = getOpt(labelledElement, 'id').fold(function () {\n        var id = generate$1('dialog-label');\n        set$1(labelElement, 'id', id);\n        return id;\n      }, identity);\n      set$1(labelledElement, 'aria-labelledby', labelId);\n    };\n\n    var schema$x = constant([\n      strict$1('lazySink'),\n      option('dragBlockClass'),\n      defaultedFunction('getBounds', win),\n      defaulted$1('useTabstopAt', always),\n      defaulted$1('eventOrder', {}),\n      field$1('modalBehaviours', [Keying]),\n      onKeyboardHandler('onExecute'),\n      onStrictKeyboardHandler('onEscape')\n    ]);\n    var basic = { sketch: identity };\n    var parts$f = constant([\n      optional({\n        name: 'draghandle',\n        overrides: function (detail, spec) {\n          return {\n            behaviours: derive$1([Dragging.config({\n                mode: 'mouse',\n                getTarget: function (handle) {\n                  return ancestor$2(handle, '[role=\"dialog\"]').getOr(handle);\n                },\n                blockerClass: detail.dragBlockClass.getOrDie(new Error('The drag blocker class was not specified for a dialog with a drag handle: \\n' + JSON.stringify(spec, null, 2)).message),\n                getBounds: detail.getDragBounds\n              })])\n          };\n        }\n      }),\n      required({\n        schema: [strict$1('dom')],\n        name: 'title'\n      }),\n      required({\n        factory: basic,\n        schema: [strict$1('dom')],\n        name: 'close'\n      }),\n      required({\n        factory: basic,\n        schema: [strict$1('dom')],\n        name: 'body'\n      }),\n      optional({\n        factory: basic,\n        schema: [strict$1('dom')],\n        name: 'footer'\n      }),\n      external$1({\n        factory: {\n          sketch: function (spec, detail) {\n            return __assign(__assign({}, spec), {\n              dom: detail.dom,\n              components: detail.components\n            });\n          }\n        },\n        schema: [\n          defaulted$1('dom', {\n            tag: 'div',\n            styles: {\n              position: 'fixed',\n              left: '0px',\n              top: '0px',\n              right: '0px',\n              bottom: '0px'\n            }\n          }),\n          defaulted$1('components', [])\n        ],\n        name: 'blocker'\n      })\n    ]);\n\n    var block = function (component, config, state, getBusySpec) {\n      set$1(component.element, 'aria-busy', true);\n      var root = config.getRoot(component).getOr(component);\n      var blockerBehaviours = derive$1([\n        Keying.config({\n          mode: 'special',\n          onTab: function () {\n            return Optional.some(true);\n          },\n          onShiftTab: function () {\n            return Optional.some(true);\n          }\n        }),\n        Focusing.config({})\n      ]);\n      var blockSpec = getBusySpec(root, blockerBehaviours);\n      var blocker = root.getSystem().build(blockSpec);\n      Replacing.append(root, premade$1(blocker));\n      if (blocker.hasConfigured(Keying)) {\n        Keying.focusIn(blocker);\n      }\n      if (!state.isBlocked()) {\n        config.onBlock(component);\n      }\n      state.blockWith(function () {\n        return Replacing.remove(root, blocker);\n      });\n    };\n    var unblock = function (component, config, state) {\n      remove$1(component.element, 'aria-busy');\n      if (state.isBlocked()) {\n        config.onUnblock(component);\n      }\n      state.clear();\n    };\n\n    var BlockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        block: block,\n        unblock: unblock\n    });\n\n    var BlockingSchema = [\n      defaultedFunction('getRoot', Optional.none),\n      onHandler('onBlock'),\n      onHandler('onUnblock')\n    ];\n\n    var init$f = function () {\n      var blocker = destroyable();\n      var blockWith = function (destroy) {\n        blocker.set({ destroy: destroy });\n      };\n      return nu$5({\n        readState: blocker.isSet,\n        blockWith: blockWith,\n        clear: blocker.clear,\n        isBlocked: blocker.isSet\n      });\n    };\n\n    var BlockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$f\n    });\n\n    var Blocking = create$1({\n      fields: BlockingSchema,\n      name: 'blocking',\n      apis: BlockingApis,\n      state: BlockingState\n    });\n\n    var factory$i = function (detail, components, spec, externals) {\n      var _a;\n      var dialogComp = Cell(Optional.none());\n      var showDialog = function (dialog) {\n        dialogComp.set(Optional.some(dialog));\n        var sink = detail.lazySink(dialog).getOrDie();\n        var externalBlocker = externals.blocker();\n        var blocker = sink.getSystem().build(__assign(__assign({}, externalBlocker), {\n          components: externalBlocker.components.concat([premade$1(dialog)]),\n          behaviours: derive$1([\n            Focusing.config({}),\n            config('dialog-blocker-events', [runOnSource(focusin(), function () {\n                Keying.focusIn(dialog);\n              })])\n          ])\n        }));\n        attach$1(sink, blocker);\n        Keying.focusIn(dialog);\n      };\n      var hideDialog = function (dialog) {\n        dialogComp.set(Optional.none());\n        parent(dialog.element).each(function (blockerDom) {\n          dialog.getSystem().getByDom(blockerDom).each(function (blocker) {\n            detach(blocker);\n          });\n        });\n      };\n      var getDialogBody = function (dialog) {\n        return getPartOrDie(dialog, detail, 'body');\n      };\n      var getDialogFooter = function (dialog) {\n        return getPartOrDie(dialog, detail, 'footer');\n      };\n      var setBusy = function (dialog, getBusySpec) {\n        Blocking.block(dialog, getBusySpec);\n      };\n      var setIdle = function (dialog) {\n        Blocking.unblock(dialog);\n      };\n      var modalEventsId = generate$1('modal-events');\n      var eventOrder = __assign(__assign({}, detail.eventOrder), (_a = {}, _a[attachedToDom()] = [modalEventsId].concat(detail.eventOrder['alloy.system.attached'] || []), _a));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: {\n          show: showDialog,\n          hide: hideDialog,\n          getBody: getDialogBody,\n          getFooter: getDialogFooter,\n          setIdle: setIdle,\n          setBusy: setBusy\n        },\n        eventOrder: eventOrder,\n        domModification: {\n          attributes: {\n            'role': 'dialog',\n            'aria-modal': 'true'\n          }\n        },\n        behaviours: augment(detail.modalBehaviours, [\n          Replacing.config({}),\n          Keying.config({\n            mode: 'cyclic',\n            onEnter: detail.onExecute,\n            onEscape: detail.onEscape,\n            useTabstopAt: detail.useTabstopAt\n          }),\n          Blocking.config({ getRoot: dialogComp.get }),\n          config(modalEventsId, [runOnAttached(function (c) {\n              labelledBy(c.element, getPartOrDie(c, detail, 'title').element);\n              describedBy(c.element, getPartOrDie(c, detail, 'body').element);\n            })])\n        ])\n      };\n    };\n    var ModalDialog = composite$1({\n      name: 'ModalDialog',\n      configFields: schema$x(),\n      partFields: parts$f(),\n      factory: factory$i,\n      apis: {\n        show: function (apis, dialog) {\n          apis.show(dialog);\n        },\n        hide: function (apis, dialog) {\n          apis.hide(dialog);\n        },\n        getBody: function (apis, dialog) {\n          return apis.getBody(dialog);\n        },\n        getFooter: function (apis, dialog) {\n          return apis.getFooter(dialog);\n        },\n        setBusy: function (apis, dialog, getBusySpec) {\n          apis.setBusy(dialog, getBusySpec);\n        },\n        setIdle: function (apis, dialog) {\n          apis.setIdle(dialog);\n        }\n      }\n    });\n\n    var dialogToggleMenuItemSchema = objOf([\n      strictString('type'),\n      strictString('name')\n    ].concat(commonMenuItemFields));\n    var dialogToggleMenuItemDataProcessor = boolean;\n\n    var baseFooterButtonFields = [\n      field('name', 'name', defaultedThunk(function () {\n        return generate$1('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedStringEnum('align', 'end', [\n        'start',\n        'end'\n      ]),\n      defaultedBoolean('primary', false),\n      defaultedBoolean('disabled', false)\n    ];\n    var dialogFooterButtonFields = __spreadArrays(baseFooterButtonFields, [strictString('text')]);\n    var normalFooterButtonFields = __spreadArrays([strictStringEnum('type', [\n        'submit',\n        'cancel',\n        'custom'\n      ])], dialogFooterButtonFields);\n    var menuFooterButtonFields = __spreadArrays([\n      strictStringEnum('type', ['menu']),\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      strictArrayOf('items', dialogToggleMenuItemSchema)\n    ], baseFooterButtonFields);\n    var dialogFooterButtonSchema = choose$1('type', {\n      submit: normalFooterButtonFields,\n      cancel: normalFooterButtonFields,\n      custom: normalFooterButtonFields,\n      menu: menuFooterButtonFields\n    });\n\n    var alertBannerFields = [\n      strictString('type'),\n      strictString('text'),\n      strictStringEnum('level', [\n        'info',\n        'warn',\n        'error',\n        'success'\n      ]),\n      strictString('icon'),\n      defaulted$1('url', '')\n    ];\n    var alertBannerSchema = objOf(alertBannerFields);\n\n    var createBarFields = function (itemsField) {\n      return [\n        strictString('type'),\n        itemsField\n      ];\n    };\n\n    var buttonFields = [\n      strictString('type'),\n      strictString('text'),\n      defaultedBoolean('disabled', false),\n      defaultedBoolean('primary', false),\n      field('name', 'name', defaultedThunk(function () {\n        return generate$1('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedBoolean('borderless', false)\n    ];\n    var buttonSchema = objOf(buttonFields);\n\n    var checkboxFields = [\n      strictString('type'),\n      strictString('name'),\n      strictString('label'),\n      defaultedBoolean('disabled', false)\n    ];\n    var checkboxSchema = objOf(checkboxFields);\n    var checkboxDataProcessor = boolean;\n\n    var formComponentFields = [\n      strictString('type'),\n      strictString('name')\n    ];\n    var formComponentWithLabelFields = formComponentFields.concat([optionString('label')]);\n\n    var collectionFields = formComponentWithLabelFields.concat([defaulted$1('columns', 'auto')]);\n    var collectionSchema = objOf(collectionFields);\n    var collectionDataProcessor = arrOfObj$1([\n      strictString('value'),\n      strictString('text'),\n      strictString('icon')\n    ]);\n\n    var colorInputFields = formComponentWithLabelFields;\n    var colorInputSchema = objOf(colorInputFields);\n    var colorInputDataProcessor = string;\n\n    var colorPickerFields = formComponentWithLabelFields;\n    var colorPickerSchema = objOf(colorPickerFields);\n    var colorPickerDataProcessor = string;\n\n    var customEditorFields = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      strictString('scriptId'),\n      strictString('scriptUrl'),\n      defaultedPostMsg('settings', undefined)\n    ]);\n    var customEditorFieldsOld = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      strictFunction('init')\n    ]);\n    var customEditorSchema = valueOf(function (v) {\n      return asRaw('customeditor.old', objOfOnly(customEditorFieldsOld), v).orThunk(function () {\n        return asRaw('customeditor.new', objOfOnly(customEditorFields), v);\n      });\n    });\n    var customEditorDataProcessor = string;\n\n    var dropZoneFields = formComponentWithLabelFields;\n    var dropZoneSchema = objOf(dropZoneFields);\n    var dropZoneDataProcessor = arrOfVal();\n\n    var createGridFields = function (itemsField) {\n      return [\n        strictString('type'),\n        strictNumber('columns'),\n        itemsField\n      ];\n    };\n\n    var htmlPanelFields = [\n      strictString('type'),\n      strictString('html'),\n      defaultedStringEnum('presets', 'presentation', [\n        'presentation',\n        'document'\n      ])\n    ];\n    var htmlPanelSchema = objOf(htmlPanelFields);\n\n    var iframeFields = formComponentWithLabelFields.concat([defaultedBoolean('sandboxed', true)]);\n    var iframeSchema = objOf(iframeFields);\n    var iframeDataProcessor = string;\n\n    var imageToolsFields = formComponentWithLabelFields.concat([strictOf('currentState', objOf([\n        strict$1('blob'),\n        strictString('url')\n      ]))]);\n    var imageToolsSchema = objOf(imageToolsFields);\n\n    var inputFields = formComponentWithLabelFields.concat([\n      optionString('inputMode'),\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var inputSchema = objOf(inputFields);\n    var inputDataProcessor = string;\n\n    var createLabelFields = function (itemsField) {\n      return [\n        strictString('type'),\n        strictString('label'),\n        itemsField\n      ];\n    };\n\n    var listBoxSingleItemFields = [\n      strictString('text'),\n      strictString('value')\n    ];\n    var listBoxNestedItemFields = [\n      strictString('text'),\n      strictArrayOf('items', thunkOf('items', function () {\n        return listBoxItemSchema;\n      }))\n    ];\n    var listBoxItemSchema = oneOf([\n      objOf(listBoxSingleItemFields),\n      objOf(listBoxNestedItemFields)\n    ]);\n    var listBoxFields = formComponentWithLabelFields.concat([\n      strictArrayOf('items', listBoxItemSchema),\n      defaultedBoolean('disabled', false)\n    ]);\n    var listBoxSchema = objOf(listBoxFields);\n    var listBoxDataProcessor = string;\n\n    var selectBoxFields = formComponentWithLabelFields.concat([\n      strictArrayOfObj('items', [\n        strictString('text'),\n        strictString('value')\n      ]),\n      defaultedNumber('size', 1),\n      defaultedBoolean('disabled', false)\n    ]);\n    var selectBoxSchema = objOf(selectBoxFields);\n    var selectBoxDataProcessor = string;\n\n    var sizeInputFields = formComponentWithLabelFields.concat([\n      defaultedBoolean('constrain', true),\n      defaultedBoolean('disabled', false)\n    ]);\n    var sizeInputSchema = objOf(sizeInputFields);\n    var sizeInputDataProcessor = objOf([\n      strictString('width'),\n      strictString('height')\n    ]);\n\n    var tableFields = [\n      strictString('type'),\n      strictArrayOf('header', string),\n      strictArrayOf('cells', arrOf(string))\n    ];\n    var tableSchema = objOf(tableFields);\n\n    var textAreaFields = formComponentWithLabelFields.concat([\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var textAreaSchema = objOf(textAreaFields);\n    var textAreaDataProcessor = string;\n\n    var urlInputFields = formComponentWithLabelFields.concat([\n      defaultedStringEnum('filetype', 'file', [\n        'image',\n        'media',\n        'file'\n      ]),\n      defaulted$1('disabled', false)\n    ]);\n    var urlInputSchema = objOf(urlInputFields);\n    var urlInputDataProcessor = objOf([\n      strictString('value'),\n      defaulted$1('meta', {})\n    ]);\n\n    var createItemsField = function (name) {\n      return field('items', 'items', strict(), arrOf(valueOf(function (v) {\n        return asRaw('Checking item of ' + name, itemSchema$3, v).fold(function (sErr) {\n          return Result.error(formatError(sErr));\n        }, function (passValue) {\n          return Result.value(passValue);\n        });\n      })));\n    };\n    var itemSchema$3 = valueThunkOf(function () {\n      return chooseProcessor('type', {\n        alertbanner: alertBannerSchema,\n        bar: objOf(createBarFields(createItemsField('bar'))),\n        button: buttonSchema,\n        checkbox: checkboxSchema,\n        colorinput: colorInputSchema,\n        colorpicker: colorPickerSchema,\n        dropzone: dropZoneSchema,\n        grid: objOf(createGridFields(createItemsField('grid'))),\n        iframe: iframeSchema,\n        input: inputSchema,\n        listbox: listBoxSchema,\n        selectbox: selectBoxSchema,\n        sizeinput: sizeInputSchema,\n        textarea: textAreaSchema,\n        urlinput: urlInputSchema,\n        customeditor: customEditorSchema,\n        htmlpanel: htmlPanelSchema,\n        imagetools: imageToolsSchema,\n        collection: collectionSchema,\n        label: objOf(createLabelFields(createItemsField('label'))),\n        table: tableSchema,\n        panel: panelSchema\n      });\n    });\n    var panelFields = [\n      strictString('type'),\n      defaulted$1('classes', []),\n      strictArrayOf('items', itemSchema$3)\n    ];\n    var panelSchema = objOf(panelFields);\n\n    var tabFields = [\n      field('name', 'name', defaultedThunk(function () {\n        return generate$1('tab-name');\n      }), string),\n      strictString('title'),\n      strictArrayOf('items', itemSchema$3)\n    ];\n    var tabPanelFields = [\n      strictString('type'),\n      strictArrayOfObj('tabs', tabFields)\n    ];\n    var tabPanelSchema = objOf(tabPanelFields);\n\n    var dialogButtonFields = dialogFooterButtonFields;\n    var dialogButtonSchema = dialogFooterButtonSchema;\n    var dialogSchema = objOf([\n      strictString('title'),\n      strictOf('body', chooseProcessor('type', {\n        panel: panelSchema,\n        tabpanel: tabPanelSchema\n      })),\n      defaultedString('size', 'normal'),\n      strictArrayOf('buttons', dialogButtonSchema),\n      defaulted$1('initialData', {}),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onChange', noop),\n      defaultedFunction('onSubmit', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onCancel', noop),\n      defaulted$1('onTabChange', noop)\n    ]);\n    var createDialog = function (spec) {\n      return asRaw('dialog', dialogSchema, spec);\n    };\n\n    var urlDialogButtonSchema = objOf(__spreadArrays([strictStringEnum('type', [\n        'cancel',\n        'custom'\n      ])], dialogButtonFields));\n    var urlDialogSchema = objOf([\n      strictString('title'),\n      strictString('url'),\n      optionNumber('height'),\n      optionNumber('width'),\n      optionArrayOf('buttons', urlDialogButtonSchema),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onCancel', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onMessage', noop)\n    ]);\n    var createUrlDialog = function (spec) {\n      return asRaw('dialog', urlDialogSchema, spec);\n    };\n\n    var getAllObjects = function (obj) {\n      if (isObject(obj)) {\n        return [obj].concat(bind(values(obj), getAllObjects));\n      } else if (isArray(obj)) {\n        return bind(obj, getAllObjects);\n      } else {\n        return [];\n      }\n    };\n\n    var isNamedItem = function (obj) {\n      return isString(obj.type) && isString(obj.name);\n    };\n    var dataProcessors = {\n      checkbox: checkboxDataProcessor,\n      colorinput: colorInputDataProcessor,\n      colorpicker: colorPickerDataProcessor,\n      dropzone: dropZoneDataProcessor,\n      input: inputDataProcessor,\n      iframe: iframeDataProcessor,\n      sizeinput: sizeInputDataProcessor,\n      selectbox: selectBoxDataProcessor,\n      listbox: listBoxDataProcessor,\n      size: sizeInputDataProcessor,\n      textarea: textAreaDataProcessor,\n      urlinput: urlInputDataProcessor,\n      customeditor: customEditorDataProcessor,\n      collection: collectionDataProcessor,\n      togglemenuitem: dialogToggleMenuItemDataProcessor\n    };\n    var getDataProcessor = function (item) {\n      return Optional.from(dataProcessors[item.type]);\n    };\n    var getNamedItems = function (structure) {\n      return filter(getAllObjects(structure), isNamedItem);\n    };\n\n    var createDataValidator = function (structure) {\n      var namedItems = getNamedItems(structure);\n      var fields = bind(namedItems, function (item) {\n        return getDataProcessor(item).fold(function () {\n          return [];\n        }, function (schema) {\n          return [strictOf(item.name, schema)];\n        });\n      });\n      return objOf(fields);\n    };\n\n    var extract$1 = function (structure) {\n      var internalDialog = getOrDie(createDialog(structure));\n      var dataValidator = createDataValidator(structure);\n      var initialData = structure.initialData;\n      return {\n        internalDialog: internalDialog,\n        dataValidator: dataValidator,\n        initialData: initialData\n      };\n    };\n    var DialogManager = {\n      open: function (factory, structure) {\n        var extraction = extract$1(structure);\n        return factory(extraction.internalDialog, extraction.initialData, extraction.dataValidator);\n      },\n      openUrl: function (factory, structure) {\n        var internalDialog = getOrDie(createUrlDialog(structure));\n        return factory(internalDialog);\n      },\n      redial: function (structure) {\n        return extract$1(structure);\n      }\n    };\n\n    var toValidValues = function (values) {\n      var errors = [];\n      var result = {};\n      each$1(values, function (value, name) {\n        value.fold(function () {\n          errors.push(name);\n        }, function (v) {\n          result[name] = v;\n        });\n      });\n      return errors.length > 0 ? Result.error(errors) : Result.value(result);\n    };\n\n    var renderBodyPanel = function (spec, backstage) {\n      var memForm = record(Form.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form'].concat(spec.classes)\n          },\n          components: map(spec.items, function (item) {\n            return interpretInForm(parts, item, backstage);\n          })\n        };\n      }));\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [memForm.asSpec()]\n          }],\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          }),\n          ComposingConfigs.memento(memForm),\n          RepresentingConfigs.memento(memForm, {\n            postprocess: function (formValue) {\n              return toValidValues(formValue).fold(function (err) {\n                console.error(err);\n                return {};\n              }, function (vals) {\n                return vals;\n              });\n            }\n          })\n        ])\n      };\n    };\n\n    var factory$j = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events$7(detail.action),\n        behaviours: augment(detail.tabButtonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          })\n        ]),\n        domModification: detail.domModification\n      };\n    };\n    var TabButton = single$2({\n      name: 'TabButton',\n      configFields: [\n        defaulted$1('uid', undefined),\n        strict$1('value'),\n        field('dom', 'dom', mergeWithThunk(function () {\n          return {\n            attributes: {\n              'role': 'tab',\n              'id': generate$1('aria'),\n              'aria-selected': 'false'\n            }\n          };\n        }), anyValue$1()),\n        option('action'),\n        defaulted$1('domModification', {}),\n        field$1('tabButtonBehaviours', [\n          Focusing,\n          Keying,\n          Representing\n        ]),\n        strict$1('view')\n      ],\n      factory: factory$j\n    });\n\n    var schema$y = constant([\n      strict$1('tabs'),\n      strict$1('dom'),\n      defaulted$1('clickToDismiss', false),\n      field$1('tabbarBehaviours', [\n        Highlighting,\n        Keying\n      ]),\n      markers([\n        'tabClass',\n        'selectedClass'\n      ])\n    ]);\n    var tabsPart = group({\n      factory: TabButton,\n      name: 'tabs',\n      unit: 'tab',\n      overrides: function (barDetail) {\n        var dismissTab$1 = function (tabbar, button) {\n          Highlighting.dehighlight(tabbar, button);\n          emitWith(tabbar, dismissTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        var changeTab$1 = function (tabbar, button) {\n          Highlighting.highlight(tabbar, button);\n          emitWith(tabbar, changeTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        return {\n          action: function (button) {\n            var tabbar = button.getSystem().getByUid(barDetail.uid).getOrDie();\n            var activeButton = Highlighting.isHighlighted(tabbar, button);\n            var response = function () {\n              if (activeButton && barDetail.clickToDismiss) {\n                return dismissTab$1;\n              } else if (!activeButton) {\n                return changeTab$1;\n              } else {\n                return noop;\n              }\n            }();\n            response(tabbar, button);\n          },\n          domModification: { classes: [barDetail.markers.tabClass] }\n        };\n      }\n    });\n    var parts$g = constant([tabsPart]);\n\n    var factory$k = function (detail, components, _spec, _externals) {\n      return {\n        'uid': detail.uid,\n        'dom': detail.dom,\n        components: components,\n        'debug.sketcher': 'Tabbar',\n        'domModification': { attributes: { role: 'tablist' } },\n        'behaviours': augment(detail.tabbarBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedClass,\n            itemClass: detail.markers.tabClass,\n            onHighlight: function (tabbar, tab) {\n              set$1(tab.element, 'aria-selected', 'true');\n            },\n            onDehighlight: function (tabbar, tab) {\n              set$1(tab.element, 'aria-selected', 'false');\n            }\n          }),\n          Keying.config({\n            mode: 'flow',\n            getInitial: function (tabbar) {\n              return Highlighting.getHighlighted(tabbar).map(function (tab) {\n                return tab.element;\n              });\n            },\n            selector: '.' + detail.markers.tabClass,\n            executeOnMove: true\n          })\n        ])\n      };\n    };\n    var Tabbar = composite$1({\n      name: 'Tabbar',\n      configFields: schema$y(),\n      partFields: parts$g(),\n      factory: factory$k\n    });\n\n    var factory$l = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.tabviewBehaviours, [Replacing.config({})]),\n        domModification: { attributes: { role: 'tabpanel' } }\n      };\n    };\n    var Tabview = single$2({\n      name: 'Tabview',\n      configFields: [field$1('tabviewBehaviours', [Replacing])],\n      factory: factory$l\n    });\n\n    var schema$z = constant([\n      defaulted$1('selectFirst', true),\n      onHandler('onChangeTab'),\n      onHandler('onDismissTab'),\n      defaulted$1('tabs', []),\n      field$1('tabSectionBehaviours', [])\n    ]);\n    var barPart = required({\n      factory: Tabbar,\n      schema: [\n        strict$1('dom'),\n        strictObjOf('markers', [\n          strict$1('tabClass'),\n          strict$1('selectedClass')\n        ])\n      ],\n      name: 'tabbar',\n      defaults: function (detail) {\n        return { tabs: detail.tabs };\n      }\n    });\n    var viewPart = required({\n      factory: Tabview,\n      name: 'tabview'\n    });\n    var parts$h = constant([\n      barPart,\n      viewPart\n    ]);\n\n    var factory$m = function (detail, components, _spec, _externals) {\n      var changeTab$1 = function (button) {\n        var tabValue = Representing.getValue(button);\n        getPart(button, detail, 'tabview').each(function (tabview) {\n          var tabWithValue = find(detail.tabs, function (t) {\n            return t.value === tabValue;\n          });\n          tabWithValue.each(function (tabData) {\n            var panel = tabData.view();\n            getOpt(button.element, 'id').each(function (id) {\n              set$1(tabview.element, 'aria-labelledby', id);\n            });\n            Replacing.set(tabview, panel);\n            detail.onChangeTab(tabview, button, panel);\n          });\n        });\n      };\n      var changeTabBy = function (section, byPred) {\n        getPart(section, detail, 'tabbar').each(function (tabbar) {\n          byPred(tabbar).each(emitExecute);\n        });\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$d(detail.tabSectionBehaviours),\n        events: derive(flatten([\n          detail.selectFirst ? [runOnAttached(function (section, _simulatedEvent) {\n              changeTabBy(section, Highlighting.getFirst);\n            })] : [],\n          [\n            run(changeTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event.button;\n              changeTab$1(button);\n            }),\n            run(dismissTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event.button;\n              detail.onDismissTab(section, button);\n            })\n          ]\n        ])),\n        apis: {\n          getViewItems: function (section) {\n            return getPart(section, detail, 'tabview').map(function (tabview) {\n              return Replacing.contents(tabview);\n            }).getOr([]);\n          },\n          showTab: function (section, tabKey) {\n            var getTabIfNotActive = function (tabbar) {\n              var candidates = Highlighting.getCandidates(tabbar);\n              var optTab = find(candidates, function (c) {\n                return Representing.getValue(c) === tabKey;\n              });\n              return optTab.filter(function (tab) {\n                return !Highlighting.isHighlighted(tabbar, tab);\n              });\n            };\n            changeTabBy(section, getTabIfNotActive);\n          }\n        }\n      };\n    };\n    var TabSection = composite$1({\n      name: 'TabSection',\n      configFields: schema$z(),\n      partFields: parts$h(),\n      factory: factory$m,\n      apis: {\n        getViewItems: function (apis, component) {\n          return apis.getViewItems(component);\n        },\n        showTab: function (apis, component, tabKey) {\n          apis.showTab(component, tabKey);\n        }\n      }\n    });\n\n    var measureHeights = function (allTabs, tabview, tabviewComp) {\n      return map(allTabs, function (_tab, i) {\n        Replacing.set(tabviewComp, allTabs[i].view());\n        var rect = tabview.dom.getBoundingClientRect();\n        Replacing.set(tabviewComp, []);\n        return rect.height;\n      });\n    };\n    var getMaxHeight = function (heights) {\n      return head(sort(heights, function (a, b) {\n        if (a > b) {\n          return -1;\n        } else if (a < b) {\n          return +1;\n        } else {\n          return 0;\n        }\n      }));\n    };\n    var getMaxTabviewHeight = function (dialog, tabview, tablist) {\n      var documentElement$1 = documentElement(dialog).dom;\n      var rootElm = ancestor$2(dialog, '.tox-dialog-wrap').getOr(dialog);\n      var isFixed = get$5(rootElm, 'position') === 'fixed';\n      var maxHeight;\n      if (isFixed) {\n        maxHeight = Math.max(documentElement$1.clientHeight, window.innerHeight);\n      } else {\n        maxHeight = Math.max(documentElement$1.offsetHeight, documentElement$1.scrollHeight);\n      }\n      var tabviewHeight = get$7(tabview);\n      var isTabListBeside = tabview.dom.offsetLeft >= tablist.dom.offsetLeft + get$8(tablist);\n      var currentTabHeight = isTabListBeside ? Math.max(get$7(tablist), tabviewHeight) : tabviewHeight;\n      var dialogTopMargin = parseInt(get$5(dialog, 'margin-top'), 10) || 0;\n      var dialogBottomMargin = parseInt(get$5(dialog, 'margin-bottom'), 10) || 0;\n      var dialogHeight = get$7(dialog) + dialogTopMargin + dialogBottomMargin;\n      var chromeHeight = dialogHeight - currentTabHeight;\n      return maxHeight - chromeHeight;\n    };\n    var showTab = function (allTabs, comp) {\n      head(allTabs).each(function (tab) {\n        return TabSection.showTab(comp, tab.value);\n      });\n    };\n    var setTabviewHeight = function (tabview, height) {\n      set$2(tabview, 'height', height + 'px');\n      if (!detect$3().browser.isIE()) {\n        set$2(tabview, 'flex-basis', height + 'px');\n      } else {\n        remove$6(tabview, 'flex-basis');\n      }\n    };\n    var updateTabviewHeight = function (dialogBody, tabview, maxTabHeight) {\n      ancestor$2(dialogBody, '[role=\"dialog\"]').each(function (dialog) {\n        descendant$1(dialog, '[role=\"tablist\"]').each(function (tablist) {\n          maxTabHeight.get().map(function (height) {\n            set$2(tabview, 'height', '0');\n            set$2(tabview, 'flex-basis', '0');\n            return Math.min(height, getMaxTabviewHeight(dialog, tabview, tablist));\n          }).each(function (height) {\n            setTabviewHeight(tabview, height);\n          });\n        });\n      });\n    };\n    var getTabview = function (dialog) {\n      return descendant$1(dialog, '[role=\"tabpanel\"]');\n    };\n    var setMode = function (allTabs) {\n      var smartTabHeight = function () {\n        var maxTabHeight = Cell(Optional.none());\n        var extraEvents = [\n          runOnAttached(function (comp) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              set$2(tabview, 'visibility', 'hidden');\n              comp.getSystem().getByDom(tabview).toOptional().each(function (tabviewComp) {\n                var heights = measureHeights(allTabs, tabview, tabviewComp);\n                var maxTabHeightOpt = getMaxHeight(heights);\n                maxTabHeight.set(maxTabHeightOpt);\n              });\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n              remove$6(tabview, 'visibility');\n              showTab(allTabs, comp);\n              global$2.requestAnimationFrame(function () {\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              });\n            });\n          }),\n          run(windowResize(), function (comp) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n            });\n          }),\n          run(formResizeEvent, function (comp, _se) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              var oldFocus = active(getRootNode(tabview));\n              set$2(tabview, 'visibility', 'hidden');\n              var oldHeight = getRaw(tabview, 'height').map(function (h) {\n                return parseInt(h, 10);\n              });\n              remove$6(tabview, 'height');\n              remove$6(tabview, 'flex-basis');\n              var newHeight = tabview.dom.getBoundingClientRect().height;\n              var hasGrown = oldHeight.forall(function (h) {\n                return newHeight > h;\n              });\n              if (hasGrown) {\n                maxTabHeight.set(Optional.from(newHeight));\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              } else {\n                oldHeight.each(function (h) {\n                  setTabviewHeight(tabview, h);\n                });\n              }\n              remove$6(tabview, 'visibility');\n              oldFocus.each(focus$1);\n            });\n          })\n        ];\n        var selectFirst = false;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      var naiveTabHeight = function () {\n        var extraEvents = [];\n        var selectFirst = true;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      return {\n        smartTabHeight: smartTabHeight,\n        naiveTabHeight: naiveTabHeight\n      };\n    };\n\n    var SendDataToSectionChannel = 'send-data-to-section';\n    var SendDataToViewChannel = 'send-data-to-view';\n    var renderTabPanel = function (spec, backstage) {\n      var storedValue = Cell({});\n      var updateDataWithForm = function (form) {\n        var formData = Representing.getValue(form);\n        var validData = toValidValues(formData).getOr({});\n        var currentData = storedValue.get();\n        var newData = deepMerge(currentData, validData);\n        storedValue.set(newData);\n      };\n      var setDataOnForm = function (form) {\n        var tabData = storedValue.get();\n        Representing.setValue(form, tabData);\n      };\n      var oldTab = Cell(null);\n      var allTabs = map(spec.tabs, function (tab) {\n        return {\n          value: tab.name,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__body-nav-item'],\n            innerHtml: backstage.shared.providers.translate(tab.title)\n          },\n          view: function () {\n            return [Form.sketch(function (parts) {\n                return {\n                  dom: {\n                    tag: 'div',\n                    classes: ['tox-form']\n                  },\n                  components: map(tab.items, function (item) {\n                    return interpretInForm(parts, item, backstage);\n                  }),\n                  formBehaviours: derive$1([\n                    Keying.config({\n                      mode: 'acyclic',\n                      useTabstopAt: not(isPseudoStop)\n                    }),\n                    config('TabView.form.events', [\n                      runOnAttached(setDataOnForm),\n                      runOnDetached(updateDataWithForm)\n                    ]),\n                    Receiving.config({\n                      channels: wrapAll$1([\n                        {\n                          key: SendDataToSectionChannel,\n                          value: { onReceive: updateDataWithForm }\n                        },\n                        {\n                          key: SendDataToViewChannel,\n                          value: { onReceive: setDataOnForm }\n                        }\n                      ])\n                    })\n                  ])\n                };\n              })];\n          }\n        };\n      });\n      var tabMode = setMode(allTabs).smartTabHeight;\n      return TabSection.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        onChangeTab: function (section, button, _viewItems) {\n          var name = Representing.getValue(button);\n          emitWith(section, formTabChangeEvent, {\n            name: name,\n            oldName: oldTab.get()\n          });\n          oldTab.set(name);\n        },\n        tabs: allTabs,\n        components: [\n          TabSection.parts.tabbar({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-nav']\n            },\n            components: [Tabbar.parts.tabs({})],\n            markers: {\n              tabClass: 'tox-tab',\n              selectedClass: 'tox-dialog__body-nav-item--active'\n            },\n            tabbarBehaviours: derive$1([Tabstopping.config({})])\n          }),\n          TabSection.parts.tabview({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            }\n          })\n        ],\n        selectFirst: tabMode.selectFirst,\n        tabSectionBehaviours: derive$1([\n          config('tabpanel', tabMode.extraEvents),\n          Keying.config({ mode: 'acyclic' }),\n          Composing.config({\n            find: function (comp) {\n              return head(TabSection.getViewItems(comp));\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (tsection) {\n                tsection.getSystem().broadcastOn([SendDataToSectionChannel], {});\n                return storedValue.get();\n              },\n              setValue: function (tsection, value) {\n                storedValue.set(value);\n                tsection.getSystem().broadcastOn([SendDataToViewChannel], {});\n              }\n            }\n          })\n        ])\n      });\n    };\n\n    var dialogChannel = generate$1('update-dialog');\n    var titleChannel = generate$1('update-title');\n    var bodyChannel = generate$1('update-body');\n    var footerChannel = generate$1('update-footer');\n    var bodySendMessageChannel = generate$1('body-send-message');\n\n    var renderBody = function (spec, id, backstage, ariaAttrs) {\n      var renderComponents = function (incoming) {\n        switch (incoming.body.type) {\n        case 'tabpanel': {\n            return [renderTabPanel(incoming.body, backstage)];\n          }\n        default: {\n            return [renderBodyPanel(incoming.body, backstage)];\n          }\n        }\n      };\n      var updateState = function (_comp, incoming) {\n        return Optional.some({\n          isTabPanel: function () {\n            return incoming.body.type === 'tabpanel';\n          }\n        });\n      };\n      var ariaAttributes = { 'aria-live': 'polite' };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js'],\n          attributes: __assign(__assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({})), ariaAttrs ? ariaAttributes : {})\n        },\n        components: [],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          Reflecting.config({\n            channel: bodyChannel,\n            updateState: updateState,\n            renderComponents: renderComponents,\n            initialData: spec\n          })\n        ])\n      };\n    };\n    var renderInlineBody = function (spec, contentId, backstage, ariaAttrs) {\n      return renderBody(spec, Optional.some(contentId), backstage, ariaAttrs);\n    };\n    var renderModalBody = function (spec, backstage) {\n      var bodySpec = renderBody(spec, Optional.none(), backstage, false);\n      return ModalDialog.parts.body(bodySpec);\n    };\n    var renderIframeBody = function (spec) {\n      var bodySpec = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-iframe']\n            },\n            components: [craft({\n                dom: {\n                  tag: 'iframe',\n                  attributes: { src: spec.url }\n                },\n                behaviours: derive$1([\n                  Tabstopping.config({}),\n                  Focusing.config({})\n                ])\n              })]\n          }],\n        behaviours: derive$1([Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          })])\n      };\n      return ModalDialog.parts.body(bodySpec);\n    };\n\n    var isTouch = global$8.deviceType.isTouch();\n    var hiddenHeader = function (title, close) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: { display: 'none' },\n          classes: ['tox-dialog__header']\n        },\n        components: [\n          title,\n          close\n        ]\n      };\n    };\n    var pClose = function (onClose, providersBackstage) {\n      return ModalDialog.parts.close(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close')\n          }\n        },\n        action: onClose,\n        buttonBehaviours: derive$1([Tabstopping.config({})])\n      }));\n    };\n    var pUntitled = function () {\n      return ModalDialog.parts.title({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          innerHtml: '',\n          styles: { display: 'none' }\n        }\n      });\n    };\n    var pBodyMessage = function (message, providersBackstage) {\n      return ModalDialog.parts.body({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [{ dom: fromHtml$2('<p>' + providersBackstage.translate(message) + '</p>') }]\n          }]\n      });\n    };\n    var pFooter = function (buttons) {\n      return ModalDialog.parts.footer({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__footer']\n        },\n        components: buttons\n      });\n    };\n    var pFooterGroup = function (startButtons, endButtons) {\n      return [\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-start']\n          },\n          components: startButtons\n        }),\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-end']\n          },\n          components: endButtons\n        })\n      ];\n    };\n    var renderDialog = function (spec) {\n      var _a;\n      var dialogClass = 'tox-dialog';\n      var blockerClass = dialogClass + '-wrap';\n      var blockerBackdropClass = blockerClass + '__backdrop';\n      var scrollLockClass = dialogClass + '__disable-scroll';\n      return ModalDialog.sketch({\n        lazySink: spec.lazySink,\n        onEscape: function (comp) {\n          spec.onEscape(comp);\n          return Optional.some(true);\n        },\n        useTabstopAt: function (elem) {\n          return !isPseudoStop(elem);\n        },\n        dom: {\n          tag: 'div',\n          classes: [dialogClass].concat(spec.extraClasses),\n          styles: __assign({ position: 'relative' }, spec.extraStyles)\n        },\n        components: __spreadArrays([\n          spec.header,\n          spec.body\n        ], spec.footer.toArray()),\n        parts: {\n          blocker: {\n            dom: fromHtml$2('<div class=\"' + blockerClass + '\"></div>'),\n            components: [{\n                dom: {\n                  tag: 'div',\n                  classes: isTouch ? [\n                    blockerBackdropClass,\n                    blockerBackdropClass + '--opaque'\n                  ] : [blockerBackdropClass]\n                }\n              }]\n          }\n        },\n        dragBlockClass: blockerClass,\n        modalBehaviours: derive$1(__spreadArrays([\n          Focusing.config({}),\n          config('dialog-events', spec.dialogEvents.concat([runOnSource(focusin(), function (comp, _se) {\n              Keying.focusIn(comp);\n            })])),\n          config('scroll-lock', [\n            runOnAttached(function () {\n              add$2(body(), scrollLockClass);\n            }),\n            runOnDetached(function () {\n              remove$4(body(), scrollLockClass);\n            })\n          ])\n        ], spec.extraBehaviours)),\n        eventOrder: __assign((_a = {}, _a[execute()] = ['dialog-events'], _a[attachedToDom()] = [\n          'scroll-lock',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'scroll-lock'\n        ], _a), spec.eventOrder)\n      });\n    };\n\n    var renderClose = function (providersBackstage) {\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close'),\n            'title': providersBackstage.translate('Close')\n          }\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-icon'],\n              innerHtml: get$e('close', providersBackstage.icons)\n            }\n          }],\n        action: function (comp) {\n          emit(comp, formCancelEvent);\n        }\n      });\n    };\n    var renderTitle = function (spec, id, providersBackstage) {\n      var renderComponents = function (data) {\n        return [text(providersBackstage.translate(data.title))];\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          attributes: __assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({}))\n        },\n        components: renderComponents(spec),\n        behaviours: derive$1([Reflecting.config({\n            channel: titleChannel,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderDragHandle = function () {\n      return { dom: fromHtml$2('<div class=\"tox-dialog__draghandle\"></div>') };\n    };\n    var renderInlineHeader = function (spec, titleId, providersBackstage) {\n      return Container.sketch({\n        dom: fromHtml$2('<div class=\"tox-dialog__header\"></div>'),\n        components: [\n          renderTitle(spec, Optional.some(titleId), providersBackstage),\n          renderDragHandle(),\n          renderClose(providersBackstage)\n        ],\n        containerBehaviours: derive$1([Dragging.config({\n            mode: 'mouse',\n            blockerClass: 'blocker',\n            getTarget: function (handle) {\n              return closest$3(handle, '[role=\"dialog\"]').getOrDie();\n            },\n            snaps: {\n              getSnapPoints: function () {\n                return [];\n              },\n              leftAttr: 'data-drag-left',\n              topAttr: 'data-drag-top'\n            }\n          })])\n      });\n    };\n    var renderModalHeader = function (spec, providersBackstage) {\n      var pTitle = ModalDialog.parts.title(renderTitle(spec, Optional.none(), providersBackstage));\n      var pHandle = ModalDialog.parts.draghandle(renderDragHandle());\n      var pClose = ModalDialog.parts.close(renderClose(providersBackstage));\n      var components = [pTitle].concat(spec.draggable ? [pHandle] : []).concat([pClose]);\n      return Container.sketch({\n        dom: fromHtml$2('<div class=\"tox-dialog__header\"></div>'),\n        components: components\n      });\n    };\n\n    var getHeader = function (title, backstage) {\n      return renderModalHeader({\n        title: backstage.shared.providers.translate(title),\n        draggable: backstage.dialog.isDraggableModal()\n      }, backstage.shared.providers);\n    };\n    var getBusySpec = function (message, bs, providers) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__busy-spinner'],\n          attributes: { 'aria-label': providers.translate(message) },\n          styles: {\n            left: '0px',\n            right: '0px',\n            bottom: '0px',\n            top: '0px',\n            position: 'absolute'\n          }\n        },\n        behaviours: bs,\n        components: [{ dom: fromHtml$2('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }]\n      };\n    };\n    var getEventExtras = function (lazyDialog, providers, extra) {\n      return {\n        onClose: function () {\n          return extra.closeWindow();\n        },\n        onBlock: function (blockEvent) {\n          ModalDialog.setBusy(lazyDialog(), function (_comp, bs) {\n            return getBusySpec(blockEvent.message, bs, providers);\n          });\n        },\n        onUnblock: function () {\n          ModalDialog.setIdle(lazyDialog());\n        }\n      };\n    };\n    var renderModalDialog = function (spec, initialData, dialogEvents, backstage) {\n      var _a;\n      var updateState = function (_comp, incoming) {\n        return Optional.some(incoming);\n      };\n      return build$1(renderDialog(__assign(__assign({}, spec), {\n        lazySink: backstage.shared.getSink,\n        extraBehaviours: __spreadArrays([\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: initialData\n          }),\n          RepresentingConfigs.memory({})\n        ], spec.extraBehaviours),\n        onEscape: function (comp) {\n          emit(comp, formCancelEvent);\n        },\n        dialogEvents: dialogEvents,\n        eventOrder: (_a = {}, _a[receive()] = [\n          Reflecting.name(),\n          Receiving.name()\n        ], _a[attachedToDom()] = [\n          'scroll-lock',\n          Reflecting.name(),\n          'messages',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'messages',\n          Reflecting.name(),\n          'scroll-lock'\n        ], _a)\n      })));\n    };\n    var mapMenuButtons = function (buttons) {\n      var mapItems = function (button) {\n        var items = map(button.items, function (item) {\n          var cell = Cell(false);\n          return __assign(__assign({}, item), { storage: cell });\n        });\n        return __assign(__assign({}, button), { items: items });\n      };\n      return map(buttons, function (button) {\n        if (button.type === 'menu') {\n          return mapItems(button);\n        }\n        return button;\n      });\n    };\n    var extractCellsToObject = function (buttons) {\n      return foldl(buttons, function (acc, button) {\n        if (button.type === 'menu') {\n          var menuButton = button;\n          return foldl(menuButton.items, function (innerAcc, item) {\n            innerAcc[item.name] = item.storage;\n            return innerAcc;\n          }, acc);\n        }\n        return acc;\n      }, {});\n    };\n\n    var initCommonEvents = function (fireApiEvent, extras) {\n      return [\n        runWithTarget(focusin(), onFocus$1),\n        fireApiEvent(formCloseEvent, function (_api, spec) {\n          extras.onClose();\n          spec.onClose();\n        }),\n        fireApiEvent(formCancelEvent, function (api, spec, _event, self) {\n          spec.onCancel(api);\n          emit(self, formCloseEvent);\n        }),\n        run(formUnblockEvent, function (_c, _se) {\n          return extras.onUnblock();\n        }),\n        run(formBlockEvent, function (_c, se) {\n          return extras.onBlock(se.event);\n        })\n      ];\n    };\n    var initUrlDialog = function (getInstanceApi, extras) {\n      var fireApiEvent = function (eventName, f) {\n        return run(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event, c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialog) {\n          f(currentDialog, c);\n        });\n      };\n      return __spreadArrays(initCommonEvents(fireApiEvent, extras), [fireApiEvent(formActionEvent, function (api, spec, event) {\n          spec.onAction(api, { name: event.name });\n        })]);\n    };\n    var initDialog = function (getInstanceApi, extras, getSink) {\n      var fireApiEvent = function (eventName, f) {\n        return run(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event, c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialogInit) {\n          f(currentDialogInit.internalDialog, c);\n        });\n      };\n      return __spreadArrays(initCommonEvents(fireApiEvent, extras), [\n        fireApiEvent(formSubmitEvent, function (api, spec) {\n          return spec.onSubmit(api);\n        }),\n        fireApiEvent(formChangeEvent, function (api, spec, event) {\n          spec.onChange(api, { name: event.name });\n        }),\n        fireApiEvent(formActionEvent, function (api, spec, event, component) {\n          var focusIn = function () {\n            return Keying.focusIn(component);\n          };\n          var isDisabled = function (focused) {\n            return has$1(focused, 'disabled') || getOpt(focused, 'aria-disabled').exists(function (val) {\n              return val === 'true';\n            });\n          };\n          var rootNode = getRootNode(component.element);\n          var current = active(rootNode);\n          spec.onAction(api, {\n            name: event.name,\n            value: event.value\n          });\n          active(rootNode).fold(focusIn, function (focused) {\n            if (isDisabled(focused)) {\n              focusIn();\n            } else if (current.exists(function (cur) {\n                return contains$2(focused, cur) && isDisabled(cur);\n              })) {\n              focusIn();\n            } else {\n              getSink().toOptional().filter(function (sink) {\n                return !contains$2(sink.element, focused);\n              }).each(focusIn);\n            }\n          });\n        }),\n        fireApiEvent(formTabChangeEvent, function (api, spec, event) {\n          spec.onTabChange(api, {\n            newTabName: event.name,\n            oldTabName: event.oldName\n          });\n        }),\n        runOnDetached(function (component) {\n          var api = getInstanceApi();\n          Representing.setValue(component, api.getData());\n        })\n      ]);\n    };\n    var SilverDialogEvents = {\n      initUrlDialog: initUrlDialog,\n      initDialog: initDialog\n    };\n\n    var makeButton = function (button, backstage) {\n      return renderFooterButton(button, button.type, backstage);\n    };\n    var lookup$2 = function (compInSystem, footerButtons, buttonName) {\n      return find(footerButtons, function (button) {\n        return button.name === buttonName;\n      }).bind(function (memButton) {\n        return memButton.memento.getOpt(compInSystem);\n      });\n    };\n    var renderComponents = function (_data, state) {\n      var footerButtons = state.map(function (s) {\n        return s.footerButtons;\n      }).getOr([]);\n      var buttonGroups = partition(footerButtons, function (button) {\n        return button.align === 'start';\n      });\n      var makeGroup = function (edge, buttons) {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-' + edge]\n          },\n          components: map(buttons, function (button) {\n            return button.memento.asSpec();\n          })\n        });\n      };\n      var startButtons = makeGroup('start', buttonGroups.pass);\n      var endButtons = makeGroup('end', buttonGroups.fail);\n      return [\n        startButtons,\n        endButtons\n      ];\n    };\n    var renderFooter = function (initSpec, backstage) {\n      var updateState = function (_comp, data) {\n        var footerButtons = map(data.buttons, function (button) {\n          var memButton = record(makeButton(button, backstage));\n          return {\n            name: button.name,\n            align: button.align,\n            memento: memButton\n          };\n        });\n        var lookupByName = function (compInSystem, buttonName) {\n          return lookup$2(compInSystem, footerButtons, buttonName);\n        };\n        return Optional.some({\n          lookupByName: lookupByName,\n          footerButtons: footerButtons\n        });\n      };\n      return {\n        dom: fromHtml$2('<div class=\"tox-dialog__footer\"></div>'),\n        components: [],\n        behaviours: derive$1([Reflecting.config({\n            channel: footerChannel,\n            initialData: initSpec,\n            updateState: updateState,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderInlineFooter = function (initSpec, backstage) {\n      return renderFooter(initSpec, backstage);\n    };\n    var renderModalFooter = function (initSpec, backstage) {\n      return ModalDialog.parts.footer(renderFooter(initSpec, backstage));\n    };\n\n    var getCompByName = function (access, name) {\n      var root = access.getRoot();\n      if (root.getSystem().isConnected()) {\n        var form_1 = Composing.getCurrent(access.getFormWrapper()).getOr(access.getFormWrapper());\n        return Form.getField(form_1, name).fold(function () {\n          var footer = access.getFooter();\n          var footerState = Reflecting.getState(footer);\n          return footerState.get().bind(function (f) {\n            return f.lookupByName(form_1, name);\n          });\n        }, function (comp) {\n          return Optional.some(comp);\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var validateData = function (access, data) {\n      var root = access.getRoot();\n      return Reflecting.getState(root).get().map(function (dialogState) {\n        return getOrDie(asRaw('data', dialogState.dataValidator, data));\n      }).getOr(data);\n    };\n    var getDialogApi = function (access, doRedial, menuItemStates) {\n      var withRoot = function (f) {\n        var root = access.getRoot();\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var getData = function () {\n        var root = access.getRoot();\n        var valueComp = root.getSystem().isConnected() ? access.getFormWrapper() : root;\n        var representedValues = Representing.getValue(valueComp);\n        var menuItemCurrentState = map$2(menuItemStates, function (cell) {\n          return cell.get();\n        });\n        return __assign(__assign({}, representedValues), menuItemCurrentState);\n      };\n      var setData = function (newData) {\n        withRoot(function (_) {\n          var prevData = instanceApi.getData();\n          var mergedData = __assign(__assign({}, prevData), newData);\n          var newInternalData = validateData(access, mergedData);\n          var form = access.getFormWrapper();\n          Representing.setValue(form, newInternalData);\n          each$1(menuItemStates, function (v, k) {\n            if (has(mergedData, k)) {\n              v.set(mergedData[k]);\n            }\n          });\n        });\n      };\n      var disable = function (name) {\n        getCompByName(access, name).each(Disabling.disable);\n      };\n      var enable = function (name) {\n        getCompByName(access, name).each(Disabling.enable);\n      };\n      var focus = function (name) {\n        getCompByName(access, name).each(Focusing.focus);\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var showTab = function (name) {\n        withRoot(function (_) {\n          var body = access.getBody();\n          var bodyState = Reflecting.getState(body);\n          if (bodyState.get().exists(function (b) {\n              return b.isTabPanel();\n            })) {\n            Composing.getCurrent(body).each(function (tabSection) {\n              TabSection.showTab(tabSection, name);\n            });\n          }\n        });\n      };\n      var redial = function (d) {\n        withRoot(function (root) {\n          var dialogInit = doRedial(d);\n          root.getSystem().broadcastOn([dialogChannel], dialogInit);\n          root.getSystem().broadcastOn([titleChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([bodyChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([footerChannel], dialogInit.internalDialog);\n          instanceApi.setData(dialogInit.initialData);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var instanceApi = {\n        getData: getData,\n        setData: setData,\n        disable: disable,\n        enable: enable,\n        focus: focus,\n        block: block,\n        unblock: unblock,\n        showTab: showTab,\n        redial: redial,\n        close: close\n      };\n      return instanceApi;\n    };\n\n    var getDialogSizeClasses = function (size) {\n      switch (size) {\n      case 'large':\n        return ['tox-dialog--width-lg'];\n      case 'medium':\n        return ['tox-dialog--width-md'];\n      default:\n        return [];\n      }\n    };\n    var renderDialog$1 = function (dialogInit, extra, backstage) {\n      var header = getHeader(dialogInit.internalDialog.title, backstage);\n      var body = renderModalBody({ body: dialogInit.internalDialog.body }, backstage);\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var footer = renderModalFooter({ buttons: storagedMenuButtons }, backstage);\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, backstage.shared.providers, extra), backstage.shared.getSink);\n      var dialogSize = getDialogSizeClasses(dialogInit.internalDialog.size);\n      var spec = {\n        header: header,\n        body: body,\n        footer: Optional.some(footer),\n        extraClasses: dialogSize,\n        extraBehaviours: [],\n        extraStyles: {}\n      };\n      var dialog = renderModalDialog(spec, dialogInit, dialogEvents, backstage);\n      var modalAccess = function () {\n        var getForm = function () {\n          var outerForm = ModalDialog.getBody(dialog);\n          return Composing.getCurrent(outerForm).getOr(outerForm);\n        };\n        return {\n          getRoot: function () {\n            return dialog;\n          },\n          getBody: function () {\n            return ModalDialog.getBody(dialog);\n          },\n          getFooter: function () {\n            return ModalDialog.getFooter(dialog);\n          },\n          getFormWrapper: getForm\n        };\n      }();\n      var instanceApi = getDialogApi(modalAccess, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var renderInlineDialog = function (dialogInit, extra, backstage, ariaAttrs) {\n      var _a, _b;\n      var dialogLabelId = generate$1('dialog-label');\n      var dialogContentId = generate$1('dialog-content');\n      var updateState = function (_comp, incoming) {\n        return Optional.some(incoming);\n      };\n      var memHeader = record(renderInlineHeader({\n        title: dialogInit.internalDialog.title,\n        draggable: true\n      }, dialogLabelId, backstage.shared.providers));\n      var memBody = record(renderInlineBody({ body: dialogInit.internalDialog.body }, dialogContentId, backstage, ariaAttrs));\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var memFooter = record(renderInlineFooter({ buttons: storagedMenuButtons }, backstage));\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, {\n        onBlock: function (event) {\n          Blocking.block(dialog, function (_comp, bs) {\n            return getBusySpec(event.message, bs, backstage.shared.providers);\n          });\n        },\n        onUnblock: function () {\n          Blocking.unblock(dialog);\n        },\n        onClose: function () {\n          return extra.closeWindow();\n        }\n      }, backstage.shared.getSink);\n      var dialog = build$1({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-dialog',\n            'tox-dialog-inline'\n          ],\n          attributes: (_a = { role: 'dialog' }, _a['aria-labelledby'] = dialogLabelId, _a['aria-describedby'] = '' + dialogContentId, _a)\n        },\n        eventOrder: (_b = {}, _b[receive()] = [\n          Reflecting.name(),\n          Receiving.name()\n        ], _b[execute()] = ['execute-on-form'], _b[attachedToDom()] = [\n          'reflecting',\n          'execute-on-form'\n        ], _b),\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'cyclic',\n            onEscape: function (c) {\n              emit(c, formCloseEvent);\n              return Optional.some(true);\n            },\n            useTabstopAt: function (elem) {\n              return !isPseudoStop(elem) && (name(elem) !== 'button' || get$3(elem, 'disabled') !== 'disabled');\n            }\n          }),\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: dialogInit\n          }),\n          Focusing.config({}),\n          config('execute-on-form', dialogEvents.concat([runOnSource(focusin(), function (comp, _se) {\n              Keying.focusIn(comp);\n            })])),\n          Blocking.config({\n            getRoot: function () {\n              return Optional.some(dialog);\n            }\n          }),\n          Replacing.config({}),\n          RepresentingConfigs.memory({})\n        ]),\n        components: [\n          memHeader.asSpec(),\n          memBody.asSpec(),\n          memFooter.asSpec()\n        ]\n      });\n      var instanceApi = getDialogApi({\n        getRoot: function () {\n          return dialog;\n        },\n        getFooter: function () {\n          return memFooter.get(dialog);\n        },\n        getBody: function () {\n          return memBody.get(dialog);\n        },\n        getFormWrapper: function () {\n          var body = memBody.get(dialog);\n          return Composing.getCurrent(body).getOr(body);\n        }\n      }, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var global$h = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var getUrlDialogApi = function (root) {\n      var withRoot = function (f) {\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var sendMessage = function (data) {\n        withRoot(function (root) {\n          root.getSystem().broadcastOn([bodySendMessageChannel], data);\n        });\n      };\n      return {\n        block: block,\n        unblock: unblock,\n        close: close,\n        sendMessage: sendMessage\n      };\n    };\n\n    var SUPPORTED_MESSAGE_ACTIONS = [\n      'insertContent',\n      'setContent',\n      'execCommand',\n      'close',\n      'block',\n      'unblock'\n    ];\n    var isSupportedMessage = function (data) {\n      return isObject(data) && SUPPORTED_MESSAGE_ACTIONS.indexOf(data.mceAction) !== -1;\n    };\n    var isCustomMessage = function (data) {\n      return !isSupportedMessage(data) && isObject(data) && has(data, 'mceAction');\n    };\n    var handleMessage = function (editor, api, data) {\n      switch (data.mceAction) {\n      case 'insertContent':\n        editor.insertContent(data.content);\n        break;\n      case 'setContent':\n        editor.setContent(data.content);\n        break;\n      case 'execCommand':\n        var ui = isBoolean(data.ui) ? data.ui : false;\n        editor.execCommand(data.cmd, ui, data.value);\n        break;\n      case 'close':\n        api.close();\n        break;\n      case 'block':\n        api.block(data.message);\n        break;\n      case 'unblock':\n        api.unblock();\n        break;\n      }\n    };\n    var renderUrlDialog = function (internalDialog, extra, editor, backstage) {\n      var _a;\n      var header = getHeader(internalDialog.title, backstage);\n      var body = renderIframeBody(internalDialog);\n      var footer = internalDialog.buttons.bind(function (buttons) {\n        if (buttons.length === 0) {\n          return Optional.none();\n        } else {\n          return Optional.some(renderModalFooter({ buttons: buttons }, backstage));\n        }\n      });\n      var dialogEvents = SilverDialogEvents.initUrlDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, backstage.shared.providers, extra));\n      var styles = __assign(__assign({}, internalDialog.height.fold(function () {\n        return {};\n      }, function (height) {\n        return {\n          'height': height + 'px',\n          'max-height': height + 'px'\n        };\n      })), internalDialog.width.fold(function () {\n        return {};\n      }, function (width) {\n        return {\n          'width': width + 'px',\n          'max-width': width + 'px'\n        };\n      }));\n      var classes = internalDialog.width.isNone() && internalDialog.height.isNone() ? ['tox-dialog--width-lg'] : [];\n      var iframeUri = new global$h(internalDialog.url, { base_uri: new global$h(window.location.href) });\n      var iframeDomain = iframeUri.protocol + '://' + iframeUri.host + (iframeUri.port ? ':' + iframeUri.port : '');\n      var messageHandlerUnbinder = Cell(Optional.none());\n      var extraBehaviours = [\n        config('messages', [\n          runOnAttached(function () {\n            var unbind = bind$3(SugarElement.fromDom(window), 'message', function (e) {\n              if (iframeUri.isSameOrigin(new global$h(e.raw.origin))) {\n                var data = e.raw.data;\n                if (isSupportedMessage(data)) {\n                  handleMessage(editor, instanceApi, data);\n                } else if (isCustomMessage(data)) {\n                  internalDialog.onMessage(instanceApi, data);\n                }\n              }\n            });\n            messageHandlerUnbinder.set(Optional.some(unbind));\n          }),\n          runOnDetached(function () {\n            messageHandlerUnbinder.get().each(function (unbinder) {\n              return unbinder.unbind();\n            });\n          })\n        ]),\n        Receiving.config({\n          channels: (_a = {}, _a[bodySendMessageChannel] = {\n            onReceive: function (comp, data) {\n              descendant$1(comp.element, 'iframe').each(function (iframeEle) {\n                var iframeWin = iframeEle.dom.contentWindow;\n                iframeWin.postMessage(data, iframeDomain);\n              });\n            }\n          }, _a)\n        })\n      ];\n      var spec = {\n        header: header,\n        body: body,\n        footer: footer,\n        extraClasses: classes,\n        extraBehaviours: extraBehaviours,\n        extraStyles: styles\n      };\n      var dialog = renderModalDialog(spec, internalDialog, dialogEvents, backstage);\n      var instanceApi = getUrlDialogApi(dialog);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var setup$c = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function () {\n          ModalDialog.hide(alertDialog);\n          callback();\n        };\n        var memFooterClose = record(renderFooterButton({\n          name: 'close-alert',\n          text: 'OK',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'cancel', extras.backstage));\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(closeDialog, sharedBackstage.providers);\n        var alertDialog = build$1(renderDialog({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [memFooterClose.asSpec()]))),\n          onEscape: closeDialog,\n          extraClasses: ['tox-alert-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [run(formCancelEvent, closeDialog)],\n          eventOrder: {}\n        }));\n        ModalDialog.show(alertDialog);\n        var footerCloseButton = memFooterClose.get(alertDialog);\n        Focusing.focus(footerCloseButton);\n      };\n      return { open: open };\n    };\n\n    var setup$d = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function (state) {\n          ModalDialog.hide(confirmDialog);\n          callback(state);\n        };\n        var memFooterYes = record(renderFooterButton({\n          name: 'yes',\n          text: 'Yes',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'submit', extras.backstage));\n        var footerNo = renderFooterButton({\n          name: 'no',\n          text: 'No',\n          primary: false,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'cancel', extras.backstage);\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(function () {\n          return closeDialog(false);\n        }, sharedBackstage.providers);\n        var confirmDialog = build$1(renderDialog({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [\n            footerNo,\n            memFooterYes.asSpec()\n          ]))),\n          onEscape: function () {\n            return closeDialog(false);\n          },\n          extraClasses: ['tox-confirm-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [\n            run(formCancelEvent, function () {\n              return closeDialog(false);\n            }),\n            run(formSubmitEvent, function () {\n              return closeDialog(true);\n            })\n          ],\n          eventOrder: {}\n        }));\n        ModalDialog.show(confirmDialog);\n        var footerYesButton = memFooterYes.get(confirmDialog);\n        Focusing.focus(footerYesButton);\n      };\n      return { open: open };\n    };\n\n    var validateData$1 = function (data, validator) {\n      return getOrDie(asRaw('data', validator, data));\n    };\n    var isAlertOrConfirmDialog = function (target) {\n      return closest$4(target, '.tox-alert-dialog') || closest$4(target, '.tox-confirm-dialog');\n    };\n    var inlineAdditionalBehaviours = function (editor, isStickyToolbar, isToolbarLocationTop) {\n      if (isStickyToolbar && isToolbarLocationTop) {\n        return [];\n      } else {\n        return [Docking.config({\n            contextual: {\n              lazyContext: function () {\n                return Optional.some(box(SugarElement.fromDom(editor.getContentAreaContainer())));\n              },\n              fadeInClass: 'tox-dialog-dock-fadein',\n              fadeOutClass: 'tox-dialog-dock-fadeout',\n              transitionClass: 'tox-dialog-dock-transition'\n            },\n            modes: ['top']\n          })];\n      }\n    };\n    var setup$e = function (extras) {\n      var backstage = extras.backstage;\n      var editor = extras.editor;\n      var isStickyToolbar$1 = isStickyToolbar(editor);\n      var alertDialog = setup$c(extras);\n      var confirmDialog = setup$d(extras);\n      var open = function (config, params, closeWindow) {\n        if (params !== undefined && params.inline === 'toolbar') {\n          return openInlineDialog(config, backstage.shared.anchors.inlineDialog(), closeWindow, params.ariaAttrs);\n        } else if (params !== undefined && params.inline === 'cursor') {\n          return openInlineDialog(config, backstage.shared.anchors.cursor(), closeWindow, params.ariaAttrs);\n        } else {\n          return openModalDialog(config, closeWindow);\n        }\n      };\n      var openUrl = function (config, closeWindow) {\n        return openModalUrlDialog(config, closeWindow);\n      };\n      var openModalUrlDialog = function (config, closeWindow) {\n        var factory = function (contents) {\n          var dialog = renderUrlDialog(contents, {\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, editor, backstage);\n          ModalDialog.show(dialog.dialog);\n          return dialog.instanceApi;\n        };\n        return DialogManager.openUrl(factory, config);\n      };\n      var openModalDialog = function (config, closeWindow) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = internalInitialData;\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var dialog = renderDialog$1(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, backstage);\n          ModalDialog.show(dialog.dialog);\n          dialog.instanceApi.setData(initialData);\n          return dialog.instanceApi;\n        };\n        return DialogManager.open(factory, config);\n      };\n      var openInlineDialog = function (config$1, anchor, closeWindow, ariaAttrs) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = validateData$1(internalInitialData, dataValidator);\n          var inlineDialog = value$3();\n          var isToolbarLocationTop = backstage.shared.header.isPositionedAtTop();\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var refreshDocking = function () {\n            return inlineDialog.on(function (dialog) {\n              InlineView.reposition(dialog);\n              Docking.refresh(dialog);\n            });\n          };\n          var dialogUi = renderInlineDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              inlineDialog.on(InlineView.hide);\n              editor.off('ResizeEditor', refreshDocking);\n              inlineDialog.clear();\n              closeWindow(dialogUi.instanceApi);\n            }\n          }, backstage, ariaAttrs);\n          var inlineDialogComp = build$1(InlineView.sketch(__assign(__assign({\n            lazySink: backstage.shared.getSink,\n            dom: {\n              tag: 'div',\n              classes: []\n            },\n            fireDismissalEventInstead: {}\n          }, isToolbarLocationTop ? {} : { fireRepositionEventInstead: {} }), {\n            inlineBehaviours: derive$1(__spreadArrays([config('window-manager-inline-events', [run(dismissRequested(), function (_comp, _se) {\n                  emit(dialogUi.dialog, formCancelEvent);\n                })])], inlineAdditionalBehaviours(editor, isStickyToolbar$1, isToolbarLocationTop))),\n            isExtraPart: function (_comp, target) {\n              return isAlertOrConfirmDialog(target);\n            }\n          })));\n          inlineDialog.set(inlineDialogComp);\n          InlineView.showWithin(inlineDialogComp, anchor, premade$1(dialogUi.dialog), Optional.some(body()));\n          if (!isStickyToolbar$1 || !isToolbarLocationTop) {\n            Docking.refresh(inlineDialogComp);\n            editor.on('ResizeEditor', refreshDocking);\n          }\n          dialogUi.instanceApi.setData(initialData);\n          Keying.focusIn(dialogUi.dialog);\n          return dialogUi.instanceApi;\n        };\n        return DialogManager.open(factory, config$1);\n      };\n      var confirm = function (message, callback) {\n        confirmDialog.open(message, function (state) {\n          callback(state);\n        });\n      };\n      var alert = function (message, callback) {\n        alertDialog.open(message, function () {\n          callback();\n        });\n      };\n      var close = function (instanceApi) {\n        instanceApi.close();\n      };\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        close: close,\n        confirm: confirm\n      };\n    };\n\n    function Theme () {\n      global$1.add('silver', function (editor) {\n        var _a = setup$b(editor), uiMothership = _a.uiMothership, backstage = _a.backstage, renderUI = _a.renderUI, getUi = _a.getUi;\n        Autocompleter.register(editor, backstage.shared);\n        var windowMgr = setup$e({\n          editor: editor,\n          backstage: backstage\n        });\n        return {\n          renderUI: renderUI,\n          getWindowManagerImpl: constant(windowMgr),\n          getNotificationManagerImpl: function () {\n            return NotificationManagerImpl(editor, { backstage: backstage }, uiMothership);\n          },\n          ui: getUi()\n        };\n      });\n    }\n\n    Theme();\n\n}());\n"],"sourceRoot":""}