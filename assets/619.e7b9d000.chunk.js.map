{"version":3,"sources":["/Users/liuyang/projects/ringtone_new/node_modules/tinymce/plugins/table/index.js","/Users/liuyang/projects/ringtone_new/node_modules/tinymce/plugins/table/plugin.js"],"names":["isType","type","value","t","x","Array","prototype","isPrototypeOf","constructor","name","String","isSimpleType","isString","isObject","isArray","isBoolean","isUndefined","undefined","a","isNonNullable","isNullable","isFunction","isNumber","noop","constant","identity","curry","fn","initialArgs","_i","arguments","length","restArgs","all","concat","apply","eq","call","id","not","f","never","always","none","NONE","o","isNone","fold","n","_s","is","isSome","getOr","getOrThunk","thunk","getOrDie","msg","Error","getOrNull","getOrUndefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","some","constant_a","self","me","s","v","elementEq","b","Optional","from","nativeSlice","slice","nativeIndexOf","indexOf","nativePush","push","contains","xs","ts","rawIndexOf","pred","i","len","range","num","r","foldr","acc","eachr","foldl","find","until","findUntil","findIndex","flatten","mapToObject","pure","get","head","last","findMap","arr","__assign","Object","assign","p","hasOwnProperty","this","__spreadArrays","il","k","j","jl","cached","called","args","unknown","nu","major","minor","Version","versionRegexes","agent","cleanedAgent","toLowerCase","regexes","test","firstMatch","group","Number","replace","find$1","detect$1","candidates","userAgent","candidate","search","checkRange","str","substr","start","contains$1","startsWith","prefix","endsWith","suffix","trim","blank","isNotEmpty","normalVersionRegex","checkContains","target","uastring","browsers","oses","PlatformInfo","edge","chrome","opera","firefox","safari","nu$1","info","current","version","isBrowser","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","windows","android","linux","solaris","freebsd","chromeos","nu$2","isOS","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","PlatformDetection","mediaMatch","browser","UaString","os","deviceType","isiPad","isiPhone","isMobile","isTouch","isTablet","isPhone","iOSwebview","isDesktop","isWebView","DeviceType","query","window","matchMedia","matches","platform","navigator","detect$3","fromDom","node","dom","SugarElement","fromHtml","html","scope","div","document","createElement","innerHTML","hasChildNodes","childNodes","console","error","fromTag","tag","fromText","text","createTextNode","fromPoint","docElm","y","elementFromPoint","element","selector","nodeType","elem","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","eq$1","e1","e2","contains$2","match","Node","DOCUMENT_POSITION_CONTAINED_BY","compareDocumentPosition","ieContains","d1","d2","regularContains","is$1","keys","each$1","obj","props","map$1","tupleMap","tuple","filter$1","onTrue","onFalse","internalFilter","objAcc","mapToArray","size","get$1","key","has","hasNonNullableKey","validSectionList","detail","rowspan","colspan","rowdata","cells","section","elementnew","isNew","isLocked","rowcells","Function","nodeName","isType$1","isComment","isElement","isText","isDocument","isDocumentFragment","isTag","e","owner","ownerDocument","documentOrOwner","dos","parent","parentNode","parents","isRoot","stop","ret","rawParent","prevSibling","previousSibling","nextSibling","children","child","index","cs","supported","Element","attachShadow","getRootNode","isSupported","getShadowHost","host","inBody","fbc","fab","doc","getShadowRoot","body","getBody","descendants","predicate","result","ancestors$1","ancestors","children$2","children$1","descendants$1","base","querySelectorAll","ClosestOrAncestor","ancestor","el","ancestor$1","child$2","child$1","descendant$1","querySelector","one","closest$1","rawSet","setAttribute","set","setAll","attrs","get$2","getAttribute","getOpt","remove","removeAttribute","clone","attributes","attr","isSupported$1","style","getPropertyValue","internalSet","property","setProperty","set$1","setAll$1","css","get$3","getComputedStyle","getUnsafeProperty","getRaw","raw","remove$1","removeProperty","internalRemove","getAttrValue","cell","fallback","parseInt","getSpan","hasColspan","hasRowspan","getCssValue","minWidth","minHeight","firstLayer","filterFirstLayer","tags","join","elm","lookup","columns","columnGroups","columnGroup","table","rows","fromRowsOrColGroups","elems","getSection","row","cells$1","column","getParentSection","parentName","isValidSection","fromTable","rows$1","addCells","gridRow","existingCells","before","after","newCells","setCells","addCell","mutateCell","mapCells","getCell","getCellElement","cellLength","extractGridDetails","grid","pass","fail","partition","cols","LOCKED_COL_ATTR","getLockedColumnsFromTable","lockedColStr","lockedCols","getLockedColumnsFromGrid","copy","locked","idx","_val","sort","filterItems","warehouse","generate","list","access","lockedColumns","rowData","maxRows","maxColumns","rowCount","columnsGroup","columnIndex","colIndex","columnext","generateColumns","currentRow_1","rowCell","extended","occupiedColumnPosition","occupiedRowPosition","columnPosition","newpos","Math","max","Warehouse","item","comparator","filtered","w","inSelection","bounds","leftEdge","rightEdge","topEdge","bottomEdge","finishCol","startCol","finishRow","startRow","isWithin","getAnyBox","startCell","finishCell","startCoords","finishCoords","sc","fc","detailA","detailB","min","intercepts","finish","inside","parentCell","innerCell","c1","c2","intercepts$1","first","getWarehouse","nestedIntercepts","firstTable","lastTable","optStartCell","optLastCell","lastCell","marker","insertBefore","append","prepend","firstChild","appendChild","wrap","wrapper","after$1","elements","append$1","empty","textContent","rogue","remove$2","removeChild","unwrap","api","getOption","nodeValue","NodeValue","get$4","set$2","TagBoundaries","DomUniverse","up","closest","down","styles","copyTo","source","destination","as","insert","afterAll","appendAll","create","cloneNode","comparePosition","other","isSpecial","getText","setText","isBoundary","isEmptyTag","isNonEditable","decimalDigits","exponentPart","opt","unsignedDecimalLiteral","unsafeOne","universe","look","tail","commonElement","end","sharedOne$1","all$1","sharedOne","_universe","lookupTable","container","identify","getIsRoot","rootTable","boxes","startTable","finishTable","ancestorCells","ps1","ps2","prune","path","ind","pruned1","pruned2","shared","eq$2","firstpath","secondpath","ancestors$3","ancestors$4","lca","lcaTable","finishAncestorCells","startAncestorCells","retrieve","sels","getEdges","firstSelectedSelector","lastSelectedSelector","shiftSelection","deltaRow","deltaColumn","box","getLast","d","moveBy","moveBy$1","identified","expandTo","retrieve$1","retrieveBox","edges","sectionSelector","firstAncestor","lastAncestor","fA","lA","isRect","detailIsWithin","isRectangular","getBox","getBox$1","Adt","cases","constructors","adt","acase","count","keys$1","argLength","branches","branchKeys","reqKey","foldArgs","log","label","params","type$1","multiple","single","cata","subject","onNone","onMultiple","onSingle","none$1","global","tinymce","util","Tools","resolve","clone$1","original","isDeep","shallow","deep","cat","someIf","Dimension","getOffset","parseFloat","aggregate","properties","val","isNaN","h","getOuter","cumulativeInclusions","api$1","offsetWidth","get$5","columns$1","isValidCell","rowsArr","col","decide","getBlock","isValid","getFallback","inBlock","c","onDirection","isLtr","isRtl","getDirection","api$2","getBoundingClientRect","height","offsetHeight","get$6","getOuter$1","left","top","translate","SugarPosition","firstDefinedOrZero","absolute","win","defaultView","documentElement","offsetLeft","offsetTop","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","viewport","boxPosition","rowInfo","colInfo","rtlEdge","ltrEdge","getLeftEdge","getRightEdge","getTop","getTopEdge","getBottomEdge","findPositions","getInnerEdge","getOuterEdge","array","lines","cellOption","lastLine","delta","positions","optElements","ltr","rtl","step","detect$4","width","amount","units","unsupportedLength","fixed","relative","pattern","input","dot","RegExp","needManualCalc","getProp","px","toNumber","getWidth","getCalculatedWidth","rPercentageBasedSizeRegex","rPixelBasedSizeRegex","setPixelWidth","setPercentageWidth","setHeight","getTotalHeight","getCalculatedHeight","getHeight","getHeightValue","getter","setter","number","newSize","total","floor","convert","normalizePixelSize","getRawWidth","normalizePercentageWidth","cellWidth","tableSize","pixelWidth","getPercentageWidth","intWidth","percentMatch","exec","choosePercentageSize","getPixelWidth","pixelMatch","normalizePixelWidth","choosePixelSize","getHeight$1","get$7","setGenericWidth","unit","getPercentTableWidth","relativeParent","offsetParent","percentageBasedSizeRegex","pixelBasedSizeRegex","isCol","getRaw$1","getRawW","getRawH","hasRawStyle","prop","getDimension","cellOpt","backups","rest","reverse","aa","next","extras","abs","deduce","getWidthFrom","columnCells","justCols","pos","colFilter","isValidColumn","getDeduced","deduced","getPixelWidths","minCellWidth","getHeightFrom","direction","Cell","initial","percentageSize","initialWidth","floatWidth","getWidths","getPercentageWidths","getCellDelta","singleColumnWidth","_delta","setElementWidth","adjustTableWidth","currentWidth","newWidth","isRelative","pixelSize","TableSize","zero","noneSize","fallbackWidth","chooseSize","makeCell","seenSelected","rowIndex","td","getEnd","elementsWithCursorPosition","isCursorPosition","descend","child_1","res","last$1","descendantRtl","transferableAttributes","createCell","createCol","createColgroup","replica","shallowAs","cloneChildren","copy$1","pasteReplace","newRow","cellOperations","mutate","formatsToClone","cloneCss","prev","sourceDom","targetDom","cssText","colgroup","docu","formats","lastNode","oldCell","newCell","firstText","formatSelector","clonedFormat","cloneFormats","validAttributes","attributeName","attribute","cloneAppropriateAttributes","gap","paste","fromDom$1","nodes","getNodeName","getBody$1","editor","getPixelWidth$1","getPixelHeight","addPxSuffix","removeDataStyle","removeStyleAttribute","getRawWidth$1","getStyle","getAttrib","isPercentage","getSelectionStart","selection","getStart","selections","unmergable","hasSpan","span","mergable","ephemera","selected","selectedSelector","firstSelected","lastSelected","forMenu","registerEvents","actions","cellSelection","on","preventDefault","isSelected","replicaHouse","replicaStats","house","totalColumns","minRow","minCol","maxRow","maxCol","allCells","selectedCells","endRow","endCol","statsStruct","findSelectedStats","unselectedCells","stats","totalRows","fillInGaps","widthDelta","emptyRows","clean","colWidths","allColsWidth","getTableWidthDelta","extract","extractSelected","content","format","innerText","getTextContent","serializer","serialize","serializeElements","getParent","domCell","getDoc","generators","targets","clipboard","paste$1","pasteCells","data","setRng","rng","focus","clear","only","middle","right","ColumnContext","measures","recalculateHeightForCells","heights","recalculateAndApply","widths","newSizes","groups","recalculateWidthForColumns","recalculateWidthForCells","recalculate","adjustWidth","resizing","isLastColumn","clampedStep","clampTableDelta","deltas","resize","context","neighbours","calcLeftEdgeDeltas","calcMiddleDeltas","calcRightEdgeDeltas","determine","newWidths","dx","resizeTable","surround","sizes","startIndex","endIndex","results","clampDeltaHelper","minCellSize","diff","clampNegativeDelta","clampDelta","calcRelativeDeltas","ratio","newThis","clampedDelta","calcFixedDeltas","resizer","_prev","calcRedestributedWidths","totalWidth","pixelDelta","ratio_1","preserveTable","maxDelta","_index","_minCellSize","_totalWidth","_pixelDelta","_isRelative","ResizeWire","isResizable","view","origin","adt$1","invalid","pixels","percent","validateFor","rawAmount","substring","Size","redistribute","newType","floats","newWidthType","redistributeEmpty","newTotalWidth","scale","pc","redistributeToPx","_pc","redistributeToPercent","redistributeValues","normalize","sum","values","add","scan","remainder","floored","roundDown","output","round","validate","getUnit","redistribute$1","optWidth","optHeight","widthUnit","oldWidths","getRawWidths","nuWidths","redistributeToColumns","redistributeToW","newHeight","hUnit","totalHeight","oldHeights","getRawHeights","newHeights","redistributeToH","isPercentSizing$1","isPixelSizing$1","isNoneSizing$1","getPercentTableWidth$1","getGridSize","Event","fields","handlers","handler","unbind","trigger","event","typeDefs","registry","sort$1","handleExact","required","unsupported","unsuppMessage","exactly","handleUnsupported","sorted","validateStrArr","req","reqMessage","invalidKeys","incorrect","invalidTypeMessage","baseWith","DragMode","DragSink","DragApi","Movement","events","noDragState","move","onEvent","reset","inDragState","previous","mode","old","compare","update","InDrag","dragState","off","isOn","fromRawEvent","rawEvent","fa","fb","shadowRoot","composed","composedPath","getOriginalEventTarget","stopPropagation","prevent","kill","mkEvent","clientX","clientY","useCapture","removeEventListener","filter$2","bind$2","wrapped","handle","addEventListener","binder","bind$1","fromRawEvent$1","supports","classList","add$2","clazz","split","read","add$1","add$3","has$1","namespace","dashNamespace","MouseDrag","sink","dragApi","settings","blocker","options","layerClass","position","destroy","Blocker","mdown","forceDrop","mup","drop","mmove","mout","delayDrop","mutation","isContentEditableTrue","styles$1","resolve$1","resizeBar","resizeRowBar","resizeColBar","wire","drawBar","cpOption","cp","bar","refreshGrid","warhouse","rowPositions","resizableRowBars","resizableRows","tableWidth","rowBar","refreshRow","_pos","barIndex","colPositions","resizableColBars","resizableCols","resizableColumns","tableHeight","colBar","refreshCol","refresh","each$2","bars","hide","show","resizeBarDragging","BarManager","drag","delegate","Mutation","xDelta","yDelta","BarMutation","timer","active","movement","throttledDrop","cancel","clearTimeout","throttle","setTimeout","runIfActive","go","setup","transform","hoverTable","getResizer","_dataRow","currentRow","_dataCol","currentCol","getDelta","dir","adjustHeight","startAdjust","mousedown","isColBar","mouseover","findClosestContentEditable","tbl","hideBars","showBars","TableResize","lazySizing","hdirection","vdirection","manager","beforeResize","afterResize","startDrag","getPixelHeights","dy","newCellSizes","newRowSizes","matchRowHeight","_event","fireNewRow","fire","fireNewCell","fireTableModified","styleModified","structure","structureModified","defaultStyles","defaultAttributes","border","defaultColumnResizingBehaviour","getTableSizingMode","getParam","getTableResponseWidth","getDefaultAttributes","getDefaultStyles","isPixelsForced","editorWidth","isResponsiveForced","_value","determineDefaultStyles","hasAdvancedCellTab","hasAdvancedRowTab","hasAdvancedTableTab","shouldStyleWithCss","isPercentagesForced","useColumnGroup","getTableHeaderType","defaultValue","getColumnResizingBehaviour","givenMode","isPreserveTableColumnResizing","isResizeTableColumnResizing","getCloneElements","cloneElements","get$9","cleanupLegacyAttributes","enforcePercentage","convertToPercentSize","enforcePixels","getPixelTableWidth","convertToPixelSize","enforceNone","rowElements","barResizerPrefix","getResizeHandler","startW","startRawW","selectionRng","isTable","lazyResize","lazyResizingBehaviour","rawWire","inline","editable","padding","margin","get$a","objectResizing","hasObjectResizing","hasTableResizeBars","sz","getRng","rawTable","fireObjectResizeStart","fireObjectResized","undoManager","targetElm","select","addClass","origin_1","isRightEdgeResize","getNumColumns","percentW","isPixel","computedWidth","syncPixels","afterCornerResize","isReadOnly","lazyWire","remove$6","point","offset","toEnd","freefallRtl","freefallRtl$1","universe$1","halve","main","accepted","unitRaw","check","isUnit","getGenericWidth","setIfNot","ignore","render","newRows","syncRows","gridSection","tr","syncColGroup","colGroup","renderSection","sectionName","newSection","generateSection","sectionElems","renderOrRemoveSection","removeSection","headSection","bodySection","footSection","columnGroupsSection","findDiff","comp","toDetails","seen","details","restOfRow","getRow","endColIndex","restOfColumn","getColumn","subgrid","updateSeen","toGrid","groupElementNew","rowCells","toDetailList","rendered","findRow","rowdatanew","deriveRows","findInWarehouse","extractCells","cell$1","lc","run","operation","adjustment","postAction","genWrappers","sizing","resizeBehaviour","model","fromWarehouse","cursor","out","newElements","tableSizing","onCell","onPasteByEditor","onCells","onUnlockedCell","onUnlockedCells","allUnlocked","isUnlockedTableCell","onUnlockedMergable","_warehouse","onMergable","mergeable","onUnlockedUnmergable","onUnmergable","unmerge","substitution","currentCell","isToReplace","isValue","isError","_opt","_f","_","onValue","mapError","toOptional","message","onError","Result","fromOption","err","measureWidth","gridA","gridB","rowDelta","colDelta","measureHeight","generateElements","generator","rowFill","colFill","newChildren","tailor","fillCols","fillRows","gridWidth","isLastColLocked","modifiedCols","newLockedColumns","isSpanning","matching","getLockedColumnsWithinBounds","startAddress","colNum","insertCols","prevCell","splitCols","fittedNewGrid","secondDelta","fittedOldGrid","insertRows","uniqueCells","replacement","_loop_1","sub","splitRows","_a","oldCols","oldRows","newLocked","secondDiff","fittedGridB","newChild","insertRowAt","example","between","ex","insertColumnAt","withinSpan","getElementFor","replaceIn","isTarget","notStartRow","notStartColumn","replaceColumn","replaceRow","targetRow","uniqueColumns","currentDetail","elementToData","getScopeAttribute","Generators","toData","nuFrom","recent","getOrInit","makeNew","replaceOrInit","merge","stringAttributes","baseScope_1","scopes_1","getScopeProperty","blockList","universe$2","isBlock$1","tagName","isBlock","isList$1","isList","merge$2","isBr","markCell","rightSiblingIsBlock","rightSibling","contents","advancedBr","outcome","elementFromGrid","findIn","bundle","uniqueRows","gridifyRows","pasteDetails","wh","getCellsType","headerPred","headerCells","_table","_info","adjustAndRedistributeWidths$1","tablePixelWidth","firstColumnIsLocked","lastColumnIsLocked","getColumnsWidth","uniqueCols","insertColumnsExtractor","pasteColumnsExtractor","insertRowsBefore","targetIndex","newGrid","insertRowsAfter","newG","insertColumnsBefore","extractDetail","insertColumnsAfter","eraseColumns","_comparator","_genWrappers","deleteColumnsAt","eraseRows","deleteRowsAt","makeColumnsHeader","initialGrid","currentGrid","unmakeColumnsHeader","mergeCells","unmergeCells","gridify","validStartAddress","currentStartAddress","gridColLength","possibleColAddresses","validColAddress","getValidStartAddress","lockedColumnsWithinBounds","rowRemainder","colRemainder","colRequired","rowRequired","measure","fittedGrid","newLockedColumnsWithinBounds","lockedColumnObj","skippedCol","gridBColIndex","newCellElm","mergeTables","merge$1","pasteColsBefore","mergedGrid","pasteColsAfter","pasteRowsBefore","pasteRowsAfter","getColumnType","lastSelectedCell","minColRange","maxColRange","selectedColumnCells","detectHeaderRow","isThead","areAllCellsThs","thead","ths","getRowType","_rowConfig","switchRowSection","rowElm","newSectionName","tableElm","oldSectionElm","oldSectionName","sectionElm_1","firstTableChild_1","insertAfter","switchCellType","newCellType","rename","renameCell","setAttrib","switchCellsType","switchSectionType","allTableRows","headerRowTypeSetting","headerRowType","detectedType","getSelectionStartFromSelector","startCellName","getSelectionStartCellFallback","getSelectionStartCell","getSelectionStartCellOrCaption","getCellsFromSelection","_cell","getRowsFromSelection","oa","ob","rowsOpt","DefaultRenderOptions","colGroups","createRows","rowHeaders","columnHeaders","createRow","placeCaretInCell","collapse","insert$1","colHeaders","headerType","renderOpts","rowHeadersGoInThead","createGroupRow","actualRowHeaders","theadRows","tbody","tbodyRows","render$1","get$b","getOuter$2","insertContent","addVisual","isPercentage$1","fireEvents","selectFirstCellInTable","insertTableWithDataValidation","errorMsg","checkInput","headerRows","headerColumns","getClipboardElements","getClipboard","setClipboardElements","setClipboard","elmsOpt","insertTable","constrainSpan","currentColspan","global$1","getTDTHOverallStyle","firstChildStyle","elms","currentStyle","checkChildren","applyAlign","formatter","unApplyAlign","buildListItems","inputList","startItems","title","isListGroup","items","menu","rgbToHex","toHex","extractAdvancedStyles","borderwidth","borderstyle","bordercolor","backgroundcolor","getSharedValues","baseData","comparisonData","itemValue","itemKey","comparisonValue","getAdvancedTab","dialogName","advTabItems","getAlignment","formatName","matchNode","getHAlignment","getVAlignment","children$3","getItems","classes","getCellClassList","getClassList","modifiers","testTruthy","setStyle","setFormat","DomModifier","normal","ifTruthy","getSelectedCells","cellA","cellB","onSubmitCellForm","oldData","getData","close","transact","isSingleCell","modifiedData","tableOpt","cellElm","celltype","modifier","colModifier","class","updateSimpleProps","updateAdvancedProps","unApplyVAlign","halign","valign","applyVAlign","styleModified_1","applyCellData","open","cellsData","colElm","extractDataFromCellElement","dialogTabPanel","tabs","dialogPanel","windowManager","buttons","primary","initialData","onSubmit","formChildren","getItems$1","getRowClassList","getClassList$1","onSubmitRowForm","isSingleRow","updateSimpleProps$1","updateAdvancedProps$1","align","typeModified_1","applyRowData","open$1","rowsData","extractDataFromRowElement","global$2","getItems$2","insertNewTable","rowColCountItems","inputMode","appearanceItems","hasAppearanceOptions","classListItem","styleTDTH","onSubmitTableForm","captionElm","removePxSuffix","cellspacing","cellpadding","serializeStyle","setAttribs","applyDataToElement","caption","ie","captionModified","open$2","hasAdvTableTab","spacing","borderWidth","advStyle","extractDataFromSettings","optBorderWidth","getBorder","extractDataFromTableElement","getTableClassList","generalPanel","dialogBody","getSelectionStartCellOrCaption$1","getSelectionStartCell$1","registerCommands","getTableFromCell","postExecute","effect","actOnSelection","execute","copyRowSelection","slicedGrid","filteredGrid","slicedDetails","clonedCell","copyRows","copyColSelection","colsToCopy","copiedCols","clonedCol","fakeColgroup","generateColGroup","cellsToCopy","copiedCells","fakeTR","generateRows","copyCols","pasteOnSelection","getRows","clonedRows","pasteRows","mceTableSplitCells","mceTableMergeCells","mceTableInsertRowBefore","mceTableInsertRowAfter","mceTableInsertColBefore","mceTableInsertColAfter","mceTableDeleteCol","deleteColumn","mceTableDeleteRow","deleteRow","mceTableCutCol","_grid","setColumns","mceTableCutRow","setRows","mceTableCopyCol","mceTableCopyRow","mceTablePasteColBefore","getColumns","mceTablePasteColAfter","mceTablePasteRowBefore","mceTablePasteRowAfter","mceTableDelete","cellOrCaption","isEmpty","setContent","setCursorLocation","createRng","setStart","setEnd","nodeChanged","mceTableSizingMode","ui","setSizingMode","func","addCommand","fireTableModifiedForSelection","mceTableCellType","_ui","setTableCellType","mceTableRowType","setTableRowType","mceTableProps","mceTableRowProps","mceTableCellProps","getFormatName","validArgs","cellFormats","tablecellbackgroundcolor","backgroundColor","remove_similar","tablecellbordercolor","borderColor","tablecellborderstyle","borderStyle","tablecellborderwidth","adt$2","CellLocation","detect$5","SimRange","soffset","foffset","adt$3","Situ","onBefore","onOn","onAfter","situ","adt$4","domRange","exact","SimSelection","exactFromRange","simRange","getWin","startContainer","startSitu","_finishSitu","_soffset","_finish","_foffset","getStart$1","relativeToNative","finishSitu","createRange","setStartBefore","setStartAfter","setEndBefore","setEndAfter","setFinish","exactToNative","toRect","rect","bottom","adt$5","fromRange","startOffset","endContainer","endOffset","diagnose","ranges","getRanges","collapsed","rev","asLtrRange","inRect","locateNode","selectNode","rects","getClientRects","textnode","rangeForOffset","rectForOffset","maxX","curDeltaX","searchForPoint","locateOffset","locate","searchInChildren","getCollapseDirection","createCollapsedNode","collapseDirection","locateInElement","cursorRange","locateInEmpty","availableSearch","caretPositionFromPoint","offsetNode","caretRangeFromPoint","boundedX","boundedY","locate$1","searchTextNodes","beforeSpecial","name$1","preprocessRelative","preprocessExact","getNativeSelection","getSelection","doSetNativeRange","removeAllRanges","addRange","doSetRange","setRangeFromRelative","setBaseAndExtent","extend","setLegacyRtlRange","setExact","setRelative","readRange","rangeCount","firstRng","getRangeAt","lastRng","doGetExact","anchorNode","focusNode","anchor","focus_1","makeRange","same","after$3","anchorOffset","focusOffset","get$c","sel","getExact","global$3","forward","backward","getCellFirstCursorPosition","getDomRange","preprocess","toNative","execCommand","getNewRowCursorPosition","rootElements","Response","Situs","convertToRange","makeSitus","detect$6","selectRange","cellSel","traverse","backtrack","_direction","transition","sidestep","advance","sibling","successors","go$1","rules","succ","rule","hone","isLeaf","seekLeft","seekRight","universe$3","before$4","before$3","after$5","after$4","adt$6","success","failedUp","failedDown","isRow","BeforeAfter","verify","bridge","beforeOffset","afterOffset","failure","afterCell","beforeCell","beforeBounds","getRect","afterBounds","isOverlapping","_sharedRow","onSuccess","onFailedUp","onFailedDown","gatherer","cand","gather","handleParent","findBr","br","adjacent","inParent","indexInParent","moveDown","caret","moveUp","toCaret","getElemBox","getBoxAt","getRangedRect","getPartialBox","getEntireBox","adt$7","retry","inOutsideBlock","isOutside","downMovement","adjuster","guessBox","lowerCaret","adjustTil","numRetries","isAtTable","adjustForTable","situsFromPoint","guess","newCaret","moved","adjusted","getInnerHeight","checkScroll","scrollBy","Retries","tryUp","higherCaret","tryDown","ieTryUp","ieTryDown","getJumpSize","findSpot","handleBr","tgt","tryBr","brNeighbour","analysis","fromSitus","_message","scan$1","tryCursor","situs","tryAgain","tryAt","otherRetry","ieRetry","simulate","inSameTable","spot","handle$2","navigate","precheck","firstUpCheck","seekLeft$1","lastOffset","lastDownCheck","seekRight$1","findCell","isKey","keycode","isUp","isDown","isNavigation","ltr$2","isBackward","isForward","rtl$2","WindowBridge","getFirstRect$1","exactAdt","fromPoint$1","getAtPoint","clearSelection","collapseSelection","toStart","setSelection","setRelativeSelection","selectContents","selectNodeContents","selectNodeContentsUsing","setToElement","innerHeight","getScrollY","_DOC","by","rc","hasInternalTarget","CellSelection","selectionTargets","annotations","onSelection","onClear","removeSelectionAttributes","addSelectionAttribute","clearBeforeUpdate","SelectionAnnotation","otherCells","upOrLeftCells","upGrid","upDetails","slicedCells","getUpOrLeftCells","downOrRightCells","downGrid","downDetails","getDownOrRightCells","getOtherCells","fireTableSelectionChange","fireTableSelectionClear","_e","mouseHandlers","isSet","clearstate","applySelection","mouseup","MouseSelection","mouse","keyHandlers","clearToNavigate","keydown","realEvent","which","shiftKey","update$1","attempts","newSels","keyup","sync","keyboard","external$1","external","lastTarget","lastTimeStamp","handleResponse","response","hasShiftKey","ns","isLeftMouse","button","doubleTap","touchEnd","lT","lTS","timeStamp","wrappedEvent","changeHandlers","selectionDetails","isCaption","isDisabledForSelection","findTargets","noMenu","getExtractedDetails","onAny","onFirst","onLast","unmergeable","resetTargets","onSetup","isDisabled","setDisabled","isDisabledFromLocked","lockedDisable","onSetupTable","onSetupCellOrRow","onSetupColumn","onSetupPasteable","getClipboardData","onSetupPasteableColumn","onSetupMergeable","_targets","onSetupUnmergeable","getSelectionTargets","resizeHandler","isTableBody","colMutationOp","guard","des","insertRowsBefore$1","insertRowsAfter$1","insertColumnsBefore$1","insertColumnsAfter$1","mergeCells$1","unmergeCells$1","pasteColsBefore$1","pasteColsAfter$1","pasteRowsBefore$1","pasteRowsAfter$1","pasteCells$1","extractType","validTypes","getTableRowType","rowTypes","hasHeader","hasFooter","hasBody","getTableCellType","getTableColType","TableActions","clearClipboard","clearRows","clearColumns","Clipboard","mceTableColType","addQueryValueHandler","registerQueryCommands","cmd","command","insertTableAction","numRows","numColumns","tableProperties","onAction","deleteTable","icon","addMenuItem","hasTableGrid","addNestedMenuItem","getSubmenuItems","fancytype","addContextMenu","addMenuItems","addMenuButton","tooltip","fetch","callback","addButton","addButtons","toolbar","getToolbar","addContextToolbar","addToolbars","addTempAttr","register","registerFormats","hasTabNavigation","keyCode","TAB","body_1","isRoot_1","handle$1","setClipboardRows","getClipboardRows","setClipboardCols","getClipboardCols","getApi"],"mappings":"uFAMA,EAAQ,Q,YCEP,WACG,aAEA,IAYIA,EAAS,SAAUC,GACrB,OAAO,SAAUC,GACf,OAbEC,SADiBC,EAcLF,IAZN,OAANE,EACK,OACQ,WAAND,IAAmBE,MAAMC,UAAUC,cAAcH,IAAMA,EAAEI,aAAsC,UAAvBJ,EAAEI,YAAYC,MACxF,QACQ,WAANN,IAAmBO,OAAOJ,UAAUC,cAAcH,IAAMA,EAAEI,aAAsC,WAAvBJ,EAAEI,YAAYC,MACzF,SAEAN,KAKkBF,EAdhB,IAAUG,EACjBD,IAgBFQ,EAAe,SAAUV,GAC3B,OAAO,SAAUC,GACf,cAAcA,IAAUD,IAQxBW,EAAWZ,EAAO,UAClBa,EAAWb,EAAO,UAClBc,EAAUd,EAAO,SACjBe,EAAYJ,EAAa,WACzBK,QAAiBC,EARZ,SAAUC,GACf,OAOiBD,YAPJC,IAWbC,EAAgB,SAAUD,GAC5B,OAJe,SAAUA,GACzB,OAAOA,QAGCE,CAAWF,IAEjBG,EAAaV,EAAa,YAC1BW,EAAWX,EAAa,UAExBY,EAAO,aAgBPC,EAAW,SAAUtB,GACvB,OAAO,WACL,OAAOA,IAGPuB,EAAW,SAAUrB,GACvB,OAAOA,GAET,SAASsB,EAAMC,GAEb,IADA,IAAIC,EAAc,GACTC,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,IACtCD,EAAYC,EAAK,GAAKC,UAAUD,GAElC,OAAO,WAEL,IADA,IAAIG,EAAW,GACNH,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,IACtCG,EAASH,GAAMC,UAAUD,GAE3B,IAAII,EAAML,EAAYM,OAAOF,GAC7B,OAAOL,EAAGQ,MAAM,KAAMF,IAG1B,IAiBMG,EAGAC,EAGAC,EAvBFC,EAAM,SAAUC,GAClB,OAAO,SAAUrC,GACf,OAAQqC,EAAErC,KAQVsC,EAAQjB,GAAS,GACjBkB,EAASlB,GAAS,GAElBmB,EAAO,WACT,OAAOC,GAELA,GACER,EAAK,SAAUS,GACjB,OAAOA,EAAEC,UAQF,CACPC,KAAM,SAAUC,EAAGC,GACjB,OAAOD,KAETE,GAAIT,EACJU,OAAQV,EACRK,OAAQJ,EACRU,MAVEd,EAAK,SAAUU,GACjB,OAAOA,GAUPK,WAdEhB,EAAO,SAAUiB,GACnB,OAAOA,KAcPC,SAAU,SAAUC,GAClB,MAAM,IAAIC,MAAMD,GAAO,oCAEzBE,UAAWlC,EAAS,MACpBmC,eAAgBnC,OAASP,GACzB2C,GAAItB,EACJuB,QAASxB,EACTyB,IAAKnB,EACLoB,KAAMxC,EACNyC,KAAMrB,EACNsB,OAAQxB,EACRyB,OAAQxB,EACRyB,OAAQxB,EACRyB,OAAQhC,EACRiC,QAASjC,EACTkC,QAAS,WACP,MAAO,IAETC,SAAU/C,EAAS,YAInBgD,EAAO,SAAUtD,GACnB,IAAIuD,EAAajD,EAASN,GACtBwD,EAAO,WACT,OAAOC,GAELX,EAAO,SAAUxB,GACnB,OAAOA,EAAEtB,IAEPyD,EAAK,CACP5B,KAAM,SAAUC,EAAG4B,GACjB,OAAOA,EAAE1D,IAEXgC,GAAI,SAAU2B,GACZ,OAAO3D,IAAM2D,GAEf1B,OAAQT,EACRI,OAAQL,EACRW,MAAOqB,EACPpB,WAAYoB,EACZlB,SAAUkB,EACVf,UAAWe,EACXd,eAAgBc,EAChBb,GAAIc,EACJb,QAASa,EACTZ,IAAK,SAAUtB,GACb,OAAOgC,EAAKhC,EAAEtB,KAEhB6C,KAAM,SAAUvB,GACdA,EAAEtB,IAEJ8C,KAAMA,EACNC,OAAQD,EACRE,OAAQF,EACRG,OAAQ,SAAU3B,GAChB,OAAOA,EAAEtB,GAAKyD,EAAK/B,GAErB0B,QAAS,WACP,MAAO,CAACpD,IAEVqD,SAAU,WACR,MAAO,QAAUrD,EAAI,KAEvBkD,OAAQ,SAAUvB,GAChB,OAAOA,EAAEK,GAAGhC,IAEdmD,QAAS,SAAUxB,EAAGiC,GACpB,OAAOjC,EAAEE,KAAKN,GAAO,SAAUsC,GAC7B,OAAOD,EAAU5D,EAAG6D,QAI1B,OAAOJ,GAKLK,EAAW,CACbR,KAAMA,EACN7B,KAAMA,EACNsC,KANS,SAAU/E,GACnB,OAAOA,QAAwC0C,EAAO4B,EAAKtE,KAQzDgF,EAAc7E,MAAMC,UAAU6E,MAC9BC,EAAgB/E,MAAMC,UAAU+E,QAChCC,EAAajF,MAAMC,UAAUiF,KAI7BC,EAAW,SAAUC,EAAIrF,GAC3B,OAJe,SAAUsF,EAAIvF,GAC7B,OAAOiF,EAAc/C,KAAKqD,EAAIvF,GAGvBwF,CAAWF,EAAIrF,IAAM,GAE1B6D,EAAS,SAAUwB,EAAIG,GACzB,IAAK,IAAIC,EAAI,EAAGC,EAAML,EAAG1D,OAAQ8D,EAAIC,EAAKD,IAExC,GAAID,EADIH,EAAGI,GACCA,GACV,OAAO,EAGX,OAAO,GAELE,EAAQ,SAAUC,EAAKxD,GAEzB,IADA,IAAIyD,EAAI,GACCJ,EAAI,EAAGA,EAAIG,EAAKH,IACvBI,EAAEV,KAAK/C,EAAEqD,IAEX,OAAOI,GAELnC,EAAM,SAAU2B,EAAIjD,GAGtB,IAFA,IAAIsD,EAAML,EAAG1D,OACTkE,EAAI,IAAI5F,MAAMyF,GACTD,EAAI,EAAGA,EAAIC,EAAKD,IAAK,CAC5B,IAAIzF,EAAIqF,EAAGI,GACXI,EAAEJ,GAAKrD,EAAEpC,EAAGyF,GAEd,OAAOI,GAELlC,EAAO,SAAU0B,EAAIjD,GACvB,IAAK,IAAIqD,EAAI,EAAGC,EAAML,EAAG1D,OAAQ8D,EAAIC,EAAKD,IAExCrD,EADQiD,EAAGI,GACNA,IAsBL1B,EAAS,SAAUsB,EAAIG,GAEzB,IADA,IAAIK,EAAI,GACCJ,EAAI,EAAGC,EAAML,EAAG1D,OAAQ8D,EAAIC,EAAKD,IAAK,CAC7C,IAAIzF,EAAIqF,EAAGI,GACPD,EAAKxF,EAAGyF,IACVI,EAAEV,KAAKnF,GAGX,OAAO6F,GAELC,EAAQ,SAAUT,EAAIjD,EAAG2D,GAI3B,OAjCU,SAAUV,EAAIjD,GACxB,IAAK,IAAIqD,EAAIJ,EAAG1D,OAAS,EAAG8D,GAAK,EAAGA,IAElCrD,EADQiD,EAAGI,IA4BbO,CAAMX,GAAI,SAAUrF,GAClB+F,EAAM3D,EAAE2D,EAAK/F,MAER+F,GAELE,EAAQ,SAAUZ,EAAIjD,EAAG2D,GAI3B,OAHApC,EAAK0B,GAAI,SAAUrF,GACjB+F,EAAM3D,EAAE2D,EAAK/F,MAER+F,GAaLG,EAAO,SAAUb,EAAIG,GACvB,OAZc,SAAUH,EAAIG,EAAMW,GAClC,IAAK,IAAIV,EAAI,EAAGC,EAAML,EAAG1D,OAAQ8D,EAAIC,EAAKD,IAAK,CAC7C,IAAIzF,EAAIqF,EAAGI,GACX,GAAID,EAAKxF,EAAGyF,GACV,OAAOb,EAASR,KAAKpE,GAChB,GAAImG,EAAMnG,EAAGyF,GAClB,MAGJ,OAAOb,EAASrC,OAGT6D,CAAUf,EAAIG,EAAMnD,IAEzBgE,EAAY,SAAUhB,EAAIG,GAC5B,IAAK,IAAIC,EAAI,EAAGC,EAAML,EAAG1D,OAAQ8D,EAAIC,EAAKD,IAExC,GAAID,EADIH,EAAGI,GACCA,GACV,OAAOb,EAASR,KAAKqB,GAGzB,OAAOb,EAASrC,QAEd+D,EAAU,SAAUjB,GAEtB,IADA,IAAIQ,EAAI,GACCJ,EAAI,EAAGC,EAAML,EAAG1D,OAAQ8D,EAAIC,IAAOD,EAAG,CAC7C,IAAK/E,EAAQ2E,EAAGI,IACd,MAAM,IAAIpC,MAAM,oBAAsBoC,EAAI,6BAA+BJ,GAE3EH,EAAWnD,MAAM8D,EAAGR,EAAGI,IAEzB,OAAOI,GAELjC,EAAO,SAAUyB,EAAIjD,GACvB,OAAOkE,EAAQ5C,EAAI2B,EAAIjD,KAErB0B,EAAS,SAAUuB,EAAIG,GACzB,IAAK,IAAIC,EAAI,EAAGC,EAAML,EAAG1D,OAAQ8D,EAAIC,IAAOD,EAE1C,IAAmB,IAAfD,EADIH,EAAGI,GACCA,GACV,OAAO,EAGX,OAAO,GAOLc,EAAc,SAAUlB,EAAIjD,GAE9B,IADA,IAAIyD,EAAI,GACCJ,EAAI,EAAGC,EAAML,EAAG1D,OAAQ8D,EAAIC,EAAKD,IAAK,CAC7C,IAAIzF,EAAIqF,EAAGI,GACXI,EAAEvF,OAAON,IAAMoC,EAAEpC,EAAGyF,GAEtB,OAAOI,GAELW,EAAO,SAAUxG,GACnB,MAAO,CAACA,IAONyG,EAAM,SAAUpB,EAAII,GACtB,OAAOA,GAAK,GAAKA,EAAIJ,EAAG1D,OAASiD,EAASR,KAAKiB,EAAGI,IAAMb,EAASrC,QAE/DmE,EAAO,SAAUrB,GACnB,OAAOoB,EAAIpB,EAAI,IAEbsB,EAAO,SAAUtB,GACnB,OAAOoB,EAAIpB,EAAIA,EAAG1D,OAAS,IAEzBiF,EAAU,SAAUC,EAAKzE,GAC3B,IAAK,IAAIqD,EAAI,EAAGA,EAAIoB,EAAIlF,OAAQ8D,IAAK,CACnC,IAAII,EAAIzD,EAAEyE,EAAIpB,GAAIA,GAClB,GAAII,EAAE9C,SACJ,OAAO8C,EAGX,OAAOjB,EAASrC,QAGduE,EAAW,WAUb,OATAA,EAAWC,OAAOC,QAAU,SAAkBjH,GAC5C,IAAK,IAAIyE,EAAGiB,EAAI,EAAG7C,EAAIlB,UAAUC,OAAQ8D,EAAI7C,EAAG6C,IAE9C,IAAK,IAAIwB,KADTzC,EAAI9C,UAAU+D,GAERsB,OAAO7G,UAAUgH,eAAejF,KAAKuC,EAAGyC,KAC1ClH,EAAEkH,GAAKzC,EAAEyC,IAEf,OAAOlH,IAEOgC,MAAMoF,KAAMzF,YAE9B,SAAS0F,IACP,IAAK,IAAI5C,EAAI,EAAGiB,EAAI,EAAG4B,EAAK3F,UAAUC,OAAQ8D,EAAI4B,EAAI5B,IACpDjB,GAAK9C,UAAU+D,GAAG9D,OACf,IAAIkE,EAAI5F,MAAMuE,GAAI8C,EAAI,EAA3B,IAA8B7B,EAAI,EAAGA,EAAI4B,EAAI5B,IAC3C,IAAK,IAAI3E,EAAIY,UAAU+D,GAAI8B,EAAI,EAAGC,EAAK1G,EAAEa,OAAQ4F,EAAIC,EAAID,IAAKD,IAC5DzB,EAAEyB,GAAKxG,EAAEyG,GACb,OAAO1B,EAGT,IAAI4B,EAAS,SAAUrF,GACrB,IACIyD,EADA6B,GAAS,EAEb,OAAO,WAEL,IADA,IAAIC,EAAO,GACFlG,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,IACtCkG,EAAKlG,GAAMC,UAAUD,GAMvB,OAJKiG,IACHA,GAAS,EACT7B,EAAIzD,EAAEL,MAAM,KAAM4F,IAEb9B,IAuDP+B,EAAU,WACZ,OAAOC,EAAG,EAAG,IAEXA,EAAK,SAAUC,EAAOC,GACxB,MAAO,CACLD,MAAOA,EACPC,MAAOA,IAGPC,EAhBS,SAAUC,EAAgBC,GACrC,IAAIC,EAAe7H,OAAO4H,GAAOE,cACjC,OAA8B,IAA1BH,EAAetG,OACViG,IAhBE,SAAUS,EAASH,GAC9B,IAAIrC,EAVW,SAAUwC,EAAS7D,GAClC,IAAK,IAAIiB,EAAI,EAAGA,EAAI4C,EAAQ1G,OAAQ8D,IAAK,CACvC,IAAIzF,EAAIqI,EAAQ5C,GAChB,GAAIzF,EAAEsI,KAAK9D,GACT,OAAOxE,GAMHuI,CAAWF,EAASH,GAC5B,IAAKrC,EACH,MAAO,CACLiC,MAAO,EACPC,MAAO,GAGX,IAAIS,EAAQ,SAAU/C,GACpB,OAAOgD,OAAOP,EAAMQ,QAAQ7C,EAAG,IAAMJ,KAEvC,OAAOoC,EAAGW,EAAM,GAAIA,EAAM,IAOnBG,CAAOV,EAAgBE,IAW5BH,EAGOJ,EAGPgB,EAAW,SAAUC,EAAYC,GACnC,IAAIZ,EAAQ5H,OAAOwI,GAAWV,cAC9B,OAAOlC,EAAK2C,GAAY,SAAUE,GAChC,OAAOA,EAAUC,OAAOd,OA0BxBe,GAAa,SAAUC,EAAKC,EAAQC,GACtC,MAAkB,KAAXD,GAAiBD,EAAIvH,QAAUwH,EAAOxH,QAAUuH,EAAIC,OAAOC,EAAOA,EAAQD,EAAOxH,UAAYwH,GAElGE,GAAa,SAAUH,EAAKC,GAC9B,OAAgC,IAAzBD,EAAIjE,QAAQkE,IAEjBG,GAAa,SAAUJ,EAAKK,GAC9B,OAAON,GAAWC,EAAKK,EAAQ,IAE7BC,GAAW,SAAUN,EAAKO,GAC5B,OAAOR,GAAWC,EAAKO,EAAQP,EAAIvH,OAAS8H,EAAO9H,SAOjD+H,GALQ,SAAU7D,GACpB,OAAO,SAAUrB,GACf,OAAOA,EAAEkE,QAAQ7C,EAAG,KAGb8D,CAAM,cACbC,GAAa,SAAUpF,GACzB,OAAOA,EAAE7C,OAAS,GAGhBkI,GAAqB,sCACrBC,GAAgB,SAAUC,GAC5B,OAAO,SAAUC,GACf,OAAOX,GAAWW,EAAUD,KAG5BE,GAAW,CACb,CACE5J,KAAM,OACN4H,eAAgB,CAAC,kCACjBe,OAAQ,SAAUgB,GAChB,OAAOX,GAAWW,EAAU,UAAYX,GAAWW,EAAU,WAAaX,GAAWW,EAAU,WAAaX,GAAWW,EAAU,iBAGrI,CACE3J,KAAM,SACN4H,eAAgB,CACd,kCACA4B,IAEFb,OAAQ,SAAUgB,GAChB,OAAOX,GAAWW,EAAU,YAAcX,GAAWW,EAAU,iBAGnE,CACE3J,KAAM,KACN4H,eAAgB,CACd,iCACA,8BAEFe,OAAQ,SAAUgB,GAChB,OAAOX,GAAWW,EAAU,SAAWX,GAAWW,EAAU,aAGhE,CACE3J,KAAM,QACN4H,eAAgB,CACd4B,GACA,kCAEFb,OAAQc,GAAc,UAExB,CACEzJ,KAAM,UACN4H,eAAgB,CAAC,uCACjBe,OAAQc,GAAc,YAExB,CACEzJ,KAAM,SACN4H,eAAgB,CACd4B,GACA,iCAEFb,OAAQ,SAAUgB,GAChB,OAAQX,GAAWW,EAAU,WAAaX,GAAWW,EAAU,aAAeX,GAAWW,EAAU,kBAIrGE,GAAO,CACT,CACE7J,KAAM,UACN2I,OAAQc,GAAc,OACtB7B,eAAgB,CAAC,0CAEnB,CACE5H,KAAM,MACN2I,OAAQ,SAAUgB,GAChB,OAAOX,GAAWW,EAAU,WAAaX,GAAWW,EAAU,SAEhE/B,eAAgB,CACd,sCACA,+BACA,wCAGJ,CACE5H,KAAM,UACN2I,OAAQc,GAAc,WACtB7B,eAAgB,CAAC,sCAEnB,CACE5H,KAAM,MACN2I,OAAQc,GAAc,YACtB7B,eAAgB,CAAC,wCAEnB,CACE5H,KAAM,QACN2I,OAAQc,GAAc,SACtB7B,eAAgB,IAElB,CACE5H,KAAM,UACN2I,OAAQc,GAAc,SACtB7B,eAAgB,IAElB,CACE5H,KAAM,UACN2I,OAAQc,GAAc,WACtB7B,eAAgB,IAElB,CACE5H,KAAM,WACN2I,OAAQc,GAAc,QACtB7B,eAAgB,CAAC,qCAGjBkC,GAAe,CACjBF,SAAU7I,EAAS6I,IACnBC,KAAM9I,EAAS8I,KAGbE,GAAO,OACPC,GAAS,SAETC,GAAQ,QACRC,GAAU,UACVC,GAAS,SAOTC,GAAO,SAAUC,GACnB,IAAIC,EAAUD,EAAKC,QACfC,EAAUF,EAAKE,QACfC,EAAY,SAAUxK,GACxB,OAAO,WACL,OAAOsK,IAAYtK,IAGvB,MAAO,CACLsK,QAASA,EACTC,QAASA,EACTE,OAAQD,EAAUT,IAClBW,SAAUF,EAAUR,IACpBW,KAAMH,EAvBD,MAwBLI,QAASJ,EAAUP,IACnBY,UAAWL,EAAUN,IACrBY,SAAUN,EAAUL,MAGpBY,GAzBY,WACd,OAAOX,GAAK,CACVE,aAAS9J,EACT+J,QAAS5C,OAsBToD,GAEEX,GASFY,IARIjK,EAASgJ,IACPhJ,EAASiJ,IACbjJ,EAlCG,MAmCAA,EAASkJ,IACPlJ,EAASmJ,IACVnJ,EAASoJ,IAGL,WAEVc,GAAU,UACVC,GAAQ,QAERC,GAAU,UACVC,GAAU,UACVC,GAAW,WAOXC,GAAO,SAAUjB,GACnB,IAAIC,EAAUD,EAAKC,QACfC,EAAUF,EAAKE,QACfgB,EAAO,SAAUvL,GACnB,OAAO,WACL,OAAOsK,IAAYtK,IAGvB,MAAO,CACLsK,QAASA,EACTC,QAASA,EACTiB,UAAWD,EAAKP,IAChBS,MAAOF,EAzBD,OA0BNG,UAAWH,EAAKN,IAChBU,MAAOJ,EAxBD,OAyBNK,QAASL,EAAKL,IACdW,UAAWN,EAAKJ,IAChBW,UAAWP,EAAKH,IAChBW,WAAYR,EAAKF,MAGjBW,GA3BY,WACd,OAAOV,GAAK,CACVhB,aAAS9J,EACT+J,QAAS5C,OAwBTqE,GAEEV,GAuBFW,IAtBOlL,EAASiK,IACbjK,EAtCG,OAuCCA,EAASkK,IACXlK,EAASmK,IACXnK,EAtCG,OAuCCA,EAASoK,IACTpK,EAASqK,IACRrK,EAASsK,IAGN,SAAU5C,EAAWyD,GAClC,IAAItC,EAAWE,GAAaF,WACxBC,EAAOC,GAAaD,OACpBsC,EAzPc,SAAUvC,EAAUnB,GACtC,OAAOF,EAASqB,EAAUnB,GAAWpF,KAAI,SAAU8I,GACjD,IAAI5B,EAAU5C,EAAewE,EAAQvE,eAAgBa,GACrD,MAAO,CACL6B,QAAS6B,EAAQnM,KACjBuK,QAASA,MAoPC6B,CAAuBxC,EAAUnB,GAAWnG,KAAKyI,GAAiBA,IAC5EsB,EAjPS,SAAUxC,EAAMpB,GAC7B,OAAOF,EAASsB,EAAMpB,GAAWpF,KAAI,SAAUgJ,GAC7C,IAAI9B,EAAU5C,EAAe0E,EAAGzE,eAAgBa,GAChD,MAAO,CACL6B,QAAS+B,EAAGrM,KACZuK,QAASA,MA4OJ6B,CAAkBvC,EAAMpB,GAAWnG,KAAK0J,GAAyBA,IACtEM,EAnUW,SAAUD,EAAIF,EAAS1D,EAAWyD,GACjD,IAAIK,EAASF,EAAGZ,UAAuC,IAA5B,QAAQxD,KAAKQ,GACpC+D,EAAWH,EAAGZ,UAAYc,EAC1BE,EAAWJ,EAAGZ,SAAWY,EAAGX,YAC5BgB,EAAUD,GAAYP,EAAW,oBACjCS,EAAWJ,IAAWC,GAAYC,GAAYP,EAAW,4BACzDU,EAAUJ,GAAYC,IAAaE,EACnCE,EAAaV,EAAQrB,YAAcuB,EAAGZ,UAAyC,IAA9B,UAAUxD,KAAKQ,GAChEqE,GAAaF,IAAYD,IAAaE,EAC1C,MAAO,CACLN,OAAQxL,EAASwL,GACjBC,SAAUzL,EAASyL,GACnBG,SAAU5L,EAAS4L,GACnBC,QAAS7L,EAAS6L,GAClBF,QAAS3L,EAAS2L,GAClBhB,UAAWW,EAAGX,UACdD,MAAOY,EAAGZ,MACVsB,UAAWhM,EAAS8L,GACpBC,UAAW/L,EAAS+L,IAiTLE,CAAWX,EAAIF,EAAS1D,EAAWyD,GACpD,MAAO,CACLC,QAASA,EACTE,GAAIA,EACJC,WAAYA,KAKZJ,GAAa,SAAUe,GACzB,OAAOC,OAAOC,WAAWF,GAAOG,SAE9BC,GAAWjG,GAAO,WACpB,OAAO6E,GAAyBqB,UAAU7E,UAAWyD,OAEnDqB,GAAW,WACb,OAAOF,MAoCLG,GAAU,SAAUC,GACtB,GAAIA,QACF,MAAM,IAAIzK,MAAM,oCAElB,MAAO,CAAE0K,IAAKD,IAKZE,GAAe,CACjBC,SA9Ba,SAAUC,EAAMC,GAC7B,IACIC,GADMD,GAASE,UACLC,cAAc,OAE5B,GADAF,EAAIG,UAAYL,GACXE,EAAII,iBAAmBJ,EAAIK,WAAW9M,OAAS,EAElD,MADA+M,QAAQC,MAAM,wCAAyCT,GACjD,IAAI7K,MAAM,qCAElB,OAAOwK,GAAQO,EAAIK,WAAW,KAuB9BG,QArBY,SAAUC,EAAKV,GAC3B,IACIL,GADMK,GAASE,UACJC,cAAcO,GAC7B,OAAOhB,GAAQC,IAmBfgB,SAjBa,SAAUC,EAAMZ,GAC7B,IACIL,GADMK,GAASE,UACJW,eAAeD,GAC9B,OAAOlB,GAAQC,IAefD,QAASA,GACToB,UARc,SAAUC,EAAQlP,EAAGmP,GACnC,OAAOvK,EAASC,KAAKqK,EAAOnB,IAAIqB,iBAAiBpP,EAAGmP,IAAIzL,IAAImK,MAU1D/K,GAAK,SAAUuM,EAASC,GAC1B,IAAIvB,EAAMsB,EAAQtB,IAClB,GA1CY,IA0CRA,EAAIwB,SACN,OAAO,EAEP,IAAIC,EAAOzB,EACX,QAAqBlN,IAAjB2O,EAAK/B,QACP,OAAO+B,EAAK/B,QAAQ6B,GACf,QAA+BzO,IAA3B2O,EAAKC,kBACd,OAAOD,EAAKC,kBAAkBH,GACzB,QAAmCzO,IAA/B2O,EAAKE,sBACd,OAAOF,EAAKE,sBAAsBJ,GAC7B,QAAgCzO,IAA5B2O,EAAKG,mBACd,OAAOH,EAAKG,mBAAmBL,GAE/B,MAAM,IAAIjM,MAAM,mCAIlBuM,GAAiB,SAAU7B,GAC7B,OA5DY,IA4DLA,EAAIwB,UA9DE,IA8DsBxB,EAAIwB,UA7DjB,KA6D0CxB,EAAIwB,UAA4D,IAA1BxB,EAAI8B,mBAWxGC,GAAO,SAAUC,EAAIC,GACvB,OAAOD,EAAGhC,MAAQiC,EAAGjC,KAUnBkC,GAAa,SAAUF,EAAIC,GAC7B,OAAOpC,KAAWpB,QAAQxB,OAJX,SAAU+E,EAAIC,GAC7B,OA1FsClP,EA0FHiP,EAAGhC,IA1FGpJ,EA0FEqL,EAAGjC,IA1FFmC,EAIPC,KAAKC,+BAHQ,IAA1CtP,EAAEuP,wBAAwB1L,GAAKuL,GADX,IAAUpP,EAAG6D,EAAGuL,EA6FTI,CAAWP,EAAIC,GAT9B,SAAUD,EAAIC,GAClC,IAAIO,EAAKR,EAAGhC,IACRyC,EAAKR,EAAGjC,IACZ,OAAOwC,IAAOC,GAAaD,EAAGnL,SAASoL,GAMiBC,CAAgBV,EAAIC,IAE1EU,GAAO5N,GAEP6N,GAAO5J,OAAO4J,KACdzJ,GAAiBH,OAAOG,eACxB0J,GAAS,SAAUC,EAAKzO,GAE1B,IADA,IAAI0O,EAAQH,GAAKE,GACRvJ,EAAI,EAAG5B,EAAMoL,EAAMnP,OAAQ2F,EAAI5B,EAAK4B,IAAK,CAChD,IAAI7B,EAAIqL,EAAMxJ,GAEdlF,EADQyO,EAAIpL,GACPA,KAGLsL,GAAQ,SAAUF,EAAKzO,GACzB,OAAO4O,GAASH,GAAK,SAAU7Q,EAAGyF,GAChC,MAAO,CACL6B,EAAG7B,EACHhB,EAAGrC,EAAEpC,EAAGyF,QAIVuL,GAAW,SAAUH,EAAKzO,GAC5B,IAAIyD,EAAI,GAKR,OAJA+K,GAAOC,GAAK,SAAU7Q,EAAGyF,GACvB,IAAIwL,EAAQ7O,EAAEpC,EAAGyF,GACjBI,EAAEoL,EAAM3J,GAAK2J,EAAMxM,KAEdoB,GAcLqL,GAAW,SAAUL,EAAKrL,GAC5B,IAAIzF,EAAI,GAER,OAVmB,SAAU8Q,EAAKrL,EAAM2L,EAAQC,GAEhDR,GAAOC,GAAK,SAAU7Q,EAAGyF,IACtBD,EAAKxF,EAAGyF,GAAK0L,EAASC,GAASpR,EAAGyF,MAMrC4L,CAAeR,EAAKrL,EAdT,SAAUK,GACrB,OAAO,SAAU7F,EAAGyF,GAClBI,EAAEJ,GAAKzF,GAYiBsR,CAAOvR,GAAIoB,GAC9BpB,GAELwR,GAAa,SAAUV,EAAKzO,GAC9B,IAAIyD,EAAI,GAIR,OAHA+K,GAAOC,GAAK,SAAU/Q,EAAOO,GAC3BwF,EAAEV,KAAK/C,EAAEtC,EAAOO,OAEXwF,GAOL2L,GAAO,SAAUX,GACnB,OAAOF,GAAKE,GAAKlP,QAEf8P,GAAQ,SAAUZ,EAAKa,GACzB,OAAOC,GAAId,EAAKa,GAAO9M,EAASC,KAAKgM,EAAIa,IAAQ9M,EAASrC,QAExDoP,GAAM,SAAUd,EAAKa,GACvB,OAAOxK,GAAejF,KAAK4O,EAAKa,IAE9BE,GAAoB,SAAUf,EAAKa,GACrC,OAAOC,GAAId,EAAKa,SAAqB7Q,IAAbgQ,EAAIa,IAAmC,OAAbb,EAAIa,IAWpDG,GAAmB,CACrB,QACA,QACA,QACA,YAiBEC,GAAS,SAAUzC,EAAS0C,EAASC,GACvC,MAAO,CACL3C,QAASA,EACT0C,QAASA,EACTC,QAASA,IAqBTC,GAAU,SAAU5C,EAAS6C,EAAOC,GACtC,MAAO,CACL9C,QAASA,EACT6C,MAAOA,EACPC,QAASA,IAGTC,GAAa,SAAU/C,EAASgD,EAAOC,GACzC,MAAO,CACLjD,QAASA,EACTgD,MAAOA,EACPC,SAAUA,IAWVC,GAAW,SAAUL,EAAOC,GAC9B,MAAO,CACLD,MAAOA,EACPC,QAASA,IA2BT9R,IAF2B,oBAAXkN,OAAyBA,OAASiF,SAAS,eAATA,GAE3C,SAAUnD,GAEnB,OADQA,EAAQtB,IAAI0E,SACXrK,gBAEPvI,GAAO,SAAUwP,GACnB,OAAOA,EAAQtB,IAAIwB,UAEjBmD,GAAW,SAAU3S,GACvB,OAAO,SAAUsP,GACf,OAAOxP,GAAKwP,KAAatP,IAGzB4S,GAAY,SAAUtD,GACxB,OArRY,IAqRLxP,GAAKwP,IAA0C,aAAlBhP,GAAKgP,IAEvCuD,GAAYF,GApRF,GAqRVG,GAASH,GApRF,GAqRPI,GAAaJ,GAxRF,GAyRXK,GAAqBL,GAxRD,IAyRpBM,GAAQ,SAAUnE,GACpB,OAAO,SAAUoE,GACf,OAAOL,GAAUK,IAAM5S,GAAK4S,KAAOpE,IAInCqE,GAAQ,SAAU7D,GACpB,OAAOrB,GAAaH,QAAQwB,EAAQtB,IAAIoF,gBAEtCC,GAAkB,SAAUC,GAC9B,OAAOP,GAAWO,GAAOA,EAAMH,GAAMG,IAKnCC,GAAS,SAAUjE,GACrB,OAAOzK,EAASC,KAAKwK,EAAQtB,IAAIwF,YAAY7P,IAAIsK,GAAaH,UAE5D2F,GAAU,SAAUnE,EAASoE,GAI/B,IAHA,IAAIC,EAAOzS,EAAWwS,GAAUA,EAASpR,EACrC0L,EAAMsB,EAAQtB,IACd4F,EAAM,GACgB,OAAnB5F,EAAIwF,iBAA0C1S,IAAnBkN,EAAIwF,YAA0B,CAC9D,IAAIK,EAAY7F,EAAIwF,WAChBtM,EAAI+G,GAAaH,QAAQ+F,GAE7B,GADAD,EAAIxO,KAAK8B,IACO,IAAZyM,EAAKzM,GACP,MAEA8G,EAAM6F,EAGV,OAAOD,GAKLE,GAAc,SAAUxE,GAC1B,OAAOzK,EAASC,KAAKwK,EAAQtB,IAAI+F,iBAAiBpQ,IAAIsK,GAAaH,UAEjEkG,GAAc,SAAU1E,GAC1B,OAAOzK,EAASC,KAAKwK,EAAQtB,IAAIgG,aAAarQ,IAAIsK,GAAaH,UAE7DmG,GAAW,SAAU3E,GACvB,OAAO3L,EAAI2L,EAAQtB,IAAIU,WAAYT,GAAaH,UAE9CoG,GAAQ,SAAU5E,EAAS6E,GAC7B,IAAIC,EAAK9E,EAAQtB,IAAIU,WACrB,OAAO7J,EAASC,KAAKsP,EAAGD,IAAQxQ,IAAIsK,GAAaH,UAS/CuG,GAAYnT,EAAWoT,QAAQnU,UAAUoU,eAAiBrT,EAAWkP,KAAKjQ,UAAUqU,aACpFC,GAAcpT,EAASgT,IACvBG,GAAcH,GAAY,SAAUnB,GACtC,OAAOjF,GAAaH,QAAQoF,EAAElF,IAAIwG,gBAChCnB,GAKAqB,GAAgB,SAAUxB,GAC5B,OAAOjF,GAAaH,QAAQoF,EAAElF,IAAI2G,OAoBhCC,GAAS,SAAUtF,GACrB,IAAItB,EAAM8E,GAAOxD,GAAWA,EAAQtB,IAAIwF,WAAalE,EAAQtB,IAC7D,GAAIA,SAA2D,OAAtBA,EAAIoF,cAC3C,OAAO,EAET,IAjjCuByB,EAAKC,EAijCxBC,EAAM/G,EAAIoF,cACd,OA/BkB,SAAUF,GAC5B,IAT2BI,EASvBxN,EAAI0O,GAAYtB,GACpB,OATOF,GADoBM,EAUPxN,IATc9E,EAAcsS,EAAItF,IAAI2G,MAS/B9P,EAASR,KAAKyB,GAAKjB,EAASrC,OA6B9CwS,CAAc/G,GAAaH,QAAQE,IAAMpL,MAAK,WACnD,OAAOmS,EAAIE,KAAK5P,SAAS2I,MAnjCJ6G,EAojCXD,GApjCgBE,EAojCRJ,GAnjCb,SAAU3T,GACf,OAAO8T,EAAIC,EAAI/T,QAujCfmU,GAAU,SAAUH,GACtB,IAAInQ,EAAImQ,EAAI/G,IAAIiH,KAChB,GAAIrQ,QACF,MAAM,IAAItB,MAAM,6BAElB,OAAO2K,GAAaH,QAAQlJ,IAS1BuQ,GAAc,SAAU/G,EAAOgH,GACjC,IAAIC,EAAS,GAOb,OANAzR,EAAKqQ,GAAS7F,IAAQ,SAAUnO,GAC1BmV,EAAUnV,KACZoV,EAASA,EAAOtT,OAAO,CAAC9B,KAE1BoV,EAASA,EAAOtT,OAAOoT,GAAYlV,EAAGmV,OAEjCC,GAGLC,GAAc,SAAUlH,EAAOmB,EAAUmE,GAC3C,OAlBc,SAAUtF,EAAOgH,EAAW1B,GAC1C,OAAO1P,EAAOyP,GAAQrF,EAAOsF,IAiBL,SAAUR,GAChC,OAAOnQ,GAAGmQ,EAAG3D,MADRgG,CAAUnH,EAAO,EAErBsF,IAED8B,GAAa,SAAUpH,EAAOmB,GAChC,OApBe,SAAUnB,EAAOgH,GAChC,OAAOpR,EAAOiQ,GAAS7F,IAmBE,SAAU8E,GACjC,OAAOnQ,GAAGmQ,EAAG3D,MADRkG,CAAWrH,IAIhBsH,GAAgB,SAAUtH,EAAOmB,GACnC,OAlWQ,SAAUA,EAAUnB,GAC5B,IAAIuH,OAAiB7U,IAAVsN,EAAsBE,SAAWF,EAAMJ,IAClD,OAAO6B,GAAe8F,GAAQ,GAAKhS,EAAIgS,EAAKC,iBAAiBrG,GAAWtB,GAAaH,SAgW9EhM,CAAIyN,EAAUnB,IAGvB,SAASyH,GAAmB9S,EAAI+S,EAAU1H,EAAOrN,EAAG2S,GAClD,OAAI3Q,EAAGqL,EAAOrN,GACL8D,EAASR,KAAK+J,GACZlN,EAAWwS,IAAWA,EAAOtF,GAC/BvJ,EAASrC,OAETsT,EAAS1H,EAAOrN,EAAG2S,GAI9B,IAAIoC,GAAW,SAAU1H,EAAOgH,EAAW1B,GAGzC,IAFA,IAAIpE,EAAUlB,EAAMJ,IAChB2F,EAAOzS,EAAWwS,GAAUA,EAASpR,EAClCgN,EAAQkE,YAAY,CACzBlE,EAAUA,EAAQkE,WAClB,IAAIuC,EAAK9H,GAAaH,QAAQwB,GAC9B,GAAI8F,EAAUW,GACZ,OAAOlR,EAASR,KAAK0R,GAChB,GAAIpC,EAAKoC,GACd,MAGJ,OAAOlR,EAASrC,QAgCdwT,GAAa,SAAU5H,EAAOmB,EAAUmE,GAC1C,OAAOoC,GAAS1H,GAAO,SAAU8E,GAC/B,OAAOnQ,GAAGmQ,EAAG3D,KACZmE,IAEDuC,GAAU,SAAU7H,EAAOmB,GAC7B,OA9BY,SAAUnB,EAAOgH,GAK7B,OADajP,EAAKiI,EAAMJ,IAAIU,YAHjB,SAAUX,GACnB,OA4B8BmF,EA5BbjF,GAAaH,QAAQC,GA6B/BhL,GAAGmQ,EAAG3D,GADO,IAAU2D,KAzBlBvP,IAAIsK,GAAaH,SAyBxBoI,CAAQ9H,IAIb+H,GAAe,SAAU/H,EAAOmB,GAClC,OAlaQ,SAAUA,EAAUnB,GAC5B,IAAIuH,OAAiB7U,IAAVsN,EAAsBE,SAAWF,EAAMJ,IAClD,OAAO6B,GAAe8F,GAAQ9Q,EAASrC,OAASqC,EAASC,KAAK6Q,EAAKS,cAAc7G,IAAW5L,IAAIsK,GAAaH,SAgatGuI,CAAI9G,EAAUnB,IAEnBkI,GAAY,SAAUlI,EAAOmB,EAAUmE,GAIzC,OAAOmC,IAHI,SAAUvG,EAASC,GAC5B,OAAOxM,GAAGuM,EAASC,KAEUyG,GAAY5H,EAAOmB,EAAUmE,IAG1D6C,GAAS,SAAUvI,EAAK2D,EAAK5R,GAC/B,KAAIU,EAASV,IAAUa,EAAUb,IAAUoB,EAASpB,IAIlD,MADA4O,QAAQC,MAAM,sCAAuC+C,EAAK,YAAa5R,EAAO,cAAeiO,GACvF,IAAI1K,MAAM,kCAHhB0K,EAAIwI,aAAa7E,EAAK5R,EAAQ,KAM9B0W,GAAM,SAAUnH,EAASqC,EAAK5R,GAChCwW,GAAOjH,EAAQtB,IAAK2D,EAAK5R,IAEvB2W,GAAS,SAAUpH,EAASqH,GAC9B,IAAI3I,EAAMsB,EAAQtB,IAClB6C,GAAO8F,GAAO,SAAUjS,EAAG6C,GACzBgP,GAAOvI,EAAKzG,EAAG7C,OAGfkS,GAAQ,SAAUtH,EAASqC,GAC7B,IAAIjN,EAAI4K,EAAQtB,IAAI6I,aAAalF,GACjC,OAAa,OAANjN,OAAa5D,EAAY4D,GAE9BoS,GAAS,SAAUxH,EAASqC,GAC9B,OAAO9M,EAASC,KAAK8R,GAAMtH,EAASqC,KAElCoF,GAAS,SAAUzH,EAASqC,GAC9BrC,EAAQtB,IAAIgJ,gBAAgBrF,IAE1BsF,GAAQ,SAAU3H,GACpB,OAAOpJ,EAAMoJ,EAAQtB,IAAIkJ,YAAY,SAAUlR,EAAKmR,GAElD,OADAnR,EAAImR,EAAK7W,MAAQ6W,EAAKpX,MACfiG,IACN,KAGDoR,GAAgB,SAAUpJ,GAC5B,YAAqBlN,IAAdkN,EAAIqJ,OAAuBnW,EAAW8M,EAAIqJ,MAAMC,mBAGrDC,GAAc,SAAUvJ,EAAKwJ,EAAUzX,GACzC,IAAKU,EAASV,GAEZ,MADA4O,QAAQC,MAAM,qCAAsC4I,EAAU,YAAazX,EAAO,cAAeiO,GAC3F,IAAI1K,MAAM,+BAAiCvD,GAE/CqX,GAAcpJ,IAChBA,EAAIqJ,MAAMI,YAAYD,EAAUzX,IAQhC2X,GAAQ,SAAUpI,EAASkI,EAAUzX,GACvC,IAAIiO,EAAMsB,EAAQtB,IAClBuJ,GAAYvJ,EAAKwJ,EAAUzX,IAEzB4X,GAAW,SAAUrI,EAASsI,GAChC,IAAI5J,EAAMsB,EAAQtB,IAClB6C,GAAO+G,GAAK,SAAUlT,EAAG6C,GACvBgQ,GAAYvJ,EAAKzG,EAAG7C,OAGpBmT,GAAQ,SAAUvI,EAASkI,GAC7B,IAAIxJ,EAAMsB,EAAQtB,IAEdlI,EADS0H,OAAOsK,iBAAiB9J,GACtBsJ,iBAAiBE,GAChC,MAAa,KAAN1R,GAAa8O,GAAOtF,GAA8CxJ,EAAnCiS,GAAkB/J,EAAKwJ,IAE3DO,GAAoB,SAAU/J,EAAKwJ,GACrC,OAAOJ,GAAcpJ,GAAOA,EAAIqJ,MAAMC,iBAAiBE,GAAY,IAEjEQ,GAAS,SAAU1I,EAASkI,GAC9B,IAAIxJ,EAAMsB,EAAQtB,IACdiK,EAAMF,GAAkB/J,EAAKwJ,GACjC,OAAO3S,EAASC,KAAKmT,GAAKjU,QAAO,SAAU8B,GACzC,OAAOA,EAAElE,OAAS,MAGlBsW,GAAW,SAAU5I,EAASkI,IA/Bb,SAAUxJ,EAAKwJ,GAC9BJ,GAAcpJ,IAChBA,EAAIqJ,MAAMc,eAAeX,GA+B3BY,CADU9I,EAAQtB,IACEwJ,GAChBV,GAAOxH,EAAS,SAAS3L,IAAIgG,IAAM5G,GAAG,KACxCgU,GAAOzH,EAAS,UAWhB+I,GAAe,SAAUC,EAAMhY,EAAMiY,GAIvC,YAHiB,IAAbA,IACFA,EAAW,GAENzB,GAAOwB,EAAMhY,GAAMqD,KAAI,SAAU5D,GACtC,OAAOyY,SAASzY,EAAO,OACtBkD,MAAMsV,IAEPE,GAAU,SAAUH,EAAMxY,GAC5B,OAAOuY,GAAaC,EAAMxY,EAAM,IAE9B4Y,GAAa,SAAUJ,GACzB,OAAOG,GAAQH,EAAM,WAAa,GAEhCK,GAAa,SAAUL,GACzB,OAAOG,GAAQH,EAAM,WAAa,GAEhCM,GAAc,SAAUtJ,EAASkI,GACnC,OAAOgB,SAASX,GAAMvI,EAASkI,GAAW,KAExCqB,GAAWxX,EAAS,IACpByX,GAAYzX,EAAS,IAErB0X,GAAa,SAAU3K,EAAOmB,GAChC,OAAOyJ,GAAiB5K,EAAOmB,EAAUhN,IAEvCyW,GAAmB,SAAU5K,EAAOmB,EAAU6F,GAChD,OAAOvR,EAAKoQ,GAAS7F,IAAQ,SAAUnO,GACrC,OAAI8C,GAAG9C,EAAGsP,GACD6F,EAAUnV,GAAK,CAACA,GAAK,GAErB+Y,GAAiB/Y,EAAGsP,EAAU6F,OAoBvCkD,GAAO,SAAUhJ,EAASoE,GAC5B,OAhBW,SAAUuF,EAAM3J,EAASoE,GAIpC,YAHe,IAAXA,IACFA,EAASpR,GAEPoR,EAAOpE,GACFzK,EAASrC,OAEd6C,EAAS4T,EAAM3Y,GAAKgP,IACfzK,EAASR,KAAKiL,GAKhB0G,GAAW1G,EAAS2J,EAAKC,KAAK,MAHZ,SAAUC,GACjC,OAAOpW,GAAGoW,EAAK,UAAYzF,EAAOyF,MAK7BC,CAAO,CACZ,KACA,MACC9J,EAASoE,IAEVvB,GAAQ,SAAU2D,GACpB,OAAOiD,GAAWjD,EAAU,UAE1BuD,GAAU,SAAUvD,GACtB,OAAI/S,GAAG+S,EAAU,YACRN,GAAWM,EAAU,OAErBjS,EAAKyV,GAAaxD,IAAW,SAAUyD,GAC5C,OAAO/D,GAAW+D,EAAa,WAIjCC,GAAQ,SAAUlK,EAASoE,GAC7B,OAAO4C,GAAUhH,EAAS,QAASoE,IAEjC+F,GAAO,SAAU3D,GACnB,OAAOiD,GAAWjD,EAAU,OAE1BwD,GAAe,SAAUxD,GAC3B,OAAO0D,GAAM1D,GAAUlT,KAAKvB,EAAS,KAAK,SAAUmY,GAClD,OAAOhE,GAAWgE,EAAO,gBAIzBE,GAAsB,SAAUC,EAAOC,GACzC,OAAOjW,EAAIgW,GAAO,SAAUE,GAC1B,GAAkB,aAAdvZ,GAAKuZ,GAAqB,CAC5B,IAAIC,EAAUnW,EAAI0V,GAAQQ,IAAM,SAAUE,GACxC,IAAI9H,EAAUoG,GAAa0B,EAAQ,OAAQ,GAC3C,OAAOhI,GAAOgI,EAAQ,EAAG9H,MAE3B,OAAOC,GAAQ2H,EAAKC,EAAS,YAO7B,OALIA,EAAUnW,EAAIwO,GAAM0H,IAAM,SAAUvB,GACtC,IAAItG,EAAUqG,GAAaC,EAAM,UAAW,GACxCrG,EAAUoG,GAAaC,EAAM,UAAW,GAC5C,OAAOvG,GAAOuG,EAAMtG,EAASC,MAExBC,GAAQ2H,EAAKC,EAASF,EAAWC,QAI1CG,GAAmB,SAAUvR,GAC/B,OAAO8K,GAAO9K,GAAO9E,KAAI,SAAU4P,GACjC,IAAI0G,EAAa3Z,GAAKiT,GACtB,OAvgBiB,SAAU0G,GAC7B,OAAO5U,EAASyM,GAAkBmI,GAsgBzBC,CAAeD,GAAcA,EAAa,WAChDhX,MAAM,UAEPkX,GAAY,SAAUX,GACxB,IAAIY,EAASX,GAAKD,GAEdG,EAAQtS,EADSiS,GAAaE,GACSY,GAC3C,OAAOV,GAAoBC,EAAOK,KAQhCK,GAAW,SAAUC,EAASnG,EAAOhC,GACvC,IAAIoI,EAAgBD,EAAQnI,MACxBqI,EAASD,EAAcvV,MAAM,EAAGmP,GAChCsG,EAAQF,EAAcvV,MAAMmP,GAC5BuG,EAAWF,EAAOzY,OAAOoQ,GAAOpQ,OAAO0Y,GAC3C,OAAOE,GAASL,EAASI,IAEvBE,GAAU,SAAUN,EAASnG,EAAOmE,GACtC,OAAO+B,GAASC,EAASnG,EAAO,CAACmE,KAE/BuC,GAAa,SAAUP,EAASnG,EAAOmE,GAC7BgC,EAAQnI,MACdgC,GAASmE,GAEbqC,GAAW,SAAUL,EAASnI,GAChC,OAAOK,GAASL,EAAOmI,EAAQlI,UAE7B0I,GAAW,SAAUR,EAASjY,GAChC,IAAI8P,EAAQmI,EAAQnI,MAChBrM,EAAInC,EAAIwO,EAAO9P,GACnB,OAAOmQ,GAAS1M,EAAGwU,EAAQlI,UAEzB2I,GAAU,SAAUT,EAASnG,GAC/B,OAAOmG,EAAQnI,MAAMgC,IAEnB6G,GAAiB,SAAUV,EAASnG,GACtC,OAAO4G,GAAQT,EAASnG,GAAO7E,SAE7B2L,GAAa,SAAUX,GACzB,OAAOA,EAAQnI,MAAMvQ,QAEnBsZ,GAAqB,SAAUC,GACjC,IAAI9F,EA5tCU,SAAU/P,EAAIG,GAG5B,IAFA,IAAI2V,EAAO,GACPC,EAAO,GACF3V,EAAI,EAAGC,EAAML,EAAG1D,OAAQ8D,EAAIC,EAAKD,IAAK,CAC7C,IAAIzF,EAAIqF,EAAGI,IAwtC0BmU,EAvtCtB5Z,EAwtCQ,aAAhB4Z,EAAIzH,QAxtCYgJ,EAAOC,GAC1BjW,KAAKnF,GAstCkB,IAAU4Z,EAptCvC,MAAO,CACLuB,KAAMA,EACNC,KAAMA,GAktCKC,CAAUH,GAGvB,MAAO,CACL1B,KAAMpE,EAAOgG,KACbE,KAAMlG,EAAO+F,OAIbI,GAAkB,2BAClBC,GAA4B,SAAUjC,GACxC,OAAO1C,GAAO0C,EAAOgC,IAAiB3X,MAAK,SAAU6X,GACnD,OAAO7W,EAASC,KAAK4W,EAAavL,MAAM,YACvCxM,KAAI,SAAUgY,GACf,OAAOnV,EAAYmV,EAAYpZ,OAG/BqZ,GAA2B,SAAUT,GACvC,IA9oCmB7V,EACfuW,EA6oCAC,EAAS5V,EAAMgV,GAAmBC,GAAM1B,MAAM,SAAUzT,EAAK6T,GAM/D,OALAjW,EAAKiW,EAAI1H,OAAO,SAAUmG,EAAMyD,GAC1BzD,EAAK/F,WACPvM,EAAI+V,IAAO,MAGR/V,IACN,IAIH,OAzpCmBV,EAspCHkM,GAAWsK,GAAQ,SAAUE,EAAMrK,GACjD,OAAO6G,SAAS7G,EAAK,QAtpCnBkK,EAAO9W,EAAY7C,KAAKoD,EAAI,IAC3B2W,UAupCEA,GAtpCAJ,GAypCLlK,GAAM,SAAUkI,EAAKE,GACvB,OAAOF,EAAM,IAAME,GAYjBmC,GAAc,SAAUC,EAAW/G,GACrC,IAAItT,EAAM+B,EAAKsY,EAAUra,KAAK,SAAUgE,GACtC,OAAOA,EAAEqM,SAEX,OAAOnO,EAAOlC,EAAKsT,IAejBgH,GAAW,SAAUC,GACvB,IAAIC,EAAS,GACTnK,EAAQ,GACRkH,EAAU,GAIVkD,EAHW5V,EAAK0V,GAAM1Y,KAAI,SAAU6Y,GACtC,OAAOA,EAAQlN,WACdzL,KAAK2V,IACqB3V,KAAK4X,IAA2BxY,MAAM,IAC/DwZ,EAAU,EACVC,EAAa,EACbC,EAAW,EA8Bf,OA7BA/Y,EAAKyY,GAAM,SAAUG,GACnB,GAAwB,aAApBA,EAAQpK,QACViH,EA1BgB,SAAUmD,GAC9B,IAAII,EAAe,GACfzI,EAAQ,EASZ,OARAvQ,EAAK4Y,EAAQrK,OAAO,SAAU4H,GAC5B,IAAI9H,EAAU8H,EAAO9H,QACrBrM,EAAMqM,GAAS,SAAU4K,GACvB,IAAIC,EAAW3I,EAAQ0I,EACvBD,EAAaE,GA9hBH,SAAUxN,EAAS2C,EAAS8H,GAC1C,MAAO,CACLzK,QAASA,EACT2C,QAASA,EACT8H,OAAQA,GA0hBmBgD,CAAUhD,EAAOzK,QAAS2C,EAAS6K,MAE9D3I,GAASlC,KAEJ2K,EAeOI,CAAgBR,OACrB,CACL,IAAIS,EAAe,GACnBrZ,EAAK4Y,EAAQrK,OAAO,SAAU+K,GAE5B,IADA,IAAI7T,EAAQ,OAC4BvI,IAAjCwb,EAAO3K,GAAIgL,EAAUtT,KAC1BA,IAIF,IAFA,IAAIkJ,EAAWV,GAAkB0K,EAAelT,EAAMjF,YAClDwG,EA9mBG,SAAU0E,EAAS0C,EAASC,EAAS4H,EAAKE,EAAQxH,GAC/D,MAAO,CACLjD,QAASA,EACT0C,QAASA,EACTC,QAASA,EACT4H,IAAKA,EACLE,OAAQA,EACRxH,SAAUA,GAumBQ4K,CAASD,EAAQ5N,QAAS4N,EAAQlL,QAASkL,EAAQjL,QAAS0K,EAAUtT,EAAOkJ,GAClF6K,EAAyB,EAAGA,EAAyBF,EAAQjL,QAASmL,IAC7E,IAAK,IAAIC,EAAsB,EAAGA,EAAsBH,EAAQlL,QAASqL,IAAuB,CAC9F,IACIC,EAAiBjU,EAAQ+T,EACzBG,EAAS5L,GAFKgL,EAAWU,EAECC,GAC9BhB,EAAOiB,GAAU3S,EACjB8R,EAAac,KAAKC,IAAIf,EAAYY,EAAiB,GAGvDL,EAAa7X,KAAKwF,MAEpB6R,IACAtK,EAAM/M,KAAK8M,GAAQsK,EAAQlN,QAAS2N,EAAcT,EAAQpK,UAC1DuK,QAIG,CACLxB,KA5pBO,SAAU1B,EAAMJ,GACzB,MAAO,CACLI,KAAMA,EACNJ,QAASA,GAupBE8B,CAAKsB,EAASC,GAGzBJ,OAAQA,EACRxa,IAAKqQ,EACLkH,QAASA,IAqBTqE,GAlBc,SAAUlE,GAC1B,IAAI6C,EAAOlC,GAAUX,GACrB,OAAO4C,GAASC,IAgBdqB,GAEQtB,GAFRsB,GA9FQ,SAAUvB,EAAWtC,EAAKE,GACpC,IAAI9B,EAAMkE,EAAUG,OAAO3K,GAAIkI,EAAKE,IACpC,YAAejZ,IAARmX,EAAoBpT,EAASR,KAAK4T,GAAOpT,EAASrC,QA4FvDkb,GA1FW,SAAUvB,EAAWwB,EAAMC,GACxC,IAAIC,EAAW3B,GAAYC,GAAW,SAAUpK,GAC9C,OAAO6L,EAAWD,EAAM5L,EAAOzC,YAEjC,OAAOuO,EAASjc,OAAS,EAAIiD,EAASR,KAAKwZ,EAAS,IAAMhZ,EAASrC,QAsFjEkb,GAKWxB,GALXwB,GAdY,SAAUvB,GACxB,OAAOtY,EAAKsY,EAAUra,KAAK,SAAUgc,GACnC,OAAOA,EAAE3L,UAYTuL,GATc,SAAUvB,GAC1B,OA/sBqBrL,EA+sBPqL,EAAU9C,QA9sBjB7H,GAAWV,GAAK,SAAUpM,GAC/B,OAAOA,KAFE,IAAUoM,GAutBnB4M,GANa,SAAUvB,GACzB,OAAOvL,GAAKuL,EAAU9C,SAASzX,OAAS,GAKtC8b,GAHc,SAAUvB,EAAWU,GACrC,OAAOhY,EAASC,KAAKqX,EAAU9C,QAAQwD,KAcrCkB,GAAc,SAAUC,EAAQjM,GAClC,IAAIkM,EAAWlM,EAAOgI,OAClBmE,EAAYnM,EAAOgI,OAAShI,EAAOE,QAAU,EAC7CkM,EAAUpM,EAAO8H,IACjBuE,EAAarM,EAAO8H,IAAM9H,EAAOC,QAAU,EAC/C,OAAOiM,GAAYD,EAAOK,WAAaH,GAAaF,EAAOM,UAAaH,GAAWH,EAAOO,WAAaH,GAAcJ,EAAOQ,UAE1HC,GAAW,SAAUT,EAAQjM,GAC/B,OAAOA,EAAOgI,QAAUiE,EAAOM,UAAYvM,EAAOgI,OAAShI,EAAOE,QAAU,GAAK+L,EAAOK,WAAatM,EAAO8H,KAAOmE,EAAOQ,UAAYzM,EAAO8H,IAAM9H,EAAOC,QAAU,GAAKgM,EAAOO,WAgB9KG,GAAY,SAAUvC,EAAWwC,EAAWC,GAC9C,IAAIC,EAAcnB,GAAmBvB,EAAWwC,EAAW5O,IACvD+O,EAAepB,GAAmBvB,EAAWyC,EAAY7O,IAC7D,OAAO8O,EAAYhb,MAAK,SAAUkb,GAChC,OAAOD,EAAanb,KAAI,SAAUqb,GAChC,OARoBC,EAQHF,EARYG,EAQRF,EArpBlB,CACLR,SA6oBYhB,KAAK2B,IAAIF,EAAQpF,IAAKqF,EAAQrF,KA5oB1CyE,SA4oBgDd,KAAK2B,IAAIF,EAAQlF,OAAQmF,EAAQnF,QA3oBjFwE,UA2oB0Ff,KAAKC,IAAIwB,EAAQpF,IAAMoF,EAAQjN,QAAU,EAAGkN,EAAQrF,IAAMqF,EAAQlN,QAAU,GA1oBtKqM,UA0oB0Kb,KAAKC,IAAIwB,EAAQlF,OAASkF,EAAQhN,QAAU,EAAGiN,EAAQnF,OAASmF,EAAQjN,QAAU,IADhP,IAAUgN,EAASC,SA4B/BE,GAAa,SAAUjD,EAAW9S,EAAOgW,GAC3C,OAAOX,GAAUvC,EAAW9S,EAAOgW,GAAQ1b,KAAI,SAAUqa,GACvD,IAAIsB,EAAS5B,GAAsBvB,EAAW5a,EAAMwc,GAAaC,IACjE,OAAOra,EAAI2b,GAAQ,SAAUvN,GAC3B,OAAOA,EAAOzC,eAIhBiQ,GAAa,SAAUpD,EAAWqD,GAIpC,OAAO9B,GAAmBvB,EAAWqD,GAHjB,SAAUC,EAAIC,GAChC,OAAOxP,GAAWwP,EAAID,MAEuC9b,KAAI,SAAUoO,GAC3E,OAAOA,EAAOzC,YAUdqQ,GAAe,SAAUnG,EAAOoG,EAAOhZ,GACzC,IAAIuV,EAAY0D,GAAarG,GAC7B,OAAO4F,GAAWjD,EAAWyD,EAAOhZ,IAElCkZ,GAAmB,SAAUtG,EAAOoG,EAAOG,EAAYnZ,EAAMoZ,GAC/D,IAAI7D,EAAY0D,GAAarG,GACzByG,EAAelQ,GAAKyJ,EAAOuG,GAAclb,EAASR,KAAKub,GAASL,GAAWpD,EAAWyD,GACtFM,EAAcnQ,GAAKyJ,EAAOwG,GAAanb,EAASR,KAAKuC,GAAQ2Y,GAAWpD,EAAWvV,GACvF,OAAOqZ,EAAapc,MAAK,SAAU8a,GACjC,OAAOuB,EAAYrc,MAAK,SAAUsc,GAChC,OAAOf,GAAWjD,EAAWwC,EAAWwB,UAQ1CN,GAAenC,GAEflD,GAAS,SAAU4F,EAAQ9Q,GACdiE,GAAO6M,GACbxc,MAAK,SAAUc,GACtBA,EAAEsJ,IAAIqS,aAAa/Q,EAAQtB,IAAKoS,EAAOpS,SAGvCyM,GAAQ,SAAU2F,EAAQ9Q,GACd0E,GAAYoM,GAClBxd,MAAK,WACI2Q,GAAO6M,GACbxc,MAAK,SAAUc,GACtB4b,GAAO5b,EAAG4K,SAEX,SAAU5K,GACX8V,GAAO9V,EAAG4K,OAGViR,GAAU,SAAUhN,EAAQjE,IA/oBf,SAAUA,GACzB,OAAO4E,GAAM5E,EAAS,IA+oBHkR,CAAWjN,GACjB3Q,MAAK,WAChB0d,GAAO/M,EAAQjE,MACd,SAAU5K,GACX6O,EAAOvF,IAAIqS,aAAa/Q,EAAQtB,IAAKtJ,EAAEsJ,SAGvCsS,GAAS,SAAU/M,EAAQjE,GAC7BiE,EAAOvF,IAAIyS,YAAYnR,EAAQtB,MAE7B0S,GAAO,SAAUpR,EAASqR,GAC5BnG,GAAOlL,EAASqR,GAChBL,GAAOK,EAASrR,IAQdsR,GAAU,SAAUR,EAAQS,GAC9Bjd,EAAKid,GAAU,SAAU5gB,EAAGyF,GAC1B,IAAIwN,EAAU,IAANxN,EAAU0a,EAASS,EAASnb,EAAI,GACxC+U,GAAMvH,EAAGjT,OAGT6gB,GAAW,SAAUvN,EAAQsN,GAC/Bjd,EAAKid,GAAU,SAAU5gB,GACvBqgB,GAAO/M,EAAQtT,OAIf8gB,GAAQ,SAAUzR,GACpBA,EAAQtB,IAAIgT,YAAc,GAC1Bpd,EAAKqQ,GAAS3E,IAAU,SAAU2R,GAChCC,GAASD,OAGTC,GAAW,SAAU5R,GACvB,IAAItB,EAAMsB,EAAQtB,IACK,OAAnBA,EAAIwF,YACNxF,EAAIwF,WAAW2N,YAAYnT,IAG3BoT,GAAS,SAAUT,GACrB,IA9BuBP,EA8BnB3K,EAAaxB,GAAS0M,GACtBlL,EAAW7T,OAAS,IA/BDwe,EAgCZO,EA/BX/c,EA+BoB6R,GA/BL,SAAUxV,GACvBua,GAAO4F,EAAQngB,OAgCjBihB,GAASP,IA0BPU,GAvBY,SAAUte,EAAIzC,GAC5B,IAMIghB,EAAY,SAAUhS,GACxB,OAAOvM,EAAGuM,GAAWzK,EAASC,KAAKwK,EAAQtB,IAAIuT,WAAa1c,EAASrC,QAQvE,MAAO,CACLkE,IAhBQ,SAAU4I,GAClB,IAAKvM,EAAGuM,GACN,MAAM,IAAIhM,MAAM,0CAElB,OAAOge,EAAUhS,GAASrM,MAAM,KAahCqe,UAAWA,EACX7K,IATQ,SAAUnH,EAASvP,GAC3B,IAAKgD,EAAGuM,GACN,MAAM,IAAIhM,MAAM,8CAElBgM,EAAQtB,IAAIuT,UAAYxhB,IASlByhB,CAAU1O,IAChB2O,GAAQ,SAAUnS,GACpB,OAAO+R,GAAI3a,IAAI4I,IAEbgS,GAAY,SAAUhS,GACxB,OAAO+R,GAAIC,UAAUhS,IAEnBoS,GAAQ,SAAUpS,EAASvP,GAC7B,OAAOshB,GAAI5K,IAAInH,EAASvP,IAGtB4hB,GAAgB,CAClB,OACA,IACA,MACA,UACA,QACA,aACA,SACA,SACA,SACA,MACA,UACA,KACA,KACA,KACA,QACA,QACA,QACA,QACA,UACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,aACA,MACA,WAGF,SAASC,KAmDP,MAAO,CACLC,GAAIxgB,EAAS,CACXkO,SAAUyG,GACV8L,QAASxL,GACTlB,UAAWU,GACXhU,IAAK2R,KAEPsO,KAAM1gB,EAAS,CACbkO,SAAUmG,GACVN,UAAWD,KAEb6M,OAAQ3gB,EAAS,CACfqF,IAAKmR,GACLG,OAAQA,GACRvB,IAAKiB,GACLX,OAAQmB,KAEVvB,MAAOtV,EAAS,CACdqF,IAAKkQ,GACLH,IAAKA,GACLM,OAAQA,GACRkL,OAvCmB,SAAUC,EAAQC,GACvC,IAAIC,EAAKnL,GAAMiL,GACfxL,GAAOyL,EAAaC,MAuCpBC,OAAQhhB,EAAS,CACfmZ,OAAQA,GACRC,MAAOA,GACP6H,SAAU1B,GACVN,OAAQA,GACRiC,UAAWzB,GACXP,QAASA,GACTG,KAAMA,KAER3J,OAAQ1V,EAAS,CACf+f,OAAQA,GACRrK,OAAQmK,KAEVsB,OAAQnhB,EAAS,CACfyG,GAAImG,GAAaY,QACjBoI,MAxFU,SAAU3H,GACtB,OAAOrB,GAAaH,QAAQwB,EAAQtB,IAAIyU,WAAU,KAwFhDzT,KAAMf,GAAac,WAErBxB,MAAOlM,EAAS,CACdqhB,gBA/DkB,SAAUpT,EAASqT,GACvC,OAAOrT,EAAQtB,IAAIsC,wBAAwBqS,EAAM3U,MA+D/C8F,YAAaA,GACbE,YAAaA,KAEfwD,SAAUnW,EAAS,CACjB4S,SAAUA,GACV3T,KAAMA,GACNiT,OAAQA,GACRjF,SAjGW,SAAUgB,GACvB,OAAO+D,GAAgB/D,GAAStB,KAiG9B8E,OAAQA,GACRF,UAAWA,GACXC,UAAWA,GACX+P,UApEY,SAAUtT,GACxB,IAAIR,EAAMxO,GAAKgP,GACf,OAAOjK,EAAS,CACd,SACA,WACA,SACA,WACA,UACA,QACA,QACA,WACA,OACCyJ,IAyDD+T,QAASpB,GACTqB,QAASpB,GACTqB,WArGa,SAAUzT,GACzB,QAAKuD,GAAUvD,KAGO,SAAlBhP,GAAKgP,IAGFjK,EAASsc,GAAerhB,GAAKgP,MA+FlC0T,WA7Fa,SAAU1T,GACzB,QAAKuD,GAAUvD,IAGRjK,EAAS,CACd,KACA,MACA,KACA,SACC/E,GAAKgP,KAqFN2T,cAnFgB,SAAU3T,GAC5B,OAAOuD,GAAUvD,IAAkD,UAAtCsH,GAAMtH,EAAS,sBAoF5CrN,GAAI8N,GACJhN,GAAI4N,IAIR,IA4pBMuS,GAEAC,GAEAC,GAGAC,GA3pBFC,GAAY,SAAUC,EAAUC,EAAM7c,EAAM8c,GAC9C,IAAIpa,EAAQma,EAAKD,EAAU5c,GAC3B,OAAOZ,EAAM0d,GAAM,SAAU7e,EAAG7D,GAC9B,IAAI6J,EAAU4Y,EAAKD,EAAUxiB,GAC7B,OAAO2iB,GAAcH,EAAU3e,EAAGgG,KACjCvB,IAEDqa,GAAgB,SAAUH,EAAUla,EAAOsa,GAC7C,OAAOta,EAAMxF,MAAK,SAAUY,GAC1B,OAAOkf,EAAI3f,OAAOzC,EAAMgiB,EAASthB,GAAIwC,QAoCrC8e,GAAW3B,KACXgC,GAAc,SAAUJ,EAAM3C,GAChC,OAlDW,SAAU0C,EAAUC,EAAM3C,GACrC,OAAOA,EAASjf,OAAS,EANf,SAAU2hB,EAAUC,EAAM3C,EAAUxe,GAG9C,OAAOA,EAAEkhB,EAAUC,EAFR3C,EAAS,GACTA,EAAS7b,MAAM,IAIG6e,CAAMN,EAAUC,EAAM3C,EAAUyC,IAAaze,EAASrC,OAiD5EshB,CAAUP,IAAU,SAAUQ,EAAWzU,GAC9C,OAAOkU,EAAKlU,KACXuR,IAMDmD,GAAc,SAAUC,GAC1B,OAAOjO,GAAWiO,EAAW,UAE3BC,GAAW,SAAU7a,EAAOgW,EAAQ3L,GACtC,IAAIyQ,EAAY,SAAUC,GACxB,OAAO,SAAU9U,GACf,YAAkBxO,IAAX4S,GAAwBA,EAAOpE,IAAYS,GAAKT,EAAS8U,KAGpE,OAAIrU,GAAK1G,EAAOgW,GACPxa,EAASR,KAAK,CACnBggB,MAAOxf,EAASR,KAAK,CAACgF,IACtBA,MAAOA,EACPgW,OAAQA,IAGH2E,GAAY3a,GAAOxF,MAAK,SAAUygB,GACvC,OAAON,GAAY3E,GAAQxb,MAAK,SAAU0gB,GACxC,GAAIxU,GAAKuU,EAAYC,GACnB,OAAO1f,EAASR,KAAK,CACnBggB,MAAO1E,GAAa2E,EAAYjb,EAAOgW,GACvChW,MAAOA,EACPgW,OAAQA,IAEL,GAAInP,GAAWoU,EAAYC,GAAc,CAC9C,IACI3F,GADA4F,EAAgBlP,GAAY+J,EAAQ,QAAS8E,EAAUG,KAC5B1iB,OAAS,EAAI4iB,EAAcA,EAAc5iB,OAAS,GAAKyd,EACtF,OAAOxa,EAASR,KAAK,CACnBggB,MAAOvE,GAAiBwE,EAAYjb,EAAOib,EAAYjF,EAAQkF,GAC/Dlb,MAAOA,EACPgW,OAAQT,IAEL,GAAI1O,GAAWqU,EAAaD,GAAa,CAC9C,IAAIE,EACA7F,GADA6F,EAAgBlP,GAAYjM,EAAO,QAAS8a,EAAUI,KAC5B3iB,OAAS,EAAI4iB,EAAcA,EAAc5iB,OAAS,GAAKyH,EACrF,OAAOxE,EAASR,KAAK,CACnBggB,MAAOvE,GAAiByE,EAAalb,EAAOib,EAAYjF,EAAQkF,GAChElb,MAAOA,EACPgW,OAAQV,IAGV,OA7CQ,SAAUtV,EAAOgW,EAAQ3L,GACzC,OApCgB,SAAU6P,EAAUla,EAAOsa,EAAKjQ,QACjC,IAAXA,IACFA,EAASpR,GAEX,IAAImiB,EAAM,CAACpb,GAAOtH,OAAOwhB,EAAS1B,KAAK/f,IAAIuH,IACvCqb,EAAM,CAACf,GAAK5hB,OAAOwhB,EAAS1B,KAAK/f,IAAI6hB,IACrCgB,EAAQ,SAAUC,GAEpB,OADYte,EAAUse,EAAMlR,GACf9Q,MAAK,WAChB,OAAOgiB,KACN,SAAUC,GACX,OAAOD,EAAK5f,MAAM,EAAG6f,EAAM,OAG3BC,EAAUH,EAAMF,GAChBM,EAAUJ,EAAMD,GAChBM,EAAS7e,EAAK2e,GAAS,SAAU7kB,GACnC,OAAO6D,EAAOihB,EApBP,SAAUxB,EAAU5F,GAC7B,OAAOpc,EAAMgiB,EAASthB,GAAI0b,GAmBDsH,CAAK1B,EAAUtjB,OAExC,MAAO,CACLilB,UAAWJ,EACXK,WAAYJ,EACZC,OAAQA,GAcHI,CAAY7B,GAAUla,EAAOgW,OA4CrBgG,IAAYhc,EAAOgW,GAAQ2F,OAAOnhB,MAAK,SAAUyhB,GACtD,OAAOhP,GAAUgP,EAAK,QAAS5R,GAAQ7P,MAAK,SAAU0hB,GACpD,IAAIC,EAAsBlQ,GAAY+J,EAAQ,QAAS8E,EAAUoB,IAC7D3G,EAAa4G,EAAoB5jB,OAAS,EAAI4jB,EAAoBA,EAAoB5jB,OAAS,GAAKyd,EACpGoG,EAAqBnQ,GAAYjM,EAAO,QAAS8a,EAAUoB,IAC3D5G,EAAY8G,EAAmB7jB,OAAS,EAAI6jB,EAAmBA,EAAmB7jB,OAAS,GAAKyH,EACpG,OAAOxE,EAASR,KAAK,CACnBggB,MAAOvE,GAAiByF,EAAUlc,EAAOib,EAAYjF,EAAQkF,GAC7Dlb,MAAOsV,EACPU,OAAQT,iBASpB8G,GAAW,SAAUzB,EAAW1U,GAClC,IAAIoW,EAAOjQ,GAAcuO,EAAW1U,GACpC,OAAOoW,EAAK/jB,OAAS,EAAIiD,EAASR,KAAKshB,GAAQ9gB,EAASrC,QAOtDojB,GAAW,SAAU3B,EAAW4B,EAAuBC,GACzD,OAAO3P,GAAa8N,EAAW4B,GAAuBhiB,MAAK,SAAU+b,GACnE,OAAOzJ,GAAa8N,EAAW6B,GAAsBjiB,MAAK,SAAU+C,GAClE,OAAOgd,GAAYI,GAAa,CAC9BpE,EACAhZ,IACCjD,KAAI,SAAU6V,GACf,MAAO,CACLoG,MAAOA,EACPhZ,KAAMA,EACN4S,MAAOA,aAqBbuM,GAAiB,SAAU1B,EAAO2B,EAAUC,EAAaJ,EAAuBC,GAClF,OArCY,SAAUzB,EAAOyB,GAC7B,OAAO3f,EAAKke,GAAO,SAAU6B,GAC3B,OAAOnjB,GAAGmjB,EAAKJ,MAmCVK,CAAQ9B,EAAOyB,GAAsBjiB,MAAK,SAAU+C,GACzD,OA7bW,SAAU0R,EAAM0N,EAAUC,GACvC,OAAOzM,GAAMlB,GAAMzU,MAAK,SAAU2V,GAEhC,OA9BS,SAAU2C,EAAW7D,EAAMuB,EAAKE,GAC3C,OAAO2D,GAAmBvB,EAAW7D,EAAMvI,IAAMlM,MAAK,SAAUkO,GAC9D,IAAIyM,EAAW3E,EAAM,EAAI9H,EAAO8H,IAAM9H,EAAOC,QAAU,EAAID,EAAO8H,IAC9DyE,EAAWvE,EAAS,EAAIhI,EAAOgI,OAAShI,EAAOE,QAAU,EAAIF,EAAOgI,OAExE,OADW2D,GAAgBvB,EAAWqC,EAAW3E,EAAKyE,EAAWvE,GACrDpW,KAAI,SAAUyiB,GACxB,OAAOA,EAAE9W,cAwBJ+W,CADSxG,GAAarG,GACJlB,EAAM0N,EAAUC,MA0blCK,CAAS1f,EAAMof,EAAUC,GAAapiB,MAAK,SAAUwb,GAC1D,OAlBS,SAAUA,EAAQwG,GAC/B,OAAO7P,GAAWqJ,EAAQ,SAASxb,MAAK,SAAU2V,GAChD,OAAOrD,GAAaqD,EAAOqM,GAAuBhiB,MAAK,SAAUwF,GAC/D,OAAO6a,GAAS7a,EAAOgW,GAAQxb,MAAK,SAAU0iB,GAC5C,OAAOA,EAAWlC,MAAM1gB,KAAI,SAAU0gB,GACpC,MAAO,CACLA,MAAOA,EACPhb,MAAOkd,EAAWld,MAClBgW,OAAQkH,EAAWlH,oBAUlBmH,CAASnH,EAAQwG,UAK1BY,GAAa,SAAUxC,EAAW1U,GACpC,OAAOmW,GAASzB,EAAW1U,IAEzBmX,GAAc,SAAUzC,EAAW4B,EAAuBC,GAC5D,OAAOF,GAAS3B,EAAW4B,EAAuBC,GAAsBjiB,MAAK,SAAU8iB,GACrF,IAAIjT,EAAS,SAAUoC,GACrB,OAAO/F,GAAKkU,EAAWnO,IAErB8Q,EAAkB,0BAClBC,EAAgB7Q,GAAW2Q,EAAM/G,MAAOgH,EAAiBlT,GACzDoT,EAAe9Q,GAAW2Q,EAAM/f,KAAMggB,EAAiBlT,GAC3D,OAAOmT,EAAchjB,MAAK,SAAUkjB,GAClC,OAAOD,EAAajjB,MAAK,SAAUmjB,GACjC,OAAOjX,GAAKgX,EAAIC,GA5bT,SAAUxN,EAAOoG,EAAOhZ,GAErC,OAvDW,SAAUuV,EAAWwC,EAAWC,GAC3C,OAAOF,GAAUvC,EAAWwC,EAAWC,GAAY/a,MAAK,SAAUma,GAChE,OAzBgB,SAAU7B,EAAW6B,GAGvC,IAFA,IAAIiJ,GAAS,EACTC,EAAiB3lB,EAAMkd,GAAUT,GAC5BtY,EAAIsY,EAAOQ,SAAU9Y,GAAKsY,EAAOO,UAAW7Y,IACnD,IAAK,IAAI8B,EAAIwW,EAAOM,SAAU9W,GAAKwW,EAAOK,UAAW7W,IACnDyf,EAASA,GAAUvJ,GAAgBvB,EAAWzW,EAAG8B,GAAG1D,OAAOojB,GAG/D,OAAOD,EAASpiB,EAASR,KAAK2Z,GAAUnZ,EAASrC,OAiBxC2kB,CAAchL,EAAW6B,MAqD3BoJ,CADSvH,GAAarG,GACJoG,EAAOhZ,GA0bJygB,CAASV,EAAMnN,MAAOmN,EAAM/G,MAAO+G,EAAM/f,MAAQ/B,EAASrC,iBA6EpF8kB,GAvEa,SAAUC,GACzB,IAAK5mB,EAAQ4mB,GACX,MAAM,IAAIjkB,MAAM,0BAElB,GAAqB,IAAjBikB,EAAM3lB,OACR,MAAM,IAAI0B,MAAM,mCAElB,IAAIkkB,EAAe,GACfC,EAAM,GA6DV,OA5DA7jB,EAAK2jB,GAAO,SAAUG,EAAOC,GAC3B,IAAIC,EAAShX,GAAK8W,GAClB,GAAsB,IAAlBE,EAAOhmB,OACT,MAAM,IAAI0B,MAAM,kCAElB,IAAIqO,EAAMiW,EAAO,GACb7nB,EAAQ2nB,EAAM/V,GAClB,QAAiB7Q,IAAb2mB,EAAI9V,GACN,MAAM,IAAIrO,MAAM,0BAA4BqO,GACvC,GAAY,SAARA,EACT,MAAM,IAAIrO,MAAM,yCACX,IAAK3C,EAAQZ,GAClB,MAAM,IAAIuD,MAAM,mCAElBkkB,EAAapiB,KAAKuM,GAClB8V,EAAI9V,GAAO,WAET,IADA,IAAI/J,EAAO,GACFlG,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,IACtCkG,EAAKlG,GAAMC,UAAUD,GAEvB,IAAImmB,EAAYjgB,EAAKhG,OACrB,GAAIimB,IAAc9nB,EAAM6B,OACtB,MAAM,IAAI0B,MAAM,qCAAuCqO,EAAM,cAAgB5R,EAAM6B,OAAS,KAAO7B,EAAQ,UAAY8nB,GAEzH,IAAI1X,EAAQ,SAAU2X,GACpB,IAAIC,EAAanX,GAAKkX,GACtB,GAAIN,EAAa5lB,SAAWmmB,EAAWnmB,OACrC,MAAM,IAAI0B,MAAM,iDAAmDkkB,EAAatO,KAAK,KAAO,aAAe6O,EAAW7O,KAAK,MAK7H,IAHcnV,EAAOyjB,GAAc,SAAUQ,GAC3C,OAAO3iB,EAAS0iB,EAAYC,MAG5B,MAAM,IAAI1kB,MAAM,gEAAkEykB,EAAW7O,KAAK,MAAQ,eAAiBsO,EAAatO,KAAK,OAE/I,OAAO4O,EAASnW,GAAK3P,MAAM,KAAM4F,IAEnC,MAAO,CACLhF,KAAM,WAEJ,IADA,IAAIqlB,EAAW,GACNvmB,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,IACtCumB,EAASvmB,GAAMC,UAAUD,GAE3B,GAAIumB,EAASrmB,SAAW2lB,EAAM3lB,OAC5B,MAAM,IAAI0B,MAAM,+CAAiDikB,EAAM3lB,OAAS,SAAWqmB,EAASrmB,QAEtG,IAAIoI,EAASie,EAASN,GACtB,OAAO3d,EAAOhI,MAAM,KAAM4F,IAE5BuI,MAAOA,EACP+X,IAAK,SAAUC,GACbxZ,QAAQuZ,IAAIC,EAAO,CACjBX,aAAcA,EACdnnB,YAAasR,EACbyW,OAAQxgB,UAMX6f,GAILY,GAASf,GAAa,CACxB,CAAE9kB,KAAM,IACR,CAAE8lB,SAAU,CAAC,aACb,CAAEC,OAAQ,CAAC,cAETC,GAAO,SAAUC,EAASC,EAAQC,EAAYC,GAChD,OAAOH,EAAQ7lB,KAAK8lB,EAAQC,EAAYC,IAEtCC,GAASR,GAAO7lB,KAChB8lB,GAAWD,GAAOC,SAClBC,GAASF,GAAOE,OAahBO,GAASC,QAAQC,KAAKC,MAAMC,QAAQ,yBAEpCC,GAAU,SAAUC,EAAUC,GAChC,OAAOpb,GAAaH,QAAQsb,EAASpb,IAAIyU,UAAU4G,KAEjDC,GAAU,SAAUF,GACtB,OAAOD,GAAQC,GAAU,IAEvBG,GAAO,SAAUH,GACnB,OAAOD,GAAQC,GAAU,IAevBI,GAAM,SAAU1iB,GAKlB,IAJA,IAAIhB,EAAI,GACJV,EAAO,SAAUnF,GACnB6F,EAAEV,KAAKnF,IAEAyF,EAAI,EAAGA,EAAIoB,EAAIlF,OAAQ8D,IAC9BoB,EAAIpB,GAAG9B,KAAKwB,GAEd,OAAOU,GAQL2jB,GAAS,SAAU7kB,EAAG7D,GACxB,OAAO6D,EAAIC,EAASR,KAAKtD,GAAK8D,EAASrC,QAGrCknB,GAAY,SAAUppB,EAAMqpB,GAC9B,IASIjjB,EAAM,SAAU4I,GAClB,IAAIxJ,EAAI6jB,EAAUra,GAClB,GAAIxJ,GAAK,GAAW,OAANA,EAAY,CACxB,IAAI8R,EAAMC,GAAMvI,EAAShP,GACzB,OAAOspB,WAAWhS,IAAQ,EAE5B,OAAO9R,GAGL+jB,EAAY,SAAUva,EAASwa,GACjC,OAAO5jB,EAAM4jB,GAAY,SAAU9jB,EAAKwR,GACtC,IAAIuS,EAAMlS,GAAMvI,EAASkI,GACrBzX,OAAgBe,IAARipB,EAAoB,EAAIvR,SAASuR,EAAK,IAClD,OAAOC,MAAMjqB,GAASiG,EAAMA,EAAMjG,IACjC,IAOL,MAAO,CACL0W,IA/BQ,SAAUnH,EAAS2a,GAC3B,IAAK9oB,EAAS8oB,KAAOA,EAAE9Z,MAAM,YAC3B,MAAM,IAAI7M,MAAMhD,EAAO,wDAA0D2pB,GAEnF,IAAIjc,EAAMsB,EAAQtB,IACdoJ,GAAcpJ,KAChBA,EAAIqJ,MAAM/W,GAAQ2pB,EAAI,OA0BxBvjB,IAAKA,EACLwjB,SAhBaxjB,EAiBbmjB,UAAWA,EACXpM,IAVQ,SAAUnO,EAASvP,EAAO+pB,GAClC,IAAIK,EAAuBN,EAAUva,EAASwa,GAE9C,OADkB/pB,EAAQoqB,EAAuBpqB,EAAQoqB,EAAuB,KAYhFC,GAAQV,GAAU,SAAS,SAAUpa,GACvC,OAAOA,EAAQtB,IAAIqc,eAEjBC,GAAQ,SAAUhb,GACpB,OAAO8a,GAAM1jB,IAAI4I,IAEf4a,GAAW,SAAU5a,GACvB,OAAO8a,GAAMF,SAAS5a,IAGpBib,GAAY,SAAUpO,EAAWqO,QACf,IAAhBA,IACFA,EAAcjoB,GAEhB,IAAI4Y,EAAOgB,EAAUhB,KACjBI,EAAO3V,EAAMuV,EAAK9B,QAAS/X,GAC3BmpB,EAAU7kB,EAAMuV,EAAK1B,KAAMnY,GAC/B,OAAOqC,EAAI4X,GAAM,SAAUmP,GAczB,OAAOC,IAbQ,WACb,OAAO9mB,EAAK4mB,GAAS,SAAU3kB,GAC7B,OAAO4X,GAAgBvB,EAAWrW,EAAG4kB,GAAK1mB,QAAO,SAAU+N,GACzD,OAAOA,EAAOgI,SAAW2Q,KACxBvmB,gBAGO,SAAU4N,GACtB,OAA0B,IAAnBA,EAAOE,SAAiBuY,EAAYzY,EAAOzC,YAElC,WAChB,OAAOoO,GAAgBvB,EAAW,EAAGuO,UAKvCC,GAAS,SAAUC,EAAUC,EAASC,GACxC,IAAIC,EAAUH,IAKd,OAJmBzkB,EAAK4kB,EAASF,GACDnnB,SAAQ,WACtC,OAAOmB,EAASC,KAAKimB,EAAQ,IAAIrnB,QAAQonB,MAEvBnnB,KAAI,SAAUoO,GAChC,OAAOA,EAAOzC,YAGd8K,GAAS,SAAU+B,GACrB,IAAIhB,EAAOgB,EAAUhB,KACjBsP,EAAU7kB,EAAMuV,EAAK1B,KAAMnY,GAC3Bia,EAAO3V,EAAMuV,EAAK9B,QAAS/X,GAC/B,OAAOqC,EAAI8mB,GAAS,SAAU5Q,GAgB5B,OAAO8Q,IAfQ,WACb,OAAO9mB,EAAK0X,GAAM,SAAUyP,GAC1B,OAAOtN,GAAgBvB,EAAWtC,EAAKmR,GAAGhnB,QAAO,SAAU+N,GACzD,OAAOA,EAAO8H,MAAQA,KACrBjX,KAAKvB,EAAS,KAAK,SAAU0Q,GAC9B,MAAO,CAACA,YAIC,SAAUA,GACvB,OAA0B,IAAnBA,EAAOC,WAEE,WAChB,OAAO0L,GAAgBvB,EAAWtC,EAAK,UAkDzCoR,GAAc,SAAUC,EAAOC,GACjC,OAAO,SAAU7b,GACf,MAAiC,QAA1B8b,GAAa9b,GAAqB6b,EAAQD,IAGjDE,GAAe,SAAU9b,GAC3B,MAAuC,QAAhCuI,GAAMvI,EAAS,aAAyB,MAAQ,OAGrD+b,GAAQ3B,GAAU,UAAU,SAAUpa,GACxC,IAAItB,EAAMsB,EAAQtB,IAClB,OAAO4G,GAAOtF,GAAWtB,EAAIsd,wBAAwBC,OAASvd,EAAIwd,gBAEhEC,GAAQ,SAAUnc,GACpB,OAAO+b,GAAM3kB,IAAI4I,IAEfoc,GAAa,SAAUpc,GACzB,OAAO+b,GAAMnB,SAAS5a,IAGpBxJ,GAAI,SAAU6lB,EAAMC,GAItB,MAAO,CACLD,KAAMA,EACNC,IAAKA,EACLC,UANc,SAAU5rB,EAAGmP,GAC3B,OAAOtJ,GAAE6lB,EAAO1rB,EAAG2rB,EAAMxc,MAQzB0c,GAAgBhmB,GAMhBimB,GAAqB,SAAUhrB,EAAG6D,GACpC,YAAU9D,IAANC,EACKA,OAEMD,IAAN8D,EAAkBA,EAAI,GAG7BonB,GAAW,SAAU1c,GACvB,IAAIyF,EAAMzF,EAAQtB,IAAIoF,cAClB6B,EAAOF,EAAIE,KACXgX,EAAMlX,EAAImX,YACV/d,EAAO4G,EAAIoX,gBACf,GAAIlX,IAAS3F,EAAQtB,IACnB,OAAO8d,GAAc7W,EAAKmX,WAAYnX,EAAKoX,WAE7C,IAAIC,EAAYP,GAAmBE,aAAiC,EAASA,EAAIM,YAAape,EAAKme,WAC/FE,EAAaT,GAAmBE,aAAiC,EAASA,EAAIQ,YAAate,EAAKqe,YAChGE,EAAYX,GAAmB5d,EAAKue,UAAWzX,EAAKyX,WACpDC,EAAaZ,GAAmB5d,EAAKwe,WAAY1X,EAAK0X,YAC1D,OAAOC,GAAStd,GAASuc,UAAUW,EAAaG,EAAYL,EAAYI,IAEtEE,GAAW,SAAUtd,GACvB,IAAItB,EAAMsB,EAAQtB,IAEdiH,EADMjH,EAAIoF,cACC6B,KACf,OAAIA,IAASjH,EACJ8d,GAAc7W,EAAKmX,WAAYnX,EAAKoX,WAExCzX,GAAOtF,GAhCI,SAAUtB,GAC1B,IAAIkY,EAAMlY,EAAIsd,wBACd,OAAOQ,GAAc5F,EAAIyF,KAAMzF,EAAI0F,KAiC5BiB,CAAY7e,GAFV8d,GAAc,EAAG,IAKxBgB,GAAU,SAAUjT,EAAKzK,GAC3B,MAAO,CACLyK,IAAKA,EACLzK,EAAGA,IAGH2d,GAAU,SAAUrC,EAAKzqB,GAC3B,MAAO,CACLyqB,IAAKA,EACLzqB,EAAGA,IAGH+sB,GAAU,SAAU1U,GAEtB,OADU0T,GAAS1T,GACRqT,KAAOzB,GAAS5R,IAEzB2U,GAAU,SAAU3U,GACtB,OAAO0T,GAAS1T,GAAMqT,MAEpBuB,GAAc,SAAU/Y,EAAOmE,GACjC,OAAOyU,GAAQ5Y,EAAO8Y,GAAQ3U,KAE5B6U,GAAe,SAAUhZ,EAAOmE,GAClC,OAAOyU,GAAQ5Y,EAAO6Y,GAAQ1U,KAE5B8U,GAAS,SAAU9U,GACrB,OAAO0T,GAAS1T,GAAMsT,KAEpByB,GAAa,SAAUlZ,EAAOmE,GAChC,OAAOwU,GAAQ3Y,EAAOiZ,GAAO9U,KAE3BgV,GAAgB,SAAUnZ,EAAOmE,GACnC,OAAOwU,GAAQ3Y,EAAOiZ,GAAO9U,GAAQoT,GAAWpT,KAE9CiV,GAAgB,SAAUC,EAAcC,EAAcC,GACxD,GAAqB,IAAjBA,EAAM9rB,OACR,MAAO,GAET,IAAI+rB,EAAQhqB,EAAI+pB,EAAM1oB,MAAM,IAAI,SAAU4oB,EAAYzZ,GACpD,OAAOyZ,EAAWjqB,KAAI,SAAU2U,GAC9B,OAAOkV,EAAarZ,EAAOmE,SAG3BuV,EAAWH,EAAMA,EAAM9rB,OAAS,GAAG+B,KAAI,SAAU2U,GACnD,OAAOmV,EAAaC,EAAM9rB,OAAS,EAAG0W,MAExC,OAAOqV,EAAM5rB,OAAO,CAAC8rB,KAKnBtC,GAAS,CACXuC,MAAOxsB,EACPysB,UAAW,SAAUC,GACnB,OAAOT,GAAcF,GAAYC,GAAeU,IAElD3jB,KAAM+iB,IAEJa,GAAM,CACRH,MAAOxsB,EACP+I,KAAM4iB,GACNc,UAAW,SAAUC,GACnB,OAAOT,GAAcL,GAAaC,GAAca,KAGhDE,GAAM,CACRJ,MAlBW,SAAUK,GACrB,OAAQA,GAkBR9jB,KAAM2iB,GACNe,UAAW,SAAUC,GACnB,OAAOT,GAAcJ,GAAcD,GAAac,KAGhDI,GAAWnD,GAAYgD,GAAKC,IAC5BG,GAAQ,CACVP,MAAO,SAAUQ,EAAQ9U,GACvB,OAAO4U,GAAS5U,GAAOsU,MAAMQ,EAAQ9U,IAEvCuU,UAAW,SAAUxS,EAAM/B,GACzB,OAAO4U,GAAS5U,GAAOuU,UAAUxS,EAAM/B,IAEzCnP,KAAM,SAAUiO,GACd,OAAO8V,GAAS9V,GAAMjO,KAAKiO,KAI3BiW,GAAQ,CACVC,kBAAmB,CACjB,KACA,KACA,MACA,KACA,KACA,MACA,KACA,MACA,KACA,KACA,KACA,KACA,OACA,OACA,KACA,KACA,IACA,KACA,KACA,KACA,MAEFC,MAAO,CACL,KACA,MAEFC,SAAU,CAAC,KACX3N,MAAO,CAAC,KAEN4N,IACEzL,GAAgB,SAEhBC,GAAe,kBAEfC,GAAM,SAAUwL,GAClB,MAAO,MAAQA,EAAQ,MAErBvL,GAAyB,CAC3B,WACAH,YAAsBE,GAAIF,IAAiBE,GAAID,IAC/C0L,YAAsBzL,GAAID,IAC1BD,GAAgBE,GAAID,KACpBjK,KAAK,KAEA,IAAI4V,OAAO,aADOzL,GACP,YAyBhB0L,GAAiB,WACnB,IAAItiB,EAAUoB,KAAWpB,QACzB,OAAOA,EAAQxB,QAAUwB,EAAQ1B,UAM/BikB,GAAU,SAAU7V,EAAK7Y,EAAMiY,GACjC,OALa,SAAU0W,EAAI1W,GAC3B,IAAI1S,EAAM+jB,WAAWqF,GACrB,OAAOjF,MAAMnkB,GAAO0S,EAAW1S,EAGxBqpB,CAASrX,GAAMsB,EAAK7Y,GAAOiY,IAiChC4W,GAAW,SAAU7W,GACvB,OAAOyW,KAlBgB,SAAUzW,GACjC,IAAI+V,EAAQ/V,EAAKtK,IAAIsd,wBAAwB+C,MAE7C,MAAkB,eADFxW,GAAMS,EAAM,cAEnB+V,EAOAA,EALWW,GAAQ1W,EAAM,eAAgB,GAC7B0W,GAAQ1W,EAAM,gBAAiB,IACjC0W,GAAQ1W,EAAM,oBAAqB,GAClC0W,GAAQ1W,EAAM,qBAAsB,IAS9B8W,CAAmB9W,GAAQ0W,GAAQ1W,EAAM,QAASgS,GAAMhS,KAGhF+W,GAA4B,iBAC5BC,GAAuB,qBAKvBC,GAAgB,SAAUjX,EAAMgW,GAClC5W,GAAMY,EAAM,QAASgW,EAAS,OAE5BkB,GAAqB,SAAUlX,EAAMgW,GACvC5W,GAAMY,EAAM,QAASgW,EAAS,MAE5BmB,GAAY,SAAUnX,EAAMgW,GAC9B5W,GAAMY,EAAM,SAAUgW,EAAS,OAmB7BoB,GAAiB,SAAUpX,GAC7B,IAAIvY,EAlBe,SAAUuY,GAC7B,OAAON,GAAOM,EAAM,UAAUpV,YAAW,WACvC,OAxBY,SAAUoV,GACxB,OAAOyW,KA7BiB,SAAUzW,GAClC,IAAIiT,EAASjT,EAAKtK,IAAIsd,wBAAwBC,OAE9C,MAAkB,eADF1T,GAAMS,EAAM,cAEnBiT,EAOAA,EALUyD,GAAQ1W,EAAM,cAAe,GAC1B0W,GAAQ1W,EAAM,iBAAkB,IACpC0W,GAAQ1W,EAAM,mBAAoB,GAC/B0W,GAAQ1W,EAAM,sBAAuB,IAoBhCqX,CAAoBrX,GAAQ0W,GAAQ1W,EAAM,SAAUmT,GAAMnT,IAuB3EsX,CAAUtX,GAAQ,QAgBfuX,CAAevX,GAC3B,OAAKvY,EANkB,SAAUA,EAAOuY,EAAMwX,EAAQC,GACtD,IAAIC,EAASxX,SAASzY,EAAO,IAC7B,OAAO0J,GAAS1J,EAAO,MAAuB,UAAfO,GAAKgY,GAVxB,SAAUA,EAAM0X,EAAQF,EAAQC,GAC5C,IAAIE,EAAUzW,GAAMlB,GAAM3U,KAAI,SAAU6V,GACtC,IAAI0W,EAAQJ,EAAOtW,GACnB,OAAOgE,KAAK2S,MAAMH,EAAS,IAAME,MAChCjtB,MAAM+sB,GAET,OADAD,EAAOzX,EAAM2X,GACNA,EAIiDG,CAAQ9X,EAAM0X,EAAQF,EAAQC,GAAUC,EAOzFK,CAAmBtwB,EAAOuY,EAAMmT,GAAOgE,IAFrChE,GAAMnT,IASbgY,GAAc,SAAUhhB,GAE1B,OADe0I,GAAO1I,EAAS,SACf1M,MAAK,WACnB,OAAOiC,EAASC,KAAK8R,GAAMtH,EAAS,aACnC,SAAU+e,GACX,OAAOxpB,EAASR,KAAKgqB,OAGrBkC,GAA2B,SAAUC,EAAWC,GAClD,OAAOD,EAAYC,EAAUC,aAAe,KAW1CC,GAAqB,SAAUrY,EAAMmY,GAEvC,OADYH,GAAYhY,GACX1V,MAAK,WAChB,IAAIguB,EAAWtG,GAAMhS,GACrB,OAAOiY,GAAyBK,EAAUH,MACzC,SAAU3S,GACX,OAfuB,SAAUxO,EAAS+e,EAAOoC,GACnD,IAAII,EAAexB,GAA0ByB,KAAKzC,GAClD,GAAqB,OAAjBwC,EACF,OAAOjH,WAAWiH,EAAa,IAE/B,IAAID,EAAWzB,GAAS7f,GACxB,OAAOihB,GAAyBK,EAAUH,GASnCM,CAAqBzY,EAAMwF,EAAG2S,OAkBrCO,GAAgB,SAAU1Y,EAAMmY,GAElC,OADYH,GAAYhY,GACX1V,MAAK,WAChB,OAAOusB,GAAS7W,MACf,SAAUwF,GACX,OAjBkB,SAAUxO,EAAS+e,EAAOoC,GAC9C,IAAIQ,EAAa3B,GAAqBwB,KAAKzC,GAC3C,GAAmB,OAAf4C,EACF,OAAOzY,SAASyY,EAAW,GAAI,IAEjC,IAAIJ,EAAexB,GAA0ByB,KAAKzC,GAClD,OAAqB,OAAjBwC,EAToB,SAAUL,EAAWC,GAC7C,OAAOD,EAAY,IAAMC,EAAUC,aAU1BQ,CADUtH,WAAWiH,EAAa,IACFJ,GAElCtB,GAAS7f,GAOP6hB,CAAgB7Y,EAAMwF,EAAG2S,OAGhCW,GAAc,SAAU9Y,GAC1B,OA1DU,SAAUA,EAAMxY,EAAMuC,GAGhC,OAFQA,EAAEiW,GACCG,GAAQH,EAwDA,WAAZ+Y,CAAM/Y,EAAM,EAAWoX,KAY5B4B,GAAkB,SAAUhZ,EAAMgW,EAAQiD,GAC5C7Z,GAAMY,EAAM,QAASgW,EAASiD,IAK5BC,GAAuB,SAAUhY,GACnC,OAlHkCsW,EAkHLxF,GAjHzBmH,GAjoDuBniB,EAgoDE6J,EAkHPK,EAjvDf3U,EAASC,KAAKwK,EAAQtB,IAAI0jB,cAAc/tB,IAAIsK,GAAaH,UAgoDzB7K,MAAMiS,GAAQ/B,GAAMgG,KACpD2W,EAAO3W,GAAO2W,EAAO2B,GAAkB,IAgHR,IAlHnB,IAAUtY,EAAK2W,EAhoDPxgB,EAioDvBmiB,GAgIFE,GAA2BtwB,EAASguB,IACpCuC,GAAsBvwB,EAASiuB,IAE/BuC,GAAQ5e,GAAM,OACd6e,GAAW,SAAUxZ,EAAMd,EAAUsY,GACvC,OAAO9X,GAAOM,EAAMd,GAAU5U,MAAK,WACjC,OAAOktB,EAAOxX,GAAQ,QACrB,SAAUL,GACX,OAAOA,MAGP8Z,GAAU,SAAUzZ,EAAMmY,GAI5B,OAAOqB,GAASxZ,EAAM,SAHP,SAAUpF,GACvB,OAAO2e,GAAM3e,GAAKoX,GAAMpX,GAAK8d,GAAc9d,EAAGud,OAI9CuB,GAAU,SAAU1Z,GACtB,OAAOwZ,GAASxZ,EAAM,SAAU8Y,KAO9Ba,GAAc,SAAU3Z,EAAM4Z,GAChC,OAAOla,GAAOM,EAAM4Z,GAAMlvB,UAKxBmvB,GAAe,SAAUC,EAASje,EAAOke,EAASruB,EAAQ8rB,EAAQvX,GACpE,OAAO6Z,EAAQpuB,OAAOA,GAAQpB,MAAK,WACjC,OAAO2V,EAheE,SAAUjT,EAAI6O,GACzB,GAAIA,EAAQ,GAAKA,GAAS7O,EAAG1D,OAAS,EACpC,OAAOiD,EAASrC,OAElB,IAAIoI,EAAUtF,EAAG6O,GAAOvR,MAAK,WAC3B,IAAI0vB,EA9iEM,SAAUhtB,GACtB,IAAIQ,EAAIf,EAAY7C,KAAKoD,EAAI,GAE7B,OADAQ,EAAEysB,UACKzsB,EA2iEMysB,CAAQjtB,EAAGN,MAAM,EAAGmP,IAC/B,OAAOtN,EAAQyrB,GAAM,SAAUvxB,EAAG2E,GAChC,OAAO3E,EAAE4C,KAAI,SAAU6uB,GACrB,MAAO,CACLzyB,MAAOyyB,EACP1E,MAAOpoB,EAAI,YAIhB,SAAUslB,GACX,OAAOnmB,EAASR,KAAK,CACnBtE,MAAOirB,EACP8C,MAAO,OAGP2E,EAAOntB,EAAG6O,EAAQ,GAAGvR,MAAK,WAC5B,IAAI0vB,EAAOhtB,EAAGN,MAAMmP,EAAQ,GAC5B,OAAOtN,EAAQyrB,GAAM,SAAUvxB,EAAG2E,GAChC,OAAO3E,EAAE4C,KAAI,SAAU6uB,GACrB,MAAO,CACLzyB,MAAOyyB,EACP1E,MAAOpoB,EAAI,YAIhB,SAAU7C,GACX,OAAOgC,EAASR,KAAK,CACnBtE,MAAO8C,EACPirB,MAAO,OAGX,OAAOljB,EAAQ/G,MAAK,SAAUmnB,GAC5B,OAAOyH,EAAK9uB,KAAI,SAAUd,GACxB,IAAI6vB,EAAS7vB,EAAEirB,MAAQ9C,EAAE8C,MACzB,OAAOtQ,KAAKmV,IAAI9vB,EAAE9C,MAAQirB,EAAEjrB,OAAS2yB,QAybvBE,CAAOP,EAASle,OAC/B,SAAUmE,GACX,OAAOwX,EAAOxX,OAGdua,GAAe,SAAU1W,EAAW3C,EAAO2V,EAAU5W,EAAUkY,GACjE,IAAIqC,EAAcvI,GAAUpO,GAAW,SAAU7D,GAC/C,OAAO2Z,GAAY3Z,EAAM,YAEvBe,EAAUqE,GAAqBvB,GAtBtB,SAAUA,GACvB,OAAOxY,EAAI+Z,GAAsBvB,IAAY,SAAUpC,GACrD,OAAOlV,EAASC,KAAKiV,EAAOzK,YAoBkByjB,CAAS5W,GAAa2W,EAClET,EAAU,CAACxtB,EAASR,KAAKgqB,GAAMhkB,KAAKmP,KAASzX,OAAO4B,EAAI0qB,GAAMN,UAAU+E,EAAatZ,IAAQ,SAAUwZ,GACzG,OAAOA,EAAIrvB,KAAI,SAAUuD,GACvB,OAAOA,EAAEjH,SAGTgzB,EAAY7wB,EAAIsW,IACpB,OAAO/U,EAAI0V,GAAS,SAAUuU,EAAY5C,GACxC,OAAOmH,GAAavE,EAAY5C,EAAGqH,EAASY,GAAW,SAAUlZ,GAC/D,GAvBc,SAAUzB,GAC5B,OAAQuZ,GAAMvZ,IAAS2Z,GAAY3Z,EAAM,SAsBjC4a,CAAcnZ,GAChB,OAAOoV,EAASpV,EAAQ0W,GAExB,IAxmBiB1vB,EAwmBbuX,EAvmBHvX,OADgBA,EAwmBG+xB,EAAY9H,IAAI1pB,EAvmBDP,GAAK8D,EAASrC,OAwmBjD,OAAO2vB,GAAa7Z,EAAM0S,EAAGqH,EAASY,GAAW,SAAU3a,GACzD,OAAOC,EAAS1T,EAASR,KAAKimB,GAAMhS,OACnCC,KAEJA,OAGH4a,GAAa,SAAUC,GACzB,OAAOA,EAAQzvB,KAAI,SAAUyiB,GAC3B,OAAOA,EAAI,QACVnjB,MAAM,KAcPowB,GAAiB,SAAUlX,EAAW3C,EAAOiX,GAC/C,OAAOoC,GAAa1W,EAAW3C,EAAOwX,IAAe,SAAUoC,GAC7D,OAAOA,EAAQlwB,WAAWutB,EAAU6C,gBACnC7C,IAED8C,GAAgB,SAAUpX,EAAW3C,EAAOga,EAAW5D,EAAWrX,GACpE,IAAIkB,EAAOW,GAAO+B,GACdkW,EAAU,CAACxtB,EAASR,KAAKmvB,EAAUnpB,KAAKmP,KAASzX,OAAO4B,EAAI6vB,EAAUzF,UAAUtU,EAAMD,IAAQ,SAAUwZ,GAC1G,OAAOA,EAAIrvB,KAAI,SAAUuD,GACvB,OAAOA,EAAEkI,SAGb,OAAOzL,EAAI8V,GAAM,SAAUmU,EAAY5C,GACrC,OAAOmH,GAAavE,EAAY5C,EAAGqH,EAASjwB,EAAIuW,IAAaiX,EAAWrX,OAYxEkb,GAAO,SAAUC,GACnB,IAAI3zB,EAAQ2zB,EAOZ,MAAO,CACLhtB,IAPQ,WACR,OAAO3G,GAOP0W,IALQ,SAAU/R,GAClB3E,EAAQ2E,KA6BRivB,GAAiB,SAAUC,EAAcpa,GAC3C,IAAIqa,EAAaJ,GAAK7J,WAAWgK,IAC7BlD,EAAa+C,GAAKnJ,GAAM9Q,IAqB5B,MAAO,CACL6U,MAAOwF,EAAWntB,IAClBgqB,WAAYA,EAAWhqB,IACvBotB,UANc,SAAU3X,EAAWsU,GACnC,OA1FsB,SAAUtU,EAAW3C,EAAOiX,GACpD,OAAOoC,GAAa1W,EAAW3C,EAAOmX,IAAoB,SAAUyC,GAClE,OAAOA,EAAQxwB,MAAK,WAClB,OAAO6tB,EAAU6C,kBAChB,SAAU9C,GACX,OAAOA,EAAYC,EAAUC,aAAe,SAE7CD,GAmFMsD,CAAoB5X,EAAW3C,EAAOiX,IAM7CuD,aAxBiB,SAAUlG,GAC3B,OAAOA,EAAQ4C,EAAWhqB,MAAQ,KAwBlCutB,kBAtBsB,SAAUnW,EAAGoW,GACnC,MAAO,CAAC,IAAMpW,IAsBdwV,aApBiB,WACjB,OAAOza,KAAa6X,EAAWhqB,MAAQ,KAoBvCytB,gBAAiB3E,GACjB4E,iBAnBqB,SAAUtG,GAC/B,IAAIuG,EAAeR,EAAWntB,MAE1B4tB,EAAWD,EADFvG,EAAQ,IAAMuG,EAE3B7E,GAAmBhW,EAAO8a,GAC1BT,EAAWpd,IAAI6d,GACf5D,EAAWja,IAAI6T,GAAM9Q,KAcrB+a,YAAY,EACZpM,MAAO,YAGPqM,GAAY,SAAUZ,EAAcpa,GACtC,IAAI6U,EAAQoF,GAAKG,GACbzE,EAAWd,EAAM3nB,IAcrB,MAAO,CACL2nB,MAAOc,EACPuB,WAAYvB,EACZ2E,UANc,SAAU3X,EAAWsU,GACnC,OAAO4C,GAAelX,EAAW3C,EAAOiX,IAMxCuD,aAjBiB1yB,EAkBjB2yB,kBAjBsB,SAAUnW,EAAGgQ,GAEnC,MAAO,CADOtQ,KAAKC,IAAI5E,KAAYiF,EAAIgQ,GACrBhQ,IAgBlBwV,aAAcza,GACdsb,gBAAiB5E,GACjB6E,iBAhBqB,SAAUtG,GAC/B,IAAIwG,EAAWnF,IAAarB,EAC5ByB,GAAc/V,EAAO8a,GACrBjG,EAAM5X,IAAI6d,IAcVC,YAAY,EACZpM,MAAO,UAwBPsM,GARe,SAAUjb,GAE3B,OADY8W,GAAY9W,GACX5W,MAAK,WAChB,OAtGW,SAAU4W,GACvB,IAAI2V,EAAW,WACb,OAAO7E,GAAM9Q,IAEXkb,EAAOrzB,EAAS,GAIpB,MAAO,CACLgtB,MAAOc,EACPuB,WAAYvB,EACZ2E,UANc,SAAU3X,EAAWsU,GACnC,OAAO4C,GAAelX,EAAW3C,EAAOiX,IAMxCuD,aAAcU,EACdT,kBAAmB5yB,EAAS,CAAC,IAC7BiyB,aAAcoB,EACdP,gBAAiB/yB,EACjBgzB,iBAAkBhzB,EAClBmzB,YAAY,EACZpM,MAAO,QAoFAwM,CAASnb,MACf,SAAUsE,GACX,OAlBa,SAAUxO,EAAS+e,GAClC,IAAIwC,EAAec,KAA2Bb,KAAKzC,GACnD,GAAqB,OAAjBwC,EACF,OAAO8C,GAAe9C,EAAa,GAAIvhB,GAEzC,IAAI2hB,EAAaW,KAAsBd,KAAKzC,GAC5C,GAAmB,OAAf4C,EAAqB,CACvB,IAAIL,EAAWpY,SAASyY,EAAW,GAAI,IACvC,OAAOuD,GAAU5D,EAAUthB,GAE7B,IAAIslB,EAAgBtK,GAAMhb,GAC1B,OAAOklB,GAAUI,EAAetlB,GAOvBulB,CAAWrb,EAAOsE,OAGzB2W,GAESD,GAFTC,GAGcd,GA6CdmB,GAAW,SAAUzY,EAAM0Y,EAAcC,GAC3C,IAAInb,EAAMwC,EAAK2Y,GAAU1lB,QACrB2lB,EAAKhnB,GAAaY,QAAQ,MAC9ByR,GAAO2U,EAAIhnB,GAAaY,QAAQ,QACxBkmB,EAAezU,GAASC,IAC9B1G,EAAKob,IA8ELC,GAAS,SAAU5lB,GACrB,MAAyB,QAAlBhP,GAAKgP,GAAqB,EAAIgS,GAAUhS,GAAS1M,MAAK,WAC3D,OAAOqR,GAAS3E,GAAS1N,UACxB,SAAU8C,GACX,OAAOA,EAAE9C,WAQTuzB,GAA6B,CAC/B,MACA,MAEEC,GAAmB,SAAU3lB,GAE/B,OAVO6R,GAS8C7R,GAThCzL,QAAO,SAAUgL,GACpC,OAA8B,IAAvBA,EAAKrF,OAAO/H,QAAgBoN,EAAK9J,QAXjC,MAWkD,KACxDlC,UAQyBqC,EAAS8vB,GAA4B70B,GAAKmP,KAGpEmQ,GAAQ,SAAUtQ,GACpB,OA7+DgC8F,EA6+DLggB,IA5+DvBC,EAAU,SAAUtnB,GACtB,IAAK,IAAIrI,EAAI,EAAGA,EAAIqI,EAAKW,WAAW9M,OAAQ8D,IAAK,CAC/C,IAAI4vB,EAAUrnB,GAAaH,QAAQC,EAAKW,WAAWhJ,IACnD,GAAI0P,EAAUkgB,GACZ,OAAOzwB,EAASR,KAAKixB,GAEvB,IAAIC,EAAMF,EAAQtnB,EAAKW,WAAWhJ,IAClC,GAAI6vB,EAAIvyB,SACN,OAAOuyB,EAGX,OAAO1wB,EAASrC,SAi+DA8M,EA/9DGtB,KAdN,IAAiBoH,EAC5BigB,GA8+DFG,GAAS,SAAUlmB,GACrB,OAAOmmB,GAAcnmB,EAAS8lB,KAE5BK,GAAgB,SAAUrnB,EAAOgH,GACnC,IAAIigB,EAAU,SAAU/lB,GAEtB,IADA,IAAImG,EAAaxB,GAAS3E,GACjB5J,EAAI+P,EAAW7T,OAAS,EAAG8D,GAAK,EAAGA,IAAK,CAC/C,IAAIwO,EAAQuB,EAAW/P,GACvB,GAAI0P,EAAUlB,GACZ,OAAOrP,EAASR,KAAK6P,GAEvB,IAAIqhB,EAAMF,EAAQnhB,GAClB,GAAIqhB,EAAIvyB,SACN,OAAOuyB,EAGX,OAAO1wB,EAASrC,QAElB,OAAO6yB,EAAQjnB,IAGbsnB,GAAyB,CAC3BtnB,MAAO,CACL,MACA,QAGAunB,GAAa,WACf,IAAIV,EAAKhnB,GAAaY,QAAQ,MAE9B,OADAyR,GAAO2U,EAAIhnB,GAAaY,QAAQ,OACzBomB,GAELW,GAAY,WACd,OAAO3nB,GAAaY,QAAQ,QAE1BgnB,GAAiB,WACnB,OAAO5nB,GAAaY,QAAQ,aAE1BlG,GAAU,SAAU2P,EAAMxJ,EAAK6H,GACjC,IAAImf,EAz+BO,SAAU1M,EAAUta,GAC/B,IAAIhH,EAPU,SAAUshB,EAAUta,GAClC,IAAIhH,EAAKmG,GAAaY,QAAQC,GAC1BoI,EAAaD,GAAMmS,GAEvB,OADA1S,GAAO5O,EAAIoP,GACJpP,EAGEiuB,CAAU3M,EAAUta,GACzBknB,EAAgB/hB,GAASsV,GAAKH,IAElC,OADAtI,GAAShZ,EAAIkuB,GACNluB,EAq+BOmuB,CAAO3d,EAAMxJ,GAQ3B,OAPA+B,GAAO8F,GAAO,SAAUjS,EAAG6C,GACf,OAAN7C,EACFqS,GAAO+e,EAASvuB,GAEhBkP,GAAIqf,EAASvuB,EAAG7C,MAGboxB,GAELI,GAAe,SAAU5d,GAC3B,OAAOA,GAEL6d,GAAS,SAAUphB,GACrB,OAAO,WACL,OAAO9G,GAAaY,QAAQ,KAAMkG,EAAI/G,OA2BtCooB,GAAiB,SAAUC,EAAQthB,EAAKuhB,GAC1C,IAAIC,EAAW,SAAUC,EAAMvf,GAv8DtB,IAAkBjN,EACvBysB,EACAC,EAFuB1sB,EAw8DNiN,EAv8DjBwf,EAu8DGD,EAAKlnB,QAv8DWtB,IACnB0oB,EAAY1sB,EAAOgE,IACnBoJ,GAAcqf,IAAcrf,GAAcsf,KAC5CA,EAAUrf,MAAMsf,QAAUF,EAAUpf,MAAMsf,SAq8D1Cze,GAASjB,EAAO,UACK,IAAjBuf,EAAKvkB,SACPiG,GAASjB,EAAO,UAoCpB,MAAO,CACLyT,IARW,SAAU8L,GACrB,IAAIzhB,EAAM5B,GAAMqjB,EAAKlnB,SACjBob,EAAMzc,GAAaY,QAAQvO,GAAKk2B,EAAKlnB,SAAUyF,EAAI/G,KAGvD,OAFAuoB,EAASC,EAAM9L,GACf2L,EAAOG,EAAKlnB,QAASob,GACdA,GAIPkM,SAAUf,GACVhc,IAAKsc,GAAOphB,GACZuD,KArCY,SAAUke,GACtB,IAAIK,EAAO1jB,GAAMqjB,EAAKlnB,SAClB2lB,EAAKhnB,GAAaY,QAAQvO,GAAKk2B,EAAKlnB,SAAUunB,EAAK7oB,KACnD8oB,EAAUR,EAAerzB,MAAM,CACjC,SACA,KACA,IACA,IACA,OACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,IACA,QAEE8zB,EAAWD,EAAQl1B,OAAS,EAnDjB,SAAUo1B,EAASC,EAASH,GAE7C,OADclX,GAAMoX,GACLrzB,KAAI,SAAUuzB,GAC3B,IAAIC,EAAiBL,EAAQ5d,KAAK,KAC9BzF,EAAU6B,GAAY4hB,EAAWC,GAAgB,SAAU7nB,GAC7D,OAAOS,GAAKT,EAAS0nB,MAEvB,OAAOjxB,EAAM0N,GAAS,SAAU7M,EAAM2M,GACpC,IAAI6jB,EAAe9N,GAAQ/V,GAG3B,OAFAwD,GAAOqgB,EAAc,mBACrB9W,GAAO1Z,EAAMwwB,GACNA,IACNH,MACFh0B,MAAMg0B,GAsC6BI,CAAab,EAAKlnB,QAAS2lB,EAAI6B,GAAW7B,EAK9E,OAJA3U,GAAOyW,EAAU9oB,GAAaY,QAAQ,OACtC0nB,EAASC,EAAMvB,GAtCc,SAAU7L,EAAUnS,GACnDpG,GAAO6kB,IAAwB,SAAU4B,EAAiBC,GACxD,OAAOzgB,GAAOsS,EAAUmO,GAAevzB,QAAO,SAAUwzB,GACtD,OAAOnyB,EAASiyB,EAAiBE,MAChC5zB,MAAK,SAAU4zB,GAChB,OAAO/gB,GAAIQ,EAAOsgB,EAAeC,SAkCnCC,CAA2BjB,EAAKlnB,QAAS2lB,GACzCoB,EAAOG,EAAKlnB,QAAS2lB,GACdA,GAcPtsB,QAASA,GACT+uB,IAAK/B,KAGLgC,GAAQ,SAAU5iB,GACpB,MAAO,CACL2V,IAAKkL,GACLgB,SAAUf,GACVhc,IAAKsc,GAAOphB,GACZuD,KAAMqd,GACNhtB,QAASutB,GACTwB,IAAK/B,KAULiC,GAAY,SAAUC,GACxB,OAAOl0B,EAAIk0B,EAAO5pB,GAAaH,UAG7BgqB,GAAc,SAAU3e,GAC1B,OAAOA,EAAIzG,SAASrK,eAElB0vB,GAAY,SAAUC,GACxB,OAAO/pB,GAAaH,QAAQkqB,EAAO9iB,YAEjC+iB,GAAkB,SAAU9e,GAC9B,OAAOA,EAAImS,wBAAwB+C,OAEjC6J,GAAiB,SAAU/e,GAC7B,OAAOA,EAAImS,wBAAwBC,QAEjCpH,GAAY,SAAU6T,GACxB,OAAO,SAAU1oB,GACf,OAAOS,GAAKT,EAASyoB,GAAUC,MAM/BG,GAAc,SAAU1mB,GAC1B,MAAO,gBAAgBlJ,KAAKkJ,GAAQA,EAAO,KAAOA,GAEhD2mB,GAAkB,SAAU5e,GAC9BzC,GAAOyC,EAAO,kBACd,IAAI6e,EAAuB,SAAU/oB,GACnC,OAAOyH,GAAOzH,EAAS,mBAEzB1L,EAAKuO,GAAMqH,GAAQ6e,GACnBz0B,EAAKyV,GAAQG,GAAQ6e,IAEnBC,GAAgB,SAAUN,EAAQ7e,GACpC,IAAIlB,EAAM+f,EAAOhqB,IAAIuqB,SAASpf,EAAK,UAAY6e,EAAOhqB,IAAIwqB,UAAUrf,EAAK,SACzE,OAAOtU,EAASC,KAAKmT,GAAKjU,OAAO6F,KAE/B4uB,GAAe,SAAU14B,GAC3B,MAAO,mBAAmBwI,KAAKxI,IAK7B24B,GAAoB,SAAUV,GAChC,OAAO/pB,GAAaH,QAAQkqB,EAAOW,UAAUC,aAG3CD,GAAY,SAAUE,GACxB,OAAOrQ,GAAKqQ,EAAWnyB,MAAOrF,EAAS,IAAKC,EAAUmF,IAEpDqyB,GAAa,SAAUD,GACzB,IAAIE,EAAU,SAAUtpB,EAAM3P,GAC5B,OAAOgX,GAAOrH,EAAM3P,GAAMgE,QAAO,SAAUk1B,GACzC,OAAOxgB,SAASwgB,EAAM,IAAM,MAM5BlwB,EAAa6vB,GAAUE,GAC3B,OAAO/vB,EAAWlH,OAAS,GAAKmC,EAAO+E,GAJjB,SAAU2G,GAC9B,OAAOspB,EAAQtpB,EAAM,YAAcspB,EAAQtpB,EAAM,cAGmB5K,EAASR,KAAKyE,GAAcjE,EAASrC,QAEzGy2B,GAAW,SAAUzf,EAAOqf,EAAYK,GAC1C,OAAO1Q,GAAKqQ,EAAWnyB,MAAO7B,EAASrC,MAAM,SAAU2P,GACrD,OAAIA,EAAMvQ,QAAU,EACXiD,EAASrC,OAETkkB,GAAYlN,EAAO0f,EAASrT,sBAAuBqT,EAASpT,sBAAsBniB,KAAI,SAAUqa,GACrG,MAAO,CACLA,OAAQA,EACR7L,MAAOA,QAIZtN,EAASrC,OAWV02B,GAAW,CACbC,SATgB,oBAUhBC,iBATwB,8CAUxBC,cARqB,0BASrBxT,sBAR6B,0DAS7ByT,aARoB,yBASpBxT,qBAR4B,yDAmB1ByT,GAAU,SAAUV,EAAYrf,EAAOlB,GACzC,MAAO,CACLhJ,QAASgJ,EACT2gB,SAAUA,GAASzf,EAAOqf,EAAYK,IACtCJ,WAAYA,GAAWD,GACvBF,UAAWA,GAAUE,KAmCrBW,GAAiB,SAAUxB,EAAQa,EAAYY,EAASC,GAC1D1B,EAAO2B,GAAG,oBAAoB,SAAUzmB,IAOlB,IAAhBA,EAAEylB,WACJnQ,GAAKqQ,EAAWnyB,MAAOtF,GAPF,SAAU+Q,GAC/Be,EAAE0mB,iBApBc,SAAUznB,GAC9B,OAAOqH,GAAMrH,EAAM,IAAIxO,KAAI,SAAU6V,GACnC,IAAIsc,EApUM,SAAUtc,EAAO4f,GAC7B,IAAIS,EAAa,SAAU9nB,GACzB,OAAOhP,GAAGgP,EAAOzC,QAAS8pB,IAExBtD,EAAUvM,GAAK/P,GACf6C,EAAOlC,GAAU2b,GACjBrF,EAAYgE,GAAuBjb,GACnCsgB,EAAepc,GAAmBrB,GAClC0d,EAnGkB,SAAUC,EAAOH,GACvC,IAAII,EAAeD,EAAM7e,KAAK9B,QAE1B6gB,EADYF,EAAM7e,KAAK1B,KAEvB0gB,EAASF,EACTG,EAAS,EACTC,EAAS,EACTC,EAAW,GACXC,EAAgB,GAqBpB,OApBA1pB,GAAOmpB,EAAM1d,QAAQ,SAAUvK,GAE7B,GADAuoB,EAASl1B,KAAK2M,GACV8nB,EAAW9nB,GAAS,CACtBwoB,EAAcn1B,KAAK2M,GACnB,IAAIyM,EAAWzM,EAAO8H,IAClB2gB,EAAShc,EAAWzM,EAAOC,QAAU,EACrCsM,EAAWvM,EAAOgI,OAClB0gB,EAASnc,EAAWvM,EAAOE,QAAU,EACrCuM,EAAW0b,EACbA,EAAS1b,EACAgc,EAASJ,IAClBA,EAASI,GAEPlc,EAAW6b,EACbA,EAAS7b,EACAmc,EAASJ,IAClBA,EAASI,OAnCC,SAAUP,EAAQC,EAAQC,EAAQC,EAAQC,EAAUC,GACpE,MAAO,CACLL,OAAQA,EACRC,OAAQA,EACRC,OAAQA,EACRC,OAAQA,EACRC,SAAUA,EACVC,cAAeA,GAgCVG,CAAYR,EAAQC,EAAQC,EAAQC,EAAQC,EAAUC,GAsE1CI,CAAkBb,EAAcD,GAC/CtqB,EAAW,UAAY6pB,EAAZ,YAAkDA,EAAmB,IAChFwB,EAAkB5hB,GAAiB8c,EAAS,SAAS,SAAUxd,GACjE,OAAOvV,GAAGuV,EAAM/I,MAOlB,OALA3L,EAAKg3B,EAAiB1Z,IAlEP,SAAU7E,EAAM2d,EAAOa,EAAOhB,GAG7C,IAFA,IAAII,EAAeD,EAAM7e,KAAK9B,QAC1ByhB,EAAYd,EAAM7e,KAAK1B,KAClB/T,EAAI,EAAGA,EAAIo1B,EAAWp1B,IAE7B,IADA,IAAIqvB,GAAe,EACVvtB,EAAI,EAAGA,EAAIyyB,EAAczyB,IAC1B9B,EAAIm1B,EAAMX,QAAUx0B,EAAIm1B,EAAMT,QAAU5yB,EAAIqzB,EAAMV,QAAU3yB,EAAIqzB,EAAMR,SAC3D3c,GAAgBsc,EAAOt0B,EAAG8B,GAAGxD,OAAO61B,GAAYl3B,SAE7DmyB,GAASzY,EAAM0Y,EAAcrvB,GAE7BqvB,GAAe,GAwDvBgG,CAAW1e,EAAMyd,EAAcC,EAAcF,GAlDnC,SAAU/D,EAAS+E,EAAOb,EAAOgB,GAC3CnqB,GAAOmpB,EAAM3gB,SAAS,SAAUqR,IAC1BA,EAAI3Q,OAAS8gB,EAAMV,QAAUzP,EAAI3Q,OAAS8gB,EAAMR,SAClDnZ,GAASwJ,EAAIpb,YAGjB,IAAI2rB,EAAYj3B,EAAO+U,GAAW+c,EAAS,OAAO,SAAUjc,GAC1D,OAAqC,IAA9BA,EAAI7L,IAAI8B,qBAEjBlM,EAAKq3B,EAAW/Z,IACZ2Z,EAAMV,SAAWU,EAAMR,QAAUQ,EAAMX,SAAWW,EAAMT,QAC1Dx2B,EAAKmV,GAAW+c,EAAS,UAAU,SAAUxd,GAC3CvB,GAAOuB,EAAM,WACbvB,GAAOuB,EAAM,cAGjBvB,GAAO+e,EAASta,IAChBzE,GAAO+e,EAAS,2BACArB,GAAuBqB,GAC7B1B,iBAAiB4G,GAkC3BE,CAAMpF,EAASiE,EAAcD,EAhCN,SAAUtgB,EAAO2C,EAAWsU,EAAWoK,GAC9D,GAAqB,IAAjBA,EAAMV,QAAgBhe,EAAUhB,KAAK9B,UAAYwhB,EAAMR,OAAS,EAClE,OAAO,EAET,IAAIc,EAAY9H,GAAelX,EAAW3C,EAAOiX,GAC7C2K,EAAel1B,EAAMi1B,GAAW,SAAUn1B,EAAKqoB,GACjD,OAAOroB,EAAMqoB,IACZ,GAKCP,EAJoB5nB,EAAMi1B,EAAUn2B,MAAM61B,EAAMV,OAAQU,EAAMR,OAAS,IAAI,SAAUr0B,EAAKqoB,GAC5F,OAAOroB,EAAMqoB,IACZ,GACgC+M,EAAe3K,EAAUC,aACrCD,EAAUC,aACjC,OAAOD,EAAUuD,aAAalG,GAkBbuN,CAAmB7hB,EADxBkE,GAAoBlE,GACkBiX,EAAWsJ,IAEtDjE,EAkTSwF,CAAQ9hB,EAhDC,uBAkDvB,OADA4e,GAAgBtC,GACT,CAACA,MAiBNyF,CAAgBppB,GAAOvO,MAAK,SAAUid,GACpC3N,EAAEsoB,QAAuB,SAAbtoB,EAAEuoB,OAVD,SAAU5a,GAC7B,OAAOld,EAAIkd,GAAU,SAAUvR,GAC7B,OAAOA,EAAQtB,IAAI0tB,aAClBxiB,KAAK,IAOgCyiB,CAAe9a,GAfjC,SAAUmX,EAAQnX,GACxC,OAAOld,EAAIkd,GAAU,SAAU1H,GAC7B,OAAO6e,EAAOW,UAAUiD,WAAWC,UAAU1iB,EAAInL,IAAK,OACrDkL,KAAK,IAY2D4iB,CAAkB9D,EAAQnX,QAI1Czf,MAGnD42B,EAAO2B,GAAG,oBAAoB,SAAUzmB,IAClB,IAAhBA,EAAEylB,YAAkC,IAAZzlB,EAAEykB,OACd9yB,EAASC,KAAKkzB,EAAOhqB,IAAI+tB,UAAU/D,EAAOW,UAAUC,WAAY,UACtEh1B,MAAK,SAAUo4B,GACrB,IAAI1jB,EAAOrK,GAAaH,QAAQkuB,GAChCxiB,GAAMlB,GAAM1U,MAAK,SAAU4V,GACzB,IAxKiBrL,EAErBE,EAyK4B8K,EAHpB0H,EAAW7c,GAxKEmK,EAwKgB+E,EAAEsoB,SAtKvCntB,EADeC,SACLC,cAAc,QACxBC,UAAYL,EACT8F,GAAShG,GAAaH,QAAQO,MAoKgB,SAAUmtB,GACrD,MAAyB,SAAlBl7B,GAAKk7B,MAKd,GAAwB,IAApB3a,EAASjf,SAHWuX,EAGa0H,EAAS,GAFvB,UAAdvgB,GAAK6Y,IAEqC,CACjDjG,EAAE0mB,iBACF,IAAI7kB,EAAM9G,GAAaH,QAAQkqB,EAAOiE,UAClCC,EAAavE,GAAM5iB,GACnBonB,EA5DF,SAAU7sB,EAAS8sB,EAAWF,GAC1C,MAAO,CACL5sB,QAASA,EACT8sB,UAAWA,EACXF,WAAYA,GAwDUG,CAAQ/jB,EAAMuI,EAAS,GAAIqb,GACzCzC,EAAQ6C,WAAW9iB,EAAO2iB,GAASv4B,MAAK,SAAU24B,GAChDvE,EAAOW,UAAU6D,OAAOD,EAAKE,KAC7BzE,EAAO0E,QACPhD,EAAciD,MAAMnjB,iBAS9BiO,GAAMH,GAAa,CACrB,CAAE9kB,KAAM,IACR,CAAEo6B,KAAM,CAAC,UACT,CACEjR,KAAM,CACJ,QACA,SAGJ,CACEkR,OAAQ,CACN,OACA,QACA,SAGJ,CACEC,MAAO,CACL,OACA,YAIFC,GAAgBh2B,EAAS,GAAI0gB,IAuC7ByI,GAAQ,SAAU7mB,EAAOsa,EAAKqZ,GAEhC,IADA,IAAIl3B,EAAI,EACCJ,EAAI2D,EAAO3D,EAAIie,EAAKje,IAC3BI,QAAqBhF,IAAhBk8B,EAASt3B,GAAmBs3B,EAASt3B,GAAK,EAEjD,OAAOI,GAuBLm3B,GAA4B,SAAU9gB,EAAW+gB,GACnD,IAAIp7B,EAAM4b,GAAoBvB,GAC9B,OAAOxY,EAAI7B,GAAK,SAAUwW,GACxB,IAAIiT,EAAS2E,GAAM5X,EAAKuB,IAAKvB,EAAKuB,IAAMvB,EAAKtG,QAASkrB,GACtD,MAAO,CACL5tB,QAASgJ,EAAKhJ,QACdic,OAAQA,EACRvZ,QAASsG,EAAKtG,aAyBhBmrB,GAAsB,SAAUhhB,EAAWihB,EAAQ3M,GACrD,IAAI4M,EARY,SAAUlhB,EAAWihB,GACrC,OAAI1f,GAAqBvB,GApCM,SAAUA,EAAWihB,GACpD,IAAIE,EAAS5f,GAAsBvB,GACnC,OAAOxY,EAAI25B,GAAQ,SAAUvjB,EAAQ5F,GACnC,MAAO,CACL7E,QAASyK,EAAOzK,QAChB+e,MAAO+O,EAAOjpB,GACdlC,QAAS8H,EAAO9H,YA+BXsrB,CAA2BphB,EAAWihB,GAhDlB,SAAUjhB,EAAWihB,GAClD,IAAIt7B,EAAM4b,GAAoBvB,GAC9B,OAAOxY,EAAI7B,GAAK,SAAUwW,GACxB,IAAI+V,EAAQ6B,GAAM5X,EAAKyB,OAAQzB,EAAKyB,OAASzB,EAAKrG,QAASmrB,GAC3D,MAAO,CACL9tB,QAASgJ,EAAKhJ,QACd+e,MAAOA,EACPpc,QAASqG,EAAKrG,YA2CTurB,CAAyBrhB,EAAWihB,GAI9BK,CAAYthB,EAAWihB,GACtCx5B,EAAKy5B,GAAU,SAAU/kB,GACvBmY,EAAU0D,gBAAgB7b,EAAKhJ,QAASgJ,EAAK+V,WAG7CqP,GAAc,SAAUlkB,EAAOsU,EAAO3Z,EAAOwpB,EAAUlN,GACzD,IAAItU,EAAYuB,GAAoBlE,GAChC2U,EAAOsC,EAAUuD,aAAalG,GAC9BsP,EAAS3M,EAAUqD,UAAU3X,EAAWsU,GACxCmN,EAAezpB,IAAUgI,EAAUhB,KAAK9B,QAAU,EAClDwkB,EAAcF,EAASG,gBAAgBV,EAAQjpB,EAAOga,EAAMsC,EAAU6C,eAAgBsK,GACtFG,EA3FU,SAAUnP,EAAO7U,EAAQoU,EAAMsC,EAAWuN,GACxD,IAAI3oB,EAASuZ,EAAM5pB,MAAM,GACrBi5B,EApBW,SAAUrP,EAAOza,GAChC,OAAqB,IAAjBya,EAAMhtB,OACDm7B,GAAcv6B,OAEF,IAAjBosB,EAAMhtB,OACDm7B,GAAcH,KAAK,GAEd,IAAVzoB,EACK4oB,GAAcpR,KAAK,EAAG,GAE3BxX,IAAUya,EAAMhtB,OAAS,EACpBm7B,GAAcD,MAAM3oB,EAAQ,EAAGA,GAEpCA,EAAQ,GAAKA,EAAQya,EAAMhtB,OAAS,EAC/Bm7B,GAAcF,OAAO1oB,EAAQ,EAAGA,EAAOA,EAAQ,GAEjD4oB,GAAcv6B,OAIP07B,CAAWtP,EAAO7U,GAC5B2O,EAASrnB,EAASsC,EAAI0R,EAAQhU,EAAS,KAa3C,OAAO48B,EAAQr7B,KAAK8lB,GAZP,SAAUvU,GACrB,OAAOsc,EAAUwD,kBAAkB5e,EAAOlB,GAAQga,MAEvC,SAAUha,EAAOse,GAC5B,OAAOuL,EAAOG,mBAAmB9oB,EAAQlB,EAAOse,EAAMtE,EAAMsC,EAAU6C,eAAgB7C,EAAU8D,eAEnF,SAAUiC,EAAMriB,EAAOse,GACpC,OAAOuL,EAAOI,iBAAiB/oB,EAAQmhB,EAAMriB,EAAOse,EAAMtE,EAAMsC,EAAU6C,eAAgB7C,EAAU8D,eAExF,SAAUiC,EAAMriB,GAC5B,OAAO6pB,EAAOK,oBAAoBhpB,EAAQmhB,EAAMriB,EAAOga,EAAMsC,EAAU6C,eAAgB7C,EAAU8D,eA6EtF+J,CAAUlB,EAAQjpB,EAAO0pB,EAAapN,EAAWkN,GAC1DY,EAAY56B,EAAIo6B,GAAQ,SAAUS,EAAI94B,GACxC,OAAO84B,EAAKpB,EAAO13B,MAErBy3B,GAAoBhhB,EAAWoiB,EAAW9N,GAC1CkN,EAASc,YAAYhO,EAAU2D,iBAAkByJ,EAAaD,IAiC5DlJ,GAAO,SAAUhH,GACnB,OAAO/pB,EAAI+pB,EAAOrsB,EAAS,KAEzBq9B,GAAW,SAAUC,EAAOC,EAAYC,EAAUC,EAASz8B,GAC7D,OAAOA,EAAEs8B,EAAM35B,MAAM,EAAG45B,IAAa78B,OAAO+8B,GAAS/8B,OAAOM,EAAEs8B,EAAM35B,MAAM65B,MAExEE,GAAmB,SAAU3pB,GAC/B,OAAO,SAAUupB,EAAOxqB,EAAO2Z,EAAOkR,GACpC,GAAK5pB,EAAU0Y,GAER,CACL,IAAImC,EAAUzS,KAAKC,IAAIuhB,EAAaL,EAAMxqB,GAASqJ,KAAKmV,IAAI7E,IACxDmR,EAAOzhB,KAAKmV,IAAI1C,EAAU0O,EAAMxqB,IACpC,OAAO2Z,GAAS,EAAImR,GAAQA,EAJ5B,OAAOnR,IAQToR,GAAqBH,IAAiB,SAAUjR,GAClD,OAAOA,EAAQ,KAEbqR,GAAaJ,GAAiBx8B,GAC9Bk8B,GAAc,WAChB,IAOIW,EAAqB,SAAUT,EAAOxqB,EAAO2Z,EAAOkR,GACtD,IAAIK,GAAS,IAAMvR,GAAS,IACxBwR,EAAU9hB,KAAKC,IAAIuhB,GAAcL,EAAMxqB,GAAS2Z,GAASuR,GAC7D,OAAO17B,EAAIg7B,GAAO,SAAUltB,EAAMsK,GAEhC,OADcA,IAAQ5H,EAAQmrB,EAAU7tB,EAAO4tB,GAC9B5tB,MAGjB0sB,EAAqB,SAAUQ,EAAOxqB,EAAOse,EAAM3E,EAAOkR,EAAazK,GACzE,OAAIA,EACK6K,EAAmBT,EAAOxqB,EAAO2Z,EAAOkR,GAjB7B,SAAUL,EAAOxqB,EAAOse,EAAM3E,EAAOkR,GACzD,IAAIO,EAAeL,GAAmBP,EAAOxqB,EAAO2Z,EAAOkR,GAC3D,OAAON,GAASC,EAAOxqB,EAAOse,EAAO,EAAG,CACtC8M,EACA,GACC7K,IAcM8K,CAAgBb,EAAOxqB,EAAOse,EAAM3E,EAAOkR,IAmCtD,MAAO,CACLP,YA9BgB,SAAUgB,EAAS3R,GACnC,OAAO2R,EAAQ3R,IA8BfgQ,gBAAiBoB,GACjBf,mBAAoBA,EACpBC,iBApCqB,SAAUO,EAAOe,EAAOvrB,EAAOse,EAAM3E,EAAOkR,EAAazK,GAC9E,OAAO4J,EAAmBQ,EAAOxqB,EAAOse,EAAM3E,EAAOkR,EAAazK,IAoClE8J,oBA/BwB,SAAUM,EAAOe,EAAOvrB,EAAO2Z,EAAOkR,EAAazK,GAC3E,GAAIA,EACF,OAAO6K,EAAmBT,EAAOxqB,EAAO2Z,EAAOkR,GAE/C,IAAIO,EAAeL,GAAmBP,EAAOxqB,EAAO2Z,EAAOkR,GAC3D,OAAOtK,GAAKiK,EAAM35B,MAAM,EAAGmP,IAAQpS,OAAO,CAACw9B,KA2B7CI,wBAxB4B,SAAUhB,EAAOiB,EAAYC,EAAYtL,GACrE,GAAIA,EAAY,CACd,IACIuL,GADaF,EAAaC,GACHD,EACvBvC,EAAW15B,EAAIg7B,GAAO,SAAUltB,GAClC,OAAOA,EAAOquB,KAEhB,MAAO,CACLhS,MAAiB,IAAVgS,EAAgB,IACvBzC,SAAUA,GAGZ,MAAO,CACLvP,MAAO+R,EACPxC,SAAUsB,MAadoB,GAAgB,WAClB,IAAI5B,EAAqB,SAAUQ,EAAOxqB,EAAOse,EAAM3E,EAAOkR,GAC5D,IACIO,EAAeJ,GAAWR,EADpB7Q,GAAS,EAAI2E,EAAOte,EACY2Z,EAAOkR,GACjD,OAAON,GAASC,EAAOxqB,EAAOse,EAAO,EAAG,CACtC8M,GACCA,GACA7K,KAsCL,MAAO,CACL+J,YAlCgB,SAAUgB,EAAS3R,EAAO8P,GACtCA,GACF6B,EAAQ3R,IAiCVgQ,gBAtBoB,SAAUa,EAAOxqB,EAAO2Z,EAAOkR,EAAapB,GAChE,GAAIA,EAAc,CAChB,GAAI9P,GAAS,EACX,OAAOA,EAEP,IAAIkS,EAAW95B,EAAMy4B,GAAO,SAAU59B,EAAG6D,GACvC,OAAO7D,EAAI6D,EAAIo6B,IACd,GACH,OAAOxhB,KAAKC,KAAKuiB,EAAUlS,GAG7B,OAAOoR,GAAmBP,EAAOxqB,EAAO2Z,EAAOkR,IAYjDb,mBAAoBA,EACpBC,iBAxCqB,SAAUO,EAAOe,EAAOvrB,EAAOse,EAAM3E,EAAOkR,GACjE,OAAOb,EAAmBQ,EAAOxqB,EAAOse,EAAM3E,EAAOkR,IAwCrDX,oBAjCwB,SAAUM,EAAOe,EAAOO,EAAQnS,EAAOoS,EAAc3L,GAC7E,GAAIA,EACF,OAAOG,GAAKiK,GAEZ,IAAIM,EAAOnR,EAAQ6Q,EAAM/8B,OACzB,OAAO+B,EAAIg7B,EAAOt9B,EAAS49B,KA6B7BU,wBAZ4B,SAAUhB,EAAOwB,EAAaC,EAAaC,GACvE,MAAO,CACLvS,MAAO,EACPuP,SAAUsB,MAyCZ2B,GA5BO,SAAUhxB,EAASixB,GAC5B,IAAIhtB,EAAS1O,EAASC,KAAKwK,EAAQtB,IAAIme,iBAAiBxoB,IAAIsK,GAAaH,SAAS7K,MAAMqM,GACxF,MAAO,CACLiE,OAAQlS,EAASkS,GACjBitB,KAAMn/B,EAASiO,GACfmxB,OAAQp/B,EAASyqB,GAAc,EAAG,IAClCyU,YAAaA,IA4BbG,GAAQpZ,GAAa,CACvB,CAAEqZ,QAAS,CAAC,QACZ,CAAEC,OAAQ,CAAC,UACX,CAAEC,QAAS,CAAC,YAEVC,GAAc,SAAUp3B,EAAQ5J,EAAMC,GACxC,IAAIghC,EAAYhhC,EAAMihC,UAAU,EAAGjhC,EAAM6B,OAAS8H,EAAO9H,QACrD0sB,EAAS1E,WAAWmX,GACxB,OAAOA,IAAczS,EAAOlqB,WAAatE,EAAKwuB,GAAUoS,GAAMC,QAAQ5gC,IAWpEkhC,GAAOl6B,EAASA,EAAS,GAAI25B,IAAQ,CAAE57B,KAT9B,SAAU/E,GACrB,OAAI0J,GAAS1J,EAAO,KACX+gC,GAAY,IAAKJ,GAAMG,QAAS9gC,GAErC0J,GAAS1J,EAAO,MACX+gC,GAAY,KAAMJ,GAAME,OAAQ7gC,GAElC2gC,GAAMC,QAAQ5gC,MAmDnBmhC,GAAe,SAAU9D,EAAQwC,EAAYtL,GAC/C,IAAI6M,EAAUF,GAAKn8B,KAAKwvB,GACpB8M,EAASr9B,EAAOq5B,GAAQ,SAAU34B,GACpC,MAAa,QAANA,KAxBa,SAAU48B,EAAchoB,GAC9C,IAAIhX,EAAIg/B,EAAaz+B,MAAK,WACxB,OAAOvB,EAAS,OACf,SAAUu/B,GAEX,OAAOv/B,EADGu/B,EAASvnB,EACG,SACrB,WAED,OAAOhY,EADG,IAAMgY,EACM,QAExB,OAAOzT,EAAMyT,EAAShX,GAejBi/B,CAAkBH,EAAS/D,EAAOx7B,QAbhB,SAAUy/B,EAAcjE,EAAQwC,GACvD,OAAOyB,EAAaz+B,MAAK,WACvB,OAAOw6B,KACN,SAAUnO,GACX,OA7BmB,SAAUmO,EAAQwC,EAAY2B,GACnD,IAAIC,EAAQD,EAAgB3B,EAC5B,OAAOj8B,EAAIy5B,GAAQ,SAAUtf,GAE3B,OADcmjB,GAAKn8B,KAAKgZ,GACTlb,MAAK,WAClB,OAAOkb,KACN,SAAUmR,GACX,OAAOA,EAAKuS,EAAQ,QACnB,SAAUC,GACX,OAAOA,EAAK,IAAMF,EAAgB,WAoB7BG,CAAiBtE,EAAQwC,EAAY3Q,MAC3C,SAAU0S,GACX,OA5CwB,SAAUvE,EAAQwC,GAC5C,OAAOj8B,EAAIy5B,GAAQ,SAAUtf,GAE3B,OADcmjB,GAAKn8B,KAAKgZ,GACTlb,MAAK,WAClB,OAAOkb,KACN,SAAUmR,GAEX,OADYA,EAAK2Q,EAAa,IACf,OACd,SAAU6B,GACX,OAAOA,EAAK,UAmCPG,CAAsBxE,EAAQwC,MAOUiC,CAAmBV,EAAS/D,EAAQwC,GACrF,OAAOkC,GAAUV,IAEfW,GAAM,SAAUC,EAAQzpB,GAC1B,OAAsB,IAAlBypB,EAAOpgC,OACF2W,EAEFxS,EAAMi8B,GAAQ,SAAU1P,EAAM5tB,GACnC,OAAOu8B,GAAKn8B,KAAKJ,GAAG9B,KAAKvB,EAAS,GAAIC,EAAUA,GAAYgxB,IAC3D,IASD2P,GAAM,SAAUliC,EAAOuuB,GACzB,OAAO2S,GAAKn8B,KAAK/E,GAAO6C,KAAKvB,EAAStB,IAAQ,SAAUkvB,GACtD,OAAOA,EAAKX,EAAS,QACpB,SAAUmT,GACX,OAAOA,EAAKnT,EAAS,QAGrBwT,GAAY,SAAUE,GACxB,GAAsB,IAAlBA,EAAOpgC,OACT,OAAOogC,EAET,IAAIE,EAAOn8B,EAAMi8B,GAAQ,SAAU1P,EAAMvyB,GACvC,IAAI4K,EAAOs2B,GAAKn8B,KAAK/E,GAAO6C,MAAK,WAC/B,MAAO,CACL7C,MAAOA,EACPoiC,UAAW,MAEZ,SAAUt8B,GACX,OAzBU,SAAUA,EAAK0rB,GAC7B,IAAI6Q,EAAU5kB,KAAK2S,MAAMtqB,GACzB,MAAO,CACL9F,MAAOqiC,EAsBiB,KArBxBD,UAAWt8B,EAAMu8B,GAqBRC,CAAUx8B,MAChB,SAAUA,GACX,MAAO,CACL9F,MAAO8F,EAAM,IACbs8B,UAAW,MAGf,MAAO,CACLG,OAAQ,CAAC33B,EAAK5K,OAAOgC,OAAOuwB,EAAKgQ,QACjCH,UAAW7P,EAAK6P,UAAYx3B,EAAKw3B,aAElC,CACDG,OAAQ,GACRH,UAAW,IAETr8B,EAAIo8B,EAAKI,OACb,OAAOx8B,EAAEd,MAAM,EAAGc,EAAElE,OAAS,GAAGG,OAAO,CAACkgC,GAAIn8B,EAAEA,EAAElE,OAAS,GAAI4b,KAAK+kB,MAAML,EAAKC,eAE3EK,GAAWvB,GAAKn8B,KAyBhB29B,GAAU,SAAUxS,GACtB,OAAOuS,GAASvS,GAASrtB,KAAKvB,EAAS,MAAOA,EAAS,MAAOA,EAAS,OAErEqhC,GAAiB,SAAUlpB,EAAOmpB,EAAUC,EAAWnS,GACzD,IAAItU,EAAYuB,GAAoBlE,GAChCC,EAAO0C,EAAUra,IACjBqQ,EAAQuL,GAAoBvB,GAC5B9C,EAAUqE,GAAsBvB,GACpCwmB,EAAS/+B,MAAK,SAAU0wB,GACtB,IAAIuO,EAAYJ,GAAQnO,GACpBsL,EAAatV,GAAM9Q,GACnBspB,EAloCW,SAAU3mB,EAAW3C,EAAOiX,GAC7C,OAAOoC,GAAa1W,EAAW3C,EAAOuY,GAASoB,GAAY1C,GAioCzCsS,CAAa5mB,EAAW3C,EAAOiX,GAC3CuS,EAAW9B,GAAa4B,EAAWlD,EAAYtL,GAC/C5W,GAAqBvB,GA7BD,SAAUoiB,EAAWllB,EAASkY,GACxD3tB,EAAKyV,GAAS,SAAUU,EAAQ5F,GAC9B,IAAIka,EAAQ0T,GAAI,CAACxD,EAAUpqB,IAAS0E,MACpCnB,GAAMqC,EAAOzK,QAAS,QAAS+e,EAAQkD,MA2BrC0R,CAAsBD,EAAU3pB,EAASwpB,GArCzB,SAAUtE,EAAWpsB,EAAOof,GAChD3tB,EAAKuO,GAAO,SAAUmG,GACpB,IAAI8kB,EAASmB,EAAUv5B,MAAMsT,EAAKyB,OAAQzB,EAAKrG,QAAUqG,EAAKyB,QAC1D+D,EAAIikB,GAAI3E,EAAQvkB,MACpBnB,GAAMY,EAAKhJ,QAAS,QAASwO,EAAIyT,MAmC/B2R,CAAgBF,EAAU7wB,EAAO0wB,GAEnCnrB,GAAM8B,EAAO,QAAS8a,MAExBsO,EAAUh/B,MAAK,SAAUu/B,GACvB,IAAIC,EAAQX,GAAQU,GAChBE,EAAc5X,GAAMjS,GACpB8pB,EA7mCY,SAAUnnB,EAAW3C,EAAOga,GAC9C,OAAOD,GAAcpX,EAAW3C,EAAOga,EAAWxB,GAASmB,IA4mCxCoQ,CAAcpnB,EAAW3C,EAAO+R,KAjC/B,SAAUiY,EAAY/pB,EAAMtH,EAAOof,GACvD3tB,EAAKuO,GAAO,SAAUmG,GACpB,IAAI4kB,EAAUsG,EAAWx+B,MAAMsT,EAAKuB,IAAKvB,EAAKtG,QAAUsG,EAAKuB,KACzDoQ,EAAI8X,GAAI7E,EAASpkB,MACrBpB,GAAMY,EAAKhJ,QAAS,SAAU2a,EAAIsH,MAEpC3tB,EAAK6V,GAAM,SAAUI,EAAKnU,GACxBgS,GAAMmC,EAAIvK,QAAS,SAAUk0B,EAAW99B,OA4BxC+9B,CADgBvC,GAAaoC,EAAYD,EAAaF,GAC3B1pB,EAAMtH,EAAOixB,GACxC1rB,GAAM8B,EAAO,SAAU2pB,OAGvBO,GApuCkB,SAAUlqB,GAC9B,OAAO8W,GAAY9W,GAAO1V,QAAO,SAAU2N,GACzC,OAAO4d,GAA0B9mB,KAAKkJ,OAmuCtCkyB,GAhuCgB,SAAUnqB,GAC5B,OAAO8W,GAAY9W,GAAO1V,QAAO,SAAU2N,GACzC,OAAO6d,GAAqB/mB,KAAKkJ,OA+tCjCmyB,GA5tCe,SAAUpqB,GAC3B,OAAO8W,GAAY9W,GAAO7W,UA4tCxBkhC,GAAyBrS,GAEzBsS,GAAc,SAAUtqB,GAE1B,OADgBkE,GAAoBlE,GACnB2B,MAGf4oB,GAAQ,SAAUC,GACpB,IAAIC,EAAW,GAyBf,MAAO,CACLpgC,KAzBS,SAAUqgC,GACnB,QAAgBpjC,IAAZojC,EACF,MAAM,IAAI5gC,MAAM,uCAElB2gC,EAAS7+B,KAAK8+B,IAsBdC,OApBW,SAAUD,GACrBD,EAAWjgC,EAAOigC,GAAU,SAAUha,GACpC,OAAOA,IAAMia,MAmBfE,QAhBY,WAEZ,IADA,IAAIx8B,EAAO,GACFlG,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,IACtCkG,EAAKlG,GAAMC,UAAUD,GAEvB,IAAI2iC,EAAQ,GACZzgC,EAAKogC,GAAQ,SAAU1jC,EAAMoF,GAC3B2+B,EAAM/jC,GAAQsH,EAAKlC,MAErB9B,EAAKqgC,GAAU,SAAUC,GACvBA,EAAQG,SAUV7hB,GAAS,SAAU8hB,GAUrB,MAAO,CACLC,SAVavzB,GAAMszB,GAAU,SAAUD,GACvC,MAAO,CACLxgC,KAAMwgC,EAAMxgC,KACZsgC,OAAQE,EAAMF,WAQhBC,QALYpzB,GAAMszB,GAAU,SAAUD,GACtC,OAAOA,EAAMD,aAmCbI,GAAS,SAAU19B,GACrB,OAAOA,EAAI9B,MAAM,GAAGiX,QA6DlBwoB,GAAc,SAAUC,EAAU9zB,GACpC,IAAI+zB,EAAc3gC,EAAO4M,GAAM,SAAUe,GACvC,OAAQtM,EAASq/B,EAAU/yB,MAEzBgzB,EAAY/iC,OAAS,GA5DP,SAAU+iC,GAC5B,MAAM,IAAIrhC,MAAM,gCAAkCkhC,GAAOG,GAAazrB,KAAK,OA4DzE0rB,CAAcD,IAGdE,GAAU,SAAUH,GACtB,OAvCS,SAAUI,EAAmBJ,GACtC,OAKa,SAAUI,EAAmBJ,EAAUj/B,GACpD,GAAwB,IAApBi/B,EAAS9iC,OACX,MAAM,IAAI0B,MAAM,iDAlBH,IACXyhC,EAqBJ,OAnCmB,SAAU5c,EAAOuF,GACpC,IAAK/sB,EAAQ+sB,GACX,MAAM,IAAIpqB,MAAM,8CAAqDoqB,EAAQ,KAE/E9pB,EAAK8pB,GAAO,SAAU3sB,GACpB,IAAKN,EAASM,GACZ,MAAM,IAAIuC,MAAM,aAAevC,EAAI,WAAaonB,EAAQ,gCA2B5D6c,CAAe,WAAYN,GAnBvBK,EAASP,GAoBFE,GAnBAv+B,EAAK4+B,GAAQ,SAAUtgC,EAAGiB,GACnC,OAAOA,EAAIq/B,EAAOnjC,OAAS,GAAK6C,IAAMsgC,EAAOr/B,EAAI,MAE9C9B,MAAK,SAAUwiB,GAClB,MAAM,IAAI9iB,MAAM,cAAgB8iB,EAAI,mDAAqD2e,EAAO7rB,KAAK,MAAQ,SAgBxG,SAAUpI,GACf,IAAI8W,EAAShX,GAAKE,GACJ/M,EAAO2gC,GAAU,SAAUO,GACvC,OAAO5/B,EAASuiB,EAAQqd,OA5Cb,SAAUP,EAAU9zB,GACnC,MAAM,IAAItN,MAAM,sBAAwBkhC,GAAOE,GAAUxrB,KAAK,MAAQ,8CAAgDsrB,GAAO5zB,GAAMsI,KAAK,MAAQ,KA8C5IgsB,CAAWR,EAAU9c,GAEvBkd,EAAkBJ,EAAU9c,GAC5B,IAAIud,EAAcnhC,EAAO0gC,GAAU,SAAU/yB,GAC3C,OAAQlM,EAAK+8B,SAAS1xB,EAAIa,GAAMA,MAKlC,OAHIwzB,EAAYvjC,OAAS,GArCJ,SAAUwjC,EAAWtlC,GAC5C,MAAM,IAAIwD,MAAM,kCAAoCxD,EAAO,WAAa0kC,GAAOY,GAAWlsB,KAAK,MAAQ,eAqCnGmsB,CAAmBF,EAAa1/B,EAAK0iB,OAEhCrX,GA1BFw0B,CAASR,EAAmBJ,EAAU,CAC3ClC,SAAUthC,EACVinB,MAAO,aAoCFxS,CAAK8uB,GAAaC,IAGvBa,GAAWV,GAAQ,CACrB,UACA,UACA,SACA,SAEEW,GAAWX,GAAQ,CACrB,UACA,QACA,OACA,YAEEY,GAAUZ,GAAQ,CACpB,YACA,OACA,OACA,cAyCEa,GAAW,WACb,IATIC,EASAC,GATAD,EAASnjB,GAAO,CAAEqjB,KAAM9B,GAAM,CAAC,WAC5B,CACL+B,QAAS1kC,EACT2kC,MAAO3kC,EACPukC,OAAQA,EAAOpB,WAMbyB,EAxCO,WACX,IAAIC,EAAWphC,EAASrC,OAoBpBmjC,EAASnjB,GAAO,CAAEqjB,KAAM9B,GAAM,CAAC,WACnC,MAAO,CACL+B,QAXY,SAAUzB,EAAO6B,GACZA,EAAK5K,QAAQ+I,GACnBzgC,MAAK,SAAU24B,IATf,SAAU2J,EAAMp+B,GAC3B,IAAIuN,EAAS4wB,EAAStiC,KAAI,SAAUwiC,GAClC,OAAOD,EAAKE,QAAQD,EAAKr+B,MAG3B,OADAm+B,EAAWphC,EAASR,KAAKyD,GAClBuN,GAKQgxB,CAAOH,EAAM3J,GACnB34B,MAAK,SAAUwiB,GACpBuf,EAAOvB,QAAQyB,KAAKzf,UAOxB2f,MAtBU,WACVE,EAAWphC,EAASrC,QAsBpBmjC,OAAQA,EAAOpB,UAeC+B,GACdC,EAAYX,EAehB,MAAO,CACLjM,GAfO,WACP4M,EAAUR,QACVQ,EAAYP,GAcZQ,IAZQ,WACRD,EAAUR,QACVQ,EAAYX,GAWZa,KANS,WACT,OAAOF,IAAcP,GAMrBF,QAVY,SAAUzB,EAAO6B,GAC7BK,EAAUT,QAAQzB,EAAO6B,IAUzBP,OAAQK,EAAYL,SA8EpBe,GAAe,SAAUC,GAC3B,IAvxIsBC,EAAIC,EAuxItB78B,EAASiE,GAAaH,QApvGC,SAAUu2B,GACrC,GAAI5vB,MAAiBzT,EAAcqjC,EAAMr6B,QAAS,CAChD,IAAI+L,EAAK9H,GAAaH,QAAQu2B,EAAMr6B,QACpC,GAAI6I,GAAUkD,IAYT/U,EAZiC+U,EAYX/H,IAAI84B,aAXzBzC,EAAM0C,UAAY1C,EAAM2C,aAAc,CACxC,IAAIA,EAAe3C,EAAM2C,eACzB,GAAIA,EACF,OAAOrgC,EAAKqgC,IAKpB,OAAOniC,EAASC,KAAKu/B,EAAMr6B,QAwuGOi9B,CAAuBN,GAAU1jC,MAAM0jC,EAAS38B,SAC9E2J,EAAO,WACT,OAAOgzB,EAASO,mBAEdC,EAAU,WACZ,OAAOR,EAAS/M,kBAEdwN,GA9xIkBR,EA8xIHO,EA9xION,EA8xIElzB,EA7xIrB,WAEL,IADA,IAAI/L,EAAO,GACFlG,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,IACtCkG,EAAKlG,GAAMC,UAAUD,GAEvB,OAAOklC,EAAGC,EAAG7kC,MAAM,KAAM4F,MAyxI3B,OApBY,SAAUoC,EAAQ/J,EAAGmP,EAAGuE,EAAMwzB,EAASC,EAAMnvB,GACzD,MAAO,CACLjO,OAAQA,EACR/J,EAAGA,EACHmP,EAAGA,EACHuE,KAAMA,EACNwzB,QAASA,EACTC,KAAMA,EACNnvB,IAAKA,GAYAovB,CAAQr9B,EAAQ28B,EAASW,QAASX,EAASY,QAAS5zB,EAAMwzB,EAASC,EAAMT,IAiB9ExC,GAAS,SAAU70B,EAAS+0B,EAAOH,EAASsD,GAC9Cl4B,EAAQtB,IAAIy5B,oBAAoBpD,EAAOH,EAASsD,IAG9CE,GAAWnlC,EACXolC,GAAS,SAAUr4B,EAAS+0B,EAAOH,GACrC,OATW,SAAU50B,EAAS+0B,EAAOrgC,EAAQkgC,GAC7C,OANW,SAAU50B,EAAS+0B,EAAOrgC,EAAQkgC,EAASsD,GACtD,IAAII,EARO,SAAU5jC,EAAQkgC,GAC7B,OAAO,SAAUyC,GACX3iC,EAAO2iC,IACTzC,EAAQwC,GAAaC,KAKXkB,CAAO7jC,EAAQkgC,GAE7B,OADA50B,EAAQtB,IAAI85B,iBAAiBzD,EAAOuD,EAASJ,GACtC,CAAErD,OAAQ5iC,EAAM4iC,GAAQ70B,EAAS+0B,EAAOuD,EAASJ,IAGjDO,CAAOz4B,EAAS+0B,EAAOrgC,EAAQkgC,GAAS,GAQxC8D,CAAO14B,EAAS+0B,EAAOqD,GAAUxD,IAEtC+D,GAAiBvB,GAwBjBwB,GAAW,SAAU54B,GACvB,YAAiCxO,IAA1BwO,EAAQtB,IAAIm6B,WAKjBC,GAAQ,SAAU94B,EAAS+4B,GAC7B,OAzBU,SAAU/4B,EAAS6H,EAAMhV,GACnC,IACI2F,EANK,SAAUwH,EAAS6H,GAC5B,IAAIpX,EAAQ6W,GAAMtH,EAAS6H,GAC3B,YAAiBrW,IAAVf,GAAiC,KAAVA,EAAe,GAAKA,EAAMuoC,MAAM,KAGpDC,CAAKj5B,EAAS6H,GACXpV,OAAO,CAACI,IAErB,OADAsU,GAAInH,EAAS6H,EAAMrP,EAAGoR,KAAK,OACpB,EAqBAsvB,CAAMl5B,EAAS,QAAS+4B,IAM7BI,GAAQ,SAAUn5B,EAAS+4B,GACzBH,GAAS54B,GACXA,EAAQtB,IAAIm6B,UAAUlG,IAAIoG,GAE1BD,GAAM94B,EAAS+4B,IAkBfK,GAAQ,SAAUp5B,EAAS+4B,GAC7B,OAAOH,GAAS54B,IAAYA,EAAQtB,IAAIm6B,UAAU9iC,SAASgjC,IAGzDzwB,GAAM,SAAU+wB,GAClB,IAAIC,EAAgBD,EAAUhgC,QAAQ,MAAO,KAI7C,MAAO,CAAEugB,QAHK,SAAU/f,GACtB,OAAOy/B,EAAgB,IAAMz/B,KAK7B6Y,GAASpK,GAAI,kBACbsR,GAAUlH,GAAOkH,QA8DjB2f,GAAYtD,GAAS,CACvBa,QApCY,SAAUD,EAAKr+B,GAC3B,OAAOgkB,GAAchkB,EAAG6jB,KAAOwa,EAAIxa,KAAM7jB,EAAG8jB,IAAMua,EAAIva,MAoCtD0P,QAlCc,SAAU+I,GACxB,OAAOx/B,EAASR,KAAKynB,GAAcuY,EAAMpkC,EAAGokC,EAAMj1B,KAkClD05B,KA7BS,SAAUC,EAASC,GAC5B,IAAIC,EAnCQ,SAAUC,GACtB,IAAIF,EAAWjiC,EAAS,CAAEoiC,WAAYjgB,GAAQ,YAAcggB,GACxD76B,EAAMJ,GAAaY,QAAQ,OAiB/B,OAhBA4H,GAAIpI,EAAK,OAAQ,gBACjBsJ,GAAStJ,EAAK,CACZ+6B,SAAU,QACVzd,KAAM,MACNC,IAAK,MACLyC,MAAO,OACP9C,OAAQ,SAEVkd,GAAMp6B,EAAK6a,GAAQ,YACnBuf,GAAMp6B,EAAK26B,EAASG,YAOb,CACL75B,QAPY,WACZ,OAAOjB,GAOPg7B,QALY,WACZnoB,GAAS7S,KAkBGi7B,CAAQN,GAClBO,EAAQ5B,GAAOsB,EAAQ35B,UAAW,YAAay5B,EAAQS,WACvDC,EAAM9B,GAAOsB,EAAQ35B,UAAW,UAAWy5B,EAAQW,MACnDC,EAAQhC,GAAOsB,EAAQ35B,UAAW,YAAay5B,EAAQlD,MACvD+D,EAAOjC,GAAOsB,EAAQ35B,UAAW,WAAYy5B,EAAQc,WAczD,OAAOrE,GAAS,CACdl2B,QAAS25B,EAAQ35B,QACjBjG,MARU,SAAUkK,GACpB+M,GAAO/M,EAAQ01B,EAAQ35B,YAQvBqE,KANS,WACTuN,GAAS+nB,EAAQ35B,YAMjB+5B,QAjBY,WACZJ,EAAQI,UACRI,EAAItF,SACJwF,EAAMxF,SACNyF,EAAKzF,SACLoF,EAAMpF,aAmBR9N,OAjCW,SAAUyT,EAAUn/B,GAC/Bm/B,EAASzT,OAAO1rB,EAAKghB,KAAMhhB,EAAKihB,QA2C9Bme,GAAwB,SAAU5wB,GACpC,MAAyC,SAAlCvC,GAAMuC,EAAK,oBAMhB6wB,GAAWpyB,GAAI,iBACfqyB,GAAYD,GAAS9gB,QA8ErBghB,GAAYD,GAAU,eACtBE,GAAeF,GAAU,gBACzBG,GAAeH,GAAU,gBA0BzBZ,GAAU,SAAUgB,GACtB,IAAIpE,EAAWvwB,GAAc20B,EAAK92B,SAAU,IAAM22B,IAClDtmC,EAAKqiC,EAAU/kB,KAEbopB,GAAU,SAAUD,EAAMtc,EAAWvL,GACvC,IAAIie,EAAS4J,EAAK5J,SAClB78B,EAAKmqB,GAAW,SAAUwc,GACxBA,EAAS3mC,MAAK,SAAU4mC,GACtB,IAAIC,EAAMjoB,EAAOie,EAAQ+J,GACzB/B,GAAMgC,EAAKP,IACX5pB,GAAO+pB,EAAK92B,SAAUk3B,UAkBxBC,GAAc,SAAUC,EAAUN,EAAM7wB,EAAOC,EAAM8B,GACvD,IAAI6tB,EAAWpd,GAASxS,GACpB+mB,EAAc8J,EAAK9J,YACnBqK,EAAenxB,EAAK7X,OAAS,EAAI2pB,GAAOwC,UAAUtU,EAAMD,GAAS,GACjEqxB,EAAmBD,EAAahpC,OAAS,EAxD3B,SAAUua,EAAWokB,GACvC,OAAO18B,EAAKsY,EAAUra,KAAK,SAAU+X,EAAKnU,GACxC,OAAO66B,EAAY1mB,EAAIvK,SAAW,CAAC5J,GAAK,MAsDOolC,CAAcH,EAAUpK,GAAe,IAXzE,SAAU8J,EAAMO,EAAcxB,EAAU2B,GACvDT,GAAQD,EAAMO,GAAc,SAAUnK,EAAQ+J,GAC5C,IAAIQ,EAnEE,SAAUllC,EAAG7F,EAAGmP,EAAG0O,EAAGmM,GAC9B,IAAIwgB,EAAMx8B,GAAaY,QAAQ,OAY/B,OAXA8I,GAAS8yB,EAAK,CACZrB,SAAU,WACVzd,KAAM1rB,EAAI,KACV2rB,IAAKxc,EAAI6a,IAAQ,KACjBsB,OAAQtB,MACRoE,MAAOvQ,EAAI,OAEbpH,GAAO+zB,EAAK,CACV,WAAY3kC,EACZ,KAAQ,iBAEH2kC,EAsDQ5wB,CAAI2wB,EAAG3wB,IAAKuvB,EAASzd,KAAO8U,EAAO9U,KAAM6e,EAAGp7B,EAAIqxB,EAAO7U,IAAKmf,GAEzE,OADAtC,GAAMuC,EAAQb,IACPa,KAaTC,CAAWZ,EALiBrmC,EAAO4mC,GAAc,SAAUM,EAAMxlC,GAC/D,OAAO5B,EAAO+mC,GAAkB,SAAUM,GACxC,OAAOzlC,IAAMylC,QAGuB/B,EAAUlf,GAAS1Q,IAC3D,IAAI4xB,EAAe7vB,EAAK3Z,OAAS,EAAIysB,GAAMN,UAAUxS,EAAM/B,GAAS,GAChE6xB,EAAmBD,EAAaxpC,OAAS,EA3DxB,SAAUua,EAAWokB,GAC1C,IAAI+K,EAAgB,GASpB,OARA1lC,EAAMuW,EAAUhB,KAAK9B,SAAS,SAAUlF,GACtBuJ,GAAsBvB,EAAWhI,GAAOxQ,KAAI,SAAU+mB,GACpE,OAAOA,EAAIpb,WAECvL,OAAOw8B,IACnB+K,EAAclmC,KAAK+O,MAGhBnQ,EAAOsnC,GAAe,SAAUxuB,GACrC,IAAIgW,EAAcpV,GAAsBvB,GAAW,SAAU7D,GAC3D,OAAOA,EAAKyB,SAAW+C,KAEzB,OAAO/Y,EAAO+uB,GAAa,SAAUxa,GACnC,OAAOioB,EAAYjoB,EAAKhJ,eA4CqBi8B,CAAiBZ,EAAUpK,GAAe,IA1B5E,SAAU8J,EAAMe,EAAchC,EAAUoC,GACvDlB,GAAQD,EAAMe,GAAc,SAAU3K,EAAQ+J,GAC5C,IA3EgBzwB,EAAQ9Z,EAAGmP,EAAM6a,EAC/BwgB,EA0EEgB,GA3EY1xB,EA2ECywB,EAAG9f,IA3EIzqB,EA2ECuqC,EAAGvqC,EAAIwgC,EAAO9U,KA3EZvc,EA2EkBg6B,EAASxd,IAAM6U,EAAO7U,IA3ElC3B,EA2EsDuhB,EA1ErFf,EAAMx8B,GAAaY,QAAQ,OAC/B8I,GAAS8yB,EAAK,CACZrB,SAAU,WACVzd,KAAM1rB,EAAI6d,IAAQ,KAClB8N,IAAKxc,EAAI,KACTmc,OAAQtB,EAAI,KACZoE,MAAOvQ,QAETpH,GAAO+zB,EAAK,CACV,cAAe1wB,EACf,KAAQ,iBAEH0wB,GAgEL,OADAhC,GAAMgD,EAAQrB,IACPqB,KA4BTC,CAAWrB,EALiBrmC,EAAOonC,GAAc,SAAUF,EAAMxlC,GAC/D,OAAO5B,EAAOunC,GAAkB,SAAUF,GACxC,OAAOzlC,IAAMylC,QAGuB/B,EAAU1d,GAAWlS,KAE3DmyB,GAAU,SAAUtB,EAAM7wB,GAE5B,GADA6vB,GAAQgB,GACJA,EAAK9J,YAAY/mB,GAAQ,CAC3B,IAAI2C,EAAYuB,GAAoBlE,GAChCC,EAAOW,GAAO+B,GACdZ,EAAOgP,GAAUpO,GACrBuuB,GAAYvuB,EAAWkuB,EAAM7wB,EAAOC,EAAM8B,KAG1CqwB,GAAS,SAAUvB,EAAMhoC,GAC3B,IAAIwpC,EAAOn2B,GAAc20B,EAAK92B,SAAU,IAAM22B,IAC9CtmC,EAAKioC,EAAMxpC,IAETypC,GAAO,SAAUzB,GACnBuB,GAAOvB,GAAM,SAAUI,GACrB/yB,GAAM+yB,EAAK,UAAW,YAGtBsB,GAAO,SAAU1B,GACnBuB,GAAOvB,GAAM,SAAUI,GACrB/yB,GAAM+yB,EAAK,UAAW,aAUtBuB,GAAoB/B,GAAU,wBAC9BgC,GAAa,SAAU5B,GACzB,IAAIP,EAxKY,WAChB,IAAInE,EAASnjB,GAAO,CAClB0pB,KAAMnI,GAAM,CACV,SACA,SACA,aAGA/5B,EAASnF,EAASrC,OAClB2pC,EAzBS,WACb,IAAIxG,EAASnjB,GAAO,CAClB0pB,KAAMnI,GAAM,CACV,SACA,aAMJ,MAAO,CACL1N,OAJW,SAAUp2B,EAAGmP,GACxBu2B,EAAOvB,QAAQ8H,KAAKjsC,EAAGmP,IAIvBu2B,OAAQA,EAAOpB,UAaF6H,GAYf,OAXAD,EAASxG,OAAOuG,KAAKroC,MAAK,SAAUwgC,GAClCr6B,EAAOpG,MAAK,SAAU5D,GACpB2lC,EAAOvB,QAAQ8H,KAAK7H,EAAMgI,OAAQhI,EAAMiI,OAAQtsC,SAS7C,CACLiH,OAPW,SAAUjH,GACrBgK,EAASnF,EAASR,KAAKrE,IAOvB0G,IALQ,WACR,OAAOsD,GAKPqsB,OAAQ8V,EAAS9V,OACjBsP,OAAQA,EAAOpB,UA+IFgI,GACX5O,EA3MU,SAAUmM,EAAUd,GAKlC,YAJiB,IAAbA,IACFA,EAAW,IA3PH,SAAUc,EAAU5D,EAAM8C,GACpC,IA1LqBxnC,EACjBgrC,EAyLAC,GAAS,EACT9G,EAASnjB,GAAO,CAClBnZ,MAAO06B,GAAM,IACbpwB,KAAMowB,GAAM,MAEV2I,EAAWhH,KACXgE,EAAO,WACTZ,EAAKn1B,OACD+4B,EAASjG,SACXiG,EAASlG,MACTb,EAAOvB,QAAQzwB,SAGfg5B,GAvMiBnrC,EAuMMkoC,EAtMvB8C,EAAQ,KAoBL,CACLI,OApBW,WACG,OAAVJ,IACFK,aAAaL,GACbA,EAAQ,OAkBVM,SAfa,WAEb,IADA,IAAIllC,EAAO,GACFlG,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,IACtCkG,EAAKlG,GAAMC,UAAUD,GAET,OAAV8qC,GACFK,aAAaL,GAEfA,EAAQO,YAAW,WACjBvrC,EAAGQ,MAAM,KAAM4F,GACf4kC,EAAQ,OAqLqB,QAUjCE,EAAS/G,OAAOE,KAAKhiC,MAAK,SAAUwgC,GAClC6B,EAAK7P,OAAOyT,EAAUzF,EAAM15B,SAE9B,IAMIqiC,EAAc,SAAU3qC,GAC1B,OAAO,WAEL,IADA,IAAIuF,EAAO,GACFlG,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,IACtCkG,EAAKlG,GAAMC,UAAUD,GAEnB+qC,GACFpqC,EAAEL,MAAM,KAAM4F,KAIhBkhC,EAAO5C,EAAK4C,KAAKrD,GAAQ,CAC3B+D,UAAWE,EACXA,KAAMsD,EAAYtD,GAClB7D,KAAMmH,GA3BQ,SAAU3I,GACxBsI,EAAcC,SACdF,EAAS5G,QAAQzB,EAAO6B,MA0BxB2D,UAAWmD,EAAYL,EAAcG,YACnC9D,GAIJ,MAAO,CACL15B,QAASw5B,EAAKx5B,QACd29B,GAxCO,SAAU15B,GACjBu1B,EAAKz/B,MAAMkK,GACXm5B,EAAS/S,KACTgM,EAAOvB,QAAQ/6B,SAsCfswB,GA7BO,WACP8S,GAAS,GA6BTjG,IA3BQ,WACRiG,GAAS,GA2BTpD,QARY,WACZP,EAAKO,WAQL1D,OAAQA,EAAOpB,UAmMV2I,CAAMpD,OADgBhpC,IAAlBkoC,EAAS9C,KAAqB8C,EAAS9C,KAAO2C,GAC5BG,GAsMdmE,CAAUrD,EAAU,IAC/BsD,EAAavoC,EAASrC,OACtB6qC,EAAa,SAAU/9B,EAASxP,GAClC,OAAO+E,EAASC,KAAK8R,GAAMtH,EAASxP,KAEtCgqC,EAASnE,OAAOuG,KAAKroC,MAAK,SAAUwgC,GAClCgJ,EAAWhJ,EAAMr6B,OAAQ,YAAYpG,MAAK,SAAU0pC,GAClD,IAAIC,EAAa30B,GAAYyrB,EAAMr6B,OAAQ,OAC3C0N,GAAM2sB,EAAMr6B,OAAQ,MAAOujC,EAAalJ,EAAMiI,OAAS,SAEzDe,EAAWhJ,EAAMr6B,OAAQ,eAAepG,MAAK,SAAU4pC,GACrD,IAAIC,EAAa70B,GAAYyrB,EAAMr6B,OAAQ,QAC3C0N,GAAM2sB,EAAMr6B,OAAQ,OAAQyjC,EAAapJ,EAAMgI,OAAS,YAG5D,IAAIqB,EAAW,SAAU1jC,EAAQ2jC,GAG/B,OAFW/0B,GAAY5O,EAAQ2jC,GACpBt1B,GAAarO,EAAQ,gBAAkB2jC,EAAK,IAGzDhQ,EAASgI,OAAOhyB,KAAK9P,MAAK,WACxBimC,EAASpjC,MAAM9C,MAAK,SAAUoG,GAC5BojC,EAAWxpC,MAAK,SAAU4V,GACxB6zB,EAAWrjC,EAAQ,YAAYpG,MAAK,SAAUiW,GAC5C,IAAIiU,EAAQ4f,EAAS1jC,EAAQ,OAC7B+M,GAAO/M,EAAQ,oBACf27B,EAAOvB,QAAQwJ,aAAap0B,EAAOsU,EAAOtV,SAASqB,EAAK,QAE1DwzB,EAAWrjC,EAAQ,eAAepG,MAAK,SAAUmW,GAC/C,IAAI+T,EAAQ4f,EAAS1jC,EAAQ,QAC7B+M,GAAO/M,EAAQ,qBACf27B,EAAOvB,QAAQ1G,YAAYlkB,EAAOsU,EAAOtV,SAASuB,EAAQ,QAE5D4xB,GAAQtB,EAAM7wB,YAIpB,IAAI0qB,EAAU,SAAUl6B,EAAQ2jC,GAC9BhI,EAAOvB,QAAQyJ,cACf/D,EAAS7iC,OAAO+C,GAChByM,GAAIzM,EAAQ,gBAAkB2jC,EAAK/0B,GAAY5O,EAAQ2jC,IACvDlF,GAAMz+B,EAAQgiC,IACdt0B,GAAM1N,EAAQ,UAAW,OACzB2zB,EAASsP,GAAG5C,EAAK92B,WAEfu6B,EAAYnG,GAAO0C,EAAK92B,SAAU,aAAa,SAAU8wB,GAvDhD,IAAU/0B,IAwDR+0B,EAAMr6B,OAvDd0+B,GAAMp5B,EAAS66B,KAwDlBjG,EAAQG,EAAMr6B,OAAQ,OAtDb,SAAUsF,GACvB,OAAOo5B,GAAMp5B,EAAS86B,IAuDhB2D,CAAS1J,EAAMr6B,SACjBk6B,EAAQG,EAAMr6B,OAAQ,WAGtB0J,EAAS,SAAUR,GACrB,OAAOnD,GAAKmD,EAAGm3B,EAAK7J,SAOlBwN,EAAYrG,GAAO0C,EAAK7J,OAAQ,aAAa,SAAU6D,GAL5B,IAAUr6B,KAMdq6B,EAAMr6B,OALxBsM,GAAUtM,EAAQ,QAAS0J,GAAQ1P,QAAO,SAAUwV,GACzD,OA1P2B,SAAUxP,EAAQ0J,GACjD,OAAO4C,GAAUtM,EAAQ,oBAAqB0J,GAyPnCu6B,CAA2Bz0B,EAAO9F,GAAQ5P,OAAOimC,QAInBnnC,MAAK,WACtCgS,GAAOyvB,EAAMr6B,SACfq/B,GAAQgB,MAET,SAAU7wB,GACX4zB,EAAavoC,EAASR,KAAKmV,GAC3BmyB,GAAQtB,EAAM7wB,SAYdmsB,EAASnjB,GAAO,CAClBorB,aAAc7J,GAAM,CAClB,QACA,QACA,QAEFrG,YAAaqG,GAAM,CACjB,QACA,QACA,WAEF8J,YAAa9J,GAAM,MAErB,MAAO,CACLsF,QAvBc,WACdyE,EAAU3J,SACV6J,EAAU7J,SACVxG,EAAS0L,UACTA,GAAQgB,IAoBRsB,QAlBc,SAAUuC,GACxBvC,GAAQtB,EAAM6D,IAkBdvU,GAAIgE,EAAShE,GACb6M,IAAK7I,EAAS6I,IACd2H,SAAU5sC,EAAMuqC,GAAMzB,GACtB+D,SAAU7sC,EAAMwqC,GAAM1B,GACtB1E,OAAQA,EAAOpB,WA8Cf8J,GA1CW,SAAUhE,EAAM1M,EAAU2Q,GACvC,IAAIC,EAAahjB,GACbijB,EAAangB,GACbogB,EAAUxC,GAAW5B,GACrB1E,EAASnjB,GAAO,CAClBksB,aAAc3K,GAAM,CAClB,QACA,SAEF4K,YAAa5K,GAAM,CACjB,QACA,SAEF6K,UAAW7K,GAAM,MAoBnB,OAlBA0K,EAAQ9I,OAAOiI,aAAa/pC,MAAK,SAAUwgC,GACzC,IAAI7qB,EAAQ6qB,EAAM7qB,MAClBmsB,EAAOvB,QAAQsK,aAAal1B,EAAO,OAlrCpB,SAAUA,EAAOsU,EAAO3Z,EAAOqf,GAChD,IAAIrX,EAAYuB,GAAoBlE,GAChC0jB,EAzvBgB,SAAU/gB,EAAW3C,EAAOga,GAChD,OAAOD,GAAcpX,EAAW3C,EAAOga,EAAWpC,IAAa,SAAUgC,GACvE,OAAOA,EAAQlwB,WAAW4V,OAuvBd+1B,CAAgB1yB,EAAW3C,EAAOga,GAC5CgQ,EAAa7/B,EAAIu5B,GAAS,SAAU4R,EAAIppC,GAC1C,OAAOyO,IAAUzO,EAAI8X,KAAKC,IAAIqQ,EAAQghB,EAAIh2B,MAAeg2B,KAEvDC,EAAe9R,GAA0B9gB,EAAWqnB,GACpDwL,EA/Ce,SAAU7yB,EAAW+gB,GACxC,OAAOv5B,EAAIwY,EAAUra,KAAK,SAAU+X,EAAKnU,GACvC,MAAO,CACL4J,QAASuK,EAAIvK,QACbic,OAAQ2R,EAAQx3B,OA2CFupC,CAAe9yB,EAAWqnB,GAC5C5/B,EAAKorC,GAAa,SAAUn1B,GAC1B4V,GAAU5V,EAAIvK,QAASuK,EAAI0R,WAE7B3nB,EAAKmrC,GAAc,SAAUz2B,GAC3BmX,GAAUnX,EAAKhJ,QAASgJ,EAAKiT,WAE/B,IAAI2E,EA5CGnqB,EA4CWy9B,GA5CI,SAAU5+B,EAAG7D,GACjC,OAAO6D,EAAI7D,IACV,GA2CH0uB,GAAUjW,EAAO0W,GAqqCf0d,CAAap0B,EADD+0B,EAAWzgB,MAAMuW,EAAMvW,MAAOtU,GACf6qB,EAAMxqB,IAAK00B,GACtC5I,EAAOvB,QAAQuK,YAAYn1B,EAAO,UAEpCi1B,EAAQ9I,OAAOkI,YAAYhqC,MAAK,SAAUqrC,GACxCvJ,EAAOvB,QAAQwK,eAEjBH,EAAQ9I,OAAOjI,YAAY75B,MAAK,SAAUwgC,GACxC,IAAI7qB,EAAQ6qB,EAAM7qB,MAClBmsB,EAAOvB,QAAQsK,aAAal1B,EAAO,OACnC,IAAIsU,EAAQ0gB,EAAW1gB,MAAMuW,EAAMvW,MAAOtU,GACtCiX,EAAY6d,EAAW90B,GAC3BkkB,GAAYlkB,EAAOsU,EAAOuW,EAAMtqB,OAAQ4jB,EAAUlN,GAClDkV,EAAOvB,QAAQuK,YAAYn1B,EAAO,UAE7B,CACLmgB,GAAI8U,EAAQ9U,GACZ6M,IAAKiI,EAAQjI,IACb2H,SAAUM,EAAQN,SAClBC,SAAUK,EAAQL,SAClB/E,QAASoF,EAAQpF,QACjB1D,OAAQA,EAAOpB,WAKf4K,GAAa,SAAUnX,EAAQne,GACjC,OAAOme,EAAOoX,KAAK,SAAU,CAAErhC,KAAM8L,KAEnCw1B,GAAc,SAAUrX,EAAQ1f,GAClC,OAAO0f,EAAOoX,KAAK,UAAW,CAAErhC,KAAMuK,KA6BpCg3B,GAAoB,SAAUtX,EAAQxe,EAAO+iB,GAC/CvE,EAAOoX,KAAK,gBAAiBroC,EAASA,EAAS,GAAIw1B,GAAO,CAAE/iB,MAAOA,MAEjE+1B,GAAgB,CAClBC,WAAW,EACXn4B,OAAO,GAELo4B,GAAoB,CACtBD,WAAW,EACXn4B,OAAO,GAILq4B,GAAgB,CAClB,kBAAmB,WACnB,MAAS,QAcPC,GAAoB,CAAEC,OAAQ,KAC9BC,GAAiC,gBACjCC,GAAqB,SAAU9X,GACjC,OAAOA,EAAO+X,SAAS,oBAAqB,SAE1CC,GAAwB,SAAUhY,GACpC,OAAOA,EAAO+X,SAAS,2BAErBE,GAAuB,SAAUjY,GACnC,OAAOA,EAAO+X,SAAS,2BAA4BJ,GAAmB,WAEpEO,GAAmB,SAAUlY,GAC/B,OAAOA,EAAO+X,SAAS,uBAxBI,SAAU/X,GACrC,GAAImY,GAAenY,GAAS,CAC1B,IAAIoY,EAAcpY,EAAO9iB,UAAUmV,YACnC,OAAOtjB,EAASA,EAAS,GAAI2oC,IAAgB,CAAErhB,MAAO+hB,EAAc,OAC/D,OAAIC,GAAmBrY,GACrB7mB,GAASu+B,IAAe,SAAUY,EAAQ3+B,GAC/C,MAAe,UAARA,KAGF+9B,GAesCa,CAAuBvY,GAAS,WAQ7EwY,GAAqB,SAAUxY,GACjC,OAAOA,EAAO+X,SAAS,qBAAqB,EAAM,YAEhDU,GAAoB,SAAUzY,GAChC,OAAOA,EAAO+X,SAAS,oBAAoB,EAAM,YAE/CW,GAAsB,SAAU1Y,GAClC,OAAOA,EAAO+X,SAAS,gBAAgB,EAAM,YAQ3CY,GAAqB,SAAU3Y,GACjC,OAAOA,EAAO+X,SAAS,sBAAsB,EAAO,YAWlDa,GAAsB,SAAU5Y,GAClC,MAAsC,aAA/B8X,GAAmB9X,KAA4D,IAAlCgY,GAAsBhY,IAExEmY,GAAiB,SAAUnY,GAC7B,MAAsC,UAA/B8X,GAAmB9X,KAAyD,IAAlCgY,GAAsBhY,IAErEqY,GAAqB,SAAUrY,GACjC,MAAsC,eAA/B8X,GAAmB9X,IAKxB6Y,GAAiB,SAAU7Y,GAC7B,OAAOA,EAAO+X,SAAS,uBAAuB,EAAO,YAEnDe,GAAqB,SAAU9Y,GACjC,IAAI+Y,EAAe,UACfhxC,EAAQi4B,EAAO+X,SAAS,oBAAqBgB,EAAc,UAO/D,OAAK1rC,EANa,CAChB,UACA,QACA,eACA,QAEyBtF,GAGlBA,EAFAgxC,GAKPC,GAA6B,SAAUhZ,GACzC,IAIIiZ,EAAYjZ,EAAO+X,SAAS,wBAAyBF,GAAgC,UACzF,OAAO1pC,EALU,CACf,gBACA,gBAGsB,SAAU+/B,GAChC,OAAOA,IAAS+K,KACfhuC,MAAM4sC,KAEPqB,GAAgC,SAAUlZ,GAC5C,MAA8C,kBAAvCgZ,GAA2BhZ,IAEhCmZ,GAA8B,SAAUnZ,GAC1C,MAA8C,gBAAvCgZ,GAA2BhZ,IAEhCoZ,GAAmB,SAAUpZ,GAC/B,IAAIqZ,EAAgBrZ,EAAO+X,SAAS,wBACpC,OAAItvC,EAAS4wC,GACJxsC,EAASR,KAAKgtC,EAAc/I,MAAM,SAChCpoC,MAAMS,QAAQ0wC,GAChBxsC,EAASR,KAAKgtC,GAEdxsC,EAASrC,QAQhB8uC,GAAQ,SAAUtZ,EAAQxe,GAC5B,GAAIo3B,GAAoB5Y,GAAS,CAC/B,IAAI3J,EAAQiK,GAAcN,EAAQxe,EAAMxL,KAAKhK,OAAOy0B,IAAcv1B,YAAW,WAC3E,OAAO2gC,GAAuBrqB,MAEhC,OAAOib,GAAyBpG,EAAO7U,GAClC,OAAI22B,GAAenY,GACjBvD,GAAoBnK,GAAM9Q,GAAQA,GAElCib,GAAuBjb,IAI9B+3B,GAA0B,SAAUjiC,GACtCyH,GAAOzH,EAAS,UAuBdkiC,GAAoB,SAAUxZ,EAAQxe,IArBf,SAAUA,EAAOiX,GAC1C,IAAI6D,EAAW9C,GAAqBhY,GACpCkpB,GAAelpB,EAAO3U,EAASR,KAAKiwB,GAAWzvB,EAASrC,OAAQiuB,GAChE8gB,GAAwB/3B,GAoBxBi4B,CAAqBj4B,EADH83B,GAAMtZ,EAAQxe,KAG9Bk4B,GAAgB,SAAU1Z,EAAQxe,IApBb,SAAUA,EAAOiX,GACxC,IAAI6D,EAtvEmB,SAAU9a,GACjC,OAAO8Q,GAAM9Q,GAAS,KAqvEPm4B,CAAmBn4B,GAClCkpB,GAAelpB,EAAO3U,EAASR,KAAKiwB,GAAWzvB,EAASrC,OAAQiuB,GAChE8gB,GAAwB/3B,GAmBxBo4B,CAAmBp4B,EADD83B,GAAMtZ,EAAQxe,KAG9Bq4B,GAnBoB,SAAUr4B,GAChCtB,GAASsB,EAAO,SAChB,IAAI+Q,EAAYlR,GAAQG,GACpBs4B,EAAcvnB,EAAU3oB,OAAS,EAAI2oB,EAAYpY,GAAMqH,GAC3D5V,EAAKkuC,GAAa,SAAUx5B,GAC1BJ,GAASI,EAAM,SACfi5B,GAAwBj5B,MAE1Bi5B,GAAwB/3B,IA6CtBu4B,GAAmB,OACnBxR,GAAc,SAAUpnB,GAC1B,MAAyC,UAAlCvC,GAAMuC,EAAK,oBAEhB64B,GAAmB,SAAUha,GAC/B,IAGIia,EACAC,EAJAC,EAAettC,EAASrC,OACxBw7B,EAASn5B,EAASrC,OAClB6nC,EAAOxlC,EAASrC,OAGhB4vC,EAAU,SAAUj5B,GACtB,MAAwB,UAAjBA,EAAIzG,UAET2/B,EAAa,WACf,OAAOrU,GAKLsQ,EAAa,SAAU90B,GACzB,OAAO83B,GAAMtZ,EAAQxe,IAEnB84B,EAAwB,WAC1B,OAAOpB,GAA8BlZ,GAAU+H,KAAkBtB,MAqGnE,OApEAzG,EAAO2B,GAAG,QAAQ,WAChB,IAAI4Y,EAlEI,SAAUva,EAAQuI,GAC5B,OAAOvI,EAAOwa,OA/vCH,SAAUC,EAAUnoC,EAAQi2B,GACvC,MAAO,CACLhtB,OAAQlS,EAASiJ,GACjBk2B,KAAMn/B,EAASoxC,GACfhS,OAAQp/B,EAASyqB,GAAc,EAAG,IAClCyU,YAAaA,GA0vCQD,CAAgBvI,GAAUC,IAb7C/T,EAAYhW,GAAaY,QAAQ,OACrC8I,GAASsM,EAAW,CAClBmlB,SAAU,SACV7d,OAAQ,IACR8C,MAAO,IACPqkB,QAAS,IACTC,OAAQ,IACR/C,OAAQ,MAEVtvB,GAj9HOpL,GAAQjH,GAAaH,QAAQQ,WAi9HrB2V,GACRA,GAGsEsc,GAAeD,GAAgBryB,GAAaH,QAAQkqB,EAAOiE,UAAWsE,GAd/H,IAChBtc,EA8EY2uB,CAAM5a,EAAQuI,IAE5B,GADA8J,EAAOxlC,EAASR,KAAKkuC,GA9ID,SAAUva,GAChC,IAAI6a,EAAiB7a,EAAO+X,SAAS,mBAAmB,GACxD,OAAOtvC,EAASoyC,GAAqC,UAAnBA,EAA6BA,EA6IzDC,CAAkB9a,IAxOD,SAAUA,GACjC,OAAOA,EAAO+X,SAAS,qBAAqB,EAAM,WAuOfgD,CAAmB/a,GAAS,CAC3D,IAAI2F,EAAW2U,IACXU,EAAK3E,GAAmBkE,EAAS5U,EAAU2Q,GAC/C0E,EAAGrZ,KACHqZ,EAAGrN,OAAOiJ,UAAU/qC,MAAK,SAAUqrC,GACjCiD,EAAettC,EAASR,KAAK2zB,EAAOW,UAAUsa,aAEhDD,EAAGrN,OAAO+I,aAAa7qC,MAAK,SAAUwgC,GACpC,IAAI6O,EAAW7O,EAAM7qB,MAAMxL,KAtTP,SAAUgqB,EAAQhuB,EAAQqkB,EAAO9C,EAAQkV,GACnEzI,EAAOoX,KAAK,oBAAqB,CAC/BplC,OAAQA,EACRqkB,MAAOA,EACP9C,OAAQA,EACRkV,OAAQA,IAkTJ0S,CAAsBnb,EAAQkb,EAAUjb,GAAgBib,GAAWhb,GAAegb,GAAWnB,GAAmB1N,EAAMvkC,SAExHkzC,EAAGrN,OAAOgJ,YAAY9qC,MAAK,SAAUwgC,GACnC,IAAI7qB,EAAQ6qB,EAAM7qB,MACd05B,EAAW15B,EAAMxL,IACrBoqB,GAAgB5e,GAChB24B,EAAavuC,MAAK,SAAU64B,GAC1BzE,EAAOW,UAAU6D,OAAOC,GACxBzE,EAAO0E,WAvTO,SAAU1E,EAAQhuB,EAAQqkB,EAAO9C,EAAQkV,GAC/DzI,EAAOoX,KAAK,gBAAiB,CAC3BplC,OAAQA,EACRqkB,MAAOA,EACP9C,OAAQA,EACRkV,OAAQA,IAoTJ2S,CAAkBpb,EAAQkb,EAAUjb,GAAgBib,GAAWhb,GAAegb,GAAWnB,GAAmB1N,EAAMvkC,MAClHk4B,EAAOqb,YAAYpR,SAErBjE,EAASn5B,EAASR,KAAK2uC,OAG3Bhb,EAAO2B,GAAG,qBAAqB,SAAUzmB,GACvC,IAAIogC,EAAYpgC,EAAElJ,OAClB,GAAIooC,EAAQkB,GAAY,CACtB,IAAI95B,EAAQvL,GAAaH,QAAQwlC,GACjC1vC,EAAKo0B,EAAOhqB,IAAIulC,OAAO,yBAAyB,SAAUt8B,GACxD+gB,EAAOhqB,IAAIwlC,SAASv8B,EAAO,OAAS+5B,GAA2BhZ,GAAU,gBAEtE2L,GAAgBnqB,IAAU22B,GAAenY,GAC5C0Z,GAAc1Z,EAAQxe,IACZkqB,GAAkBlqB,IAAUo3B,GAAoB5Y,IAC1DwZ,GAAkBxZ,EAAQxe,GAExBoqB,GAAepqB,IAAUjQ,GAAW2J,EAAEutB,OAAQsR,KAChDP,GAAkBxZ,EAAQxe,GAE5By4B,EAAS/+B,EAAEmb,MACX6jB,EAAY7B,GAAmBrY,GAAU,GAAKM,GAAcN,EAAQsb,GAAWrwC,MAAM,QAGzF+0B,EAAO2B,GAAG,iBAAiB,SAAUzmB,GACnC,IAAIogC,EAAYpgC,EAAElJ,OAClB,GAAIooC,EAAQkB,GAAY,CACtB,IAAI95B,EAAQvL,GAAaH,QAAQwlC,GAC7BG,EAAWvgC,EAAEutB,OACbl3B,GAAWkqC,EAAU,YAhFL,SAAUj6B,EAAOinB,EAAQpS,GAC/C,IAAIqlB,EAAoBjqC,GAASg3B,EAAQ,KAIzC,GAHkB,KAAdyR,GACFV,GAAkBxZ,EAAQxe,GAExB6U,IAAU4jB,GAAwB,KAAdC,EAAkB,CACxCx6B,GAAM8B,EAAO,QAAS04B,GACtB,IAAIvU,EAAW2U,IACX7hB,EAAY6d,EAAW90B,GACvBkR,EAAMwmB,GAA8BlZ,IAAW0b,EAZnC,SAAUl6B,GAC5B,OAAOsqB,GAAYtqB,GAAOH,QAW+Cs6B,CAAcn6B,GAAS,EAAI,EAClGkkB,GAAYlkB,EAAO6U,EAAQ4jB,EAAQvnB,EAAKiT,EAAUlN,QAC7C,GAAIgI,GAAayZ,GAAY,CAClC,IAAI0B,EAAWhqB,WAAWsoB,EAAUvpC,QAAQ,IAAK,KAEjD+O,GAAM8B,EAAO,QADQ6U,EAAQulB,EAAW3B,EACD,MA5wD/B,SAAUlyC,GACtB,MAAO,oBAAoBwI,KAAKxI,IA6wD1B8zC,CAAQ3B,IA7EC,SAAU14B,GACzB,IAAI2C,EAAYuB,GAAoBlE,GAC/BkE,GAAqBvB,IACxBvY,EAAKuO,GAAMqH,IAAQ,SAAUlB,GAC3B,IAAIw7B,EAAgBj8B,GAAMS,EAAM,SAChCZ,GAAMY,EAAM,QAASw7B,GACrB/8B,GAAOuB,EAAM,YAwEby7B,CAAWv6B,GAgETw6B,CAAkBx6B,EAAOi6B,EAAUvgC,EAAEmb,OAEvC+J,GAAgB5e,GAChB81B,GAAkBtX,EAAQxe,EAAMxL,IAAKuhC,QAGzCvX,EAAO2B,GAAG,cAAc,WACtB0Y,IAAazuC,MAAK,SAAUo6B,GACtBhG,EAAOkO,KAAK+N,aACdjW,EAAOmQ,WAEPnQ,EAAOoQ,iBAIN,CACLiE,WAAYA,EACZ6B,SA9Ga,WACb,OAAO7J,EAAKpnC,MAAMq9B,GAAgBryB,GAAaH,QAAQkqB,EAAO9iB,WAAYqrB,MA8G1E8I,QA/EY,WACZrL,EAAOp6B,MAAK,SAAUovC,GACpBA,EAAG3J,aAELgB,EAAKzmC,MAAK,SAAUka,IA1DT,SAAUka,EAAQqS,GAC3BrS,EAAOwa,QACTtxB,GAASmpB,EAAK92B,UAyDZ4gC,CAASnc,EAAQla,SA8EnBs2B,GAAQ,SAAU9kC,EAAS+kC,GAC7B,MAAO,CACL/kC,QAASA,EACT+kC,OAAQA,IAIRnS,GAAO,SAAU3e,EAAUjU,EAASkkB,GACtC,OAAIjQ,EAAS/L,WAAW1E,OAAOxD,IAAmE,IAAvDiU,EAAS/L,WAAWqL,QAAQvT,GAAS3F,OAAO/H,QAAgB2hB,EAAS/L,WAAW5E,UAAUtD,GAC5HkkB,EAAUlkB,GAASzL,MAAK,SAAU4L,GACvC,OAAOyyB,GAAK3e,EAAU9T,EAAM+jB,GAAW9vB,SAAQ,WAC7C,OAAOmB,EAASR,KAAKoL,SAIlB5K,EAASrC,QAGhB8xC,GAAQ,SAAU/wB,EAAUjU,GAC9B,OAAIiU,EAAS/L,WAAW1E,OAAOxD,GACtBiU,EAAS/L,WAAWqL,QAAQvT,GAAS1N,OAE/B2hB,EAAS/L,WAAWvD,SAAS3E,GAC5B1N,QAEd2yC,GAAc,SAAUhxB,EAAUjU,GACpC,IAAItG,EAAYk5B,GAAK3e,EAAUjU,EAASiU,EAAShW,QAAQuG,aAAa7Q,MAAMqM,GAC5E,GAAIiU,EAAS/L,WAAW1E,OAAO9J,GAC7B,OAAOorC,GAAMprC,EAAWsrC,GAAM/wB,EAAUva,IAE1C,IAAIiL,EAAWsP,EAAS/L,WAAWvD,SAASjL,GAC5C,OAAOiL,EAASrS,OAAS,EAAI2yC,GAAYhxB,EAAUtP,EAASA,EAASrS,OAAS,IAAMwyC,GAAMprC,EAAWsrC,GAAM/wB,EAAUva,KAGnHwrC,GAAgBD,GAEhBE,GAAa7yB,KAKb8yB,GAAQ,SAAUC,EAAMhyB,GAEV,IADFlK,GAAQk8B,EAAM,YAz+ER,SAAUr8B,GAE9B,OADYgY,GAAYhY,GACXzU,MAAK,SAAUia,GAC1B,OApKkB8Q,EAoKL9Q,EApKY82B,EAoKT,CACd,QACA,WACA,SAtKQ/vC,EAASC,KAAK6pB,GAAQmC,KAAKlC,IAC1B/qB,MAAK,SAAU6pB,GAC1B,IAAI3tB,EAAQ2I,OAAOglB,EAAM,IACrBmnB,EAAUnnB,EAAM,GACpB,OAZS,SAAU6D,EAAMqjB,GAC3B,OAAO9wC,EAAO8wC,GAAU,SAAU5uC,GAChC,OAAOlC,EAAOyqB,GAAMvoB,IAAM,SAAU8uC,GAClC,OAAOvjB,IAASujB,QASdC,CAAOF,EAASD,GACX/vC,EAASR,KAAK,CACnBtE,MAAOA,EACPwxB,KAAMsjB,IAGDhwC,EAASrC,UAXV,IAAUosB,EAAOgmB,KA4oFbI,CAAgBL,GACtB/wC,MAAK,SAAUka,GACnB,IAAIwW,EAAWxW,EAAE/d,MAAQ,EACzBuxB,GAAgBqjB,EAAMrgB,EAAUxW,EAAEyT,MAClCD,GAAgB3O,EAAO2R,EAAUxW,EAAEyT,UAKrC0jB,GAAW,SAAU3lC,EAASkI,EAAUzX,EAAOm1C,GAC7Cn1C,IAAUm1C,EACZn+B,GAAOzH,EAASkI,GAEhBf,GAAInH,EAASkI,EAAUzX,IAGvBsiB,GAAS,SAAU7I,EAAOjK,EAAUD,GACtC1I,EAAK4O,GAAWgE,EAAOjK,IAAW3M,MAAK,WACrC,OAAO2d,GAAQ/G,EAAOlK,MACrB,SAAU4E,GACX,OAAOuG,GAAMvG,EAAO5E,OAkBpB6lC,GAAS,SAAU37B,EAAO2B,GAC5B,IAAIi6B,EAAU,GACV16B,EAAW,GACX26B,EAAW,SAAUC,GACvB,OAAO3xC,EAAI2xC,GAAa,SAAUz7B,GAC5BA,EAAIvH,OACN8iC,EAAQhwC,KAAKyU,EAAIvK,SAEnB,IAAIimC,EAAK17B,EAAIvK,QAUb,OATAyR,GAAMw0B,GACN3xC,EAAKiW,EAAI1H,OAAO,SAAUmG,GACpBA,EAAKhG,OACPoI,EAAStV,KAAKkT,EAAKhJ,SAErB2lC,GAAS38B,EAAKhJ,QAAS,UAAWgJ,EAAKrG,QAAS,GAChDgjC,GAAS38B,EAAKhJ,QAAS,UAAWgJ,EAAKtG,QAAS,GAChDsO,GAAOi1B,EAAIj9B,EAAKhJ,YAEXimC,MAGPC,EAAe,SAAUF,GAC3B,OAAOzxC,EAAKyxC,GAAa,SAAUG,GACjC,OAAO9xC,EAAI8xC,EAAStjC,OAAO,SAAUuY,GAEnC,OADAuqB,GAASvqB,EAAIpb,QAAS,OAAQob,EAAIzY,QAAS,GACpCyY,EAAIpb,eAIbomC,EAAgB,SAAUJ,EAAaK,GACzC,IAAIvjC,EA7Cc,SAAUoH,EAAOm8B,GACrC,IAAIvjC,EAAU6D,GAAQuD,EAAOm8B,GAAazyC,YAAW,WACnD,IAAI0yC,EAAa3nC,GAAaY,QAAQ8mC,EAAaxiC,GAAMqG,GAAOxL,KAQhE,MAPoB,UAAhB2nC,EACFtzB,GAAO7I,EAAO,mBAAoBo8B,GACT,aAAhBD,EACTtzB,GAAO7I,EAAO,UAAWo8B,GAEzBt1B,GAAO9G,EAAOo8B,GAETA,KAGT,OADA70B,GAAM3O,GACCA,EAgCSyjC,CAAgBr8B,EAAOm8B,GAEjCG,GADuB,aAAhBH,EAA6BH,EAAeH,GAC/BC,GACxBx0B,GAAS1O,EAAS0jC,IAKhBC,EAAwB,SAAUT,EAAaK,GAC7CL,EAAY1zC,OAAS,EACvB8zC,EAAcJ,EAAaK,GALX,SAAUA,GAC5B1/B,GAAQuD,EAAOm8B,GAAa/xC,KAAKsd,IAM/B80B,CAAcL,IAGdM,EAAc,GACdC,EAAc,GACdC,EAAc,GACdC,EAAsB,GAqB1B,OApBAxyC,EAAKuX,GAAM,SAAUtB,GACnB,OAAQA,EAAIzH,SACZ,IAAK,QACH6jC,EAAY7wC,KAAKyU,GACjB,MACF,IAAK,QACHq8B,EAAY9wC,KAAKyU,GACjB,MACF,IAAK,QACHs8B,EAAY/wC,KAAKyU,GACjB,MACF,IAAK,WACHu8B,EAAoBhxC,KAAKyU,OAI7Bk8B,EAAsBK,EAAqB,YAC3CL,EAAsBE,EAAa,SACnCF,EAAsBG,EAAa,SACnCH,EAAsBI,EAAa,SAC5B,CACLf,QAASA,EACT16B,SAAUA,IAwBV27B,GAAW,SAAU/wC,EAAIgxC,GAC3B,GAAkB,IAAdhxC,EAAG1D,OACL,OAAO,EAET,IAAIge,EAAQta,EAAG,GAIf,OAHYgB,EAAUhB,GAAI,SAAUrF,GAClC,OAAQq2C,EAAK12B,EAAMtQ,QAASrP,EAAEqP,YAEnB1M,MAAK,WAChB,OAAO0C,EAAG1D,UACT,SAAUijB,GACX,OAAOA,MAcP0xB,GAAY,SAAUp7B,EAAMyC,GAC9B,IAAI44B,EAAO7yC,EAAIwX,GAAM,SAAUtB,GAC7B,OAAOlW,EAAIkW,EAAI1H,MAAO7P,MASxB,OAAOqB,EAAIwX,GAAM,SAAUtB,EAAKmb,GAU9B,OA58IuByhB,EAm8IT5yC,EAAKgW,EAAI1H,OAAO,SAAUmG,EAAMuE,GAC5C,IAAoC,IAAhC25B,EAAKxhB,GAAUnY,GAAwB,CACzC,IAAIxH,EAzBE,SAAU8F,EAAMtB,EAAKE,EAAQ6D,GACzC,IAAI84B,EAlBO,SAAUv7B,EAAMhH,GAC3B,OAAOgH,EAAKhH,GAiBIwiC,CAAOx7B,EAAMtB,GAAK1H,MAAMnN,MAAM+U,GAC1C68B,EAAcP,GAASK,EAAW94B,GAClCi5B,EAzBU,SAAU17B,EAAMhH,GAC9B,OAAOxQ,EAAIwX,GAAM,SAAUtB,GACzB,OAAOkB,GAAQlB,EAAK1F,MAuBH2iC,CAAU37B,EAAMpB,GAAQ/U,MAAM6U,GAEjD,MAAO,CACL5H,QAAS2kC,EACT5kC,QAHgBqkC,GAASQ,EAAcj5B,IAqBtBm5B,CAAQ57B,EAAM6Z,EAAUnY,EAAae,GAElD,OAZW,SAAUoX,EAAUnY,EAAa7K,EAASC,GACzD,IAAK,IAAI4H,EAAMmb,EAAUnb,EAAMmb,EAAWhjB,EAAS6H,IACjD,IAAK,IAAIE,EAAS8C,EAAa9C,EAAS8C,EAAc5K,EAAS8H,IAC7Dy8B,EAAK38B,GAAKE,IAAU,EAQpBi9B,CAAWhiB,EAAUnY,EAAaxH,EAAOrD,QAASqD,EAAOpD,SAClD,EAr/IW3C,EAq/IAgJ,EAAKhJ,QAr/II0C,EAq/IKqD,EAAOrD,QAr/IHC,EAq/IYoD,EAAOpD,QAr/IVK,EAq/ImBgG,EAAKhG,MAp/IpE,CACLhD,QAASA,EACT0C,QAASA,EACTC,QAASA,EACTK,MAAOA,KAk/IH,MAAO,GAv/IC,IAAUhD,EAAS0C,EAASC,EAASK,KA8CjBF,EA48ILyH,EAAIzH,QA38I1B,CACLqkC,QAASA,EACTrkC,QAASA,GAHI,IAAUqkC,EAASrkC,MA+8IhC6kC,GAAS,SAAU96B,EAAW+f,EAAY5pB,GAC5C,IAAI6I,EAAO,GACX,GAAIuC,GAAqBvB,GAAY,CACnC,IAAI+6B,EAAkBvzC,EAAI+Z,GAAsBvB,IAAY,SAAUpC,GACpE,OAAO1H,GAAW0H,EAAOzK,QAASgD,GAAO,MAE3C6I,EAAK/V,KAAKoN,GAAS0kC,EAAiB,aAEtC,IAAK,IAAIliB,EAAW,EAAGA,EAAW7Y,EAAUhB,KAAK1B,KAAMub,IAAY,CAEjE,IADA,IAAImiB,EAAW,GACNt6B,EAAc,EAAGA,EAAcV,EAAUhB,KAAK9B,QAASwD,IAAe,CAC7E,IAAIvN,EAAUoO,GAAgBvB,EAAW6Y,EAAUnY,GAAalZ,KAAI,SAAUga,GAC5E,OAAOtL,GAAWsL,EAAKrO,QAASgD,EAAOqL,EAAKpL,aAC3CrP,YAAW,WACZ,OAAOmP,GAAW6pB,EAAWxE,OAAO,GAAM,MAE5Cyf,EAAS/xC,KAAKkK,GAEhB,IAAIuK,EAAMrH,GAAS2kC,EAAUh7B,EAAUra,IAAIkzB,GAAU5iB,SACrD+I,EAAK/V,KAAKyU,GAEZ,OAAOsB,GAuBLi8B,GAAe,SAAUj8B,EAAM+gB,GAEjC,OAnBe,SAAUmb,EAAUnb,GAYnC,OAAOv4B,EAAI0zC,GAAU,SAAUZ,GAC7B,IAAI58B,EAZQ,SAAU48B,GAOtB,OANiB5vC,EAAQ4vC,GAAS,SAAU1kC,GAC1C,OAAOwB,GAAOxB,EAAOzC,SAAS3L,KAAI,SAAUkW,GAC1C,IAAIvH,EAAQiB,GAAOsG,GAAKlX,SACxB,OAAO0P,GAAWwH,EAAKvH,GAAO,SAGhBpP,YAAW,WAC3B,OAAOmP,GAAW6pB,EAAWriB,OAAO,GAAM,MAIlCy9B,CAAQb,EAAQA,SAC1B,OAtgJa,SAAUnnC,EAAS6C,EAAOC,EAASE,GAClD,MAAO,CACLhD,QAASA,EACT6C,MAAOA,EACPC,QAASA,EACTE,MAAOA,GAigJAilC,CAAW19B,EAAIvK,QAASmnC,EAAQA,QAASA,EAAQrkC,QAASyH,EAAIvH,UAKhEklC,CADQjB,GAAUp7B,EAAMpL,IACHmsB,IAE1Bub,GAAkB,SAAUt7B,EAAW7M,GACzC,OAAOzI,EAAQsV,EAAUra,KAAK,SAAUgE,GACtC,OAAOK,EAAKL,EAAEqM,OAAO,SAAUe,GAC7B,OAAOnD,GAAKT,EAAS4D,EAAE5D,gBAIzBooC,GAAe,SAAUv7B,EAAWnS,EAAQoL,GAC9C,IAAIqhC,EAAU9yC,EAAIqG,EAAO2uB,WAAW,SAAUgf,GAC5C,OAAOr/B,GAAKq/B,GAAQ9zC,MAAK,SAAU+zC,GACjC,OAAOH,GAAgBt7B,EAAWy7B,MACjC5zC,OAAOoR,MAERjD,EAAQqX,GAAIitB,GAChB,OAAOhtB,GAAOtX,EAAMvQ,OAAS,EAAGuQ,IAE9B0lC,GAAM,SAAUC,EAAWxc,EAASyc,EAAYC,EAAYC,GAC9D,OAAO,SAAU5N,EAAM7wB,EAAOxP,EAAQkyB,EAAYgc,EAAQC,GACxD,IAAIh8B,EAAYuB,GAAoBlE,GAapC,OAZa8hB,EAAQnf,EAAWnS,GAAQrG,KAAI,SAAUgH,GACpD,IAAIytC,EA5CU,SAAUj8B,EAAW+f,GACvC,OAAO+a,GAAO96B,EAAW+f,GAAY,GA2CrBmc,CAAcl8B,EAAW+f,GACjC7mB,EAASyiC,EAAUM,EAAOztC,EAAMoF,GAAMkoC,EAAY/b,IAClD3f,EAAgBX,GAAyBvG,EAAO8F,MAEpD,MAAO,CACLxQ,KAAMA,EACNwQ,KAHSi8B,GAAa/hC,EAAO8F,KAAM+gB,GAInCoc,OAAQjjC,EAAOijC,OACf/7B,cAAeA,MAGL1Y,MAAK,SAAU00C,GAC3B,IAAIC,EAAcrD,GAAO37B,EAAO++B,EAAIp9B,MAChCs9B,EAAc5zC,EAASC,KAAKozC,GAAQh1C,YAAW,WACjD,OAAOuxB,GAAuBjb,MAE5BmkB,EAAW94B,EAASC,KAAKqzC,GAAiBj1C,WAAW68B,IAQzD,OAPAgY,EAAWv+B,EAAO++B,EAAIp9B,KAAMo9B,EAAI5tC,KAAM8tC,EAAa9a,GACnDqa,EAAWx+B,GACXmyB,GAAQtB,EAAM7wB,GACdzC,GAAOyC,EAAOgC,IACV+8B,EAAIh8B,cAAc3a,OAAS,GAC7B6U,GAAI+C,EAAOgC,GAAiB+8B,EAAIh8B,cAAcrD,KAAK,MAE9CrU,EAASR,KAAK,CACnBi0C,OAAQC,EAAID,OACZlD,QAASoD,EAAYpD,QACrB16B,SAAU89B,EAAY99B,gBAK1Bg+B,GAAS,SAAUv8B,EAAWnS,GAChC,OAAOsO,GAAKtO,EAAOsF,SAASzL,MAAK,SAAUyU,GACzC,OAAOm/B,GAAgBt7B,EAAW7D,OAclCqgC,GAAkB,SAAUx8B,EAAWnS,GACzC,OAAO0tC,GAAav7B,EAAWnS,EAAQzH,GAAQoB,KAAI,SAAUwO,GAC3D,MAAO,CACLA,MAAOA,EACP+pB,WAAYlyB,EAAOkyB,WACnBE,UAAWpyB,EAAOoyB,eAUpBwc,GAAU,SAAUz8B,EAAWnS,GACjC,OAAO0tC,GAAav7B,EAAWnS,EAAQzH,IAErCs2C,GAAiB,SAAU18B,EAAWnS,GACxC,OAAO0uC,GAAOv8B,EAAWnS,GAAQhG,QAAO,SAAU+N,GAChD,OAAQA,EAAOQ,aAGfumC,GAAkB,SAAU38B,EAAWnS,GACzC,OAAO0tC,GAAav7B,EAAWnS,GAAQ,SAAU+H,GAC/C,OAAQA,EAAOQ,aAQfwmC,GAAc,SAAU58B,EAAWhK,GACrC,OAAOpO,EAAOoO,GAAO,SAAUmG,GAC7B,OAPsB,SAAU6D,EAAW7D,GAC7C,OAAOm/B,GAAgBt7B,EAAW7D,GAAMxU,QAAO,SAAUiO,GACvD,OAAQA,EAAOQ,YAKRymC,CAAoB78B,EAAW7D,OAGtC2gC,GAAqB,SAAU98B,EAAWnS,GAC5C,OA9Be,SAAUkvC,EAAYlvC,GACrC,OAAOA,EAAOivB,SA6BPkgB,CAAWh9B,EAAWnS,GAAQhG,QAAO,SAAUo1C,GACpD,OAAOL,GAAY58B,EAAWi9B,EAAUjnC,WAGxCknC,GAAuB,SAAUl9B,EAAWnS,GAC9C,OAhCiB,SAAUkvC,EAAYlvC,GACvC,OAAOA,EAAO8uB,WA+BPwgB,CAAan9B,EAAWnS,GAAQhG,QAAO,SAAUmO,GACtD,OAAO4mC,GAAY58B,EAAWhK,OAkB9BonC,GAAU,SAAUp+B,EAAMnR,EAAQ4T,EAAY47B,GAGhD,IAFA,IAAI//B,EAAOyB,GAAmBC,GAAM1B,KAChCmG,GAAQ,EACHla,EAAI,EAAGA,EAAI+T,EAAK7X,OAAQ8D,IAC/B,IAAK,IAAI8B,EAAI,EAAGA,EAAIyT,GAAWxB,EAAK,IAAKjS,IAAK,CAC5C,IAAIqS,EAAMJ,EAAK/T,GACX+zC,EAAc1+B,GAAQlB,EAAKrS,GAE3BkyC,EAAc97B,EADG67B,EAAYnqC,QACYtF,IACzB,IAAhB0vC,IAAkC,IAAV95B,EAC1B/E,GAAWhB,EAAKrS,EAAG6K,GAAWmnC,KAAgB,EAAMC,EAAYlnC,YACvC,IAAhBmnC,IACT95B,GAAQ,GAId,OAAOzE,GAoDLpb,GAAQ,SAAU2C,GAkCpB,MAAO,CACLK,GAlCO,SAAU2B,GACjB,OAAOhC,IAAMgC,GAkCbi1C,QAASp3C,EACTq3C,QAASt3C,EACTW,MAAO5B,EAASqB,GAChBQ,WAAY7B,EAASqB,GACrBU,SAAU/B,EAASqB,GACnBe,GArCO,SAAUo2C,GACjB,OAAO95C,GAAM2C,IAqCbgB,QAnCY,SAAUo2C,GACtB,OAAO/5C,GAAM2C,IAmCbE,KArBS,SAAUm3C,EAAGC,GACtB,OAAOA,EAAQt3C,IAqBfiB,IAlCQ,SAAUtB,GAClB,OAAOtC,GAAMsC,EAAEK,KAkCfu3C,SAhCa,SAAUH,GACvB,OAAO/5C,GAAM2C,IAgCbkB,KA9BS,SAAUvB,GACnBA,EAAEK,IA8BFmB,KA5BS,SAAUxB,GACnB,OAAOA,EAAEK,IA4BToB,OAvBW,SAAUzB,GACrB,OAAOA,EAAEK,IAuBTqB,OArBW,SAAU1B,GACrB,OAAOA,EAAEK,IAqBTw3C,WAnBe,WACf,OAAOr1C,EAASR,KAAK3B,MAqBrBkM,GAAQ,SAAUurC,GAyBpB,MAAO,CACLp3C,GAAIT,EACJq3C,QAASr3C,EACTs3C,QAASr3C,EACTU,MAAO3B,EACP4B,WA7Be,SAAUb,GACzB,OAAOA,KA6BPe,SA3Ba,WACb,OA1oLgBC,EA0oLL9C,OAAO45C,GAzoLb,WACL,MAAM,IAAI72C,MAAMD,OAFV,IAAUA,GAqqLhBI,GAzBO,SAAU2f,GACjB,OAAOA,GAyBP1f,QAvBY,SAAUrB,GACtB,OAAOA,KAuBPO,KAZS,SAAUw3C,EAASL,GAC5B,OAAOK,EAAQD,IAYfx2C,IAtBQ,SAAUm2C,GAClB,OAAOlrC,GAAMurC,IAsBbF,SApBa,SAAU53C,GACvB,OAAOuM,GAAMvM,EAAE83C,KAoBfv2C,KAAMxC,EACNyC,KAnBS,SAAUi2C,GACnB,OAAOlrC,GAAMurC,IAmBbr2C,OAAQxB,EACRyB,OAAQxB,EACR23C,WAAYr1C,EAASrC,OAQrB63C,GAAS,CACXt6C,MAAOA,GACP6O,MAAOA,GACP0rC,WARe,SAAUl3B,EAAKm3B,GAC9B,OAAOn3B,EAAIxgB,MAAK,WACd,OAAOgM,GAAM2rC,KACZx6C,MAqBDy6C,GAAe,SAAUC,EAAOC,GAGlC,MAAO,CACLC,SAAU,EACVC,SAJe3/B,GAAWw/B,EAAM,IACjBx/B,GAAWy/B,EAAM,MAMhCG,GAAgB,SAAUJ,EAAOC,GAGnC,MAAO,CACLC,SAHeF,EAAM74C,OACN84C,EAAM94C,OAGrBg5C,SAAU,IAGVE,GAAmB,SAAUxsB,EAAQzU,EAAKqiB,EAAY3pB,GACxD,IAAIwoC,EAA4B,aAAhBlhC,EAAIzH,QAAyB8pB,EAAWxR,IAAMwR,EAAW5jB,KACzE,OAAO1S,EAAM0oB,GAAQ,SAAUvS,GAC7B,OAAO1J,GAAW0oC,KAAa,EAAMxoC,EAASwJ,QAG9Ci/B,GAAU,SAAU7/B,EAAMmT,EAAQ4N,EAAY3f,GAChD,OAAOpB,EAAKpZ,OAAO6D,EAAM0oB,GAAQ,WAC/B,IAAIzU,EAAMsB,EAAKA,EAAKvZ,OAAS,GACzBif,EAAWi6B,GAAiBjhC,EAAI1H,MAAMvQ,OAAQiY,EAAKqiB,GAAY,SAAUngB,GAC3E,OAAOnK,GAAI2K,EAAeR,EAAI3X,eAEhC,OAAOuW,GAASd,EAAKgH,QAGrBo6B,GAAU,SAAU9/B,EAAMmT,EAAQ4N,EAAY0C,GAChD,OAAOj7B,EAAIwX,GAAM,SAAUtB,GACzB,IAAIqhC,EAAcJ,GAAiBxsB,EAAQzU,EAAKqiB,EAAY55B,GAC5D,OAAO+X,GAASR,EAAK+kB,EAAYsc,OAWjCC,GAAS,SAAUV,EAAO3sB,EAAOoO,GACnC,IAAIkf,EAAWttB,EAAM8sB,SAAW,EAAIK,GAAU35C,EAC1C+5C,EAAWvtB,EAAM6sB,SAAW,EAAIK,GAAU15C,EAC1Cib,EAAgBX,GAAyB6+B,GACzCa,EAAYrgC,GAAWw/B,EAAM,IAC7Bc,EAAkBz3C,EAAOyY,GAAe,SAAUT,GACpD,OAAOA,IAAWw/B,EAAY,KAE5BE,EAAeJ,EAASX,EAAOj9B,KAAKmV,IAAI7E,EAAM8sB,UAAW1e,EAAYqf,EAAkBD,EAAY,EAAIA,GACvGG,EAAmB7/B,GAAyB4/B,GAChD,OAAOH,EAASG,EAAch+B,KAAKmV,IAAI7E,EAAM6sB,UAAWze,EAAY11B,EAAYi1C,EAAkBl5C,KAGhGm5C,GAAa,SAAUvgC,EAAMtB,EAAK6Q,EAAK9M,GACzC,IACI+9B,EAAWp6C,EAAMqc,EADL7C,GAAQI,EAAKtB,GAAM6Q,GACQpb,SACvCi+B,EAAapyB,EAAKtB,GACtB,OAAOsB,EAAKvZ,OAAS,GAAKqZ,GAAWsyB,GAAc,IAAM7iB,EAAM,GAAKixB,EAAS3gC,GAAeuyB,EAAY7iB,EAAM,KAAOA,EAAM6iB,EAAWp7B,MAAMvQ,OAAS,GAAK+5C,EAAS3gC,GAAeuyB,EAAY7iB,EAAM,KAAO7Q,EAAM,GAAK8hC,EAAS3gC,GAAeG,EAAKtB,EAAM,GAAI6Q,KAAS7Q,EAAMsB,EAAKvZ,OAAS,GAAK+5C,EAAS3gC,GAAeG,EAAKtB,EAAM,GAAI6Q,MAyCpUkxB,GAA+B,SAAUC,EAAc1gC,EAAMoB,GAC/D,OAAOvY,EAAOuY,GAAe,SAAUu/B,GACrC,OAAOA,GAAUD,EAAa9hC,QAAU+hC,GAAU7gC,GAAWE,EAAK,IAAM0gC,EAAa9hC,WAgBrFgiC,GAAa,SAAU5nC,EAAOsmC,EAAOC,EAAOK,EAAWn9B,IA7R3C,SAAUzC,EAAMhH,EAAOyJ,EAAY47B,GAC7CrlC,EAAQ,GAAKA,EAAQgH,EAAK,GAAGhJ,MAAMvQ,QACrCgC,EAAKuX,GAAM,SAAUtB,GACnB,IAAImiC,EAAWniC,EAAI1H,MAAMgC,EAAQ,GAC7BvJ,EAAUiP,EAAI1H,MAAMgC,GACNyJ,EAAWhT,EAAQ0E,QAAS0sC,EAAS1sC,UAErDuL,GAAWhB,EAAK1F,EAAO9B,GAAWmnC,KAAgB,EAAM5uC,EAAQ2H,cAuRtE0pC,CAAUxB,EAAOtmC,EAAOyJ,EAAYm9B,EAAUziC,MAC9C,IAAIwV,EAAQ+sB,GAAcH,EAAOD,GAC7ByB,EAAgBf,GAAOT,EAAO5sB,EAAOitB,GACrCoB,EAActB,GAAcJ,EAAOyB,GACnCE,EAAgBjB,GAAOV,EAAO0B,EAAapB,GAC/C,OAAOp3C,EAAIy4C,GAAe,SAAU9hC,EAAS5U,GAC3C,OAAO2U,GAASC,EAASnG,EAAO+nC,EAAcx2C,GAAGyM,WAGjDkqC,GAAa,SAAUloC,EAAOsmC,EAAOC,EAAOK,EAAWn9B,IA1R3C,SAAUzC,EAAMhH,EAAOyJ,EAAY47B,GACjD,IAAI//B,EAAOyB,GAAmBC,GAAM1B,KACpC,GAAItF,EAAQ,GAAKA,EAAQsF,EAAK7X,OAAQ,CACpC,IACIuQ,EAxBU,SAAU0H,EAAK+D,GAC/B,OAAO1X,EAAM2T,GAAK,SAAUyY,EAAMha,GAChC,OAAOxU,EAAOwuB,GAAM,SAAUmnB,GAC5B,OAAO77B,EAAW67B,EAAYnqC,QAASgJ,EAAKhJ,YACzCgjB,EAAOA,EAAKvwB,OAAO,CAACuW,MACxB,IAmBWgkC,CADO7iC,EAAKtF,EAAQ,GAAGhC,MACGyL,GACtCha,EAAKuO,GAAO,SAAUmG,GAEpB,IADA,IAAIikC,EAAc13C,EAASrC,OAClBkD,EAAIyO,EAAOzO,EAAI+T,EAAK7X,OAAQ8D,IAcnC,IAbA,IAAI82C,EAAU,SAAUh1C,GACtB,IAAIqS,EAAMJ,EAAK/T,GACXkF,EAAUmQ,GAAQlB,EAAKrS,GACToW,EAAWhT,EAAQ0E,QAASgJ,EAAKhJ,WAE7CitC,EAAY55C,WACd45C,EAAc13C,EAASR,KAAKm1C,MAE9B+C,EAAY34C,MAAK,SAAU64C,GACzB5hC,GAAWhB,EAAKrS,EAAG6K,GAAWoqC,GAAK,EAAM7xC,EAAQ2H,gBAI9C/K,EAAI,EAAGA,EAAIyT,GAAWxB,EAAK,IAAKjS,IACvCg1C,EAAQh1C,OAqQhBk1C,CAAUjC,EAAOtmC,EAAOyJ,EAAYm9B,EAAUziC,MAC9C,IAhGkC4jB,EAAY3f,EAgG1CT,EAASF,GAAyB6+B,GAClCxb,EAAOub,GAAaC,EAAOC,GAC3B5sB,EAAQ/mB,EAASA,EAAS,GAAIk4B,GAAO,CAAE2b,SAAU3b,EAAK2b,SAAW9+B,EAAOla,SACxEw6C,EAAgBjB,GAAOV,EAAO3sB,EAAOitB,GACrC4B,EAAKzhC,GAAmBkhC,GAAgBQ,EAAUD,EAAGphC,KAAMshC,EAAUF,EAAGljC,KACxEqjC,EAAYlhC,GAAyBwgC,GACrCW,EAAavC,GAAaE,EAAOD,GACjC0B,EAAcp1C,EAASA,EAAS,GAAIg2C,GAAa,CAAEnC,SAAUmC,EAAWnC,SAAWkC,EAAUl7C,SAC7Fo7C,GAxG8B9gB,EAwGK6e,EAxGOx+B,EAwGIugC,EAvG3Cn5C,EAuGyB+2C,GAvGf,SAAU7gC,GACzB,OAAO3T,EAAMqW,GAAe,SAAUvW,EAAK81C,GACzC,IAAImB,EAAWnC,GAAiB,EAAGjhC,EAAKqiB,EAAY35B,GAAQ,GAC5D,OAAOqY,GAAQ5U,EAAK81C,EAAQmB,KAC3BpjC,OAoGDqiC,EAAgBf,GAAO6B,EAAab,EAAapB,GACrD,OAAO6B,EAAQ76C,OAAO86C,EAAQ73C,MAAM,EAAGmP,IAAQpS,OAAOm6C,GAAen6C,OAAO86C,EAAQ73C,MAAMmP,EAAO0oC,EAAQj7C,UAGvGs7C,GAAc,SAAU/hC,EAAMhH,EAAOgpC,EAASv/B,EAAY47B,GAC5D,IAAImD,EAAKzhC,GAAmBC,GAAO1B,EAAOkjC,EAAGljC,KAAM8B,EAAOohC,EAAGphC,KACzDf,EAASf,EAAKzU,MAAM,EAAGmP,GACvBsG,EAAQhB,EAAKzU,MAAMmP,GACnBipC,EAAUtiC,GAASrB,EAAK0jC,IAAU,SAAUE,EAAIryB,GAGlD,OAFiB7W,EAAQ,GAAKA,EAAQsF,EAAK7X,QAAUgc,EAAW5C,GAAevB,EAAKtF,EAAQ,GAAI6W,GAAIhQ,GAAevB,EAAKtF,GAAQ6W,IACzGjQ,GAAQtB,EAAKtF,GAAQ6W,GAAK3Y,GAAWmnC,EAAa6D,EAAG/tC,QAASsO,IAAa,EAAMy/B,EAAG9qC,aAG7G,OAAOgJ,EAAKxZ,OAAOyY,GAAQzY,OAAO,CAACq7C,IAAUr7C,OAAO0Y,IAUlD6iC,GAAiB,SAAUniC,EAAMhH,EAAOgpC,EAASv/B,EAAY47B,GAC/D,OAAO71C,EAAIwX,GAAM,SAAUtB,GACzB,IAAI0jC,EAAappC,EAAQ,GAAKA,EAAQ8G,GAAWpB,IAAQ+D,EAAW5C,GAAenB,EAAK1F,EAAQ,GAAI6G,GAAenB,EAAK1F,IACpHsoC,EAXY,SAAU5iC,EAAKE,EAAQ3H,EAASmrC,EAAYJ,EAASv/B,EAAY47B,GACnF,GAAgB,aAAZpnC,GAA2BmrC,EAI7B,OAAOxiC,GAAQlB,EAAKE,GAHpB,IAAIzB,EAAOyC,GAAQlB,EAAKsjC,GACxB,OAAO9qC,GAAWmnC,EAAalhC,EAAKhJ,QAASsO,IAAa,GAAM,GAQtD4/B,CAAc3jC,EAAK1F,EAAO0F,EAAIzH,QAASmrC,EAAYJ,EAASv/B,EAAY47B,GAClF,OAAO5+B,GAAQf,EAAK1F,EAAOsoC,OAiB3BgB,GAAY,SAAUtiC,EAAMghB,EAASve,EAAY47B,GAMnD,OAAO71C,EAAIwX,GAAM,SAAUtB,GACzB,OAAOiB,GAASjB,GAAK,SAAUvB,GAC7B,OAPW,SAAUA,GACvB,OAAOxU,EAAOq4B,GAAS,SAAUnyB,GAC/B,OAAO4T,EAAWtF,EAAKhJ,QAAStF,EAAOsF,YAKhCouC,CAASplC,GAAQjG,GAAWmnC,EAAalhC,EAAKhJ,QAASsO,IAAa,EAAMtF,EAAK/F,UAAY+F,SAIpGqlC,GAAc,SAAUxiC,EAAM6Z,EAAUlY,EAAUc,GACpD,YAAoD9c,IAA7Cka,GAAeG,EAAK6Z,GAAWlY,IAA4BkY,EAAW,GAAKpX,EAAW5C,GAAeG,EAAK6Z,EAAW,GAAIlY,GAAW9B,GAAeG,EAAK6Z,GAAWlY,KAExK8gC,GAAiB,SAAU/jC,EAAK1F,EAAOyJ,GACzC,OAAOzJ,EAAQ,GAAKyJ,EAAW5C,GAAenB,EAAK1F,EAAQ,GAAI6G,GAAenB,EAAK1F,KAEjF0pC,GAAgB,SAAU1iC,EAAMhH,EAAOyJ,EAAY47B,GACrD,IAAI//B,EAAOyB,GAAmBC,GAAM1B,KAChC0iB,EAAUt4B,EAAK4V,GAAM,SAAUI,EAAKnU,GAEtC,OADmBi4C,GAAYxiC,EAAMzV,EAAGyO,EAAOyJ,IAAeggC,GAAe/jC,EAAK1F,EAAOyJ,GACnE,GAAK,CAAC7C,GAAQlB,EAAK1F,OAE3C,OAAOspC,GAAUtiC,EAAMghB,EAASve,EAAY47B,IAE1CsE,GAAa,SAAU3iC,EAAMhH,EAAOyJ,EAAY47B,GAClD,IAAI//B,EAAOyB,GAAmBC,GAAM1B,KAChCskC,EAAYtkC,EAAKtF,GACjBgoB,EAAUt4B,EAAKk6C,EAAU5rC,OAAO,SAAUwL,EAAMjY,GAElD,OADmBi4C,GAAYlkC,EAAMtF,EAAOzO,EAAGkY,IAAeggC,GAAeG,EAAWr4C,EAAGkY,GACrE,GAAK,CAACD,MAE9B,OAAO8/B,GAAUtiC,EAAMghB,EAASve,EAAY47B,IAG1CwE,GAAgB,SAAUvH,GAO5B,OAAOvwC,EAAMuwC,GANK,SAAUnkB,EAAMvgB,GAIhC,OAHmBjO,EAAOwuB,GAAM,SAAU2rB,GACxC,OAAOA,EAAclkC,SAAWhI,EAAOgI,UAEnBuY,EAAOA,EAAKvwB,OAAO,CAACgQ,MAET,IAAIkK,MAAK,SAAUgD,EAASC,GAC7D,OAAOD,EAAQlF,OAASmF,EAAQnF,WAIhCmkC,GAAgB,SAAU5uC,GAG5B,MAAO,CACLA,QAASA,EACT2C,QAJYoG,GAAa/I,EAAS,UAAW,GAK7C0C,QAJYqG,GAAa/I,EAAS,UAAW,KAsF7C6uC,GAAoB,SAAU7lC,GAChC,OAAOxB,GAAOwB,EAAM,SAAS3U,KAAI,SAAU6zB,GACzC,OAAOA,EAAUpuB,OAAO,EAAG,OA0D3Bg1C,GA3Ie,SAAUliB,EAAYmiB,QACxB,IAAXA,IACFA,EAASH,IAEX,IAAI9U,EAAW3V,GAAK5uB,EAASrC,QAazBy/B,EAAM,SAAU3yB,GAClB,IAAIitC,EALO,SAAUjtC,GAErB,OAVO,SAAUitB,GACjB,OAAQj8B,GAAKi8B,EAAKjtB,UAClB,IAAK,MACH,OAAO4sB,EAAWxR,IAAI6R,GACxB,QACE,OAAOL,EAAW5jB,KAAKikB,IAKlBz0B,CADIu2C,EAAO/uC,IAIAgvC,CAAOhvC,GAQzB,OAPI85B,EAAS1iC,MAAM/D,UACjBymC,EAAS3yB,IAAI5R,EAASR,KAAKk4C,IAE7BgC,EAAS15C,EAASR,KAAK,CACrBsZ,KAAMrO,EACNitC,YAAaA,IAERA,GAELgC,EAAS15C,EAASrC,OAQtB,MAAO,CACLg8C,UARc,SAAUlvC,EAASsO,GACjC,OAAO2gC,EAAO37C,MAAK,WACjB,OAAOq/B,EAAI3yB,MACV,SAAUpI,GACX,OAAO0W,EAAWtO,EAASpI,EAAEyW,MAAQzW,EAAEq1C,YAActa,EAAI3yB,OAK3DgpC,OAAQlP,EAAS1iC,MAqGjB03C,GAlGc,SAAUhwC,EAAOU,GACjC,OAAO,SAAUotB,GACf,IAAIkN,EAAW3V,GAAK5uB,EAASrC,QACzB6Z,EAAO,GAMPoiC,EAAU,SAAUnvC,GACtB,IAAIqH,EAAQ,CAAEvI,MAAOA,GACjBkK,EAAO4jB,EAAWvzB,QAAQ2G,EAASR,EAAK6H,GAQ5C,OAPA0F,EAAKjX,KAAK,CACRuY,KAAMrO,EACNmtC,IAAKnkC,IAEH8wB,EAAS1iC,MAAM/D,UACjBymC,EAAS3yB,IAAI5R,EAASR,KAAKiU,IAEtBA,GAaT,MAAO,CACLomC,cAZkB,SAAUpvC,EAASsO,GACrC,MAAsB,QAAlBtd,GAAKgP,GACAA,EAnBE,SAAUA,EAASsO,GAC9B,OAAOzX,EAAKkW,GAAM,SAAUpc,GAC1B,OAAO2d,EAAW3d,EAAE0d,KAAMrO,MAmBnB1G,CAAO0G,EAASsO,GAAYhb,MAAK,WACtC,OAAO67C,EAAQnvC,MACd,SAAUpI,GACX,OAAO0W,EAAWtO,EAASpI,EAAEyW,MAAQzW,EAAEu1C,IAAMgC,EAAQnvC,OAMzDgpC,OAAQlP,EAAS1iC,OAgEnB03C,GAvDU,SAAUliB,GACtB,IAAIkN,EAAW3V,GAAK5uB,EAASrC,QAgD7B,MAAO,CACL+2C,QAhDY,SAAUjhC,GAClB8wB,EAAS1iC,MAAM/D,UACjBymC,EAAS3yB,IAAI5R,EAASR,KAAKiU,IAE7B,IAAIlK,EAAQ+vC,GAAkB7lC,GAI9B,OAHAlK,EAAMxK,MAAK,SAAU4zB,GACnB,OAAO/gB,GAAI6B,EAAM,QAASkf,MAErB,WACL,IAAIvf,EAAMikB,EAAW5jB,KAAK,CACxBhJ,QAASgJ,EACTrG,QAAS,EACTD,QAAS,IAOX,OALAkG,GAASD,EAAK,SACdC,GAASI,EAAM,SACflK,EAAMxK,MAAK,SAAU4zB,GACnB,OAAO/gB,GAAIwB,EAAK,QAASuf,MAEpBvf,IA8BT0mC,MA3BU,SAAUxsC,GAuBpB,OANA+F,GAAS/F,EAAM,GAAI,SAhBI,WACrB,IAAIysC,EAAmBp1B,GAAI7lB,EAAIwO,EAAOgsC,KACtC,GAAgC,IAA5BS,EAAiBh9C,OACnB,OAAOiD,EAASrC,OAEhB,IAAIq8C,EAAcD,EAAiB,GAC/BE,EAAW,CACb,MACA,OAKF,OAHch7C,EAAO86C,GAAkB,SAAUpnB,GAC/C,OAAOA,IAAcqnB,GAAex5C,EAASy5C,EAAUtnB,MAExC3yB,EAASrC,OAASqC,EAASC,KAAK+5C,GAIrDE,GAAmBn8C,MAAK,WACtB,OAAOmU,GAAO5E,EAAM,GAAI,YACvB,SAAUqlB,GACX,OAAO/gB,GAAItE,EAAM,GAAI,QAASqlB,EAAY,YAErCn2B,EAAS8Q,EAAM,KAKtBmmC,OAAQlP,EAAS1iC,MASjBs4C,GAAY,CACd,OACA,IACA,MACA,UACA,QACA,aACA,SACA,SACA,SACA,MACA,UACA,KACA,KACA,QACA,QACA,QACA,QACA,UACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,aACA,MACA,WAsBEC,GAAar9B,KACbs9B,GAAY,SAAU5vC,GACxB,OAfY,SAAUiU,EAAU5F,GAChC,IAAIwhC,EAAU57B,EAAS/L,WAAWlX,KAAKqd,GACvC,OAAOtY,EAAS25C,GAAWG,GAapBC,CAAQH,GAAY3vC,IAEzB+vC,GAAW,SAAU/vC,GACvB,OAzBW,SAAUiU,EAAU5F,GAC/B,IAAIwhC,EAAU57B,EAAS/L,WAAWlX,KAAKqd,GACvC,OAAOtY,EAAS,CACd,KACA,MACC85C,GAoBIG,CAAOL,GAAY3vC,IAMxBiwC,GAAU,SAAUptC,GACtB,IA+BMqpB,EA/BFgkB,EAAO,SAAUzpC,GACnB,MAAoB,OAAbzV,GAAKyV,IAqBV0pC,EAAW,SAAUnnC,GACvB,OAAOkd,GAAOld,GAAMzU,MAAK,SAAUqa,GACjC,IAAIwhC,EAZC1rC,GAYoCkK,GAZpBva,KAAI,SAAUg8C,GACnC,QAAIT,GAAUS,MAlCH,SAAUp8B,EAAU5F,GACnC,OAAOtY,EAAS,CACd,KACA,MACA,KACA,SACCke,EAAS/L,WAAWlX,KAAKqd,IAWrBqF,CAAWi8B,GAoBGU,IACe,QAAvBr/C,GAAKq/C,MAGb18C,OAAM,GAKP,OAAOsQ,GAAO2K,GAAWva,KAAI,SAAU4P,GACrC,OAA+B,IAAxBmsC,IAjBS,OAAbp/C,GADkByV,EAkB6BxC,IAjB1BuC,GAASC,EAAIspC,IAAUr8C,WAiBcw8C,EAAKthC,IAAcghC,GAAU3rC,KAAYxD,GAAKuI,EAAM/E,GAAU,GAAK,CAACtF,GAAaY,QAAQ,OAlB3I,IAAUkH,QAoBtB9S,MAAM,KASP28C,EAFwB,KAJtBpkB,EAAU33B,EAAKsO,GAAO,SAAUmG,GAClC,IAAI7C,EAAaxB,GAASqE,GAC1B,OA9Ba,SAAUrE,GACzB,OAAOlQ,EAAOkQ,GAAU,SAAU+W,GAChC,OAAOw0B,EAAKx0B,IAAMlY,GAAOkY,IAAiC,IAA3BvJ,GAAMuJ,GAAGrhB,OAAO/H,UA4BxCi+C,CAAWpqC,GAAc,GAAKA,EAAW1T,OAAO09C,EAASnnC,QAEnD1W,OAAe,CAACqM,GAAaY,QAAQ,OAAS2sB,EAG/Dza,GAAM5O,EAAM,IACZ2O,GAAS3O,EAAM,GAAIytC,IAGjBj7B,GAAQ,SAAUnL,GAEG,IADTrH,GAAMqH,GACR5X,QACVsf,GAAS1H,IAGTsmC,GAAU,SAAU3kC,EAAMm9B,GAC5B,MAAO,CACLn9B,KAAMA,EACNm9B,OAAQA,IAGRyH,GAAkB,SAAU5kC,EAAMtB,EAAKE,GACzC,IAAIN,EAAOyB,GAAmBC,GAAM1B,KACpC,OAAOumC,GAAOvmC,EAAMI,EAAKE,GAAQrW,SAAQ,WACvC,OAAOs8C,GAAOvmC,EAAM,EAAG,OAGvBumC,GAAS,SAAU7kC,EAAMtB,EAAKE,GAChC,OAAOlV,EAASC,KAAKqW,EAAKtB,IAAMhW,MAAK,SAAUiC,GAC7C,OAAOjB,EAASC,KAAKgB,EAAEqM,MAAM4H,IAASlW,MAAK,SAAUmnB,GACnD,OAAOnmB,EAASC,KAAKkmB,EAAE1b,gBAIzB2wC,GAAS,SAAU9kC,EAAMtB,EAAKE,GAChC,IAAIN,EAAOyB,GAAmBC,GAAM1B,KACpC,OAAOqmC,GAAQ3kC,EAAM6kC,GAAOvmC,EAAMI,EAAKE,KAErCmmC,GAAa,SAAUzJ,GAOzB,OAAOvwC,EAAMuwC,GANQ,SAAUnkB,EAAMvgB,GAInC,OAHgBjO,EAAOwuB,GAAM,SAAU2rB,GACrC,OAAOA,EAAcpkC,MAAQ9H,EAAO8H,OAEnByY,EAAOA,EAAKvwB,OAAO,CAACgQ,MAEH,IAAIkK,MAAK,SAAUgD,EAASC,GAChE,OAAOD,EAAQpF,IAAMqF,EAAQrF,QA+I7BsmC,GAAc,SAAU1mC,EAAMyiB,EAAY+B,GAC5C,IAthK6BtkB,EAAOvH,EAshKhCguC,GAthKyBzmC,EAshKKF,EAthKErH,EAshKI6rB,EAAQ7rB,QArhKzCsH,GAAoBC,GAAO,WAChC,OAAOvH,MAqhKLiuC,EAAK3iC,GAAmB0iC,GAC5B,OAAOnJ,GAAOoJ,EAAInkB,GAAY,IAuD5BokB,GAAe,SAAUnuC,EAAOouC,GAClC,IAAIC,EAAcx8C,EAAOmO,EAAOouC,GAChC,OAA2B,IAAvBC,EAAY5+C,OACPiD,EAASR,KAAK,MACZm8C,EAAY5+C,SAAWuQ,EAAMvQ,OAC/BiD,EAASR,KAAK,MAEdQ,EAASrC,QAGhBw7B,GAx2FgB,SAAUyiB,EAAQpkC,EAAMqkC,EAAOjwB,GACjD,IAAItU,EAAYuB,GAAmBrB,GAC/B+gB,EAAS3M,EAAUqD,UAAU3X,EAAWsU,GAC5C0M,GAAoBhhB,EAAWihB,EAAQ3M,IAs2FrCkwB,GAj3F8B,SAAUF,EAAQpkC,EAAMo6B,EAAShmB,EAAW0nB,GAC5E,IAAIh8B,EAAYuB,GAAmBrB,GAC/BsiB,EAAQlO,EAAUqD,UAAU3X,EAAWsU,GACvCmwB,EAAkBnwB,EAAUC,aAC5BisB,EAAKxE,EAAgBxY,wBAAwBhB,EAAOiiB,EAAiBnK,EAAQ5W,WAAYpP,EAAU8D,YAAa8I,EAAWsf,EAAGtf,SAAUvP,EAAQ6uB,EAAG7uB,MACvJqP,GAAoBhhB,EAAWkhB,EAAU5M,GACzCA,EAAU2D,iBAAiBtG,IA42FzB+yB,GAAsB,SAAU3H,EAAYzC,GAC9C,OAAO3yC,EAAO2yC,GAAS,SAAU1kC,GAC/B,OAAyB,IAAlBA,EAAOgI,QAAgBhI,EAAOQ,aAGrCuuC,GAAqB,SAAU3kC,EAAWs6B,GAC5C,OAAO3yC,EAAO2yC,GAAS,SAAU1kC,GAC/B,OAAOA,EAAOgI,OAAShI,EAAOE,SAAWkK,EAAUhB,KAAK9B,SAAWtH,EAAOQ,aAG1EwuC,GAAkB,SAAU5kC,EAAWs6B,GACzC,IAAIp9B,EAAUkR,GAAUpO,GACpB6kC,EAAahD,GAAcvH,GAC/B,OAAOvwC,EAAM86C,GAAY,SAAUh7C,EAAK+L,GAGtC,OAAO/L,EAFMqT,EAAQtH,EAAOgI,QACNpW,IAAIumB,IAAUjnB,MAAM,KAEzC,IAEDg+C,GAAyB,SAAUzmC,GACrC,OAAO,SAAU2B,EAAWnS,GAC1B,OAAO4uC,GAAQz8B,EAAWnS,GAAQhG,QAAO,SAAUyyC,GAEjD,QADkBj8B,EAASqmC,GAAsBC,IAC7B3kC,EAAWs6B,MAC9B9yC,KAAI,SAAU8yC,GACf,MAAO,CACLA,QAASA,EACT5W,WAAYkhB,GAAgB5kC,EAAWs6B,SAa3CyK,GAAwB,SAAU1mC,GACpC,OAAO,SAAU2B,EAAWnS,GAC1B,OAAO2uC,GAAgBx8B,EAAWnS,GAAQhG,QAAO,SAAUyyC,GAEzD,QADkBj8B,EAASqmC,GAAsBC,IAC7B3kC,EAAWs6B,EAAQtkC,YAIzCgvC,GAAmBtJ,IAlQE,SAAU18B,EAAMs7B,EAAS74B,EAAYq6B,GAC5D,IAAImJ,EAAc3K,EAAQ,GAAG58B,IACzBJ,EAAOymC,GAAWzJ,GAClB4K,EAAUt7C,EAAM0T,GAAM,SAAUzT,EAAK6T,GAEvC,MAAO,CACLsB,KAFS+hC,GAAYl3C,EAAImV,KAAMimC,EAAavnC,EAAIA,IAAM7T,EAAI8nB,MAAOlQ,EAAYq6B,EAAYuG,WAGzF1wB,MAAO9nB,EAAI8nB,MAAQ,KAEpB,CACD3S,KAAMA,EACN2S,MAAO,IACN3S,KACH,OAAO8kC,GAAOoB,EAASD,EAAa3K,EAAQ,GAAG18B,UAqPF6+B,GAASx3C,EAAMA,EAAMg9C,IAChEkD,GAAkBzJ,IApPE,SAAU18B,EAAMs7B,EAAS74B,EAAYq6B,GAC3D,IAAIx+B,EAAOymC,GAAWzJ,GAClBzsC,EAASyP,EAAKA,EAAK7X,OAAS,GAC5Bw/C,EAAcp3C,EAAO6P,IAAM7P,EAAOgI,QAClCqvC,EAAUt7C,EAAM0T,GAAM,SAAU8nC,EAAM1nC,GACxC,OAAOqjC,GAAYqE,EAAMH,EAAavnC,EAAIA,IAAK+D,EAAYq6B,EAAYuG,aACtErjC,GACH,OAAO8kC,GAAOoB,EAASD,EAAa3K,EAAQ,GAAG18B,UA6OJ6+B,GAASx3C,EAAMA,EAAMg9C,IAC9DoD,GAAsB3J,IA5OE,SAAU18B,EAAMsmC,EAAe7jC,EAAYq6B,GACrE,IAAIxB,EAAUgL,EAAchL,QACxBp9B,EAAU2kC,GAAcvH,GACxB2K,EAAc/nC,EAAQ,GAAGU,OACzBsnC,EAAUt7C,EAAMsT,GAAS,SAAUrT,EAAK0kB,GAE1C,MAAO,CACLvP,KAFSmiC,GAAet3C,EAAImV,KAAMimC,EAAa12B,EAAI3Q,OAAS/T,EAAI8nB,MAAOlQ,EAAYq6B,EAAYuG,WAG/F1wB,MAAO9nB,EAAI8nB,MAAQ,KAEpB,CACD3S,KAAMA,EACN2S,MAAO,IACN3S,KACH,OAAO8kC,GAAOoB,EAAS5K,EAAQ,GAAG58B,IAAKunC,KA8NYH,IAAuB,GAAON,GAA+Bv/C,EAAMg9C,IACpHsD,GAAqB7J,IA7NE,SAAU18B,EAAMsmC,EAAe7jC,EAAYq6B,GACpE,IAAIxB,EAAUgL,EAAchL,QACxBzsC,EAASysC,EAAQA,EAAQ70C,OAAS,GAClCw/C,EAAcp3C,EAAO+P,OAAS/P,EAAOiI,QACrCoH,EAAU2kC,GAAcvH,GACxB4K,EAAUt7C,EAAMsT,GAAS,SAAUkoC,EAAM72B,GAC3C,OAAO4yB,GAAeiE,EAAMH,EAAa12B,EAAI3Q,OAAQ6D,EAAYq6B,EAAYuG,aAC5ErjC,GACH,OAAO8kC,GAAOoB,EAAS5K,EAAQ,GAAG58B,IAAKunC,KAqNUH,IAAuB,GAAQN,GAA+Bv/C,EAAMg9C,IACnHuD,GAAe9J,IApKE,SAAU18B,EAAMsmC,EAAeG,EAAaC,GAC/D,IAAIxoC,EAAU2kC,GAAcyD,EAAchL,SACtC4K,EA9cgB,SAAUlmC,EAAM9B,GACpC,OAAOxV,EAAKsX,GAAM,SAAUtB,GAC1B,IAAIU,EAAgBV,EAAI1H,MACpBA,EAAQpM,EAAMsT,GAAS,SAAUrT,EAAK+T,GACxC,OAAOA,GAAU,GAAKA,EAAS/T,EAAIpE,OAASoE,EAAIhB,MAAM,EAAG+U,GAAQhY,OAAOiE,EAAIhB,MAAM+U,EAAS,IAAM/T,IAChGuU,GACH,OAAOpI,EAAMvQ,OAAS,EAAI,CAAC4Q,GAASL,EAAO0H,EAAIzH,UAAY,MAwc/C0vC,CAAgB3mC,EAAMxX,EAAI0V,GAAS,SAAUU,GACzD,OAAOA,EAAOA,WAEZu+B,EAASyH,GAAgBsB,EAAShoC,EAAQ,GAAGQ,IAAKR,EAAQ,GAAGU,QACjE,OAAO+lC,GAAQuB,EAAS/I,MA0IE,SAAUn8B,EAAWnS,GAC/C,OAAO8uC,GAAgB38B,EAAWnS,GAAQrG,KAAI,SAAU8yC,GACtD,MAAO,CACLA,QAASA,EACT5W,YAAakhB,GAAgB5kC,EAAWs6B,SAgBgBkK,GAA+Bh8B,GAAOy5B,IAChG2D,GAAYlK,IA7JE,SAAU18B,EAAMs7B,EAASmL,EAAaC,GACtD,IAAIpoC,EAAOymC,GAAWzJ,GAClB4K,EA7ca,SAAUlmC,EAAM9R,EAAOgW,GACxC,IAAIs9B,EAAKzhC,GAAmBC,GAAO1B,EAAOkjC,EAAGljC,KAC7C,OAD0DkjC,EAAGphC,KACjDxZ,OAAO0X,EAAKzU,MAAM,EAAGqE,IAAQtH,OAAO0X,EAAKzU,MAAMqa,EAAS,IA2ctD2iC,CAAa7mC,EAAM1B,EAAK,GAAGI,IAAKJ,EAAKA,EAAK7X,OAAS,GAAGiY,KAChEy+B,EAASyH,GAAgBsB,EAAS5K,EAAQ,GAAG58B,IAAK48B,EAAQ,GAAG18B,QACjE,OAAO+lC,GAAQuB,EAAS/I,KAyJOM,GAASx3C,EAAMujB,GAAOy5B,IAEnD6D,IADmBpK,IA1ME,SAAUqK,EAAanwC,EAAQ6L,EAAYq6B,GAClE,IAAIoJ,EAAUxD,GAAcqE,EAAanwC,EAAOgI,OAAQ6D,EAAYq6B,EAAYyG,eAChF,OAAOuB,GAAOoB,EAAStvC,EAAO8H,IAAK9H,EAAOgI,UAwMG8+B,GAAgBz3C,EAAMA,EAAMg9C,GAAqB,MAAO,OAC/EvG,IAvME,SAAUqK,EAAazL,EAAS74B,EAAYq6B,GACpE,IAAI5+B,EAAU2kC,GAAcvH,GAIxB4K,EAAUn7C,EAAMmT,GAHL,SAAU8oC,EAAapoC,GACpC,OAAO8jC,GAAcsE,EAAapoC,EAAOA,OAAQ6D,EAAYq6B,EAAYyG,iBAEpCwD,GACvC,OAAOjC,GAAOoB,EAAS5K,EAAQ,GAAG58B,IAAK48B,EAAQ,GAAG18B,UAiMH++B,GAAiB13C,EAAMA,EAAMg9C,GAAqB,MAAO,QAEtGgE,IADqBvK,IApLE,SAAUqK,EAAanwC,EAAQ6L,EAAYq6B,GACpE,IAAIoJ,EAAUxD,GAAcqE,EAAanwC,EAAOgI,OAAQ6D,EAAYq6B,EAAYyG,eAChF,OAAOuB,GAAOoB,EAAStvC,EAAO8H,IAAK9H,EAAOgI,UAkLO8+B,GAAgBz3C,EAAMA,EAAMg9C,GAAqB,KAAM,OAChFvG,IAjLE,SAAUqK,EAAazL,EAAS74B,EAAYq6B,GACtE,IAAI5+B,EAAU2kC,GAAcvH,GAIxB4K,EAAUn7C,EAAMmT,GAHL,SAAU8oC,EAAapoC,GACpC,OAAO8jC,GAAcsE,EAAapoC,EAAOA,OAAQ6D,EAAYq6B,EAAYyG,iBAEpCwD,GACvC,OAAOjC,GAAOoB,EAAS5K,EAAQ,GAAG58B,IAAK48B,EAAQ,GAAG18B,UA2KC++B,GAAiB13C,EAAMA,EAAMg9C,GAAqB,KAAM,QAKzGiE,IAJgBxK,IA1NE,SAAU18B,EAAMpJ,EAAQ6L,EAAYq6B,GACxD,IAAIoJ,EAAUvD,GAAW3iC,EAAMpJ,EAAO8H,IAAK+D,EAAYq6B,EAAYyG,eACnE,OAAOuB,GAAOoB,EAAStvC,EAAO8H,IAAK9H,EAAOgI,UAwNH2+B,GAAQt3C,EAAMA,EAAMg9C,GAAqB,MAAO,OACpEvG,IAvNE,SAAUqK,EAAazL,EAAS74B,EAAYq6B,GACjE,IAAIx+B,EAAOymC,GAAWzJ,GAIlB4K,EAAUn7C,EAAMuT,GAHL,SAAU0oC,EAAatoC,GACpC,OAAOikC,GAAWqE,EAAatoC,EAAIA,IAAK+D,EAAYq6B,EAAYyG,iBAE9BwD,GACpC,OAAOjC,GAAOoB,EAAS5K,EAAQ,GAAG58B,IAAK48B,EAAQ,GAAG18B,UAiNT6+B,GAASx3C,EAAMA,EAAMg9C,GAAqB,MAAO,OACtEvG,IApME,SAAU18B,EAAMpJ,EAAQ6L,EAAYq6B,GAC1D,IAAIoJ,EAAUvD,GAAW3iC,EAAMpJ,EAAO8H,IAAK+D,EAAYq6B,EAAYyG,eACnE,OAAOuB,GAAOoB,EAAStvC,EAAO8H,IAAK9H,EAAOgI,UAkMC2+B,GAAQt3C,EAAMA,EAAMg9C,GAAqB,KAAM,OACrEvG,IAjME,SAAUqK,EAAazL,EAAS74B,EAAYq6B,GACnE,IAAIx+B,EAAOymC,GAAWzJ,GAIlB4K,EAAUn7C,EAAMuT,GAHL,SAAU0oC,EAAatoC,GACpC,OAAOikC,GAAWqE,EAAatoC,EAAIA,IAAK+D,EAAYq6B,EAAYyG,iBAE9BwD,GACpC,OAAOjC,GAAOoB,EAAS5K,EAAQ,GAAG58B,IAAK48B,EAAQ,GAAG18B,UA2LL6+B,GAASx3C,EAAMA,EAAMg9C,GAAqB,KAAM,OAC9EvG,IAhKE,SAAU18B,EAAM8d,EAAUrb,EAAYq6B,GACvD,IAAI9lC,EAAQ8mB,EAAS9mB,MACrBotC,GAAQptC,GACR,IAAIkvC,EAp1BM,SAAUlmC,EAAM6C,EAAQJ,EAAY47B,GAC9C,IAAI//B,EAAOyB,GAAmBC,GAAM1B,KACpC,GAAoB,IAAhBA,EAAK7X,OACP,OAAOuZ,EAET,IAAK,IAAIzV,EAAIsY,EAAOQ,SAAU9Y,GAAKsY,EAAOO,UAAW7Y,IACnD,IAAK,IAAI8B,EAAIwW,EAAOM,SAAU9W,GAAKwW,EAAOK,UAAW7W,IAAK,CACxD,IAAIqS,EAAMJ,EAAK/T,GACX6M,EAAWwI,GAAQlB,EAAKrS,GAAG+K,SAC/BsI,GAAWhB,EAAKrS,EAAG6K,GAAWmnC,KAAgB,EAAOjnC,IAGzD,OAAO4I,EAw0BOwjC,CAAMxjC,EAAM8d,EAASjb,OAAQJ,EAAYq6B,EAAY0G,MAAMxsC,IACzE,OAAO2tC,GAAQuB,EAASx8C,EAASC,KAAKqN,EAAM,OA4JX8mC,GAAoBjb,GAAQ58B,EAAMg9C,KACjEkE,GAAezK,IA3JE,SAAU18B,EAAM2d,EAAYlb,EAAYq6B,GAC3D,IAGIoJ,EAAUt7C,EAAM+yB,GAHJ,SAAUl0B,EAAG0T,GAC3B,OAAOihC,GAAQ30C,EAAG0T,EAAMsF,EAAYq6B,EAAYsB,QAAQjhC,MAEf6C,GAC3C,OAAO2kC,GAAQuB,EAASx8C,EAASC,KAAKg0B,EAAW,OAsJZugB,GAAsBrb,GAAQ58B,EAAMg9C,IACvE9hB,GAAaub,IArJE,SAAU18B,EAAMilC,EAAcxiC,EAAYikC,GAC3D,IA9gLsBhoC,EAAKE,EAkhLvB2gC,EAJU,SAAUlhC,EAAO0iB,GAC7B,IAAImkB,EAAK3iC,GAAoBlE,GAC7B,OAAOy9B,GAAOoJ,EAAInkB,GAAY,GAEpBqmB,CAAQnC,EAAahkB,UAAWgkB,EAAalkB,YAGzD,OA/iBY,SAAU2f,EAAcpB,EAAOC,EAAOK,EAAWn9B,GAC7D,IAAIrB,EAAgBX,GAAyB6+B,GACzC+H,EAnBqB,SAAUC,EAAqBtnC,EAAMoB,GAC9D,IAAImmC,EAAgBznC,GAAWE,EAAK,IAChCwnC,EAAuB/8C,EAAM88C,EAAgBD,EAAoB1oC,QAAQ,SAAUlU,GACrF,OAAOA,EAAM48C,EAAoB1oC,UAE/B6oC,EAAkBz8C,EAAKw8C,GAAsB,SAAU98C,GACzD,OAAO9B,EAAOwY,GAAe,SAAUmO,GACrC,OAAOA,IAAQ7kB,QAEhB5C,MAAMy/C,EAAgB,GACzB,OAAO37C,EAASA,EAAS,GAAI07C,GAAsB,CAAE1oC,OAAQ6oC,IASrCC,CAAqBhH,EAAcpB,EAAOl+B,GAC9DumC,EAA4BlH,GAA6B4G,EAAmB9H,EAAOn+B,GAEvF,OA9HY,SAAUs/B,EAAcpB,EAAOC,GAC3C,GAAImB,EAAahiC,KAAO4gC,EAAM74C,QAAUi6C,EAAa9hC,OAASkB,GAAWw/B,EAAM,IAC7E,OAAOJ,GAAOzrC,MAAM,mDAAqDitC,EAAahiC,IAAM,aAAegiC,EAAa9hC,QAE1H,IAAIgpC,EAAetI,EAAMz1C,MAAM62C,EAAahiC,KACxCmpC,EAAeD,EAAa,GAAG5wC,MAAMnN,MAAM62C,EAAa9hC,QACxDkpC,EAAchoC,GAAWy/B,EAAM,IAC/BwI,EAAcxI,EAAM94C,OACxB,OAAOy4C,GAAOt6C,MAAM,CAClB46C,SAAUoI,EAAanhD,OAASshD,EAChCtI,SAAUoI,EAAaphD,OAASqhD,IAmHrBE,CAAQX,EAAmB/H,EAAOC,GACjC/2C,KAAI,SAAUs7B,GAC1B,IAAInR,EAAQ/mB,EAASA,EAAS,GAAIk4B,GAAO,CAAE2b,SAAU3b,EAAK2b,SAAWkI,EAA0BlhD,SAC3FwhD,EAAajI,GAAOV,EAAO3sB,EAAOitB,GAClCU,EAAmB7/B,GAAyBwnC,GAC5CC,EAA+BzH,GAA6B4G,EAAmB9H,EAAOe,GAC1F,OAtDc,SAAUI,EAAcpB,EAAOC,EAAOK,EAAWn9B,EAAYrB,GAQ7E,IAPA,IAAIiC,EAAWq9B,EAAahiC,IACxByE,EAAWu9B,EAAa9hC,OAGxBygB,EAAShc,EAFKk8B,EAAM94C,OAGpB64B,EAASnc,EAFIrD,GAAWy/B,EAAM,IAEGn+B,EAAc3a,OAC/C0hD,EAAkB98C,EAAY+V,EAAeha,GACxCuD,EAAI0Y,EAAU1Y,EAAI00B,EAAQ10B,IAEjC,IADA,IAAIy9C,EAAa,EACRv4B,EAAI1M,EAAU0M,EAAIyP,EAAQzP,IACjC,GAAIs4B,EAAgBt4B,GAClBu4B,QADF,CAII7H,GAAWjB,EAAO30C,EAAGklB,EAAGpN,IAC1B27B,GAAQkB,EAAOz/B,GAAey/B,EAAM30C,GAAIklB,GAAIpN,EAAYm9B,EAAUziC,MAEpE,IAAIkrC,EAAgBx4B,EAAI1M,EAAWilC,EAC/BtsB,EAAUlc,GAAQ2/B,EAAM50C,EAAI0Y,GAAWglC,GACvCC,EAAaxsB,EAAQ3nB,QACrBitC,EAAcxB,EAAUpyC,QAAQ86C,GACpC5oC,GAAW4/B,EAAM30C,GAAIklB,EAAG3Y,GAAWkqC,GAAa,EAAMtlB,EAAQ1kB,WAGlE,OAAOkoC,EA6BEiJ,CAAYlB,EAAmBY,EAAY1I,EAAOK,EAAWn9B,EAAYylC,MAoiBjEM,EAphLK9pC,EAmhLKumC,EAAavmC,IAnhLbE,EAmhLkBqmC,EAAarmC,OAlhLnD,CACLF,IAAKA,EACLE,OAAQA,IAihL6BoB,EAAMu/B,EAAO0F,EAAalkB,WAAYte,GAC3Dhb,MAAK,WACrB,OAAOk9C,GAAQ3kC,EAAMtW,EAASR,KAAK+7C,EAAa9wC,aAC/C,SAAU+xC,GACX,IAAI/I,EAASyH,GAAgBsB,EAASjB,EAAavmC,IAAKumC,EAAarmC,QACrE,OAAO+lC,GAAQuB,EAAS/I,SAt6Bd,SAAUn8B,EAAWnS,GACjC,OAAOsO,GAAKtO,EAAOsF,SAASzL,MAAK,SAAUyU,GACzC,OAAOm/B,GAAgBt7B,EAAW7D,GAAM3U,KAAI,SAAU8yC,GAKpD,OAJY1vC,EAASA,EAAS,GAAI0vC,GAAU,CAC1Cva,WAAYlyB,EAAOkyB,WACnBE,UAAWpyB,EAAOoyB,oBA0iCkB4B,GAAQ58B,EAAMg9C,IACtDwF,GAAkB/L,IAlIE,SAAU18B,EAAMilC,EAAcxiC,EAAYikC,GAChE,IAAIpoC,EAAOyB,GAAmBC,GAAM1B,KAChCtF,EAAQisC,EAAajuC,MAAM,GAAG4H,OAC9BkkB,EAAUxkB,EAAK2mC,EAAajuC,MAAM,GAAG0H,KACrC6gC,EAAQyF,GAAYC,EAAahkB,UAAWgkB,EAAalkB,WAAY+B,GACrE4lB,EAAa9H,GAAW5nC,EAAOgH,EAAMu/B,EAAO0F,EAAalkB,WAAYte,GACrE06B,EAASyH,GAAgB8D,EAAYzD,EAAajuC,MAAM,GAAG0H,IAAKumC,EAAajuC,MAAM,GAAG4H,QAC1F,OAAO+lC,GAAQ+D,EAAYvL,KA2HgB4I,IAAsB,GAAO9/C,EAAMA,EAAMg9C,IAClF0F,GAAiBjM,IA1HE,SAAU18B,EAAMilC,EAAcxiC,EAAYikC,GAC/D,IAAIpoC,EAAOyB,GAAmBC,GAAM1B,KAChCtF,EAAQisC,EAAajuC,MAAMiuC,EAAajuC,MAAMvQ,OAAS,GAAGmY,OAASqmC,EAAajuC,MAAMiuC,EAAajuC,MAAMvQ,OAAS,GAAGqQ,QACrHgsB,EAAUxkB,EAAK2mC,EAAajuC,MAAM,GAAG0H,KACrC6gC,EAAQyF,GAAYC,EAAahkB,UAAWgkB,EAAalkB,WAAY+B,GACrE4lB,EAAa9H,GAAW5nC,EAAOgH,EAAMu/B,EAAO0F,EAAalkB,WAAYte,GACrE06B,EAASyH,GAAgB8D,EAAYzD,EAAajuC,MAAM,GAAG0H,IAAKumC,EAAajuC,MAAM,GAAG4H,QAC1F,OAAO+lC,GAAQ+D,EAAYvL,KAmHc4I,IAAsB,GAAQ9/C,EAAMA,EAAMg9C,IACjF2F,GAAkBlM,IAlHE,SAAU18B,EAAMilC,EAAcxiC,EAAYikC,GAChE,IAAIpoC,EAAOyB,GAAmBC,GAAM1B,KAChCtF,EAAQisC,EAAajuC,MAAM,GAAG0H,IAC9BokB,EAAUxkB,EAAKtF,GACfumC,EAAQyF,GAAYC,EAAahkB,UAAWgkB,EAAalkB,WAAY+B,GACrE4lB,EAAaxH,GAAWloC,EAAOgH,EAAMu/B,EAAO0F,EAAalkB,WAAYte,GACrE06B,EAASyH,GAAgB8D,EAAYzD,EAAajuC,MAAM,GAAG0H,IAAKumC,EAAajuC,MAAM,GAAG4H,QAC1F,OAAO+lC,GAAQ+D,EAAYvL,KA2GgBK,GAAiBv3C,EAAMA,EAAMg9C,IACtE4F,GAAiBnM,IA1GE,SAAU18B,EAAMilC,EAAcxiC,EAAYikC,GAC/D,IAAIpoC,EAAOyB,GAAmBC,GAAM1B,KAChCtF,EAAQisC,EAAajuC,MAAMiuC,EAAajuC,MAAMvQ,OAAS,GAAGiY,IAAMumC,EAAajuC,MAAMiuC,EAAajuC,MAAMvQ,OAAS,GAAGoQ,QAClHisB,EAAUxkB,EAAK2mC,EAAajuC,MAAM,GAAG0H,KACrC6gC,EAAQyF,GAAYC,EAAahkB,UAAWgkB,EAAalkB,WAAY+B,GACrE4lB,EAAaxH,GAAWloC,EAAOgH,EAAMu/B,EAAO0F,EAAalkB,WAAYte,GACrE06B,EAASyH,GAAgB8D,EAAYzD,EAAajuC,MAAM,GAAG0H,IAAKumC,EAAajuC,MAAM,GAAG4H,QAC1F,OAAO+lC,GAAQ+D,EAAYvL,KAmGcK,GAAiBv3C,EAAMA,EAAMg9C,IACpE6F,GAlGkB,SAAUzqC,EAAOxP,GACrC,IAAIgwB,EAAQtc,GAAoBlE,GAEhC,OADco/B,GAAQ5e,EAAOhwB,GACdnG,MAAK,SAAU02B,GAC5B,IAAI2pB,EAAmB3pB,EAAcA,EAAc34B,OAAS,GACxDuiD,EAAc5pB,EAAc,GAAGxgB,OAC/BqqC,EAAcF,EAAiBnqC,OAASmqC,EAAiBjyC,QACzDoyC,EAAsB99C,EAAQ5C,EAAIq2B,EAAMl4B,KAAK,SAAU+X,GACzD,OAAO7V,EAAO6V,EAAI1H,OAAO,SAAUmG,GACjC,OAAOA,EAAKyB,QAAUoqC,GAAe7rC,EAAKyB,OAASqqC,SAGvD,OAAO9D,GAAa+D,GAAqB,SAAU/rC,GACjD,MAA8B,OAAvBhY,GAAKgY,EAAKhJ,eAElBrM,MAAM,KAqFP2W,GAAa,SAAUT,GACzB,OAAO2e,GAAY3e,EAAI3F,aAWrB8wC,GAAkB,SAAUtsB,EAAQ7e,GACtC,IAAIorC,EAA8B,UAApB3qC,GAAWT,GACrBqrC,GAAkB1gD,EAAOqV,EAAIhH,OAAO,SAAU6Y,GAChD,MAA0B,OAAnB8M,GAAY9M,MAErB,OAAOu5B,GAAWC,EAAiB3/C,EAASR,KAAK,CAC/CogD,MAAOF,EACPG,IAAKF,IACF3/C,EAASrC,QAEZmiD,GAAa,SAAU3sB,EAAQ7e,GACjC,MAnBgB,WADmB/G,EAoBPkyC,GAAgBtsB,EAAQ7e,GAAKvW,MAAK,WAC5D,OAAOgX,GAAWT,MACjB,SAAUyrC,GACX,MAAO,YArBA,SACc,UAAZxyC,EACF,SAEA,OANgB,IAAUA,GA0BjCyyC,GAAmB,SAAU72C,EAAK82C,EAAQC,GAC5C,IAAIC,EAAWh3C,EAAI+tB,UAAU+oB,EAAQ,SACjCG,EAAgBH,EAAOtxC,WACvB0xC,EAAiBptB,GAAYmtB,GACjC,GAAIF,IAAmBG,EAAgB,CACrC,IAAIC,EAAen3C,EAAIulC,OAAOwR,EAAgBC,GAAU,GACxD,IAAKG,EAAc,CACjBA,EAAen3C,EAAIwU,OAAOuiC,GAC1B,IAAIK,EAAoBJ,EAASxkC,WACV,UAAnBukC,EACFn+C,EAAK4O,GAAWvH,GAAaH,QAAQk3C,GAAW,qBAAqBpiD,MAAK,WACxE,OAAOoiD,EAAS3kC,aAAa8kC,EAAcC,MAC1C,SAAUp6B,GACX,OAAOhd,EAAIq3C,YAAYF,EAAcn6B,EAAEhd,QAGzCg3C,EAASvkC,YAAY0kC,GAGF,UAAnBJ,GAAiD,UAAnBG,GAA8BC,EAAa3kC,WAC3E2kC,EAAa9kC,aAAaykC,EAAQK,EAAa3kC,YAE/C2kC,EAAa1kC,YAAYqkC,GAEtBG,EAAcx2C,iBACjBT,EAAI+I,OAAOkuC,KAabK,GAAiB,SAAUttB,EAAQ1f,EAAMitC,EAAan3C,GACxD,IAAIJ,EAAMgqB,EAAOhqB,IACbipB,EAXW,SAAUe,EAAQ1f,EAAMitC,GACvC,GAAIvkD,EAAcukD,IAAgBztB,GAAYxf,KAAUitC,EAAa,CACnE,IAAI9B,EAAazrB,EAAOhqB,IAAIw3C,OAAOltC,EAAMitC,GAEzC,OADAlW,GAAYrX,EAAQyrB,GACbA,EAEP,OAAOnrC,EAKKmtC,CAAWztB,EAAQ1f,EAAMitC,GAIvC,OAHK1kD,EAAYuN,IACfJ,EAAI03C,UAAUzuB,EAAS,QAAS7oB,GAE3B6oB,GAEL0uB,GAAkB,SAAU3tB,EAAQ7lB,EAAOozC,EAAan3C,GAC1D,OAAOxK,EAAKuO,GAAO,SAAU6Y,GAC3B,OAAOs6B,GAAettB,EAAQhN,EAAGu6B,EAAan3C,OAG9Cw3C,GAAoB,SAAU5tB,EAAQ8sB,EAAQ3jB,GAChD,IACM0kB,EAaF73C,EAAMgqB,EAAOhqB,IACjB,GAAgB,WAAZmzB,EAAsB,CACxB,IAAI2kB,EAAuBhV,GAAmB9Y,GAC1C+tB,EAAyC,SAAzBD,GAhBhBD,EAAersC,GAAMvL,GAAaH,QAAQg3C,EAAO3yC,MAAM,KAAKxO,KAAI,SAAU6V,GAC5E,OAAOC,GAAKD,MACXvW,MAAM,IACF4D,EAAQg/C,GAAc,SAAUhsC,GACrC,OAAOyqC,GAAgBtsB,EAAQne,EAAI7L,QAClCrK,KAAI,SAAUqiD,GACf,OAAIA,EAAavB,OAASuB,EAAatB,IAC9B,eAEAsB,EAAavB,MAAQ,UAAY,WAEzCxhD,MAAM,YAKwE6iD,EACjFH,GAAgB3tB,EAAQ8sB,EAAO3yC,MAAyB,YAAlB4zC,EAA8B,KAAO,KAAM,OACjFlB,GAAiB72C,EAAK82C,EAA0B,UAAlBiB,EAA4B,QAAU,cAEpEJ,GAAgB3tB,EAAQ8sB,EAAO3yC,MAAO,KAAM,MAC5C0yC,GAAiB72C,EAAK82C,EAAoB,WAAZ3jB,EAAuB,QAAU,UAa/D8kB,GAAgC,SAAU12C,GAC5C,OAAO,SAAUlG,EAAOqK,GACtB,IAAIwyC,EAAgB5lD,GAAK+I,GACrBsV,EAA8B,QAAlBunC,GAA6C,aAAlBA,EAZX,SAAU78C,GAC5C,OAAOmQ,GAAMnQ,GAAOxF,MAAK,SAAU2V,GACjC,OAAOiN,GAAWjN,EAAO0f,GAASrT,0BACjCjjB,MAAK,WACN,OAAOyG,KACN,SAAU8I,GACX,OAAOA,EAAM,MAM6Dg0C,CAA8B98C,GAASA,EACjH,OAAOiN,GAAUqI,EAAWpP,EAAUmE,KAGtC0yC,GAAwBH,GAA8B,SACtDI,GAAiCJ,GAA8B,iBAC/DK,GAAwB,SAAUj9C,EAAOwvB,EAAYnlB,GACvD,OAAO0yC,GAAsB/8C,EAAOqK,GAAQ/P,KAAI,SAAU4iD,GACxD,OAAO5tB,GAAUE,MAChB51B,MAAM,KAEPujD,GAAuB,SAAUn9C,EAAOkG,GAC1C,IAx9IoBk3C,EAAIC,EAAIrkD,EAw9IxB+vB,EAAUg0B,GAAsB/8C,GAChCs9C,EAAUv0B,EAAQvuB,MAAK,SAAUyU,GACnC,OAAOkB,GAAMlB,MACZ3U,KAAI,SAAU6V,GACf,OAAOC,GAAKD,MAEd,OA99IoBitC,EA89IPr0B,EA99IWs0B,EA89IFC,EA99IMtkD,EA89IG,SAAUiW,EAAMmB,GAC7C,OAAOzV,EAAOyV,GAAM,SAAUI,GAC5B,OAAO/V,EAAO8zB,GAAU/d,EAAI7L,IAAImE,QAAQ,SAAU+K,GAChD,MAAoC,MAA7BtG,GAAMsG,EAAS3N,IAAqBQ,GAAKmN,EAAS5E,UAh+IxDmuC,EAAGzjD,UAAY0jD,EAAG1jD,SAAW6B,EAASR,KAAKhC,EAAEokD,EAAGrjD,WAAYsjD,EAAGtjD,aAAeyB,EAASrC,QAm+I3FS,MAAM,KAyIP2jD,GAAuB,CACzB5kC,OAAQ,CACN,kBAAmB,WACnB,MAAS,QAEX9K,WAAY,CAAE04B,OAAQ,KACtBiX,WAAW,GAiCTC,GAAa,SAAUrtC,EAAMJ,EAAS0tC,EAAYC,GACpD,OAAOphD,EAAM6T,GAAM,SAAU3T,GAC3B,OAxBY,SAAUuT,EAAS0tC,EAAYC,EAAehyB,GAE5D,IADA,IAAIugB,EAAKtnC,GAAaY,QAAQ,MACrBrH,EAAI,EAAGA,EAAI6R,EAAS7R,IAAK,CAChC,IAAIytB,EAXChnB,GAAaY,QAWTmmB,EAAW+xB,GAAcv/C,EAAIw/C,EAXZ,KAGA,MAStBx/C,EAAIw/C,GACNvwC,GAAIwe,EAAI,QAAS,OAEfD,EAAW+xB,GACbtwC,GAAIwe,EAAI,QAAS,OAEnB3U,GAAO2U,EAAIhnB,GAAaY,QAAQ,OAChCyR,GAAOi1B,EAAItgB,GAEb,OAAOsgB,EAWE0R,CAAU5tC,EAAS0tC,EAAYC,EAAelhD,OAyCrDohD,GAAmB,SAAUlvB,EAAQ1f,GACvC0f,EAAOW,UAAU4a,OAAOj7B,EAAKtK,KAAK,GAClCgqB,EAAOW,UAAUwuB,UAAS,IAgBxBC,GAAW,SAAUpvB,EAAQ3e,EAASI,EAAM4tC,EAAYN,GAC1D,IAAIrX,EAAgBQ,GAAiBlY,GACjCkR,EAAU,CACZlnB,OAAQ0tB,EACRx4B,WAAY+4B,GAAqBjY,GACjC6uB,UAAWhW,GAAe7Y,IAS5B,OAPAA,EAAOqb,YAAY6B,QAAO,WACxB,IAAI17B,EAhEO,SAAUC,EAAMJ,EAAS0tC,EAAYC,EAAeM,EAAYC,QAC1D,IAAfA,IACFA,EAAaX,IAEf,IAAIptC,EAAQvL,GAAaY,QAAQ,SAC7B24C,EAAqC,UAAfF,EAC1B3vC,GAAS6B,EAAO+tC,EAAWvlC,QAC3BtL,GAAO8C,EAAO+tC,EAAWrwC,YACrBqwC,EAAWV,WACbvmC,GAAO9G,EArBU,SAAUH,GAC7B,IAAIE,EAActL,GAAaY,QAAQ,YAIvC,OAHAjJ,EAAMyT,GAAS,WACb,OAAOiH,GAAO/G,EApBTtL,GAAaY,QAAQ,WAsBrB0K,EAgBSkuC,CAAepuC,IAE/B,IAAIquC,EAAmBlqC,KAAK2B,IAAI1F,EAAMstC,GACtC,GAAIS,GAAuBT,EAAa,EAAG,CACzC,IAAItC,EAAQx2C,GAAaY,QAAQ,SACjCyR,GAAO9G,EAAOirC,GACd,IACIkD,EAAYb,GAAWC,EAAY1tC,EADF,iBAAfiuC,EAAgCI,EAAmB,EACRV,GACjElmC,GAAS2jC,EAAOkD,GAElB,IAAIC,EAAQ35C,GAAaY,QAAQ,SACjCyR,GAAO9G,EAAOouC,GACd,IAEIC,EAAYf,GAFFU,EAAsB/tC,EAAOiuC,EAAmBjuC,EAE1BJ,EADhBmuC,EAAsB,EAAIT,EACcC,GAE5D,OADAlmC,GAAS8mC,EAAOC,GACTruC,EAuCOsuC,CAASruC,EAAMJ,EAAS0tC,EAAYM,EAAYvW,GAAmB9Y,GAASkR,GACxFzyB,GAAI+C,EAAO,cAAe,SAC1B,IAAIrL,EAnCS,SAAUmB,GACzB,IAAI2U,EAAYhW,GAAaY,QAAQ,OACjCoI,EAAQhJ,GAAaH,QAAQwB,EAAQtB,IAAIyU,WAAU,IAEvD,OADAnC,GAAO2D,EAAWhN,GANR,SAAU3H,GACpB,OAAOA,EAAQtB,IAAIQ,UAMZu5C,CAAM9jC,GA+BA+jC,CAAWxuC,GACtBwe,EAAOiwB,cAAc95C,GACrB6pB,EAAOkwB,eAEF/xC,GAAa4hB,GAAUC,GAAS,8BAA8Br0B,KAAI,SAAU6V,GAYjF,OAXI22B,GAAenY,GACjB0Z,GAAc1Z,EAAQxe,GACb62B,GAAmBrY,GAC5B6Z,GAAYr4B,IACHo3B,GAAoB5Y,IAtBd,SAAU3J,GAC7B,OAAO5tB,EAAS4tB,KAAkC,IAAxBA,EAAMnpB,QAAQ,KAqBIijD,CAAezY,EAAcrhB,SACrEmjB,GAAkBxZ,EAAQxe,GAE5B4e,GAAgB5e,GAChBzC,GAAOyC,EAAO,eAlCD,SAAUwe,EAAQxe,GACjC5V,EAAK8R,GAAc8D,EAAO,OAAO,SAAUK,GACzCs1B,GAAWnX,EAAQne,EAAI7L,KACvBpK,EAAK8R,GAAcmE,EAAK,UAAU,SAAUvB,GAC1C+2B,GAAYrX,EAAQ1f,EAAKtK,WA+B3Bo6C,CAAWpwB,EAAQxe,GAtCM,SAAUwe,EAAQgtB,GAC7C7uC,GAAa6uC,EAAU,SAASphD,KAAKrC,EAAM2lD,GAAkBlvB,IAsC3DqwB,CAAuBrwB,EAAQxe,GACxBA,EAAMxL,OACZ/K,MAAM,OAEPqlD,GAAgC,SAAUtwB,EAAQve,EAAMJ,EAAS6vB,EAASqf,QAC5D,IAAZrf,IACFA,EAAU,IAEZ,IAAIsf,EAAa,SAAUz+B,GACzB,OAAO5oB,EAAS4oB,IAAQA,EAAM,GAEhC,GAAIy+B,EAAW/uC,IAAS+uC,EAAWnvC,GAAU,CAC3C,IAAIovC,EAAavf,EAAQuf,YAAc,EACnCC,EAAgBxf,EAAQwf,eAAiB,EAC7C,OAAOtB,GAASpvB,EAAQ3e,EAASI,EAAMivC,EAAeD,GAGtD,OADA95C,QAAQC,MAAM25C,GACP,MAIPI,GAAuB,SAAUC,GACnC,OAAO,WACL,OAAOA,IAAehmD,MAAK,WACzB,MAAO,MACN,SAAU+W,GACX,OAAOhW,EAAIgW,GAAO,SAAUzG,GAC1B,OAAOA,EAAElF,YAKb66C,GAAuB,SAAUC,GACnC,OAAO,SAAUnvC,GACf,IAAIovC,EAAUpvC,EAAM/X,OAAS,EAAIiD,EAASR,KAAKuzB,GAAUje,IAAU9U,EAASrC,OAC5EsmD,EAAaC,KAGbC,GAAc,SAAUhxB,GAC1B,OAAO,SAAU3e,EAASI,EAAMyvB,QACd,IAAZA,IACFA,EAAU,IAEZ,IAAI1vB,EAAQ8uC,GAA8BtwB,EAAQve,EAAMJ,EAAS6vB,EAAS,4FAE1E,OADAlR,EAAOqb,YAAYpR,MACZzoB,IAePyvC,GAAgB,SAAU35C,EAASkI,EAAUzX,GAC/C,IAAImpD,EAAiB7wC,GAAa/I,EAASkI,EAAU,GACvC,IAAVzX,GAAempD,GAAkB,EACnCnyC,GAAOzH,EAASkI,GAEhBf,GAAInH,EAASkI,EAAUgG,KAAK2B,IAAIpf,EAAOmpD,KAoEvCC,GAAWpgC,QAAQC,KAAKC,MAAMC,QAAQ,sBAEtCkgC,GAAsB,SAAUp7C,EAAKmL,EAAK7Y,GAe5C,OAZoB,SAAU+oD,EAAiBC,GAC7C,IAAK,IAAI5jD,EAAI,EAAGA,EAAI4jD,EAAK1nD,OAAQ8D,IAAK,CACpC,IAAI6jD,EAAev7C,EAAIuqB,SAAS+wB,EAAK5jD,GAAIpF,GAIzC,QAH+B,IAApB+oD,IACTA,EAAkBE,GAEhBF,IAAoBE,EACtB,MAAO,GAGX,OAAOF,EAEFG,MAbHH,EADQr7C,EAAIulC,OAAO,QAASp6B,KAgB9BswC,GAAa,SAAUzxB,EAAQ7e,EAAK7Y,GAClCA,GACF03B,EAAO0xB,UAAU1nD,MAAM,QAAU1B,EAAM,GAAI6Y,IAQ3CwwC,GAAe,SAAU3xB,EAAQ7e,GACnCgwC,GAASvlD,KAAK,oBAAoB0kC,MAAM,MAAM,SAAUhoC,GACtD03B,EAAO0xB,UAAU3yC,OAAO,QAAUzW,EAAM,GAAI6Y,OAY5CywC,GAAiB,SAAUC,EAAWC,GAiBxC,OAhB4B9nB,EAgBT6nB,GAAWC,GAAc,IAf/B/nD,OAAO4B,EAAIq+B,GAAQ,SAAUrkB,GACtC,IAAI3O,EAAO2O,EAAK3O,MAAQ2O,EAAKosC,MAC7B,OAPY,SAAUpsC,GAC1B,OAAO9L,GAAkB8L,EAAM,QAMvBqsC,CAAYrsC,GACP,CACL3O,KAAMA,EACNi7C,MAAOL,GAAejsC,EAAKusC,OAGtB,CACLl7C,KAAMA,EACNjP,MAAO4d,EAAK5d,WAXF,IAAUiiC,GAkB1BmoB,GAAW,SAAUn8C,GACvB,OAAO,SAAUjO,GACf,OAAOwJ,GAAWxJ,EAAO,OAASiO,EAAIo8C,MAAMrqD,GAASA,IAGrDsqD,GAAwB,SAAUr8C,EAAKmL,GACzC,IAAI7J,EAAUrB,GAAaH,QAAQqL,GACnC,MAAO,CACLmxC,YAAatyC,GAAO1I,EAAS,gBAAgBrM,MAAM,IACnDsnD,YAAavyC,GAAO1I,EAAS,gBAAgBrM,MAAM,IACnDunD,YAAaxyC,GAAO1I,EAAS,gBAAgB3L,IAAIwmD,GAASn8C,IAAM/K,MAAM,IACtEwnD,gBAAiBzyC,GAAO1I,EAAS,oBAAoB3L,IAAIwmD,GAASn8C,IAAM/K,MAAM,MAG9EynD,GAAkB,SAAUnuB,GAC9B,IAAIouB,EAAWpuB,EAAK,GAChBquB,EAAiBruB,EAAKv3B,MAAM,GAahC,OAZApB,EAAKgnD,GAAgB,SAAUX,GAC7BrmD,EAAKgN,GAAK+5C,IAAW,SAAUh5C,GAC7Bd,GAAOo5C,GAAO,SAAUY,EAAWC,GACjC,IAAIC,EAAkBJ,EAASh5C,GACP,KAApBo5C,GAA0Bp5C,IAAQm5C,GAChCC,IAAoBF,IACtBF,EAASh5C,GAAO,aAMnBg5C,GAELK,GAAiB,SAAUC,GAC7B,IAAIC,EAAc,CAChB,CACE5qD,KAAM,cACNR,KAAM,UACNqoB,MAAO,eACP8hC,MAAO,CACL,CACEj7C,KAAM,YACNjP,MAAO,IAET,CACEiP,KAAM,QACNjP,MAAO,SAET,CACEiP,KAAM,SACNjP,MAAO,UAET,CACEiP,KAAM,SACNjP,MAAO,UAET,CACEiP,KAAM,SACNjP,MAAO,UAET,CACEiP,KAAM,SACNjP,MAAO,UAET,CACEiP,KAAM,QACNjP,MAAO,SAET,CACEiP,KAAM,QACNjP,MAAO,SAET,CACEiP,KAAM,SACNjP,MAAO,UAET,CACEiP,KAAM,OACNjP,MAAO,QAET,CACEiP,KAAM,SACNjP,MAAO,YAIb,CACEO,KAAM,cACNR,KAAM,aACNqoB,MAAO,gBAET,CACE7nB,KAAM,kBACNR,KAAM,aACNqoB,MAAO,qBASX,MAAO,CACL4hC,MAAO,WACPzpD,KAAM,WACN2pD,MAJyB,SAAfgB,EAAwB,CALlB,CAChB3qD,KAAM,cACNR,KAAM,QACNqoB,MAAO,iBAEyCpmB,OAAOmpD,GAAeA,IAOtEC,GAAe,SAAUr0B,EAASs0B,EAAYpzB,EAAQ7e,GACxD,OAAOhT,EAAK2wB,GAAS,SAAUx2B,GAC7B,OAAO03B,EAAO0xB,UAAU2B,UAAUlyC,EAAKiyC,EAAa9qD,MACnD2C,MAAM,KAEPqoD,GAAgB/pD,EAAM4pD,GAAc,CACtC,OACA,SACA,SACC,SACCI,GAAgBhqD,EAAM4pD,GAAc,CACtC,MACA,SACA,UACC,UA2GCK,GAAa,CACf,CACElrD,KAAM,QACNR,KAAM,QACNqoB,MAAO,SAET,CACE7nB,KAAM,SACNR,KAAM,QACNqoB,MAAO,UAET,CACE7nB,KAAM,WACNR,KAAM,UACNqoB,MAAO,YACP8hC,MAAO,CACL,CACEj7C,KAAM,OACNjP,MAAO,MAET,CACEiP,KAAM,cACNjP,MAAO,QAIb,CACEO,KAAM,QACNR,KAAM,UACNqoB,MAAO,QACP8hC,MAAO,CACL,CACEj7C,KAAM,OACNjP,MAAO,IAET,CACEiP,KAAM,MACNjP,MAAO,OAET,CACEiP,KAAM,SACNjP,MAAO,OAET,CACEiP,KAAM,YACNjP,MAAO,YAET,CACEiP,KAAM,eACNjP,MAAO,cAIb,CACEO,KAAM,SACNR,KAAM,UACNqoB,MAAO,mBACP8hC,MAAO,CACL,CACEj7C,KAAM,OACNjP,MAAO,IAET,CACEiP,KAAM,OACNjP,MAAO,QAET,CACEiP,KAAM,SACNjP,MAAO,UAET,CACEiP,KAAM,QACNjP,MAAO,WAIb,CACEO,KAAM,SACNR,KAAM,UACNqoB,MAAO,iBACP8hC,MAAO,CACL,CACEj7C,KAAM,OACNjP,MAAO,IAET,CACEiP,KAAM,MACNjP,MAAO,OAET,CACEiP,KAAM,SACNjP,MAAO,UAET,CACEiP,KAAM,SACNjP,MAAO,aAKX0rD,GAAW,SAAUzzB,GACvB,OAAOwzB,GAAWzpD,OAjHD,SAAUi2B,GAC3B,IAAI0zB,EAAU9B,GA18EO,SAAU5xB,GAC/B,OAAOA,EAAO+X,SAAS,wBAAyB,GAAI,SAy8EvB4b,CAAiB3zB,IAC9C,OAAI0zB,EAAQ9pD,OAAS,EACZiD,EAASR,KAAK,CACnB/D,KAAM,QACNR,KAAM,UACNqoB,MAAO,QACP8hC,MAAOyB,IAGJ7mD,EAASrC,OAuGSopD,CAAa5zB,GAAQ7zB,YAG5C0nD,GAAY,SAAUC,GACxB,OAAO,SAAU9zB,EAAQjqB,GACvB,IAAIC,EAAMgqB,EAAOhqB,IAoBjB,MAAO,CACL03C,UApBc,SAAUvuC,EAAMpX,GACzB+rD,IAAc/rD,GACjBiO,EAAI03C,UAAU33C,EAAMoJ,EAAMpX,IAmB5BgsD,SAhBa,SAAU75B,EAAMnyB,GACxB+rD,IAAc/rD,GACjBiO,EAAI+9C,SAASh+C,EAAMmkB,EAAMnyB,IAe3BisD,UAZc,SAAUZ,EAAYrrD,GAC/B+rD,IAAc/rD,IACH,KAAVA,EACFi4B,EAAO0xB,UAAU3yC,OAAOq0C,EAAY,CAAErrD,MAAO,MAAQgO,GAAM,GAE3DiqB,EAAO0xB,UAAU1nD,MAAMopD,EAAY,CAAErrD,MAAOA,GAASgO,QAW3Dk+C,GAAc,CAChBC,OAAQL,IAAU,GAClBM,SAAUN,IAAU,IAGlBO,GAAmB,SAAUj6C,GAC/B,OAAOqH,GAAMrH,EAAM,IAAIxO,KAAI,SAAU6V,GACnC,IAAI2C,EAAYuB,GAAoBlE,GAChC8gB,EAAW5c,GAAoBvB,GAC/B0B,EAAW7Z,EAAOs2B,GAAU,SAAU+xB,GACxC,OAAOvoD,EAAOqO,GAAO,SAAUm6C,GAC7B,OAAOv8C,GAAKs8C,EAAM/8C,QAASg9C,SAG/B,OAAO3oD,EAAIka,GAAU,SAAUvF,GAC7B,MAAO,CACLhJ,QAASgJ,EAAKhJ,QAAQtB,IACtB+L,OAAQ2D,GAAsBvB,EAAW7D,EAAKyB,QAAQpW,KAAI,SAAU+mB,GAClE,OAAOA,EAAIpb,QAAQtB,eA2DzBu+C,GAAmB,SAAUv0B,EAAQ7lB,EAAOq6C,EAASnrC,GACvD,IAAIkb,EAAOlb,EAAIorC,UACfprC,EAAIqrC,QACJ10B,EAAOqb,YAAYsZ,UAAS,YA5CV,SAAU30B,EAAQ7lB,EAAOq6C,EAASjwB,GACpD,IAAIqwB,EAAgC,IAAjBz6C,EAAMvQ,OACrBirD,EAAe17C,GAASorB,GAAM,SAAUx8B,EAAO4R,GACjD,OAAO66C,EAAQ76C,KAAS5R,KAE1B,GAAI0R,GAAKo7C,GAAgB,GAAK16C,EAAMvQ,QAAU,EAAG,CAC/C,IAAIkrD,EAAWtzC,GAAMrH,EAAM,IAC3Bi6C,GAAiBj6C,GAAOvO,MAAK,SAAU22B,GACrC32B,EAAK22B,GAAe,SAAU5c,GAC5B,IAAIovC,EAAUzH,GAAettB,EAAQra,EAAKrO,QAASitB,EAAKywB,UACpDC,EAAWL,EAAeX,GAAYC,OAAOl0B,EAAQ+0B,GAAWd,GAAYE,SAASn0B,EAAQ+0B,IAtBjF,SAAUE,EAAUC,EAAa3wB,GACvD0wB,EAASvH,UAAU,QAASnpB,EAAKnuB,OACjC6+C,EAASvH,UAAU,QAASnpB,EAAK4wB,OACjCF,EAASlB,SAAS,SAAU5zB,GAAYoE,EAAKhR,SAC7C2hC,EAAYnB,SAAS,QAAS5zB,GAAYoE,EAAKlO,QAsBzC++B,CAAkBH,EAHAtvC,EAAK5D,OAAOpW,KAAI,SAAU+mB,GAC1C,OAAOkiC,EAAeX,GAAYC,OAAOl0B,EAAQtN,GAAOuhC,GAAYE,SAASn0B,EAAQtN,MACpFznB,MAAMgqD,GACgC1wB,GACrCiU,GAAmBxY,IArBL,SAAUi1B,EAAU1wB,GAC5C0wB,EAASjB,UAAU,2BAA4BzvB,EAAKkuB,iBACpDwC,EAASjB,UAAU,uBAAwBzvB,EAAKiuB,aAChDyC,EAASjB,UAAU,uBAAwBzvB,EAAKguB,aAChD0C,EAASjB,UAAU,uBAAwB7zB,GAAYoE,EAAK+tB,cAkBpD+C,CAAoBJ,EAAU1wB,GAE5BqwB,IACFjD,GAAa3xB,EAAQ+0B,GA5bX,SAAU/0B,EAAQ7e,GACpCgwC,GAASvlD,KAAK,oBAAoB0kC,MAAM,MAAM,SAAUhoC,GACtD03B,EAAO0xB,UAAU3yC,OAAO,SAAWzW,EAAM,GAAI6Y,MA2bvCm0C,CAAct1B,EAAQ+0B,IAEpBxwB,EAAKgxB,QACP9D,GAAWzxB,EAAQ+0B,EAASxwB,EAAKgxB,QAE/BhxB,EAAKixB,QA5cC,SAAUx1B,EAAQ7e,EAAK7Y,GACnCA,GACF03B,EAAO0xB,UAAU1nD,MAAM,SAAW1B,EAAM,GAAI6Y,GA2ctCs0C,CAAYz1B,EAAQ+0B,EAASxwB,EAAKixB,cAIxC,IAAIE,EAAkBj8C,GAAKN,GAAS07C,GAAc,SAAUvc,EAAQ3+B,GAClE,MAAe,UAARA,GAA2B,aAARA,MACtB,EACNm7C,EAASlpD,MAAK,SAAU4V,GACtB,OAAO81B,GAAkBtX,EAAQxe,EAAMxL,IAAK,CAC1CwhC,UAAW59B,GAAIi7C,EAAc,YAC7Bx1C,MAAOq2C,SASXC,CAAc31B,EAAQ7lB,EAAOq6C,EAASjwB,GACtCvE,EAAO0E,YAWPkxB,GAAO,SAAU51B,EAAQa,GAC3B,IAAI1mB,EAAQm0C,GAAsB5tB,GAAkBV,GAASa,GAC7D,GAAqB,IAAjB1mB,EAAMvQ,OAAV,CAGA,IAAI26B,EAbQ,SAAUvE,EAAQ7lB,GAC9B,IAAI07C,EAAYzB,GAAiBj6C,GAAOxO,KAAI,SAAU42B,GACpD,OAAO52B,EAAI42B,GAAe,SAAU5c,GAClC,OA1P2B,SAAUqa,EAAQ1f,EAAMk4B,EAAoBz2B,GAC3E,IAAI/L,EAAMgqB,EAAOhqB,IACb8/C,EAAS/zC,EAAO9W,MAAMqV,GACtBigB,EAAW,SAAUjpB,EAAS+H,GAChC,OAAOrJ,EAAIuqB,SAASjpB,EAAS+H,IAAUrJ,EAAIwqB,UAAUlpB,EAAS+H,IAEhE,OAAOtQ,EAAS,CACdsnB,MAAOkK,EAASu1B,EAAQ,SACxBviC,OAAQgN,EAASjgB,EAAM,UACvBlK,MAAOJ,EAAIwqB,UAAUlgB,EAAM,SAC3B00C,SAAUl1B,GAAYxf,GACtB60C,MAAOn/C,EAAIwqB,UAAUlgB,EAAM,QAAS,IACpCi1C,OAAQjC,GAActzB,EAAQ1f,GAC9Bk1C,OAAQjC,GAAcvzB,EAAQ1f,IAC7Bk4B,EAAqB6Z,GAAsBr8C,EAAKsK,GAAQ,IA4OhDy1C,CAA2B/1B,EAAQra,EAAKrO,QAASkhC,GAAmBxY,GAASra,EAAK5D,cAG7F,OAAO2wC,GAAgBmD,EAAUzqD,YAOtBqpD,CAAQz0B,EAAQ7lB,GACvB67C,EAAiB,CACnBluD,KAAM,WACNmuD,KAAM,CACJ,CACElE,MAAO,UACPzpD,KAAM,UACN2pD,MAAOwB,GAASzzB,IAElBgzB,GAAe,UAGfkD,EAAc,CAChBpuD,KAAM,QACNmqD,MAAO,CAAC,CACJnqD,KAAM,OACNuZ,QAAS,EACT4wC,MAAOwB,GAASzzB,MAGtBA,EAAOm2B,cAAcP,KAAK,CACxB7D,MAAO,kBACPt4C,KAAM,SACNwD,KAAMu7B,GAAmBxY,GAAUg2B,EAAiBE,EACpDE,QAAS,CACP,CACEtuD,KAAM,SACNQ,KAAM,SACN0O,KAAM,UAER,CACElP,KAAM,SACNQ,KAAM,OACN0O,KAAM,OACNq/C,SAAS,IAGbC,YAAa/xB,EACbgyB,SAAUhtD,EAAMgrD,GAAkBv0B,EAAQ7lB,EAAOoqB,OAgBjDiyB,GAAe,CACjB,CACE1uD,KAAM,UACNQ,KAAM,OACN6nB,MAAO,WACP8hC,MAAO,CACL,CACEj7C,KAAM,SACNjP,MAAO,UAET,CACEiP,KAAM,OACNjP,MAAO,QAET,CACEiP,KAAM,SACNjP,MAAO,YAIb,CACED,KAAM,UACNQ,KAAM,QACN6nB,MAAO,YACP8hC,MAAO,CACL,CACEj7C,KAAM,OACNjP,MAAO,IAET,CACEiP,KAAM,OACNjP,MAAO,QAET,CACEiP,KAAM,SACNjP,MAAO,UAET,CACEiP,KAAM,QACNjP,MAAO,WAIb,CACEooB,MAAO,SACP7nB,KAAM,SACNR,KAAM,UAGN2uD,GAAa,SAAUz2B,GACzB,OAAOw2B,GAAazsD,OA9DD,SAAUi2B,GAC7B,IAAI0zB,EAAU9B,GApuFM,SAAU5xB,GAC9B,OAAOA,EAAO+X,SAAS,uBAAwB,GAAI,SAmuFtB2e,CAAgB12B,IAC7C,OAAI0zB,EAAQ9pD,OAAS,EACZiD,EAASR,KAAK,CACnB/D,KAAM,QACNR,KAAM,UACNqoB,MAAO,QACP8hC,MAAOyB,IAGJ7mD,EAASrC,OAoDWmsD,CAAe32B,GAAQ7zB,YA0ChDyqD,GAAkB,SAAU52B,EAAQve,EAAM+yC,EAASnrC,GACrD,IAAIkb,EAAOlb,EAAIorC,UACfprC,EAAIqrC,QACJ10B,EAAOqb,YAAYsZ,UAAS,YAjCX,SAAU30B,EAAQve,EAAM+yC,EAASjwB,GAClD,IAAIsyB,EAA8B,IAAhBp1C,EAAK7X,OACnBirD,EAAe17C,GAASorB,GAAM,SAAUx8B,EAAO4R,GACjD,OAAO66C,EAAQ76C,KAAS5R,KAE1B,GAAI0R,GAAKo7C,GAAgB,EAAG,CAC1BjpD,EAAK6V,GAAM,SAAUqrC,GACfvoB,EAAKz8B,OAASg4B,GAAYgtB,EAAOtxC,aACnCoyC,GAAkB5tB,EAAQ8sB,EAAQvoB,EAAKz8B,MAEzC,IAAImtD,EAAW4B,EAAc5C,GAAYC,OAAOl0B,EAAQ8sB,GAAUmH,GAAYE,SAASn0B,EAAQ8sB,IAnB3E,SAAUmI,EAAU1wB,GAC5C0wB,EAASvH,UAAU,QAASnpB,EAAK4wB,OACjCF,EAASlB,SAAS,SAAU5zB,GAAYoE,EAAKhR,SAkBzCujC,CAAoB7B,EAAU1wB,GAC1BkU,GAAkBzY,IAjBA,SAAUi1B,EAAU1wB,GAC9C0wB,EAASlB,SAAS,mBAAoBxvB,EAAKkuB,iBAC3CwC,EAASlB,SAAS,eAAgBxvB,EAAKiuB,aACvCyC,EAASlB,SAAS,eAAgBxvB,EAAKguB,aAejCwE,CAAsB9B,EAAU1wB,GAE9BA,EAAKyyB,QAAUxC,EAAQwC,QACzBrF,GAAa3xB,EAAQ8sB,GACrB2E,GAAWzxB,EAAQ8sB,EAAQvoB,EAAKyyB,WAGpC,IAAIC,EAAiBr9C,GAAIi7C,EAAc,QACnCa,GAAkBuB,GAAiBx9C,GAAKo7C,GAAgB,EAC5DrzC,GAAMvL,GAAaH,QAAQ2L,EAAK,KAAK7V,MAAK,SAAU4V,GAClD,OAAO81B,GAAkBtX,EAAQxe,EAAMxL,IAAK,CAC1CwhC,UAAWyf,EACX53C,MAAOq2C,SASXwB,CAAal3B,EAAQve,EAAM+yC,EAASjwB,GACpCvE,EAAO0E,YAGPyyB,GAAS,SAAUn3B,GACrB,IAAIve,EAAO+sC,GAAqB9tB,GAAkBV,GAASkB,GAASC,UACpE,GAAoB,IAAhB1f,EAAK7X,OAAT,CAGA,IAAIwtD,EAAWzrD,EAAI8V,GAAM,SAAUqrC,GACjC,OA7a4B,SAAU9sB,EAAQ7e,EAAKs3B,GACrD,IAAIziC,EAAMgqB,EAAOhqB,IACjB,OAAOjH,EAAS,CACdwkB,OAAQvd,EAAIuqB,SAASpf,EAAK,WAAanL,EAAIwqB,UAAUrf,EAAK,UAC1Dg0C,MAAOn/C,EAAIwqB,UAAUrf,EAAK,QAAS,IACnCrZ,KAAM6kD,GAAW3sB,EAAQ7e,GACzB61C,MAAO1D,GAActzB,EAAQ7e,IAC5Bs3B,EAAoB4Z,GAAsBr8C,EAAKmL,GAAO,IAsahDk2C,CAA0Br3B,EAAQ8sB,EAAO92C,IAAKyiC,GAAkBzY,OAErEuE,EAAOmuB,GAAgB0E,GACvBpB,EAAiB,CACnBluD,KAAM,WACNmuD,KAAM,CACJ,CACElE,MAAO,UACPzpD,KAAM,UACN2pD,MAAOwE,GAAWz2B,IAEpBgzB,GAAe,SAGfkD,EAAc,CAChBpuD,KAAM,QACNmqD,MAAO,CAAC,CACJnqD,KAAM,OACNuZ,QAAS,EACT4wC,MAAOwE,GAAWz2B,MAGxBA,EAAOm2B,cAAcP,KAAK,CACxB7D,MAAO,iBACPt4C,KAAM,SACNwD,KAAMw7B,GAAkBzY,GAAUg2B,EAAiBE,EACnDE,QAAS,CACP,CACEtuD,KAAM,SACNQ,KAAM,SACN0O,KAAM,UAER,CACElP,KAAM,SACNQ,KAAM,OACN0O,KAAM,OACNq/C,SAAS,IAGbC,YAAa/xB,EACbgyB,SAAUhtD,EAAMqtD,GAAiB52B,EAAQr0B,EAAI8V,GAAM,SAAU3T,GAC3D,OAAOA,EAAEkI,OACPuuB,OAIJ+yB,GAAWvmC,QAAQC,KAAKC,MAAMC,QAAQ,eAEtCqmC,GAAa,SAAUv3B,EAAQ0zB,EAAS8D,GAC1C,IAAIC,EAAoBD,EAAsB,CAC5C,CACE1vD,KAAM,QACNQ,KAAM,OACN6nB,MAAO,OACPunC,UAAW,WAEb,CACE5vD,KAAM,QACNQ,KAAM,OACN6nB,MAAO,OACPunC,UAAW,YAX0B,GA0BrCC,EAh7FqB,SAAU33B,GACnC,OAAOA,EAAO+X,SAAS,4BAA4B,EAAM,WA+6FnC6f,CAAqB53B,GAAU,CACnD,CACEl4B,KAAM,QACNQ,KAAM,cACN6nB,MAAO,eACPunC,UAAW,WAEb,CACE5vD,KAAM,QACNQ,KAAM,cACN6nB,MAAO,eACPunC,UAAW,WAEb,CACE5vD,KAAM,QACNQ,KAAM,SACN6nB,MAAO,gBAET,CACEroB,KAAM,QACNqoB,MAAO,UACP8hC,MAAO,CAAC,CACJnqD,KAAM,WACNQ,KAAM,UACN6nB,MAAO,mBAGX,GAwBA0nC,EAAgBnE,EAAQ9pD,OAAS,EAAI,CAAC,CACtC9B,KAAM,UACNQ,KAAM,QACN6nB,MAAO,QACP8hC,MAAOyB,IACJ,GACP,OAAO+D,EAAiB1tD,OArEN,CAChB,CACEjC,KAAM,QACNQ,KAAM,QACN6nB,MAAO,SAET,CACEroB,KAAM,QACNQ,KAAM,SACN6nB,MAAO,YA4DiCpmB,OAAO4tD,GAAiB5tD,OA7BhD,CAAC,CACjBjC,KAAM,UACNQ,KAAM,QACN6nB,MAAO,YACP8hC,MAAO,CACL,CACEj7C,KAAM,OACNjP,MAAO,IAET,CACEiP,KAAM,OACNjP,MAAO,QAET,CACEiP,KAAM,SACNjP,MAAO,UAET,CACEiP,KAAM,QACNjP,MAAO,aAU2EgC,OAAO8tD,IAG/FC,GAAY,SAAU9hD,EAAKmL,EAAK7Y,EAAMP,GACxC,GAAoB,OAAhBoZ,EAAIgmC,SAAoC,OAAhBhmC,EAAIgmC,QAC1B1+C,EAASH,GACX0N,EAAI+9C,SAAS5yC,EAAK7Y,EAAMP,GAExBiO,EAAI+9C,SAAS5yC,EAAK7Y,QAGpB,GAAI6Y,EAAIlF,SACN,IAAK,IAAIvO,EAAI,EAAGA,EAAIyT,EAAIlF,SAASrS,OAAQ8D,IACvCoqD,GAAU9hD,EAAKmL,EAAIlF,SAASvO,GAAIpF,EAAMP,IA2C1CgwD,GAAoB,SAAU/3B,EAAQgtB,EAAUwH,EAASnrC,GAC3D,IACI2uC,EADAhiD,EAAMgqB,EAAOhqB,IAEbuuB,EAAOlb,EAAIorC,UACXI,EAAe17C,GAASorB,GAAM,SAAUx8B,EAAO4R,GACjD,OAAO66C,EAAQ76C,KAAS5R,KAE1BshB,EAAIqrC,QACe,KAAfnwB,EAAK4wB,cACA5wB,EAAK4wB,MAEdn1B,EAAOqb,YAAYsZ,UAAS,WAC1B,IAAK3H,EAAU,CACb,IAAIzpC,EAAO/C,SAAS+jB,EAAKhhB,KAAM,KAAO,EAClC9B,EAAOjB,SAAS+jB,EAAK9iB,KAAM,KAAO,EACtCurC,EAAWoC,GAASpvB,EAAQzc,EAAM9B,EAAM,EAAG,GAqB7C,GAnBIhI,GAAKo7C,GAAgB,IAvDJ,SAAU70B,EAAQgtB,EAAUzoB,GACnD,IAAIvuB,EAAMgqB,EAAOhqB,IACb2I,EAAQ,GACRqL,EAAS,GAgBb,GAfArL,EAAMw2C,MAAQ5wB,EAAK4wB,MACnBnrC,EAAOuJ,OAAS4M,GAAYoE,EAAKhR,QAC7Bvd,EAAIwqB,UAAUwsB,EAAU,WAAarU,GAAmB3Y,GAC1DrhB,EAAM0X,MA3lJW,SAAU5c,GAC7B,OAAOA,EAAOA,EAAK9I,QAAQ,MAAO,IAAM,GA0lJxBsnD,CAAe1zB,EAAKlO,OAElCrM,EAAOqM,MAAQ8J,GAAYoE,EAAKlO,OAE9BsiB,GAAmB3Y,IACrBhW,EAAO,gBAAkBmW,GAAYoE,EAAKqT,QAC1C5tB,EAAO,kBAAoBmW,GAAYoE,EAAK2zB,eAE5Cv5C,EAAMi5B,OAASrT,EAAKqT,OACpBj5B,EAAMw5C,YAAc5zB,EAAK4zB,YACzBx5C,EAAMu5C,YAAc3zB,EAAK2zB,aAEvBvf,GAAmB3Y,IAAWgtB,EAAS/wC,SACzC,IAAK,IAAIvO,EAAI,EAAGA,EAAIs/C,EAAS/wC,SAASrS,OAAQ8D,IAC5CoqD,GAAU9hD,EAAKg3C,EAAS/wC,SAASvO,GAAI,CACnC,eAAgByyB,GAAYoE,EAAKqT,QACjC,QAAWzX,GAAYoE,EAAK4zB,eAE1Bzf,GAAoB1Y,IACtB83B,GAAU9hD,EAAKg3C,EAAS/wC,SAASvO,GAAI,CAAE,eAAgB62B,EAAKiuB,cAI9D9Z,GAAoB1Y,KACtBhW,EAAO,oBAAsBua,EAAKkuB,gBAClCzoC,EAAO,gBAAkBua,EAAKiuB,YAC9BxoC,EAAO,gBAAkBua,EAAKguB,aAEhC5zC,EAAMU,MAAQrJ,EAAIoiD,eAAerpD,EAASA,EAAS,GAAImpC,GAAiBlY,IAAUhW,IAClFhU,EAAIqiD,WAAWrL,EAAUj+C,EAASA,EAAS,GAAIkpC,GAAqBjY,IAAUrhB,IAoB1E25C,CAAmBt4B,EAAQgtB,EAAUzoB,IACrCyzB,EAAahiD,EAAIulC,OAAO,UAAWyR,GAAU,MAC1BzoB,EAAKg0B,SACtBviD,EAAI+I,OAAOi5C,IAERA,GAAczzB,EAAKg0B,WACtBP,EAAahiD,EAAIwU,OAAO,YACbhU,UAAa8gD,GAASkB,GAt1J9B,IAs1JmC,2BACtCxL,EAAS3kC,aAAa2vC,EAAYhL,EAASxkC,aAE1B,KAAf+b,EAAKyyB,MACPrF,GAAa3xB,EAAQgtB,GAErByE,GAAWzxB,EAAQgtB,EAAUzoB,EAAKyyB,QAGtCh3B,EAAO0E,QACP1E,EAAOkwB,YACHz2C,GAAKo7C,GAAgB,EAAG,CAC1B,IAAI4D,EAAkB7+C,GAAIi7C,EAAc,WACpCtd,GAAgBkhB,GAAkBh/C,GAAKo7C,GAAgB,EAC3Dvd,GAAkBtX,EAAQgtB,EAAU,CAClCxV,UAAWihB,EACXp5C,MAAOk4B,SAKXmhB,GAAS,SAAU14B,EAAQw3B,GAC7B,IACIxK,EADAh3C,EAAMgqB,EAAOhqB,IAEbuuB,EA9tBwB,SAAUvE,EAAQ24B,GAC9C,IAEyC3iD,EA8BnC4iD,EAKAle,EAjBAme,EApBFx5C,EAAQ64B,GAAiBlY,GACzBrhB,EAAQs5B,GAAqBjY,GA6B7B84B,EAAWH,GA5B0B3iD,EA4BgBgqB,EAAOhqB,IA3BvD,CACLu8C,YAAa74C,GAAM2F,EAAO,gBAAgBpU,MAAM,IAChDunD,YAAaL,GAASn8C,EAATm8C,CAAcz4C,GAAM2F,EAAO,gBAAgBpU,MAAM,KAC9DwnD,gBAAiBN,GAASn8C,EAATm8C,CAAcz4C,GAAM2F,EAAO,oBAAoBpU,MAAM,OAwBH,GAevE,OADW8D,EAASA,EAASA,EAASA,EAASA,EAASA,EAAS,GAnC/C,CAChBwkB,OAAQ,GACR8C,MAAO,OACP6hC,YAAa,GACbC,YAAa,GACbI,SAAS,EACTpD,MAAO,GACP6B,MAAO,GACPpf,OAAQ,KA2ByEv4B,GAAQV,GAAQm6C,IAxB7FD,EAAcx5C,EAAM,gBACpBs5B,GAAmB3Y,IAAW64B,EACzB,CAAEjhB,OAAQihB,GAEZn/C,GAAMiF,EAAO,UAAU/T,MAAK,WACjC,MAAO,MACN,SAAUgtC,GACX,MAAO,CAAEA,OAAQA,SAKfghB,EAAUl/C,GAAM2F,EAAO,kBAAkB5T,GAAGiO,GAAMiF,EAAO,gBAAgB/T,MAAK,WAChF,MAAO,MACN,SAAUstD,GACX,MAAO,CAAEA,YAAaA,MAEpBxd,EAAUhhC,GAAM2F,EAAO,kBAAkB5T,GAAGiO,GAAMiF,EAAO,gBAAgB/T,MAAK,WAChF,MAAO,MACN,SAAUutD,GACX,MAAO,CAAEA,YAAaA,MAEjBppD,EAASA,EAAS,GAAI6pD,GAAUle,KAmrB9Bqe,CAAwB/4B,EAAQ0Y,GAAoB1Y,KACxC,IAAnBw3B,GACFxK,EAAWh3C,EAAI+tB,UAAU/D,EAAOW,UAAUC,WAAY,QAASZ,EAAO9iB,YAEpEqnB,EAlrB4B,SAAUvE,EAAQ7e,EAAKw3C,GACvD,IAOI3iD,EAAMgqB,EAAOhqB,IACjB,OAAOjH,EAAS,CACdsnB,MAAOrgB,EAAIuqB,SAASpf,EAAK,UAAYnL,EAAIwqB,UAAUrf,EAAK,SACxDoS,OAAQvd,EAAIuqB,SAASpf,EAAK,WAAanL,EAAIwqB,UAAUrf,EAAK,UAC1D+2C,YAAaliD,EAAIuqB,SAASpf,EAAK,mBAAqBnL,EAAIwqB,UAAUrf,EAAK,eACvEg3C,YAAaniD,EAAIwqB,UAAUrf,EAAK,gBAAkBiwC,GAAoBpxB,EAAOhqB,IAAKmL,EAAK,WACvFy2B,OAbc,SAAU5hC,EAAKmL,GAC7B,IAAI63C,EAAiBh5C,GAAO/J,GAAaH,QAAQqL,GAAM,gBACvD,OAAIw3B,GAAmB3Y,IAAWg5B,EAAehuD,SACxCguD,EAAe/tD,MAAM,IAEvB+K,EAAIwqB,UAAUrf,EAAK,WAAaiwC,GAAoBpxB,EAAOhqB,IAAKmL,EAAK,iBAAmBiwC,GAAoBpxB,EAAOhqB,IAAKmL,EAAK,UAQ5H83C,CAAUjjD,EAAKmL,GACvBo3C,UAAWviD,EAAIulC,OAAO,UAAWp6B,GAAK,GACtCg0C,MAAOn/C,EAAIwqB,UAAUrf,EAAK,QAAS,IACnC61C,MAAO1D,GAActzB,EAAQ7e,IAC5Bw3C,EAAiBtG,GAAsBr8C,EAAKmL,GAAO,IAgqB3C+3C,CAA4Bl5B,EAAQgtB,EAAUtU,GAAoB1Y,IAErE0Y,GAAoB1Y,KACtBuE,EAAKguB,YAAc,GACnBhuB,EAAKiuB,YAAc,GACnBjuB,EAAKkuB,gBAAkB,KAI3BluB,EAAKhhB,KAAO,IACZghB,EAAK9iB,KAAO,IACRi3B,GAAoB1Y,KACtBuE,EAAKguB,YAAc,GACnBhuB,EAAKiuB,YAAc,GACnBjuB,EAAKkuB,gBAAkB,KAG3B,IAAIiB,EAAU9B,GAxlGQ,SAAU5xB,GAChC,OAAOA,EAAO+X,SAAS,mBAAoB,GAAI,SAulGlBohB,CAAkBn5B,IAC3C0zB,EAAQ9pD,OAAS,GACf26B,EAAK4wB,QACP5wB,EAAK4wB,MAAQ5wB,EAAK4wB,MAAMxkD,QAAQ,0BAA2B,KAG/D,IAAIyoD,EAAe,CACjBtxD,KAAM,OACNuZ,QAAS,EACT4wC,MAAOsF,GAAWv3B,EAAQ0zB,EAAS8D,IAqBjC6B,EAAa3gB,GAAoB1Y,GAZ5B,CACLl4B,KAAM,WACNmuD,KAAM,CACJ,CACElE,MAAO,UACPzpD,KAAM,UACN2pD,MAAO,CAACmH,IAEVpG,GAAe,WAdZ,CACLlrD,KAAM,QACNmqD,MAAO,CAACmH,IAiBZp5B,EAAOm2B,cAAcP,KAAK,CACxB7D,MAAO,mBACPt4C,KAAM,SACNwD,KAAMo8C,EACN9C,SAAUhtD,EAAMwuD,GAAmB/3B,EAAQgtB,EAAUzoB,GACrD6xB,QAAS,CACP,CACEtuD,KAAM,SACNQ,KAAM,SACN0O,KAAM,UAER,CACElP,KAAM,SACNQ,KAAM,OACN0O,KAAM,OACNq/C,SAAS,IAGbC,YAAa/xB,KAIb+0B,GAAmC,SAAUt5B,GAC/C,OAAOquB,GAA+B3tB,GAAkBV,GAAS7T,GAAU6T,KAEzEu5B,GAA0B,SAAUv5B,GACtC,OAAOouB,GAAsB1tB,GAAkBV,GAAS7T,GAAU6T,KAEhEw5B,GAAmB,SAAUx5B,EAAQyB,EAASC,EAAeb,EAAYuD,GAC3E,IAAI1oB,EAASyQ,GAAU6T,GAsCnBy5B,EAAmB,SAAUn5C,GAC/B,OAAOkB,GAAMlB,EAAM5E,IAEjBg+C,EAAc,SAAUl4C,GAC1B,OAAO,SAAU+iB,GACfvE,EAAOW,UAAU6D,OAAOD,EAAKE,KAC7BzE,EAAO0E,QACPhD,EAAciD,MAAMnjB,GACpB4e,GAAgB5e,GAChB81B,GAAkBtX,EAAQxe,EAAMxL,IAAKuuB,EAAKo1B,UAG1CC,EAAiB,SAAUC,GAC7B,OAAON,GAAwBv5B,GAAQp0B,MAAK,SAAU0U,GACpDm5C,EAAiBn5C,GAAM1U,MAAK,SAAU4V,GACpC,IAAI2iB,EAAU5C,GAAQV,EAAYrf,EAAOlB,GACzCu5C,EAAQr4C,EAAO2iB,GAASv4B,KAAK8tD,EAAYl4C,WAI3Cs4C,EAAmB,WACrB,OAAOP,GAAwBv5B,GAAQr0B,KAAI,SAAU2U,GACnD,OAAOm5C,EAAiBn5C,GAAMzU,MAAK,SAAU2V,GAG3C,OA1jCO,SAAUA,EAAOxP,EAAQkyB,GACtC,IAAI/f,EAAYuB,GAAoBlE,GAEpC,OADco/B,GAAQz8B,EAAWnS,GAClBnG,MAAK,SAAU02B,GAC5B,IAAIpf,EAAO87B,GAAO96B,EAAW+f,GAAY,GAErC61B,EADO72C,GAAmBC,GAAM1B,KACdzU,MAAMu1B,EAAc,GAAG1gB,IAAK0gB,EAAcA,EAAc34B,OAAS,GAAGiY,IAAM0gB,EAAcA,EAAc34B,OAAS,GAAGoQ,SACpIggD,EAAenuD,EAAKkuD,GAAY,SAAUl4C,GAC5C,IAAIa,EAAW1W,EAAO6V,EAAI1H,OAAO,SAAUmG,GACzC,OAAQA,EAAK/F,YAEf,OAAOmI,EAAS9Y,OAAS,EAAI,CAACmF,EAASA,EAAS,GAAI8S,GAAM,CAAE1H,MAAOuI,KAAe,MAEhFu3C,EAAgB7a,GAAa4a,EAAc91B,GAC/C,OAAOzS,GAAOwoC,EAAcrwD,OAAS,EAAGqwD,MACvCtuD,KAAI,SAAUsuD,GACf,OA1vDKtuD,EA0vDSsuD,GA1vDC,SAAUp4C,GACzB,IAAI07B,EAAKjsB,GAAQzP,EAAIvK,SAOrB,OANA1L,EAAKiW,EAAI1H,OAAO,SAAUmG,GACxB,IAAI45C,EAAa3oC,GAAKjR,EAAKhJ,SAC3B2lC,GAASid,EAAY,UAAW55C,EAAKrG,QAAS,GAC9CgjC,GAASid,EAAY,UAAW55C,EAAKtG,QAAS,GAC9CsO,GAAOi1B,EAAI2c,MAEN3c,QA4xFI4c,CAAS34C,EAFF+f,GAAQV,EAAYrf,EAAOlB,GACxB8d,GAAeh1B,EAAM6M,GAAaH,QAAQkqB,EAAOiE,UAAWp3B,EAASrC,gBAKxF4vD,EAAmB,WACrB,OAAOb,GAAwBv5B,GAAQr0B,KAAI,SAAU2U,GACnD,OAAOm5C,EAAiBn5C,GAAMzU,MAAK,SAAU2V,GAE3C,OA/kCO,SAAUA,EAAOxP,GAC9B,IAAIgwB,EAAQtc,GAAoBlE,GAEhC,OADcs/B,GAAgB9e,EAAOhwB,GACtBrG,KAAI,SAAU42B,GAC3B,IAAI2pB,EAAmB3pB,EAAcA,EAAc34B,OAAS,GACxDuiD,EAAc5pB,EAAc,GAAGxgB,OAC/BqqC,EAAcF,EAAiBnqC,OAASmqC,EAAiBjyC,QAG7D,OAAO5K,EAzCY,SAAU2yB,EAAOmqB,EAAaC,GACnD,GAAI1mC,GAAqBsc,GAAQ,CAC/B,IAAIq4B,EAAaruD,EAAO0Z,GAAsBsc,IAAQ,SAAUtP,GAC9D,OAAOA,EAAI3Q,QAAUoqC,GAAez5B,EAAI3Q,OAASqqC,KAE/CkO,EAAa3uD,EAAI0uD,GAAY,SAAUrnC,GACzC,IAAIunC,EAAYhpC,GAAKyB,EAAE1b,SAEvB,OADA25C,GAAcsJ,EAAW,OAAQnO,EAAcD,GACxCoO,KAELC,EAAevkD,GAAaY,QAAQ,YAExC,OADAiS,GAAS0xC,EAAcF,GAChB,CAACE,GAER,MAAO,GAyBaC,CAAiBz4B,EAAOmqB,EAAaC,GAtB1C,SAAUpqB,EAAOmqB,EAAaC,GAC/C,OAAOzgD,EAAIq2B,EAAMl4B,KAAK,SAAU+X,GAC9B,IAAI64C,EAAc1uD,EAAO6V,EAAI1H,OAAO,SAAUmG,GAC5C,OAAOA,EAAKyB,QAAUoqC,GAAe7rC,EAAKyB,OAASqqC,KAEjDuO,EAAchvD,EAAI+uD,GAAa,SAAUp6C,GAC3C,IAAI45C,EAAa3oC,GAAKjR,EAAKhJ,SAE3B,OADA25C,GAAciJ,EAAY,UAAW9N,EAAcD,GAC5C+N,KAELU,EAAS3kD,GAAaY,QAAQ,MAElC,OADAiS,GAAS8xC,EAAQD,GACVC,KAWQC,CAAa74B,EAAOmqB,EAAaC,OAukCrC0O,CAASt5C,EADF+f,GAAQV,EAAYrf,EAAOlB,WAK3Cy6C,EAAmB,SAAUlB,EAASmB,GACxC,OAAOA,IAAUpvD,MAAK,SAAU6V,GAC9B,IAAIw5C,EAAatvD,EAAI8V,GAAM,SAAUI,GACnC,OAAO0P,GAAK1P,MAEd03C,GAAwBv5B,GAAQp0B,MAAK,SAAU0U,GAC7C,OAAOm5C,EAAiBn5C,GAAM1U,MAAK,SAAU4V,GAC3C,IAAI0iB,EAAavE,GAAM1pB,GAAaH,QAAQkqB,EAAOiE,WAC/CE,EA7uJE,SAAUtD,EAAYvgB,EAAM8jB,EAAWF,GACrD,MAAO,CACLvD,UAAWA,GAAUE,GACrBuD,UAAWA,EACXF,WAAYA,GAyuJQg3B,CAAUr6B,EAAYvgB,EAAM26C,EAAY/2B,GACtD21B,EAAQr4C,EAAO2iB,GAASv4B,KAAK8tD,EAAYl4C,cAKjD3I,GAAO,CACLsiD,mBAAoB,WAClB,OAAOvB,EAAen4B,EAAQ6oB,eAEhC8Q,mBAAoB,WAClB,OAAOxB,EAAen4B,EAAQ4oB,aAEhCgR,wBAAyB,WACvB,OAAOzB,EAAen4B,EAAQ0nB,mBAEhCmS,uBAAwB,WACtB,OAAO1B,EAAen4B,EAAQ6nB,kBAEhCiS,wBAAyB,WACvB,OAAO3B,EAAen4B,EAAQ+nB,sBAEhCgS,uBAAwB,WACtB,OAAO5B,EAAen4B,EAAQioB,qBAEhC+R,kBAAmB,WACjB,OAAO7B,EAAen4B,EAAQi6B,eAEhCC,kBAAmB,WACjB,OAAO/B,EAAen4B,EAAQm6B,YAEhCC,eAAgB,SAAUC,GACxB,OAAO1B,IAAmBxuD,MAAK,SAAU+0B,GACvCyD,EAAU23B,WAAWp7B,GACrBi5B,EAAen4B,EAAQi6B,kBAG3BM,eAAgB,SAAUF,GACxB,OAAOhC,IAAmBluD,MAAK,SAAU+0B,GACvCyD,EAAU63B,QAAQt7B,GAClBi5B,EAAen4B,EAAQm6B,eAG3BM,gBAAiB,SAAUJ,GACzB,OAAO1B,IAAmBxuD,MAAK,SAAU+0B,GACvC,OAAOyD,EAAU23B,WAAWp7B,OAGhCw7B,gBAAiB,SAAUL,GACzB,OAAOhC,IAAmBluD,MAAK,SAAU+0B,GACvC,OAAOyD,EAAU63B,QAAQt7B,OAG7By7B,uBAAwB,SAAUN,GAChC,OAAOf,EAAiBt5B,EAAQmqB,gBAAiBxnB,EAAUi4B,aAE7DC,sBAAuB,SAAUR,GAC/B,OAAOf,EAAiBt5B,EAAQqqB,eAAgB1nB,EAAUi4B,aAE5DE,uBAAwB,SAAUT,GAChC,OAAOf,EAAiBt5B,EAAQsqB,gBAAiB3nB,EAAU42B,UAE7DwB,sBAAuB,SAAUV,GAC/B,OAAOf,EAAiBt5B,EAAQuqB,eAAgB5nB,EAAU42B,UAE5DyB,eAnJe,WACf,OAAOnD,GAAiCt5B,GAAQp0B,MAAK,SAAU8wD,GAC7Dl7C,GAAMk7C,EAAehhD,GAAQ1P,OAAO5B,EAAIsR,IAAS9P,MAAK,SAAU4V,GAC9D,IAAI8+B,EAASrqC,GAAac,SAAS,IAGnC,GAFA0L,GAAMjB,EAAO8+B,GACbp3B,GAAS1H,GACLwe,EAAOhqB,IAAI2mD,QAAQ38B,EAAO9iB,WAC5B8iB,EAAO48B,WAAW,IAClB58B,EAAOW,UAAUk8B,wBACZ,CACL,IAAIp4B,EAAMzE,EAAOhqB,IAAI8mD,YACrBr4B,EAAIs4B,SAASzc,EAAOtqC,IAAK,GACzByuB,EAAIu4B,OAAO1c,EAAOtqC,IAAK,GACvBgqB,EAAOW,UAAU6D,OAAOC,GACxBzE,EAAOi9B,sBAsIbC,mBAAoB,SAAUC,EAAIjd,GAChC,OAlIgB,SAAUA,GAC5B,OAAOoZ,GAAiCt5B,GAAQp0B,MAAK,SAAU8wD,GACxCrkB,GAAmBrY,IAAWmY,GAAenY,IAAW4Y,GAAoB5Y,IAE/Fxe,GAAMk7C,EAAehhD,GAAQ9P,MAAK,SAAU4V,GAC3B,aAAX0+B,GAA0BxU,GAAkBlqB,GAE1B,UAAX0+B,GAAuBvU,GAAgBnqB,GAE5B,eAAX0+B,GAA4BtU,GAAepqB,IACpDq4B,GAAYr4B,GAFZk4B,GAAc1Z,EAAQxe,GAFtBg4B,GAAkBxZ,EAAQxe,GAM5B4e,GAAgB5e,GAChB81B,GAAkBtX,EAAQxe,EAAMxL,IAAKyhC,UAqHlC2lB,CAAcld,MAEtB,SAAUmd,EAAM/0D,GACjB,OAAO03B,EAAOs9B,WAAWh1D,EAAM+0D,MAEjC,IAAIE,EAAgC,SAAUv9B,EAAQ80B,GACpDA,EAASlpD,MAAK,SAAU4V,GACtB81B,GAAkBtX,EAAQxe,EAAMxL,IAAKyhC,QAGzC5+B,GAAO,CACL2kD,iBAAkB,SAAUC,EAAK7tD,GAC/B,IAAIklD,EAAWtzC,GAAMkf,GAAkBV,GAAStkB,GAChD+lB,EAAQi8B,iBAAiB19B,EAAQpwB,GACjC2tD,EAA8Bv9B,EAAQ80B,IAExC6I,gBAAiB,SAAUF,EAAK7tD,GAC9B,IAAIklD,EAAWtzC,GAAMkf,GAAkBV,GAAStkB,GAChD+lB,EAAQm8B,gBAAgB59B,EAAQpwB,GAChC2tD,EAA8Bv9B,EAAQ80B,MAEvC,SAAUuI,EAAM/0D,GACjB,OAAO03B,EAAOs9B,WAAWh1D,EAAM+0D,MAEjCr9B,EAAOs9B,WAAW,mBAAmB,SAAUG,EAAK7tD,GAClD,OAAO8J,GAAM9J,EAAM,QAAQhE,MAAK,SAAU9D,GACxC,OAAO8xD,EAAwB,OAAT9xD,EAAgB25B,EAAQwoB,kBAAoBxoB,EAAQ2oB,2BAG9EvxC,GAAO,CACLglD,cAAet0D,EAAMmvD,GAAQ14B,GAAQ,GACrC89B,iBAAkBv0D,EAAM4tD,GAAQn3B,GAChC+9B,kBAAmBx0D,EAAMqsD,GAAM51B,EAAQa,KACtC,SAAUw8B,EAAM/0D,GACjB,OAAO03B,EAAOs9B,WAAWh1D,GAAM,WAC7B,OAAO+0D,UAGXr9B,EAAOs9B,WAAW,kBAAkB,SAAUG,EAAK7tD,GAC7ClH,EAASkH,IAASgJ,GAAKhJ,GAAMhG,OAAS,EACxC0mD,GAA8BtwB,EAAQpwB,EAAK6R,KAAM7R,EAAKyR,QAASzR,EAAKshC,QAAS,+FAE7EwnB,GAAO14B,GAAQ,MAGnBA,EAAOs9B,WAAW,0BAA0B,SAAUG,EAAK7tD,GACzD,IAAIouD,EAAgB,SAAU3+C,GAC5B,MAAO,YAAcA,EAAMhP,cAAcM,QAAQ,IAAK,KAExD,GAAKjI,EAASkH,GAAd,CAGA,IAAIuK,EAAQm0C,GAAsB5tB,GAAkBV,GAASa,EAAYnlB,GACzE,GAAqB,IAAjBvB,EAAMvQ,OAAV,CAGA,IAAIq0D,EAAY9kD,GAASvJ,GAAM,SAAU7H,EAAOsX,GAC9C,OAAO2gB,EAAO0xB,UAAU93C,IAAIokD,EAAc3+C,KAAW5W,EAASV,OAj5OtD,SAAU+F,GACtB,IAAK,IAAI7F,KAAK6F,EACZ,GAAIqB,GAAejF,KAAK4D,EAAG7F,GACzB,OAAO,EAGX,OAAO,GA64OD00D,CAAQsB,KAGZplD,GAAOolD,GAAW,SAAUl2D,EAAOsX,GACjCzT,EAAKuO,GAAO,SAAUmG,GACpB2zC,GAAYC,OAAOl0B,EAAQ1f,EAAKtK,KAAKg+C,UAAUgK,EAAc3+C,GAAQtX,SAGzE0xD,EAAiBt/C,EAAM,IAAIvO,MAAK,SAAU4V,GACxC,OAAO81B,GAAkBtX,EAAQxe,EAAMxL,IAAKuhC,cAwD9C2mB,GAAc,CAChBC,yBAA0B,CACxB5mD,SAAU,QACVyS,OAAQ,CAAEo0C,gBAAiB,UAC3BC,gBAAgB,GAElBC,qBAAsB,CACpB/mD,SAAU,QACVyS,OAAQ,CAAEu0C,YAAa,UACvBF,gBAAgB,GAElBG,qBAAsB,CACpBjnD,SAAU,QACVyS,OAAQ,CAAEy0C,YAAa,UACvBJ,gBAAgB,GAElBK,qBAAsB,CACpBnnD,SAAU,QACVyS,OAAQ,CAAE6uC,YAAa,UACvBwF,gBAAgB,IAOhBM,GAAQrvC,GAAa,CACvB,CAAE9kB,KAAM,CAAC,YACT,CAAEod,MAAO,CAAC,YACV,CACEid,OAAQ,CACN,UACA,WAGJ,CAAEj2B,KAAM,CAAC,cAQPgwD,GAAe7vD,EAASA,EAAS,GAAI4vD,IAAQ,CAAEn0D,KANtC,SAAUoI,GAIrB,YAHgB,IAAZA,IACFA,OAAU9J,GAEL61D,GAAMn0D,KAAKoI,MAIhBisD,GAAW,SAAUjsD,EAAS8I,GAChC,OAAO8F,GAAM5O,EAAS8I,GAAQ7P,MAAK,SAAU2V,GAC3C,IAAI1X,EAAMqQ,GAAMqH,GAIhB,OAHYlT,EAAUxE,GAAK,SAAU7B,GACnC,OAAO8P,GAAKnF,EAAS3K,MAEV0D,KAAI,SAAUwQ,GACzB,MAAO,CACLA,MAAOA,EACPrS,IAAKA,UA8BTg1D,GARW,SAAUztD,EAAO0tD,EAAS13C,EAAQ23C,GAC/C,MAAO,CACL3tD,MAAOA,EACP0tD,QAASA,EACT13C,OAAQA,EACR23C,QAASA,IAKTC,GAAQ3vC,GAAa,CACvB,CAAE9M,OAAQ,CAAC,YACX,CACEmf,GAAI,CACF,UACA,WAGJ,CAAElf,MAAO,CAAC,cAWRy8C,GAAO,CACT18C,OAJay8C,GAAMz8C,OAKnBmf,GAJOs9B,GAAMt9B,GAKblf,MAJYw8C,GAAMx8C,MAKlB+N,KAbW,SAAUC,EAAS0uC,EAAUC,EAAMC,GAC9C,OAAO5uC,EAAQ7lB,KAAKu0D,EAAUC,EAAMC,IAapCz+B,SAXa,SAAU0+B,GACvB,OAAOA,EAAK10D,KAAKtB,EAAUA,EAAUA,KAanCi2D,GAAQjwC,GAAa,CACvB,CAAEkwC,SAAU,CAAC,QACb,CACE9oC,SAAU,CACR,YACA,eAGJ,CACE+oC,MAAO,CACL,QACA,UACA,SACA,cA4BFC,GAAe,CACjBF,SATaD,GAAMC,SAUnB9oC,SATa6oC,GAAM7oC,SAUnB+oC,MATUF,GAAME,MAUhBE,eA5BmB,SAAUC,GAC7B,OAAOL,GAAME,MAAMG,EAASvuD,MAAOuuD,EAASb,QAASa,EAASv4C,OAAQu4C,EAASZ,UA4B/Ea,OAVW,SAAUl/B,GACrB,IAAItvB,EAjBW,SAAUsvB,GACzB,OAAOA,EAAUxoB,MAAM,CACrBqnD,SAAU,SAAU/6B,GAClB,OAAOxuB,GAAaH,QAAQ2uB,EAAIq7B,iBAElCppC,SAAU,SAAUqpC,EAAWC,GAC7B,OAAOd,GAAKt+B,SAASm/B,IAEvBN,MAAO,SAAUpuD,EAAO4uD,EAAUC,EAASC,GACzC,OAAO9uD,KAQC+uD,CAAWz/B,GACvB,OAh+OO1qB,GAAaH,QAAQuF,GAg+OThK,GAh+OkC2E,IAAIke,cAy+OzDtmB,MAPYkxD,IAoCVuB,GAAmB,SAAUpsC,EAAK8rC,EAAWO,GAC/C,IAnBuB77B,EAmBnB72B,EAAQqmB,EAAI3d,SAASiqD,cAGzB,OAtBuB97B,EAoBd72B,EAAOmyD,EAnBXn1D,MAAK,SAAUsQ,GAClBupB,EAAI+7B,eAAetlD,EAAElF,QACpB,SAAUkF,EAAGxQ,GACd+5B,EAAIs4B,SAAS7hD,EAAElF,IAAKtL,MACnB,SAAUwQ,GACXupB,EAAIg8B,cAAcvlD,EAAElF,QAGR,SAAUyuB,EAAK66B,GAC7BA,EAAK10D,MAAK,SAAUsQ,GAClBupB,EAAIi8B,aAAaxlD,EAAElF,QAClB,SAAUkF,EAAGxQ,GACd+5B,EAAIu4B,OAAO9hD,EAAElF,IAAKtL,MACjB,SAAUwQ,GACXupB,EAAIk8B,YAAYzlD,EAAElF,QAMpB4qD,CAAUhzD,EAAO0yD,GACV1yD,GAELizD,GAAgB,SAAU5sC,EAAK5iB,EAAO0tD,EAAS13C,EAAQ23C,GACzD,IAAIv6B,EAAMxQ,EAAI3d,SAASiqD,cAGvB,OAFA97B,EAAIs4B,SAAS1rD,EAAM2E,IAAK+oD,GACxBt6B,EAAIu4B,OAAO31C,EAAOrR,IAAKgpD,GAChBv6B,GAELq8B,GAAS,SAAUC,GACrB,MAAO,CACLptC,KAAMotC,EAAKptC,KACXC,IAAKmtC,EAAKntC,IACVkR,MAAOi8B,EAAKj8B,MACZk8B,OAAQD,EAAKC,OACb3qC,MAAO0qC,EAAK1qC,MACZ9C,OAAQwtC,EAAKxtC,SASb0tC,GAAQ3xC,GAAa,CACvB,CACE2G,IAAK,CACH,QACA,UACA,SACA,YAGJ,CACEC,IAAK,CACH,QACA,UACA,SACA,cAIFgrC,GAAY,SAAUjtC,EAAKnsB,EAAM8F,GACnC,OAAO9F,EAAKmO,GAAaH,QAAQlI,EAAMkyD,gBAAiBlyD,EAAMuzD,YAAalrD,GAAaH,QAAQlI,EAAMwzD,cAAexzD,EAAMyzD,YA+CzHC,GAAW,SAAUrtC,EAAK0M,GAE5B,OAjB8B4gC,EA9BhB,SAAUttC,EAAK0M,GAC7B,OAAOA,EAAUxoB,MAAM,CACrBqnD,SAAU,SAAU/6B,GAClB,MAAO,CACLxO,IAAK5sB,EAASo7B,GACdvO,IAAKrpB,EAASrC,OAGlBksB,SAAU,SAAUqpC,EAAWO,GAC7B,MAAO,CACLrqC,IAAKvmB,GAAO,WACV,OAAO2wD,GAAiBpsC,EAAK8rC,EAAWO,MAE1CpqC,IAAKxmB,GAAO,WACV,OAAO7C,EAASR,KAAKg0D,GAAiBpsC,EAAKqsC,EAAYP,SAI7DN,MAAO,SAAUpuD,EAAO0tD,EAAS13C,EAAQ23C,GACvC,MAAO,CACL/oC,IAAKvmB,GAAO,WACV,OAAOmxD,GAAc5sC,EAAK5iB,EAAO0tD,EAAS13C,EAAQ23C,MAEpD9oC,IAAKxmB,GAAO,WACV,OAAO7C,EAASR,KAAKw0D,GAAc5sC,EAAK5M,EAAQ23C,EAAS3tD,EAAO0tD,WAsB3DyC,CAAUvtC,EAAK0M,IAfxB8D,EAAM88B,EAAOtrC,OACTwrC,UACSF,EAAOrrC,MAAMlqB,QAAO,SAAU01D,GAC3C,OAAyB,IAAlBA,EAAID,aAEG91D,KAAI,SAAU+1D,GAC5B,OAAOT,GAAM/qC,IAAIjgB,GAAaH,QAAQ4rD,EAAIN,cAAeM,EAAIL,UAAWprD,GAAaH,QAAQ4rD,EAAI5B,gBAAiB4B,EAAIP,gBACrHj2D,YAAW,WACZ,OAAOg2D,GAAUjtC,EAAKgtC,GAAMhrC,IAAKwO,MAG5By8B,GAAUjtC,EAAKgtC,GAAMhrC,IAAKwO,GAZpB,IAAe88B,EAC1B98B,GAkBFk9B,GAAa,SAAU1tC,EAAK0M,GAE9B,OADgB2gC,GAASrtC,EAAK0M,GACbxoB,MAAM,CACrB8d,IAAK,SAAU5kB,EAAO0tD,EAAS13C,EAAQ23C,GACrC,IAAIv6B,EAAMxQ,EAAI3d,SAASiqD,cAGvB,OAFA97B,EAAIs4B,SAAS1rD,EAAM2E,IAAK+oD,GACxBt6B,EAAIu4B,OAAO31C,EAAOrR,IAAKgpD,GAChBv6B,GAETvO,IAAK,SAAU7kB,EAAO0tD,EAAS13C,EAAQ23C,GACrC,IAAIv6B,EAAMxQ,EAAI3d,SAASiqD,cAGvB,OAFA97B,EAAIs4B,SAAS11C,EAAOrR,IAAKgpD,GACzBv6B,EAAIu4B,OAAO3rD,EAAM2E,IAAK+oD,GACft6B,MA2BTm9B,IAvBQX,GAAMhrC,IACNgrC,GAAM/qC,IAsBL,SAAU6qC,EAAM94D,EAAGmP,GAC9B,OAAOnP,GAAK84D,EAAKptC,MAAQ1rB,GAAK84D,EAAKj8B,OAAS1tB,GAAK2pD,EAAKntC,KAAOxc,GAAK2pD,EAAKC,SAsCrEa,GAAa,SAAU9kD,EAAKhH,EAAM9N,EAAGmP,GACvC,OAAO0D,GAAO/E,GArBH,SAAUgH,EAAKhH,EAAM9N,EAAGmP,GACnC,IAAItJ,EAAIiP,EAAI/G,IAAIuqD,cAChBzyD,EAAEg0D,WAAW/rD,EAAKC,KAClB,IAAI+rD,EAAQj0D,EAAEk0D,iBAId,OAHgBnzD,EAAQkzD,GAAO,SAAUhB,GACvC,OAAOa,GAAOb,EAAM94D,EAAGmP,GAAKvK,EAASR,KAAK00D,GAAQl0D,EAASrC,UAE5CmB,KAAI,SAAUo1D,GAC7B,OAvBe,SAAUhkD,EAAKklD,EAAUh6D,EAAGmP,EAAG2pD,GAChD,IAAImB,EAAiB,SAAUx3D,GAC7B,IAAIoD,EAAIiP,EAAI/G,IAAIuqD,cAGhB,OAFAzyD,EAAEivD,SAASkF,EAASjsD,IAAKtL,GACzBoD,EAAEqhD,UAAS,GACJrhD,GAMLlE,EAAS6f,GAAMw4C,GAAUr4D,OACzByyC,EApCe,SAAU8lB,EAAel6D,EAAGmP,EAAGgrD,EAAMx4D,GACxD,GAAe,IAAXA,EACF,OAAO,EACF,GAAI3B,IAAMm6D,EACf,OAAOx4D,EAAS,EAGlB,IADA,IAAIyqC,EAAS+tB,EACJ10D,EAAI,EAAGA,EAAI9D,EAAQ8D,IAAK,CAC/B,IAAIqzD,EAwBImB,EAxBiBx0D,GAyBhB4lB,wBAxBL+uC,EAAY78C,KAAKmV,IAAI1yB,EAAI84D,EAAKptC,MAClC,GAAIvc,GAAK2pD,EAAKC,OAAQ,CACpB,GAAI5pD,EAAI2pD,EAAKntC,KAAOyuC,EAAYhuB,EAC9B,OAAO3mC,EAAI,EAEX2mC,EAASguB,GAIf,OAAO,EAkBMC,CALO,EAKuBr6D,EAAGmP,EAAG2pD,EAAKj8B,MAAOl7B,GAC7D,OAAOs4D,EAAe7lB,GAUbkmB,CAAaxlD,EAAKhH,EAAM9N,EAAGmP,EAAG2pD,MAajByB,CAAOzlD,EAAKhH,EAAM9N,EAAGmP,GATtB,SAAU2F,EAAKhH,EAAM9N,EAAGmP,GAC7C,IAAItJ,EAAIiP,EAAI/G,IAAIuqD,cACZ1gC,EAAQ5jB,GAASlG,GACrB,OAAOlH,EAAQgxB,GAAO,SAAUh1B,GAE9B,OADAiD,EAAEg0D,WAAWj3D,EAAEmL,KACR4rD,GAAO9zD,EAAEwlB,wBAAyBrrB,EAAGmP,GAAKyqD,GAAW9kD,EAAKlS,EAAG5C,EAAGmP,GAAKvK,EAASrC,UAIvCi4D,CAAiB1lD,EAAKhH,EAAM9N,EAAGmP,IAa7EsrD,GAAuB,SAAU3B,EAAM94D,GACzC,OAAOA,EAAI84D,EAAKptC,KAAOotC,EAAKj8B,MAAQ78B,GAElC06D,GAAsB,SAAU5lD,EAAK/K,EAAQ4wD,GAC/C,IAAI90D,EAAIiP,EAAI/G,IAAIuqD,cAGhB,OAFAzyD,EAAEg0D,WAAW9vD,EAAOgE,KACpBlI,EAAEqhD,SAASyT,GACJ90D,GAEL+0D,GAAkB,SAAU9lD,EAAKhH,EAAM9N,GACzC,IAAI66D,EAAc/lD,EAAI/G,IAAIuqD,cAC1BuC,EAAYhB,WAAW/rD,EAAKC,KAC5B,IAAI+qD,EAAO+B,EAAYxvC,wBACnBsvC,EAAoBF,GAAqB3B,EAAM94D,GAEnD,QAjBqB,IAgBb26D,EAAyCh7C,GAAQ4V,IAChDznB,GAAMpK,KAAI,SAAUqG,GAC3B,OAAO2wD,GAAoB5lD,EAAK/K,EAAQ4wD,OAGxCG,GAAgB,SAAUhmD,EAAKhH,EAAM9N,GACvC,IAAI84D,EAAOhrD,EAAKC,IAAIsd,wBAChBsvC,EAAoBF,GAAqB3B,EAAM94D,GACnD,OAAO4E,EAASR,KAAKs2D,GAAoB5lD,EAAKhH,EAAM6sD,KAqClDI,GACE1sD,SAAS2sD,uBA/Bc,SAAUlmD,EAAK9U,EAAGmP,GAC7C,OAAOvK,EAASC,KAAKiQ,EAAI/G,IAAIitD,uBAAuBh7D,EAAGmP,IAAIvL,MAAK,SAAUmvB,GACxE,GAAuB,OAAnBA,EAAIkoC,WACN,OAAOr2D,EAASrC,OAElB,IAAIsD,EAAIiP,EAAI/G,IAAIuqD,cAGhB,OAFAzyD,EAAEivD,SAAS/hC,EAAIkoC,WAAYloC,EAAIqhB,QAC/BvuC,EAAEqhD,WACKtiD,EAASR,KAAKyB,OAyBZwI,SAAS6sD,oBAtBI,SAAUpmD,EAAK9U,EAAGmP,GAC1C,OAAOvK,EAASC,KAAKiQ,EAAI/G,IAAImtD,oBAAoBl7D,EAAGmP,KAUhC,SAAU2F,EAAK9U,EAAGmP,GACtC,OAAOnB,GAAaiB,UAAU6F,EAAK9U,EAAGmP,GAAGvL,MAAK,SAAU4L,GACtD,IAAI8I,EAAW,WACb,OA9BO,SAAUxD,EAAKhH,EAAM9N,GAEhC,OADkC,IAA1BgU,GAASlG,GAAMnM,OAAem5D,GAAgBF,IAC7C9lD,EAAKhH,EAAM9N,GA4BTgJ,CAAO8L,EAAKtF,EAAMxP,IAE3B,OAAiC,IAA1BgU,GAASxE,GAAM7N,OAAe2W,IAbnB,SAAUxD,EAAKhH,EAAM9N,EAAGmP,GAC5C,IAAItJ,EAAIiP,EAAI/G,IAAIuqD,cAChBzyD,EAAEg0D,WAAW/rD,EAAKC,KAClB,IAAI+qD,EAAOjzD,EAAEwlB,wBAGb,OA5Da,SAAUvW,EAAKhH,EAAM9N,EAAGmP,GACrC,IAAItJ,EAAIiP,EAAI/G,IAAIuqD,cAChBzyD,EAAEg0D,WAAW/rD,EAAKC,KAClB,IAAI+qD,EAAOjzD,EAAEwlB,wBACT8vC,EAAW59C,KAAKC,IAAIs7C,EAAKptC,KAAMnO,KAAK2B,IAAI45C,EAAKj8B,MAAO78B,IACpDo7D,EAAW79C,KAAKC,IAAIs7C,EAAKntC,IAAKpO,KAAK2B,IAAI45C,EAAKC,OAAQ5pD,IACxD,OAAOyqD,GAAW9kD,EAAKhH,EAAMqtD,EAAUC,GAsDhCC,CAASvmD,EAAKhH,EAFNyP,KAAKC,IAAIs7C,EAAKptC,KAAMnO,KAAK2B,IAAI45C,EAAKj8B,MAAO78B,IACzCud,KAAKC,IAAIs7C,EAAKntC,IAAKpO,KAAK2B,IAAI45C,EAAKC,OAAQ5pD,KAQJmsD,CAAgBxmD,EAAKtF,EAAMxP,EAAGmP,GAAG1L,QAAQ6U,OAmB3FijD,GAAgB,SAAUlsD,EAAS+kC,GACrC,IAAIonB,EAASn7D,GAAKgP,GAClB,MAAI,UAAYmsD,EACPvE,GAAKz8C,MAAMnL,GACRjK,EAAS,CACjB,KACA,OACCo2D,GAGe,IAAXpnB,EAAe6iB,GAAK18C,OAAOlL,GAAW4nD,GAAKz8C,MAAMnL,GAFjD4nD,GAAKv9B,GAAGrqB,EAAS+kC,IAKxBqnB,GAAqB,SAAU3D,EAAWO,GAC5C,IAAIjvD,EAAQ0uD,EAAUn1D,KAAKs0D,GAAK18C,OAAQghD,GAAetE,GAAKz8C,OACxD4E,EAASi5C,EAAW11D,KAAKs0D,GAAK18C,OAAQghD,GAAetE,GAAKz8C,OAC9D,OAAOi9C,GAAahpC,SAASrlB,EAAOgW,IAElCs8C,GAAkB,SAAUtyD,EAAO0tD,EAAS13C,EAAQ23C,GACtD,IAAIe,EAAYyD,GAAcnyD,EAAO0tD,GACjCuB,EAAakD,GAAcn8C,EAAQ23C,GACvC,OAAOU,GAAahpC,SAASqpC,EAAWO,IA2BtCsD,GAAqB,SAAU3vC,GACjC,OAAOpnB,EAASC,KAAKmnB,EAAI4vC,iBAEvBC,GAAmB,SAAU7vC,EAAKwQ,GACpCm/B,GAAmB3vC,GAAKroB,MAAK,SAAU+0B,GACrCA,EAAUojC,kBACVpjC,EAAUqjC,SAASv/B,OAGnBw/B,GAAa,SAAUhwC,EAAK5iB,EAAO0tD,EAAS13C,EAAQ23C,GACtD,IAAIv6B,EAAMo8B,GAAc5sC,EAAK5iB,EAAO0tD,EAAS13C,EAAQ23C,GACrD8E,GAAiB7vC,EAAKwQ,IAMpBy/B,GAAuB,SAAUjwC,EAAKyC,GACxC,OAAO4qC,GAASrtC,EAAKyC,GAAUve,MAAM,CACnC8d,IAAK,SAAU5kB,EAAO0tD,EAAS13C,EAAQ23C,GACrCiF,GAAWhwC,EAAK5iB,EAAO0tD,EAAS13C,EAAQ23C,IAE1C9oC,IAAK,SAAU7kB,EAAO0tD,EAAS13C,EAAQ23C,GACrC4E,GAAmB3vC,GAAKroB,MAAK,SAAU+0B,GACrC,GAAIA,EAAUwjC,iBACZxjC,EAAUwjC,iBAAiB9yD,EAAM2E,IAAK+oD,EAAS13C,EAAOrR,IAAKgpD,QACtD,GAAIr+B,EAAUyjC,OACnB,KAdc,SAAUnwC,EAAK0M,EAAWtvB,EAAO0tD,EAAS13C,EAAQ23C,GACxEr+B,EAAUwuB,SAAS99C,EAAM2E,IAAK+oD,GAC9Bp+B,EAAUyjC,OAAO/8C,EAAOrR,IAAKgpD,GAanBqF,CAAkBpwC,EAAK0M,EAAWtvB,EAAO0tD,EAAS13C,EAAQ23C,GAC1D,MAAO9jD,GACP+oD,GAAWhwC,EAAK5M,EAAQ23C,EAAS3tD,EAAO0tD,QAG1CkF,GAAWhwC,EAAK5M,EAAQ23C,EAAS3tD,EAAO0tD,UAM9CuF,GAAW,SAAUrwC,EAAK5iB,EAAO0tD,EAAS13C,EAAQ23C,GACpD,IAAItoC,EAAWitC,GAAgBtyD,EAAO0tD,EAAS13C,EAAQ23C,GACvDkF,GAAqBjwC,EAAKyC,IAExB6tC,GAAc,SAAUtwC,EAAK8rC,EAAWO,GAC1C,IAAI5pC,EAAWgtC,GAAmB3D,EAAWO,GAC7C4D,GAAqBjwC,EAAKyC,IAaxB8tC,GAAY,SAAU7jC,GACxB,GAAIA,EAAU8jC,WAAa,EAAG,CAC5B,IAAIC,EAAW/jC,EAAUgkC,WAAW,GAChCC,EAAUjkC,EAAUgkC,WAAWhkC,EAAU8jC,WAAa,GAC1D,OAAO53D,EAASR,KAAKyyD,GAAgB7oD,GAAaH,QAAQ4uD,EAAS5E,gBAAiB4E,EAASvD,YAAalrD,GAAaH,QAAQ8uD,EAAQxD,cAAewD,EAAQvD,YAE9J,OAAOx0D,EAASrC,QAGhBq6D,GAAa,SAAUlkC,GACzB,GAA6B,OAAzBA,EAAUmkC,YAA+C,OAAxBnkC,EAAUokC,UAC7C,OAAOP,GAAU7jC,GAEjB,IAAIqkC,EAAS/uD,GAAaH,QAAQ6qB,EAAUmkC,YACxCG,EAAUhvD,GAAaH,QAAQ6qB,EAAUokC,WAC7C,OA/EU,SAAU1zD,EAAO0tD,EAAS13C,EAAQ23C,GAC9C,IAAIlxD,EARU,SAAUuD,EAAO0tD,EAAS13C,EAAQ23C,GAChD,IACIv6B,EADMtpB,GAAM9J,GACF2E,IAAIuqD,cAGlB,OAFA97B,EAAIs4B,SAAS1rD,EAAM2E,IAAK+oD,GACxBt6B,EAAIu4B,OAAO31C,EAAOrR,IAAKgpD,GAChBv6B,EAGCygC,CAAU7zD,EAAO0tD,EAAS13C,EAAQ23C,GACtCmG,EAAOptD,GAAK1G,EAAOgW,IAAW03C,IAAYC,EAC9C,OAAOlxD,EAAE2zD,YAAc0D,EA4EdC,CAAQJ,EAAQrkC,EAAU0kC,aAAcJ,EAAStkC,EAAU2kC,aAAez4D,EAASR,KAAKyyD,GAAgBkG,EAAQrkC,EAAU0kC,aAAcJ,EAAStkC,EAAU2kC,cAAgBd,GAAU7jC,IAY5L4kC,GAAQ,SAAUtxC,GACpB,OANa,SAAUA,GACvB,OAAO2vC,GAAmB3vC,GAAKjoB,QAAO,SAAUw5D,GAC9C,OAAOA,EAAIf,WAAa,KACvB54D,KAAKg5D,IAGDY,CAASxxC,GAAKtoB,KAAI,SAAUiC,GACjC,OAAO8xD,GAAaD,MAAM7xD,EAAMyD,MAAOzD,EAAMmxD,QAASnxD,EAAMyZ,OAAQzZ,EAAMoxD,aAgB1E0G,GAAW30C,QAAQC,KAAKC,MAAMC,QAAQ,mBAEtCy0C,GAAU,SAAU3lC,EAAQtkB,EAAQ4E,GACtC,OAAO20B,GAAGjV,EAAQtkB,EAriBFmjD,GADGjsD,EAsiBY0N,OAALma,GApiBT7vB,MAAK,WACpB,OAAOg0D,GAAap0D,KAAKoI,MACxB,SAAUD,GACX,OAAOA,EAAKwJ,MAAQ,EAAIxJ,EAAK7I,IAAIF,OAASg1D,GAAa/5B,OAAOjyB,EAASD,EAAK7I,IAAI6I,EAAKwJ,MAAQ,IAAMyiD,GAAahwD,KAAKgE,OAL9G,IAAUA,GAwiBjBgzD,GAAW,SAAU5lC,EAAQtkB,EAAQ4E,GACvC,OAAO20B,GAAGjV,EAAQtkB,EAhiBFmjD,GADGjsD,EAiiBY0N,OAALke,GA/hBT5zB,MAAK,WACpB,OAAOg0D,GAAap0D,UACnB,SAAUmI,GACX,OAAOA,EAAKwJ,MAAQ,GAAK,EAAIyiD,GAAa/5B,OAAOjyB,EAASD,EAAK7I,IAAI6I,EAAKwJ,MAAQ,IAAMyiD,GAAah3C,MAAMhV,OALlG,IAAUA,GAmiBjBizD,GAA6B,SAAU7lC,EAAQ1f,GAEjD,OAlEa,SAAUqgB,GACvB,IAAI1M,EAAMyrC,GAAaG,OAAOl/B,GAAW3qB,IACrC8vD,EAAc,SAAUz0D,EAAO0tD,EAAS13C,EAAQ23C,GAClD,OAAO6B,GAAc5sC,EAAK5iB,EAAO0tD,EAAS13C,EAAQ23C,IAEhDn5C,EA7EW,SAAU8a,GACzB,OAAOA,EAAUxoB,MAAM,CACrBqnD,SAAU,SAAU/6B,GAClB,IAAIpzB,EAAQ4E,GAAaH,QAAQ2uB,EAAIq7B,gBACjCz4C,EAASpR,GAAaH,QAAQ2uB,EAAI28B,cACtC,OAAOuC,GAAgBtyD,EAAOozB,EAAI08B,YAAa95C,EAAQod,EAAI48B,YAE7D3qC,SAAUgtC,GACVjE,MAAOkE,KAqEMoC,CAAWplC,GAC1B,OAAO2gC,GAASrtC,EAAKpO,GAAU1N,MAAM,CACnC8d,IAAK6vC,EACL5vC,IAAK4vC,IA0DAE,CADStG,GAAaD,MAAMn/C,EAAM,EAAGA,EAAM,KAWhD20B,GAAK,SAAUjV,EAAQtkB,EAAQ4E,GACjC,OAAOA,EAAK1V,KAAKiC,EAASrC,KAAMqC,EAASrC,MAAM,SAAUoI,EAAS6nB,GAChE,OAAO7S,GAAM6S,GAAM9uB,KAAI,SAAU2U,GAC/B,OAAOulD,GAA2B7lC,EAAQ1f,SAE3C,SAAU1N,GACX,OAAO4O,GAAM5O,EAAS8I,GAAQ7P,MAAK,SAAU2V,GAE3C,OADAwe,EAAOimC,YAAY,0BAfK,SAAUjmC,EAAQxe,GAC9C,IAAIC,EAAO/D,GAAc8D,EAAO,MAChC,OAAO5S,EAAK6S,GAAM5V,MAAK,SAAU+C,GAC/B,OAAOuP,GAAavP,EAAM,SAASjD,KAAI,SAAUic,GAC/C,OAAOi+C,GAA2B7lC,EAAQpY,SAYnCs+C,CAAwBlmC,EAAQxe,UAIzC2kD,GAAe,CACjB,QACA,KACA,MA8BEC,GANW,SAAUzlC,EAAWyO,GAClC,MAAO,CACLzO,UAAWA,EACXyO,KAAMA,IAWNi3B,GANW,SAAUh1D,EAAO0tD,EAAS13C,EAAQ23C,GAC/C,MAAO,CACL3tD,MAAO6tD,GAAKv9B,GAAGtwB,EAAO0tD,GACtB13C,OAAQ63C,GAAKv9B,GAAGta,EAAQ23C,KAKxBsH,GAAiB,SAAUryC,EAAK0M,GAClC,IAAI8D,EAAMk9B,GAAW1tC,EAAK0M,GAC1B,OAAOm+B,GAAgB7oD,GAAaH,QAAQ2uB,EAAIq7B,gBAAiBr7B,EAAI08B,YAAalrD,GAAaH,QAAQ2uB,EAAI28B,cAAe38B,EAAI48B,YAE5HkF,GAAYF,GAaZG,GAAW,SAAUv6C,EAAWvQ,EAAQrK,EAAOgW,EAAQo/C,GACzD,OAAK1uD,GAAK1G,EAAOgW,GAWRxa,EAASrC,OAVT0hB,GAAS7a,EAAOgW,EAAQ3L,GAAQ7P,MAAK,SAAU66D,GACpD,IAAIr6C,EAAQq6C,EAAQr6C,MAAMphB,MAAM,IAChC,OAAIohB,EAAMziB,OAAS,GACjB68D,EAAYx6C,EAAWI,EAAOq6C,EAAQr1D,MAAOq1D,EAAQr/C,QAC9Cxa,EAASR,KAAK+5D,GAAgBv5D,EAASR,KAAKk6D,GAAUl1D,EAAO,EAAGA,EAAO6rB,GAAO7rB,MAAU,KAExFxE,EAASrC,WAgBpBm8D,GAAW,SAAUhhD,EAAMuoB,GAC7B,MAAO,CACLvoB,KAAMA,EACNuoB,KAAMA,IAGN04B,GAAY,SAAUr7C,EAAU5F,EAAMkhD,EAAYC,GAIpD,YAHmB,IAAfA,IACFA,EAAaC,IAERx7C,EAAS/L,WAAWjE,OAAOoK,GAAMha,KAAI,SAAUuD,GACpD,OAAOy3D,GAASz3D,EAAG43D,OAGnBC,GAAW,SAAUx7C,EAAU5F,EAAM6V,EAAWsrC,GAIlD,YAHmB,IAAfA,IACFA,EAAaE,IAERxrC,EAAUyrC,QAAQ17C,EAAU5F,GAAMha,KAAI,SAAUuD,GACrD,OAAOy3D,GAASz3D,EAAG43D,OAGnBE,GAAU,SAAUz7C,EAAU5F,EAAM6V,EAAWsrC,QAC9B,IAAfA,IACFA,EAAaE,IAEf,IAAI/qD,EAAWsP,EAAS/L,WAAWvD,SAAS0J,GAE5C,OADa6V,EAAU5T,MAAM3L,GACftQ,KAAI,SAAUmC,GAC1B,OAAO64D,GAAS74D,EAAGg5D,OAGnBI,GAAa,CACf,CACEt0D,QAASg0D,GACTnsC,KAAMssC,GACNxmD,SAAU1T,EAASrC,QAErB,CACEoI,QAASm0D,GACTtsC,KAAMusC,GACNzmD,SAAU1T,EAASR,KAAKu6D,KAE1B,CACEh0D,QAASo0D,GACTvsC,KAAMusC,GACNzmD,SAAU1T,EAASR,KAAK06D,MAGxBI,GAAO,SAAU57C,EAAU5F,EAAMuoB,EAAM1S,EAAW4rC,GAOpD,YANc,IAAVA,IACFA,EAAQF,IAEI/4D,EAAKi5D,GAAO,SAAUC,GAClC,OAAOA,EAAKz0D,UAAYs7B,KAEXriC,MAAK,SAAUy7D,GAC5B,OAAOA,EAAK10D,QAAQ2Y,EAAU5F,EAAM6V,EAAW8rC,EAAK7sC,MAAM/uB,SAAQ,WAChE,OAAO47D,EAAK/mD,SAAS1U,MAAK,SAAUgjC,GAClC,OAAOs4B,GAAK57C,EAAU5F,EAAMkpB,EAAIrT,aAmCpC+rC,GAAO,SAAUh8C,EAAU5F,EAAMvI,EAAW8wB,EAAM1S,EAAW9f,GAE/D,OADWyrD,GAAK57C,EAAU5F,EAAMuoB,EAAM1S,GAC1B3vB,MAAK,SAAUhB,GACzB,OAAI6Q,EAAO7Q,EAAE8a,MACJ9Y,EAASrC,OAET4S,EAAUvS,EAAE8a,MAAQ9Y,EAASR,KAAKxB,EAAE8a,MAAQ4hD,GAAKh8C,EAAU1gB,EAAE8a,KAAMvI,EAAWvS,EAAEqjC,KAAM1S,EAAW9f,OAW1G8rD,GAAS,SAAUj8C,GACrB,OAAO,SAAUjU,GACf,OAAwD,IAAjDiU,EAAS/L,WAAWvD,SAAS3E,GAAS1N,SAS7C69D,GAlBS,SAAUl8C,EAAU5F,EAAMvI,EAAW1B,GAChD,OAAO6rD,GAAKh8C,EAAU5F,EAAMvI,EAAW2pD,GAjChC,CACLE,QAPY,SAAU17C,EAAU5F,GAChC,OAAO4F,EAAShW,QAAQuG,YAAY6J,IAOpCiC,MALU,SAAU3L,GACpB,OAAOA,EAASrS,OAAS,EAAIiD,EAASR,KAAK4P,EAASA,EAASrS,OAAS,IAAMiD,EAASrC,SAmCtBkR,IAkB/DgsD,GAhBU,SAAUn8C,EAAU5F,EAAMvI,EAAW1B,GACjD,OAAO6rD,GAAKh8C,EAAU5F,EAAMvI,EAAW2pD,GAxBhC,CACLE,QAPY,SAAU17C,EAAU5F,GAChC,OAAO4F,EAAShW,QAAQyG,YAAY2J,IAOpCiC,MALU,SAAU3L,GACpB,OAAOA,EAASrS,OAAS,EAAIiD,EAASR,KAAK4P,EAAS,IAAMpP,EAASrC,SA0BHkR,IAiBhEisD,GAAa/9C,KACbg+C,GAAW,SAAUtwD,EAASoE,GAChC,OAXa,SAAU6P,EAAU5F,EAAMjK,GACvC,OAAO+rD,GAASl8C,EAAU5F,EAAM6hD,GAAOj8C,GAAW7P,GAU3CmsD,CAASF,GAAYrwD,EAASoE,IAEnCosD,GAAU,SAAUxwD,EAASoE,GAC/B,OAXY,SAAU6P,EAAU5F,EAAMjK,GACtC,OAAOgsD,GAAUn8C,EAAU5F,EAAM6hD,GAAOj8C,GAAW7P,GAU5CqsD,CAAQJ,GAAYrwD,EAASoE,IAalCssD,GAAQ14C,GAAa,CACvB,CAAE9kB,KAAM,CAAC,YACT,CAAEy9D,QAAS,IACX,CAAEC,SAAU,CAAC,SACb,CAAEC,WAAY,CAAC,WAObC,GAAQ,SAAU3wD,GACpB,OAAO6G,GAAU7G,EAAM,OAuBrB4wD,GAAct5D,EAASA,EAAS,GAAIi5D,IAAQ,CAC9CM,OAtBW,SAAUC,EAAQ/lD,EAAQgmD,EAAc/lD,EAAOgmD,EAAaC,EAAShtD,GAChF,OAAO4C,GAAUmE,EAAO,QAAS/G,GAAQ7P,MAAK,SAAU88D,GACtD,OAAOrqD,GAAUkE,EAAQ,QAAS9G,GAAQ/P,KAAI,SAAUi9D,GACtD,OAAK7wD,GAAK4wD,EAAWC,GAUZ7wD,GAAK0K,EAAOkmD,IAAczrC,GAAOyrC,KAAeF,EAAcC,EAAQE,GAAcZ,GAAMx9D,KAAK,gBAT/FohB,GAAYw8C,GAAO,CACxBO,EACAC,IACCh+D,MAAK,WACN,OAhBU,SAAU29D,EAAQ/lD,EAAQC,GAC5C,IAAIomD,EAAeN,EAAOO,QAAQtmD,GAC9BumD,EAAcR,EAAOO,QAAQrmD,GACjC,OAAOsmD,EAAYjkC,MAAQ+jC,EAAal1C,MAAQo1C,EAAYp1C,KAAOk1C,EAAa/jC,MAajEkkC,CAAcT,EAAQK,EAAYD,GAAaX,GAAMC,UAAYS,EAAQE,MAC/E,SAAUK,GACX,OAAOP,EAAQE,YAMpB39D,MAAM+8D,GAAMx9D,KAAK,aAOpBgmB,KALW,SAAUC,EAASC,EAAQw4C,EAAWC,EAAYC,GAC7D,OAAO34C,EAAQ7lB,KAAK8lB,EAAQw4C,EAAWC,EAAYC,MA2BjD5hB,GAAO,SAAU/vC,GACnB,MAAsB,OAAfnP,GAAKmP,IAEV4xD,GAAW,SAAUC,EAAMC,EAAQ7tD,GACrC,OAAO6tD,EAAOD,EAAM5tD,GAAQ7P,MAAK,SAAUmG,GACzC,OAAO8I,GAAO9I,IAA2C,IAAhCyX,GAAMzX,GAAQL,OAAO/H,OAAey/D,GAASr3D,EAAQu3D,EAAQ7tD,GAAU7O,EAASR,KAAK2F,OAa9Gw3D,GAAe,SAAU9tD,EAAQpE,EAAS+kC,EAAQ7gB,GACpD,OANW,SAAUlkB,EAAS+kC,GAC9B,OAAOngC,GAAM5E,EAAS+kC,GAAQrwC,OAAOw7C,IAAM97C,SAAQ,WACjD,OAAOwQ,GAAM5E,EAAS+kC,EAAS,GAAGrwC,OAAOw7C,OAIpCiiB,CAAOnyD,EAAS+kC,GAAQxwC,MAAK,SAAU69D,GAC5C,OAAOluC,EAAUmrC,SAAS+C,GAAI9+D,MAAK,WACjC,OAAOy+D,GAASK,EAAIluC,EAAU+tC,OAAQ7tD,GAAQ/P,IAAI6vB,EAAU9E,aAC3D,SAAUizC,GACX,OAnCc,SAAUryD,GAC5B,OAAOiE,GAAOjE,GAASzL,MAAK,SAAU0P,GACpC,IAAIkC,EAAaxB,GAASV,GAC1B,OAKU,SAAUsN,EAAUvR,GAChC,OAAOhJ,EAAUua,EAAUtf,EAAMwO,GAAMT,IAN9BpK,CAAQuQ,EAAYnG,GAAS3L,KAAI,SAAUwQ,GAChD,OAZS,SAAUZ,EAAQU,EAAU3E,EAAS6E,GAClD,MAAO,CACLZ,OAAQA,EACRU,SAAUA,EACV3E,QAASA,EACT6E,MAAOA,GAOEytD,CAASruD,EAAQkC,EAAYnG,EAAS6E,SA+BtC0tD,CAAcF,GAAUh+D,KAAI,SAAUgH,GAC3C,OAAOusD,GAAKv9B,GAAGhvB,EAAK4I,OAAQ5I,EAAKwJ,iBA0BrC2tD,GAAW,SAAUC,EAAOzzC,GAC9B,MAAO,CACL3C,KAAMo2C,EAAMp2C,KACZC,IAAKm2C,EAAMn2C,IAAM0C,EACjBwO,MAAOilC,EAAMjlC,MACbk8B,OAAQ+I,EAAM/I,OAAS1qC,IAGvB0zC,GAAS,SAAUD,EAAOzzC,GAC5B,MAAO,CACL3C,KAAMo2C,EAAMp2C,KACZC,IAAKm2C,EAAMn2C,IAAM0C,EACjBwO,MAAOilC,EAAMjlC,MACbk8B,OAAQ+I,EAAM/I,OAAS1qC,IAGvBzC,GAAY,SAAUk2C,EAAO11B,EAAQC,GACvC,MAAO,CACL3gB,KAAMo2C,EAAMp2C,KAAO0gB,EACnBzgB,IAAKm2C,EAAMn2C,IAAM0gB,EACjBxP,MAAOilC,EAAMjlC,MAAQuP,EACrB2sB,OAAQ+I,EAAM/I,OAAS1sB,IAkBvB21B,GAAU,SAAUlJ,GACtB,MAAO,CACLptC,KAAMotC,EAAKptC,KACXC,IAAKmtC,EAAKntC,IACVkR,MAAOi8B,EAAKj8B,MACZk8B,OAAQD,EAAKC,SAGbkJ,GAAa,SAAU3B,EAAQjxD,GACjC,OAAOzK,EAASR,KAAKk8D,EAAOO,QAAQxxD,KAElC6yD,GAAW,SAAU5B,EAAQjxD,EAAS+kC,GACxC,OAAIxhC,GAAUvD,GACL4yD,GAAW3B,EAAQjxD,GAAS3L,IAAIs+D,IAC9BnvD,GAAOxD,GAtBA,SAAUixD,EAAQjxD,EAAS+kC,GAC7C,OAAIA,GAAU,GAAKA,EAASnf,GAAO5lB,GAC1BixD,EAAO6B,cAAc9yD,EAAS+kC,EAAQ/kC,EAAS+kC,EAAS,GACtDA,EAAS,EACXksB,EAAO6B,cAAc9yD,EAAS+kC,EAAS,EAAG/kC,EAAS+kC,GAErDxvC,EAASrC,OAiBP6/D,CAAc9B,EAAQjxD,EAAS+kC,GAAQ1wC,IAAIs+D,IAE3Cp9D,EAASrC,QAGhB8/D,GAAe,SAAU/B,EAAQjxD,GACnC,OAAIuD,GAAUvD,GACL4yD,GAAW3B,EAAQjxD,GAAS3L,IAAIs+D,IAC9BnvD,GAAOxD,GACTixD,EAAO6B,cAAc9yD,EAAS,EAAGA,EAAS4lB,GAAO5lB,IAAU3L,IAAIs+D,IAE/Dp9D,EAASrC,QAMhB+/D,GAAQj7C,GAAa,CACvB,CAAE9kB,KAAM,IACR,CAAEggE,MAAO,CAAC,YAKRC,GAAiB,SAAUlC,EAAQjxD,EAASyyD,GAC9C,OAjtQsB3zD,EAitQPkB,EAjtQc8F,EAitQL8pC,GA7sQjBrpC,IAHE,SAAUpR,EAAG8D,GACpB,OAAOA,EAAK9D,KAEeqR,GAAU1H,EAAOgH,EAJN1B,YAitQL9Q,KAAKN,GAAO,SAAUgW,GACvD,OAAOgqD,GAAa/B,EAAQjoD,GAAMxU,QAAO,SAAUoiB,GACjD,OANU,SAAU67C,EAAO77C,GAC/B,OAAO67C,EAAMp2C,KAAOzF,EAAIyF,MAAQnO,KAAKmV,IAAIzM,EAAI4W,MAAQilC,EAAMp2C,MAAQ,GAAKo2C,EAAMp2C,KAAOzF,EAAI4W,MAK9E4lC,CAAUX,EAAO77C,SAntQhB,IAAU9X,EAAOgH,GAqvQ3ButD,GAAe,CACjBvuB,MAzFc,SAAU2tB,GACxB,OAAOA,EAAM/I,QAyFb4J,SAhCe,SAAUrC,EAAQjxD,EAASuzD,EAAUz5C,EAAU24C,GAC9D,IAAIe,EAAahB,GAASC,EAjBZ,GAkBd,OAAIvkD,KAAKmV,IAAIkwC,EAAS7J,OAAS5vC,EAAS4vC,QAAU,GAEvC6J,EAASj3C,IAAMm2C,EAAM/I,OADvBuJ,GAAMC,MAAMM,GAGVD,EAASj3C,MAAQm2C,EAAM/I,OACzBuJ,GAAMC,MAAMV,GAASC,EAAO,IAE5BU,GAAelC,EAAQjxD,EAASyyD,GAASQ,GAAMC,MAAM32C,GAAUi3C,EAzB1D,EAyBiF,IAAMP,GAAM//D,QAwB3GqjC,KAAMi8B,GACNP,OAAQzB,IAUNiD,GAAY,SAAUxC,EAAQ7zB,EAAUtjB,EAAU24C,EAAOiB,GAC3D,OAAmB,IAAfA,EACKn+D,EAASR,KAAK09D,GAVT,SAAUxB,EAAQtgE,EAAGmP,GACnC,OAAOmxD,EAAOlxD,iBAAiBpP,EAAGmP,GAAGpL,QAAO,SAAUmV,GACpD,MAAqB,UAAd7Y,GAAK6Y,MACXnW,SASCigE,CAAU1C,EAAQwB,EAAMp2C,KAAM+gB,EAAS0H,MAAM2tB,IAP9B,SAAUxB,EAAQ7zB,EAAUtjB,EAAU24C,EAAOiB,GAChE,OAAOD,GAAUxC,EAAQ7zB,EAAUtjB,EAAUsjB,EAAS7G,KAAKk8B,EA1D7C,GA0DgEiB,GAOrEE,CAAe3C,EAAQ7zB,EAAUtjB,EAAU24C,EAAOiB,EAAa,GAEjEzC,EAAO4C,eAAepB,EAAMp2C,KAAM+gB,EAAS0H,MAAM2tB,IAAQl+D,MAAK,SAAUu/D,GAC7E,OAAOA,EAAM/5D,MAAMzG,KAAKiC,EAASrC,MAAM,SAAU8M,GAC/C,OAAOgzD,GAAa/B,EAAQjxD,GAASzL,MAAK,SAAUg/D,GAClD,OAAOn2B,EAASk2B,SAASrC,EAAQjxD,EAASuzD,EAAUz5C,EAAU24C,GAAOn/D,KAAKiC,EAASrC,MAAM,SAAU6gE,GACjG,OAAON,GAAUxC,EAAQ7zB,EAAUtjB,EAAUi6C,EAAUL,EAAa,SAErEt/D,SAAQ,WACT,OAAOmB,EAASR,KAAK09D,QAEtBl9D,EAASrC,UAkBZggE,GAAQ,SAAU91B,EAAU6zB,EAAQwB,GACtC,IAAIuB,EAAQ52B,EAAS7G,KAAKk8B,EA/FZ,GAgGVwB,EAAWR,GAAUxC,EAAQ7zB,EAAUq1B,EAAOuB,EA/FlC,KA+FsDrgE,MAAMqgE,GAC5E,OAZgB,SAAU52B,EAAU62B,EAAUhD,GAC9C,OAAI7zB,EAAS0H,MAAMmvB,GAAYhD,EAAOiD,iBAC7B3+D,EAASR,KAAKqoC,EAAS0H,MAAMmvB,GAAYhD,EAAOiD,kBAC9C92B,EAAS0H,MAAMmvB,GAAY,EAC7B1+D,EAASR,MAAMqoC,EAAS0H,MAAMmvB,IAE9B1+D,EAASrC,OAMXihE,CAAY/2B,EAAU62B,EAAUhD,GAAQ39D,MAAK,WAClD,OAAO29D,EAAO4C,eAAeI,EAAS53C,KAAM+gB,EAAS0H,MAAMmvB,OAC1D,SAAUz1C,GAEX,OADAyyC,EAAOmD,SAAS,EAAG51C,GACZyyC,EAAO4C,eAAeI,EAAS53C,KAAM+gB,EAAS0H,MAAMmvB,GAAYz1C,OAGvE61C,GAAU,CACZC,MAAOriE,EAAMihE,GAjEE,CACfpuB,MAtFa,SAAU2tB,GACvB,OAAOA,EAAMn2C,KAsFbg3C,SAda,SAAUrC,EAAQjxD,EAASuzD,EAAUz5C,EAAU24C,GAC5D,IAAI8B,EAAc7B,GAAOD,EA7BX,GA8Bd,OAAIvkD,KAAKmV,IAAIkwC,EAASj3C,IAAMxC,EAASwC,KAAO,GAEjCi3C,EAAS7J,OAAS+I,EAAMn2C,IAD1B22C,GAAMC,MAAMqB,GAGVhB,EAAS7J,SAAW+I,EAAMn2C,IAC5B22C,GAAMC,MAAMR,GAAOD,EAAO,IAE1BU,GAAelC,EAAQjxD,EAASyyD,GAASQ,GAAMC,MAAM32C,GAAUg4C,EArC1D,EAqCkF,IAAMtB,GAAM//D,QAM5GqjC,KAAMm8B,GACNT,OAAQ3B,KA8DRkE,QAASviE,EAAMihE,GAAOG,IACtBoB,QAzBY,SAAUxD,EAAQwB,GAC9B,OAAOxB,EAAO4C,eAAepB,EAAMp2C,KAAMo2C,EAAMn2C,IAnFjC,IA4Gdo4C,UA7Bc,SAAUzD,EAAQwB,GAChC,OAAOxB,EAAO4C,eAAepB,EAAMp2C,KAAMo2C,EAAM/I,OAhFjC,IA6GdiL,YAAa5iE,EA7GC,IAiHZ6iE,GAAW,SAAU3D,EAAQ7sD,EAAQ8f,GACvC,OAAO+sC,EAAO1E,eAAeh4D,MAAK,SAAU25D,GAC1C,OA7MQ,SAAU9pD,EAAQpE,EAAS+kC,EAAQ7gB,GAE7C,OADagsB,GAAKlwC,GAtBL,SAAUoE,EAAQpE,EAASkkB,GACxC,OAAOA,EAAUmrC,SAASrvD,GAAS5L,SAAQ,WACzC,OAAO29D,GAAS/xD,EAASkkB,EAAU+tC,OAAQ7tD,MAC1C/P,IAAI6vB,EAAU9E,UAmBYy1C,CAASzwD,EAAQpE,EAASkkB,GAAaguC,GAAa9tD,EAAQpE,EAAS+kC,EAAQ7gB,IAC5F7vB,KAAI,SAAUygE,GAC1B,MAAO,CACL/6D,MAAO+6D,EACP/kD,OAAQ+kD,MAwMHC,CAAM3wD,EAAQ8pD,EAAIn+C,OAAQm+C,EAAIxG,QAASxjC,GAAW5wB,MAAK,WAC5D,OAAOiC,EAASR,KAAK+vC,GAAMopB,EAAIn+C,OAAQm+C,EAAIxG,aAC1C,SAAUsN,GACX,IAvMkBC,EAuMd3+D,EAAQ26D,EAAOiE,UAAUF,GAE7B,OAzMkBC,EAwMHlE,GAAYC,OAAOC,EAAQ/C,EAAIn+C,OAAQm+C,EAAIxG,QAASpxD,EAAMyZ,OAAQzZ,EAAMoxD,QAASxjC,EAAUktC,QAAShtD,GAvMhH2sD,GAAY73C,KAAK+7C,GAAU,SAAUE,GAC1C,OAAO5/D,EAASrC,UACf,WACD,OAAOqC,EAASrC,UACf,SAAU8V,GACX,OAAOzT,EAASR,KAAK+vC,GAAM97B,EAAM,OAChC,SAAUA,GACX,OAAOzT,EAASR,KAAK+vC,GAAM97B,EAAM4c,GAAO5c,eAqMxCosD,GAAS,SAAUnE,EAAQ7sD,EAAQpE,EAAS+kC,EAAQ7gB,EAAWwvC,GACjE,OAAmB,IAAfA,EACKn+D,EAASrC,OAEXmiE,GAAUpE,EAAQ7sD,EAAQpE,EAAS+kC,EAAQ7gB,GAAW3vB,MAAK,SAAU+gE,GAC1E,IAAIh/D,EAAQ26D,EAAOiE,UAAUI,GACzBL,EAAWlE,GAAYC,OAAOC,EAAQjxD,EAAS+kC,EAAQzuC,EAAMyZ,OAAQzZ,EAAMoxD,QAASxjC,EAAUktC,QAAShtD,GAC3G,OAAO2sD,GAAY73C,KAAK+7C,GAAU,WAChC,OAAO1/D,EAASrC,UACf,WACD,OAAOqC,EAASR,KAAKugE,MACpB,SAAUtsD,GACX,OAAIvI,GAAKT,EAASgJ,IAAoB,IAAX+7B,EAClBwwB,GAAStE,EAAQjxD,EAAS+kC,EAAQ2tB,GAAQxuC,GAE1CkxC,GAAOnE,EAAQ7sD,EAAQ4E,EAAM,EAAGkb,EAAWwvC,EAAa,MAEhE,SAAU1qD,GACX,OAAIvI,GAAKT,EAASgJ,IAAS+7B,IAAWnf,GAAO5c,GACpCusD,GAAStE,EAAQjxD,EAAS+kC,EAAQytB,GAAUtuC,GAE5CkxC,GAAOnE,EAAQ7sD,EAAQ4E,EAAM4c,GAAO5c,GAAOkb,EAAWwvC,EAAa,UAK9E6B,GAAW,SAAUtE,EAAQjxD,EAAS+kC,EAAQxO,EAAMrS,GACtD,OAAO2uC,GAAS5B,EAAQjxD,EAAS+kC,GAAQxwC,MAAK,SAAUqiB,GACtD,OAAO4+C,GAAMvE,EAAQ/sC,EAAWqS,EAAK3f,EAAKy9C,GAAQM,oBAGlDa,GAAQ,SAAUvE,EAAQ/sC,EAAWtN,GACvC,IAAIzZ,EAAUoB,KAAWpB,QACzB,OAAIA,EAAQzB,YAAcyB,EAAQrB,YAAcqB,EAAQtB,aAAesB,EAAQ1B,SACtEyoB,EAAUuxC,WAAWxE,EAAQr6C,GAC3BzZ,EAAQxB,OACVuoB,EAAUwxC,QAAQzE,EAAQr6C,GAE1BrhB,EAASrC,QAGhBmiE,GAAY,SAAUpE,EAAQ7sD,EAAQpE,EAAS+kC,EAAQ7gB,GACzD,OAAO2uC,GAAS5B,EAAQjxD,EAAS+kC,GAAQxwC,MAAK,SAAUqiB,GACtD,OAAO4+C,GAAMvE,EAAQ/sC,EAAWtN,OAgBhC++C,GAAW,SAAU1E,EAAQ7sD,EAAQ8f,EAAWE,EAASspC,GAC3D,OAAO1mD,GAAUod,EAAS,QAAShgB,GAAQ7P,MAAK,SAAUwF,GACxD,OAAOiN,GAAUjN,EAAO,QAASqK,GAAQ7P,MAAK,SAAU2V,GACtD,OAVY,SAAU/J,EAAM+J,GAChC,OAvWO1D,GAuWWrG,GAAM,SAAUyD,GAChC,OAAOK,GAAOL,GAAGpP,QAAO,SAAUoD,GAChC,OAAO6I,GAAK7I,EAAGsS,aA1WwB9F,GACD1Q,SAgXjCkiE,CAAYlI,EAAQxjD,GAhBhB,SAAU+mD,EAAQ7sD,EAAQ8f,GACvC,OAAO0wC,GAAS3D,EAAQ7sD,EAAQ8f,GAAW3vB,MAAK,SAAUshE,GACxD,OAAOT,GAAOnE,EAAQ7sD,EAAQyxD,EAAK71D,QAAS61D,EAAK9wB,OAAQ7gB,EA5D3C,IA4DmE7vB,IAAI48D,EAAOiE,cAiBnFY,CAAS7E,EAAQ7sD,EAAQ8f,GAAW3vB,MAAK,SAAU+B,GACxD,OAAO0Q,GAAU1Q,EAAMyZ,OAAQ,QAAS3L,GAAQ/P,KAAI,SAAU0b,GAC5D,MAAO,CACLhW,MAAOA,EACPgW,OAAQA,EACRzZ,MAAOA,SAPJf,EAASrC,cAcpB6iE,GAAW,SAAU9E,EAAQ7sD,EAAQ8f,EAAWE,EAASspC,EAAQsI,GACnE,OAAIz3D,KAAWpB,QAAQxB,OACdpG,EAASrC,OAET8iE,EAAS5xC,EAAShgB,GAAQhQ,SAAQ,WACvC,OAAOuhE,GAAS1E,EAAQ7sD,EAAQ8f,EAAWE,EAASspC,GAAQr5D,KAAI,SAAUgH,GACxE,IAAI/E,EAAQ+E,EAAK/E,MACjB,OAAOw4D,GAAgBv5D,EAASR,KAAKk6D,GAAU34D,EAAMyD,MAAOzD,EAAMmxD,QAASnxD,EAAMyZ,OAAQzZ,EAAMoxD,WAAW,UAK9GuO,GAAe,SAAU7xC,EAAShgB,GACpC,OAAO4C,GAAUod,EAAS,KAAMhgB,GAAQ7P,MAAK,SAAU2a,GACrD,OAAOlI,GAAUkI,EAAU,QAAS9K,GAAQ7P,MAAK,SAAU2V,GACzD,IAAIC,EAAO/D,GAAc8D,EAAO,MAChC,OAAIzJ,GAAKyO,EAAU/E,EAAK,IAvZb,SAAUnK,EAAS8F,EAAW1B,GAC7C,OAAO+rD,GAASE,GAAYrwD,GAuZG,SAAUA,GACjC,OAAOkmB,GAAOlmB,GAAStM,WAxZiB0Q,GAuZnC8xD,CAAWhsD,EAAO,EAEtB9F,GAAQ/P,KAAI,SAAUiD,GACvB,IAAI6+D,EAAavwC,GAAOtuB,GACxB,OAAOw3D,GAAgBv5D,EAASR,KAAKk6D,GAAU33D,EAAM6+D,EAAY7+D,EAAM6+D,KAAc,MAGhF5gE,EAASrC,cAKpBkjE,GAAgB,SAAUhyC,EAAShgB,GACrC,OAAO4C,GAAUod,EAAS,KAAMhgB,GAAQ7P,MAAK,SAAU2a,GACrD,OAAOlI,GAAUkI,EAAU,QAAS9K,GAAQ7P,MAAK,SAAU2V,GACzD,IAAIC,EAAO/D,GAAc8D,EAAO,MAChC,OAAIzJ,GAAKyO,EAAU/E,EAAKA,EAAK7X,OAAS,IAra1B,SAAU0N,EAAS8F,EAAW1B,GAC9C,OAAOgsD,GAAUC,GAAYrwD,GAqaG,SAAUA,GAClC,OAAOsQ,GAAMtQ,GAAStM,WAtamB0Q,GAqapCiyD,CAAYnsD,EAAO,EAEvB9F,GAAQ/P,KAAI,SAAUic,GACvB,OAAOw+C,GAAgBv5D,EAASR,KAAKk6D,GAAU3+C,EAAO,EAAGA,EAAO,KAAK,MAGhE/a,EAASrC,cAKpB+wC,GAAS,SAAUgtB,EAAQt8C,EAAWvQ,EAAQ8f,EAAWE,EAASspC,EAAQyB,GAC5E,OAAOwG,GAAS1E,EAAQ7sD,EAAQ8f,EAAWE,EAASspC,GAAQn5D,MAAK,SAAU8G,GACzE,OAAO6zD,GAASv6C,EAAWvQ,EAAQ/I,EAAKtB,MAAOsB,EAAK0U,OAAQo/C,OA0B5DmH,GAAW,SAAU57D,EAAQ0J,GAC/B,OAAO4C,GAAUtM,EAAQ,QAAS0J,IAsChCqO,GAAO,CACT48C,SAAU3qD,GACVutD,OAAQzB,GACRpxC,SAAUwoC,GAAK18C,OACfuqD,WAAYpB,GAAQG,QACpBkB,QAASrB,GAAQK,UACjBtD,QAASL,GAAYF,YAEnBt+C,GAAK,CACP88C,SAAU7qD,GACVytD,OAAQ3B,GACRlxC,SAAUwoC,GAAK18C,OACfuqD,WAAYpB,GAAQC,MACpBoB,QAASrB,GAAQI,QACjBrD,QAASL,GAAYH,UAGnB2F,GAAQ,SAAUl0D,GACpB,OAAO,SAAUm0D,GACf,OAAOA,IAAYn0D,IAGnBo0D,GAAOF,GAAM,IACbG,GAASH,GAAM,IACfI,GAAe,SAAUH,GAC3B,OAAOA,GAAW,IAAMA,GAAW,IAEjCI,GAAQ,CACVC,WAAYN,GAAM,IAClBO,UAAWP,GAAM,KAEfQ,GAAQ,CACVF,WAAYN,GAAM,IAClBO,UAAWP,GAAM,KAiBfS,GAAe,SAAUr6C,GAgE3B,MAAO,CACL5c,iBAhEqB,SAAUpP,EAAGmP,GAClC,OAAOnB,GAAaiB,UAAUjB,GAAaH,QAAQme,EAAI3d,UAAWrO,EAAGmP,IAgErE0xD,QA9DY,SAAUxxD,GACtB,OAAOA,EAAQtB,IAAIsd,yBA8DnB82C,cA5DkB,SAAU/4D,EAAO0tD,EAAS13C,EAAQ23C,GACpD,IAAIwG,EAAM9F,GAAaD,MAAMpuD,EAAO0tD,EAAS13C,EAAQ23C,GACrD,OAvzBiB,SAAU/qC,EAAK0M,GAElC,OAhY2B8D,EA+XjBk9B,GAAW1tC,EAAK0M,GA9XtBohC,EAAQt9B,EAAIu9B,kBACZjB,EAAOgB,EAAMn4D,OAAS,EAAIm4D,EAAM,GAAKt9B,EAAInR,yBACjC+C,MAAQ,GAAK0qC,EAAKxtC,OAAS,EAAI1mB,EAASR,KAAK00D,GAAMp1D,IAAIm1D,IAAUj0D,EAASrC,OAHrE,IAAUi6B,EACvBs9B,EACAhB,EAmrCKwN,CAAet6C,EAAKuxC,IA2D3B3B,aAzDiB,WACjB,OAAO0B,GAAMtxC,GAAKtoB,KAAI,SAAU6iE,GAC9B,OAAOlI,GAAeryC,EAAKu6C,OAwD7BhC,UArDc,SAAUI,GACxB,IAAIl2C,EAAWgpC,GAAahpC,SAASk2C,EAAMv7D,MAAOu7D,EAAMvlD,QACxD,OAAOi/C,GAAeryC,EAAKyC,IAoD3By0C,eAlDmB,SAAUljE,EAAGmP,GAChC,OA/zBa,SAAU6c,EAAKhsB,EAAGmP,GACjC,OAtJgB,SAAU6c,EAAKhsB,EAAGmP,GAClC,IAAI2F,EAAM9G,GAAaH,QAAQme,EAAI3d,UACnC,OAAO0sD,GAAgBjmD,EAAK9U,EAAGmP,GAAGzL,KAAI,SAAU84B,GAC9C,OAAOq6B,GAAgB7oD,GAAaH,QAAQ2uB,EAAIq7B,gBAAiBr7B,EAAI08B,YAAalrD,GAAaH,QAAQ2uB,EAAI28B,cAAe38B,EAAI48B,cAmJzHoN,CAAYx6C,EAAKhsB,EAAGmP,GA8zBlBs3D,CAAWz6C,EAAKhsB,EAAGmP,GAAGzL,KAAI,SAAU8zD,GACzC,OAAO4G,GAAa5G,EAAMpuD,MAAOouD,EAAMV,QAASU,EAAMp4C,OAAQo4C,EAAMT,aAiDtE2P,eA9CmB,YAh0BX,SAAU16C,GACpB2vC,GAAmB3vC,GAAKroB,MAAK,SAAU+0B,GACrC,OAAOA,EAAUojC,qBA+zBjBp/B,CAAM1Q,IA8CN26C,kBA5CsB,SAAUC,QAChB,IAAZA,IACFA,GAAU,GAEZtJ,GAAMtxC,GAAKroB,MAAK,SAAU45D,GACxB,OAAOA,EAAI56D,MAAK,SAAU65B,GACxB,OAAOA,EAAI0qB,SAAS0f,MACnB,SAAU9O,EAAWO,GACtB,IAAIhB,EAAOuP,EAAU9O,EAAYO,EACjCiE,GAAYtwC,EAAKqrC,EAAMA,MACtB,SAAUjuD,EAAO0tD,EAAS13C,EAAQ23C,GACnC,IAAIjpD,EAAO84D,EAAUx9D,EAAQgW,EACzBg1B,EAASwyB,EAAU9P,EAAUC,EACjCsF,GAASrwC,EAAKle,EAAMsmC,EAAQtmC,EAAMsmC,UAgCtCyyB,aAzBiB,SAAUtJ,GAC3BlB,GAASrwC,EAAKuxC,EAAIn0D,MAAOm0D,EAAIzG,QAASyG,EAAIn+C,OAAQm+C,EAAIxG,UAyBtD+P,qBAvByB,SAAU19D,EAAOgW,GAC1Ck9C,GAAYtwC,EAAK5iB,EAAOgW,IAuBxB2nD,eA9BmB,SAAU13D,IAz2Bd,SAAU2c,EAAK3c,GAChC,IAAImtB,EAjamB,SAAUxQ,EAAK3c,GACtC,IAAImtB,EAAMxQ,EAAI3d,SAASiqD,cAEvB,OAE4B,SAAU97B,EAAKntB,GACpCmtB,EAAIwqC,mBAAmB33D,EAAQtB,KAJtCk5D,CAAwBzqC,EAAKntB,GACtBmtB,EA8ZGwqC,CAAmBh7C,EAAK3c,GAClCwsD,GAAiB7vC,EAAKwQ,GAw2BpB0qC,CAAal7C,EAAK3c,IA8BlBk0D,eAtBmB,WACnB,OAAOv3C,EAAIm7C,aAsBXC,WApBe,WACf,IAxEkBC,EAChBvyD,EACA9U,EACAmP,EAsEF,OAzEkBk4D,EAwEFr5D,GAAaH,QAAQme,EAAI3d,UAvEvCyG,OAAejU,IAATwmE,EAAqBA,EAAKt5D,IAAMM,SACtCrO,EAAI8U,EAAIE,KAAKuX,YAAczX,EAAIoX,gBAAgBK,WAC/Cpd,EAAI2F,EAAIE,KAAKqX,WAAavX,EAAIoX,gBAAgBG,UAC3CR,GAAc7rB,EAAGmP,IAqEXwc,KAmBX83C,SAjBa,SAAUzjE,EAAGmP,IArErB,SAAUnP,EAAGmP,EAAGk4D,GACvB,IACIr7C,QADenrB,IAATwmE,EAAqBA,EAAKt5D,IAAMM,UAC5B4d,YACVD,GACFA,EAAIy3C,SAASzjE,EAAGmP,GAkEhBm4D,CAAGtnE,EAAGmP,EAAGnB,GAAaH,QAAQme,EAAI3d,cAoBlCk5D,GAAK,SAAU/tD,EAAM8B,GACvB,MAAO,CACL9B,KAAMA,EACN8B,KAAMA,IA+NNksD,GAAoB,SAAUv0D,GAChC,OAA8E,IAAvEw1B,GAAMz6B,GAAaH,QAAQoF,EAAElJ,QAAS,8BAE/C,SAAS09D,GAAe1vC,EAAQqa,EAAYs1B,GAC1C,IAcIC,EA1FO,SAAU1uC,EAAU2uC,EAAaC,GAC5C,IAAIC,EAA4B,SAAUz4D,GACxCyH,GAAOzH,EAAS4pB,EAASC,UACzBpiB,GAAOzH,EAAS4pB,EAASG,eACzBtiB,GAAOzH,EAAS4pB,EAASI,eAEvB0uC,EAAwB,SAAU14D,GACpCmH,GAAInH,EAAS4pB,EAASC,SAAU,MAE9BwD,EAAQ,SAAU1Y,GACpBgkD,EAAkBhkD,GAClB6jD,KAEEG,EAAoB,SAAUhkD,GAChC,IAAI0B,EAAOjQ,GAAcuO,EAAWiV,EAASE,kBAC7Cx1B,EAAK+hB,EAAMoiD,IASb,MAAO,CACLE,kBAAmBA,EACnBtrC,MAAOA,EACP8hC,YAVgB,SAAUx6C,EAAW9R,EAAO9I,EAAOgW,GACnDsd,EAAM1Y,GACNrgB,EAAKuO,EAAO61D,GACZvxD,GAAIpN,EAAO6vB,EAASG,cAAe,KACnC5iB,GAAI4I,EAAQ6Z,EAASI,aAAc,KACnCuuC,EAAY11D,EAAO9I,EAAOgW,IAM1B+Z,iBAAkBF,EAASE,iBAC3BvT,sBAAuBqT,EAASrT,sBAChCC,qBAAsBoT,EAASpT,sBA4DfoiD,CAA2BhvC,IAd3B,SAAU/mB,EAAO9I,EAAOgW,GACxCsoD,EAAiBxrC,UAAUv4B,MAAK,SAAUu4B,GACzB3iB,GAAMnQ,GACZzF,MAAK,SAAU4V,GACtB,IAAI6d,EAAe+Z,GAAiBpZ,GAChCkE,EAAa9F,GAAeh1B,EAAM6M,GAAaH,QAAQkqB,EAAOiE,UAAW5E,GACzE8wC,EAxBQ,SAAU3uD,EAAOxP,EAAQkyB,GAC3C,IAAI/f,EAAYuB,GAAoBlE,GAEpC,OADco/B,GAAQz8B,EAAWnS,GAClBrG,KAAI,SAAU42B,GAC3B,IAAIpf,EAAO87B,GAAO96B,EAAW+f,GAAY,GAGzC,MAAO,CACLksC,cA5BiB,SAAUjtD,EAAMof,EAAe2B,GACpD,IAAImsC,EAASltD,EAAKnW,MAAM,EAAGu1B,EAAcA,EAAc34B,OAAS,GAAGiY,IAAM,GACrEyuD,EAAYlxB,GAAaixB,EAAQnsC,GACrC,OAAOr4B,EAAKykE,GAAW,SAAUv2D,GAC/B,IAAIw2D,EAAcx2D,EAAOI,MAAMnN,MAAM,EAAGu1B,EAAcA,EAAc34B,OAAS,GAAGmY,OAAS,GACzF,OAAOpW,EAAI4kE,GAAa,SAAUjwD,GAChC,OAAOA,EAAKhJ,cAmBMk5D,CAAiBrtD,EAAMof,EAAe2B,GAIxDusC,iBAnBoB,SAAUttD,EAAMof,EAAe2B,GACvD,IAAIwsC,EAAWvtD,EAAKnW,MAAMu1B,EAAc,GAAG1gB,IAAM0gB,EAAc,GAAGvoB,QAAU,EAAGmJ,EAAKvZ,QAChF+mE,EAAcvxB,GAAasxB,EAAUxsC,GACzC,OAAOr4B,EAAK8kE,GAAa,SAAU52D,GACjC,IAAIw2D,EAAcx2D,EAAOI,MAAMnN,MAAMu1B,EAAc,GAAGxgB,OAASwgB,EAAc,GAAGtoB,QAAU,EAAGF,EAAOI,MAAMvQ,QAC1G,OAAO+B,EAAI4kE,GAAa,SAAUjwD,GAChC,OAAOA,EAAKhJ,cAUSs5D,CAAoBztD,EAAMof,EAAe2B,OAkB3C2sC,CAAcrvD,EAAO2iB,EAASD,IAvrKxB,SAAUlE,EAAQ7lB,EAAO9I,EAAOgW,EAAQ8oD,GACrEnwC,EAAOoX,KAAK,uBAAwB,CAClCj9B,MAAOA,EACP9I,MAAOA,EACPgW,OAAQA,EACR8oD,WAAYA,IAmrKRW,CAAyB9wC,EAAQ7lB,EAAO9I,EAAOgW,EAAQ8oD,YAI/C,WACZ,OArrK0B,SAAUnwC,GACtCA,EAAOoX,KAAK,uBAorKH25B,CAAwB/wC,MA8HjC,OA3HAA,EAAO2B,GAAG,QAAQ,SAAUqvC,GAC1B,IAAI/8C,EAAM+L,EAAO6/B,SACb5iD,EAAO8iB,GAAUC,GACjBtkB,EAASyQ,GAAU6T,GAanBixC,EA/PI,SAAUh9C,EAAKhI,EAAWvQ,EAAQk0D,GAC5C,IACI3jC,EAhLe,SAAUs8B,EAAQt8C,EAAWvQ,EAAQk0D,GACxD,IAzBIn/C,EAyBA6vB,GAzBA7vB,EAAUgL,GAAK5uB,EAASrC,QAarB,CACLm6B,MAbU,WACV,OAAOlU,EAAQhS,IAAI5R,EAASrC,SAa5BiU,IAXQ,SAAUhS,GAClB,OAAOgkB,EAAQhS,IAAI5R,EAASR,KAAKI,KAWjCykE,MATU,WACV,OAAOzgD,EAAQ/hB,MAAM1D,UASrB22B,GAPO,SAAUt3B,GACjB,OAAOomB,EAAQ/hB,MAAM9C,KAAKvB,MAexB8mE,EAAa7wB,EAAO3b,MACpBysC,EAAiB,SAAU/kC,GAC7BiU,EAAO3e,IAAG,SAAUtwB,GAClBu+D,EAAYK,kBAAkBhkD,GAC9B2hD,GAASvhC,EAAMr6B,OAAQ0J,GAAQ9P,MAAK,SAAUyb,GAC5C6E,GAAS7a,EAAOgW,EAAQ3L,GAAQ9P,MAAK,SAAU86D,GAC7C,IAAIr6C,EAAQq6C,EAAQr6C,MAAMphB,MAAM,KAC5BohB,EAAMziB,OAAS,GAAsB,IAAjByiB,EAAMziB,SAAiBmO,GAAK1G,EAAOgW,MACzDuoD,EAAYnJ,YAAYx6C,EAAWI,EAAOq6C,EAAQr1D,MAAOq1D,EAAQr/C,QACjEkhD,EAAOyG,eAAe3nD,cAiBhC,MAAO,CACL8pD,WAAYA,EACZr7B,UAbc,SAAUzJ,GACxBujC,EAAYjrC,MAAM1Y,GAClB2hD,GAASvhC,EAAMr6B,OAAQ0J,GAAQ9P,KAAK00C,EAAO7hC,MAY3Cu3B,UAVc,SAAU3J,GACxB+kC,EAAe/kC,IAUfglC,QARY,SAAUhlC,GACtB+kC,EAAe/kC,GACf8kC,MAsJaG,CADFhD,GAAar6C,GACYhI,EAAWvQ,EAAQk0D,GACzD,MAAO,CACLuB,WAAYllC,EAASklC,WACrBr7B,UAAW7J,EAAS6J,UACpBE,UAAW/J,EAAS+J,UACpBq7B,QAASplC,EAASolC,SAwPEE,CAAMt9C,EAAKhX,EAAMvB,EAAQk0D,GACzC4B,EAtPO,SAAUv9C,EAAKhI,EAAWvQ,EAAQk0D,GAC/C,IAAIrH,EAAS+F,GAAar6C,GACtBw9C,EAAkB,WAEpB,OADA7B,EAAYjrC,MAAM1Y,GACXpf,EAASrC,QAyElB,MAAO,CACLknE,QAxEY,SAAUrlC,EAAOh7B,EAAO0tD,EAAS13C,EAAQ23C,EAASxjC,GAC9D,IAAIm2C,EAAYtlC,EAAMpsB,IAClB6tD,EAAU6D,EAAUC,MACpBC,GAAkC,IAAvBF,EAAUE,SAmDzB,OAlDcnkD,GAASzB,EAAW2jD,EAAYxuC,kBAAkBx2B,MAAK,WACnE,OAAIojE,GAAOF,IAAY+D,EACdtoE,EAAMgyC,GAAQgtB,EAAQt8C,EAAWvQ,EAAQqO,GAAM1C,EAAQhW,EAAOu+D,EAAYnJ,aACxEsH,GAAKD,IAAY+D,EACnBtoE,EAAMgyC,GAAQgtB,EAAQt8C,EAAWvQ,EAAQmO,GAAIxC,EAAQhW,EAAOu+D,EAAYnJ,aACtEuH,GAAOF,GACTvkE,EAAM8jE,GAAU9E,EAAQ7sD,EAAQqO,GAAM1C,EAAQhW,EAAOq8D,IACnDK,GAAKD,GACPvkE,EAAM8jE,GAAU9E,EAAQ7sD,EAAQmO,GAAIxC,EAAQhW,EAAOk8D,IAEnD1gE,EAASrC,QAEjB,SAAU22B,GACX,IAAI2wC,EAAW,SAAUC,GACvB,OAAO,WAIL,OAHiBljE,EAAQkjE,GAAU,SAAUj8C,GAC3C,OAlzBC,SAAUrU,EAAMJ,EAAS4K,EAAWkV,EAAUyuC,GAMzD,OAAO7hD,GAAeoT,EAAU1f,EAAMJ,EAASuuD,EAAY/hD,sBAAuB+hD,EAAY9hD,sBAAsBniB,KAL9F,SAAUqmE,GAG9B,OAFApC,EAAYK,kBAAkBhkD,GAC9B2jD,EAAYnJ,YAAYx6C,EAAW+lD,EAAQ3lD,MAAO2lD,EAAQ3gE,MAAO2gE,EAAQ3qD,QAClE2qD,EAAQ3lD,SA8yBAgiB,CAAOvY,EAAMrU,KAAMqU,EAAMvS,KAAM0I,EAAWkV,EAAUyuC,MAE3ChlE,MAAK,WACrB,OAAOgjB,GAAS3B,EAAW2jD,EAAY/hD,sBAAuB+hD,EAAY9hD,sBAAsBniB,KAAI,SAAUgjB,GAC5G,IAAI+H,EAAWs3C,GAAOF,IAAYtyC,EAAU4yC,UAAUN,GAAW5O,GAAKz8C,MAAQy8C,GAAK18C,OAGnF,OAFA+lD,EAAOwG,qBAAqB7P,GAAKv9B,GAAGhT,EAAM/G,MAAO,GAAI8O,EAAS/H,EAAMnN,QACpEouD,EAAYjrC,MAAM1Y,GACXm6C,GAAgBv5D,EAASrC,QAAQ,SAEzC,SAAUu3C,GACX,OAAOl1C,EAASR,KAAK+5D,GAAgBv5D,EAASrC,QAAQ,SAI5D,OAAIwjE,GAAOF,IAAY+D,EACdC,EAAS,CAACtC,GAAG,EAAI,KACfzB,GAAKD,IAAY+D,EACnBC,EAAS,CAACtC,IAAI,EAAG,KACfh0C,EAAU2yC,WAAWL,IAAY+D,EACnCC,EAAS,CACdtC,GAAG,GAAI,GACPA,IAAI,EAAG,KAEAh0C,EAAU4yC,UAAUN,IAAY+D,EAClCC,EAAS,CACdtC,GAAG,EAAG,GACNA,GAAG,EAAI,KAEAvB,GAAaH,KAAyB,IAAb+D,EAC3BJ,EAEA5kE,EAASrC,OAGb0hC,IAmBP+lC,MAjBU,SAAU5lC,EAAOh7B,EAAO0tD,EAAS13C,EAAQ23C,GACnD,OAAOtxC,GAASzB,EAAW2jD,EAAYxuC,kBAAkBx2B,MAAK,WAC5D,IAAI+mE,EAAYtlC,EAAMpsB,IAClB6tD,EAAU6D,EAAUC,MAExB,OAAiB,KADqB,IAAvBD,EAAUE,UAEhBhlE,EAASrC,OAEdyjE,GAAaH,GAx3BZ,SAAU7hD,EAAWvQ,EAAQrK,EAAO0tD,EAAS13C,EAAQ23C,EAASyH,GACvE,OAAM1uD,GAAK1G,EAAOgW,IAAW03C,IAAYC,EAOhCnyD,EAASrC,OANT8T,GAAUjN,EAAO,QAASqK,GAAQ7P,MAAK,SAAUY,GACtD,OAAO6R,GAAU+I,EAAQ,QAAS3L,GAAQ7P,MAAK,SAAUxB,GACvD,OAAOm8D,GAASv6C,EAAWvQ,EAAQjP,EAAGpC,EAAGo8D,SAq3BlCyL,CAAKjmD,EAAWvQ,EAAQrK,EAAO0tD,EAAS13C,EAAQ23C,EAAS4Q,EAAYnJ,aAErE55D,EAASrC,SAEjBqC,EAASrC,QA2KM2nE,CAASl+C,EAAKhX,EAAMvB,EAAQk0D,GAC1CwC,EArKO,SAAUn+C,EAAKhI,EAAWvQ,EAAQk0D,GAC/C,IAAIrH,EAAS+F,GAAar6C,GAC1B,OAAO,SAAU5iB,EAAOgW,GACtBuoD,EAAYK,kBAAkBhkD,GAC9BC,GAAS7a,EAAOgW,EAAQ3L,GAAQ9P,MAAK,SAAU86D,GAC7C,IAAIr6C,EAAQq6C,EAAQr6C,MAAMphB,MAAM,IAChC2kE,EAAYnJ,YAAYx6C,EAAWI,EAAOq6C,EAAQr1D,MAAOq1D,EAAQr/C,QACjEkhD,EAAOyG,eAAe3nD,GACtBkhD,EAAOqG,wBA6JQyD,CAASp+C,EAAKhX,EAAMvB,EAAQk0D,GAI7C5vC,EAAO2B,GAAG,uBAAuB,SAAUzmB,GACzC,OAAOk3D,EAAWl3D,EAAE7J,MAAO6J,EAAEmM,WAE/B,IAuEMirD,EACAC,EAxEFC,EAAiB,SAAUnmC,EAAOomC,IANpB,SAAUpmC,GAC1B,OAA8B,IAAvBA,EAAMpsB,IAAI4xD,UAMZa,CAAYrmC,KAGbomC,EAASrjC,MACX/C,EAAM+C,OAERqjC,EAAS9xC,UAAU/0B,MAAK,SAAU+mE,GAChC,IAAIj8C,EAAWgpC,GAAahpC,SAASi8C,EAAGthE,MAAOshE,EAAGtrD,QAC9Cod,EAAMk9B,GAAW1tC,EAAKyC,GAC1BsJ,EAAOW,UAAU6D,OAAOC,QA8BxBmuC,EAAc,SAAU3yD,GAC1B,OAAsB,IAAfA,EAAI4yD,QA+CTC,GAjBER,EAAa72C,GAAKxlB,GAAaH,QAAQmH,IACvCs1D,EAAgB92C,GAAK,GAclB,CAAEs3C,SAbM,SAAU/qE,GACvB,IAAIgK,EAASiE,GAAaH,QAAQ9N,EAAEgK,QACpC,GAAqB,OAAjB1J,GAAK0J,IAAqC,OAAjB1J,GAAK0J,GAAkB,CAClD,IAAIghE,EAAKV,EAAW5jE,MAChBukE,EAAMV,EAAc7jE,MACpBqJ,GAAKi7D,EAAIhhE,IAAWhK,EAAEkrE,UAAYD,EAAM,MAC1CjrE,EAAE45B,iBACFwwC,EAAWpgE,EAAQA,IAGvBsgE,EAAW7zD,IAAIzM,GACfugE,EAAc9zD,IAAIzW,EAAEkrE,cAKxBlzC,EAAO2B,GAAG,aArCM,SAAUqvC,GACxBC,EAAcE,gBAqChBnxC,EAAO2B,GAAG,aAnCM,SAAUzmB,GACpB03D,EAAY13D,IAAMu0D,GAAkBv0D,IACtC+1D,EAAcn7B,UAAU7F,GAAe/0B,OAkC3C8kB,EAAO2B,GAAG,aA/BM,SAAUzmB,GAjBA,IAAU+E,QACdnX,KADcmX,EAkBV/E,GAjBhBk7C,SAGJkB,GAAS7iD,QAAQ1B,UAA4B,IAAhBkN,EAAIm2C,SAGR,IAAP,EAAdn2C,EAAIm2C,WAWkBqZ,GAAkBv0D,IAC9C+1D,EAAcj7B,UAAU/F,GAAe/0B,OA8B3C8kB,EAAO2B,GAAG,WA3BI,SAAUzmB,GAClB03D,EAAY13D,IAAMu0D,GAAkBv0D,IACtC+1D,EAAcI,QAAQphC,GAAe/0B,OA0BzC8kB,EAAO2B,GAAG,WAAYmxC,EAAUC,UAChC/yC,EAAO2B,GAAG,SAjFE,SAAU0K,GACpB,IAAI8mC,EAAeljC,GAAe5D,GAClC,GAAI8mC,EAAalzD,IAAI4xD,UAAY5D,GAAakF,EAAalzD,IAAI2xD,OAAQ,CACrE,IAAIntC,EAAMzE,EAAOW,UAAUsa,SACvB5pC,EAAQ4E,GAAaH,QAAQ2uB,EAAIq7B,gBACjCn0C,EAAM1V,GAAaH,QAAQ2uB,EAAI28B,cACnCoQ,EAAYS,MAAMkB,EAAc9hE,EAAOozB,EAAI08B,YAAax1C,EAAK8Y,EAAI48B,WAAWz1D,MAAK,SAAU6mE,GACzFD,EAAeW,EAAcV,UA2EnCzyC,EAAO2B,GAAG,WAvEI,SAAU0K,GACtB,IAAI8mC,EAAeljC,GAAe5D,GAClCgO,IAAazuC,MAAK,SAAUo6B,GAC1B,OAAOA,EAAOmQ,cAEhB,IAAI1R,EAAMzE,EAAOW,UAAUsa,SACvB5pC,EAAQ4E,GAAaH,QAAQ2uB,EAAIq7B,gBACjCn0C,EAAM1V,GAAaH,QAAQ2uB,EAAI28B,cAC/B5lC,EAAYvI,GAAYi7C,GAAOG,GAAnBp7C,CAA0Bhd,GAAaH,QAAQkqB,EAAOW,UAAUC,aAChF4wC,EAAYE,QAAQyB,EAAc9hE,EAAOozB,EAAI08B,YAAax1C,EAAK8Y,EAAI48B,UAAW7lC,GAAW5vB,MAAK,SAAU6mE,GACtGD,EAAeW,EAAcV,MAE/Bp4B,IAAazuC,MAAK,SAAUo6B,GAC1B,OAAOA,EAAOoQ,iBA2DlBpW,EAAO2B,GAAG,cArHU,WAClB,IAAI6jC,EAAMxlC,EAAOW,UACbtvB,EAAQ4E,GAAaH,QAAQ0vD,EAAI5kC,YACjCjV,EAAM1V,GAAaH,QAAQ0vD,EAAItoC,UACtBtR,GAAYpK,GAAO,CAC9BnQ,EACAsa,IAEK/gB,MAAK,WACV,OAAOglE,EAAYjrC,MAAM1nB,KACxB7T,SA6GA,CAAEu7B,MAAOirC,EAAYjrC,OAygB5B7T,GAAOmZ,IAAI,SAjCA,SAAUjK,GACrB,IA/7Q6CoB,EA+7QzCP,GA/7QyCO,EAm8Q1CF,GAASE,iBA37QL,CAAE1yB,IAPC,WACR,OAAO+f,GA87QAsR,GAAUC,GA97QaoB,GAAkBx2B,MAAK,WACnD,OA+7QKyjD,GAA+B3tB,GAAkBV,IA/7QpCr0B,IAAI4kB,IAAQrlB,WAAW2lB,OACxC,SAAU1W,GACX,OAAOmW,GAASnW,SA+7QhBw1D,EA3eoB,SAAU3vC,EAAQa,GAC1C,IAAIsD,EAAU1I,GAAK5uB,EAASrC,QACxB4oE,EAAiB33C,GAAK,IACtB43C,EAAmBxmE,EAASrC,OAC5B8oE,EAAYr4D,GAAM,WAClBs4D,EAAyB,SAAU55D,GACrC,OAAO05D,EAAiBtnE,QAAO,SAAU0yC,GACvC,OAAQA,EAAQ9kC,OAGhB65D,EAAc,WAChB,OAAOnlB,GAA+B3tB,GAAkBV,GAAS7T,GAAU6T,IAASn0B,MAAK,SAAU6wD,GAEjG,OADcl7C,GAAMk7C,GACL/wD,KAAI,SAAU6V,GAC3B,OAAI8xD,EAAU5W,GArxNT,SAAUp8C,GACrB,MAAO,CACLhJ,QAASgJ,EACT2gB,SAAUp0B,EAASrC,OACnBs2B,WAAYj0B,EAASrC,OACrBm2B,UAAW,CAACrgB,IAixNCmzD,CAAO/W,GAEPn7B,GAAQV,EAAYrf,EAAOk7C,UAKtCgX,EAAsB,SAAUvvC,GAElC,OADe3iB,GAAM2iB,EAAQ7sB,SACb3L,KAAI,SAAU6V,GAC5B,IAAI2C,EAAYuB,GAAoBlE,GAChC+gB,EAAgBqe,GAAQz8B,EAAWggB,GAASl5B,MAAM,IAClD6Y,EAAS5V,EAAMq0B,GAAe,SAAUv0B,EAAKsS,GAS/C,OARIA,EAAK/F,WACPvM,EAAI2lE,OAAQ,EACQ,IAAhBrzD,EAAKyB,OACP/T,EAAI4lE,SAAU,EACLtzD,EAAKyB,OAASzB,EAAKrG,SAAWkK,EAAUhB,KAAK9B,UACtDrT,EAAI6lE,QAAS,IAGV7lE,IACN,CACD2lE,OAAO,EACPC,SAAS,EACTC,QAAQ,IAEV,MAAO,CACLzyB,UAAWH,GAAmB98B,EAAWggB,GAASn5B,SAClD8oE,YAAazyB,GAAqBl9B,EAAWggB,GAASn5B,SACtD8Y,OAAQA,OAIViwD,EAAe,WACjB5vC,EAAQ1lB,IAAI/O,EAAO8jE,EAAP9jE,IACZ2jE,EAAmBlvC,EAAQz1B,MAAM7C,KAAK6nE,GACtC9nE,EAAKwnE,EAAe1kE,OAAO,SAAUw9B,GACnC,OAAOA,QAGP8nC,EAAU,SAAU3qD,EAAK4qD,GAC3B,IAAI/nC,EAAU,WACZ,OAAO/H,EAAQz1B,MAAM9D,MAAK,WACxBye,EAAI6qD,aAAY,MACf,SAAU/vC,GACX9a,EAAI6qD,YAAYD,EAAW9vC,QAK/B,OAFA+H,IACAknC,EAAe30D,IAAI20D,EAAe1kE,MAAM3E,OAAO,CAACmiC,KACzC,WACLknC,EAAe30D,IAAIzS,EAAOonE,EAAe1kE,OAAO,SAAUujB,GACxD,OAAOA,IAAMia,QAIfioC,EAAuB,SAAUC,GACnC,OAAOf,EAAiBvnE,QAAO,SAAU2yC,GACvC,OAAOA,EAAQ36B,OAAOswD,OA6C1B,OADAp0C,EAAO2B,GAAG,6CAA8CoyC,GACjD,CACLM,aA3CiB,SAAUhrD,GAC3B,OAAO2qD,EAAQ3qD,GAAK,SAAU04B,GAC5B,OAAO,MA0CTuyB,iBAvCqB,SAAUjrD,GAC/B,OAAO2qD,EAAQ3qD,GAAK,SAAU8a,GAC5B,OAAOmvC,EAAUnvC,EAAQ7sB,aAsC3Bi9D,cAnCkB,SAAUH,GAC5B,OAAO,SAAU/qD,GACf,OAAO2qD,EAAQ3qD,GAAK,SAAU8a,GAC5B,OAAOmvC,EAAUnvC,EAAQ7sB,UAAY68D,EAAqBC,QAiC9DI,iBA7BqB,SAAUC,GAC/B,OAAO,SAAUprD,GACf,OAAO2qD,EAAQ3qD,GAAK,SAAU8a,GAC5B,OAAOmvC,EAAUnvC,EAAQ7sB,UAAYm9D,IAAmB9pE,cA2B5D+pE,uBAvB2B,SAAUD,EAAkBL,GACvD,OAAO,SAAU/qD,GACf,OAAO2qD,EAAQ3qD,GAAK,SAAU8a,GAC5B,OAAOmvC,EAAUnvC,EAAQ7sB,UAAYm9D,IAAmB9pE,UAAYwpE,EAAqBC,QAqB7FO,iBAjBqB,SAAUtrD,GAC/B,OAAO2qD,EAAQ3qD,GAAK,SAAUurD,GAC5B,OAAOrB,EAAuB,iBAgBhCsB,mBAbuB,SAAUxrD,GACjC,OAAO2qD,EAAQ3qD,GAAK,SAAUurD,GAC5B,OAAOrB,EAAuB,mBAYhCQ,aAAcA,EACd5vC,QAAS,WACP,OAAOA,EAAQz1B,QA0WIomE,CAAoB90C,EAAQa,GAC/Ck0C,EAAgB/6B,GAAiBha,GACjC0B,EAAgBguC,GAAc1vC,EAAQ+0C,EAAc16B,WAAYs1B,GAChEluC,EAn7Ha,SAAUzB,EAAQkc,EAAUrb,GAC7C,IAAIm0C,EAAc,SAAUh1C,GAC1B,MAAmC,UAA5B13B,GAAKy3B,GAAUC,KAQpBX,EAAe+Z,GAAiBpZ,GAChCi1C,EAAgB97B,GAA4BnZ,GAAU52B,EAAOszC,GAC7Dmd,EAAU,SAAU/Z,EAAWo1B,EAAO72C,EAAQ6d,EAAUyd,GAC1D,OAAO,SAAUn4C,EAAOxP,GACtBouB,GAAgB5e,GAChB,IAAI6wB,EAAO6J,IACPn/B,EAAM9G,GAAaH,QAAQkqB,EAAOiE,UAClCC,EAAa9F,GAAeC,EAAQthB,EAAKsiB,GACzC6gB,EAAS5G,GAAMtZ,EAAQxe,GACvB2+B,EAAkBhH,GAA4BnZ,GAAUyG,KAAgBsB,KAC5E,OAAOmtC,EAAM1zD,GAASs+B,EAAUzN,EAAM7wB,EAAOxP,EAAQkyB,EAAYgc,EAAQC,GAAiBt0C,MAAK,SAAUwR,GAOvG,OANAzR,EAAKyR,EAAO+/B,SAAS,SAAUv7B,GAC7Bs1B,GAAWnX,EAAQne,EAAI7L,QAEzBpK,EAAKyR,EAAOqF,UAAU,SAAUpC,GAC9B+2B,GAAYrX,EAAQ1f,EAAKtK,QAEpBqH,EAAOijC,OAAO30C,KAAI,SAAU2U,GACjC,IAAI60D,EAzgDL34B,GAAcC,GAygDWn8B,GACpBmkB,EAAMzE,EAAOhqB,IAAI8mD,YAGrB,OAFAr4B,EAAIs4B,SAASoY,EAAI79D,QAAQtB,IAAKm/D,EAAI94B,QAClC5X,EAAIu4B,OAAOmY,EAAI79D,QAAQtB,IAAKm/D,EAAI94B,QACzB,CACL5X,IAAKA,EACLk1B,OAAQA,SAGT9sD,EAASrC,SAGdoxD,EAAY/B,EAAQ9P,IApCL,SAAUvoC,GAC3B,OAA+B,IAAxBwzD,EAAYh1C,IAAqB8L,GAAYtqB,GAAOC,KAAO,IAmCnBrY,EAAM8yC,EAAUzE,IAC7DikB,EAAe7B,EAAQlQ,IAlCL,SAAUnoC,GAC9B,OAA+B,IAAxBwzD,EAAYh1C,IAAqB8L,GAAYtqB,GAAOH,QAAU,IAiCbjY,EAAM8yC,EAAUzE,IACtE29B,EAAqBvb,EAAQ1Q,GAAkB5+C,EAAQnB,EAAM8yC,EAAUzE,IACvE49B,EAAoBxb,EAAQvQ,GAAiB/+C,EAAQnB,EAAM8yC,EAAUzE,IACrE69B,EAAwBzb,EAAQrQ,GAAqBj/C,EAAQ0qE,EAAe/4B,EAAUzE,IACtF89B,EAAuB1b,EAAQnQ,GAAoBn/C,EAAQ0qE,EAAe/4B,EAAUzE,IACpF+9B,EAAe3b,EAAQxP,GAAY9/C,EAAQnB,EAAM8yC,EAAUzE,IAC3Dg+B,EAAiB5b,EAAQvP,GAAc//C,EAAQnB,EAAM8yC,EAAUzE,IAC/Di+B,EAAoB7b,EAAQjO,GAAiBrhD,EAAQnB,EAAM8yC,EAAUzE,IACrEk+B,EAAmB9b,EAAQ/N,GAAgBvhD,EAAQnB,EAAM8yC,EAAUzE,IACnEm+B,EAAoB/b,EAAQ9N,GAAiBxhD,EAAQnB,EAAM8yC,EAAUzE,IACrEo+B,EAAmBhc,EAAQ7N,GAAgBzhD,EAAQnB,EAAM8yC,EAAUzE,IACnEq+B,EAAejc,EAAQv1B,GAAY/5B,EAAQnB,EAAM8yC,EAAUzE,IAC3Ds+B,EAAc,SAAUnmE,EAAMomE,GAChC,OAAOt8D,GAAM9J,EAAM,QAAQ5D,QAAO,SAAUlE,GAC1C,OAAOuF,EAAS2oE,EAAYluE,OAuDhC,MAAO,CACL8zD,UAAWA,EACXF,aAAcA,EACdvS,iBAAkBisB,EAClB9rB,gBAAiB+rB,EACjB7rB,oBAAqB8rB,EACrB5rB,mBAAoB6rB,EACpBlrB,WAAYmrB,EACZlrB,aAAcmrB,EACd7pB,gBAAiB8pB,EACjB5pB,eAAgB6pB,EAChB5pB,gBAAiB6pB,EACjB5pB,eAAgB6pB,EAChBvxC,WAAYwxC,EACZpY,iBAlEqB,SAAU19B,EAAQpwB,GACvC,OAAOmmE,EAAYnmE,EAAM,CACvB,KACA,OACChE,MAAK,SAAU9D,GAChB,IAAIqS,EAAQxO,EAAI2iD,GAAsB5tB,GAAkBV,GAASa,IAAa,SAAU7N,GACtF,OAAOA,EAAEhd,OAEX23C,GAAgB3tB,EAAQ7lB,EAAOrS,EAAM,UA2DvC81D,gBAxDoB,SAAU59B,EAAQpwB,GACtC,OAAOmmE,EAAYnmE,EAAM,CACvB,SACA,OACA,WACChE,MAAK,SAAU9D,GAChB6D,EAAI6iD,GAAqB9tB,GAAkBV,GAASkB,GAASC,WAAW,SAAUtf,GAChF,OAAO+rC,GAAkB5tB,EAAQne,EAAI7L,IAAKlO,UAkD9CmiD,kBA9CwB4P,EAAQ5P,GAAmB1/C,EAAQnB,EAAM8yC,EAAUzE,IA+C3E2S,oBA9C0ByP,EAAQzP,GAAqB7/C,EAAQnB,EAAM8yC,EAAUzE,IA+C/Ew+B,gBA9CoB,SAAUj2C,GAC9B,IAAIve,EAAO+sC,GAAqB9tB,GAAkBV,GAASkB,GAASC,UACpE,GAAI1f,EAAK7X,OAAS,EAAG,CACnB,IAAIssE,EAAWvqE,EAAI8V,GAAM,SAAU3T,GACjC,OAAO6+C,GAAW3sB,EAAQlyB,EAAEkI,QAE1BmgE,EAAY9oE,EAAS6oE,EAAU,UAC/BE,EAAY/oE,EAAS6oE,EAAU,UACnC,GAAKC,GAAcC,EAEZ,CACL,IAAIC,EAAUhpE,EAAS6oE,EAAU,QACjC,OAAIC,GAAcE,GAAYD,EAElBD,GAAcE,IAAWD,EAG5B,GAFA,SAFA,SAJT,MAAO,SAsCXE,iBAzBqB,SAAUt2C,GAC/B,OAAOsoB,GAAagG,GAAsB5tB,GAAkBV,GAASa,IAAa,SAAUvgB,GAC1F,MAAsB,OAAfhY,GAAKgY,MACXrV,MAAM,KAuBTsrE,gBArBoBtqB,IAs0HRuqB,CAAax2C,EAAQ+0C,EAAc74B,SAAUrb,GACvDuD,EA70EU,WACd,IAAI3iB,EAAOga,GAAK5uB,EAASrC,QACrB+Y,EAAOkY,GAAK5uB,EAASrC,QACrBisE,EAAiB,SAAUryC,GAC7BA,EAAU3lB,IAAI5R,EAASrC,SAEzB,MAAO,CACLwwD,QAASv5C,EAAK/S,IACdutD,QAAS,SAAUnuD,GACjB2T,EAAKhD,IAAI3Q,GACT2oE,EAAelzD,IAEjBmzD,UAAW,WACT,OAAOD,EAAeh1D,IAExB46C,WAAY94C,EAAK7U,IACjBqtD,WAAY,SAAU/oC,GACpBzP,EAAK9E,IAAIuU,GACTyjD,EAAeh1D,IAEjBk1D,aAAc,WACZ,OAAOF,EAAelzD,KAwzEVqzD,GAoBhB,OAnBApd,GAAiBx5B,EAAQyB,EAASC,EAAeb,EAAYuD,GAv2EnC,SAAUpE,EAAQyB,EAASZ,GACrD,IAAInlB,EAASyQ,GAAU6T,GAIvBnnB,GAAO,CACL8kD,gBAAiB,WACf,OAAOl8B,EAAQw0C,gBAAgBj2C,IAEjCw9B,iBAAkB,WAChB,OAAO/7B,EAAQ60C,iBAAiBt2C,IAElC62C,gBAAiB,WACf,OAAOzoB,GAAsB1tB,GAAkBV,IAASn0B,MAAK,SAAUyU,GACrE,OAZiB,SAAUA,GAC/B,OAAOkB,GAAMlB,EAAM5E,GAWR+9C,CAAiBn5C,GAAM3U,KAAI,SAAU6V,GAC1C,IAAI2iB,EAAU5C,GAAQV,EAAYrf,EAAOlB,GACzC,OAAOmhB,EAAQ80C,gBAAgB/0D,EAAO2iB,SAEvCl5B,MAAM,OAEV,SAAUoyD,EAAM/0D,GACjB,OAAO03B,EAAO82C,qBAAqBxuE,EAAM+0D,MAm1E3C0Z,CAAsB/2C,EAAQyB,EAASZ,GACvCW,GAAexB,EAAQa,EAAYY,EAASC,GAlN3B,SAAU1B,EAAQ2vC,EAAkBvrC,GACrD,IAAI4yC,EAAM,SAAUC,GAClB,OAAO,WACL,OAAOj3C,EAAOimC,YAAYgR,KAG1BC,EAAoB,SAAU3yC,GAChCvE,EAAOimC,YAAY,kBAAkB,EAAO,CAC1CxkD,KAAM8iB,EAAK4yC,QACX91D,QAASkjB,EAAK6yC,cAGdC,EAAkB,CACpBrgE,KAAM,mBACNg9D,QAASrE,EAAiB0E,aAC1BiD,SAAUN,EAAI,kBAEZO,EAAc,CAChBvgE,KAAM,eACNwgE,KAAM,qBACNxD,QAASrE,EAAiB0E,aAC1BiD,SAAUN,EAAI,mBAEhBh3C,EAAOm9B,GAAG5wB,SAASkrC,YAAY,uBAAwB,CACrDzgE,KAAM,oBACNwgE,KAAM,yBACNF,SAAUN,EAAI,2BACdhD,QAASrE,EAAiB2E,mBAE5Bt0C,EAAOm9B,GAAG5wB,SAASkrC,YAAY,sBAAuB,CACpDzgE,KAAM,mBACNwgE,KAAM,yBACNF,SAAUN,EAAI,0BACdhD,QAASrE,EAAiB2E,mBAE5Bt0C,EAAOm9B,GAAG5wB,SAASkrC,YAAY,iBAAkB,CAC/CzgE,KAAM,aACNwgE,KAAM,mBACNF,SAAUN,EAAI,qBACdhD,QAASrE,EAAiB2E,mBAE5Bt0C,EAAOm9B,GAAG5wB,SAASkrC,YAAY,gBAAiB,CAC9CzgE,KAAM,iBACNwgE,KAAM,uBACNF,SAAUN,EAAI,oBACdhD,QAASrE,EAAiB2E,mBAE5Bt0C,EAAOm9B,GAAG5wB,SAASkrC,YAAY,cAAe,CAC5CzgE,KAAM,UACNwgE,KAAM,UACNF,SAAUN,EAAI,kBACdhD,QAASrE,EAAiB2E,mBAE5Bt0C,EAAOm9B,GAAG5wB,SAASkrC,YAAY,eAAgB,CAC7CzgE,KAAM,WACNwgE,KAAM,gBACNF,SAAUN,EAAI,mBACdhD,QAASrE,EAAiB2E,mBAE5Bt0C,EAAOm9B,GAAG5wB,SAASkrC,YAAY,sBAAuB,CACpDzgE,KAAM,mBACNwgE,KAAM,mBACNF,SAAUN,EAAI,0BACdhD,QAASrE,EAAiB6E,iBAAiBpwC,EAAU42B,WAEvDh7B,EAAOm9B,GAAG5wB,SAASkrC,YAAY,qBAAsB,CACnDzgE,KAAM,kBACNwgE,KAAM,kBACNF,SAAUN,EAAI,yBACdhD,QAASrE,EAAiB6E,iBAAiBpwC,EAAU42B,WASvDh7B,EAAOm9B,GAAG5wB,SAASkrC,YAAY,0BAA2B,CACxDzgE,KAAM,uBACNwgE,KAAM,6BACNF,SAAUN,EAAI,2BACdhD,QAASrE,EAAiB4E,cAAc,aAE1Cv0C,EAAOm9B,GAAG5wB,SAASkrC,YAAY,yBAA0B,CACvDzgE,KAAM,sBACNwgE,KAAM,4BACNF,SAAUN,EAAI,0BACdhD,QAASrE,EAAiB4E,cAAc,YAE1Cv0C,EAAOm9B,GAAG5wB,SAASkrC,YAAY,oBAAqB,CAClDzgE,KAAM,gBACNwgE,KAAM,sBACNF,SAAUN,EAAI,qBACdhD,QAASrE,EAAiB4E,cAAc,WAE1Cv0C,EAAOm9B,GAAG5wB,SAASkrC,YAAY,iBAAkB,CAC/CzgE,KAAM,aACNwgE,KAAM,aACNF,SAAUN,EAAI,kBACdhD,QAASrE,EAAiB4E,cAAc,WAE1Cv0C,EAAOm9B,GAAG5wB,SAASkrC,YAAY,kBAAmB,CAChDzgE,KAAM,cACNwgE,KAAM,mBACNF,SAAUN,EAAI,mBACdhD,QAASrE,EAAiB4E,cAAc,WAE1Cv0C,EAAOm9B,GAAG5wB,SAASkrC,YAAY,yBAA0B,CACvDzgE,KAAM,sBACNwgE,KAAM,sBACNF,SAAUN,EAAI,0BACdhD,QAASrE,EAAiB+E,uBAAuBtwC,EAAUi4B,WAAY,aAEzEr8B,EAAOm9B,GAAG5wB,SAASkrC,YAAY,wBAAyB,CACtDzgE,KAAM,qBACNwgE,KAAM,qBACNF,SAAUN,EAAI,yBACdhD,QAASrE,EAAiB+E,uBAAuBtwC,EAAUi4B,WAAY,YASzEr8B,EAAOm9B,GAAG5wB,SAASkrC,YAAY,iBAAkB,CAC/CzgE,KAAM,kBACNwgE,KAAM,wBACNF,SAAUN,EAAI,qBACdhD,QAASrE,EAAiB2E,mBAE5Bt0C,EAAOm9B,GAAG5wB,SAASkrC,YAAY,kBAAmB,CAChDzgE,KAAM,cACNwgE,KAAM,oBACNF,SAAUN,EAAI,sBACdhD,QAASrE,EAAiBgF,mBAE5B30C,EAAOm9B,GAAG5wB,SAASkrC,YAAY,kBAAmB,CAChDzgE,KAAM,aACNwgE,KAAM,oBACNF,SAAUN,EAAI,sBACdhD,QAASrE,EAAiBkF,sBASC,IA9qLZ,SAAU70C,GAC3B,OAAOA,EAAO+X,SAAS,cAAc,EAAM,WA6qLvC2/B,CAAa13C,GACfA,EAAOm9B,GAAG5wB,SAASkrC,YAAY,cAAe,CAC5CzgE,KAAM,QACNwgE,KAAM,QACNF,SAAUN,EAAI,oBAGhBh3C,EAAOm9B,GAAG5wB,SAASorC,kBAAkB,cAAe,CAClD3gE,KAAM,QACNwgE,KAAM,QACNI,gBAAiB,WACf,MAAO,CAAC,CACJ9vE,KAAM,gBACN+vE,UAAW,cACXP,SAAUJ,OAKpBl3C,EAAOm9B,GAAG5wB,SAASkrC,YAAY,oBAAqB,CAClDzgE,KAAM,eACNwgE,KAAM,QACNF,SAAUN,EAAI,oBAEhBh3C,EAAOm9B,GAAG5wB,SAASkrC,YAAY,aAAcJ,GAC7Cr3C,EAAOm9B,GAAG5wB,SAASkrC,YAAY,cAAeF,GAC9Cv3C,EAAOm9B,GAAG5wB,SAASorC,kBAAkB,MA3G3B,CACR7vE,KAAM,iBACNkP,KAAM,MACN4gE,gBAAiB,WACf,MAAO,6IAwGX53C,EAAOm9B,GAAG5wB,SAASorC,kBAAkB,SA3DxB,CACX7vE,KAAM,iBACNkP,KAAM,SACN4gE,gBAAiB,WACf,MAAO,oJAwDX53C,EAAOm9B,GAAG5wB,SAASorC,kBAAkB,OAnC1B,CACT7vE,KAAM,iBACNkP,KAAM,OACN4gE,gBAAiB,WACf,MAAO,oDAgCX53C,EAAOm9B,GAAG5wB,SAASurC,eAAe,QAAS,CACzCzpC,OAAQ,WAEN,OADAshC,EAAiBoE,eACVpE,EAAiBxrC,UAAUv5B,MAAK,WACrC,MAAO,MACN,SAAUu5B,GACX,MAA8B,YAA1B77B,GAAK67B,EAAQ7sB,SACR,yBAEA,gEAqBfygE,CAAa/3C,EAAQ2vC,EAAkBvrC,GA7WxB,SAAUpE,EAAQ2vC,EAAkBvrC,GACnDpE,EAAOm9B,GAAG5wB,SAASyrC,cAAc,QAAS,CACxCC,QAAS,QACTT,KAAM,QACNU,MAAO,SAAUC,GACf,OAAOA,EAAS,4EAGpB,IAAInB,EAAM,SAAUC,GAClB,OAAO,WACL,OAAOj3C,EAAOimC,YAAYgR,KAG9Bj3C,EAAOm9B,GAAG5wB,SAAS6rC,UAAU,aAAc,CACzCH,QAAS,mBACTX,SAAUN,EAAI,iBACdQ,KAAM,QACNxD,QAASrE,EAAiB0E,eAE5Br0C,EAAOm9B,GAAG5wB,SAAS6rC,UAAU,cAAe,CAC1CH,QAAS,eACTX,SAAUN,EAAI,kBACdQ,KAAM,qBACNxD,QAASrE,EAAiB0E,eAE5Br0C,EAAOm9B,GAAG5wB,SAAS6rC,UAAU,iBAAkB,CAC7CH,QAAS,kBACTX,SAAUN,EAAI,qBACdQ,KAAM,wBACNxD,QAASrE,EAAiB2E,mBAE5Bt0C,EAAOm9B,GAAG5wB,SAAS6rC,UAAU,kBAAmB,CAC9CH,QAAS,cACTX,SAAUN,EAAI,sBACdQ,KAAM,oBACNxD,QAASrE,EAAiBgF,mBAE5B30C,EAAOm9B,GAAG5wB,SAAS6rC,UAAU,kBAAmB,CAC9CH,QAAS,aACTX,SAAUN,EAAI,sBACdQ,KAAM,oBACNxD,QAASrE,EAAiBkF,qBAE5B70C,EAAOm9B,GAAG5wB,SAAS6rC,UAAU,uBAAwB,CACnDH,QAAS,oBACTX,SAAUN,EAAI,2BACdQ,KAAM,yBACNxD,QAASrE,EAAiB2E,mBAE5Bt0C,EAAOm9B,GAAG5wB,SAAS6rC,UAAU,sBAAuB,CAClDH,QAAS,mBACTX,SAAUN,EAAI,0BACdQ,KAAM,yBACNxD,QAASrE,EAAiB2E,mBAE5Bt0C,EAAOm9B,GAAG5wB,SAAS6rC,UAAU,iBAAkB,CAC7CH,QAAS,aACTX,SAAUN,EAAI,qBACdQ,KAAM,mBACNxD,QAASrE,EAAiB2E,mBAE5Bt0C,EAAOm9B,GAAG5wB,SAAS6rC,UAAU,gBAAiB,CAC5CH,QAAS,iBACTX,SAAUN,EAAI,oBACdQ,KAAM,uBACNxD,QAASrE,EAAiB2E,mBAE5Bt0C,EAAOm9B,GAAG5wB,SAAS6rC,UAAU,uBAAwB,CACnDH,QAAS,uBACTX,SAAUN,EAAI,2BACdQ,KAAM,6BACNxD,QAASrE,EAAiB4E,cAAc,aAE1Cv0C,EAAOm9B,GAAG5wB,SAAS6rC,UAAU,sBAAuB,CAClDH,QAAS,sBACTX,SAAUN,EAAI,0BACdQ,KAAM,4BACNxD,QAASrE,EAAiB4E,cAAc,YAE1Cv0C,EAAOm9B,GAAG5wB,SAAS6rC,UAAU,iBAAkB,CAC7CH,QAAS,gBACTX,SAAUN,EAAI,qBACdQ,KAAM,sBACNxD,QAASrE,EAAiB4E,cAAc,WAE1Cv0C,EAAOm9B,GAAG5wB,SAAS6rC,UAAU,cAAe,CAC1CH,QAAS,UACTT,KAAM,UACNF,SAAUN,EAAI,kBACdhD,QAASrE,EAAiB2E,mBAE5Bt0C,EAAOm9B,GAAG5wB,SAAS6rC,UAAU,eAAgB,CAC3CH,QAAS,WACTT,KAAM,gBACNF,SAAUN,EAAI,mBACdhD,QAASrE,EAAiB2E,mBAE5Bt0C,EAAOm9B,GAAG5wB,SAAS6rC,UAAU,sBAAuB,CAClDH,QAAS,mBACTT,KAAM,mBACNF,SAAUN,EAAI,0BACdhD,QAASrE,EAAiB6E,iBAAiBpwC,EAAU42B,WAEvDh7B,EAAOm9B,GAAG5wB,SAAS6rC,UAAU,qBAAsB,CACjDH,QAAS,kBACTT,KAAM,kBACNF,SAAUN,EAAI,yBACdhD,QAASrE,EAAiB6E,iBAAiBpwC,EAAU42B,WAEvDh7B,EAAOm9B,GAAG5wB,SAAS6rC,UAAU,cAAe,CAC1CH,QAAS,aACTT,KAAM,aACNF,SAAUN,EAAI,kBACdhD,QAASrE,EAAiB4E,cAAc,WAE1Cv0C,EAAOm9B,GAAG5wB,SAAS6rC,UAAU,eAAgB,CAC3CH,QAAS,cACTT,KAAM,mBACNF,SAAUN,EAAI,mBACdhD,QAASrE,EAAiB4E,cAAc,WAE1Cv0C,EAAOm9B,GAAG5wB,SAAS6rC,UAAU,sBAAuB,CAClDH,QAAS,sBACTT,KAAM,sBACNF,SAAUN,EAAI,0BACdhD,QAASrE,EAAiB+E,uBAAuBtwC,EAAUi4B,WAAY,aAEzEr8B,EAAOm9B,GAAG5wB,SAAS6rC,UAAU,qBAAsB,CACjDH,QAAS,qBACTT,KAAM,qBACNF,SAAUN,EAAI,yBACdhD,QAASrE,EAAiB+E,uBAAuBtwC,EAAUi4B,WAAY,YAEzEr8B,EAAOm9B,GAAG5wB,SAAS6rC,UAAU,oBAAqB,CAChDH,QAAS,eACTX,SAAUN,EAAI,kBACdQ,KAAM,UAsORa,CAAWr4C,EAAQ2vC,EAAkBvrC,GAnOrB,SAAUpE,GAC1B,IAGIs4C,EAn/KW,SAAUt4C,GACzB,OAAOA,EAAO+X,SAAS,gBA1EC,8IA4jLVwgC,CAAWv4C,GACrBs4C,EAAQ1uE,OAAS,GACnBo2B,EAAOm9B,GAAG5wB,SAASisC,kBAAkB,QAAS,CAC5Cp7D,UANU,SAAUoE,GACtB,OAAOwe,EAAOhqB,IAAIjL,GAAGyW,EAAO,UAAYwe,EAAO9iB,UAAU7P,SAASmU,IAMhEywC,MAAOqmB,EACPliE,MAAO,OACPg7B,SAAU,SA0NdqnC,CAAYz4C,GACZA,EAAO2B,GAAG,WAAW,WACnB3B,EAAO4D,WAAW80C,YAAYx3C,GAASG,eACvCrB,EAAO4D,WAAW80C,YAAYx3C,GAASI,cAtyErB,SAAUtB,GAC9BA,EAAO0xB,UAAUinB,SAASza,IAsyExB0a,CAAgB54C,MA9vLG,SAAUA,GAC/B,OAAOA,EAAO+X,SAAS,wBAAwB,EAAM,WA+vLjD8gC,CAAiB74C,IACnBA,EAAO2B,GAAG,WAAW,SAAUzmB,IA7rDpB,SAAUmxB,EAAOrM,EAAQ0B,GACtC,GAAI2K,EAAMysC,UAAYpT,GAASqT,IAAK,CAClC,IAAIC,EAASj5C,GAAUC,GACnBi5C,EAAW,SAAU3hE,GACvB,IAAImsD,EAASn7D,GAAKgP,GAClB,OAAOS,GAAKT,EAAS0hE,IAAW3rE,EAAS84D,GAAc1C,IAErDh/B,EAAMzE,EAAOW,UAAUsa,SACvBhvB,EAAYhW,GAAaH,QAAQu2B,EAAMwlC,SAAWptC,EAAIq7B,eAAiBr7B,EAAI28B,cAC/E9gD,GAAK2L,EAAWgtD,GAAUrtE,MAAK,SAAU0U,GACvC+rB,EAAMzK,iBACNpgB,GAAMlB,EAAM24D,GAAUrtE,KAAK81B,EAAciD,OACzC3E,EAAOW,UAAUwuB,SAAS9iB,EAAMwlC,WACfxlC,EAAMwlC,SAAWjM,GAAWD,IACxB3lC,EAAQi5C,EAAU34D,GACnC1U,MAAK,SAAUgC,GACjBoyB,EAAOW,UAAU6D,OAAO52B,UA8qD1BsrE,CAASh+D,EAAG8kB,EAAQ0B,MAGxB1B,EAAO2B,GAAG,UAAU,WAClBozC,EAAc1jC,aAnpHL,SAAUrR,EAAQoE,EAAW2wC,EAAepF,GACvD,MAAO,CACL3e,YAAaA,GAAYhxB,GACzBm5C,iBAAkBtoB,GAAqBzsB,EAAU63B,SACjDmd,iBAAkBzoB,GAAqBvsB,EAAU42B,SACjDqe,iBAAkBxoB,GAAqBzsB,EAAU23B,YACjDud,iBAAkB3oB,GAAqBvsB,EAAUi4B,YACjD0Y,cAAeA,EACfpF,iBAAkBA,GA6oHb4J,CAAOv5C,EAAQoE,EAAW2wC,EAAepF,MAzqVtD","file":"619.e7b9d000.chunk.js","sourcesContent":["// Exports the \"table\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/table')\n//   ES2015:\n//     import 'tinymce/plugins/table'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.8.1 (2021-05-20)\n */\n(function () {\n    'use strict';\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var range = function (num, f) {\n      var r = [];\n      for (var i = 0; i < num; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var pure = function (x) {\n      return [x];\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get(xs, 0);\n    };\n    var last = function (xs) {\n      return get(xs, xs.length - 1);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __spreadArrays() {\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++)\n        s += arguments[i].length;\n      for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n      return r;\n    }\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim = blank(/^\\s+|\\s+$/g);\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$2 = function (userAgent, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, mediaMatch);\n    });\n    var detect$3 = function () {\n      return platform();\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var COMMENT = 8;\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var is = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq$1 = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains$2 = function (e1, e2) {\n      return detect$3().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n    var is$1 = is;\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$1 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter$1 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$1(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var values = function (obj) {\n      return mapToArray(obj, function (v) {\n        return v;\n      });\n    };\n    var size = function (obj) {\n      return keys(obj).length;\n    };\n    var get$1 = function (obj, key) {\n      return has(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n    var isEmpty = function (r) {\n      for (var x in r) {\n        if (hasOwnProperty.call(r, x)) {\n          return false;\n        }\n      }\n      return true;\n    };\n\n    var validSectionList = [\n      'tfoot',\n      'thead',\n      'tbody',\n      'colgroup'\n    ];\n    var isValidSection = function (parentName) {\n      return contains(validSectionList, parentName);\n    };\n    var grid = function (rows, columns) {\n      return {\n        rows: rows,\n        columns: columns\n      };\n    };\n    var address = function (row, column) {\n      return {\n        row: row,\n        column: column\n      };\n    };\n    var detail = function (element, rowspan, colspan) {\n      return {\n        element: element,\n        rowspan: rowspan,\n        colspan: colspan\n      };\n    };\n    var detailnew = function (element, rowspan, colspan, isNew) {\n      return {\n        element: element,\n        rowspan: rowspan,\n        colspan: colspan,\n        isNew: isNew\n      };\n    };\n    var extended = function (element, rowspan, colspan, row, column, isLocked) {\n      return {\n        element: element,\n        rowspan: rowspan,\n        colspan: colspan,\n        row: row,\n        column: column,\n        isLocked: isLocked\n      };\n    };\n    var rowdata = function (element, cells, section) {\n      return {\n        element: element,\n        cells: cells,\n        section: section\n      };\n    };\n    var elementnew = function (element, isNew, isLocked) {\n      return {\n        element: element,\n        isNew: isNew,\n        isLocked: isLocked\n      };\n    };\n    var rowdatanew = function (element, cells, section, isNew) {\n      return {\n        element: element,\n        cells: cells,\n        section: section,\n        isNew: isNew\n      };\n    };\n    var rowcells = function (cells, section) {\n      return {\n        cells: cells,\n        section: section\n      };\n    };\n    var rowdetails = function (details, section) {\n      return {\n        details: details,\n        section: section\n      };\n    };\n    var bounds = function (startRow, startCol, finishRow, finishCol) {\n      return {\n        startRow: startRow,\n        startCol: startCol,\n        finishRow: finishRow,\n        finishCol: finishCol\n      };\n    };\n    var columnext = function (element, colspan, column) {\n      return {\n        element: element,\n        colspan: colspan,\n        column: column\n      };\n    };\n\n    var Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isComment = function (element) {\n      return type(element) === COMMENT || name(element) === '#comment';\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n    var isDocument = isType$1(DOCUMENT);\n    var isDocumentFragment = isType$1(DOCUMENT_FRAGMENT);\n    var isTag = function (tag) {\n      return function (e) {\n        return isElement(e) && name(e) === tag;\n      };\n    };\n\n    var owner = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner(dos);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom;\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var offsetParent = function (element) {\n      return Optional.from(element.dom.offsetParent).map(SugarElement.fromDom);\n    };\n    var prevSibling = function (element) {\n      return Optional.from(element.dom.previousSibling).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos) && isNonNullable(dos.dom.host);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n    var body = function () {\n      return getBody(SugarElement.fromDom(document));\n    };\n    var getBody = function (doc) {\n      var b = doc.dom.body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var ancestors = function (scope, predicate, isRoot) {\n      return filter(parents(scope, isRoot), predicate);\n    };\n    var children$1 = function (scope, predicate) {\n      return filter(children(scope), predicate);\n    };\n    var descendants = function (scope, predicate) {\n      var result = [];\n      each(children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants(x, predicate));\n      });\n      return result;\n    };\n\n    var ancestors$1 = function (scope, selector, isRoot) {\n      return ancestors(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var children$2 = function (scope, selector) {\n      return children$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n    var descendants$1 = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);\n    };\n    var child$1 = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(SugarElement.fromDom(node));\n      };\n      var result = find(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n    var descendant = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = SugarElement.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Optional.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope.dom);\n    };\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var child$2 = function (scope, selector) {\n      return child$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n    var descendant$1 = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      var is$1 = function (element, selector) {\n        return is(element, selector);\n      };\n      return ClosestOrAncestor(is$1, ancestor$1, scope, selector, isRoot);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom;\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$2 = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$2(element, key));\n    };\n    var remove = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n    var clone = function (element) {\n      return foldl(element.dom.attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var isSupported$1 = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported$1(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported$1(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$1 = function (element, property, value) {\n      var dom = element.dom;\n      internalSet(dom, property, value);\n    };\n    var setAll$1 = function (element, css) {\n      var dom = element.dom;\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$3 = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported$1(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var remove$1 = function (element, property) {\n      var dom = element.dom;\n      internalRemove(dom, property);\n      if (getOpt(element, 'style').map(trim).is('')) {\n        remove(element, 'style');\n      }\n    };\n    var copy = function (source, target) {\n      var sourceDom = source.dom;\n      var targetDom = target.dom;\n      if (isSupported$1(sourceDom) && isSupported$1(targetDom)) {\n        targetDom.style.cssText = sourceDom.style.cssText;\n      }\n    };\n\n    var getAttrValue = function (cell, name, fallback) {\n      if (fallback === void 0) {\n        fallback = 0;\n      }\n      return getOpt(cell, name).map(function (value) {\n        return parseInt(value, 10);\n      }).getOr(fallback);\n    };\n    var getSpan = function (cell, type) {\n      return getAttrValue(cell, type, 1);\n    };\n    var hasColspan = function (cell) {\n      return getSpan(cell, 'colspan') > 1;\n    };\n    var hasRowspan = function (cell) {\n      return getSpan(cell, 'rowspan') > 1;\n    };\n    var getCssValue = function (element, property) {\n      return parseInt(get$3(element, property), 10);\n    };\n    var minWidth = constant(10);\n    var minHeight = constant(10);\n\n    var firstLayer = function (scope, selector) {\n      return filterFirstLayer(scope, selector, always);\n    };\n    var filterFirstLayer = function (scope, selector, predicate) {\n      return bind(children(scope), function (x) {\n        if (is(x, selector)) {\n          return predicate(x) ? [x] : [];\n        } else {\n          return filterFirstLayer(x, selector, predicate);\n        }\n      });\n    };\n\n    var lookup = function (tags, element, isRoot) {\n      if (isRoot === void 0) {\n        isRoot = never;\n      }\n      if (isRoot(element)) {\n        return Optional.none();\n      }\n      if (contains(tags, name(element))) {\n        return Optional.some(element);\n      }\n      var isRootOrUpperTable = function (elm) {\n        return is(elm, 'table') || isRoot(elm);\n      };\n      return ancestor$1(element, tags.join(','), isRootOrUpperTable);\n    };\n    var cell = function (element, isRoot) {\n      return lookup([\n        'td',\n        'th'\n      ], element, isRoot);\n    };\n    var cells = function (ancestor) {\n      return firstLayer(ancestor, 'th,td');\n    };\n    var columns = function (ancestor) {\n      if (is(ancestor, 'colgroup')) {\n        return children$2(ancestor, 'col');\n      } else {\n        return bind(columnGroups(ancestor), function (columnGroup) {\n          return children$2(columnGroup, 'col');\n        });\n      }\n    };\n    var table = function (element, isRoot) {\n      return closest$1(element, 'table', isRoot);\n    };\n    var rows = function (ancestor) {\n      return firstLayer(ancestor, 'tr');\n    };\n    var columnGroups = function (ancestor) {\n      return table(ancestor).fold(constant([]), function (table) {\n        return children$2(table, 'colgroup');\n      });\n    };\n\n    var fromRowsOrColGroups = function (elems, getSection) {\n      return map(elems, function (row) {\n        if (name(row) === 'colgroup') {\n          var cells$1 = map(columns(row), function (column) {\n            var colspan = getAttrValue(column, 'span', 1);\n            return detail(column, 1, colspan);\n          });\n          return rowdata(row, cells$1, 'colgroup');\n        } else {\n          var cells$1 = map(cells(row), function (cell) {\n            var rowspan = getAttrValue(cell, 'rowspan', 1);\n            var colspan = getAttrValue(cell, 'colspan', 1);\n            return detail(cell, rowspan, colspan);\n          });\n          return rowdata(row, cells$1, getSection(row));\n        }\n      });\n    };\n    var getParentSection = function (group) {\n      return parent(group).map(function (parent) {\n        var parentName = name(parent);\n        return isValidSection(parentName) ? parentName : 'tbody';\n      }).getOr('tbody');\n    };\n    var fromTable = function (table) {\n      var rows$1 = rows(table);\n      var columnGroups$1 = columnGroups(table);\n      var elems = __spreadArrays(columnGroups$1, rows$1);\n      return fromRowsOrColGroups(elems, getParentSection);\n    };\n    var fromPastedRows = function (elems, section) {\n      return fromRowsOrColGroups(elems, function () {\n        return section;\n      });\n    };\n\n    var addCells = function (gridRow, index, cells) {\n      var existingCells = gridRow.cells;\n      var before = existingCells.slice(0, index);\n      var after = existingCells.slice(index);\n      var newCells = before.concat(cells).concat(after);\n      return setCells(gridRow, newCells);\n    };\n    var addCell = function (gridRow, index, cell) {\n      return addCells(gridRow, index, [cell]);\n    };\n    var mutateCell = function (gridRow, index, cell) {\n      var cells = gridRow.cells;\n      cells[index] = cell;\n    };\n    var setCells = function (gridRow, cells) {\n      return rowcells(cells, gridRow.section);\n    };\n    var mapCells = function (gridRow, f) {\n      var cells = gridRow.cells;\n      var r = map(cells, f);\n      return rowcells(r, gridRow.section);\n    };\n    var getCell = function (gridRow, index) {\n      return gridRow.cells[index];\n    };\n    var getCellElement = function (gridRow, index) {\n      return getCell(gridRow, index).element;\n    };\n    var cellLength = function (gridRow) {\n      return gridRow.cells.length;\n    };\n    var extractGridDetails = function (grid) {\n      var result = partition(grid, function (row) {\n        return row.section === 'colgroup';\n      });\n      return {\n        rows: result.fail,\n        cols: result.pass\n      };\n    };\n\n    var LOCKED_COL_ATTR = 'data-snooker-locked-cols';\n    var getLockedColumnsFromTable = function (table) {\n      return getOpt(table, LOCKED_COL_ATTR).bind(function (lockedColStr) {\n        return Optional.from(lockedColStr.match(/\\d+/g));\n      }).map(function (lockedCols) {\n        return mapToObject(lockedCols, always);\n      });\n    };\n    var getLockedColumnsFromGrid = function (grid) {\n      var locked = foldl(extractGridDetails(grid).rows, function (acc, row) {\n        each(row.cells, function (cell, idx) {\n          if (cell.isLocked) {\n            acc[idx] = true;\n          }\n        });\n        return acc;\n      }, {});\n      var lockedArr = mapToArray(locked, function (_val, key) {\n        return parseInt(key, 10);\n      });\n      return sort(lockedArr);\n    };\n\n    var key = function (row, column) {\n      return row + ',' + column;\n    };\n    var getAt = function (warehouse, row, column) {\n      var raw = warehouse.access[key(row, column)];\n      return raw !== undefined ? Optional.some(raw) : Optional.none();\n    };\n    var findItem = function (warehouse, item, comparator) {\n      var filtered = filterItems(warehouse, function (detail) {\n        return comparator(item, detail.element);\n      });\n      return filtered.length > 0 ? Optional.some(filtered[0]) : Optional.none();\n    };\n    var filterItems = function (warehouse, predicate) {\n      var all = bind(warehouse.all, function (r) {\n        return r.cells;\n      });\n      return filter(all, predicate);\n    };\n    var generateColumns = function (rowData) {\n      var columnsGroup = {};\n      var index = 0;\n      each(rowData.cells, function (column) {\n        var colspan = column.colspan;\n        range(colspan, function (columnIndex) {\n          var colIndex = index + columnIndex;\n          columnsGroup[colIndex] = columnext(column.element, colspan, colIndex);\n        });\n        index += colspan;\n      });\n      return columnsGroup;\n    };\n    var generate = function (list) {\n      var access = {};\n      var cells = [];\n      var columns = {};\n      var tableOpt = head(list).map(function (rowData) {\n        return rowData.element;\n      }).bind(table);\n      var lockedColumns = tableOpt.bind(getLockedColumnsFromTable).getOr({});\n      var maxRows = 0;\n      var maxColumns = 0;\n      var rowCount = 0;\n      each(list, function (rowData) {\n        if (rowData.section === 'colgroup') {\n          columns = generateColumns(rowData);\n        } else {\n          var currentRow_1 = [];\n          each(rowData.cells, function (rowCell) {\n            var start = 0;\n            while (access[key(rowCount, start)] !== undefined) {\n              start++;\n            }\n            var isLocked = hasNonNullableKey(lockedColumns, start.toString());\n            var current = extended(rowCell.element, rowCell.rowspan, rowCell.colspan, rowCount, start, isLocked);\n            for (var occupiedColumnPosition = 0; occupiedColumnPosition < rowCell.colspan; occupiedColumnPosition++) {\n              for (var occupiedRowPosition = 0; occupiedRowPosition < rowCell.rowspan; occupiedRowPosition++) {\n                var rowPosition = rowCount + occupiedRowPosition;\n                var columnPosition = start + occupiedColumnPosition;\n                var newpos = key(rowPosition, columnPosition);\n                access[newpos] = current;\n                maxColumns = Math.max(maxColumns, columnPosition + 1);\n              }\n            }\n            currentRow_1.push(current);\n          });\n          maxRows++;\n          cells.push(rowdata(rowData.element, currentRow_1, rowData.section));\n          rowCount++;\n        }\n      });\n      var grid$1 = grid(maxRows, maxColumns);\n      return {\n        grid: grid$1,\n        access: access,\n        all: cells,\n        columns: columns\n      };\n    };\n    var fromTable$1 = function (table) {\n      var list = fromTable(table);\n      return generate(list);\n    };\n    var justCells = function (warehouse) {\n      return bind(warehouse.all, function (w) {\n        return w.cells;\n      });\n    };\n    var justColumns = function (warehouse) {\n      return values(warehouse.columns);\n    };\n    var hasColumns = function (warehouse) {\n      return keys(warehouse.columns).length > 0;\n    };\n    var getColumnAt = function (warehouse, columnIndex) {\n      return Optional.from(warehouse.columns[columnIndex]);\n    };\n    var Warehouse = {\n      fromTable: fromTable$1,\n      generate: generate,\n      getAt: getAt,\n      findItem: findItem,\n      filterItems: filterItems,\n      justCells: justCells,\n      justColumns: justColumns,\n      hasColumns: hasColumns,\n      getColumnAt: getColumnAt\n    };\n\n    var inSelection = function (bounds, detail) {\n      var leftEdge = detail.column;\n      var rightEdge = detail.column + detail.colspan - 1;\n      var topEdge = detail.row;\n      var bottomEdge = detail.row + detail.rowspan - 1;\n      return leftEdge <= bounds.finishCol && rightEdge >= bounds.startCol && (topEdge <= bounds.finishRow && bottomEdge >= bounds.startRow);\n    };\n    var isWithin = function (bounds, detail) {\n      return detail.column >= bounds.startCol && detail.column + detail.colspan - 1 <= bounds.finishCol && detail.row >= bounds.startRow && detail.row + detail.rowspan - 1 <= bounds.finishRow;\n    };\n    var isRectangular = function (warehouse, bounds) {\n      var isRect = true;\n      var detailIsWithin = curry(isWithin, bounds);\n      for (var i = bounds.startRow; i <= bounds.finishRow; i++) {\n        for (var j = bounds.startCol; j <= bounds.finishCol; j++) {\n          isRect = isRect && Warehouse.getAt(warehouse, i, j).exists(detailIsWithin);\n        }\n      }\n      return isRect ? Optional.some(bounds) : Optional.none();\n    };\n\n    var getBounds = function (detailA, detailB) {\n      return bounds(Math.min(detailA.row, detailB.row), Math.min(detailA.column, detailB.column), Math.max(detailA.row + detailA.rowspan - 1, detailB.row + detailB.rowspan - 1), Math.max(detailA.column + detailA.colspan - 1, detailB.column + detailB.colspan - 1));\n    };\n    var getAnyBox = function (warehouse, startCell, finishCell) {\n      var startCoords = Warehouse.findItem(warehouse, startCell, eq$1);\n      var finishCoords = Warehouse.findItem(warehouse, finishCell, eq$1);\n      return startCoords.bind(function (sc) {\n        return finishCoords.map(function (fc) {\n          return getBounds(sc, fc);\n        });\n      });\n    };\n    var getBox = function (warehouse, startCell, finishCell) {\n      return getAnyBox(warehouse, startCell, finishCell).bind(function (bounds) {\n        return isRectangular(warehouse, bounds);\n      });\n    };\n\n    var moveBy = function (warehouse, cell, row, column) {\n      return Warehouse.findItem(warehouse, cell, eq$1).bind(function (detail) {\n        var startRow = row > 0 ? detail.row + detail.rowspan - 1 : detail.row;\n        var startCol = column > 0 ? detail.column + detail.colspan - 1 : detail.column;\n        var dest = Warehouse.getAt(warehouse, startRow + row, startCol + column);\n        return dest.map(function (d) {\n          return d.element;\n        });\n      });\n    };\n    var intercepts = function (warehouse, start, finish) {\n      return getAnyBox(warehouse, start, finish).map(function (bounds) {\n        var inside = Warehouse.filterItems(warehouse, curry(inSelection, bounds));\n        return map(inside, function (detail) {\n          return detail.element;\n        });\n      });\n    };\n    var parentCell = function (warehouse, innerCell) {\n      var isContainedBy = function (c1, c2) {\n        return contains$2(c2, c1);\n      };\n      return Warehouse.findItem(warehouse, innerCell, isContainedBy).map(function (detail) {\n        return detail.element;\n      });\n    };\n\n    var moveBy$1 = function (cell, deltaRow, deltaColumn) {\n      return table(cell).bind(function (table) {\n        var warehouse = getWarehouse(table);\n        return moveBy(warehouse, cell, deltaRow, deltaColumn);\n      });\n    };\n    var intercepts$1 = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return intercepts(warehouse, first, last);\n    };\n    var nestedIntercepts = function (table, first, firstTable, last, lastTable) {\n      var warehouse = getWarehouse(table);\n      var optStartCell = eq$1(table, firstTable) ? Optional.some(first) : parentCell(warehouse, first);\n      var optLastCell = eq$1(table, lastTable) ? Optional.some(last) : parentCell(warehouse, last);\n      return optStartCell.bind(function (startCell) {\n        return optLastCell.bind(function (lastCell) {\n          return intercepts(warehouse, startCell, lastCell);\n        });\n      });\n    };\n    var getBox$1 = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return getBox(warehouse, first, last);\n    };\n    var getWarehouse = Warehouse.fromTable;\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var wrap = function (element, wrapper) {\n      before(element, wrapper);\n      append(wrapper, element);\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var after$1 = function (marker, elements) {\n      each(elements, function (x, i) {\n        var e = i === 0 ? marker : elements[i - 1];\n        after(e, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each(children(element), function (rogue) {\n        remove$2(rogue);\n      });\n    };\n    var remove$2 = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove$2(wrapper);\n    };\n\n    var NodeValue = function (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    };\n\n    var api = NodeValue(isText, 'text');\n    var get$4 = function (element) {\n      return api.get(element);\n    };\n    var getOption = function (element) {\n      return api.getOption(element);\n    };\n    var set$2 = function (element, value) {\n      return api.set(element, value);\n    };\n\n    var TagBoundaries = [\n      'body',\n      'p',\n      'div',\n      'article',\n      'aside',\n      'figcaption',\n      'figure',\n      'footer',\n      'header',\n      'nav',\n      'section',\n      'ol',\n      'ul',\n      'li',\n      'table',\n      'thead',\n      'tbody',\n      'tfoot',\n      'caption',\n      'tr',\n      'td',\n      'th',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'pre',\n      'address'\n    ];\n\n    function DomUniverse () {\n      var clone$1 = function (element) {\n        return SugarElement.fromDom(element.dom.cloneNode(false));\n      };\n      var document = function (element) {\n        return documentOrOwner(element).dom;\n      };\n      var isBoundary = function (element) {\n        if (!isElement(element)) {\n          return false;\n        }\n        if (name(element) === 'body') {\n          return true;\n        }\n        return contains(TagBoundaries, name(element));\n      };\n      var isEmptyTag = function (element) {\n        if (!isElement(element)) {\n          return false;\n        }\n        return contains([\n          'br',\n          'img',\n          'hr',\n          'input'\n        ], name(element));\n      };\n      var isNonEditable = function (element) {\n        return isElement(element) && get$2(element, 'contenteditable') === 'false';\n      };\n      var comparePosition = function (element, other) {\n        return element.dom.compareDocumentPosition(other.dom);\n      };\n      var copyAttributesTo = function (source, destination) {\n        var as = clone(source);\n        setAll(destination, as);\n      };\n      var isSpecial = function (element) {\n        var tag = name(element);\n        return contains([\n          'script',\n          'noscript',\n          'iframe',\n          'noframes',\n          'noembed',\n          'title',\n          'style',\n          'textarea',\n          'xmp'\n        ], tag);\n      };\n      return {\n        up: constant({\n          selector: ancestor$1,\n          closest: closest$1,\n          predicate: ancestor,\n          all: parents\n        }),\n        down: constant({\n          selector: descendants$1,\n          predicate: descendants\n        }),\n        styles: constant({\n          get: get$3,\n          getRaw: getRaw,\n          set: set$1,\n          remove: remove$1\n        }),\n        attrs: constant({\n          get: get$2,\n          set: set,\n          remove: remove,\n          copyTo: copyAttributesTo\n        }),\n        insert: constant({\n          before: before,\n          after: after,\n          afterAll: after$1,\n          append: append,\n          appendAll: append$1,\n          prepend: prepend,\n          wrap: wrap\n        }),\n        remove: constant({\n          unwrap: unwrap,\n          remove: remove$2\n        }),\n        create: constant({\n          nu: SugarElement.fromTag,\n          clone: clone$1,\n          text: SugarElement.fromText\n        }),\n        query: constant({\n          comparePosition: comparePosition,\n          prevSibling: prevSibling,\n          nextSibling: nextSibling\n        }),\n        property: constant({\n          children: children,\n          name: name,\n          parent: parent,\n          document: document,\n          isText: isText,\n          isComment: isComment,\n          isElement: isElement,\n          isSpecial: isSpecial,\n          getText: get$4,\n          setText: set$2,\n          isBoundary: isBoundary,\n          isEmptyTag: isEmptyTag,\n          isNonEditable: isNonEditable\n        }),\n        eq: eq$1,\n        is: is$1\n      };\n    }\n\n    var all$1 = function (universe, look, elements, f) {\n      var head = elements[0];\n      var tail = elements.slice(1);\n      return f(universe, look, head, tail);\n    };\n    var oneAll = function (universe, look, elements) {\n      return elements.length > 0 ? all$1(universe, look, elements, unsafeOne) : Optional.none();\n    };\n    var unsafeOne = function (universe, look, head, tail) {\n      var start = look(universe, head);\n      return foldr(tail, function (b, a) {\n        var current = look(universe, a);\n        return commonElement(universe, b, current);\n      }, start);\n    };\n    var commonElement = function (universe, start, end) {\n      return start.bind(function (s) {\n        return end.filter(curry(universe.eq, s));\n      });\n    };\n\n    var eq$2 = function (universe, item) {\n      return curry(universe.eq, item);\n    };\n    var ancestors$2 = function (universe, start, end, isRoot) {\n      if (isRoot === void 0) {\n        isRoot = never;\n      }\n      var ps1 = [start].concat(universe.up().all(start));\n      var ps2 = [end].concat(universe.up().all(end));\n      var prune = function (path) {\n        var index = findIndex(path, isRoot);\n        return index.fold(function () {\n          return path;\n        }, function (ind) {\n          return path.slice(0, ind + 1);\n        });\n      };\n      var pruned1 = prune(ps1);\n      var pruned2 = prune(ps2);\n      var shared = find(pruned1, function (x) {\n        return exists(pruned2, eq$2(universe, x));\n      });\n      return {\n        firstpath: pruned1,\n        secondpath: pruned2,\n        shared: shared\n      };\n    };\n\n    var sharedOne = oneAll;\n    var ancestors$3 = ancestors$2;\n\n    var universe = DomUniverse();\n    var sharedOne$1 = function (look, elements) {\n      return sharedOne(universe, function (_universe, element) {\n        return look(element);\n      }, elements);\n    };\n    var ancestors$4 = function (start, finish, isRoot) {\n      return ancestors$3(universe, start, finish, isRoot);\n    };\n\n    var lookupTable = function (container) {\n      return ancestor$1(container, 'table');\n    };\n    var identify = function (start, finish, isRoot) {\n      var getIsRoot = function (rootTable) {\n        return function (element) {\n          return isRoot !== undefined && isRoot(element) || eq$1(element, rootTable);\n        };\n      };\n      if (eq$1(start, finish)) {\n        return Optional.some({\n          boxes: Optional.some([start]),\n          start: start,\n          finish: finish\n        });\n      } else {\n        return lookupTable(start).bind(function (startTable) {\n          return lookupTable(finish).bind(function (finishTable) {\n            if (eq$1(startTable, finishTable)) {\n              return Optional.some({\n                boxes: intercepts$1(startTable, start, finish),\n                start: start,\n                finish: finish\n              });\n            } else if (contains$2(startTable, finishTable)) {\n              var ancestorCells = ancestors$1(finish, 'td,th', getIsRoot(startTable));\n              var finishCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : finish;\n              return Optional.some({\n                boxes: nestedIntercepts(startTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: finishCell\n              });\n            } else if (contains$2(finishTable, startTable)) {\n              var ancestorCells = ancestors$1(start, 'td,th', getIsRoot(finishTable));\n              var startCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : start;\n              return Optional.some({\n                boxes: nestedIntercepts(finishTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: startCell\n              });\n            } else {\n              return ancestors$4(start, finish).shared.bind(function (lca) {\n                return closest$1(lca, 'table', isRoot).bind(function (lcaTable) {\n                  var finishAncestorCells = ancestors$1(finish, 'td,th', getIsRoot(lcaTable));\n                  var finishCell = finishAncestorCells.length > 0 ? finishAncestorCells[finishAncestorCells.length - 1] : finish;\n                  var startAncestorCells = ancestors$1(start, 'td,th', getIsRoot(lcaTable));\n                  var startCell = startAncestorCells.length > 0 ? startAncestorCells[startAncestorCells.length - 1] : start;\n                  return Optional.some({\n                    boxes: nestedIntercepts(lcaTable, start, startTable, finish, finishTable),\n                    start: startCell,\n                    finish: finishCell\n                  });\n                });\n              });\n            }\n          });\n        });\n      }\n    };\n    var retrieve = function (container, selector) {\n      var sels = descendants$1(container, selector);\n      return sels.length > 0 ? Optional.some(sels) : Optional.none();\n    };\n    var getLast = function (boxes, lastSelectedSelector) {\n      return find(boxes, function (box) {\n        return is(box, lastSelectedSelector);\n      });\n    };\n    var getEdges = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return descendant$1(container, firstSelectedSelector).bind(function (first) {\n        return descendant$1(container, lastSelectedSelector).bind(function (last) {\n          return sharedOne$1(lookupTable, [\n            first,\n            last\n          ]).map(function (table) {\n            return {\n              first: first,\n              last: last,\n              table: table\n            };\n          });\n        });\n      });\n    };\n    var expandTo = function (finish, firstSelectedSelector) {\n      return ancestor$1(finish, 'table').bind(function (table) {\n        return descendant$1(table, firstSelectedSelector).bind(function (start) {\n          return identify(start, finish).bind(function (identified) {\n            return identified.boxes.map(function (boxes) {\n              return {\n                boxes: boxes,\n                start: identified.start,\n                finish: identified.finish\n              };\n            });\n          });\n        });\n      });\n    };\n    var shiftSelection = function (boxes, deltaRow, deltaColumn, firstSelectedSelector, lastSelectedSelector) {\n      return getLast(boxes, lastSelectedSelector).bind(function (last) {\n        return moveBy$1(last, deltaRow, deltaColumn).bind(function (finish) {\n          return expandTo(finish, firstSelectedSelector);\n        });\n      });\n    };\n\n    var retrieve$1 = function (container, selector) {\n      return retrieve(container, selector);\n    };\n    var retrieveBox = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return getEdges(container, firstSelectedSelector, lastSelectedSelector).bind(function (edges) {\n        var isRoot = function (ancestor) {\n          return eq$1(container, ancestor);\n        };\n        var sectionSelector = 'thead,tfoot,tbody,table';\n        var firstAncestor = ancestor$1(edges.first, sectionSelector, isRoot);\n        var lastAncestor = ancestor$1(edges.last, sectionSelector, isRoot);\n        return firstAncestor.bind(function (fA) {\n          return lastAncestor.bind(function (lA) {\n            return eq$1(fA, lA) ? getBox$1(edges.table, edges.first, edges.last) : Optional.none();\n          });\n        });\n      });\n    };\n\n    var generate$1 = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              var foldArgs = [];\n              for (var _i = 0; _i < arguments.length; _i++) {\n                foldArgs[_i] = arguments[_i];\n              }\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              var target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$1 };\n\n    var type$1 = Adt.generate([\n      { none: [] },\n      { multiple: ['elements'] },\n      { single: ['element'] }\n    ]);\n    var cata = function (subject, onNone, onMultiple, onSingle) {\n      return subject.fold(onNone, onMultiple, onSingle);\n    };\n    var none$1 = type$1.none;\n    var multiple = type$1.multiple;\n    var single = type$1.single;\n\n    var Selections = function (lazyRoot, getStart, selectedSelector) {\n      var get = function () {\n        return retrieve$1(lazyRoot(), selectedSelector).fold(function () {\n          return getStart().map(single).getOrThunk(none$1);\n        }, function (cells) {\n          return multiple(cells);\n        });\n      };\n      return { get: get };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var clone$1 = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$1(original, false);\n    };\n    var deep = function (original) {\n      return clone$1(original, true);\n    };\n    var shallowAs = function (original, tag) {\n      var nu = SugarElement.fromTag(tag);\n      var attributes = clone(original);\n      setAll(nu, attributes);\n      return nu;\n    };\n    var copy$1 = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      var cloneChildren = children(deep(original));\n      append$1(nu, cloneChildren);\n      return nu;\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var bindFrom = function (a, f) {\n      return a !== undefined && a !== null ? f(a) : Optional.none();\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var Dimension = function (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported$1(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$3(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$3(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    };\n\n    var api$1 = Dimension('width', function (element) {\n      return element.dom.offsetWidth;\n    });\n    var get$5 = function (element) {\n      return api$1.get(element);\n    };\n    var getOuter = function (element) {\n      return api$1.getOuter(element);\n    };\n\n    var columns$1 = function (warehouse, isValidCell) {\n      if (isValidCell === void 0) {\n        isValidCell = always;\n      }\n      var grid = warehouse.grid;\n      var cols = range(grid.columns, identity);\n      var rowsArr = range(grid.rows, identity);\n      return map(cols, function (col) {\n        var getBlock = function () {\n          return bind(rowsArr, function (r) {\n            return Warehouse.getAt(warehouse, r, col).filter(function (detail) {\n              return detail.column === col;\n            }).toArray();\n          });\n        };\n        var isValid = function (detail) {\n          return detail.colspan === 1 && isValidCell(detail.element);\n        };\n        var getFallback = function () {\n          return Warehouse.getAt(warehouse, 0, col);\n        };\n        return decide(getBlock, isValid, getFallback);\n      });\n    };\n    var decide = function (getBlock, isValid, getFallback) {\n      var inBlock = getBlock();\n      var validInBlock = find(inBlock, isValid);\n      var detailOption = validInBlock.orThunk(function () {\n        return Optional.from(inBlock[0]).orThunk(getFallback);\n      });\n      return detailOption.map(function (detail) {\n        return detail.element;\n      });\n    };\n    var rows$1 = function (warehouse) {\n      var grid = warehouse.grid;\n      var rowsArr = range(grid.rows, identity);\n      var cols = range(grid.columns, identity);\n      return map(rowsArr, function (row) {\n        var getBlock = function () {\n          return bind(cols, function (c) {\n            return Warehouse.getAt(warehouse, row, c).filter(function (detail) {\n              return detail.row === row;\n            }).fold(constant([]), function (detail) {\n              return [detail];\n            });\n          });\n        };\n        var isSingle = function (detail) {\n          return detail.rowspan === 1;\n        };\n        var getFallback = function () {\n          return Warehouse.getAt(warehouse, row, 0);\n        };\n        return decide(getBlock, isSingle, getFallback);\n      });\n    };\n\n    var deduce = function (xs, index) {\n      if (index < 0 || index >= xs.length - 1) {\n        return Optional.none();\n      }\n      var current = xs[index].fold(function () {\n        var rest = reverse(xs.slice(0, index));\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (c) {\n        return Optional.some({\n          value: c,\n          delta: 0\n        });\n      });\n      var next = xs[index + 1].fold(function () {\n        var rest = xs.slice(index + 1);\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (n) {\n        return Optional.some({\n          value: n,\n          delta: 1\n        });\n      });\n      return current.bind(function (c) {\n        return next.map(function (n) {\n          var extras = n.delta + c.delta;\n          return Math.abs(n.value - c.value) / extras;\n        });\n      });\n    };\n\n    var onDirection = function (isLtr, isRtl) {\n      return function (element) {\n        return getDirection(element) === 'rtl' ? isRtl : isLtr;\n      };\n    };\n    var getDirection = function (element) {\n      return get$3(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var api$2 = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$6 = function (element) {\n      return api$2.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api$2.getOuter(element);\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var rowInfo = function (row, y) {\n      return {\n        row: row,\n        y: y\n      };\n    };\n    var colInfo = function (col, x) {\n      return {\n        col: col,\n        x: x\n      };\n    };\n    var rtlEdge = function (cell) {\n      var pos = absolute(cell);\n      return pos.left + getOuter(cell);\n    };\n    var ltrEdge = function (cell) {\n      return absolute(cell).left;\n    };\n    var getLeftEdge = function (index, cell) {\n      return colInfo(index, ltrEdge(cell));\n    };\n    var getRightEdge = function (index, cell) {\n      return colInfo(index, rtlEdge(cell));\n    };\n    var getTop = function (cell) {\n      return absolute(cell).top;\n    };\n    var getTopEdge = function (index, cell) {\n      return rowInfo(index, getTop(cell));\n    };\n    var getBottomEdge = function (index, cell) {\n      return rowInfo(index, getTop(cell) + getOuter$1(cell));\n    };\n    var findPositions = function (getInnerEdge, getOuterEdge, array) {\n      if (array.length === 0) {\n        return [];\n      }\n      var lines = map(array.slice(1), function (cellOption, index) {\n        return cellOption.map(function (cell) {\n          return getInnerEdge(index, cell);\n        });\n      });\n      var lastLine = array[array.length - 1].map(function (cell) {\n        return getOuterEdge(array.length - 1, cell);\n      });\n      return lines.concat([lastLine]);\n    };\n    var negate = function (step) {\n      return -step;\n    };\n    var height = {\n      delta: identity,\n      positions: function (optElements) {\n        return findPositions(getTopEdge, getBottomEdge, optElements);\n      },\n      edge: getTop\n    };\n    var ltr = {\n      delta: identity,\n      edge: ltrEdge,\n      positions: function (optElements) {\n        return findPositions(getLeftEdge, getRightEdge, optElements);\n      }\n    };\n    var rtl = {\n      delta: negate,\n      edge: rtlEdge,\n      positions: function (optElements) {\n        return findPositions(getRightEdge, getLeftEdge, optElements);\n      }\n    };\n    var detect$4 = onDirection(ltr, rtl);\n    var width = {\n      delta: function (amount, table) {\n        return detect$4(table).delta(amount, table);\n      },\n      positions: function (cols, table) {\n        return detect$4(table).positions(cols, table);\n      },\n      edge: function (cell) {\n        return detect$4(cell).edge(cell);\n      }\n    };\n\n    var units = {\n      unsupportedLength: [\n        'em',\n        'ex',\n        'cap',\n        'ch',\n        'ic',\n        'rem',\n        'lh',\n        'rlh',\n        'vw',\n        'vh',\n        'vi',\n        'vb',\n        'vmin',\n        'vmax',\n        'cm',\n        'mm',\n        'Q',\n        'in',\n        'pc',\n        'pt',\n        'px'\n      ],\n      fixed: [\n        'px',\n        'pt'\n      ],\n      relative: ['%'],\n      empty: ['']\n    };\n    var pattern = function () {\n      var decimalDigits = '[0-9]+';\n      var signedInteger = '[+-]?' + decimalDigits;\n      var exponentPart = '[eE]' + signedInteger;\n      var dot = '\\\\.';\n      var opt = function (input) {\n        return '(?:' + input + ')?';\n      };\n      var unsignedDecimalLiteral = [\n        'Infinity',\n        decimalDigits + dot + opt(decimalDigits) + opt(exponentPart),\n        dot + decimalDigits + opt(exponentPart),\n        decimalDigits + opt(exponentPart)\n      ].join('|');\n      var float = '[+-]?(?:' + unsignedDecimalLiteral + ')';\n      return new RegExp('^(' + float + ')(.*)$');\n    }();\n    var isUnit = function (unit, accepted) {\n      return exists(accepted, function (acc) {\n        return exists(units[acc], function (check) {\n          return unit === check;\n        });\n      });\n    };\n    var parse = function (input, accepted) {\n      var match = Optional.from(pattern.exec(input));\n      return match.bind(function (array) {\n        var value = Number(array[1]);\n        var unitRaw = array[2];\n        if (isUnit(unitRaw, accepted)) {\n          return Optional.some({\n            value: value,\n            unit: unitRaw\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n\n    var needManualCalc = function () {\n      var browser = detect$3().browser;\n      return browser.isIE() || browser.isEdge();\n    };\n    var toNumber = function (px, fallback) {\n      var num = parseFloat(px);\n      return isNaN(num) ? fallback : num;\n    };\n    var getProp = function (elm, name, fallback) {\n      return toNumber(get$3(elm, name), fallback);\n    };\n    var getCalculatedHeight = function (cell) {\n      var height = cell.dom.getBoundingClientRect().height;\n      var boxSizing = get$3(cell, 'box-sizing');\n      if (boxSizing === 'border-box') {\n        return height;\n      } else {\n        var paddingTop = getProp(cell, 'padding-top', 0);\n        var paddingBottom = getProp(cell, 'padding-bottom', 0);\n        var borderTop = getProp(cell, 'border-top-width', 0);\n        var borderBottom = getProp(cell, 'border-bottom-width', 0);\n        var borders = borderTop + borderBottom;\n        return height - paddingTop - paddingBottom - borders;\n      }\n    };\n    var getCalculatedWidth = function (cell) {\n      var width = cell.dom.getBoundingClientRect().width;\n      var boxSizing = get$3(cell, 'box-sizing');\n      if (boxSizing === 'border-box') {\n        return width;\n      } else {\n        var paddingLeft = getProp(cell, 'padding-left', 0);\n        var paddingRight = getProp(cell, 'padding-right', 0);\n        var borderLeft = getProp(cell, 'border-left-width', 0);\n        var borderRight = getProp(cell, 'border-right-width', 0);\n        var borders = borderLeft + borderRight;\n        return width - paddingLeft - paddingRight - borders;\n      }\n    };\n    var getHeight = function (cell) {\n      return needManualCalc() ? getCalculatedHeight(cell) : getProp(cell, 'height', get$6(cell));\n    };\n    var getWidth = function (cell) {\n      return needManualCalc() ? getCalculatedWidth(cell) : getProp(cell, 'width', get$5(cell));\n    };\n\n    var rPercentageBasedSizeRegex = /(\\d+(\\.\\d+)?)%/;\n    var rPixelBasedSizeRegex = /(\\d+(\\.\\d+)?)px|em/;\n    var getPercentSize = function (elm, getter) {\n      var relativeParent = offsetParent(elm).getOr(getBody(owner(elm)));\n      return getter(elm) / getter(relativeParent) * 100;\n    };\n    var setPixelWidth = function (cell, amount) {\n      set$1(cell, 'width', amount + 'px');\n    };\n    var setPercentageWidth = function (cell, amount) {\n      set$1(cell, 'width', amount + '%');\n    };\n    var setHeight = function (cell, amount) {\n      set$1(cell, 'height', amount + 'px');\n    };\n    var getHeightValue = function (cell) {\n      return getRaw(cell, 'height').getOrThunk(function () {\n        return getHeight(cell) + 'px';\n      });\n    };\n    var convert = function (cell, number, getter, setter) {\n      var newSize = table(cell).map(function (table) {\n        var total = getter(table);\n        return Math.floor(number / 100 * total);\n      }).getOr(number);\n      setter(cell, newSize);\n      return newSize;\n    };\n    var normalizePixelSize = function (value, cell, getter, setter) {\n      var number = parseInt(value, 10);\n      return endsWith(value, '%') && name(cell) !== 'table' ? convert(cell, number, getter, setter) : number;\n    };\n    var getTotalHeight = function (cell) {\n      var value = getHeightValue(cell);\n      if (!value) {\n        return get$6(cell);\n      }\n      return normalizePixelSize(value, cell, get$6, setHeight);\n    };\n    var get$7 = function (cell, type, f) {\n      var v = f(cell);\n      var span = getSpan(cell, type);\n      return v / span;\n    };\n    var getRawWidth = function (element) {\n      var cssWidth = getRaw(element, 'width');\n      return cssWidth.fold(function () {\n        return Optional.from(get$2(element, 'width'));\n      }, function (width) {\n        return Optional.some(width);\n      });\n    };\n    var normalizePercentageWidth = function (cellWidth, tableSize) {\n      return cellWidth / tableSize.pixelWidth() * 100;\n    };\n    var choosePercentageSize = function (element, width, tableSize) {\n      var percentMatch = rPercentageBasedSizeRegex.exec(width);\n      if (percentMatch !== null) {\n        return parseFloat(percentMatch[1]);\n      } else {\n        var intWidth = getWidth(element);\n        return normalizePercentageWidth(intWidth, tableSize);\n      }\n    };\n    var getPercentageWidth = function (cell, tableSize) {\n      var width = getRawWidth(cell);\n      return width.fold(function () {\n        var intWidth = get$5(cell);\n        return normalizePercentageWidth(intWidth, tableSize);\n      }, function (w) {\n        return choosePercentageSize(cell, w, tableSize);\n      });\n    };\n    var normalizePixelWidth = function (cellWidth, tableSize) {\n      return cellWidth / 100 * tableSize.pixelWidth();\n    };\n    var choosePixelSize = function (element, width, tableSize) {\n      var pixelMatch = rPixelBasedSizeRegex.exec(width);\n      if (pixelMatch !== null) {\n        return parseInt(pixelMatch[1], 10);\n      }\n      var percentMatch = rPercentageBasedSizeRegex.exec(width);\n      if (percentMatch !== null) {\n        var floatWidth = parseFloat(percentMatch[1]);\n        return normalizePixelWidth(floatWidth, tableSize);\n      }\n      return getWidth(element);\n    };\n    var getPixelWidth = function (cell, tableSize) {\n      var width = getRawWidth(cell);\n      return width.fold(function () {\n        return getWidth(cell);\n      }, function (w) {\n        return choosePixelSize(cell, w, tableSize);\n      });\n    };\n    var getHeight$1 = function (cell) {\n      return get$7(cell, 'rowspan', getTotalHeight);\n    };\n    var getGenericWidth = function (cell) {\n      var width = getRawWidth(cell);\n      return width.bind(function (w) {\n        return parse(w, [\n          'fixed',\n          'relative',\n          'empty'\n        ]);\n      });\n    };\n    var setGenericWidth = function (cell, amount, unit) {\n      set$1(cell, 'width', amount + unit);\n    };\n    var getPixelTableWidth = function (table) {\n      return get$5(table) + 'px';\n    };\n    var getPercentTableWidth = function (table) {\n      return getPercentSize(table, get$5) + '%';\n    };\n    var isPercentSizing = function (table) {\n      return getRawWidth(table).exists(function (size) {\n        return rPercentageBasedSizeRegex.test(size);\n      });\n    };\n    var isPixelSizing = function (table) {\n      return getRawWidth(table).exists(function (size) {\n        return rPixelBasedSizeRegex.test(size);\n      });\n    };\n    var isNoneSizing = function (table) {\n      return getRawWidth(table).isNone();\n    };\n    var percentageBasedSizeRegex = constant(rPercentageBasedSizeRegex);\n    var pixelBasedSizeRegex = constant(rPixelBasedSizeRegex);\n\n    var isCol = isTag('col');\n    var getRaw$1 = function (cell, property, getter) {\n      return getRaw(cell, property).fold(function () {\n        return getter(cell) + 'px';\n      }, function (raw) {\n        return raw;\n      });\n    };\n    var getRawW = function (cell, tableSize) {\n      var fallback = function (e) {\n        return isCol(e) ? get$5(e) : getPixelWidth(e, tableSize);\n      };\n      return getRaw$1(cell, 'width', fallback);\n    };\n    var getRawH = function (cell) {\n      return getRaw$1(cell, 'height', getHeight$1);\n    };\n    var justCols = function (warehouse) {\n      return map(Warehouse.justColumns(warehouse), function (column) {\n        return Optional.from(column.element);\n      });\n    };\n    var hasRawStyle = function (cell, prop) {\n      return getRaw(cell, prop).isSome();\n    };\n    var isValidColumn = function (cell) {\n      return !isCol(cell) || hasRawStyle(cell, 'width');\n    };\n    var getDimension = function (cellOpt, index, backups, filter, getter, fallback) {\n      return cellOpt.filter(filter).fold(function () {\n        return fallback(deduce(backups, index));\n      }, function (cell) {\n        return getter(cell);\n      });\n    };\n    var getWidthFrom = function (warehouse, table, getWidth, fallback, tableSize) {\n      var columnCells = columns$1(warehouse, function (cell) {\n        return hasRawStyle(cell, 'width');\n      });\n      var columns = Warehouse.hasColumns(warehouse) ? justCols(warehouse) : columnCells;\n      var backups = [Optional.some(width.edge(table))].concat(map(width.positions(columnCells, table), function (pos) {\n        return pos.map(function (p) {\n          return p.x;\n        });\n      }));\n      var colFilter = not(hasColspan);\n      return map(columns, function (cellOption, c) {\n        return getDimension(cellOption, c, backups, colFilter, function (column) {\n          if (isValidColumn(column)) {\n            return getWidth(column, tableSize);\n          } else {\n            var cell = bindFrom(columnCells[c], identity);\n            return getDimension(cell, c, backups, colFilter, function (cell) {\n              return fallback(Optional.some(get$5(cell)));\n            }, fallback);\n          }\n        }, fallback);\n      });\n    };\n    var getDeduced = function (deduced) {\n      return deduced.map(function (d) {\n        return d + 'px';\n      }).getOr('');\n    };\n    var getRawWidths = function (warehouse, table, tableSize) {\n      return getWidthFrom(warehouse, table, getRawW, getDeduced, tableSize);\n    };\n    var getPercentageWidths = function (warehouse, table, tableSize) {\n      return getWidthFrom(warehouse, table, getPercentageWidth, function (deduced) {\n        return deduced.fold(function () {\n          return tableSize.minCellWidth();\n        }, function (cellWidth) {\n          return cellWidth / tableSize.pixelWidth() * 100;\n        });\n      }, tableSize);\n    };\n    var getPixelWidths = function (warehouse, table, tableSize) {\n      return getWidthFrom(warehouse, table, getPixelWidth, function (deduced) {\n        return deduced.getOrThunk(tableSize.minCellWidth);\n      }, tableSize);\n    };\n    var getHeightFrom = function (warehouse, table, direction, getHeight, fallback) {\n      var rows = rows$1(warehouse);\n      var backups = [Optional.some(direction.edge(table))].concat(map(direction.positions(rows, table), function (pos) {\n        return pos.map(function (p) {\n          return p.y;\n        });\n      }));\n      return map(rows, function (cellOption, c) {\n        return getDimension(cellOption, c, backups, not(hasRowspan), getHeight, fallback);\n      });\n    };\n    var getPixelHeights = function (warehouse, table, direction) {\n      return getHeightFrom(warehouse, table, direction, getHeight$1, function (deduced) {\n        return deduced.getOrThunk(minHeight);\n      });\n    };\n    var getRawHeights = function (warehouse, table, direction) {\n      return getHeightFrom(warehouse, table, direction, getRawH, getDeduced);\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var noneSize = function (table) {\n      var getWidth = function () {\n        return get$5(table);\n      };\n      var zero = constant(0);\n      var getWidths = function (warehouse, tableSize) {\n        return getPixelWidths(warehouse, table, tableSize);\n      };\n      return {\n        width: getWidth,\n        pixelWidth: getWidth,\n        getWidths: getWidths,\n        getCellDelta: zero,\n        singleColumnWidth: constant([0]),\n        minCellWidth: zero,\n        setElementWidth: noop,\n        adjustTableWidth: noop,\n        isRelative: true,\n        label: 'none'\n      };\n    };\n    var percentageSize = function (initialWidth, table) {\n      var floatWidth = Cell(parseFloat(initialWidth));\n      var pixelWidth = Cell(get$5(table));\n      var getCellDelta = function (delta) {\n        return delta / pixelWidth.get() * 100;\n      };\n      var singleColumnWidth = function (w, _delta) {\n        return [100 - w];\n      };\n      var minCellWidth = function () {\n        return minWidth() / pixelWidth.get() * 100;\n      };\n      var adjustTableWidth = function (delta) {\n        var currentWidth = floatWidth.get();\n        var change = delta / 100 * currentWidth;\n        var newWidth = currentWidth + change;\n        setPercentageWidth(table, newWidth);\n        floatWidth.set(newWidth);\n        pixelWidth.set(get$5(table));\n      };\n      var getWidths = function (warehouse, tableSize) {\n        return getPercentageWidths(warehouse, table, tableSize);\n      };\n      return {\n        width: floatWidth.get,\n        pixelWidth: pixelWidth.get,\n        getWidths: getWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: minCellWidth,\n        setElementWidth: setPercentageWidth,\n        adjustTableWidth: adjustTableWidth,\n        isRelative: true,\n        label: 'percent'\n      };\n    };\n    var pixelSize = function (initialWidth, table) {\n      var width = Cell(initialWidth);\n      var getWidth = width.get;\n      var getCellDelta = identity;\n      var singleColumnWidth = function (w, delta) {\n        var newNext = Math.max(minWidth(), w + delta);\n        return [newNext - w];\n      };\n      var adjustTableWidth = function (delta) {\n        var newWidth = getWidth() + delta;\n        setPixelWidth(table, newWidth);\n        width.set(newWidth);\n      };\n      var getWidths = function (warehouse, tableSize) {\n        return getPixelWidths(warehouse, table, tableSize);\n      };\n      return {\n        width: getWidth,\n        pixelWidth: getWidth,\n        getWidths: getWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: minWidth,\n        setElementWidth: setPixelWidth,\n        adjustTableWidth: adjustTableWidth,\n        isRelative: false,\n        label: 'pixel'\n      };\n    };\n    var chooseSize = function (element, width) {\n      var percentMatch = percentageBasedSizeRegex().exec(width);\n      if (percentMatch !== null) {\n        return percentageSize(percentMatch[1], element);\n      }\n      var pixelMatch = pixelBasedSizeRegex().exec(width);\n      if (pixelMatch !== null) {\n        var intWidth = parseInt(pixelMatch[1], 10);\n        return pixelSize(intWidth, element);\n      }\n      var fallbackWidth = get$5(element);\n      return pixelSize(fallbackWidth, element);\n    };\n    var getTableSize = function (table) {\n      var width = getRawWidth(table);\n      return width.fold(function () {\n        return noneSize(table);\n      }, function (w) {\n        return chooseSize(table, w);\n      });\n    };\n    var TableSize = {\n      getTableSize: getTableSize,\n      pixelSize: pixelSize,\n      percentageSize: percentageSize,\n      noneSize: noneSize\n    };\n\n    var statsStruct = function (minRow, minCol, maxRow, maxCol, allCells, selectedCells) {\n      return {\n        minRow: minRow,\n        minCol: minCol,\n        maxRow: maxRow,\n        maxCol: maxCol,\n        allCells: allCells,\n        selectedCells: selectedCells\n      };\n    };\n    var findSelectedStats = function (house, isSelected) {\n      var totalColumns = house.grid.columns;\n      var totalRows = house.grid.rows;\n      var minRow = totalRows;\n      var minCol = totalColumns;\n      var maxRow = 0;\n      var maxCol = 0;\n      var allCells = [];\n      var selectedCells = [];\n      each$1(house.access, function (detail) {\n        allCells.push(detail);\n        if (isSelected(detail)) {\n          selectedCells.push(detail);\n          var startRow = detail.row;\n          var endRow = startRow + detail.rowspan - 1;\n          var startCol = detail.column;\n          var endCol = startCol + detail.colspan - 1;\n          if (startRow < minRow) {\n            minRow = startRow;\n          } else if (endRow > maxRow) {\n            maxRow = endRow;\n          }\n          if (startCol < minCol) {\n            minCol = startCol;\n          } else if (endCol > maxCol) {\n            maxCol = endCol;\n          }\n        }\n      });\n      return statsStruct(minRow, minCol, maxRow, maxCol, allCells, selectedCells);\n    };\n    var makeCell = function (list, seenSelected, rowIndex) {\n      var row = list[rowIndex].element;\n      var td = SugarElement.fromTag('td');\n      append(td, SugarElement.fromTag('br'));\n      var f = seenSelected ? append : prepend;\n      f(row, td);\n    };\n    var fillInGaps = function (list, house, stats, isSelected) {\n      var totalColumns = house.grid.columns;\n      var totalRows = house.grid.rows;\n      for (var i = 0; i < totalRows; i++) {\n        var seenSelected = false;\n        for (var j = 0; j < totalColumns; j++) {\n          if (!(i < stats.minRow || i > stats.maxRow || j < stats.minCol || j > stats.maxCol)) {\n            var needCell = Warehouse.getAt(house, i, j).filter(isSelected).isNone();\n            if (needCell) {\n              makeCell(list, seenSelected, i);\n            } else {\n              seenSelected = true;\n            }\n          }\n        }\n      }\n    };\n    var clean = function (replica, stats, house, widthDelta) {\n      each$1(house.columns, function (col) {\n        if (col.column < stats.minCol || col.column > stats.maxCol) {\n          remove$2(col.element);\n        }\n      });\n      var emptyRows = filter(firstLayer(replica, 'tr'), function (row) {\n        return row.dom.childElementCount === 0;\n      });\n      each(emptyRows, remove$2);\n      if (stats.minCol === stats.maxCol || stats.minRow === stats.maxRow) {\n        each(firstLayer(replica, 'th,td'), function (cell) {\n          remove(cell, 'rowspan');\n          remove(cell, 'colspan');\n        });\n      }\n      remove(replica, LOCKED_COL_ATTR);\n      remove(replica, 'data-snooker-col-series');\n      var tableSize = TableSize.getTableSize(replica);\n      tableSize.adjustTableWidth(widthDelta);\n    };\n    var getTableWidthDelta = function (table, warehouse, tableSize, stats) {\n      if (stats.minCol === 0 && warehouse.grid.columns === stats.maxCol + 1) {\n        return 0;\n      }\n      var colWidths = getPixelWidths(warehouse, table, tableSize);\n      var allColsWidth = foldl(colWidths, function (acc, width) {\n        return acc + width;\n      }, 0);\n      var selectedColsWidth = foldl(colWidths.slice(stats.minCol, stats.maxCol + 1), function (acc, width) {\n        return acc + width;\n      }, 0);\n      var newWidth = selectedColsWidth / allColsWidth * tableSize.pixelWidth();\n      var delta = newWidth - tableSize.pixelWidth();\n      return tableSize.getCellDelta(delta);\n    };\n    var extract = function (table, selectedSelector) {\n      var isSelected = function (detail) {\n        return is(detail.element, selectedSelector);\n      };\n      var replica = deep(table);\n      var list = fromTable(replica);\n      var tableSize = TableSize.getTableSize(table);\n      var replicaHouse = Warehouse.generate(list);\n      var replicaStats = findSelectedStats(replicaHouse, isSelected);\n      var selector = 'th:not(' + selectedSelector + ')' + ',td:not(' + selectedSelector + ')';\n      var unselectedCells = filterFirstLayer(replica, 'th,td', function (cell) {\n        return is(cell, selector);\n      });\n      each(unselectedCells, remove$2);\n      fillInGaps(list, replicaHouse, replicaStats, isSelected);\n      var house = Warehouse.fromTable(table);\n      var widthDelta = getTableWidthDelta(table, house, tableSize, replicaStats);\n      clean(replica, replicaStats, replicaHouse, widthDelta);\n      return replica;\n    };\n\n    var nbsp = '\\xA0';\n\n    var getEnd = function (element) {\n      return name(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(nbsp) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains(elementsWithCursorPosition, name(elem));\n    };\n\n    var first = function (element) {\n      return descendant(element, isCursorPosition);\n    };\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children$1 = children(element);\n        for (var i = children$1.length - 1; i >= 0; i--) {\n          var child = children$1[i];\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope);\n    };\n\n    var transferableAttributes = {\n      scope: [\n        'row',\n        'col'\n      ]\n    };\n    var createCell = function () {\n      var td = SugarElement.fromTag('td');\n      append(td, SugarElement.fromTag('br'));\n      return td;\n    };\n    var createCol = function () {\n      return SugarElement.fromTag('col');\n    };\n    var createColgroup = function () {\n      return SugarElement.fromTag('colgroup');\n    };\n    var replace = function (cell, tag, attrs) {\n      var replica = copy$1(cell, tag);\n      each$1(attrs, function (v, k) {\n        if (v === null) {\n          remove(replica, k);\n        } else {\n          set(replica, k, v);\n        }\n      });\n      return replica;\n    };\n    var pasteReplace = function (cell) {\n      return cell;\n    };\n    var newRow = function (doc) {\n      return function () {\n        return SugarElement.fromTag('tr', doc.dom);\n      };\n    };\n    var cloneFormats = function (oldCell, newCell, formats) {\n      var first$1 = first(oldCell);\n      return first$1.map(function (firstText) {\n        var formatSelector = formats.join(',');\n        var parents = ancestors$1(firstText, formatSelector, function (element) {\n          return eq$1(element, oldCell);\n        });\n        return foldr(parents, function (last, parent) {\n          var clonedFormat = shallow(parent);\n          remove(clonedFormat, 'contenteditable');\n          append(last, clonedFormat);\n          return clonedFormat;\n        }, newCell);\n      }).getOr(newCell);\n    };\n    var cloneAppropriateAttributes = function (original, clone) {\n      each$1(transferableAttributes, function (validAttributes, attributeName) {\n        return getOpt(original, attributeName).filter(function (attribute) {\n          return contains(validAttributes, attribute);\n        }).each(function (attribute) {\n          return set(clone, attributeName, attribute);\n        });\n      });\n    };\n    var cellOperations = function (mutate, doc, formatsToClone) {\n      var cloneCss = function (prev, clone) {\n        copy(prev.element, clone);\n        remove$1(clone, 'height');\n        if (prev.colspan !== 1) {\n          remove$1(clone, 'width');\n        }\n      };\n      var newCell = function (prev) {\n        var docu = owner(prev.element);\n        var td = SugarElement.fromTag(name(prev.element), docu.dom);\n        var formats = formatsToClone.getOr([\n          'strong',\n          'em',\n          'b',\n          'i',\n          'span',\n          'font',\n          'h1',\n          'h2',\n          'h3',\n          'h4',\n          'h5',\n          'h6',\n          'p',\n          'div'\n        ]);\n        var lastNode = formats.length > 0 ? cloneFormats(prev.element, td, formats) : td;\n        append(lastNode, SugarElement.fromTag('br'));\n        cloneCss(prev, td);\n        cloneAppropriateAttributes(prev.element, td);\n        mutate(prev.element, td);\n        return td;\n      };\n      var newCol = function (prev) {\n        var doc = owner(prev.element);\n        var col = SugarElement.fromTag(name(prev.element), doc.dom);\n        cloneCss(prev, col);\n        mutate(prev.element, col);\n        return col;\n      };\n      return {\n        col: newCol,\n        colgroup: createColgroup,\n        row: newRow(doc),\n        cell: newCell,\n        replace: replace,\n        gap: createCell\n      };\n    };\n    var paste = function (doc) {\n      return {\n        col: createCol,\n        colgroup: createColgroup,\n        row: newRow(doc),\n        cell: createCell,\n        replace: pasteReplace,\n        gap: createCell\n      };\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n    var fromDom$1 = function (nodes) {\n      return map(nodes, SugarElement.fromDom);\n    };\n\n    var getNodeName = function (elm) {\n      return elm.nodeName.toLowerCase();\n    };\n    var getBody$1 = function (editor) {\n      return SugarElement.fromDom(editor.getBody());\n    };\n    var getPixelWidth$1 = function (elm) {\n      return elm.getBoundingClientRect().width;\n    };\n    var getPixelHeight = function (elm) {\n      return elm.getBoundingClientRect().height;\n    };\n    var getIsRoot = function (editor) {\n      return function (element) {\n        return eq$1(element, getBody$1(editor));\n      };\n    };\n    var removePxSuffix = function (size) {\n      return size ? size.replace(/px$/, '') : '';\n    };\n    var addPxSuffix = function (size) {\n      return /^\\d+(\\.\\d+)?$/.test(size) ? size + 'px' : size;\n    };\n    var removeDataStyle = function (table) {\n      remove(table, 'data-mce-style');\n      var removeStyleAttribute = function (element) {\n        return remove(element, 'data-mce-style');\n      };\n      each(cells(table), removeStyleAttribute);\n      each(columns(table), removeStyleAttribute);\n    };\n    var getRawWidth$1 = function (editor, elm) {\n      var raw = editor.dom.getStyle(elm, 'width') || editor.dom.getAttrib(elm, 'width');\n      return Optional.from(raw).filter(isNotEmpty);\n    };\n    var isPercentage = function (value) {\n      return /^(\\d+(\\.\\d+)?)%$/.test(value);\n    };\n    var isPixel = function (value) {\n      return /^(\\d+(\\.\\d+)?)px$/.test(value);\n    };\n    var getSelectionStart = function (editor) {\n      return SugarElement.fromDom(editor.selection.getStart());\n    };\n\n    var selection = function (selections) {\n      return cata(selections.get(), constant([]), identity, pure);\n    };\n    var unmergable = function (selections) {\n      var hasSpan = function (elem, type) {\n        return getOpt(elem, type).exists(function (span) {\n          return parseInt(span, 10) > 1;\n        });\n      };\n      var hasRowOrColSpan = function (elem) {\n        return hasSpan(elem, 'rowspan') || hasSpan(elem, 'colspan');\n      };\n      var candidates = selection(selections);\n      return candidates.length > 0 && forall(candidates, hasRowOrColSpan) ? Optional.some(candidates) : Optional.none();\n    };\n    var mergable = function (table, selections, ephemera) {\n      return cata(selections.get(), Optional.none, function (cells) {\n        if (cells.length <= 1) {\n          return Optional.none();\n        } else {\n          return retrieveBox(table, ephemera.firstSelectedSelector, ephemera.lastSelectedSelector).map(function (bounds) {\n            return {\n              bounds: bounds,\n              cells: cells\n            };\n          });\n        }\n      }, Optional.none);\n    };\n\n    var strSelected = 'data-mce-selected';\n    var strSelectedSelector = 'td[' + strSelected + '],th[' + strSelected + ']';\n    var strAttributeSelector = '[' + strSelected + ']';\n    var strFirstSelected = 'data-mce-first-selected';\n    var strFirstSelectedSelector = 'td[' + strFirstSelected + '],th[' + strFirstSelected + ']';\n    var strLastSelected = 'data-mce-last-selected';\n    var strLastSelectedSelector = 'td[' + strLastSelected + '],th[' + strLastSelected + ']';\n    var attributeSelector = strAttributeSelector;\n    var ephemera = {\n      selected: strSelected,\n      selectedSelector: strSelectedSelector,\n      firstSelected: strFirstSelected,\n      firstSelectedSelector: strFirstSelectedSelector,\n      lastSelected: strLastSelected,\n      lastSelectedSelector: strLastSelectedSelector\n    };\n\n    var noMenu = function (cell) {\n      return {\n        element: cell,\n        mergable: Optional.none(),\n        unmergable: Optional.none(),\n        selection: [cell]\n      };\n    };\n    var forMenu = function (selections, table, cell) {\n      return {\n        element: cell,\n        mergable: mergable(table, selections, ephemera),\n        unmergable: unmergable(selections),\n        selection: selection(selections)\n      };\n    };\n    var paste$1 = function (element, clipboard, generators) {\n      return {\n        element: element,\n        clipboard: clipboard,\n        generators: generators\n      };\n    };\n    var pasteRows = function (selections, cell, clipboard, generators) {\n      return {\n        selection: selection(selections),\n        clipboard: clipboard,\n        generators: generators\n      };\n    };\n\n    var extractSelected = function (cells) {\n      return table(cells[0]).map(function (table) {\n        var replica = extract(table, attributeSelector);\n        removeDataStyle(replica);\n        return [replica];\n      });\n    };\n    var serializeElements = function (editor, elements) {\n      return map(elements, function (elm) {\n        return editor.selection.serializer.serialize(elm.dom, {});\n      }).join('');\n    };\n    var getTextContent = function (elements) {\n      return map(elements, function (element) {\n        return element.dom.innerText;\n      }).join('');\n    };\n    var registerEvents = function (editor, selections, actions, cellSelection) {\n      editor.on('BeforeGetContent', function (e) {\n        var multiCellContext = function (cells) {\n          e.preventDefault();\n          extractSelected(cells).each(function (elements) {\n            e.content = e.format === 'text' ? getTextContent(elements) : serializeElements(editor, elements);\n          });\n        };\n        if (e.selection === true) {\n          cata(selections.get(), noop, multiCellContext, noop);\n        }\n      });\n      editor.on('BeforeSetContent', function (e) {\n        if (e.selection === true && e.paste === true) {\n          var cellOpt = Optional.from(editor.dom.getParent(editor.selection.getStart(), 'th,td'));\n          cellOpt.each(function (domCell) {\n            var cell = SugarElement.fromDom(domCell);\n            table(cell).each(function (table) {\n              var elements = filter(fromHtml$1(e.content), function (content) {\n                return name(content) !== 'meta';\n              });\n              var isTable = function (elm) {\n                return name(elm) === 'table';\n              };\n              if (elements.length === 1 && isTable(elements[0])) {\n                e.preventDefault();\n                var doc = SugarElement.fromDom(editor.getDoc());\n                var generators = paste(doc);\n                var targets = paste$1(cell, elements[0], generators);\n                actions.pasteCells(table, targets).each(function (data) {\n                  editor.selection.setRng(data.rng);\n                  editor.focus();\n                  cellSelection.clear(table);\n                });\n              }\n            });\n          });\n        }\n      });\n    };\n\n    var adt = Adt.generate([\n      { none: [] },\n      { only: ['index'] },\n      {\n        left: [\n          'index',\n          'next'\n        ]\n      },\n      {\n        middle: [\n          'prev',\n          'index',\n          'next'\n        ]\n      },\n      {\n        right: [\n          'prev',\n          'index'\n        ]\n      }\n    ]);\n    var ColumnContext = __assign({}, adt);\n\n    var neighbours = function (input, index) {\n      if (input.length === 0) {\n        return ColumnContext.none();\n      }\n      if (input.length === 1) {\n        return ColumnContext.only(0);\n      }\n      if (index === 0) {\n        return ColumnContext.left(0, 1);\n      }\n      if (index === input.length - 1) {\n        return ColumnContext.right(index - 1, index);\n      }\n      if (index > 0 && index < input.length - 1) {\n        return ColumnContext.middle(index - 1, index, index + 1);\n      }\n      return ColumnContext.none();\n    };\n    var determine = function (input, column, step, tableSize, resize) {\n      var result = input.slice(0);\n      var context = neighbours(input, column);\n      var onNone = constant(map(result, constant(0)));\n      var onOnly = function (index) {\n        return tableSize.singleColumnWidth(result[index], step);\n      };\n      var onLeft = function (index, next) {\n        return resize.calcLeftEdgeDeltas(result, index, next, step, tableSize.minCellWidth(), tableSize.isRelative);\n      };\n      var onMiddle = function (prev, index, next) {\n        return resize.calcMiddleDeltas(result, prev, index, next, step, tableSize.minCellWidth(), tableSize.isRelative);\n      };\n      var onRight = function (prev, index) {\n        return resize.calcRightEdgeDeltas(result, prev, index, step, tableSize.minCellWidth(), tableSize.isRelative);\n      };\n      return context.fold(onNone, onOnly, onLeft, onMiddle, onRight);\n    };\n\n    var total = function (start, end, measures) {\n      var r = 0;\n      for (var i = start; i < end; i++) {\n        r += measures[i] !== undefined ? measures[i] : 0;\n      }\n      return r;\n    };\n    var recalculateWidthForCells = function (warehouse, widths) {\n      var all = Warehouse.justCells(warehouse);\n      return map(all, function (cell) {\n        var width = total(cell.column, cell.column + cell.colspan, widths);\n        return {\n          element: cell.element,\n          width: width,\n          colspan: cell.colspan\n        };\n      });\n    };\n    var recalculateWidthForColumns = function (warehouse, widths) {\n      var groups = Warehouse.justColumns(warehouse);\n      return map(groups, function (column, index) {\n        return {\n          element: column.element,\n          width: widths[index],\n          colspan: column.colspan\n        };\n      });\n    };\n    var recalculateHeightForCells = function (warehouse, heights) {\n      var all = Warehouse.justCells(warehouse);\n      return map(all, function (cell) {\n        var height = total(cell.row, cell.row + cell.rowspan, heights);\n        return {\n          element: cell.element,\n          height: height,\n          rowspan: cell.rowspan\n        };\n      });\n    };\n    var matchRowHeight = function (warehouse, heights) {\n      return map(warehouse.all, function (row, i) {\n        return {\n          element: row.element,\n          height: heights[i]\n        };\n      });\n    };\n\n    var sumUp = function (newSize) {\n      return foldr(newSize, function (b, a) {\n        return b + a;\n      }, 0);\n    };\n    var recalculate = function (warehouse, widths) {\n      if (Warehouse.hasColumns(warehouse)) {\n        return recalculateWidthForColumns(warehouse, widths);\n      } else {\n        return recalculateWidthForCells(warehouse, widths);\n      }\n    };\n    var recalculateAndApply = function (warehouse, widths, tableSize) {\n      var newSizes = recalculate(warehouse, widths);\n      each(newSizes, function (cell) {\n        tableSize.setElementWidth(cell.element, cell.width);\n      });\n    };\n    var adjustWidth = function (table, delta, index, resizing, tableSize) {\n      var warehouse = Warehouse.fromTable(table);\n      var step = tableSize.getCellDelta(delta);\n      var widths = tableSize.getWidths(warehouse, tableSize);\n      var isLastColumn = index === warehouse.grid.columns - 1;\n      var clampedStep = resizing.clampTableDelta(widths, index, step, tableSize.minCellWidth(), isLastColumn);\n      var deltas = determine(widths, index, clampedStep, tableSize, resizing);\n      var newWidths = map(deltas, function (dx, i) {\n        return dx + widths[i];\n      });\n      recalculateAndApply(warehouse, newWidths, tableSize);\n      resizing.resizeTable(tableSize.adjustTableWidth, clampedStep, isLastColumn);\n    };\n    var adjustHeight = function (table, delta, index, direction) {\n      var warehouse = Warehouse.fromTable(table);\n      var heights = getPixelHeights(warehouse, table, direction);\n      var newHeights = map(heights, function (dy, i) {\n        return index === i ? Math.max(delta + dy, minHeight()) : dy;\n      });\n      var newCellSizes = recalculateHeightForCells(warehouse, newHeights);\n      var newRowSizes = matchRowHeight(warehouse, newHeights);\n      each(newRowSizes, function (row) {\n        setHeight(row.element, row.height);\n      });\n      each(newCellSizes, function (cell) {\n        setHeight(cell.element, cell.height);\n      });\n      var total = sumUp(newHeights);\n      setHeight(table, total);\n    };\n    var adjustAndRedistributeWidths = function (_table, list, details, tableSize, resizeBehaviour) {\n      var warehouse = Warehouse.generate(list);\n      var sizes = tableSize.getWidths(warehouse, tableSize);\n      var tablePixelWidth = tableSize.pixelWidth();\n      var _a = resizeBehaviour.calcRedestributedWidths(sizes, tablePixelWidth, details.pixelDelta, tableSize.isRelative), newSizes = _a.newSizes, delta = _a.delta;\n      recalculateAndApply(warehouse, newSizes, tableSize);\n      tableSize.adjustTableWidth(delta);\n    };\n    var adjustWidthTo = function (_table, list, _info, tableSize) {\n      var warehouse = Warehouse.generate(list);\n      var widths = tableSize.getWidths(warehouse, tableSize);\n      recalculateAndApply(warehouse, widths, tableSize);\n    };\n\n    var zero = function (array) {\n      return map(array, constant(0));\n    };\n    var surround = function (sizes, startIndex, endIndex, results, f) {\n      return f(sizes.slice(0, startIndex)).concat(results).concat(f(sizes.slice(endIndex)));\n    };\n    var clampDeltaHelper = function (predicate) {\n      return function (sizes, index, delta, minCellSize) {\n        if (!predicate(delta)) {\n          return delta;\n        } else {\n          var newSize = Math.max(minCellSize, sizes[index] - Math.abs(delta));\n          var diff = Math.abs(newSize - sizes[index]);\n          return delta >= 0 ? diff : -diff;\n        }\n      };\n    };\n    var clampNegativeDelta = clampDeltaHelper(function (delta) {\n      return delta < 0;\n    });\n    var clampDelta = clampDeltaHelper(always);\n    var resizeTable = function () {\n      var calcFixedDeltas = function (sizes, index, next, delta, minCellSize) {\n        var clampedDelta = clampNegativeDelta(sizes, index, delta, minCellSize);\n        return surround(sizes, index, next + 1, [\n          clampedDelta,\n          0\n        ], zero);\n      };\n      var calcRelativeDeltas = function (sizes, index, delta, minCellSize) {\n        var ratio = (100 + delta) / 100;\n        var newThis = Math.max(minCellSize, (sizes[index] + delta) / ratio);\n        return map(sizes, function (size, idx) {\n          var newSize = idx === index ? newThis : size / ratio;\n          return newSize - size;\n        });\n      };\n      var calcLeftEdgeDeltas = function (sizes, index, next, delta, minCellSize, isRelative) {\n        if (isRelative) {\n          return calcRelativeDeltas(sizes, index, delta, minCellSize);\n        } else {\n          return calcFixedDeltas(sizes, index, next, delta, minCellSize);\n        }\n      };\n      var calcMiddleDeltas = function (sizes, _prev, index, next, delta, minCellSize, isRelative) {\n        return calcLeftEdgeDeltas(sizes, index, next, delta, minCellSize, isRelative);\n      };\n      var resizeTable = function (resizer, delta) {\n        return resizer(delta);\n      };\n      var calcRightEdgeDeltas = function (sizes, _prev, index, delta, minCellSize, isRelative) {\n        if (isRelative) {\n          return calcRelativeDeltas(sizes, index, delta, minCellSize);\n        } else {\n          var clampedDelta = clampNegativeDelta(sizes, index, delta, minCellSize);\n          return zero(sizes.slice(0, index)).concat([clampedDelta]);\n        }\n      };\n      var calcRedestributedWidths = function (sizes, totalWidth, pixelDelta, isRelative) {\n        if (isRelative) {\n          var tableWidth = totalWidth + pixelDelta;\n          var ratio_1 = tableWidth / totalWidth;\n          var newSizes = map(sizes, function (size) {\n            return size / ratio_1;\n          });\n          return {\n            delta: ratio_1 * 100 - 100,\n            newSizes: newSizes\n          };\n        } else {\n          return {\n            delta: pixelDelta,\n            newSizes: sizes\n          };\n        }\n      };\n      return {\n        resizeTable: resizeTable,\n        clampTableDelta: clampNegativeDelta,\n        calcLeftEdgeDeltas: calcLeftEdgeDeltas,\n        calcMiddleDeltas: calcMiddleDeltas,\n        calcRightEdgeDeltas: calcRightEdgeDeltas,\n        calcRedestributedWidths: calcRedestributedWidths\n      };\n    };\n    var preserveTable = function () {\n      var calcLeftEdgeDeltas = function (sizes, index, next, delta, minCellSize) {\n        var idx = delta >= 0 ? next : index;\n        var clampedDelta = clampDelta(sizes, idx, delta, minCellSize);\n        return surround(sizes, index, next + 1, [\n          clampedDelta,\n          -clampedDelta\n        ], zero);\n      };\n      var calcMiddleDeltas = function (sizes, _prev, index, next, delta, minCellSize) {\n        return calcLeftEdgeDeltas(sizes, index, next, delta, minCellSize);\n      };\n      var resizeTable = function (resizer, delta, isLastColumn) {\n        if (isLastColumn) {\n          resizer(delta);\n        }\n      };\n      var calcRightEdgeDeltas = function (sizes, _prev, _index, delta, _minCellSize, isRelative) {\n        if (isRelative) {\n          return zero(sizes);\n        } else {\n          var diff = delta / sizes.length;\n          return map(sizes, constant(diff));\n        }\n      };\n      var clampTableDelta = function (sizes, index, delta, minCellSize, isLastColumn) {\n        if (isLastColumn) {\n          if (delta >= 0) {\n            return delta;\n          } else {\n            var maxDelta = foldl(sizes, function (a, b) {\n              return a + b - minCellSize;\n            }, 0);\n            return Math.max(-maxDelta, delta);\n          }\n        } else {\n          return clampNegativeDelta(sizes, index, delta, minCellSize);\n        }\n      };\n      var calcRedestributedWidths = function (sizes, _totalWidth, _pixelDelta, _isRelative) {\n        return {\n          delta: 0,\n          newSizes: sizes\n        };\n      };\n      return {\n        resizeTable: resizeTable,\n        clampTableDelta: clampTableDelta,\n        calcLeftEdgeDeltas: calcLeftEdgeDeltas,\n        calcMiddleDeltas: calcMiddleDeltas,\n        calcRightEdgeDeltas: calcRightEdgeDeltas,\n        calcRedestributedWidths: calcRedestributedWidths\n      };\n    };\n\n    var only = function (element, isResizable) {\n      var parent = Optional.from(element.dom.documentElement).map(SugarElement.fromDom).getOr(element);\n      return {\n        parent: constant(parent),\n        view: constant(element),\n        origin: constant(SugarPosition(0, 0)),\n        isResizable: isResizable\n      };\n    };\n    var detached = function (editable, chrome, isResizable) {\n      var origin = function () {\n        return absolute(chrome);\n      };\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: origin,\n        isResizable: isResizable\n      };\n    };\n    var body$1 = function (editable, chrome, isResizable) {\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: constant(SugarPosition(0, 0)),\n        isResizable: isResizable\n      };\n    };\n    var ResizeWire = {\n      only: only,\n      detached: detached,\n      body: body$1\n    };\n\n    var adt$1 = Adt.generate([\n      { invalid: ['raw'] },\n      { pixels: ['value'] },\n      { percent: ['value'] }\n    ]);\n    var validateFor = function (suffix, type, value) {\n      var rawAmount = value.substring(0, value.length - suffix.length);\n      var amount = parseFloat(rawAmount);\n      return rawAmount === amount.toString() ? type(amount) : adt$1.invalid(value);\n    };\n    var from$1 = function (value) {\n      if (endsWith(value, '%')) {\n        return validateFor('%', adt$1.percent, value);\n      }\n      if (endsWith(value, 'px')) {\n        return validateFor('px', adt$1.pixels, value);\n      }\n      return adt$1.invalid(value);\n    };\n    var Size = __assign(__assign({}, adt$1), { from: from$1 });\n\n    var redistributeToPercent = function (widths, totalWidth) {\n      return map(widths, function (w) {\n        var colType = Size.from(w);\n        return colType.fold(function () {\n          return w;\n        }, function (px) {\n          var ratio = px / totalWidth * 100;\n          return ratio + '%';\n        }, function (pc) {\n          return pc + '%';\n        });\n      });\n    };\n    var redistributeToPx = function (widths, totalWidth, newTotalWidth) {\n      var scale = newTotalWidth / totalWidth;\n      return map(widths, function (w) {\n        var colType = Size.from(w);\n        return colType.fold(function () {\n          return w;\n        }, function (px) {\n          return px * scale + 'px';\n        }, function (pc) {\n          return pc / 100 * newTotalWidth + 'px';\n        });\n      });\n    };\n    var redistributeEmpty = function (newWidthType, columns) {\n      var f = newWidthType.fold(function () {\n        return constant('');\n      }, function (pixels) {\n        var num = pixels / columns;\n        return constant(num + 'px');\n      }, function () {\n        var num = 100 / columns;\n        return constant(num + '%');\n      });\n      return range(columns, f);\n    };\n    var redistributeValues = function (newWidthType, widths, totalWidth) {\n      return newWidthType.fold(function () {\n        return widths;\n      }, function (px) {\n        return redistributeToPx(widths, totalWidth, px);\n      }, function (_pc) {\n        return redistributeToPercent(widths, totalWidth);\n      });\n    };\n    var redistribute = function (widths, totalWidth, newWidth) {\n      var newType = Size.from(newWidth);\n      var floats = forall(widths, function (s) {\n        return s === '0px';\n      }) ? redistributeEmpty(newType, widths.length) : redistributeValues(newType, widths, totalWidth);\n      return normalize(floats);\n    };\n    var sum = function (values, fallback) {\n      if (values.length === 0) {\n        return fallback;\n      }\n      return foldr(values, function (rest, v) {\n        return Size.from(v).fold(constant(0), identity, identity) + rest;\n      }, 0);\n    };\n    var roundDown = function (num, unit) {\n      var floored = Math.floor(num);\n      return {\n        value: floored + unit,\n        remainder: num - floored\n      };\n    };\n    var add = function (value, amount) {\n      return Size.from(value).fold(constant(value), function (px) {\n        return px + amount + 'px';\n      }, function (pc) {\n        return pc + amount + '%';\n      });\n    };\n    var normalize = function (values) {\n      if (values.length === 0) {\n        return values;\n      }\n      var scan = foldr(values, function (rest, value) {\n        var info = Size.from(value).fold(function () {\n          return {\n            value: value,\n            remainder: 0\n          };\n        }, function (num) {\n          return roundDown(num, 'px');\n        }, function (num) {\n          return {\n            value: num + '%',\n            remainder: 0\n          };\n        });\n        return {\n          output: [info.value].concat(rest.output),\n          remainder: rest.remainder + info.remainder\n        };\n      }, {\n        output: [],\n        remainder: 0\n      });\n      var r = scan.output;\n      return r.slice(0, r.length - 1).concat([add(r[r.length - 1], Math.round(scan.remainder))]);\n    };\n    var validate = Size.from;\n\n    var redistributeToW = function (newWidths, cells, unit) {\n      each(cells, function (cell) {\n        var widths = newWidths.slice(cell.column, cell.colspan + cell.column);\n        var w = sum(widths, minWidth());\n        set$1(cell.element, 'width', w + unit);\n      });\n    };\n    var redistributeToColumns = function (newWidths, columns, unit) {\n      each(columns, function (column, index) {\n        var width = sum([newWidths[index]], minWidth());\n        set$1(column.element, 'width', width + unit);\n      });\n    };\n    var redistributeToH = function (newHeights, rows, cells, unit) {\n      each(cells, function (cell) {\n        var heights = newHeights.slice(cell.row, cell.rowspan + cell.row);\n        var h = sum(heights, minHeight());\n        set$1(cell.element, 'height', h + unit);\n      });\n      each(rows, function (row, i) {\n        set$1(row.element, 'height', newHeights[i]);\n      });\n    };\n    var getUnit = function (newSize) {\n      return validate(newSize).fold(constant('px'), constant('px'), constant('%'));\n    };\n    var redistribute$1 = function (table, optWidth, optHeight, tableSize) {\n      var warehouse = Warehouse.fromTable(table);\n      var rows = warehouse.all;\n      var cells = Warehouse.justCells(warehouse);\n      var columns = Warehouse.justColumns(warehouse);\n      optWidth.each(function (newWidth) {\n        var widthUnit = getUnit(newWidth);\n        var totalWidth = get$5(table);\n        var oldWidths = getRawWidths(warehouse, table, tableSize);\n        var nuWidths = redistribute(oldWidths, totalWidth, newWidth);\n        if (Warehouse.hasColumns(warehouse)) {\n          redistributeToColumns(nuWidths, columns, widthUnit);\n        } else {\n          redistributeToW(nuWidths, cells, widthUnit);\n        }\n        set$1(table, 'width', newWidth);\n      });\n      optHeight.each(function (newHeight) {\n        var hUnit = getUnit(newHeight);\n        var totalHeight = get$6(table);\n        var oldHeights = getRawHeights(warehouse, table, height);\n        var nuHeights = redistribute(oldHeights, totalHeight, newHeight);\n        redistributeToH(nuHeights, rows, cells, hUnit);\n        set$1(table, 'height', newHeight);\n      });\n    };\n    var isPercentSizing$1 = isPercentSizing;\n    var isPixelSizing$1 = isPixelSizing;\n    var isNoneSizing$1 = isNoneSizing;\n    var getPercentTableWidth$1 = getPercentTableWidth;\n\n    var getGridSize = function (table) {\n      var warehouse = Warehouse.fromTable(table);\n      return warehouse.grid;\n    };\n\n    var Event = function (fields) {\n      var handlers = [];\n      var bind = function (handler) {\n        if (handler === undefined) {\n          throw new Error('Event bind error: undefined handler');\n        }\n        handlers.push(handler);\n      };\n      var unbind = function (handler) {\n        handlers = filter(handlers, function (h) {\n          return h !== handler;\n        });\n      };\n      var trigger = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        var event = {};\n        each(fields, function (name, i) {\n          event[name] = args[i];\n        });\n        each(handlers, function (handler) {\n          handler(event);\n        });\n      };\n      return {\n        bind: bind,\n        unbind: unbind,\n        trigger: trigger\n      };\n    };\n\n    var create = function (typeDefs) {\n      var registry = map$1(typeDefs, function (event) {\n        return {\n          bind: event.bind,\n          unbind: event.unbind\n        };\n      });\n      var trigger = map$1(typeDefs, function (event) {\n        return event.trigger;\n      });\n      return {\n        registry: registry,\n        trigger: trigger\n      };\n    };\n\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          clearTimeout(timer);\n        }\n        timer = setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var sort$1 = function (arr) {\n      return arr.slice(0).sort();\n    };\n    var reqMessage = function (required, keys) {\n      throw new Error('All required keys (' + sort$1(required).join(', ') + ') were not specified. Specified keys were: ' + sort$1(keys).join(', ') + '.');\n    };\n    var unsuppMessage = function (unsupported) {\n      throw new Error('Unsupported keys for object: ' + sort$1(unsupported).join(', '));\n    };\n    var validateStrArr = function (label, array) {\n      if (!isArray(array)) {\n        throw new Error('The ' + label + ' fields must be an array. Was: ' + array + '.');\n      }\n      each(array, function (a) {\n        if (!isString(a)) {\n          throw new Error('The value ' + a + ' in the ' + label + ' fields was not a string.');\n        }\n      });\n    };\n    var invalidTypeMessage = function (incorrect, type) {\n      throw new Error('All values need to be of type: ' + type + '. Keys (' + sort$1(incorrect).join(', ') + ') were not.');\n    };\n    var checkDupes = function (everything) {\n      var sorted = sort$1(everything);\n      var dupe = find(sorted, function (s, i) {\n        return i < sorted.length - 1 && s === sorted[i + 1];\n      });\n      dupe.each(function (d) {\n        throw new Error('The field: ' + d + ' occurs more than once in the combined fields: [' + sorted.join(', ') + '].');\n      });\n    };\n\n    var base = function (handleUnsupported, required) {\n      return baseWith(handleUnsupported, required, {\n        validate: isFunction,\n        label: 'function'\n      });\n    };\n    var baseWith = function (handleUnsupported, required, pred) {\n      if (required.length === 0) {\n        throw new Error('You must specify at least one required field.');\n      }\n      validateStrArr('required', required);\n      checkDupes(required);\n      return function (obj) {\n        var keys$1 = keys(obj);\n        var allReqd = forall(required, function (req) {\n          return contains(keys$1, req);\n        });\n        if (!allReqd) {\n          reqMessage(required, keys$1);\n        }\n        handleUnsupported(required, keys$1);\n        var invalidKeys = filter(required, function (key) {\n          return !pred.validate(obj[key], key);\n        });\n        if (invalidKeys.length > 0) {\n          invalidTypeMessage(invalidKeys, pred.label);\n        }\n        return obj;\n      };\n    };\n    var handleExact = function (required, keys) {\n      var unsupported = filter(keys, function (key) {\n        return !contains(required, key);\n      });\n      if (unsupported.length > 0) {\n        unsuppMessage(unsupported);\n      }\n    };\n    var exactly = function (required) {\n      return base(handleExact, required);\n    };\n\n    var DragMode = exactly([\n      'compare',\n      'extract',\n      'mutate',\n      'sink'\n    ]);\n    var DragSink = exactly([\n      'element',\n      'start',\n      'stop',\n      'destroy'\n    ]);\n    var DragApi = exactly([\n      'forceDrop',\n      'drop',\n      'move',\n      'delayDrop'\n    ]);\n\n    var InDrag = function () {\n      var previous = Optional.none();\n      var reset = function () {\n        previous = Optional.none();\n      };\n      var update = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.compare(old, nu);\n        });\n        previous = Optional.some(nu);\n        return result;\n      };\n      var onEvent = function (event, mode) {\n        var dataOption = mode.extract(event);\n        dataOption.each(function (data) {\n          var offset = update(mode, data);\n          offset.each(function (d) {\n            events.trigger.move(d);\n          });\n        });\n      };\n      var events = create({ move: Event(['info']) });\n      return {\n        onEvent: onEvent,\n        reset: reset,\n        events: events.registry\n      };\n    };\n\n    var NoDrag = function () {\n      var events = create({ move: Event(['info']) });\n      return {\n        onEvent: noop,\n        reset: noop,\n        events: events.registry\n      };\n    };\n\n    var Movement = function () {\n      var noDragState = NoDrag();\n      var inDragState = InDrag();\n      var dragState = noDragState;\n      var on = function () {\n        dragState.reset();\n        dragState = inDragState;\n      };\n      var off = function () {\n        dragState.reset();\n        dragState = noDragState;\n      };\n      var onEvent = function (event, mode) {\n        dragState.onEvent(event, mode);\n      };\n      var isOn = function () {\n        return dragState === inDragState;\n      };\n      return {\n        on: on,\n        off: off,\n        isOn: isOn,\n        onEvent: onEvent,\n        events: inDragState.events\n      };\n    };\n\n    var setup = function (mutation, mode, settings) {\n      var active = false;\n      var events = create({\n        start: Event([]),\n        stop: Event([])\n      });\n      var movement = Movement();\n      var drop = function () {\n        sink.stop();\n        if (movement.isOn()) {\n          movement.off();\n          events.trigger.stop();\n        }\n      };\n      var throttledDrop = last$2(drop, 200);\n      var go = function (parent) {\n        sink.start(parent);\n        movement.on();\n        events.trigger.start();\n      };\n      var mousemove = function (event) {\n        throttledDrop.cancel();\n        movement.onEvent(event, mode);\n      };\n      movement.events.move.bind(function (event) {\n        mode.mutate(mutation, event.info);\n      });\n      var on = function () {\n        active = true;\n      };\n      var off = function () {\n        active = false;\n      };\n      var runIfActive = function (f) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          if (active) {\n            f.apply(null, args);\n          }\n        };\n      };\n      var sink = mode.sink(DragApi({\n        forceDrop: drop,\n        drop: runIfActive(drop),\n        move: runIfActive(mousemove),\n        delayDrop: runIfActive(throttledDrop.throttle)\n      }), settings);\n      var destroy = function () {\n        sink.destroy();\n      };\n      return {\n        element: sink.element,\n        go: go,\n        on: on,\n        off: off,\n        destroy: destroy,\n        events: events.registry\n      };\n    };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: target,\n        x: x,\n        y: y,\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: raw\n      };\n    };\n    var fromRawEvent = function (rawEvent) {\n      var target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      var stop = function () {\n        return rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        return rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (filter(rawEvent)) {\n          handler(fromRawEvent(rawEvent));\n        }\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$1 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    var filter$2 = always;\n    var bind$2 = function (element, event, handler) {\n      return bind$1(element, event, filter$2, handler);\n    };\n    var fromRawEvent$1 = fromRawEvent;\n\n    var read = function (element, attr) {\n      var value = get$2(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add$1 = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$3 = function (element, attr, id) {\n      var nu = filter(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set(element, attr, nu.join(' '));\n      } else {\n        remove(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$8 = function (element) {\n      return read(element, 'class');\n    };\n    var add$2 = function (element, clazz) {\n      return add$1(element, 'class', clazz);\n    };\n    var remove$4 = function (element, clazz) {\n      return remove$3(element, 'class', clazz);\n    };\n\n    var add$3 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$2(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$8(element);\n      if (classList.length === 0) {\n        remove(element, 'class');\n      }\n    };\n    var remove$5 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$4(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$1 = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var css = function (namespace) {\n      var dashNamespace = namespace.replace(/\\./g, '-');\n      var resolve = function (str) {\n        return dashNamespace + '-' + str;\n      };\n      return { resolve: resolve };\n    };\n\n    var styles = css('ephox-dragster');\n    var resolve = styles.resolve;\n\n    var Blocker = function (options) {\n      var settings = __assign({ layerClass: resolve('blocker') }, options);\n      var div = SugarElement.fromTag('div');\n      set(div, 'role', 'presentation');\n      setAll$1(div, {\n        position: 'fixed',\n        left: '0px',\n        top: '0px',\n        width: '100%',\n        height: '100%'\n      });\n      add$3(div, resolve('blocker'));\n      add$3(div, settings.layerClass);\n      var element = function () {\n        return div;\n      };\n      var destroy = function () {\n        remove$2(div);\n      };\n      return {\n        element: element,\n        destroy: destroy\n      };\n    };\n\n    var compare = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n    var extract$1 = function (event) {\n      return Optional.some(SugarPosition(event.x, event.y));\n    };\n    var mutate = function (mutation, info) {\n      mutation.mutate(info.left, info.top);\n    };\n    var sink = function (dragApi, settings) {\n      var blocker = Blocker(settings);\n      var mdown = bind$2(blocker.element(), 'mousedown', dragApi.forceDrop);\n      var mup = bind$2(blocker.element(), 'mouseup', dragApi.drop);\n      var mmove = bind$2(blocker.element(), 'mousemove', dragApi.move);\n      var mout = bind$2(blocker.element(), 'mouseout', dragApi.delayDrop);\n      var destroy = function () {\n        blocker.destroy();\n        mup.unbind();\n        mmove.unbind();\n        mout.unbind();\n        mdown.unbind();\n      };\n      var start = function (parent) {\n        append(parent, blocker.element());\n      };\n      var stop = function () {\n        remove$2(blocker.element());\n      };\n      return DragSink({\n        element: blocker.element,\n        start: start,\n        stop: stop,\n        destroy: destroy\n      });\n    };\n    var MouseDrag = DragMode({\n      compare: compare,\n      extract: extract$1,\n      sink: sink,\n      mutate: mutate\n    });\n\n    var transform = function (mutation, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var mode = settings.mode !== undefined ? settings.mode : MouseDrag;\n      return setup(mutation, mode, settings);\n    };\n\n    var isContentEditableTrue = function (elm) {\n      return get$2(elm, 'contenteditable') === 'true';\n    };\n    var findClosestContentEditable = function (target, isRoot) {\n      return closest$1(target, '[contenteditable]', isRoot);\n    };\n\n    var styles$1 = css('ephox-snooker');\n    var resolve$1 = styles$1.resolve;\n\n    var Mutation = function () {\n      var events = create({\n        drag: Event([\n          'xDelta',\n          'yDelta'\n        ])\n      });\n      var mutate = function (x, y) {\n        events.trigger.drag(x, y);\n      };\n      return {\n        mutate: mutate,\n        events: events.registry\n      };\n    };\n\n    var BarMutation = function () {\n      var events = create({\n        drag: Event([\n          'xDelta',\n          'yDelta',\n          'target'\n        ])\n      });\n      var target = Optional.none();\n      var delegate = Mutation();\n      delegate.events.drag.bind(function (event) {\n        target.each(function (t) {\n          events.trigger.drag(event.xDelta, event.yDelta, t);\n        });\n      });\n      var assign = function (t) {\n        target = Optional.some(t);\n      };\n      var get = function () {\n        return target;\n      };\n      return {\n        assign: assign,\n        get: get,\n        mutate: delegate.mutate,\n        events: events.registry\n      };\n    };\n\n    var col = function (column, x, y, w, h) {\n      var bar = SugarElement.fromTag('div');\n      setAll$1(bar, {\n        position: 'absolute',\n        left: x - w / 2 + 'px',\n        top: y + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      setAll(bar, {\n        'data-column': column,\n        'role': 'presentation'\n      });\n      return bar;\n    };\n    var row = function (r, x, y, w, h) {\n      var bar = SugarElement.fromTag('div');\n      setAll$1(bar, {\n        position: 'absolute',\n        left: x + 'px',\n        top: y - h / 2 + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      setAll(bar, {\n        'data-row': r,\n        'role': 'presentation'\n      });\n      return bar;\n    };\n\n    var resizeBar = resolve$1('resizer-bar');\n    var resizeRowBar = resolve$1('resizer-rows');\n    var resizeColBar = resolve$1('resizer-cols');\n    var BAR_THICKNESS = 7;\n    var resizableRows = function (warehouse, isResizable) {\n      return bind(warehouse.all, function (row, i) {\n        return isResizable(row.element) ? [i] : [];\n      });\n    };\n    var resizableColumns = function (warehouse, isResizable) {\n      var resizableCols = [];\n      range(warehouse.grid.columns, function (index) {\n        var colElmOpt = Warehouse.getColumnAt(warehouse, index).map(function (col) {\n          return col.element;\n        });\n        if (colElmOpt.forall(isResizable)) {\n          resizableCols.push(index);\n        }\n      });\n      return filter(resizableCols, function (colIndex) {\n        var columnCells = Warehouse.filterItems(warehouse, function (cell) {\n          return cell.column === colIndex;\n        });\n        return forall(columnCells, function (cell) {\n          return isResizable(cell.element);\n        });\n      });\n    };\n    var destroy = function (wire) {\n      var previous = descendants$1(wire.parent(), '.' + resizeBar);\n      each(previous, remove$2);\n    };\n    var drawBar = function (wire, positions, create) {\n      var origin = wire.origin();\n      each(positions, function (cpOption) {\n        cpOption.each(function (cp) {\n          var bar = create(origin, cp);\n          add$3(bar, resizeBar);\n          append(wire.parent(), bar);\n        });\n      });\n    };\n    var refreshCol = function (wire, colPositions, position, tableHeight) {\n      drawBar(wire, colPositions, function (origin, cp) {\n        var colBar = col(cp.col, cp.x - origin.left, position.top - origin.top, BAR_THICKNESS, tableHeight);\n        add$3(colBar, resizeColBar);\n        return colBar;\n      });\n    };\n    var refreshRow = function (wire, rowPositions, position, tableWidth) {\n      drawBar(wire, rowPositions, function (origin, cp) {\n        var rowBar = row(cp.row, position.left - origin.left, cp.y - origin.top, tableWidth, BAR_THICKNESS);\n        add$3(rowBar, resizeRowBar);\n        return rowBar;\n      });\n    };\n    var refreshGrid = function (warhouse, wire, table, rows, cols) {\n      var position = absolute(table);\n      var isResizable = wire.isResizable;\n      var rowPositions = rows.length > 0 ? height.positions(rows, table) : [];\n      var resizableRowBars = rowPositions.length > 0 ? resizableRows(warhouse, isResizable) : [];\n      var resizableRowPositions = filter(rowPositions, function (_pos, i) {\n        return exists(resizableRowBars, function (barIndex) {\n          return i === barIndex;\n        });\n      });\n      refreshRow(wire, resizableRowPositions, position, getOuter(table));\n      var colPositions = cols.length > 0 ? width.positions(cols, table) : [];\n      var resizableColBars = colPositions.length > 0 ? resizableColumns(warhouse, isResizable) : [];\n      var resizableColPositions = filter(colPositions, function (_pos, i) {\n        return exists(resizableColBars, function (barIndex) {\n          return i === barIndex;\n        });\n      });\n      refreshCol(wire, resizableColPositions, position, getOuter$1(table));\n    };\n    var refresh = function (wire, table) {\n      destroy(wire);\n      if (wire.isResizable(table)) {\n        var warehouse = Warehouse.fromTable(table);\n        var rows = rows$1(warehouse);\n        var cols = columns$1(warehouse);\n        refreshGrid(warehouse, wire, table, rows, cols);\n      }\n    };\n    var each$2 = function (wire, f) {\n      var bars = descendants$1(wire.parent(), '.' + resizeBar);\n      each(bars, f);\n    };\n    var hide = function (wire) {\n      each$2(wire, function (bar) {\n        set$1(bar, 'display', 'none');\n      });\n    };\n    var show = function (wire) {\n      each$2(wire, function (bar) {\n        set$1(bar, 'display', 'block');\n      });\n    };\n    var isRowBar = function (element) {\n      return has$1(element, resizeRowBar);\n    };\n    var isColBar = function (element) {\n      return has$1(element, resizeColBar);\n    };\n\n    var resizeBarDragging = resolve$1('resizer-bar-dragging');\n    var BarManager = function (wire) {\n      var mutation = BarMutation();\n      var resizing = transform(mutation, {});\n      var hoverTable = Optional.none();\n      var getResizer = function (element, type) {\n        return Optional.from(get$2(element, type));\n      };\n      mutation.events.drag.bind(function (event) {\n        getResizer(event.target, 'data-row').each(function (_dataRow) {\n          var currentRow = getCssValue(event.target, 'top');\n          set$1(event.target, 'top', currentRow + event.yDelta + 'px');\n        });\n        getResizer(event.target, 'data-column').each(function (_dataCol) {\n          var currentCol = getCssValue(event.target, 'left');\n          set$1(event.target, 'left', currentCol + event.xDelta + 'px');\n        });\n      });\n      var getDelta = function (target, dir) {\n        var newX = getCssValue(target, dir);\n        var oldX = getAttrValue(target, 'data-initial-' + dir, 0);\n        return newX - oldX;\n      };\n      resizing.events.stop.bind(function () {\n        mutation.get().each(function (target) {\n          hoverTable.each(function (table) {\n            getResizer(target, 'data-row').each(function (row) {\n              var delta = getDelta(target, 'top');\n              remove(target, 'data-initial-top');\n              events.trigger.adjustHeight(table, delta, parseInt(row, 10));\n            });\n            getResizer(target, 'data-column').each(function (column) {\n              var delta = getDelta(target, 'left');\n              remove(target, 'data-initial-left');\n              events.trigger.adjustWidth(table, delta, parseInt(column, 10));\n            });\n            refresh(wire, table);\n          });\n        });\n      });\n      var handler = function (target, dir) {\n        events.trigger.startAdjust();\n        mutation.assign(target);\n        set(target, 'data-initial-' + dir, getCssValue(target, dir));\n        add$3(target, resizeBarDragging);\n        set$1(target, 'opacity', '0.2');\n        resizing.go(wire.parent());\n      };\n      var mousedown = bind$2(wire.parent(), 'mousedown', function (event) {\n        if (isRowBar(event.target)) {\n          handler(event.target, 'top');\n        }\n        if (isColBar(event.target)) {\n          handler(event.target, 'left');\n        }\n      });\n      var isRoot = function (e) {\n        return eq$1(e, wire.view());\n      };\n      var findClosestEditableTable = function (target) {\n        return closest$1(target, 'table', isRoot).filter(function (table) {\n          return findClosestContentEditable(table, isRoot).exists(isContentEditableTrue);\n        });\n      };\n      var mouseover = bind$2(wire.view(), 'mouseover', function (event) {\n        findClosestEditableTable(event.target).fold(function () {\n          if (inBody(event.target)) {\n            destroy(wire);\n          }\n        }, function (table) {\n          hoverTable = Optional.some(table);\n          refresh(wire, table);\n        });\n      });\n      var destroy$1 = function () {\n        mousedown.unbind();\n        mouseover.unbind();\n        resizing.destroy();\n        destroy(wire);\n      };\n      var refresh$1 = function (tbl) {\n        refresh(wire, tbl);\n      };\n      var events = create({\n        adjustHeight: Event([\n          'table',\n          'delta',\n          'row'\n        ]),\n        adjustWidth: Event([\n          'table',\n          'delta',\n          'column'\n        ]),\n        startAdjust: Event([])\n      });\n      return {\n        destroy: destroy$1,\n        refresh: refresh$1,\n        on: resizing.on,\n        off: resizing.off,\n        hideBars: curry(hide, wire),\n        showBars: curry(show, wire),\n        events: events.registry\n      };\n    };\n\n    var create$1 = function (wire, resizing, lazySizing) {\n      var hdirection = height;\n      var vdirection = width;\n      var manager = BarManager(wire);\n      var events = create({\n        beforeResize: Event([\n          'table',\n          'type'\n        ]),\n        afterResize: Event([\n          'table',\n          'type'\n        ]),\n        startDrag: Event([])\n      });\n      manager.events.adjustHeight.bind(function (event) {\n        var table = event.table;\n        events.trigger.beforeResize(table, 'row');\n        var delta = hdirection.delta(event.delta, table);\n        adjustHeight(table, delta, event.row, hdirection);\n        events.trigger.afterResize(table, 'row');\n      });\n      manager.events.startAdjust.bind(function (_event) {\n        events.trigger.startDrag();\n      });\n      manager.events.adjustWidth.bind(function (event) {\n        var table = event.table;\n        events.trigger.beforeResize(table, 'col');\n        var delta = vdirection.delta(event.delta, table);\n        var tableSize = lazySizing(table);\n        adjustWidth(table, delta, event.column, resizing, tableSize);\n        events.trigger.afterResize(table, 'col');\n      });\n      return {\n        on: manager.on,\n        off: manager.off,\n        hideBars: manager.hideBars,\n        showBars: manager.showBars,\n        destroy: manager.destroy,\n        events: events.registry\n      };\n    };\n    var TableResize = { create: create$1 };\n\n    var fireNewRow = function (editor, row) {\n      return editor.fire('newrow', { node: row });\n    };\n    var fireNewCell = function (editor, cell) {\n      return editor.fire('newcell', { node: cell });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var fireTableSelectionChange = function (editor, cells, start, finish, otherCells) {\n      editor.fire('TableSelectionChange', {\n        cells: cells,\n        start: start,\n        finish: finish,\n        otherCells: otherCells\n      });\n    };\n    var fireTableSelectionClear = function (editor) {\n      editor.fire('TableSelectionClear');\n    };\n    var fireTableModified = function (editor, table, data) {\n      editor.fire('TableModified', __assign(__assign({}, data), { table: table }));\n    };\n    var styleModified = {\n      structure: false,\n      style: true\n    };\n    var structureModified = {\n      structure: true,\n      style: false\n    };\n\n    var defaultTableToolbar = 'tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol';\n    var defaultStyles = {\n      'border-collapse': 'collapse',\n      'width': '100%'\n    };\n    var determineDefaultStyles = function (editor) {\n      if (isPixelsForced(editor)) {\n        var editorWidth = editor.getBody().offsetWidth;\n        return __assign(__assign({}, defaultStyles), { width: editorWidth + 'px' });\n      } else if (isResponsiveForced(editor)) {\n        return filter$1(defaultStyles, function (_value, key) {\n          return key !== 'width';\n        });\n      } else {\n        return defaultStyles;\n      }\n    };\n    var defaultAttributes = { border: '1' };\n    var defaultColumnResizingBehaviour = 'preservetable';\n    var getTableSizingMode = function (editor) {\n      return editor.getParam('table_sizing_mode', 'auto');\n    };\n    var getTableResponseWidth = function (editor) {\n      return editor.getParam('table_responsive_width');\n    };\n    var getDefaultAttributes = function (editor) {\n      return editor.getParam('table_default_attributes', defaultAttributes, 'object');\n    };\n    var getDefaultStyles = function (editor) {\n      return editor.getParam('table_default_styles', determineDefaultStyles(editor), 'object');\n    };\n    var hasTableResizeBars = function (editor) {\n      return editor.getParam('table_resize_bars', true, 'boolean');\n    };\n    var hasTabNavigation = function (editor) {\n      return editor.getParam('table_tab_navigation', true, 'boolean');\n    };\n    var hasAdvancedCellTab = function (editor) {\n      return editor.getParam('table_cell_advtab', true, 'boolean');\n    };\n    var hasAdvancedRowTab = function (editor) {\n      return editor.getParam('table_row_advtab', true, 'boolean');\n    };\n    var hasAdvancedTableTab = function (editor) {\n      return editor.getParam('table_advtab', true, 'boolean');\n    };\n    var hasAppearanceOptions = function (editor) {\n      return editor.getParam('table_appearance_options', true, 'boolean');\n    };\n    var hasTableGrid = function (editor) {\n      return editor.getParam('table_grid', true, 'boolean');\n    };\n    var shouldStyleWithCss = function (editor) {\n      return editor.getParam('table_style_by_css', false, 'boolean');\n    };\n    var getCellClassList = function (editor) {\n      return editor.getParam('table_cell_class_list', [], 'array');\n    };\n    var getRowClassList = function (editor) {\n      return editor.getParam('table_row_class_list', [], 'array');\n    };\n    var getTableClassList = function (editor) {\n      return editor.getParam('table_class_list', [], 'array');\n    };\n    var isPercentagesForced = function (editor) {\n      return getTableSizingMode(editor) === 'relative' || getTableResponseWidth(editor) === true;\n    };\n    var isPixelsForced = function (editor) {\n      return getTableSizingMode(editor) === 'fixed' || getTableResponseWidth(editor) === false;\n    };\n    var isResponsiveForced = function (editor) {\n      return getTableSizingMode(editor) === 'responsive';\n    };\n    var getToolbar = function (editor) {\n      return editor.getParam('table_toolbar', defaultTableToolbar);\n    };\n    var useColumnGroup = function (editor) {\n      return editor.getParam('table_use_colgroups', false, 'boolean');\n    };\n    var getTableHeaderType = function (editor) {\n      var defaultValue = 'section';\n      var value = editor.getParam('table_header_type', defaultValue, 'string');\n      var validValues = [\n        'section',\n        'cells',\n        'sectionCells',\n        'auto'\n      ];\n      if (!contains(validValues, value)) {\n        return defaultValue;\n      } else {\n        return value;\n      }\n    };\n    var getColumnResizingBehaviour = function (editor) {\n      var validModes = [\n        'preservetable',\n        'resizetable'\n      ];\n      var givenMode = editor.getParam('table_column_resizing', defaultColumnResizingBehaviour, 'string');\n      return find(validModes, function (mode) {\n        return mode === givenMode;\n      }).getOr(defaultColumnResizingBehaviour);\n    };\n    var isPreserveTableColumnResizing = function (editor) {\n      return getColumnResizingBehaviour(editor) === 'preservetable';\n    };\n    var isResizeTableColumnResizing = function (editor) {\n      return getColumnResizingBehaviour(editor) === 'resizetable';\n    };\n    var getCloneElements = function (editor) {\n      var cloneElements = editor.getParam('table_clone_elements');\n      if (isString(cloneElements)) {\n        return Optional.some(cloneElements.split(/[ ,]/));\n      } else if (Array.isArray(cloneElements)) {\n        return Optional.some(cloneElements);\n      } else {\n        return Optional.none();\n      }\n    };\n    var hasObjectResizing = function (editor) {\n      var objectResizing = editor.getParam('object_resizing', true);\n      return isString(objectResizing) ? objectResizing === 'table' : objectResizing;\n    };\n\n    var get$9 = function (editor, table) {\n      if (isPercentagesForced(editor)) {\n        var width = getRawWidth$1(editor, table.dom).filter(isPercentage).getOrThunk(function () {\n          return getPercentTableWidth$1(table);\n        });\n        return TableSize.percentageSize(width, table);\n      } else if (isPixelsForced(editor)) {\n        return TableSize.pixelSize(get$5(table), table);\n      } else {\n        return TableSize.getTableSize(table);\n      }\n    };\n\n    var cleanupLegacyAttributes = function (element) {\n      remove(element, 'width');\n    };\n    var convertToPercentSize = function (table, tableSize) {\n      var newWidth = getPercentTableWidth(table);\n      redistribute$1(table, Optional.some(newWidth), Optional.none(), tableSize);\n      cleanupLegacyAttributes(table);\n    };\n    var convertToPixelSize = function (table, tableSize) {\n      var newWidth = getPixelTableWidth(table);\n      redistribute$1(table, Optional.some(newWidth), Optional.none(), tableSize);\n      cleanupLegacyAttributes(table);\n    };\n    var convertToNoneSize = function (table) {\n      remove$1(table, 'width');\n      var columns$1 = columns(table);\n      var rowElements = columns$1.length > 0 ? columns$1 : cells(table);\n      each(rowElements, function (cell) {\n        remove$1(cell, 'width');\n        cleanupLegacyAttributes(cell);\n      });\n      cleanupLegacyAttributes(table);\n    };\n\n    var enforcePercentage = function (editor, table) {\n      var tableSizing = get$9(editor, table);\n      convertToPercentSize(table, tableSizing);\n    };\n    var enforcePixels = function (editor, table) {\n      var tableSizing = get$9(editor, table);\n      convertToPixelSize(table, tableSizing);\n    };\n    var enforceNone = convertToNoneSize;\n    var syncPixels = function (table) {\n      var warehouse = Warehouse.fromTable(table);\n      if (!Warehouse.hasColumns(warehouse)) {\n        each(cells(table), function (cell) {\n          var computedWidth = get$3(cell, 'width');\n          set$1(cell, 'width', computedWidth);\n          remove(cell, 'width');\n        });\n      }\n    };\n\n    var createContainer = function () {\n      var container = SugarElement.fromTag('div');\n      setAll$1(container, {\n        position: 'static',\n        height: '0',\n        width: '0',\n        padding: '0',\n        margin: '0',\n        border: '0'\n      });\n      append(body(), container);\n      return container;\n    };\n    var get$a = function (editor, isResizable) {\n      return editor.inline ? ResizeWire.body(getBody$1(editor), createContainer(), isResizable) : ResizeWire.only(SugarElement.fromDom(editor.getDoc()), isResizable);\n    };\n    var remove$6 = function (editor, wire) {\n      if (editor.inline) {\n        remove$2(wire.parent());\n      }\n    };\n\n    var barResizerPrefix = 'bar-';\n    var isResizable = function (elm) {\n      return get$2(elm, 'data-mce-resize') !== 'false';\n    };\n    var getResizeHandler = function (editor) {\n      var selectionRng = Optional.none();\n      var resize = Optional.none();\n      var wire = Optional.none();\n      var startW;\n      var startRawW;\n      var isTable = function (elm) {\n        return elm.nodeName === 'TABLE';\n      };\n      var lazyResize = function () {\n        return resize;\n      };\n      var lazyWire = function () {\n        return wire.getOr(ResizeWire.only(SugarElement.fromDom(editor.getBody()), isResizable));\n      };\n      var lazySizing = function (table) {\n        return get$9(editor, table);\n      };\n      var lazyResizingBehaviour = function () {\n        return isPreserveTableColumnResizing(editor) ? preserveTable() : resizeTable();\n      };\n      var getNumColumns = function (table) {\n        return getGridSize(table).columns;\n      };\n      var afterCornerResize = function (table, origin, width) {\n        var isRightEdgeResize = endsWith(origin, 'e');\n        if (startRawW === '') {\n          enforcePercentage(editor, table);\n        }\n        if (width !== startW && startRawW !== '') {\n          set$1(table, 'width', startRawW);\n          var resizing = lazyResizingBehaviour();\n          var tableSize = lazySizing(table);\n          var col = isPreserveTableColumnResizing(editor) || isRightEdgeResize ? getNumColumns(table) - 1 : 0;\n          adjustWidth(table, width - startW, col, resizing, tableSize);\n        } else if (isPercentage(startRawW)) {\n          var percentW = parseFloat(startRawW.replace('%', ''));\n          var targetPercentW = width * percentW / startW;\n          set$1(table, 'width', targetPercentW + '%');\n        }\n        if (isPixel(startRawW)) {\n          syncPixels(table);\n        }\n      };\n      var destroy = function () {\n        resize.each(function (sz) {\n          sz.destroy();\n        });\n        wire.each(function (w) {\n          remove$6(editor, w);\n        });\n      };\n      editor.on('init', function () {\n        var rawWire = get$a(editor, isResizable);\n        wire = Optional.some(rawWire);\n        if (hasObjectResizing(editor) && hasTableResizeBars(editor)) {\n          var resizing = lazyResizingBehaviour();\n          var sz = TableResize.create(rawWire, resizing, lazySizing);\n          sz.on();\n          sz.events.startDrag.bind(function (_event) {\n            selectionRng = Optional.some(editor.selection.getRng());\n          });\n          sz.events.beforeResize.bind(function (event) {\n            var rawTable = event.table.dom;\n            fireObjectResizeStart(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable), barResizerPrefix + event.type);\n          });\n          sz.events.afterResize.bind(function (event) {\n            var table = event.table;\n            var rawTable = table.dom;\n            removeDataStyle(table);\n            selectionRng.each(function (rng) {\n              editor.selection.setRng(rng);\n              editor.focus();\n            });\n            fireObjectResized(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable), barResizerPrefix + event.type);\n            editor.undoManager.add();\n          });\n          resize = Optional.some(sz);\n        }\n      });\n      editor.on('ObjectResizeStart', function (e) {\n        var targetElm = e.target;\n        if (isTable(targetElm)) {\n          var table = SugarElement.fromDom(targetElm);\n          each(editor.dom.select('.mce-clonedresizable'), function (clone) {\n            editor.dom.addClass(clone, 'mce-' + getColumnResizingBehaviour(editor) + '-columns');\n          });\n          if (!isPixelSizing$1(table) && isPixelsForced(editor)) {\n            enforcePixels(editor, table);\n          } else if (!isPercentSizing$1(table) && isPercentagesForced(editor)) {\n            enforcePercentage(editor, table);\n          }\n          if (isNoneSizing$1(table) && startsWith(e.origin, barResizerPrefix)) {\n            enforcePercentage(editor, table);\n          }\n          startW = e.width;\n          startRawW = isResponsiveForced(editor) ? '' : getRawWidth$1(editor, targetElm).getOr('');\n        }\n      });\n      editor.on('ObjectResized', function (e) {\n        var targetElm = e.target;\n        if (isTable(targetElm)) {\n          var table = SugarElement.fromDom(targetElm);\n          var origin_1 = e.origin;\n          if (startsWith(origin_1, 'corner-')) {\n            afterCornerResize(table, origin_1, e.width);\n          }\n          removeDataStyle(table);\n          fireTableModified(editor, table.dom, styleModified);\n        }\n      });\n      editor.on('SwitchMode', function () {\n        lazyResize().each(function (resize) {\n          if (editor.mode.isReadOnly()) {\n            resize.hideBars();\n          } else {\n            resize.showBars();\n          }\n        });\n      });\n      return {\n        lazyResize: lazyResize,\n        lazyWire: lazyWire,\n        destroy: destroy\n      };\n    };\n\n    var point = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n\n    var scan = function (universe, element, direction) {\n      if (universe.property().isText(element) && universe.property().getText(element).trim().length === 0 || universe.property().isComment(element)) {\n        return direction(element).bind(function (elem) {\n          return scan(universe, elem, direction).orThunk(function () {\n            return Optional.some(elem);\n          });\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var toEnd = function (universe, element) {\n      if (universe.property().isText(element)) {\n        return universe.property().getText(element).length;\n      }\n      var children = universe.property().children(element);\n      return children.length;\n    };\n    var freefallRtl = function (universe, element) {\n      var candidate = scan(universe, element, universe.query().prevSibling).getOr(element);\n      if (universe.property().isText(candidate)) {\n        return point(candidate, toEnd(universe, candidate));\n      }\n      var children = universe.property().children(candidate);\n      return children.length > 0 ? freefallRtl(universe, children[children.length - 1]) : point(candidate, toEnd(universe, candidate));\n    };\n\n    var freefallRtl$1 = freefallRtl;\n\n    var universe$1 = DomUniverse();\n    var freefallRtl$2 = function (element) {\n      return freefallRtl$1(universe$1, element);\n    };\n\n    var halve = function (main, other) {\n      var colspan = getSpan(main, 'colspan');\n      if (colspan === 1) {\n        var width = getGenericWidth(main);\n        width.each(function (w) {\n          var newWidth = w.value / 2;\n          setGenericWidth(main, newWidth, w.unit);\n          setGenericWidth(other, newWidth, w.unit);\n        });\n      }\n    };\n\n    var setIfNot = function (element, property, value, ignore) {\n      if (value === ignore) {\n        remove(element, property);\n      } else {\n        set(element, property, value);\n      }\n    };\n    var insert = function (table, selector, element) {\n      last(children$2(table, selector)).fold(function () {\n        return prepend(table, element);\n      }, function (child) {\n        return after(child, element);\n      });\n    };\n    var generateSection = function (table, sectionName) {\n      var section = child$2(table, sectionName).getOrThunk(function () {\n        var newSection = SugarElement.fromTag(sectionName, owner(table).dom);\n        if (sectionName === 'thead') {\n          insert(table, 'caption,colgroup', newSection);\n        } else if (sectionName === 'colgroup') {\n          insert(table, 'caption', newSection);\n        } else {\n          append(table, newSection);\n        }\n        return newSection;\n      });\n      empty(section);\n      return section;\n    };\n    var render = function (table, grid) {\n      var newRows = [];\n      var newCells = [];\n      var syncRows = function (gridSection) {\n        return map(gridSection, function (row) {\n          if (row.isNew) {\n            newRows.push(row.element);\n          }\n          var tr = row.element;\n          empty(tr);\n          each(row.cells, function (cell) {\n            if (cell.isNew) {\n              newCells.push(cell.element);\n            }\n            setIfNot(cell.element, 'colspan', cell.colspan, 1);\n            setIfNot(cell.element, 'rowspan', cell.rowspan, 1);\n            append(tr, cell.element);\n          });\n          return tr;\n        });\n      };\n      var syncColGroup = function (gridSection) {\n        return bind(gridSection, function (colGroup) {\n          return map(colGroup.cells, function (col) {\n            setIfNot(col.element, 'span', col.colspan, 1);\n            return col.element;\n          });\n        });\n      };\n      var renderSection = function (gridSection, sectionName) {\n        var section = generateSection(table, sectionName);\n        var sync = sectionName === 'colgroup' ? syncColGroup : syncRows;\n        var sectionElems = sync(gridSection);\n        append$1(section, sectionElems);\n      };\n      var removeSection = function (sectionName) {\n        child$2(table, sectionName).each(remove$2);\n      };\n      var renderOrRemoveSection = function (gridSection, sectionName) {\n        if (gridSection.length > 0) {\n          renderSection(gridSection, sectionName);\n        } else {\n          removeSection(sectionName);\n        }\n      };\n      var headSection = [];\n      var bodySection = [];\n      var footSection = [];\n      var columnGroupsSection = [];\n      each(grid, function (row) {\n        switch (row.section) {\n        case 'thead':\n          headSection.push(row);\n          break;\n        case 'tbody':\n          bodySection.push(row);\n          break;\n        case 'tfoot':\n          footSection.push(row);\n          break;\n        case 'colgroup':\n          columnGroupsSection.push(row);\n          break;\n        }\n      });\n      renderOrRemoveSection(columnGroupsSection, 'colgroup');\n      renderOrRemoveSection(headSection, 'thead');\n      renderOrRemoveSection(bodySection, 'tbody');\n      renderOrRemoveSection(footSection, 'tfoot');\n      return {\n        newRows: newRows,\n        newCells: newCells\n      };\n    };\n    var copy$2 = function (grid) {\n      return map(grid, function (row) {\n        var tr = shallow(row.element);\n        each(row.cells, function (cell) {\n          var clonedCell = deep(cell.element);\n          setIfNot(clonedCell, 'colspan', cell.colspan, 1);\n          setIfNot(clonedCell, 'rowspan', cell.rowspan, 1);\n          append(tr, clonedCell);\n        });\n        return tr;\n      });\n    };\n\n    var getColumn = function (grid, index) {\n      return map(grid, function (row) {\n        return getCell(row, index);\n      });\n    };\n    var getRow = function (grid, index) {\n      return grid[index];\n    };\n    var findDiff = function (xs, comp) {\n      if (xs.length === 0) {\n        return 0;\n      }\n      var first = xs[0];\n      var index = findIndex(xs, function (x) {\n        return !comp(first.element, x.element);\n      });\n      return index.fold(function () {\n        return xs.length;\n      }, function (ind) {\n        return ind;\n      });\n    };\n    var subgrid = function (grid, row, column, comparator) {\n      var restOfRow = getRow(grid, row).cells.slice(column);\n      var endColIndex = findDiff(restOfRow, comparator);\n      var restOfColumn = getColumn(grid, column).slice(row);\n      var endRowIndex = findDiff(restOfColumn, comparator);\n      return {\n        colspan: endColIndex,\n        rowspan: endRowIndex\n      };\n    };\n\n    var toDetails = function (grid, comparator) {\n      var seen = map(grid, function (row) {\n        return map(row.cells, never);\n      });\n      var updateSeen = function (rowIndex, columnIndex, rowspan, colspan) {\n        for (var row = rowIndex; row < rowIndex + rowspan; row++) {\n          for (var column = columnIndex; column < columnIndex + colspan; column++) {\n            seen[row][column] = true;\n          }\n        }\n      };\n      return map(grid, function (row, rowIndex) {\n        var details = bind(row.cells, function (cell, columnIndex) {\n          if (seen[rowIndex][columnIndex] === false) {\n            var result = subgrid(grid, rowIndex, columnIndex, comparator);\n            updateSeen(rowIndex, columnIndex, result.rowspan, result.colspan);\n            return [detailnew(cell.element, result.rowspan, result.colspan, cell.isNew)];\n          } else {\n            return [];\n          }\n        });\n        return rowdetails(details, row.section);\n      });\n    };\n    var toGrid = function (warehouse, generators, isNew) {\n      var grid = [];\n      if (Warehouse.hasColumns(warehouse)) {\n        var groupElementNew = map(Warehouse.justColumns(warehouse), function (column) {\n          return elementnew(column.element, isNew, false);\n        });\n        grid.push(rowcells(groupElementNew, 'colgroup'));\n      }\n      for (var rowIndex = 0; rowIndex < warehouse.grid.rows; rowIndex++) {\n        var rowCells = [];\n        for (var columnIndex = 0; columnIndex < warehouse.grid.columns; columnIndex++) {\n          var element = Warehouse.getAt(warehouse, rowIndex, columnIndex).map(function (item) {\n            return elementnew(item.element, isNew, item.isLocked);\n          }).getOrThunk(function () {\n            return elementnew(generators.gap(), true, false);\n          });\n          rowCells.push(element);\n        }\n        var row = rowcells(rowCells, warehouse.all[rowIndex].section);\n        grid.push(row);\n      }\n      return grid;\n    };\n\n    var fromWarehouse = function (warehouse, generators) {\n      return toGrid(warehouse, generators, false);\n    };\n    var deriveRows = function (rendered, generators) {\n      var findRow = function (details) {\n        var rowOfCells = findMap(details, function (detail) {\n          return parent(detail.element).map(function (row) {\n            var isNew = parent(row).isNone();\n            return elementnew(row, isNew, false);\n          });\n        });\n        return rowOfCells.getOrThunk(function () {\n          return elementnew(generators.row(), true, false);\n        });\n      };\n      return map(rendered, function (details) {\n        var row = findRow(details.details);\n        return rowdatanew(row.element, details.details, details.section, row.isNew);\n      });\n    };\n    var toDetailList = function (grid, generators) {\n      var rendered = toDetails(grid, eq$1);\n      return deriveRows(rendered, generators);\n    };\n    var findInWarehouse = function (warehouse, element) {\n      return findMap(warehouse.all, function (r) {\n        return find(r.cells, function (e) {\n          return eq$1(element, e.element);\n        });\n      });\n    };\n    var extractCells = function (warehouse, target, predicate) {\n      var details = map(target.selection, function (cell$1) {\n        return cell(cell$1).bind(function (lc) {\n          return findInWarehouse(warehouse, lc);\n        }).filter(predicate);\n      });\n      var cells = cat(details);\n      return someIf(cells.length > 0, cells);\n    };\n    var run = function (operation, extract, adjustment, postAction, genWrappers) {\n      return function (wire, table, target, generators, sizing, resizeBehaviour) {\n        var warehouse = Warehouse.fromTable(table);\n        var output = extract(warehouse, target).map(function (info) {\n          var model = fromWarehouse(warehouse, generators);\n          var result = operation(model, info, eq$1, genWrappers(generators));\n          var lockedColumns = getLockedColumnsFromGrid(result.grid);\n          var grid = toDetailList(result.grid, generators);\n          return {\n            info: info,\n            grid: grid,\n            cursor: result.cursor,\n            lockedColumns: lockedColumns\n          };\n        });\n        return output.bind(function (out) {\n          var newElements = render(table, out.grid);\n          var tableSizing = Optional.from(sizing).getOrThunk(function () {\n            return TableSize.getTableSize(table);\n          });\n          var resizing = Optional.from(resizeBehaviour).getOrThunk(preserveTable);\n          adjustment(table, out.grid, out.info, tableSizing, resizing);\n          postAction(table);\n          refresh(wire, table);\n          remove(table, LOCKED_COL_ATTR);\n          if (out.lockedColumns.length > 0) {\n            set(table, LOCKED_COL_ATTR, out.lockedColumns.join(','));\n          }\n          return Optional.some({\n            cursor: out.cursor,\n            newRows: newElements.newRows,\n            newCells: newElements.newCells\n          });\n        });\n      };\n    };\n    var onCell = function (warehouse, target) {\n      return cell(target.element).bind(function (cell) {\n        return findInWarehouse(warehouse, cell);\n      });\n    };\n    var onPaste = function (warehouse, target) {\n      return cell(target.element).bind(function (cell) {\n        return findInWarehouse(warehouse, cell).map(function (details) {\n          var value = __assign(__assign({}, details), {\n            generators: target.generators,\n            clipboard: target.clipboard\n          });\n          return value;\n        });\n      });\n    };\n    var onPasteByEditor = function (warehouse, target) {\n      return extractCells(warehouse, target, always).map(function (cells) {\n        return {\n          cells: cells,\n          generators: target.generators,\n          clipboard: target.clipboard\n        };\n      });\n    };\n    var onMergable = function (_warehouse, target) {\n      return target.mergable;\n    };\n    var onUnmergable = function (_warehouse, target) {\n      return target.unmergable;\n    };\n    var onCells = function (warehouse, target) {\n      return extractCells(warehouse, target, always);\n    };\n    var onUnlockedCell = function (warehouse, target) {\n      return onCell(warehouse, target).filter(function (detail) {\n        return !detail.isLocked;\n      });\n    };\n    var onUnlockedCells = function (warehouse, target) {\n      return extractCells(warehouse, target, function (detail) {\n        return !detail.isLocked;\n      });\n    };\n    var isUnlockedTableCell = function (warehouse, cell) {\n      return findInWarehouse(warehouse, cell).exists(function (detail) {\n        return !detail.isLocked;\n      });\n    };\n    var allUnlocked = function (warehouse, cells) {\n      return forall(cells, function (cell) {\n        return isUnlockedTableCell(warehouse, cell);\n      });\n    };\n    var onUnlockedMergable = function (warehouse, target) {\n      return onMergable(warehouse, target).filter(function (mergeable) {\n        return allUnlocked(warehouse, mergeable.cells);\n      });\n    };\n    var onUnlockedUnmergable = function (warehouse, target) {\n      return onUnmergable(warehouse, target).filter(function (cells) {\n        return allUnlocked(warehouse, cells);\n      });\n    };\n\n    var merge = function (grid, bounds, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      if (rows.length === 0) {\n        return grid;\n      }\n      for (var i = bounds.startRow; i <= bounds.finishRow; i++) {\n        for (var j = bounds.startCol; j <= bounds.finishCol; j++) {\n          var row = rows[i];\n          var isLocked = getCell(row, j).isLocked;\n          mutateCell(row, j, elementnew(substitution(), false, isLocked));\n        }\n      }\n      return grid;\n    };\n    var unmerge = function (grid, target, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      var first = true;\n      for (var i = 0; i < rows.length; i++) {\n        for (var j = 0; j < cellLength(rows[0]); j++) {\n          var row = rows[i];\n          var currentCell = getCell(row, j);\n          var currentCellElm = currentCell.element;\n          var isToReplace = comparator(currentCellElm, target);\n          if (isToReplace === true && first === false) {\n            mutateCell(row, j, elementnew(substitution(), true, currentCell.isLocked));\n          } else if (isToReplace === true) {\n            first = false;\n          }\n        }\n      }\n      return grid;\n    };\n    var uniqueCells = function (row, comparator) {\n      return foldl(row, function (rest, cell) {\n        return exists(rest, function (currentCell) {\n          return comparator(currentCell.element, cell.element);\n        }) ? rest : rest.concat([cell]);\n      }, []);\n    };\n    var splitCols = function (grid, index, comparator, substitution) {\n      if (index > 0 && index < grid[0].cells.length) {\n        each(grid, function (row) {\n          var prevCell = row.cells[index - 1];\n          var current = row.cells[index];\n          var isToReplace = comparator(current.element, prevCell.element);\n          if (isToReplace) {\n            mutateCell(row, index, elementnew(substitution(), true, current.isLocked));\n          }\n        });\n      }\n      return grid;\n    };\n    var splitRows = function (grid, index, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      if (index > 0 && index < rows.length) {\n        var rowPrevCells = rows[index - 1].cells;\n        var cells = uniqueCells(rowPrevCells, comparator);\n        each(cells, function (cell) {\n          var replacement = Optional.none();\n          for (var i = index; i < rows.length; i++) {\n            var _loop_1 = function (j) {\n              var row = rows[i];\n              var current = getCell(row, j);\n              var isToReplace = comparator(current.element, cell.element);\n              if (isToReplace) {\n                if (replacement.isNone()) {\n                  replacement = Optional.some(substitution());\n                }\n                replacement.each(function (sub) {\n                  mutateCell(row, j, elementnew(sub, true, current.isLocked));\n                });\n              }\n            };\n            for (var j = 0; j < cellLength(rows[0]); j++) {\n              _loop_1(j);\n            }\n          }\n        });\n      }\n      return grid;\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (_opt) {\n        return value(o);\n      };\n      var orThunk = function (_f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (_f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (_f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var measure = function (startAddress, gridA, gridB) {\n      if (startAddress.row >= gridA.length || startAddress.column > cellLength(gridA[0])) {\n        return Result.error('invalid start address out of table bounds, row: ' + startAddress.row + ', column: ' + startAddress.column);\n      }\n      var rowRemainder = gridA.slice(startAddress.row);\n      var colRemainder = rowRemainder[0].cells.slice(startAddress.column);\n      var colRequired = cellLength(gridB[0]);\n      var rowRequired = gridB.length;\n      return Result.value({\n        rowDelta: rowRemainder.length - rowRequired,\n        colDelta: colRemainder.length - colRequired\n      });\n    };\n    var measureWidth = function (gridA, gridB) {\n      var colLengthA = cellLength(gridA[0]);\n      var colLengthB = cellLength(gridB[0]);\n      return {\n        rowDelta: 0,\n        colDelta: colLengthA - colLengthB\n      };\n    };\n    var measureHeight = function (gridA, gridB) {\n      var rowLengthA = gridA.length;\n      var rowLengthB = gridB.length;\n      return {\n        rowDelta: rowLengthA - rowLengthB,\n        colDelta: 0\n      };\n    };\n    var generateElements = function (amount, row, generators, isLocked) {\n      var generator = row.section === 'colgroup' ? generators.col : generators.cell;\n      return range(amount, function (idx) {\n        return elementnew(generator(), true, isLocked(idx));\n      });\n    };\n    var rowFill = function (grid, amount, generators, lockedColumns) {\n      return grid.concat(range(amount, function () {\n        var row = grid[grid.length - 1];\n        var elements = generateElements(row.cells.length, row, generators, function (idx) {\n          return has(lockedColumns, idx.toString());\n        });\n        return setCells(row, elements);\n      }));\n    };\n    var colFill = function (grid, amount, generators, startIndex) {\n      return map(grid, function (row) {\n        var newChildren = generateElements(amount, row, generators, never);\n        return addCells(row, startIndex, newChildren);\n      });\n    };\n    var lockedColFill = function (grid, generators, lockedColumns) {\n      return map(grid, function (row) {\n        return foldl(lockedColumns, function (acc, colNum) {\n          var newChild = generateElements(1, row, generators, always)[0];\n          return addCell(acc, colNum, newChild);\n        }, row);\n      });\n    };\n    var tailor = function (gridA, delta, generators) {\n      var fillCols = delta.colDelta < 0 ? colFill : identity;\n      var fillRows = delta.rowDelta < 0 ? rowFill : identity;\n      var lockedColumns = getLockedColumnsFromGrid(gridA);\n      var gridWidth = cellLength(gridA[0]);\n      var isLastColLocked = exists(lockedColumns, function (locked) {\n        return locked === gridWidth - 1;\n      });\n      var modifiedCols = fillCols(gridA, Math.abs(delta.colDelta), generators, isLastColLocked ? gridWidth - 1 : gridWidth);\n      var newLockedColumns = getLockedColumnsFromGrid(modifiedCols);\n      return fillRows(modifiedCols, Math.abs(delta.rowDelta), generators, mapToObject(newLockedColumns, always));\n    };\n\n    var isSpanning = function (grid, row, col, comparator) {\n      var candidate = getCell(grid[row], col);\n      var matching = curry(comparator, candidate.element);\n      var currentRow = grid[row];\n      return grid.length > 1 && cellLength(currentRow) > 1 && (col > 0 && matching(getCellElement(currentRow, col - 1)) || col < currentRow.cells.length - 1 && matching(getCellElement(currentRow, col + 1)) || row > 0 && matching(getCellElement(grid[row - 1], col)) || row < grid.length - 1 && matching(getCellElement(grid[row + 1], col)));\n    };\n    var mergeTables = function (startAddress, gridA, gridB, generator, comparator, lockedColumns) {\n      var startRow = startAddress.row;\n      var startCol = startAddress.column;\n      var mergeHeight = gridB.length;\n      var mergeWidth = cellLength(gridB[0]);\n      var endRow = startRow + mergeHeight;\n      var endCol = startCol + mergeWidth + lockedColumns.length;\n      var lockedColumnObj = mapToObject(lockedColumns, always);\n      for (var r = startRow; r < endRow; r++) {\n        var skippedCol = 0;\n        for (var c = startCol; c < endCol; c++) {\n          if (lockedColumnObj[c]) {\n            skippedCol++;\n            continue;\n          }\n          if (isSpanning(gridA, r, c, comparator)) {\n            unmerge(gridA, getCellElement(gridA[r], c), comparator, generator.cell);\n          }\n          var gridBColIndex = c - startCol - skippedCol;\n          var newCell = getCell(gridB[r - startRow], gridBColIndex);\n          var newCellElm = newCell.element;\n          var replacement = generator.replace(newCellElm);\n          mutateCell(gridA[r], c, elementnew(replacement, true, newCell.isLocked));\n        }\n      }\n      return gridA;\n    };\n    var getValidStartAddress = function (currentStartAddress, grid, lockedColumns) {\n      var gridColLength = cellLength(grid[0]);\n      var possibleColAddresses = range(gridColLength - currentStartAddress.column, function (num) {\n        return num + currentStartAddress.column;\n      });\n      var validColAddress = find(possibleColAddresses, function (num) {\n        return forall(lockedColumns, function (col) {\n          return col !== num;\n        });\n      }).getOr(gridColLength - 1);\n      return __assign(__assign({}, currentStartAddress), { column: validColAddress });\n    };\n    var getLockedColumnsWithinBounds = function (startAddress, grid, lockedColumns) {\n      return filter(lockedColumns, function (colNum) {\n        return colNum >= startAddress.column && colNum <= cellLength(grid[0]) + startAddress.column;\n      });\n    };\n    var merge$1 = function (startAddress, gridA, gridB, generator, comparator) {\n      var lockedColumns = getLockedColumnsFromGrid(gridA);\n      var validStartAddress = getValidStartAddress(startAddress, gridA, lockedColumns);\n      var lockedColumnsWithinBounds = getLockedColumnsWithinBounds(validStartAddress, gridB, lockedColumns);\n      var result = measure(validStartAddress, gridA, gridB);\n      return result.map(function (diff) {\n        var delta = __assign(__assign({}, diff), { colDelta: diff.colDelta - lockedColumnsWithinBounds.length });\n        var fittedGrid = tailor(gridA, delta, generator);\n        var newLockedColumns = getLockedColumnsFromGrid(fittedGrid);\n        var newLockedColumnsWithinBounds = getLockedColumnsWithinBounds(validStartAddress, gridB, newLockedColumns);\n        return mergeTables(validStartAddress, fittedGrid, gridB, generator, comparator, newLockedColumnsWithinBounds);\n      });\n    };\n    var insertCols = function (index, gridA, gridB, generator, comparator) {\n      splitCols(gridA, index, comparator, generator.cell);\n      var delta = measureHeight(gridB, gridA);\n      var fittedNewGrid = tailor(gridB, delta, generator);\n      var secondDelta = measureHeight(gridA, fittedNewGrid);\n      var fittedOldGrid = tailor(gridA, secondDelta, generator);\n      return map(fittedOldGrid, function (gridRow, i) {\n        return addCells(gridRow, index, fittedNewGrid[i].cells);\n      });\n    };\n    var insertRows = function (index, gridA, gridB, generator, comparator) {\n      splitRows(gridA, index, comparator, generator.cell);\n      var locked = getLockedColumnsFromGrid(gridA);\n      var diff = measureWidth(gridA, gridB);\n      var delta = __assign(__assign({}, diff), { colDelta: diff.colDelta - locked.length });\n      var fittedOldGrid = tailor(gridA, delta, generator);\n      var _a = extractGridDetails(fittedOldGrid), oldCols = _a.cols, oldRows = _a.rows;\n      var newLocked = getLockedColumnsFromGrid(fittedOldGrid);\n      var secondDiff = measureWidth(gridB, gridA);\n      var secondDelta = __assign(__assign({}, secondDiff), { colDelta: secondDiff.colDelta + newLocked.length });\n      var fittedGridB = lockedColFill(gridB, generator, newLocked);\n      var fittedNewGrid = tailor(fittedGridB, secondDelta, generator);\n      return oldCols.concat(oldRows.slice(0, index)).concat(fittedNewGrid).concat(oldRows.slice(index, oldRows.length));\n    };\n\n    var insertRowAt = function (grid, index, example, comparator, substitution) {\n      var _a = extractGridDetails(grid), rows = _a.rows, cols = _a.cols;\n      var before = rows.slice(0, index);\n      var after = rows.slice(index);\n      var between = mapCells(rows[example], function (ex, c) {\n        var withinSpan = index > 0 && index < rows.length && comparator(getCellElement(rows[index - 1], c), getCellElement(rows[index], c));\n        var ret = withinSpan ? getCell(rows[index], c) : elementnew(substitution(ex.element, comparator), true, ex.isLocked);\n        return ret;\n      });\n      return cols.concat(before).concat([between]).concat(after);\n    };\n    var getElementFor = function (row, column, section, withinSpan, example, comparator, substitution) {\n      if (section === 'colgroup' || !withinSpan) {\n        var cell = getCell(row, example);\n        return elementnew(substitution(cell.element, comparator), true, false);\n      } else {\n        return getCell(row, column);\n      }\n    };\n    var insertColumnAt = function (grid, index, example, comparator, substitution) {\n      return map(grid, function (row) {\n        var withinSpan = index > 0 && index < cellLength(row) && comparator(getCellElement(row, index - 1), getCellElement(row, index));\n        var sub = getElementFor(row, index, row.section, withinSpan, example, comparator, substitution);\n        return addCell(row, index, sub);\n      });\n    };\n    var deleteColumnsAt = function (grid, columns) {\n      return bind(grid, function (row) {\n        var existingCells = row.cells;\n        var cells = foldr(columns, function (acc, column) {\n          return column >= 0 && column < acc.length ? acc.slice(0, column).concat(acc.slice(column + 1)) : acc;\n        }, existingCells);\n        return cells.length > 0 ? [rowcells(cells, row.section)] : [];\n      });\n    };\n    var deleteRowsAt = function (grid, start, finish) {\n      var _a = extractGridDetails(grid), rows = _a.rows, cols = _a.cols;\n      return cols.concat(rows.slice(0, start)).concat(rows.slice(finish + 1));\n    };\n\n    var replaceIn = function (grid, targets, comparator, substitution) {\n      var isTarget = function (cell) {\n        return exists(targets, function (target) {\n          return comparator(cell.element, target.element);\n        });\n      };\n      return map(grid, function (row) {\n        return mapCells(row, function (cell) {\n          return isTarget(cell) ? elementnew(substitution(cell.element, comparator), true, cell.isLocked) : cell;\n        });\n      });\n    };\n    var notStartRow = function (grid, rowIndex, colIndex, comparator) {\n      return getCellElement(grid[rowIndex], colIndex) !== undefined && (rowIndex > 0 && comparator(getCellElement(grid[rowIndex - 1], colIndex), getCellElement(grid[rowIndex], colIndex)));\n    };\n    var notStartColumn = function (row, index, comparator) {\n      return index > 0 && comparator(getCellElement(row, index - 1), getCellElement(row, index));\n    };\n    var replaceColumn = function (grid, index, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      var targets = bind(rows, function (row, i) {\n        var alreadyAdded = notStartRow(grid, i, index, comparator) || notStartColumn(row, index, comparator);\n        return alreadyAdded ? [] : [getCell(row, index)];\n      });\n      return replaceIn(grid, targets, comparator, substitution);\n    };\n    var replaceRow = function (grid, index, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      var targetRow = rows[index];\n      var targets = bind(targetRow.cells, function (item, i) {\n        var alreadyAdded = notStartRow(rows, index, i, comparator) || notStartColumn(targetRow, i, comparator);\n        return alreadyAdded ? [] : [item];\n      });\n      return replaceIn(grid, targets, comparator, substitution);\n    };\n\n    var uniqueColumns = function (details) {\n      var uniqueCheck = function (rest, detail) {\n        var columnExists = exists(rest, function (currentDetail) {\n          return currentDetail.column === detail.column;\n        });\n        return columnExists ? rest : rest.concat([detail]);\n      };\n      return foldl(details, uniqueCheck, []).sort(function (detailA, detailB) {\n        return detailA.column - detailB.column;\n      });\n    };\n\n    var elementToData = function (element) {\n      var colspan = getAttrValue(element, 'colspan', 1);\n      var rowspan = getAttrValue(element, 'rowspan', 1);\n      return {\n        element: element,\n        colspan: colspan,\n        rowspan: rowspan\n      };\n    };\n    var modification = function (generators, toData) {\n      if (toData === void 0) {\n        toData = elementToData;\n      }\n      var position = Cell(Optional.none());\n      var nu = function (data) {\n        switch (name(data.element)) {\n        case 'col':\n          return generators.col(data);\n        default:\n          return generators.cell(data);\n        }\n      };\n      var nuFrom = function (element) {\n        var data = toData(element);\n        return nu(data);\n      };\n      var add = function (element) {\n        var replacement = nuFrom(element);\n        if (position.get().isNone()) {\n          position.set(Optional.some(replacement));\n        }\n        recent = Optional.some({\n          item: element,\n          replacement: replacement\n        });\n        return replacement;\n      };\n      var recent = Optional.none();\n      var getOrInit = function (element, comparator) {\n        return recent.fold(function () {\n          return add(element);\n        }, function (p) {\n          return comparator(element, p.item) ? p.replacement : add(element);\n        });\n      };\n      return {\n        getOrInit: getOrInit,\n        cursor: position.get\n      };\n    };\n    var transform$1 = function (scope, tag) {\n      return function (generators) {\n        var position = Cell(Optional.none());\n        var list = [];\n        var find$1 = function (element, comparator) {\n          return find(list, function (x) {\n            return comparator(x.item, element);\n          });\n        };\n        var makeNew = function (element) {\n          var attrs = { scope: scope };\n          var cell = generators.replace(element, tag, attrs);\n          list.push({\n            item: element,\n            sub: cell\n          });\n          if (position.get().isNone()) {\n            position.set(Optional.some(cell));\n          }\n          return cell;\n        };\n        var replaceOrInit = function (element, comparator) {\n          if (name(element) === 'col') {\n            return element;\n          } else {\n            return find$1(element, comparator).fold(function () {\n              return makeNew(element);\n            }, function (p) {\n              return comparator(element, p.item) ? p.sub : makeNew(element);\n            });\n          }\n        };\n        return {\n          replaceOrInit: replaceOrInit,\n          cursor: position.get\n        };\n      };\n    };\n    var getScopeAttribute = function (cell) {\n      return getOpt(cell, 'scope').map(function (attribute) {\n        return attribute.substr(0, 3);\n      });\n    };\n    var merging = function (generators) {\n      var position = Cell(Optional.none());\n      var unmerge = function (cell) {\n        if (position.get().isNone()) {\n          position.set(Optional.some(cell));\n        }\n        var scope = getScopeAttribute(cell);\n        scope.each(function (attribute) {\n          return set(cell, 'scope', attribute);\n        });\n        return function () {\n          var raw = generators.cell({\n            element: cell,\n            colspan: 1,\n            rowspan: 1\n          });\n          remove$1(raw, 'width');\n          remove$1(cell, 'width');\n          scope.each(function (attribute) {\n            return set(raw, 'scope', attribute);\n          });\n          return raw;\n        };\n      };\n      var merge = function (cells) {\n        var getScopeProperty = function () {\n          var stringAttributes = cat(map(cells, getScopeAttribute));\n          if (stringAttributes.length === 0) {\n            return Optional.none();\n          } else {\n            var baseScope_1 = stringAttributes[0];\n            var scopes_1 = [\n              'row',\n              'col'\n            ];\n            var isMixed = exists(stringAttributes, function (attribute) {\n              return attribute !== baseScope_1 && contains(scopes_1, attribute);\n            });\n            return isMixed ? Optional.none() : Optional.from(baseScope_1);\n          }\n        };\n        remove$1(cells[0], 'width');\n        getScopeProperty().fold(function () {\n          return remove(cells[0], 'scope');\n        }, function (attribute) {\n          return set(cells[0], 'scope', attribute + 'group');\n        });\n        return constant(cells[0]);\n      };\n      return {\n        unmerge: unmerge,\n        merge: merge,\n        cursor: position.get\n      };\n    };\n    var Generators = {\n      modification: modification,\n      transform: transform$1,\n      merging: merging\n    };\n\n    var blockList = [\n      'body',\n      'p',\n      'div',\n      'article',\n      'aside',\n      'figcaption',\n      'figure',\n      'footer',\n      'header',\n      'nav',\n      'section',\n      'ol',\n      'ul',\n      'table',\n      'thead',\n      'tfoot',\n      'tbody',\n      'caption',\n      'tr',\n      'td',\n      'th',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'pre',\n      'address'\n    ];\n    var isList = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains([\n        'ol',\n        'ul'\n      ], tagName);\n    };\n    var isBlock = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains(blockList, tagName);\n    };\n    var isEmptyTag = function (universe, item) {\n      return contains([\n        'br',\n        'img',\n        'hr',\n        'input'\n      ], universe.property().name(item));\n    };\n\n    var universe$2 = DomUniverse();\n    var isBlock$1 = function (element) {\n      return isBlock(universe$2, element);\n    };\n    var isList$1 = function (element) {\n      return isList(universe$2, element);\n    };\n    var isEmptyTag$1 = function (element) {\n      return isEmptyTag(universe$2, element);\n    };\n\n    var merge$2 = function (cells) {\n      var isBr = function (el) {\n        return name(el) === 'br';\n      };\n      var advancedBr = function (children) {\n        return forall(children, function (c) {\n          return isBr(c) || isText(c) && get$4(c).trim().length === 0;\n        });\n      };\n      var isListItem = function (el) {\n        return name(el) === 'li' || ancestor(el, isList$1).isSome();\n      };\n      var siblingIsBlock = function (el) {\n        return nextSibling(el).map(function (rightSibling) {\n          if (isBlock$1(rightSibling)) {\n            return true;\n          }\n          if (isEmptyTag$1(rightSibling)) {\n            return name(rightSibling) === 'img' ? false : true;\n          }\n          return false;\n        }).getOr(false);\n      };\n      var markCell = function (cell) {\n        return last$1(cell).bind(function (rightEdge) {\n          var rightSiblingIsBlock = siblingIsBlock(rightEdge);\n          return parent(rightEdge).map(function (parent) {\n            return rightSiblingIsBlock === true || isListItem(parent) || isBr(rightEdge) || isBlock$1(parent) && !eq$1(cell, parent) ? [] : [SugarElement.fromTag('br')];\n          });\n        }).getOr([]);\n      };\n      var markContent = function () {\n        var content = bind(cells, function (cell) {\n          var children$1 = children(cell);\n          return advancedBr(children$1) ? [] : children$1.concat(markCell(cell));\n        });\n        return content.length === 0 ? [SugarElement.fromTag('br')] : content;\n      };\n      var contents = markContent();\n      empty(cells[0]);\n      append$1(cells[0], contents);\n    };\n\n    var prune = function (table) {\n      var cells$1 = cells(table);\n      if (cells$1.length === 0) {\n        remove$2(table);\n      }\n    };\n    var outcome = function (grid, cursor) {\n      return {\n        grid: grid,\n        cursor: cursor\n      };\n    };\n    var elementFromGrid = function (grid, row, column) {\n      var rows = extractGridDetails(grid).rows;\n      return findIn(rows, row, column).orThunk(function () {\n        return findIn(rows, 0, 0);\n      });\n    };\n    var findIn = function (grid, row, column) {\n      return Optional.from(grid[row]).bind(function (r) {\n        return Optional.from(r.cells[column]).bind(function (c) {\n          return Optional.from(c.element);\n        });\n      });\n    };\n    var bundle = function (grid, row, column) {\n      var rows = extractGridDetails(grid).rows;\n      return outcome(grid, findIn(rows, row, column));\n    };\n    var uniqueRows = function (details) {\n      var rowCompilation = function (rest, detail) {\n        var rowExists = exists(rest, function (currentDetail) {\n          return currentDetail.row === detail.row;\n        });\n        return rowExists ? rest : rest.concat([detail]);\n      };\n      return foldl(details, rowCompilation, []).sort(function (detailA, detailB) {\n        return detailA.row - detailB.row;\n      });\n    };\n    var opInsertRowsBefore = function (grid, details, comparator, genWrappers) {\n      var targetIndex = details[0].row;\n      var rows = uniqueRows(details);\n      var newGrid = foldr(rows, function (acc, row) {\n        var newG = insertRowAt(acc.grid, targetIndex, row.row + acc.delta, comparator, genWrappers.getOrInit);\n        return {\n          grid: newG,\n          delta: acc.delta + 1\n        };\n      }, {\n        grid: grid,\n        delta: 0\n      }).grid;\n      return bundle(newGrid, targetIndex, details[0].column);\n    };\n    var opInsertRowsAfter = function (grid, details, comparator, genWrappers) {\n      var rows = uniqueRows(details);\n      var target = rows[rows.length - 1];\n      var targetIndex = target.row + target.rowspan;\n      var newGrid = foldr(rows, function (newG, row) {\n        return insertRowAt(newG, targetIndex, row.row, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, targetIndex, details[0].column);\n    };\n    var opInsertColumnsBefore = function (grid, extractDetail, comparator, genWrappers) {\n      var details = extractDetail.details;\n      var columns = uniqueColumns(details);\n      var targetIndex = columns[0].column;\n      var newGrid = foldr(columns, function (acc, col) {\n        var newG = insertColumnAt(acc.grid, targetIndex, col.column + acc.delta, comparator, genWrappers.getOrInit);\n        return {\n          grid: newG,\n          delta: acc.delta + 1\n        };\n      }, {\n        grid: grid,\n        delta: 0\n      }).grid;\n      return bundle(newGrid, details[0].row, targetIndex);\n    };\n    var opInsertColumnsAfter = function (grid, extractDetail, comparator, genWrappers) {\n      var details = extractDetail.details;\n      var target = details[details.length - 1];\n      var targetIndex = target.column + target.colspan;\n      var columns = uniqueColumns(details);\n      var newGrid = foldr(columns, function (newG, col) {\n        return insertColumnAt(newG, targetIndex, col.column, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, details[0].row, targetIndex);\n    };\n    var opMakeRowHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = replaceRow(grid, detail.row, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row, detail.column);\n    };\n    var opMakeRowsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var rows = uniqueRows(details);\n      var replacer = function (currentGrid, row) {\n        return replaceRow(currentGrid, row.row, comparator, genWrappers.replaceOrInit);\n      };\n      var newGrid = foldl(rows, replacer, initialGrid);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opMakeColumnHeader = function (initialGrid, detail, comparator, genWrappers) {\n      var newGrid = replaceColumn(initialGrid, detail.column, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row, detail.column);\n    };\n    var opMakeColumnsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var columns = uniqueColumns(details);\n      var replacer = function (currentGrid, column) {\n        return replaceColumn(currentGrid, column.column, comparator, genWrappers.replaceOrInit);\n      };\n      var newGrid = foldl(columns, replacer, initialGrid);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opUnmakeRowHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = replaceRow(grid, detail.row, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row, detail.column);\n    };\n    var opUnmakeRowsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var rows = uniqueRows(details);\n      var replacer = function (currentGrid, row) {\n        return replaceRow(currentGrid, row.row, comparator, genWrappers.replaceOrInit);\n      };\n      var newGrid = foldl(rows, replacer, initialGrid);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opUnmakeColumnHeader = function (initialGrid, detail, comparator, genWrappers) {\n      var newGrid = replaceColumn(initialGrid, detail.column, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row, detail.column);\n    };\n    var opUnmakeColumnsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var columns = uniqueColumns(details);\n      var replacer = function (currentGrid, column) {\n        return replaceColumn(currentGrid, column.column, comparator, genWrappers.replaceOrInit);\n      };\n      var newGrid = foldl(columns, replacer, initialGrid);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opEraseColumns = function (grid, extractDetail, _comparator, _genWrappers) {\n      var columns = uniqueColumns(extractDetail.details);\n      var newGrid = deleteColumnsAt(grid, map(columns, function (column) {\n        return column.column;\n      }));\n      var cursor = elementFromGrid(newGrid, columns[0].row, columns[0].column);\n      return outcome(newGrid, cursor);\n    };\n    var opEraseRows = function (grid, details, _comparator, _genWrappers) {\n      var rows = uniqueRows(details);\n      var newGrid = deleteRowsAt(grid, rows[0].row, rows[rows.length - 1].row);\n      var cursor = elementFromGrid(newGrid, details[0].row, details[0].column);\n      return outcome(newGrid, cursor);\n    };\n    var opMergeCells = function (grid, mergable, comparator, genWrappers) {\n      var cells = mergable.cells;\n      merge$2(cells);\n      var newGrid = merge(grid, mergable.bounds, comparator, genWrappers.merge(cells));\n      return outcome(newGrid, Optional.from(cells[0]));\n    };\n    var opUnmergeCells = function (grid, unmergable, comparator, genWrappers) {\n      var unmerge$1 = function (b, cell) {\n        return unmerge(b, cell, comparator, genWrappers.unmerge(cell));\n      };\n      var newGrid = foldr(unmergable, unmerge$1, grid);\n      return outcome(newGrid, Optional.from(unmergable[0]));\n    };\n    var opPasteCells = function (grid, pasteDetails, comparator, _genWrappers) {\n      var gridify = function (table, generators) {\n        var wh = Warehouse.fromTable(table);\n        return toGrid(wh, generators, true);\n      };\n      var gridB = gridify(pasteDetails.clipboard, pasteDetails.generators);\n      var startAddress = address(pasteDetails.row, pasteDetails.column);\n      var mergedGrid = merge$1(startAddress, grid, gridB, pasteDetails.generators, comparator);\n      return mergedGrid.fold(function () {\n        return outcome(grid, Optional.some(pasteDetails.element));\n      }, function (newGrid) {\n        var cursor = elementFromGrid(newGrid, pasteDetails.row, pasteDetails.column);\n        return outcome(newGrid, cursor);\n      });\n    };\n    var gridifyRows = function (rows, generators, context) {\n      var pasteDetails = fromPastedRows(rows, context.section);\n      var wh = Warehouse.generate(pasteDetails);\n      return toGrid(wh, generators, true);\n    };\n    var opPasteColsBefore = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[0].column;\n      var context = rows[pasteDetails.cells[0].row];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertCols(index, grid, gridB, pasteDetails.generators, comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n      return outcome(mergedGrid, cursor);\n    };\n    var opPasteColsAfter = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[pasteDetails.cells.length - 1].column + pasteDetails.cells[pasteDetails.cells.length - 1].colspan;\n      var context = rows[pasteDetails.cells[0].row];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertCols(index, grid, gridB, pasteDetails.generators, comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n      return outcome(mergedGrid, cursor);\n    };\n    var opPasteRowsBefore = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[0].row;\n      var context = rows[index];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertRows(index, grid, gridB, pasteDetails.generators, comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n      return outcome(mergedGrid, cursor);\n    };\n    var opPasteRowsAfter = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[pasteDetails.cells.length - 1].row + pasteDetails.cells[pasteDetails.cells.length - 1].rowspan;\n      var context = rows[pasteDetails.cells[0].row];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertRows(index, grid, gridB, pasteDetails.generators, comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n      return outcome(mergedGrid, cursor);\n    };\n    var opGetColumnType = function (table, target) {\n      var house = Warehouse.fromTable(table);\n      var details = onCells(house, target);\n      return details.bind(function (selectedCells) {\n        var lastSelectedCell = selectedCells[selectedCells.length - 1];\n        var minColRange = selectedCells[0].column;\n        var maxColRange = lastSelectedCell.column + lastSelectedCell.colspan;\n        var selectedColumnCells = flatten(map(house.all, function (row) {\n          return filter(row.cells, function (cell) {\n            return cell.column >= minColRange && cell.column < maxColRange;\n          });\n        }));\n        return getCellsType(selectedColumnCells, function (cell) {\n          return name(cell.element) === 'th';\n        });\n      }).getOr('');\n    };\n    var getCellsType = function (cells, headerPred) {\n      var headerCells = filter(cells, headerPred);\n      if (headerCells.length === 0) {\n        return Optional.some('td');\n      } else if (headerCells.length === cells.length) {\n        return Optional.some('th');\n      } else {\n        return Optional.none();\n      }\n    };\n    var resize = adjustWidthTo;\n    var adjustAndRedistributeWidths$1 = adjustAndRedistributeWidths;\n    var firstColumnIsLocked = function (_warehouse, details) {\n      return exists(details, function (detail) {\n        return detail.column === 0 && detail.isLocked;\n      });\n    };\n    var lastColumnIsLocked = function (warehouse, details) {\n      return exists(details, function (detail) {\n        return detail.column + detail.colspan >= warehouse.grid.columns && detail.isLocked;\n      });\n    };\n    var getColumnsWidth = function (warehouse, details) {\n      var columns = columns$1(warehouse);\n      var uniqueCols = uniqueColumns(details);\n      return foldl(uniqueCols, function (acc, detail) {\n        var column = columns[detail.column];\n        var colWidth = column.map(getOuter).getOr(0);\n        return acc + colWidth;\n      }, 0);\n    };\n    var insertColumnsExtractor = function (before) {\n      return function (warehouse, target) {\n        return onCells(warehouse, target).filter(function (details) {\n          var checkLocked = before ? firstColumnIsLocked : lastColumnIsLocked;\n          return !checkLocked(warehouse, details);\n        }).map(function (details) {\n          return {\n            details: details,\n            pixelDelta: getColumnsWidth(warehouse, details)\n          };\n        });\n      };\n    };\n    var eraseColumnsExtractor = function (warehouse, target) {\n      return onUnlockedCells(warehouse, target).map(function (details) {\n        return {\n          details: details,\n          pixelDelta: -getColumnsWidth(warehouse, details)\n        };\n      });\n    };\n    var pasteColumnsExtractor = function (before) {\n      return function (warehouse, target) {\n        return onPasteByEditor(warehouse, target).filter(function (details) {\n          var checkLocked = before ? firstColumnIsLocked : lastColumnIsLocked;\n          return !checkLocked(warehouse, details.cells);\n        });\n      };\n    };\n    var insertRowsBefore = run(opInsertRowsBefore, onCells, noop, noop, Generators.modification);\n    var insertRowsAfter = run(opInsertRowsAfter, onCells, noop, noop, Generators.modification);\n    var insertColumnsBefore = run(opInsertColumnsBefore, insertColumnsExtractor(true), adjustAndRedistributeWidths$1, noop, Generators.modification);\n    var insertColumnsAfter = run(opInsertColumnsAfter, insertColumnsExtractor(false), adjustAndRedistributeWidths$1, noop, Generators.modification);\n    var eraseColumns = run(opEraseColumns, eraseColumnsExtractor, adjustAndRedistributeWidths$1, prune, Generators.modification);\n    var eraseRows = run(opEraseRows, onCells, noop, prune, Generators.modification);\n    var makeColumnHeader = run(opMakeColumnHeader, onUnlockedCell, noop, noop, Generators.transform('row', 'th'));\n    var makeColumnsHeader = run(opMakeColumnsHeader, onUnlockedCells, noop, noop, Generators.transform('row', 'th'));\n    var unmakeColumnHeader = run(opUnmakeColumnHeader, onUnlockedCell, noop, noop, Generators.transform(null, 'td'));\n    var unmakeColumnsHeader = run(opUnmakeColumnsHeader, onUnlockedCells, noop, noop, Generators.transform(null, 'td'));\n    var makeRowHeader = run(opMakeRowHeader, onCell, noop, noop, Generators.transform('col', 'th'));\n    var makeRowsHeader = run(opMakeRowsHeader, onCells, noop, noop, Generators.transform('col', 'th'));\n    var unmakeRowHeader = run(opUnmakeRowHeader, onCell, noop, noop, Generators.transform(null, 'td'));\n    var unmakeRowsHeader = run(opUnmakeRowsHeader, onCells, noop, noop, Generators.transform(null, 'td'));\n    var mergeCells = run(opMergeCells, onUnlockedMergable, resize, noop, Generators.merging);\n    var unmergeCells = run(opUnmergeCells, onUnlockedUnmergable, resize, noop, Generators.merging);\n    var pasteCells = run(opPasteCells, onPaste, resize, noop, Generators.modification);\n    var pasteColsBefore = run(opPasteColsBefore, pasteColumnsExtractor(true), noop, noop, Generators.modification);\n    var pasteColsAfter = run(opPasteColsAfter, pasteColumnsExtractor(false), noop, noop, Generators.modification);\n    var pasteRowsBefore = run(opPasteRowsBefore, onPasteByEditor, noop, noop, Generators.modification);\n    var pasteRowsAfter = run(opPasteRowsAfter, onPasteByEditor, noop, noop, Generators.modification);\n    var getColumnType = opGetColumnType;\n\n    var getSection = function (elm) {\n      return getNodeName(elm.parentNode);\n    };\n    var mapSectionNameToType = function (section) {\n      if (section === 'thead') {\n        return 'header';\n      } else if (section === 'tfoot') {\n        return 'footer';\n      } else {\n        return 'body';\n      }\n    };\n    var detectHeaderRow = function (editor, elm) {\n      var isThead = getSection(elm) === 'thead';\n      var areAllCellsThs = !exists(elm.cells, function (c) {\n        return getNodeName(c) !== 'th';\n      });\n      return isThead || areAllCellsThs ? Optional.some({\n        thead: isThead,\n        ths: areAllCellsThs\n      }) : Optional.none();\n    };\n    var getRowType = function (editor, elm) {\n      return mapSectionNameToType(detectHeaderRow(editor, elm).fold(function () {\n        return getSection(elm);\n      }, function (_rowConfig) {\n        return 'thead';\n      }));\n    };\n    var switchRowSection = function (dom, rowElm, newSectionName) {\n      var tableElm = dom.getParent(rowElm, 'table');\n      var oldSectionElm = rowElm.parentNode;\n      var oldSectionName = getNodeName(oldSectionElm);\n      if (newSectionName !== oldSectionName) {\n        var sectionElm_1 = dom.select(newSectionName, tableElm)[0];\n        if (!sectionElm_1) {\n          sectionElm_1 = dom.create(newSectionName);\n          var firstTableChild_1 = tableElm.firstChild;\n          if (newSectionName === 'thead') {\n            last(children$2(SugarElement.fromDom(tableElm), 'caption,colgroup')).fold(function () {\n              return tableElm.insertBefore(sectionElm_1, firstTableChild_1);\n            }, function (c) {\n              return dom.insertAfter(sectionElm_1, c.dom);\n            });\n          } else {\n            tableElm.appendChild(sectionElm_1);\n          }\n        }\n        if (newSectionName === 'tbody' && oldSectionName === 'thead' && sectionElm_1.firstChild) {\n          sectionElm_1.insertBefore(rowElm, sectionElm_1.firstChild);\n        } else {\n          sectionElm_1.appendChild(rowElm);\n        }\n        if (!oldSectionElm.hasChildNodes()) {\n          dom.remove(oldSectionElm);\n        }\n      }\n    };\n    var renameCell = function (editor, cell, newCellType) {\n      if (isNonNullable(newCellType) && getNodeName(cell) !== newCellType) {\n        var newCellElm = editor.dom.rename(cell, newCellType);\n        fireNewCell(editor, newCellElm);\n        return newCellElm;\n      } else {\n        return cell;\n      }\n    };\n    var switchCellType = function (editor, cell, newCellType, scope) {\n      var dom = editor.dom;\n      var newCell = renameCell(editor, cell, newCellType);\n      if (!isUndefined(scope)) {\n        dom.setAttrib(newCell, 'scope', scope);\n      }\n      return newCell;\n    };\n    var switchCellsType = function (editor, cells, newCellType, scope) {\n      return each(cells, function (c) {\n        return switchCellType(editor, c, newCellType, scope);\n      });\n    };\n    var switchSectionType = function (editor, rowElm, newType) {\n      var determineHeaderRowType = function () {\n        var allTableRows = table(SugarElement.fromDom(rowElm.cells[0])).map(function (table) {\n          return rows(table);\n        }).getOr([]);\n        return findMap(allTableRows, function (row) {\n          return detectHeaderRow(editor, row.dom);\n        }).map(function (detectedType) {\n          if (detectedType.thead && detectedType.ths) {\n            return 'sectionCells';\n          } else {\n            return detectedType.thead ? 'section' : 'cells';\n          }\n        }).getOr('section');\n      };\n      var dom = editor.dom;\n      if (newType === 'header') {\n        var headerRowTypeSetting = getTableHeaderType(editor);\n        var headerRowType = headerRowTypeSetting === 'auto' ? determineHeaderRowType() : headerRowTypeSetting;\n        switchCellsType(editor, rowElm.cells, headerRowType === 'section' ? 'td' : 'th', 'col');\n        switchRowSection(dom, rowElm, headerRowType === 'cells' ? 'tbody' : 'thead');\n      } else {\n        switchCellsType(editor, rowElm.cells, 'td', null);\n        switchRowSection(dom, rowElm, newType === 'footer' ? 'tfoot' : 'tbody');\n      }\n    };\n\n    var getSelectionStartCellFallback = function (start) {\n      return table(start).bind(function (table) {\n        return retrieve$1(table, ephemera.firstSelectedSelector);\n      }).fold(function () {\n        return start;\n      }, function (cells) {\n        return cells[0];\n      });\n    };\n    var getSelectionStartFromSelector = function (selector) {\n      return function (start, isRoot) {\n        var startCellName = name(start);\n        var startCell = startCellName === 'col' || startCellName === 'colgroup' ? getSelectionStartCellFallback(start) : start;\n        return closest$1(startCell, selector, isRoot);\n      };\n    };\n    var getSelectionStartCell = getSelectionStartFromSelector('th,td');\n    var getSelectionStartCellOrCaption = getSelectionStartFromSelector('th,td,caption');\n    var getCellsFromSelection = function (start, selections, isRoot) {\n      return getSelectionStartCell(start, isRoot).map(function (_cell) {\n        return selection(selections);\n      }).getOr([]);\n    };\n    var getRowsFromSelection = function (start, selector) {\n      var cellOpt = getSelectionStartCell(start);\n      var rowsOpt = cellOpt.bind(function (cell) {\n        return table(cell);\n      }).map(function (table) {\n        return rows(table);\n      });\n      return lift2(cellOpt, rowsOpt, function (cell, rows) {\n        return filter(rows, function (row) {\n          return exists(fromDom$1(row.dom.cells), function (rowCell) {\n            return get$2(rowCell, selector) === '1' || eq$1(rowCell, cell);\n          });\n        });\n      }).getOr([]);\n    };\n\n    var TableActions = function (editor, lazyWire, selections) {\n      var isTableBody = function (editor) {\n        return name(getBody$1(editor)) === 'table';\n      };\n      var lastRowGuard = function (table) {\n        return isTableBody(editor) === false || getGridSize(table).rows > 1;\n      };\n      var lastColumnGuard = function (table) {\n        return isTableBody(editor) === false || getGridSize(table).columns > 1;\n      };\n      var cloneFormats = getCloneElements(editor);\n      var colMutationOp = isResizeTableColumnResizing(editor) ? noop : halve;\n      var execute = function (operation, guard, mutate, lazyWire, effect) {\n        return function (table, target) {\n          removeDataStyle(table);\n          var wire = lazyWire();\n          var doc = SugarElement.fromDom(editor.getDoc());\n          var generators = cellOperations(mutate, doc, cloneFormats);\n          var sizing = get$9(editor, table);\n          var resizeBehaviour = isResizeTableColumnResizing(editor) ? resizeTable() : preserveTable();\n          return guard(table) ? operation(wire, table, target, generators, sizing, resizeBehaviour).bind(function (result) {\n            each(result.newRows, function (row) {\n              fireNewRow(editor, row.dom);\n            });\n            each(result.newCells, function (cell) {\n              fireNewCell(editor, cell.dom);\n            });\n            return result.cursor.map(function (cell) {\n              var des = freefallRtl$2(cell);\n              var rng = editor.dom.createRng();\n              rng.setStart(des.element.dom, des.offset);\n              rng.setEnd(des.element.dom, des.offset);\n              return {\n                rng: rng,\n                effect: effect\n              };\n            });\n          }) : Optional.none();\n        };\n      };\n      var deleteRow = execute(eraseRows, lastRowGuard, noop, lazyWire, structureModified);\n      var deleteColumn = execute(eraseColumns, lastColumnGuard, noop, lazyWire, structureModified);\n      var insertRowsBefore$1 = execute(insertRowsBefore, always, noop, lazyWire, structureModified);\n      var insertRowsAfter$1 = execute(insertRowsAfter, always, noop, lazyWire, structureModified);\n      var insertColumnsBefore$1 = execute(insertColumnsBefore, always, colMutationOp, lazyWire, structureModified);\n      var insertColumnsAfter$1 = execute(insertColumnsAfter, always, colMutationOp, lazyWire, structureModified);\n      var mergeCells$1 = execute(mergeCells, always, noop, lazyWire, structureModified);\n      var unmergeCells$1 = execute(unmergeCells, always, noop, lazyWire, structureModified);\n      var pasteColsBefore$1 = execute(pasteColsBefore, always, noop, lazyWire, structureModified);\n      var pasteColsAfter$1 = execute(pasteColsAfter, always, noop, lazyWire, structureModified);\n      var pasteRowsBefore$1 = execute(pasteRowsBefore, always, noop, lazyWire, structureModified);\n      var pasteRowsAfter$1 = execute(pasteRowsAfter, always, noop, lazyWire, structureModified);\n      var pasteCells$1 = execute(pasteCells, always, noop, lazyWire, structureModified);\n      var extractType = function (args, validTypes) {\n        return get$1(args, 'type').filter(function (type) {\n          return contains(validTypes, type);\n        });\n      };\n      var setTableCellType = function (editor, args) {\n        return extractType(args, [\n          'td',\n          'th'\n        ]).each(function (type) {\n          var cells = map(getCellsFromSelection(getSelectionStart(editor), selections), function (c) {\n            return c.dom;\n          });\n          switchCellsType(editor, cells, type, null);\n        });\n      };\n      var setTableRowType = function (editor, args) {\n        return extractType(args, [\n          'header',\n          'body',\n          'footer'\n        ]).each(function (type) {\n          map(getRowsFromSelection(getSelectionStart(editor), ephemera.selected), function (row) {\n            return switchSectionType(editor, row.dom, type);\n          });\n        });\n      };\n      var makeColumnsHeader$1 = execute(makeColumnsHeader, always, noop, lazyWire, structureModified);\n      var unmakeColumnsHeader$1 = execute(unmakeColumnsHeader, always, noop, lazyWire, structureModified);\n      var getTableRowType = function (editor) {\n        var rows = getRowsFromSelection(getSelectionStart(editor), ephemera.selected);\n        if (rows.length > 0) {\n          var rowTypes = map(rows, function (r) {\n            return getRowType(editor, r.dom);\n          });\n          var hasHeader = contains(rowTypes, 'header');\n          var hasFooter = contains(rowTypes, 'footer');\n          if (!hasHeader && !hasFooter) {\n            return 'body';\n          } else {\n            var hasBody = contains(rowTypes, 'body');\n            if (hasHeader && !hasBody && !hasFooter) {\n              return 'header';\n            } else if (!hasHeader && !hasBody && hasFooter) {\n              return 'footer';\n            } else {\n              return '';\n            }\n          }\n        }\n      };\n      var getTableCellType = function (editor) {\n        return getCellsType(getCellsFromSelection(getSelectionStart(editor), selections), function (cell) {\n          return name(cell) === 'th';\n        }).getOr('');\n      };\n      var getTableColType = getColumnType;\n      return {\n        deleteRow: deleteRow,\n        deleteColumn: deleteColumn,\n        insertRowsBefore: insertRowsBefore$1,\n        insertRowsAfter: insertRowsAfter$1,\n        insertColumnsBefore: insertColumnsBefore$1,\n        insertColumnsAfter: insertColumnsAfter$1,\n        mergeCells: mergeCells$1,\n        unmergeCells: unmergeCells$1,\n        pasteColsBefore: pasteColsBefore$1,\n        pasteColsAfter: pasteColsAfter$1,\n        pasteRowsBefore: pasteRowsBefore$1,\n        pasteRowsAfter: pasteRowsAfter$1,\n        pasteCells: pasteCells$1,\n        setTableCellType: setTableCellType,\n        setTableRowType: setTableRowType,\n        makeColumnsHeader: makeColumnsHeader$1,\n        unmakeColumnsHeader: unmakeColumnsHeader$1,\n        getTableRowType: getTableRowType,\n        getTableCellType: getTableCellType,\n        getTableColType: getTableColType\n      };\n    };\n\n    var DefaultRenderOptions = {\n      styles: {\n        'border-collapse': 'collapse',\n        'width': '100%'\n      },\n      attributes: { border: '1' },\n      colGroups: false\n    };\n    var tableHeaderCell = function () {\n      return SugarElement.fromTag('th');\n    };\n    var tableCell = function () {\n      return SugarElement.fromTag('td');\n    };\n    var tableColumn = function () {\n      return SugarElement.fromTag('col');\n    };\n    var createRow = function (columns, rowHeaders, columnHeaders, rowIndex) {\n      var tr = SugarElement.fromTag('tr');\n      for (var j = 0; j < columns; j++) {\n        var td = rowIndex < rowHeaders || j < columnHeaders ? tableHeaderCell() : tableCell();\n        if (j < columnHeaders) {\n          set(td, 'scope', 'row');\n        }\n        if (rowIndex < rowHeaders) {\n          set(td, 'scope', 'col');\n        }\n        append(td, SugarElement.fromTag('br'));\n        append(tr, td);\n      }\n      return tr;\n    };\n    var createGroupRow = function (columns) {\n      var columnGroup = SugarElement.fromTag('colgroup');\n      range(columns, function () {\n        return append(columnGroup, tableColumn());\n      });\n      return columnGroup;\n    };\n    var createRows = function (rows, columns, rowHeaders, columnHeaders) {\n      return range(rows, function (r) {\n        return createRow(columns, rowHeaders, columnHeaders, r);\n      });\n    };\n    var render$1 = function (rows, columns, rowHeaders, columnHeaders, headerType, renderOpts) {\n      if (renderOpts === void 0) {\n        renderOpts = DefaultRenderOptions;\n      }\n      var table = SugarElement.fromTag('table');\n      var rowHeadersGoInThead = headerType !== 'cells';\n      setAll$1(table, renderOpts.styles);\n      setAll(table, renderOpts.attributes);\n      if (renderOpts.colGroups) {\n        append(table, createGroupRow(columns));\n      }\n      var actualRowHeaders = Math.min(rows, rowHeaders);\n      if (rowHeadersGoInThead && rowHeaders > 0) {\n        var thead = SugarElement.fromTag('thead');\n        append(table, thead);\n        var theadRowHeaders = headerType === 'sectionCells' ? actualRowHeaders : 0;\n        var theadRows = createRows(rowHeaders, columns, theadRowHeaders, columnHeaders);\n        append$1(thead, theadRows);\n      }\n      var tbody = SugarElement.fromTag('tbody');\n      append(table, tbody);\n      var numRows = rowHeadersGoInThead ? rows - actualRowHeaders : rows;\n      var numRowHeaders = rowHeadersGoInThead ? 0 : rowHeaders;\n      var tbodyRows = createRows(numRows, columns, numRowHeaders, columnHeaders);\n      append$1(tbody, tbodyRows);\n      return table;\n    };\n\n    var get$b = function (element) {\n      return element.dom.innerHTML;\n    };\n    var getOuter$2 = function (element) {\n      var container = SugarElement.fromTag('div');\n      var clone = SugarElement.fromDom(element.dom.cloneNode(true));\n      append(container, clone);\n      return get$b(container);\n    };\n\n    var placeCaretInCell = function (editor, cell) {\n      editor.selection.select(cell.dom, true);\n      editor.selection.collapse(true);\n    };\n    var selectFirstCellInTable = function (editor, tableElm) {\n      descendant$1(tableElm, 'td,th').each(curry(placeCaretInCell, editor));\n    };\n    var fireEvents = function (editor, table) {\n      each(descendants$1(table, 'tr'), function (row) {\n        fireNewRow(editor, row.dom);\n        each(descendants$1(row, 'th,td'), function (cell) {\n          fireNewCell(editor, cell.dom);\n        });\n      });\n    };\n    var isPercentage$1 = function (width) {\n      return isString(width) && width.indexOf('%') !== -1;\n    };\n    var insert$1 = function (editor, columns, rows, colHeaders, rowHeaders) {\n      var defaultStyles = getDefaultStyles(editor);\n      var options = {\n        styles: defaultStyles,\n        attributes: getDefaultAttributes(editor),\n        colGroups: useColumnGroup(editor)\n      };\n      editor.undoManager.ignore(function () {\n        var table = render$1(rows, columns, rowHeaders, colHeaders, getTableHeaderType(editor), options);\n        set(table, 'data-mce-id', '__mce');\n        var html = getOuter$2(table);\n        editor.insertContent(html);\n        editor.addVisual();\n      });\n      return descendant$1(getBody$1(editor), 'table[data-mce-id=\"__mce\"]').map(function (table) {\n        if (isPixelsForced(editor)) {\n          enforcePixels(editor, table);\n        } else if (isResponsiveForced(editor)) {\n          enforceNone(table);\n        } else if (isPercentagesForced(editor) || isPercentage$1(defaultStyles.width)) {\n          enforcePercentage(editor, table);\n        }\n        removeDataStyle(table);\n        remove(table, 'data-mce-id');\n        fireEvents(editor, table);\n        selectFirstCellInTable(editor, table);\n        return table.dom;\n      }).getOr(null);\n    };\n    var insertTableWithDataValidation = function (editor, rows, columns, options, errorMsg) {\n      if (options === void 0) {\n        options = {};\n      }\n      var checkInput = function (val) {\n        return isNumber(val) && val > 0;\n      };\n      if (checkInput(rows) && checkInput(columns)) {\n        var headerRows = options.headerRows || 0;\n        var headerColumns = options.headerColumns || 0;\n        return insert$1(editor, columns, rows, headerColumns, headerRows);\n      } else {\n        console.error(errorMsg);\n        return null;\n      }\n    };\n\n    var getClipboardElements = function (getClipboard) {\n      return function () {\n        return getClipboard().fold(function () {\n          return [];\n        }, function (elems) {\n          return map(elems, function (e) {\n            return e.dom;\n          });\n        });\n      };\n    };\n    var setClipboardElements = function (setClipboard) {\n      return function (elems) {\n        var elmsOpt = elems.length > 0 ? Optional.some(fromDom$1(elems)) : Optional.none();\n        setClipboard(elmsOpt);\n      };\n    };\n    var insertTable = function (editor) {\n      return function (columns, rows, options) {\n        if (options === void 0) {\n          options = {};\n        }\n        var table = insertTableWithDataValidation(editor, rows, columns, options, 'Invalid values for insertTable - rows and columns values are required to insert a table.');\n        editor.undoManager.add();\n        return table;\n      };\n    };\n    var getApi = function (editor, clipboard, resizeHandler, selectionTargets) {\n      return {\n        insertTable: insertTable(editor),\n        setClipboardRows: setClipboardElements(clipboard.setRows),\n        getClipboardRows: getClipboardElements(clipboard.getRows),\n        setClipboardCols: setClipboardElements(clipboard.setColumns),\n        getClipboardCols: getClipboardElements(clipboard.getColumns),\n        resizeHandler: resizeHandler,\n        selectionTargets: selectionTargets\n      };\n    };\n\n    var constrainSpan = function (element, property, value) {\n      var currentColspan = getAttrValue(element, property, 1);\n      if (value === 1 || currentColspan <= 1) {\n        remove(element, property);\n      } else {\n        set(element, property, Math.min(value, currentColspan));\n      }\n    };\n    var generateColGroup = function (house, minColRange, maxColRange) {\n      if (Warehouse.hasColumns(house)) {\n        var colsToCopy = filter(Warehouse.justColumns(house), function (col) {\n          return col.column >= minColRange && col.column < maxColRange;\n        });\n        var copiedCols = map(colsToCopy, function (c) {\n          var clonedCol = deep(c.element);\n          constrainSpan(clonedCol, 'span', maxColRange - minColRange);\n          return clonedCol;\n        });\n        var fakeColgroup = SugarElement.fromTag('colgroup');\n        append$1(fakeColgroup, copiedCols);\n        return [fakeColgroup];\n      } else {\n        return [];\n      }\n    };\n    var generateRows = function (house, minColRange, maxColRange) {\n      return map(house.all, function (row) {\n        var cellsToCopy = filter(row.cells, function (cell) {\n          return cell.column >= minColRange && cell.column < maxColRange;\n        });\n        var copiedCells = map(cellsToCopy, function (cell) {\n          var clonedCell = deep(cell.element);\n          constrainSpan(clonedCell, 'colspan', maxColRange - minColRange);\n          return clonedCell;\n        });\n        var fakeTR = SugarElement.fromTag('tr');\n        append$1(fakeTR, copiedCells);\n        return fakeTR;\n      });\n    };\n    var copyCols = function (table, target) {\n      var house = Warehouse.fromTable(table);\n      var details = onUnlockedCells(house, target);\n      return details.map(function (selectedCells) {\n        var lastSelectedCell = selectedCells[selectedCells.length - 1];\n        var minColRange = selectedCells[0].column;\n        var maxColRange = lastSelectedCell.column + lastSelectedCell.colspan;\n        var fakeColGroups = generateColGroup(house, minColRange, maxColRange);\n        var fakeRows = generateRows(house, minColRange, maxColRange);\n        return __spreadArrays(fakeColGroups, fakeRows);\n      });\n    };\n\n    var copyRows = function (table, target, generators) {\n      var warehouse = Warehouse.fromTable(table);\n      var details = onCells(warehouse, target);\n      return details.bind(function (selectedCells) {\n        var grid = toGrid(warehouse, generators, false);\n        var rows = extractGridDetails(grid).rows;\n        var slicedGrid = rows.slice(selectedCells[0].row, selectedCells[selectedCells.length - 1].row + selectedCells[selectedCells.length - 1].rowspan);\n        var filteredGrid = bind(slicedGrid, function (row) {\n          var newCells = filter(row.cells, function (cell) {\n            return !cell.isLocked;\n          });\n          return newCells.length > 0 ? [__assign(__assign({}, row), { cells: newCells })] : [];\n        });\n        var slicedDetails = toDetailList(filteredGrid, generators);\n        return someIf(slicedDetails.length > 0, slicedDetails);\n      }).map(function (slicedDetails) {\n        return copy$2(slicedDetails);\n      });\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getTDTHOverallStyle = function (dom, elm, name) {\n      var cells = dom.select('td,th', elm);\n      var firstChildStyle;\n      var checkChildren = function (firstChildStyle, elms) {\n        for (var i = 0; i < elms.length; i++) {\n          var currentStyle = dom.getStyle(elms[i], name);\n          if (typeof firstChildStyle === 'undefined') {\n            firstChildStyle = currentStyle;\n          }\n          if (firstChildStyle !== currentStyle) {\n            return '';\n          }\n        }\n        return firstChildStyle;\n      };\n      return checkChildren(firstChildStyle, cells);\n    };\n    var applyAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('align' + name, {}, elm);\n      }\n    };\n    var applyVAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('valign' + name, {}, elm);\n      }\n    };\n    var unApplyAlign = function (editor, elm) {\n      global$1.each('left center right'.split(' '), function (name) {\n        editor.formatter.remove('align' + name, {}, elm);\n      });\n    };\n    var unApplyVAlign = function (editor, elm) {\n      global$1.each('top middle bottom'.split(' '), function (name) {\n        editor.formatter.remove('valign' + name, {}, elm);\n      });\n    };\n\n    var isListGroup = function (item) {\n      return hasNonNullableKey(item, 'menu');\n    };\n    var buildListItems = function (inputList, startItems) {\n      var appendItems = function (values, acc) {\n        return acc.concat(map(values, function (item) {\n          var text = item.text || item.title;\n          if (isListGroup(item)) {\n            return {\n              text: text,\n              items: buildListItems(item.menu)\n            };\n          } else {\n            return {\n              text: text,\n              value: item.value\n            };\n          }\n        }));\n      };\n      return appendItems(inputList, startItems || []);\n    };\n    var rgbToHex = function (dom) {\n      return function (value) {\n        return startsWith(value, 'rgb') ? dom.toHex(value) : value;\n      };\n    };\n    var extractAdvancedStyles = function (dom, elm) {\n      var element = SugarElement.fromDom(elm);\n      return {\n        borderwidth: getRaw(element, 'border-width').getOr(''),\n        borderstyle: getRaw(element, 'border-style').getOr(''),\n        bordercolor: getRaw(element, 'border-color').map(rgbToHex(dom)).getOr(''),\n        backgroundcolor: getRaw(element, 'background-color').map(rgbToHex(dom)).getOr('')\n      };\n    };\n    var getSharedValues = function (data) {\n      var baseData = data[0];\n      var comparisonData = data.slice(1);\n      each(comparisonData, function (items) {\n        each(keys(baseData), function (key) {\n          each$1(items, function (itemValue, itemKey) {\n            var comparisonValue = baseData[key];\n            if (comparisonValue !== '' && key === itemKey) {\n              if (comparisonValue !== itemValue) {\n                baseData[key] = '';\n              }\n            }\n          });\n        });\n      });\n      return baseData;\n    };\n    var getAdvancedTab = function (dialogName) {\n      var advTabItems = [\n        {\n          name: 'borderstyle',\n          type: 'listbox',\n          label: 'Border style',\n          items: [\n            {\n              text: 'Select...',\n              value: ''\n            },\n            {\n              text: 'Solid',\n              value: 'solid'\n            },\n            {\n              text: 'Dotted',\n              value: 'dotted'\n            },\n            {\n              text: 'Dashed',\n              value: 'dashed'\n            },\n            {\n              text: 'Double',\n              value: 'double'\n            },\n            {\n              text: 'Groove',\n              value: 'groove'\n            },\n            {\n              text: 'Ridge',\n              value: 'ridge'\n            },\n            {\n              text: 'Inset',\n              value: 'inset'\n            },\n            {\n              text: 'Outset',\n              value: 'outset'\n            },\n            {\n              text: 'None',\n              value: 'none'\n            },\n            {\n              text: 'Hidden',\n              value: 'hidden'\n            }\n          ]\n        },\n        {\n          name: 'bordercolor',\n          type: 'colorinput',\n          label: 'Border color'\n        },\n        {\n          name: 'backgroundcolor',\n          type: 'colorinput',\n          label: 'Background color'\n        }\n      ];\n      var borderWidth = {\n        name: 'borderwidth',\n        type: 'input',\n        label: 'Border width'\n      };\n      var items = dialogName === 'cell' ? [borderWidth].concat(advTabItems) : advTabItems;\n      return {\n        title: 'Advanced',\n        name: 'advanced',\n        items: items\n      };\n    };\n    var getAlignment = function (formats, formatName, editor, elm) {\n      return find(formats, function (name) {\n        return editor.formatter.matchNode(elm, formatName + name);\n      }).getOr('');\n    };\n    var getHAlignment = curry(getAlignment, [\n      'left',\n      'center',\n      'right'\n    ], 'align');\n    var getVAlignment = curry(getAlignment, [\n      'top',\n      'middle',\n      'bottom'\n    ], 'valign');\n    var extractDataFromSettings = function (editor, hasAdvTableTab) {\n      var style = getDefaultStyles(editor);\n      var attrs = getDefaultAttributes(editor);\n      var extractAdvancedStyleData = function (dom) {\n        return {\n          borderstyle: get$1(style, 'border-style').getOr(''),\n          bordercolor: rgbToHex(dom)(get$1(style, 'border-color').getOr('')),\n          backgroundcolor: rgbToHex(dom)(get$1(style, 'background-color').getOr(''))\n        };\n      };\n      var defaultData = {\n        height: '',\n        width: '100%',\n        cellspacing: '',\n        cellpadding: '',\n        caption: false,\n        class: '',\n        align: '',\n        border: ''\n      };\n      var getBorder = function () {\n        var borderWidth = style['border-width'];\n        if (shouldStyleWithCss(editor) && borderWidth) {\n          return { border: borderWidth };\n        }\n        return get$1(attrs, 'border').fold(function () {\n          return {};\n        }, function (border) {\n          return { border: border };\n        });\n      };\n      var advStyle = hasAdvTableTab ? extractAdvancedStyleData(editor.dom) : {};\n      var getCellPaddingCellSpacing = function () {\n        var spacing = get$1(style, 'border-spacing').or(get$1(attrs, 'cellspacing')).fold(function () {\n          return {};\n        }, function (cellspacing) {\n          return { cellspacing: cellspacing };\n        });\n        var padding = get$1(style, 'border-padding').or(get$1(attrs, 'cellpadding')).fold(function () {\n          return {};\n        }, function (cellpadding) {\n          return { cellpadding: cellpadding };\n        });\n        return __assign(__assign({}, spacing), padding);\n      };\n      var data = __assign(__assign(__assign(__assign(__assign(__assign({}, defaultData), style), attrs), advStyle), getBorder()), getCellPaddingCellSpacing());\n      return data;\n    };\n    var extractDataFromTableElement = function (editor, elm, hasAdvTableTab) {\n      var getBorder = function (dom, elm) {\n        var optBorderWidth = getRaw(SugarElement.fromDom(elm), 'border-width');\n        if (shouldStyleWithCss(editor) && optBorderWidth.isSome()) {\n          return optBorderWidth.getOr('');\n        }\n        return dom.getAttrib(elm, 'border') || getTDTHOverallStyle(editor.dom, elm, 'border-width') || getTDTHOverallStyle(editor.dom, elm, 'border');\n      };\n      var dom = editor.dom;\n      return __assign({\n        width: dom.getStyle(elm, 'width') || dom.getAttrib(elm, 'width'),\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        cellspacing: dom.getStyle(elm, 'border-spacing') || dom.getAttrib(elm, 'cellspacing'),\n        cellpadding: dom.getAttrib(elm, 'cellpadding') || getTDTHOverallStyle(editor.dom, elm, 'padding'),\n        border: getBorder(dom, elm),\n        caption: !!dom.select('caption', elm)[0],\n        class: dom.getAttrib(elm, 'class', ''),\n        align: getHAlignment(editor, elm)\n      }, hasAdvTableTab ? extractAdvancedStyles(dom, elm) : {});\n    };\n    var extractDataFromRowElement = function (editor, elm, hasAdvancedRowTab) {\n      var dom = editor.dom;\n      return __assign({\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        class: dom.getAttrib(elm, 'class', ''),\n        type: getRowType(editor, elm),\n        align: getHAlignment(editor, elm)\n      }, hasAdvancedRowTab ? extractAdvancedStyles(dom, elm) : {});\n    };\n    var extractDataFromCellElement = function (editor, cell, hasAdvancedCellTab, column) {\n      var dom = editor.dom;\n      var colElm = column.getOr(cell);\n      var getStyle = function (element, style) {\n        return dom.getStyle(element, style) || dom.getAttrib(element, style);\n      };\n      return __assign({\n        width: getStyle(colElm, 'width'),\n        height: getStyle(cell, 'height'),\n        scope: dom.getAttrib(cell, 'scope'),\n        celltype: getNodeName(cell),\n        class: dom.getAttrib(cell, 'class', ''),\n        halign: getHAlignment(editor, cell),\n        valign: getVAlignment(editor, cell)\n      }, hasAdvancedCellTab ? extractAdvancedStyles(dom, cell) : {});\n    };\n\n    var getClassList = function (editor) {\n      var classes = buildListItems(getCellClassList(editor));\n      if (classes.length > 0) {\n        return Optional.some({\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          items: classes\n        });\n      }\n      return Optional.none();\n    };\n    var children$3 = [\n      {\n        name: 'width',\n        type: 'input',\n        label: 'Width'\n      },\n      {\n        name: 'height',\n        type: 'input',\n        label: 'Height'\n      },\n      {\n        name: 'celltype',\n        type: 'listbox',\n        label: 'Cell type',\n        items: [\n          {\n            text: 'Cell',\n            value: 'td'\n          },\n          {\n            text: 'Header cell',\n            value: 'th'\n          }\n        ]\n      },\n      {\n        name: 'scope',\n        type: 'listbox',\n        label: 'Scope',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Row',\n            value: 'row'\n          },\n          {\n            text: 'Column',\n            value: 'col'\n          },\n          {\n            text: 'Row group',\n            value: 'rowgroup'\n          },\n          {\n            text: 'Column group',\n            value: 'colgroup'\n          }\n        ]\n      },\n      {\n        name: 'halign',\n        type: 'listbox',\n        label: 'Horizontal align',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Left',\n            value: 'left'\n          },\n          {\n            text: 'Center',\n            value: 'center'\n          },\n          {\n            text: 'Right',\n            value: 'right'\n          }\n        ]\n      },\n      {\n        name: 'valign',\n        type: 'listbox',\n        label: 'Vertical align',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Top',\n            value: 'top'\n          },\n          {\n            text: 'Middle',\n            value: 'middle'\n          },\n          {\n            text: 'Bottom',\n            value: 'bottom'\n          }\n        ]\n      }\n    ];\n    var getItems = function (editor) {\n      return children$3.concat(getClassList(editor).toArray());\n    };\n\n    var modifiers = function (testTruthy) {\n      return function (editor, node) {\n        var dom = editor.dom;\n        var setAttrib = function (attr, value) {\n          if (!testTruthy || value) {\n            dom.setAttrib(node, attr, value);\n          }\n        };\n        var setStyle = function (prop, value) {\n          if (!testTruthy || value) {\n            dom.setStyle(node, prop, value);\n          }\n        };\n        var setFormat = function (formatName, value) {\n          if (!testTruthy || value) {\n            if (value === '') {\n              editor.formatter.remove(formatName, { value: null }, node, true);\n            } else {\n              editor.formatter.apply(formatName, { value: value }, node);\n            }\n          }\n        };\n        return {\n          setAttrib: setAttrib,\n          setStyle: setStyle,\n          setFormat: setFormat\n        };\n      };\n    };\n    var DomModifier = {\n      normal: modifiers(false),\n      ifTruthy: modifiers(true)\n    };\n\n    var getSelectedCells = function (cells) {\n      return table(cells[0]).map(function (table) {\n        var warehouse = Warehouse.fromTable(table);\n        var allCells = Warehouse.justCells(warehouse);\n        var filtered = filter(allCells, function (cellA) {\n          return exists(cells, function (cellB) {\n            return eq$1(cellA.element, cellB);\n          });\n        });\n        return map(filtered, function (cell) {\n          return {\n            element: cell.element.dom,\n            column: Warehouse.getColumnAt(warehouse, cell.column).map(function (col) {\n              return col.element.dom;\n            })\n          };\n        });\n      });\n    };\n    var updateSimpleProps = function (modifier, colModifier, data) {\n      modifier.setAttrib('scope', data.scope);\n      modifier.setAttrib('class', data.class);\n      modifier.setStyle('height', addPxSuffix(data.height));\n      colModifier.setStyle('width', addPxSuffix(data.width));\n    };\n    var updateAdvancedProps = function (modifier, data) {\n      modifier.setFormat('tablecellbackgroundcolor', data.backgroundcolor);\n      modifier.setFormat('tablecellbordercolor', data.bordercolor);\n      modifier.setFormat('tablecellborderstyle', data.borderstyle);\n      modifier.setFormat('tablecellborderwidth', addPxSuffix(data.borderwidth));\n    };\n    var applyCellData = function (editor, cells, oldData, data) {\n      var isSingleCell = cells.length === 1;\n      var modifiedData = filter$1(data, function (value, key) {\n        return oldData[key] !== value;\n      });\n      if (size(modifiedData) > 0 && cells.length >= 1) {\n        var tableOpt = table(cells[0]);\n        getSelectedCells(cells).each(function (selectedCells) {\n          each(selectedCells, function (item) {\n            var cellElm = switchCellType(editor, item.element, data.celltype);\n            var modifier = isSingleCell ? DomModifier.normal(editor, cellElm) : DomModifier.ifTruthy(editor, cellElm);\n            var colModifier = item.column.map(function (col) {\n              return isSingleCell ? DomModifier.normal(editor, col) : DomModifier.ifTruthy(editor, col);\n            }).getOr(modifier);\n            updateSimpleProps(modifier, colModifier, data);\n            if (hasAdvancedCellTab(editor)) {\n              updateAdvancedProps(modifier, data);\n            }\n            if (isSingleCell) {\n              unApplyAlign(editor, cellElm);\n              unApplyVAlign(editor, cellElm);\n            }\n            if (data.halign) {\n              applyAlign(editor, cellElm, data.halign);\n            }\n            if (data.valign) {\n              applyVAlign(editor, cellElm, data.valign);\n            }\n          });\n        });\n        var styleModified_1 = size(filter$1(modifiedData, function (_value, key) {\n          return key !== 'scope' && key !== 'celltype';\n        })) > 0;\n        tableOpt.each(function (table) {\n          return fireTableModified(editor, table.dom, {\n            structure: has(modifiedData, 'celltype'),\n            style: styleModified_1\n          });\n        });\n      }\n    };\n    var onSubmitCellForm = function (editor, cells, oldData, api) {\n      var data = api.getData();\n      api.close();\n      editor.undoManager.transact(function () {\n        applyCellData(editor, cells, oldData, data);\n        editor.focus();\n      });\n    };\n    var getData = function (editor, cells) {\n      var cellsData = getSelectedCells(cells).map(function (selectedCells) {\n        return map(selectedCells, function (item) {\n          return extractDataFromCellElement(editor, item.element, hasAdvancedCellTab(editor), item.column);\n        });\n      });\n      return getSharedValues(cellsData.getOrDie());\n    };\n    var open = function (editor, selections) {\n      var cells = getCellsFromSelection(getSelectionStart(editor), selections);\n      if (cells.length === 0) {\n        return;\n      }\n      var data = getData(editor, cells);\n      var dialogTabPanel = {\n        type: 'tabpanel',\n        tabs: [\n          {\n            title: 'General',\n            name: 'general',\n            items: getItems(editor)\n          },\n          getAdvancedTab('cell')\n        ]\n      };\n      var dialogPanel = {\n        type: 'panel',\n        items: [{\n            type: 'grid',\n            columns: 2,\n            items: getItems(editor)\n          }]\n      };\n      editor.windowManager.open({\n        title: 'Cell Properties',\n        size: 'normal',\n        body: hasAdvancedCellTab(editor) ? dialogTabPanel : dialogPanel,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: data,\n        onSubmit: curry(onSubmitCellForm, editor, cells, data)\n      });\n    };\n\n    var getClassList$1 = function (editor) {\n      var classes = buildListItems(getRowClassList(editor));\n      if (classes.length > 0) {\n        return Optional.some({\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          items: classes\n        });\n      }\n      return Optional.none();\n    };\n    var formChildren = [\n      {\n        type: 'listbox',\n        name: 'type',\n        label: 'Row type',\n        items: [\n          {\n            text: 'Header',\n            value: 'header'\n          },\n          {\n            text: 'Body',\n            value: 'body'\n          },\n          {\n            text: 'Footer',\n            value: 'footer'\n          }\n        ]\n      },\n      {\n        type: 'listbox',\n        name: 'align',\n        label: 'Alignment',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Left',\n            value: 'left'\n          },\n          {\n            text: 'Center',\n            value: 'center'\n          },\n          {\n            text: 'Right',\n            value: 'right'\n          }\n        ]\n      },\n      {\n        label: 'Height',\n        name: 'height',\n        type: 'input'\n      }\n    ];\n    var getItems$1 = function (editor) {\n      return formChildren.concat(getClassList$1(editor).toArray());\n    };\n\n    var updateSimpleProps$1 = function (modifier, data) {\n      modifier.setAttrib('class', data.class);\n      modifier.setStyle('height', addPxSuffix(data.height));\n    };\n    var updateAdvancedProps$1 = function (modifier, data) {\n      modifier.setStyle('background-color', data.backgroundcolor);\n      modifier.setStyle('border-color', data.bordercolor);\n      modifier.setStyle('border-style', data.borderstyle);\n    };\n    var applyRowData = function (editor, rows, oldData, data) {\n      var isSingleRow = rows.length === 1;\n      var modifiedData = filter$1(data, function (value, key) {\n        return oldData[key] !== value;\n      });\n      if (size(modifiedData) > 0) {\n        each(rows, function (rowElm) {\n          if (data.type !== getNodeName(rowElm.parentNode)) {\n            switchSectionType(editor, rowElm, data.type);\n          }\n          var modifier = isSingleRow ? DomModifier.normal(editor, rowElm) : DomModifier.ifTruthy(editor, rowElm);\n          updateSimpleProps$1(modifier, data);\n          if (hasAdvancedRowTab(editor)) {\n            updateAdvancedProps$1(modifier, data);\n          }\n          if (data.align !== oldData.align) {\n            unApplyAlign(editor, rowElm);\n            applyAlign(editor, rowElm, data.align);\n          }\n        });\n        var typeModified_1 = has(modifiedData, 'type');\n        var styleModified_1 = typeModified_1 ? size(modifiedData) > 1 : true;\n        table(SugarElement.fromDom(rows[0])).each(function (table) {\n          return fireTableModified(editor, table.dom, {\n            structure: typeModified_1,\n            style: styleModified_1\n          });\n        });\n      }\n    };\n    var onSubmitRowForm = function (editor, rows, oldData, api) {\n      var data = api.getData();\n      api.close();\n      editor.undoManager.transact(function () {\n        applyRowData(editor, rows, oldData, data);\n        editor.focus();\n      });\n    };\n    var open$1 = function (editor) {\n      var rows = getRowsFromSelection(getSelectionStart(editor), ephemera.selected);\n      if (rows.length === 0) {\n        return;\n      }\n      var rowsData = map(rows, function (rowElm) {\n        return extractDataFromRowElement(editor, rowElm.dom, hasAdvancedRowTab(editor));\n      });\n      var data = getSharedValues(rowsData);\n      var dialogTabPanel = {\n        type: 'tabpanel',\n        tabs: [\n          {\n            title: 'General',\n            name: 'general',\n            items: getItems$1(editor)\n          },\n          getAdvancedTab('row')\n        ]\n      };\n      var dialogPanel = {\n        type: 'panel',\n        items: [{\n            type: 'grid',\n            columns: 2,\n            items: getItems$1(editor)\n          }]\n      };\n      editor.windowManager.open({\n        title: 'Row Properties',\n        size: 'normal',\n        body: hasAdvancedRowTab(editor) ? dialogTabPanel : dialogPanel,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: data,\n        onSubmit: curry(onSubmitRowForm, editor, map(rows, function (r) {\n          return r.dom;\n        }), data)\n      });\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var getItems$2 = function (editor, classes, insertNewTable) {\n      var rowColCountItems = !insertNewTable ? [] : [\n        {\n          type: 'input',\n          name: 'cols',\n          label: 'Cols',\n          inputMode: 'numeric'\n        },\n        {\n          type: 'input',\n          name: 'rows',\n          label: 'Rows',\n          inputMode: 'numeric'\n        }\n      ];\n      var alwaysItems = [\n        {\n          type: 'input',\n          name: 'width',\n          label: 'Width'\n        },\n        {\n          type: 'input',\n          name: 'height',\n          label: 'Height'\n        }\n      ];\n      var appearanceItems = hasAppearanceOptions(editor) ? [\n        {\n          type: 'input',\n          name: 'cellspacing',\n          label: 'Cell spacing',\n          inputMode: 'numeric'\n        },\n        {\n          type: 'input',\n          name: 'cellpadding',\n          label: 'Cell padding',\n          inputMode: 'numeric'\n        },\n        {\n          type: 'input',\n          name: 'border',\n          label: 'Border width'\n        },\n        {\n          type: 'label',\n          label: 'Caption',\n          items: [{\n              type: 'checkbox',\n              name: 'caption',\n              label: 'Show caption'\n            }]\n        }\n      ] : [];\n      var alignmentItem = [{\n          type: 'listbox',\n          name: 'align',\n          label: 'Alignment',\n          items: [\n            {\n              text: 'None',\n              value: ''\n            },\n            {\n              text: 'Left',\n              value: 'left'\n            },\n            {\n              text: 'Center',\n              value: 'center'\n            },\n            {\n              text: 'Right',\n              value: 'right'\n            }\n          ]\n        }];\n      var classListItem = classes.length > 0 ? [{\n          type: 'listbox',\n          name: 'class',\n          label: 'Class',\n          items: classes\n        }] : [];\n      return rowColCountItems.concat(alwaysItems).concat(appearanceItems).concat(alignmentItem).concat(classListItem);\n    };\n\n    var styleTDTH = function (dom, elm, name, value) {\n      if (elm.tagName === 'TD' || elm.tagName === 'TH') {\n        if (isString(name)) {\n          dom.setStyle(elm, name, value);\n        } else {\n          dom.setStyle(elm, name);\n        }\n      } else {\n        if (elm.children) {\n          for (var i = 0; i < elm.children.length; i++) {\n            styleTDTH(dom, elm.children[i], name, value);\n          }\n        }\n      }\n    };\n    var applyDataToElement = function (editor, tableElm, data) {\n      var dom = editor.dom;\n      var attrs = {};\n      var styles = {};\n      attrs.class = data.class;\n      styles.height = addPxSuffix(data.height);\n      if (dom.getAttrib(tableElm, 'width') && !shouldStyleWithCss(editor)) {\n        attrs.width = removePxSuffix(data.width);\n      } else {\n        styles.width = addPxSuffix(data.width);\n      }\n      if (shouldStyleWithCss(editor)) {\n        styles['border-width'] = addPxSuffix(data.border);\n        styles['border-spacing'] = addPxSuffix(data.cellspacing);\n      } else {\n        attrs.border = data.border;\n        attrs.cellpadding = data.cellpadding;\n        attrs.cellspacing = data.cellspacing;\n      }\n      if (shouldStyleWithCss(editor) && tableElm.children) {\n        for (var i = 0; i < tableElm.children.length; i++) {\n          styleTDTH(dom, tableElm.children[i], {\n            'border-width': addPxSuffix(data.border),\n            'padding': addPxSuffix(data.cellpadding)\n          });\n          if (hasAdvancedTableTab(editor)) {\n            styleTDTH(dom, tableElm.children[i], { 'border-color': data.bordercolor });\n          }\n        }\n      }\n      if (hasAdvancedTableTab(editor)) {\n        styles['background-color'] = data.backgroundcolor;\n        styles['border-color'] = data.bordercolor;\n        styles['border-style'] = data.borderstyle;\n      }\n      attrs.style = dom.serializeStyle(__assign(__assign({}, getDefaultStyles(editor)), styles));\n      dom.setAttribs(tableElm, __assign(__assign({}, getDefaultAttributes(editor)), attrs));\n    };\n    var onSubmitTableForm = function (editor, tableElm, oldData, api) {\n      var dom = editor.dom;\n      var captionElm;\n      var data = api.getData();\n      var modifiedData = filter$1(data, function (value, key) {\n        return oldData[key] !== value;\n      });\n      api.close();\n      if (data.class === '') {\n        delete data.class;\n      }\n      editor.undoManager.transact(function () {\n        if (!tableElm) {\n          var cols = parseInt(data.cols, 10) || 1;\n          var rows = parseInt(data.rows, 10) || 1;\n          tableElm = insert$1(editor, cols, rows, 0, 0);\n        }\n        if (size(modifiedData) > 0) {\n          applyDataToElement(editor, tableElm, data);\n          captionElm = dom.select('caption', tableElm)[0];\n          if (captionElm && !data.caption) {\n            dom.remove(captionElm);\n          }\n          if (!captionElm && data.caption) {\n            captionElm = dom.create('caption');\n            captionElm.innerHTML = !global$2.ie ? '<br data-mce-bogus=\"1\"/>' : nbsp;\n            tableElm.insertBefore(captionElm, tableElm.firstChild);\n          }\n          if (data.align === '') {\n            unApplyAlign(editor, tableElm);\n          } else {\n            applyAlign(editor, tableElm, data.align);\n          }\n        }\n        editor.focus();\n        editor.addVisual();\n        if (size(modifiedData) > 0) {\n          var captionModified = has(modifiedData, 'caption');\n          var styleModified = captionModified ? size(modifiedData) > 1 : true;\n          fireTableModified(editor, tableElm, {\n            structure: captionModified,\n            style: styleModified\n          });\n        }\n      });\n    };\n    var open$2 = function (editor, insertNewTable) {\n      var dom = editor.dom;\n      var tableElm;\n      var data = extractDataFromSettings(editor, hasAdvancedTableTab(editor));\n      if (insertNewTable === false) {\n        tableElm = dom.getParent(editor.selection.getStart(), 'table', editor.getBody());\n        if (tableElm) {\n          data = extractDataFromTableElement(editor, tableElm, hasAdvancedTableTab(editor));\n        } else {\n          if (hasAdvancedTableTab(editor)) {\n            data.borderstyle = '';\n            data.bordercolor = '';\n            data.backgroundcolor = '';\n          }\n        }\n      } else {\n        data.cols = '1';\n        data.rows = '1';\n        if (hasAdvancedTableTab(editor)) {\n          data.borderstyle = '';\n          data.bordercolor = '';\n          data.backgroundcolor = '';\n        }\n      }\n      var classes = buildListItems(getTableClassList(editor));\n      if (classes.length > 0) {\n        if (data.class) {\n          data.class = data.class.replace(/\\s*mce\\-item\\-table\\s*/g, '');\n        }\n      }\n      var generalPanel = {\n        type: 'grid',\n        columns: 2,\n        items: getItems$2(editor, classes, insertNewTable)\n      };\n      var nonAdvancedForm = function () {\n        return {\n          type: 'panel',\n          items: [generalPanel]\n        };\n      };\n      var advancedForm = function () {\n        return {\n          type: 'tabpanel',\n          tabs: [\n            {\n              title: 'General',\n              name: 'general',\n              items: [generalPanel]\n            },\n            getAdvancedTab('table')\n          ]\n        };\n      };\n      var dialogBody = hasAdvancedTableTab(editor) ? advancedForm() : nonAdvancedForm();\n      editor.windowManager.open({\n        title: 'Table Properties',\n        size: 'normal',\n        body: dialogBody,\n        onSubmit: curry(onSubmitTableForm, editor, tableElm, data),\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: data\n      });\n    };\n\n    var getSelectionStartCellOrCaption$1 = function (editor) {\n      return getSelectionStartCellOrCaption(getSelectionStart(editor), getIsRoot(editor));\n    };\n    var getSelectionStartCell$1 = function (editor) {\n      return getSelectionStartCell(getSelectionStart(editor), getIsRoot(editor));\n    };\n    var registerCommands = function (editor, actions, cellSelection, selections, clipboard) {\n      var isRoot = getIsRoot(editor);\n      var eraseTable = function () {\n        return getSelectionStartCellOrCaption$1(editor).each(function (cellOrCaption) {\n          table(cellOrCaption, isRoot).filter(not(isRoot)).each(function (table) {\n            var cursor = SugarElement.fromText('');\n            after(table, cursor);\n            remove$2(table);\n            if (editor.dom.isEmpty(editor.getBody())) {\n              editor.setContent('');\n              editor.selection.setCursorLocation();\n            } else {\n              var rng = editor.dom.createRng();\n              rng.setStart(cursor.dom, 0);\n              rng.setEnd(cursor.dom, 0);\n              editor.selection.setRng(rng);\n              editor.nodeChanged();\n            }\n          });\n        });\n      };\n      var setSizingMode = function (sizing) {\n        return getSelectionStartCellOrCaption$1(editor).each(function (cellOrCaption) {\n          var isForcedSizing = isResponsiveForced(editor) || isPixelsForced(editor) || isPercentagesForced(editor);\n          if (!isForcedSizing) {\n            table(cellOrCaption, isRoot).each(function (table) {\n              if (sizing === 'relative' && !isPercentSizing$1(table)) {\n                enforcePercentage(editor, table);\n              } else if (sizing === 'fixed' && !isPixelSizing$1(table)) {\n                enforcePixels(editor, table);\n              } else if (sizing === 'responsive' && !isNoneSizing$1(table)) {\n                enforceNone(table);\n              }\n              removeDataStyle(table);\n              fireTableModified(editor, table.dom, structureModified);\n            });\n          }\n        });\n      };\n      var getTableFromCell = function (cell) {\n        return table(cell, isRoot);\n      };\n      var postExecute = function (table) {\n        return function (data) {\n          editor.selection.setRng(data.rng);\n          editor.focus();\n          cellSelection.clear(table);\n          removeDataStyle(table);\n          fireTableModified(editor, table.dom, data.effect);\n        };\n      };\n      var actOnSelection = function (execute) {\n        return getSelectionStartCell$1(editor).each(function (cell) {\n          getTableFromCell(cell).each(function (table) {\n            var targets = forMenu(selections, table, cell);\n            execute(table, targets).each(postExecute(table));\n          });\n        });\n      };\n      var copyRowSelection = function () {\n        return getSelectionStartCell$1(editor).map(function (cell) {\n          return getTableFromCell(cell).bind(function (table) {\n            var targets = forMenu(selections, table, cell);\n            var generators = cellOperations(noop, SugarElement.fromDom(editor.getDoc()), Optional.none());\n            return copyRows(table, targets, generators);\n          });\n        });\n      };\n      var copyColSelection = function () {\n        return getSelectionStartCell$1(editor).map(function (cell) {\n          return getTableFromCell(cell).bind(function (table) {\n            var targets = forMenu(selections, table, cell);\n            return copyCols(table, targets);\n          });\n        });\n      };\n      var pasteOnSelection = function (execute, getRows) {\n        return getRows().each(function (rows) {\n          var clonedRows = map(rows, function (row) {\n            return deep(row);\n          });\n          getSelectionStartCell$1(editor).each(function (cell) {\n            return getTableFromCell(cell).each(function (table) {\n              var generators = paste(SugarElement.fromDom(editor.getDoc()));\n              var targets = pasteRows(selections, cell, clonedRows, generators);\n              execute(table, targets).each(postExecute(table));\n            });\n          });\n        });\n      };\n      each$1({\n        mceTableSplitCells: function () {\n          return actOnSelection(actions.unmergeCells);\n        },\n        mceTableMergeCells: function () {\n          return actOnSelection(actions.mergeCells);\n        },\n        mceTableInsertRowBefore: function () {\n          return actOnSelection(actions.insertRowsBefore);\n        },\n        mceTableInsertRowAfter: function () {\n          return actOnSelection(actions.insertRowsAfter);\n        },\n        mceTableInsertColBefore: function () {\n          return actOnSelection(actions.insertColumnsBefore);\n        },\n        mceTableInsertColAfter: function () {\n          return actOnSelection(actions.insertColumnsAfter);\n        },\n        mceTableDeleteCol: function () {\n          return actOnSelection(actions.deleteColumn);\n        },\n        mceTableDeleteRow: function () {\n          return actOnSelection(actions.deleteRow);\n        },\n        mceTableCutCol: function (_grid) {\n          return copyColSelection().each(function (selection) {\n            clipboard.setColumns(selection);\n            actOnSelection(actions.deleteColumn);\n          });\n        },\n        mceTableCutRow: function (_grid) {\n          return copyRowSelection().each(function (selection) {\n            clipboard.setRows(selection);\n            actOnSelection(actions.deleteRow);\n          });\n        },\n        mceTableCopyCol: function (_grid) {\n          return copyColSelection().each(function (selection) {\n            return clipboard.setColumns(selection);\n          });\n        },\n        mceTableCopyRow: function (_grid) {\n          return copyRowSelection().each(function (selection) {\n            return clipboard.setRows(selection);\n          });\n        },\n        mceTablePasteColBefore: function (_grid) {\n          return pasteOnSelection(actions.pasteColsBefore, clipboard.getColumns);\n        },\n        mceTablePasteColAfter: function (_grid) {\n          return pasteOnSelection(actions.pasteColsAfter, clipboard.getColumns);\n        },\n        mceTablePasteRowBefore: function (_grid) {\n          return pasteOnSelection(actions.pasteRowsBefore, clipboard.getRows);\n        },\n        mceTablePasteRowAfter: function (_grid) {\n          return pasteOnSelection(actions.pasteRowsAfter, clipboard.getRows);\n        },\n        mceTableDelete: eraseTable,\n        mceTableSizingMode: function (ui, sizing) {\n          return setSizingMode(sizing);\n        }\n      }, function (func, name) {\n        return editor.addCommand(name, func);\n      });\n      var fireTableModifiedForSelection = function (editor, tableOpt) {\n        tableOpt.each(function (table) {\n          fireTableModified(editor, table.dom, structureModified);\n        });\n      };\n      each$1({\n        mceTableCellType: function (_ui, args) {\n          var tableOpt = table(getSelectionStart(editor), isRoot);\n          actions.setTableCellType(editor, args);\n          fireTableModifiedForSelection(editor, tableOpt);\n        },\n        mceTableRowType: function (_ui, args) {\n          var tableOpt = table(getSelectionStart(editor), isRoot);\n          actions.setTableRowType(editor, args);\n          fireTableModifiedForSelection(editor, tableOpt);\n        }\n      }, function (func, name) {\n        return editor.addCommand(name, func);\n      });\n      editor.addCommand('mceTableColType', function (_ui, args) {\n        return get$1(args, 'type').each(function (type) {\n          return actOnSelection(type === 'th' ? actions.makeColumnsHeader : actions.unmakeColumnsHeader);\n        });\n      });\n      each$1({\n        mceTableProps: curry(open$2, editor, false),\n        mceTableRowProps: curry(open$1, editor),\n        mceTableCellProps: curry(open, editor, selections)\n      }, function (func, name) {\n        return editor.addCommand(name, function () {\n          return func();\n        });\n      });\n      editor.addCommand('mceInsertTable', function (_ui, args) {\n        if (isObject(args) && keys(args).length > 0) {\n          insertTableWithDataValidation(editor, args.rows, args.columns, args.options, 'Invalid values for mceInsertTable - rows and columns values are required to insert a table.');\n        } else {\n          open$2(editor, true);\n        }\n      });\n      editor.addCommand('mceTableApplyCellStyle', function (_ui, args) {\n        var getFormatName = function (style) {\n          return 'tablecell' + style.toLowerCase().replace('-', '');\n        };\n        if (!isObject(args)) {\n          return;\n        }\n        var cells = getCellsFromSelection(getSelectionStart(editor), selections, isRoot);\n        if (cells.length === 0) {\n          return;\n        }\n        var validArgs = filter$1(args, function (value, style) {\n          return editor.formatter.has(getFormatName(style)) && isString(value);\n        });\n        if (isEmpty(validArgs)) {\n          return;\n        }\n        each$1(validArgs, function (value, style) {\n          each(cells, function (cell) {\n            DomModifier.normal(editor, cell.dom).setFormat(getFormatName(style), value);\n          });\n        });\n        getTableFromCell(cells[0]).each(function (table) {\n          return fireTableModified(editor, table.dom, styleModified);\n        });\n      });\n    };\n\n    var registerQueryCommands = function (editor, actions, selections) {\n      var isRoot = getIsRoot(editor);\n      var getTableFromCell = function (cell) {\n        return table(cell, isRoot);\n      };\n      each$1({\n        mceTableRowType: function () {\n          return actions.getTableRowType(editor);\n        },\n        mceTableCellType: function () {\n          return actions.getTableCellType(editor);\n        },\n        mceTableColType: function () {\n          return getSelectionStartCell(getSelectionStart(editor)).bind(function (cell) {\n            return getTableFromCell(cell).map(function (table) {\n              var targets = forMenu(selections, table, cell);\n              return actions.getTableColType(table, targets);\n            });\n          }).getOr('');\n        }\n      }, function (func, name) {\n        return editor.addQueryValueHandler(name, func);\n      });\n    };\n\n    var Clipboard = function () {\n      var rows = Cell(Optional.none());\n      var cols = Cell(Optional.none());\n      var clearClipboard = function (clipboard) {\n        clipboard.set(Optional.none());\n      };\n      return {\n        getRows: rows.get,\n        setRows: function (r) {\n          rows.set(r);\n          clearClipboard(cols);\n        },\n        clearRows: function () {\n          return clearClipboard(rows);\n        },\n        getColumns: cols.get,\n        setColumns: function (c) {\n          cols.set(c);\n          clearClipboard(rows);\n        },\n        clearColumns: function () {\n          return clearClipboard(cols);\n        }\n      };\n    };\n\n    var cellFormats = {\n      tablecellbackgroundcolor: {\n        selector: 'td,th',\n        styles: { backgroundColor: '%value' },\n        remove_similar: true\n      },\n      tablecellbordercolor: {\n        selector: 'td,th',\n        styles: { borderColor: '%value' },\n        remove_similar: true\n      },\n      tablecellborderstyle: {\n        selector: 'td,th',\n        styles: { borderStyle: '%value' },\n        remove_similar: true\n      },\n      tablecellborderwidth: {\n        selector: 'td,th',\n        styles: { borderWidth: '%value' },\n        remove_similar: true\n      }\n    };\n    var registerFormats = function (editor) {\n      editor.formatter.register(cellFormats);\n    };\n\n    var adt$2 = Adt.generate([\n      { none: ['current'] },\n      { first: ['current'] },\n      {\n        middle: [\n          'current',\n          'target'\n        ]\n      },\n      { last: ['current'] }\n    ]);\n    var none$2 = function (current) {\n      if (current === void 0) {\n        current = undefined;\n      }\n      return adt$2.none(current);\n    };\n    var CellLocation = __assign(__assign({}, adt$2), { none: none$2 });\n\n    var detect$5 = function (current, isRoot) {\n      return table(current, isRoot).bind(function (table) {\n        var all = cells(table);\n        var index = findIndex(all, function (x) {\n          return eq$1(current, x);\n        });\n        return index.map(function (index) {\n          return {\n            index: index,\n            all: all\n          };\n        });\n      });\n    };\n    var next = function (current, isRoot) {\n      var detection = detect$5(current, isRoot);\n      return detection.fold(function () {\n        return CellLocation.none(current);\n      }, function (info) {\n        return info.index + 1 < info.all.length ? CellLocation.middle(current, info.all[info.index + 1]) : CellLocation.last(current);\n      });\n    };\n    var prev = function (current, isRoot) {\n      var detection = detect$5(current, isRoot);\n      return detection.fold(function () {\n        return CellLocation.none();\n      }, function (info) {\n        return info.index - 1 >= 0 ? CellLocation.middle(current, info.all[info.index - 1]) : CellLocation.first(current);\n      });\n    };\n\n    var create$2 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$2 };\n\n    var adt$3 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata$1 = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$2 = adt$3.before;\n    var on = adt$3.on;\n    var after$2 = adt$3.after;\n    var Situ = {\n      before: before$2,\n      on: on,\n      after: after$2,\n      cata: cata$1,\n      getStart: getStart\n    };\n\n    var adt$4 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$4.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$4.domRange;\n    var relative = adt$4.relative;\n    var exact = adt$4.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range$1 = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range$1\n    };\n\n    var selectNodeContents = function (win, element) {\n      var rng = win.document.createRange();\n      selectNodeContentsUsing(rng, element);\n      return rng;\n    };\n    var selectNodeContentsUsing = function (rng, element) {\n      return rng.selectNodeContents(element.dom);\n    };\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom);\n      }, function (e, o) {\n        rng.setStart(e.dom, o);\n      }, function (e) {\n        rng.setStartAfter(e.dom);\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom);\n      }, function (e, o) {\n        rng.setEnd(e.dom, o);\n      }, function (e) {\n        rng.setEndAfter(e.dom);\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom,\n        width: rect.width,\n        height: rect.height\n      };\n    };\n    var getFirstRect = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n\n    var adt$5 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(SugarElement.fromDom(range.startContainer), range.startOffset, SugarElement.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant(rng),\n            rtl: Optional.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Optional.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Optional.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$5.rtl(SugarElement.fromDom(rev.endContainer), rev.endOffset, SugarElement.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$5.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$5.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom, soffset);\n          rng.setEnd(finish.dom, foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom, foffset);\n          rng.setEnd(start.dom, soffset);\n          return rng;\n        }\n      });\n    };\n    var ltr$1 = adt$5.ltr;\n    var rtl$1 = adt$5.rtl;\n\n    var searchForPoint = function (rectForOffset, x, y, maxX, length) {\n      if (length === 0) {\n        return 0;\n      } else if (x === maxX) {\n        return length - 1;\n      }\n      var xDelta = maxX;\n      for (var i = 1; i < length; i++) {\n        var rect = rectForOffset(i);\n        var curDeltaX = Math.abs(x - rect.left);\n        if (y <= rect.bottom) {\n          if (y < rect.top || curDeltaX > xDelta) {\n            return i - 1;\n          } else {\n            xDelta = curDeltaX;\n          }\n        }\n      }\n      return 0;\n    };\n    var inRect = function (rect, x, y) {\n      return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n    };\n\n    var locateOffset = function (doc, textnode, x, y, rect) {\n      var rangeForOffset = function (o) {\n        var r = doc.dom.createRange();\n        r.setStart(textnode.dom, o);\n        r.collapse(true);\n        return r;\n      };\n      var rectForOffset = function (o) {\n        var r = rangeForOffset(o);\n        return r.getBoundingClientRect();\n      };\n      var length = get$4(textnode).length;\n      var offset = searchForPoint(rectForOffset, x, y, rect.right, length);\n      return rangeForOffset(offset);\n    };\n    var locate = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      r.selectNode(node.dom);\n      var rects = r.getClientRects();\n      var foundRect = findMap(rects, function (rect) {\n        return inRect(rect, x, y) ? Optional.some(rect) : Optional.none();\n      });\n      return foundRect.map(function (rect) {\n        return locateOffset(doc, node, x, y, rect);\n      });\n    };\n\n    var searchInChildren = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      var nodes = children(node);\n      return findMap(nodes, function (n) {\n        r.selectNode(n.dom);\n        return inRect(r.getBoundingClientRect(), x, y) ? locateNode(doc, n, x, y) : Optional.none();\n      });\n    };\n    var locateNode = function (doc, node, x, y) {\n      return isText(node) ? locate(doc, node, x, y) : searchInChildren(doc, node, x, y);\n    };\n    var locate$1 = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      r.selectNode(node.dom);\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locateNode(doc, node, boundedX, boundedY);\n    };\n\n    var COLLAPSE_TO_LEFT = true;\n    var COLLAPSE_TO_RIGHT = false;\n    var getCollapseDirection = function (rect, x) {\n      return x - rect.left < rect.right - x ? COLLAPSE_TO_LEFT : COLLAPSE_TO_RIGHT;\n    };\n    var createCollapsedNode = function (doc, target, collapseDirection) {\n      var r = doc.dom.createRange();\n      r.selectNode(target.dom);\n      r.collapse(collapseDirection);\n      return r;\n    };\n    var locateInElement = function (doc, node, x) {\n      var cursorRange = doc.dom.createRange();\n      cursorRange.selectNode(node.dom);\n      var rect = cursorRange.getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      var f = collapseDirection === COLLAPSE_TO_LEFT ? first : last$1;\n      return f(node).map(function (target) {\n        return createCollapsedNode(doc, target, collapseDirection);\n      });\n    };\n    var locateInEmpty = function (doc, node, x) {\n      var rect = node.dom.getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      return Optional.some(createCollapsedNode(doc, node, collapseDirection));\n    };\n    var search = function (doc, node, x) {\n      var f = children(node).length === 0 ? locateInEmpty : locateInElement;\n      return f(doc, node, x);\n    };\n\n    var caretPositionFromPoint = function (doc, x, y) {\n      return Optional.from(doc.dom.caretPositionFromPoint(x, y)).bind(function (pos) {\n        if (pos.offsetNode === null) {\n          return Optional.none();\n        }\n        var r = doc.dom.createRange();\n        r.setStart(pos.offsetNode, pos.offset);\n        r.collapse();\n        return Optional.some(r);\n      });\n    };\n    var caretRangeFromPoint = function (doc, x, y) {\n      return Optional.from(doc.dom.caretRangeFromPoint(x, y));\n    };\n    var searchTextNodes = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      r.selectNode(node.dom);\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locate$1(doc, node, boundedX, boundedY);\n    };\n    var searchFromPoint = function (doc, x, y) {\n      return SugarElement.fromPoint(doc, x, y).bind(function (elem) {\n        var fallback = function () {\n          return search(doc, elem, x);\n        };\n        return children(elem).length === 0 ? fallback() : searchTextNodes(doc, elem, x, y).orThunk(fallback);\n      });\n    };\n    var availableSearch = function () {\n      if (document.caretPositionFromPoint) {\n        return caretPositionFromPoint;\n      } else if (document.caretRangeFromPoint) {\n        return caretRangeFromPoint;\n      } else {\n        return searchFromPoint;\n      }\n    }();\n    var fromPoint$1 = function (win, x, y) {\n      var doc = SugarElement.fromDom(win.document);\n      return availableSearch(doc, x, y).map(function (rng) {\n        return SimRange.create(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset);\n      });\n    };\n\n    var beforeSpecial = function (element, offset) {\n      var name$1 = name(element);\n      if ('input' === name$1) {\n        return Situ.after(element);\n      } else if (!contains([\n          'br',\n          'img'\n        ], name$1)) {\n        return Situ.on(element, offset);\n      } else {\n        return offset === 0 ? Situ.before(element) : Situ.after(element);\n      }\n    };\n    var preprocessRelative = function (startSitu, finishSitu) {\n      var start = startSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      var finish = finishSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      return SimSelection.relative(start, finish);\n    };\n    var preprocessExact = function (start, soffset, finish, foffset) {\n      var startSitu = beforeSpecial(start, soffset);\n      var finishSitu = beforeSpecial(finish, foffset);\n      return SimSelection.relative(startSitu, finishSitu);\n    };\n    var preprocess = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          var start = SugarElement.fromDom(rng.startContainer);\n          var finish = SugarElement.fromDom(rng.endContainer);\n          return preprocessExact(start, rng.startOffset, finish, rng.endOffset);\n        },\n        relative: preprocessRelative,\n        exact: preprocessExact\n      });\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner(start);\n      var rng = doc.dom.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var after$3 = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq$1(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var getNativeSelection = function (win) {\n      return Optional.from(win.getSelection());\n    };\n    var doSetNativeRange = function (win, rng) {\n      getNativeSelection(win).each(function (selection) {\n        selection.removeAllRanges();\n        selection.addRange(rng);\n      });\n    };\n    var doSetRange = function (win, start, soffset, finish, foffset) {\n      var rng = exactToNative(win, start, soffset, finish, foffset);\n      doSetNativeRange(win, rng);\n    };\n    var setLegacyRtlRange = function (win, selection, start, soffset, finish, foffset) {\n      selection.collapse(start.dom, soffset);\n      selection.extend(finish.dom, foffset);\n    };\n    var setRangeFromRelative = function (win, relative) {\n      return diagnose(win, relative).match({\n        ltr: function (start, soffset, finish, foffset) {\n          doSetRange(win, start, soffset, finish, foffset);\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          getNativeSelection(win).each(function (selection) {\n            if (selection.setBaseAndExtent) {\n              selection.setBaseAndExtent(start.dom, soffset, finish.dom, foffset);\n            } else if (selection.extend) {\n              try {\n                setLegacyRtlRange(win, selection, start, soffset, finish, foffset);\n              } catch (e) {\n                doSetRange(win, finish, foffset, start, soffset);\n              }\n            } else {\n              doSetRange(win, finish, foffset, start, soffset);\n            }\n          });\n        }\n      });\n    };\n    var setExact = function (win, start, soffset, finish, foffset) {\n      var relative = preprocessExact(start, soffset, finish, foffset);\n      setRangeFromRelative(win, relative);\n    };\n    var setRelative = function (win, startSitu, finishSitu) {\n      var relative = preprocessRelative(startSitu, finishSitu);\n      setRangeFromRelative(win, relative);\n    };\n    var toNative = function (selection) {\n      var win = SimSelection.getWin(selection).dom;\n      var getDomRange = function (start, soffset, finish, foffset) {\n        return exactToNative(win, start, soffset, finish, foffset);\n      };\n      var filtered = preprocess(selection);\n      return diagnose(win, filtered).match({\n        ltr: getDomRange,\n        rtl: getDomRange\n      });\n    };\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Optional.some(SimRange.create(SugarElement.fromDom(firstRng.startContainer), firstRng.startOffset, SugarElement.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      if (selection.anchorNode === null || selection.focusNode === null) {\n        return readRange(selection);\n      } else {\n        var anchor = SugarElement.fromDom(selection.anchorNode);\n        var focus_1 = SugarElement.fromDom(selection.focusNode);\n        return after$3(anchor, selection.anchorOffset, focus_1, selection.focusOffset) ? Optional.some(SimRange.create(anchor, selection.anchorOffset, focus_1, selection.focusOffset)) : readRange(selection);\n      }\n    };\n    var setToElement = function (win, element) {\n      var rng = selectNodeContents(win, element);\n      doSetNativeRange(win, rng);\n    };\n    var getExact = function (win) {\n      return getNativeSelection(win).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var get$c = function (win) {\n      return getExact(win).map(function (range) {\n        return SimSelection.exact(range.start, range.soffset, range.finish, range.foffset);\n      });\n    };\n    var getFirstRect$1 = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect(rng);\n    };\n    var getAtPoint = function (win, x, y) {\n      return fromPoint$1(win, x, y);\n    };\n    var clear = function (win) {\n      getNativeSelection(win).each(function (selection) {\n        return selection.removeAllRanges();\n      });\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var forward = function (editor, isRoot, cell) {\n      return go(editor, isRoot, next(cell));\n    };\n    var backward = function (editor, isRoot, cell) {\n      return go(editor, isRoot, prev(cell));\n    };\n    var getCellFirstCursorPosition = function (editor, cell) {\n      var selection = SimSelection.exact(cell, 0, cell, 0);\n      return toNative(selection);\n    };\n    var getNewRowCursorPosition = function (editor, table) {\n      var rows = descendants$1(table, 'tr');\n      return last(rows).bind(function (last) {\n        return descendant$1(last, 'td,th').map(function (first) {\n          return getCellFirstCursorPosition(editor, first);\n        });\n      });\n    };\n    var go = function (editor, isRoot, cell) {\n      return cell.fold(Optional.none, Optional.none, function (current, next) {\n        return first(next).map(function (cell) {\n          return getCellFirstCursorPosition(editor, cell);\n        });\n      }, function (current) {\n        return table(current, isRoot).bind(function (table) {\n          editor.execCommand('mceTableInsertRowAfter');\n          return getNewRowCursorPosition(editor, table);\n        });\n      });\n    };\n    var rootElements = [\n      'table',\n      'li',\n      'dl'\n    ];\n    var handle$1 = function (event, editor, cellSelection) {\n      if (event.keyCode === global$3.TAB) {\n        var body_1 = getBody$1(editor);\n        var isRoot_1 = function (element) {\n          var name$1 = name(element);\n          return eq$1(element, body_1) || contains(rootElements, name$1);\n        };\n        var rng = editor.selection.getRng();\n        var container = SugarElement.fromDom(event.shiftKey ? rng.startContainer : rng.endContainer);\n        cell(container, isRoot_1).each(function (cell) {\n          event.preventDefault();\n          table(cell, isRoot_1).each(cellSelection.clear);\n          editor.selection.collapse(event.shiftKey);\n          var navigation = event.shiftKey ? backward : forward;\n          var rng = navigation(editor, isRoot_1, cell);\n          rng.each(function (range) {\n            editor.selection.setRng(range);\n          });\n        });\n      }\n    };\n\n    var create$3 = function (selection, kill) {\n      return {\n        selection: selection,\n        kill: kill\n      };\n    };\n    var Response = { create: create$3 };\n\n    var create$4 = function (start, soffset, finish, foffset) {\n      return {\n        start: Situ.on(start, soffset),\n        finish: Situ.on(finish, foffset)\n      };\n    };\n    var Situs = { create: create$4 };\n\n    var convertToRange = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return SimRange.create(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset);\n    };\n    var makeSitus = Situs.create;\n\n    var sync = function (container, isRoot, start, soffset, finish, foffset, selectRange) {\n      if (!(eq$1(start, finish) && soffset === foffset)) {\n        return closest$1(start, 'td,th', isRoot).bind(function (s) {\n          return closest$1(finish, 'td,th', isRoot).bind(function (f) {\n            return detect$6(container, isRoot, s, f, selectRange);\n          });\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var detect$6 = function (container, isRoot, start, finish, selectRange) {\n      if (!eq$1(start, finish)) {\n        return identify(start, finish, isRoot).bind(function (cellSel) {\n          var boxes = cellSel.boxes.getOr([]);\n          if (boxes.length > 0) {\n            selectRange(container, boxes, cellSel.start, cellSel.finish);\n            return Optional.some(Response.create(Optional.some(makeSitus(start, 0, start, getEnd(start))), true));\n          } else {\n            return Optional.none();\n          }\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var update = function (rows, columns, container, selected, annotations) {\n      var updateSelection = function (newSels) {\n        annotations.clearBeforeUpdate(container);\n        annotations.selectRange(container, newSels.boxes, newSels.start, newSels.finish);\n        return newSels.boxes;\n      };\n      return shiftSelection(selected, rows, columns, annotations.firstSelectedSelector, annotations.lastSelectedSelector).map(updateSelection);\n    };\n\n    var traverse = function (item, mode) {\n      return {\n        item: item,\n        mode: mode\n      };\n    };\n    var backtrack = function (universe, item, _direction, transition) {\n      if (transition === void 0) {\n        transition = sidestep;\n      }\n      return universe.property().parent(item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n    var sidestep = function (universe, item, direction, transition) {\n      if (transition === void 0) {\n        transition = advance;\n      }\n      return direction.sibling(universe, item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n    var advance = function (universe, item, direction, transition) {\n      if (transition === void 0) {\n        transition = advance;\n      }\n      var children = universe.property().children(item);\n      var result = direction.first(children);\n      return result.map(function (r) {\n        return traverse(r, transition);\n      });\n    };\n    var successors = [\n      {\n        current: backtrack,\n        next: sidestep,\n        fallback: Optional.none()\n      },\n      {\n        current: sidestep,\n        next: advance,\n        fallback: Optional.some(backtrack)\n      },\n      {\n        current: advance,\n        next: advance,\n        fallback: Optional.some(sidestep)\n      }\n    ];\n    var go$1 = function (universe, item, mode, direction, rules) {\n      if (rules === void 0) {\n        rules = successors;\n      }\n      var ruleOpt = find(rules, function (succ) {\n        return succ.current === mode;\n      });\n      return ruleOpt.bind(function (rule) {\n        return rule.current(universe, item, direction, rule.next).orThunk(function () {\n          return rule.fallback.bind(function (fb) {\n            return go$1(universe, item, fb, direction);\n          });\n        });\n      });\n    };\n\n    var left = function () {\n      var sibling = function (universe, item) {\n        return universe.query().prevSibling(item);\n      };\n      var first = function (children) {\n        return children.length > 0 ? Optional.some(children[children.length - 1]) : Optional.none();\n      };\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n    var right = function () {\n      var sibling = function (universe, item) {\n        return universe.query().nextSibling(item);\n      };\n      var first = function (children) {\n        return children.length > 0 ? Optional.some(children[0]) : Optional.none();\n      };\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n    var Walkers = {\n      left: left,\n      right: right\n    };\n\n    var hone = function (universe, item, predicate, mode, direction, isRoot) {\n      var next = go$1(universe, item, mode, direction);\n      return next.bind(function (n) {\n        if (isRoot(n.item)) {\n          return Optional.none();\n        } else {\n          return predicate(n.item) ? Optional.some(n.item) : hone(universe, n.item, predicate, n.mode, direction, isRoot);\n        }\n      });\n    };\n    var left$1 = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, sidestep, Walkers.left(), isRoot);\n    };\n    var right$1 = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, sidestep, Walkers.right(), isRoot);\n    };\n\n    var isLeaf = function (universe) {\n      return function (element) {\n        return universe.property().children(element).length === 0;\n      };\n    };\n    var before$3 = function (universe, item, isRoot) {\n      return seekLeft(universe, item, isLeaf(universe), isRoot);\n    };\n    var after$4 = function (universe, item, isRoot) {\n      return seekRight(universe, item, isLeaf(universe), isRoot);\n    };\n    var seekLeft = left$1;\n    var seekRight = right$1;\n\n    var universe$3 = DomUniverse();\n    var before$4 = function (element, isRoot) {\n      return before$3(universe$3, element, isRoot);\n    };\n    var after$5 = function (element, isRoot) {\n      return after$4(universe$3, element, isRoot);\n    };\n    var seekLeft$1 = function (element, predicate, isRoot) {\n      return seekLeft(universe$3, element, predicate, isRoot);\n    };\n    var seekRight$1 = function (element, predicate, isRoot) {\n      return seekRight(universe$3, element, predicate, isRoot);\n    };\n\n    var ancestor$2 = function (scope, predicate, isRoot) {\n      return ancestor(scope, predicate, isRoot).isSome();\n    };\n\n    var adt$6 = Adt.generate([\n      { none: ['message'] },\n      { success: [] },\n      { failedUp: ['cell'] },\n      { failedDown: ['cell'] }\n    ]);\n    var isOverlapping = function (bridge, before, after) {\n      var beforeBounds = bridge.getRect(before);\n      var afterBounds = bridge.getRect(after);\n      return afterBounds.right > beforeBounds.left && afterBounds.left < beforeBounds.right;\n    };\n    var isRow = function (elem) {\n      return closest$1(elem, 'tr');\n    };\n    var verify = function (bridge, before, beforeOffset, after, afterOffset, failure, isRoot) {\n      return closest$1(after, 'td,th', isRoot).bind(function (afterCell) {\n        return closest$1(before, 'td,th', isRoot).map(function (beforeCell) {\n          if (!eq$1(afterCell, beforeCell)) {\n            return sharedOne$1(isRow, [\n              afterCell,\n              beforeCell\n            ]).fold(function () {\n              return isOverlapping(bridge, beforeCell, afterCell) ? adt$6.success() : failure(beforeCell);\n            }, function (_sharedRow) {\n              return failure(beforeCell);\n            });\n          } else {\n            return eq$1(after, afterCell) && getEnd(afterCell) === afterOffset ? failure(beforeCell) : adt$6.none('in same cell');\n          }\n        });\n      }).getOr(adt$6.none('default'));\n    };\n    var cata$2 = function (subject, onNone, onSuccess, onFailedUp, onFailedDown) {\n      return subject.fold(onNone, onSuccess, onFailedUp, onFailedDown);\n    };\n    var BeforeAfter = __assign(__assign({}, adt$6), {\n      verify: verify,\n      cata: cata$2\n    });\n\n    var inParent = function (parent, children, element, index) {\n      return {\n        parent: parent,\n        children: children,\n        element: element,\n        index: index\n      };\n    };\n    var indexInParent = function (element) {\n      return parent(element).bind(function (parent) {\n        var children$1 = children(parent);\n        return indexOf(children$1, element).map(function (index) {\n          return inParent(parent, children$1, element, index);\n        });\n      });\n    };\n    var indexOf = function (elements, element) {\n      return findIndex(elements, curry(eq$1, element));\n    };\n\n    var isBr = function (elem) {\n      return name(elem) === 'br';\n    };\n    var gatherer = function (cand, gather, isRoot) {\n      return gather(cand, isRoot).bind(function (target) {\n        return isText(target) && get$4(target).trim().length === 0 ? gatherer(target, gather, isRoot) : Optional.some(target);\n      });\n    };\n    var handleBr = function (isRoot, element, direction) {\n      return direction.traverse(element).orThunk(function () {\n        return gatherer(element, direction.gather, isRoot);\n      }).map(direction.relative);\n    };\n    var findBr = function (element, offset) {\n      return child(element, offset).filter(isBr).orThunk(function () {\n        return child(element, offset - 1).filter(isBr);\n      });\n    };\n    var handleParent = function (isRoot, element, offset, direction) {\n      return findBr(element, offset).bind(function (br) {\n        return direction.traverse(br).fold(function () {\n          return gatherer(br, direction.gather, isRoot).map(direction.relative);\n        }, function (adjacent) {\n          return indexInParent(adjacent).map(function (info) {\n            return Situ.on(info.parent, info.index);\n          });\n        });\n      });\n    };\n    var tryBr = function (isRoot, element, offset, direction) {\n      var target = isBr(element) ? handleBr(isRoot, element, direction) : handleParent(isRoot, element, offset, direction);\n      return target.map(function (tgt) {\n        return {\n          start: tgt,\n          finish: tgt\n        };\n      });\n    };\n    var process = function (analysis) {\n      return BeforeAfter.cata(analysis, function (_message) {\n        return Optional.none();\n      }, function () {\n        return Optional.none();\n      }, function (cell) {\n        return Optional.some(point(cell, 0));\n      }, function (cell) {\n        return Optional.some(point(cell, getEnd(cell)));\n      });\n    };\n\n    var moveDown = function (caret, amount) {\n      return {\n        left: caret.left,\n        top: caret.top + amount,\n        right: caret.right,\n        bottom: caret.bottom + amount\n      };\n    };\n    var moveUp = function (caret, amount) {\n      return {\n        left: caret.left,\n        top: caret.top - amount,\n        right: caret.right,\n        bottom: caret.bottom - amount\n      };\n    };\n    var translate = function (caret, xDelta, yDelta) {\n      return {\n        left: caret.left + xDelta,\n        top: caret.top + yDelta,\n        right: caret.right + xDelta,\n        bottom: caret.bottom + yDelta\n      };\n    };\n    var getTop$1 = function (caret) {\n      return caret.top;\n    };\n    var getBottom = function (caret) {\n      return caret.bottom;\n    };\n\n    var getPartialBox = function (bridge, element, offset) {\n      if (offset >= 0 && offset < getEnd(element)) {\n        return bridge.getRangedRect(element, offset, element, offset + 1);\n      } else if (offset > 0) {\n        return bridge.getRangedRect(element, offset - 1, element, offset);\n      }\n      return Optional.none();\n    };\n    var toCaret = function (rect) {\n      return {\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom\n      };\n    };\n    var getElemBox = function (bridge, element) {\n      return Optional.some(bridge.getRect(element));\n    };\n    var getBoxAt = function (bridge, element, offset) {\n      if (isElement(element)) {\n        return getElemBox(bridge, element).map(toCaret);\n      } else if (isText(element)) {\n        return getPartialBox(bridge, element, offset).map(toCaret);\n      } else {\n        return Optional.none();\n      }\n    };\n    var getEntireBox = function (bridge, element) {\n      if (isElement(element)) {\n        return getElemBox(bridge, element).map(toCaret);\n      } else if (isText(element)) {\n        return bridge.getRangedRect(element, 0, element, getEnd(element)).map(toCaret);\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var JUMP_SIZE = 5;\n    var NUM_RETRIES = 100;\n    var adt$7 = Adt.generate([\n      { none: [] },\n      { retry: ['caret'] }\n    ]);\n    var isOutside = function (caret, box) {\n      return caret.left < box.left || Math.abs(box.right - caret.left) < 1 || caret.left > box.right;\n    };\n    var inOutsideBlock = function (bridge, element, caret) {\n      return closest(element, isBlock$1).fold(never, function (cell) {\n        return getEntireBox(bridge, cell).exists(function (box) {\n          return isOutside(caret, box);\n        });\n      });\n    };\n    var adjustDown = function (bridge, element, guessBox, original, caret) {\n      var lowerCaret = moveDown(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.bottom - original.bottom) < 1) {\n        return adt$7.retry(lowerCaret);\n      } else if (guessBox.top > caret.bottom) {\n        return adt$7.retry(lowerCaret);\n      } else if (guessBox.top === caret.bottom) {\n        return adt$7.retry(moveDown(caret, 1));\n      } else {\n        return inOutsideBlock(bridge, element, caret) ? adt$7.retry(translate(lowerCaret, JUMP_SIZE, 0)) : adt$7.none();\n      }\n    };\n    var adjustUp = function (bridge, element, guessBox, original, caret) {\n      var higherCaret = moveUp(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.top - original.top) < 1) {\n        return adt$7.retry(higherCaret);\n      } else if (guessBox.bottom < caret.top) {\n        return adt$7.retry(higherCaret);\n      } else if (guessBox.bottom === caret.top) {\n        return adt$7.retry(moveUp(caret, 1));\n      } else {\n        return inOutsideBlock(bridge, element, caret) ? adt$7.retry(translate(higherCaret, JUMP_SIZE, 0)) : adt$7.none();\n      }\n    };\n    var upMovement = {\n      point: getTop$1,\n      adjuster: adjustUp,\n      move: moveUp,\n      gather: before$4\n    };\n    var downMovement = {\n      point: getBottom,\n      adjuster: adjustDown,\n      move: moveDown,\n      gather: after$5\n    };\n    var isAtTable = function (bridge, x, y) {\n      return bridge.elementFromPoint(x, y).filter(function (elm) {\n        return name(elm) === 'table';\n      }).isSome();\n    };\n    var adjustForTable = function (bridge, movement, original, caret, numRetries) {\n      return adjustTil(bridge, movement, original, movement.move(caret, JUMP_SIZE), numRetries);\n    };\n    var adjustTil = function (bridge, movement, original, caret, numRetries) {\n      if (numRetries === 0) {\n        return Optional.some(caret);\n      }\n      if (isAtTable(bridge, caret.left, movement.point(caret))) {\n        return adjustForTable(bridge, movement, original, caret, numRetries - 1);\n      }\n      return bridge.situsFromPoint(caret.left, movement.point(caret)).bind(function (guess) {\n        return guess.start.fold(Optional.none, function (element) {\n          return getEntireBox(bridge, element).bind(function (guessBox) {\n            return movement.adjuster(bridge, element, guessBox, original, caret).fold(Optional.none, function (newCaret) {\n              return adjustTil(bridge, movement, original, newCaret, numRetries - 1);\n            });\n          }).orThunk(function () {\n            return Optional.some(caret);\n          });\n        }, Optional.none);\n      });\n    };\n    var ieTryDown = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left, caret.bottom + JUMP_SIZE);\n    };\n    var ieTryUp = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left, caret.top - JUMP_SIZE);\n    };\n    var checkScroll = function (movement, adjusted, bridge) {\n      if (movement.point(adjusted) > bridge.getInnerHeight()) {\n        return Optional.some(movement.point(adjusted) - bridge.getInnerHeight());\n      } else if (movement.point(adjusted) < 0) {\n        return Optional.some(-movement.point(adjusted));\n      } else {\n        return Optional.none();\n      }\n    };\n    var retry = function (movement, bridge, caret) {\n      var moved = movement.move(caret, JUMP_SIZE);\n      var adjusted = adjustTil(bridge, movement, caret, moved, NUM_RETRIES).getOr(moved);\n      return checkScroll(movement, adjusted, bridge).fold(function () {\n        return bridge.situsFromPoint(adjusted.left, movement.point(adjusted));\n      }, function (delta) {\n        bridge.scrollBy(0, delta);\n        return bridge.situsFromPoint(adjusted.left, movement.point(adjusted) - delta);\n      });\n    };\n    var Retries = {\n      tryUp: curry(retry, upMovement),\n      tryDown: curry(retry, downMovement),\n      ieTryUp: ieTryUp,\n      ieTryDown: ieTryDown,\n      getJumpSize: constant(JUMP_SIZE)\n    };\n\n    var MAX_RETRIES = 20;\n    var findSpot = function (bridge, isRoot, direction) {\n      return bridge.getSelection().bind(function (sel) {\n        return tryBr(isRoot, sel.finish, sel.foffset, direction).fold(function () {\n          return Optional.some(point(sel.finish, sel.foffset));\n        }, function (brNeighbour) {\n          var range = bridge.fromSitus(brNeighbour);\n          var analysis = BeforeAfter.verify(bridge, sel.finish, sel.foffset, range.finish, range.foffset, direction.failure, isRoot);\n          return process(analysis);\n        });\n      });\n    };\n    var scan$1 = function (bridge, isRoot, element, offset, direction, numRetries) {\n      if (numRetries === 0) {\n        return Optional.none();\n      }\n      return tryCursor(bridge, isRoot, element, offset, direction).bind(function (situs) {\n        var range = bridge.fromSitus(situs);\n        var analysis = BeforeAfter.verify(bridge, element, offset, range.finish, range.foffset, direction.failure, isRoot);\n        return BeforeAfter.cata(analysis, function () {\n          return Optional.none();\n        }, function () {\n          return Optional.some(situs);\n        }, function (cell) {\n          if (eq$1(element, cell) && offset === 0) {\n            return tryAgain(bridge, element, offset, moveUp, direction);\n          } else {\n            return scan$1(bridge, isRoot, cell, 0, direction, numRetries - 1);\n          }\n        }, function (cell) {\n          if (eq$1(element, cell) && offset === getEnd(cell)) {\n            return tryAgain(bridge, element, offset, moveDown, direction);\n          } else {\n            return scan$1(bridge, isRoot, cell, getEnd(cell), direction, numRetries - 1);\n          }\n        });\n      });\n    };\n    var tryAgain = function (bridge, element, offset, move, direction) {\n      return getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, move(box, Retries.getJumpSize()));\n      });\n    };\n    var tryAt = function (bridge, direction, box) {\n      var browser = detect$3().browser;\n      if (browser.isChrome() || browser.isSafari() || browser.isFirefox() || browser.isEdge()) {\n        return direction.otherRetry(bridge, box);\n      } else if (browser.isIE()) {\n        return direction.ieRetry(bridge, box);\n      } else {\n        return Optional.none();\n      }\n    };\n    var tryCursor = function (bridge, isRoot, element, offset, direction) {\n      return getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, box);\n      });\n    };\n    var handle$2 = function (bridge, isRoot, direction) {\n      return findSpot(bridge, isRoot, direction).bind(function (spot) {\n        return scan$1(bridge, isRoot, spot.element, spot.offset, direction, MAX_RETRIES).map(bridge.fromSitus);\n      });\n    };\n\n    var inSameTable = function (elem, table) {\n      return ancestor$2(elem, function (e) {\n        return parent(e).exists(function (p) {\n          return eq$1(p, table);\n        });\n      });\n    };\n    var simulate = function (bridge, isRoot, direction, initial, anchor) {\n      return closest$1(initial, 'td,th', isRoot).bind(function (start) {\n        return closest$1(start, 'table', isRoot).bind(function (table) {\n          if (!inSameTable(anchor, table)) {\n            return Optional.none();\n          }\n          return handle$2(bridge, isRoot, direction).bind(function (range) {\n            return closest$1(range.finish, 'td,th', isRoot).map(function (finish) {\n              return {\n                start: start,\n                finish: finish,\n                range: range\n              };\n            });\n          });\n        });\n      });\n    };\n    var navigate = function (bridge, isRoot, direction, initial, anchor, precheck) {\n      if (detect$3().browser.isIE()) {\n        return Optional.none();\n      } else {\n        return precheck(initial, isRoot).orThunk(function () {\n          return simulate(bridge, isRoot, direction, initial, anchor).map(function (info) {\n            var range = info.range;\n            return Response.create(Optional.some(makeSitus(range.start, range.soffset, range.finish, range.foffset)), true);\n          });\n        });\n      }\n    };\n    var firstUpCheck = function (initial, isRoot) {\n      return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n        return closest$1(startRow, 'table', isRoot).bind(function (table) {\n          var rows = descendants$1(table, 'tr');\n          if (eq$1(startRow, rows[0])) {\n            return seekLeft$1(table, function (element) {\n              return last$1(element).isSome();\n            }, isRoot).map(function (last) {\n              var lastOffset = getEnd(last);\n              return Response.create(Optional.some(makeSitus(last, lastOffset, last, lastOffset)), true);\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n      });\n    };\n    var lastDownCheck = function (initial, isRoot) {\n      return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n        return closest$1(startRow, 'table', isRoot).bind(function (table) {\n          var rows = descendants$1(table, 'tr');\n          if (eq$1(startRow, rows[rows.length - 1])) {\n            return seekRight$1(table, function (element) {\n              return first(element).isSome();\n            }, isRoot).map(function (first) {\n              return Response.create(Optional.some(makeSitus(first, 0, first, 0)), true);\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n      });\n    };\n    var select = function (bridge, container, isRoot, direction, initial, anchor, selectRange) {\n      return simulate(bridge, isRoot, direction, initial, anchor).bind(function (info) {\n        return detect$6(container, isRoot, info.start, info.finish, selectRange);\n      });\n    };\n\n    var value$1 = function () {\n      var subject = Cell(Optional.none());\n      var clear = function () {\n        return subject.set(Optional.none());\n      };\n      var set = function (s) {\n        return subject.set(Optional.some(s));\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var findCell = function (target, isRoot) {\n      return closest$1(target, 'td,th', isRoot);\n    };\n    var MouseSelection = function (bridge, container, isRoot, annotations) {\n      var cursor = value$1();\n      var clearstate = cursor.clear;\n      var applySelection = function (event) {\n        cursor.on(function (start) {\n          annotations.clearBeforeUpdate(container);\n          findCell(event.target, isRoot).each(function (finish) {\n            identify(start, finish, isRoot).each(function (cellSel) {\n              var boxes = cellSel.boxes.getOr([]);\n              if (boxes.length > 1 || boxes.length === 1 && !eq$1(start, finish)) {\n                annotations.selectRange(container, boxes, cellSel.start, cellSel.finish);\n                bridge.selectContents(finish);\n              }\n            });\n          });\n        });\n      };\n      var mousedown = function (event) {\n        annotations.clear(container);\n        findCell(event.target, isRoot).each(cursor.set);\n      };\n      var mouseover = function (event) {\n        applySelection(event);\n      };\n      var mouseup = function (event) {\n        applySelection(event);\n        clearstate();\n      };\n      return {\n        clearstate: clearstate,\n        mousedown: mousedown,\n        mouseover: mouseover,\n        mouseup: mouseup\n      };\n    };\n\n    var down = {\n      traverse: nextSibling,\n      gather: after$5,\n      relative: Situ.before,\n      otherRetry: Retries.tryDown,\n      ieRetry: Retries.ieTryDown,\n      failure: BeforeAfter.failedDown\n    };\n    var up = {\n      traverse: prevSibling,\n      gather: before$4,\n      relative: Situ.before,\n      otherRetry: Retries.tryUp,\n      ieRetry: Retries.ieTryUp,\n      failure: BeforeAfter.failedUp\n    };\n\n    var isKey = function (key) {\n      return function (keycode) {\n        return keycode === key;\n      };\n    };\n    var isUp = isKey(38);\n    var isDown = isKey(40);\n    var isNavigation = function (keycode) {\n      return keycode >= 37 && keycode <= 40;\n    };\n    var ltr$2 = {\n      isBackward: isKey(37),\n      isForward: isKey(39)\n    };\n    var rtl$2 = {\n      isBackward: isKey(39),\n      isForward: isKey(37)\n    };\n\n    var get$d = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var by = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollBy(x, y);\n      }\n    };\n\n    var WindowBridge = function (win) {\n      var elementFromPoint = function (x, y) {\n        return SugarElement.fromPoint(SugarElement.fromDom(win.document), x, y);\n      };\n      var getRect = function (element) {\n        return element.dom.getBoundingClientRect();\n      };\n      var getRangedRect = function (start, soffset, finish, foffset) {\n        var sel = SimSelection.exact(start, soffset, finish, foffset);\n        return getFirstRect$1(win, sel);\n      };\n      var getSelection = function () {\n        return get$c(win).map(function (exactAdt) {\n          return convertToRange(win, exactAdt);\n        });\n      };\n      var fromSitus = function (situs) {\n        var relative = SimSelection.relative(situs.start, situs.finish);\n        return convertToRange(win, relative);\n      };\n      var situsFromPoint = function (x, y) {\n        return getAtPoint(win, x, y).map(function (exact) {\n          return Situs.create(exact.start, exact.soffset, exact.finish, exact.foffset);\n        });\n      };\n      var clearSelection = function () {\n        clear(win);\n      };\n      var collapseSelection = function (toStart) {\n        if (toStart === void 0) {\n          toStart = false;\n        }\n        get$c(win).each(function (sel) {\n          return sel.fold(function (rng) {\n            return rng.collapse(toStart);\n          }, function (startSitu, finishSitu) {\n            var situ = toStart ? startSitu : finishSitu;\n            setRelative(win, situ, situ);\n          }, function (start, soffset, finish, foffset) {\n            var node = toStart ? start : finish;\n            var offset = toStart ? soffset : foffset;\n            setExact(win, node, offset, node, offset);\n          });\n        });\n      };\n      var selectContents = function (element) {\n        setToElement(win, element);\n      };\n      var setSelection = function (sel) {\n        setExact(win, sel.start, sel.soffset, sel.finish, sel.foffset);\n      };\n      var setRelativeSelection = function (start, finish) {\n        setRelative(win, start, finish);\n      };\n      var getInnerHeight = function () {\n        return win.innerHeight;\n      };\n      var getScrollY = function () {\n        var pos = get$d(SugarElement.fromDom(win.document));\n        return pos.top;\n      };\n      var scrollBy = function (x, y) {\n        by(x, y, SugarElement.fromDom(win.document));\n      };\n      return {\n        elementFromPoint: elementFromPoint,\n        getRect: getRect,\n        getRangedRect: getRangedRect,\n        getSelection: getSelection,\n        fromSitus: fromSitus,\n        situsFromPoint: situsFromPoint,\n        clearSelection: clearSelection,\n        collapseSelection: collapseSelection,\n        setSelection: setSelection,\n        setRelativeSelection: setRelativeSelection,\n        selectContents: selectContents,\n        getInnerHeight: getInnerHeight,\n        getScrollY: getScrollY,\n        scrollBy: scrollBy\n      };\n    };\n\n    var rc = function (rows, cols) {\n      return {\n        rows: rows,\n        cols: cols\n      };\n    };\n    var mouse = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      var handlers = MouseSelection(bridge, container, isRoot, annotations);\n      return {\n        clearstate: handlers.clearstate,\n        mousedown: handlers.mousedown,\n        mouseover: handlers.mouseover,\n        mouseup: handlers.mouseup\n      };\n    };\n    var keyboard = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      var clearToNavigate = function () {\n        annotations.clear(container);\n        return Optional.none();\n      };\n      var keydown = function (event, start, soffset, finish, foffset, direction) {\n        var realEvent = event.raw;\n        var keycode = realEvent.which;\n        var shiftKey = realEvent.shiftKey === true;\n        var handler = retrieve(container, annotations.selectedSelector).fold(function () {\n          if (isDown(keycode) && shiftKey) {\n            return curry(select, bridge, container, isRoot, down, finish, start, annotations.selectRange);\n          } else if (isUp(keycode) && shiftKey) {\n            return curry(select, bridge, container, isRoot, up, finish, start, annotations.selectRange);\n          } else if (isDown(keycode)) {\n            return curry(navigate, bridge, isRoot, down, finish, start, lastDownCheck);\n          } else if (isUp(keycode)) {\n            return curry(navigate, bridge, isRoot, up, finish, start, firstUpCheck);\n          } else {\n            return Optional.none;\n          }\n        }, function (selected) {\n          var update$1 = function (attempts) {\n            return function () {\n              var navigation = findMap(attempts, function (delta) {\n                return update(delta.rows, delta.cols, container, selected, annotations);\n              });\n              return navigation.fold(function () {\n                return getEdges(container, annotations.firstSelectedSelector, annotations.lastSelectedSelector).map(function (edges) {\n                  var relative = isDown(keycode) || direction.isForward(keycode) ? Situ.after : Situ.before;\n                  bridge.setRelativeSelection(Situ.on(edges.first, 0), relative(edges.table));\n                  annotations.clear(container);\n                  return Response.create(Optional.none(), true);\n                });\n              }, function (_) {\n                return Optional.some(Response.create(Optional.none(), true));\n              });\n            };\n          };\n          if (isDown(keycode) && shiftKey) {\n            return update$1([rc(+1, 0)]);\n          } else if (isUp(keycode) && shiftKey) {\n            return update$1([rc(-1, 0)]);\n          } else if (direction.isBackward(keycode) && shiftKey) {\n            return update$1([\n              rc(0, -1),\n              rc(-1, 0)\n            ]);\n          } else if (direction.isForward(keycode) && shiftKey) {\n            return update$1([\n              rc(0, +1),\n              rc(+1, 0)\n            ]);\n          } else if (isNavigation(keycode) && shiftKey === false) {\n            return clearToNavigate;\n          } else {\n            return Optional.none;\n          }\n        });\n        return handler();\n      };\n      var keyup = function (event, start, soffset, finish, foffset) {\n        return retrieve(container, annotations.selectedSelector).fold(function () {\n          var realEvent = event.raw;\n          var keycode = realEvent.which;\n          var shiftKey = realEvent.shiftKey === true;\n          if (shiftKey === false) {\n            return Optional.none();\n          }\n          if (isNavigation(keycode)) {\n            return sync(container, isRoot, start, soffset, finish, foffset, annotations.selectRange);\n          } else {\n            return Optional.none();\n          }\n        }, Optional.none);\n      };\n      return {\n        keydown: keydown,\n        keyup: keyup\n      };\n    };\n    var external = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      return function (start, finish) {\n        annotations.clearBeforeUpdate(container);\n        identify(start, finish, isRoot).each(function (cellSel) {\n          var boxes = cellSel.boxes.getOr([]);\n          annotations.selectRange(container, boxes, cellSel.start, cellSel.finish);\n          bridge.selectContents(finish);\n          bridge.collapseSelection();\n        });\n      };\n    };\n\n    var remove$7 = function (element, classes) {\n      each(classes, function (x) {\n        remove$5(element, x);\n      });\n    };\n\n    var addClass = function (clazz) {\n      return function (element) {\n        add$3(element, clazz);\n      };\n    };\n    var removeClasses = function (classes) {\n      return function (element) {\n        remove$7(element, classes);\n      };\n    };\n\n    var byClass = function (ephemera) {\n      var addSelectionClass = addClass(ephemera.selected);\n      var removeSelectionClasses = removeClasses([\n        ephemera.selected,\n        ephemera.lastSelected,\n        ephemera.firstSelected\n      ]);\n      var clear = function (container) {\n        var sels = descendants$1(container, ephemera.selectedSelector);\n        each(sels, removeSelectionClasses);\n      };\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each(cells, addSelectionClass);\n        add$3(start, ephemera.firstSelected);\n        add$3(finish, ephemera.lastSelected);\n      };\n      return {\n        clearBeforeUpdate: clear,\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n    var byAttr = function (ephemera, onSelection, onClear) {\n      var removeSelectionAttributes = function (element) {\n        remove(element, ephemera.selected);\n        remove(element, ephemera.firstSelected);\n        remove(element, ephemera.lastSelected);\n      };\n      var addSelectionAttribute = function (element) {\n        set(element, ephemera.selected, '1');\n      };\n      var clear = function (container) {\n        clearBeforeUpdate(container);\n        onClear();\n      };\n      var clearBeforeUpdate = function (container) {\n        var sels = descendants$1(container, ephemera.selectedSelector);\n        each(sels, removeSelectionAttributes);\n      };\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each(cells, addSelectionAttribute);\n        set(start, ephemera.firstSelected, '1');\n        set(finish, ephemera.lastSelected, '1');\n        onSelection(cells, start, finish);\n      };\n      return {\n        clearBeforeUpdate: clearBeforeUpdate,\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n    var SelectionAnnotation = {\n      byClass: byClass,\n      byAttr: byAttr\n    };\n\n    var getUpOrLeftCells = function (grid, selectedCells, generators) {\n      var upGrid = grid.slice(0, selectedCells[selectedCells.length - 1].row + 1);\n      var upDetails = toDetailList(upGrid, generators);\n      return bind(upDetails, function (detail) {\n        var slicedCells = detail.cells.slice(0, selectedCells[selectedCells.length - 1].column + 1);\n        return map(slicedCells, function (cell) {\n          return cell.element;\n        });\n      });\n    };\n    var getDownOrRightCells = function (grid, selectedCells, generators) {\n      var downGrid = grid.slice(selectedCells[0].row + selectedCells[0].rowspan - 1, grid.length);\n      var downDetails = toDetailList(downGrid, generators);\n      return bind(downDetails, function (detail) {\n        var slicedCells = detail.cells.slice(selectedCells[0].column + selectedCells[0].colspan - 1, detail.cells.length);\n        return map(slicedCells, function (cell) {\n          return cell.element;\n        });\n      });\n    };\n    var getOtherCells = function (table, target, generators) {\n      var warehouse = Warehouse.fromTable(table);\n      var details = onCells(warehouse, target);\n      return details.map(function (selectedCells) {\n        var grid = toGrid(warehouse, generators, false);\n        var upOrLeftCells = getUpOrLeftCells(grid, selectedCells, generators);\n        var downOrRightCells = getDownOrRightCells(grid, selectedCells, generators);\n        return {\n          upOrLeftCells: upOrLeftCells,\n          downOrRightCells: downOrRightCells\n        };\n      });\n    };\n\n    var hasInternalTarget = function (e) {\n      return has$1(SugarElement.fromDom(e.target), 'ephox-snooker-resizer-bar') === false;\n    };\n    function CellSelection (editor, lazyResize, selectionTargets) {\n      var onSelection = function (cells, start, finish) {\n        selectionTargets.targets().each(function (targets) {\n          var tableOpt = table(start);\n          tableOpt.each(function (table) {\n            var cloneFormats = getCloneElements(editor);\n            var generators = cellOperations(noop, SugarElement.fromDom(editor.getDoc()), cloneFormats);\n            var otherCells = getOtherCells(table, targets, generators);\n            fireTableSelectionChange(editor, cells, start, finish, otherCells);\n          });\n        });\n      };\n      var onClear = function () {\n        return fireTableSelectionClear(editor);\n      };\n      var annotations = SelectionAnnotation.byAttr(ephemera, onSelection, onClear);\n      editor.on('init', function (_e) {\n        var win = editor.getWin();\n        var body = getBody$1(editor);\n        var isRoot = getIsRoot(editor);\n        var syncSelection = function () {\n          var sel = editor.selection;\n          var start = SugarElement.fromDom(sel.getStart());\n          var end = SugarElement.fromDom(sel.getEnd());\n          var shared = sharedOne$1(table, [\n            start,\n            end\n          ]);\n          shared.fold(function () {\n            return annotations.clear(body);\n          }, noop);\n        };\n        var mouseHandlers = mouse(win, body, isRoot, annotations);\n        var keyHandlers = keyboard(win, body, isRoot, annotations);\n        var external$1 = external(win, body, isRoot, annotations);\n        var hasShiftKey = function (event) {\n          return event.raw.shiftKey === true;\n        };\n        editor.on('TableSelectorChange', function (e) {\n          return external$1(e.start, e.finish);\n        });\n        var handleResponse = function (event, response) {\n          if (!hasShiftKey(event)) {\n            return;\n          }\n          if (response.kill) {\n            event.kill();\n          }\n          response.selection.each(function (ns) {\n            var relative = SimSelection.relative(ns.start, ns.finish);\n            var rng = asLtrRange(win, relative);\n            editor.selection.setRng(rng);\n          });\n        };\n        var keyup = function (event) {\n          var wrappedEvent = fromRawEvent$1(event);\n          if (wrappedEvent.raw.shiftKey && isNavigation(wrappedEvent.raw.which)) {\n            var rng = editor.selection.getRng();\n            var start = SugarElement.fromDom(rng.startContainer);\n            var end = SugarElement.fromDom(rng.endContainer);\n            keyHandlers.keyup(wrappedEvent, start, rng.startOffset, end, rng.endOffset).each(function (response) {\n              handleResponse(wrappedEvent, response);\n            });\n          }\n        };\n        var keydown = function (event) {\n          var wrappedEvent = fromRawEvent$1(event);\n          lazyResize().each(function (resize) {\n            return resize.hideBars();\n          });\n          var rng = editor.selection.getRng();\n          var start = SugarElement.fromDom(rng.startContainer);\n          var end = SugarElement.fromDom(rng.endContainer);\n          var direction = onDirection(ltr$2, rtl$2)(SugarElement.fromDom(editor.selection.getStart()));\n          keyHandlers.keydown(wrappedEvent, start, rng.startOffset, end, rng.endOffset, direction).each(function (response) {\n            handleResponse(wrappedEvent, response);\n          });\n          lazyResize().each(function (resize) {\n            return resize.showBars();\n          });\n        };\n        var isLeftMouse = function (raw) {\n          return raw.button === 0;\n        };\n        var isLeftButtonPressed = function (raw) {\n          if (raw.buttons === undefined) {\n            return true;\n          }\n          if (global$2.browser.isEdge() && raw.buttons === 0) {\n            return true;\n          }\n          return (raw.buttons & 1) !== 0;\n        };\n        var dragStart = function (_e) {\n          mouseHandlers.clearstate();\n        };\n        var mouseDown = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mousedown(fromRawEvent$1(e));\n          }\n        };\n        var mouseOver = function (e) {\n          if (isLeftButtonPressed(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseover(fromRawEvent$1(e));\n          }\n        };\n        var mouseUp = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseup(fromRawEvent$1(e));\n          }\n        };\n        var getDoubleTap = function () {\n          var lastTarget = Cell(SugarElement.fromDom(body));\n          var lastTimeStamp = Cell(0);\n          var touchEnd = function (t) {\n            var target = SugarElement.fromDom(t.target);\n            if (name(target) === 'td' || name(target) === 'th') {\n              var lT = lastTarget.get();\n              var lTS = lastTimeStamp.get();\n              if (eq$1(lT, target) && t.timeStamp - lTS < 300) {\n                t.preventDefault();\n                external$1(target, target);\n              }\n            }\n            lastTarget.set(target);\n            lastTimeStamp.set(t.timeStamp);\n          };\n          return { touchEnd: touchEnd };\n        };\n        var doubleTap = getDoubleTap();\n        editor.on('dragstart', dragStart);\n        editor.on('mousedown', mouseDown);\n        editor.on('mouseover', mouseOver);\n        editor.on('mouseup', mouseUp);\n        editor.on('touchend', doubleTap.touchEnd);\n        editor.on('keyup', keyup);\n        editor.on('keydown', keydown);\n        editor.on('NodeChange', syncSelection);\n      });\n      return { clear: annotations.clear };\n    }\n\n    var getSelectionTargets = function (editor, selections) {\n      var targets = Cell(Optional.none());\n      var changeHandlers = Cell([]);\n      var selectionDetails = Optional.none();\n      var isCaption = isTag('caption');\n      var isDisabledForSelection = function (key) {\n        return selectionDetails.forall(function (details) {\n          return !details[key];\n        });\n      };\n      var findTargets = function () {\n        return getSelectionStartCellOrCaption(getSelectionStart(editor), getIsRoot(editor)).bind(function (cellOrCaption) {\n          var table$1 = table(cellOrCaption);\n          return table$1.map(function (table) {\n            if (isCaption(cellOrCaption)) {\n              return noMenu(cellOrCaption);\n            } else {\n              return forMenu(selections, table, cellOrCaption);\n            }\n          });\n        });\n      };\n      var getExtractedDetails = function (targets) {\n        var tableOpt = table(targets.element);\n        return tableOpt.map(function (table) {\n          var warehouse = Warehouse.fromTable(table);\n          var selectedCells = onCells(warehouse, targets).getOr([]);\n          var locked = foldl(selectedCells, function (acc, cell) {\n            if (cell.isLocked) {\n              acc.onAny = true;\n              if (cell.column === 0) {\n                acc.onFirst = true;\n              } else if (cell.column + cell.colspan >= warehouse.grid.columns) {\n                acc.onLast = true;\n              }\n            }\n            return acc;\n          }, {\n            onAny: false,\n            onFirst: false,\n            onLast: false\n          });\n          return {\n            mergeable: onUnlockedMergable(warehouse, targets).isSome(),\n            unmergeable: onUnlockedUnmergable(warehouse, targets).isSome(),\n            locked: locked\n          };\n        });\n      };\n      var resetTargets = function () {\n        targets.set(cached(findTargets)());\n        selectionDetails = targets.get().bind(getExtractedDetails);\n        each(changeHandlers.get(), function (handler) {\n          return handler();\n        });\n      };\n      var onSetup = function (api, isDisabled) {\n        var handler = function () {\n          return targets.get().fold(function () {\n            api.setDisabled(true);\n          }, function (targets) {\n            api.setDisabled(isDisabled(targets));\n          });\n        };\n        handler();\n        changeHandlers.set(changeHandlers.get().concat([handler]));\n        return function () {\n          changeHandlers.set(filter(changeHandlers.get(), function (h) {\n            return h !== handler;\n          }));\n        };\n      };\n      var isDisabledFromLocked = function (lockedDisable) {\n        return selectionDetails.exists(function (details) {\n          return details.locked[lockedDisable];\n        });\n      };\n      var onSetupTable = function (api) {\n        return onSetup(api, function (_) {\n          return false;\n        });\n      };\n      var onSetupCellOrRow = function (api) {\n        return onSetup(api, function (targets) {\n          return isCaption(targets.element);\n        });\n      };\n      var onSetupColumn = function (lockedDisable) {\n        return function (api) {\n          return onSetup(api, function (targets) {\n            return isCaption(targets.element) || isDisabledFromLocked(lockedDisable);\n          });\n        };\n      };\n      var onSetupPasteable = function (getClipboardData) {\n        return function (api) {\n          return onSetup(api, function (targets) {\n            return isCaption(targets.element) || getClipboardData().isNone();\n          });\n        };\n      };\n      var onSetupPasteableColumn = function (getClipboardData, lockedDisable) {\n        return function (api) {\n          return onSetup(api, function (targets) {\n            return isCaption(targets.element) || getClipboardData().isNone() || isDisabledFromLocked(lockedDisable);\n          });\n        };\n      };\n      var onSetupMergeable = function (api) {\n        return onSetup(api, function (_targets) {\n          return isDisabledForSelection('mergeable');\n        });\n      };\n      var onSetupUnmergeable = function (api) {\n        return onSetup(api, function (_targets) {\n          return isDisabledForSelection('unmergeable');\n        });\n      };\n      editor.on('NodeChange ExecCommand TableSelectorChange', resetTargets);\n      return {\n        onSetupTable: onSetupTable,\n        onSetupCellOrRow: onSetupCellOrRow,\n        onSetupColumn: onSetupColumn,\n        onSetupPasteable: onSetupPasteable,\n        onSetupPasteableColumn: onSetupPasteableColumn,\n        onSetupMergeable: onSetupMergeable,\n        onSetupUnmergeable: onSetupUnmergeable,\n        resetTargets: resetTargets,\n        targets: function () {\n          return targets.get();\n        }\n      };\n    };\n\n    var addButtons = function (editor, selectionTargets, clipboard) {\n      editor.ui.registry.addMenuButton('table', {\n        tooltip: 'Table',\n        icon: 'table',\n        fetch: function (callback) {\n          return callback('inserttable | cell row column | advtablesort | tableprops deletetable');\n        }\n      });\n      var cmd = function (command) {\n        return function () {\n          return editor.execCommand(command);\n        };\n      };\n      editor.ui.registry.addButton('tableprops', {\n        tooltip: 'Table properties',\n        onAction: cmd('mceTableProps'),\n        icon: 'table',\n        onSetup: selectionTargets.onSetupTable\n      });\n      editor.ui.registry.addButton('tabledelete', {\n        tooltip: 'Delete table',\n        onAction: cmd('mceTableDelete'),\n        icon: 'table-delete-table',\n        onSetup: selectionTargets.onSetupTable\n      });\n      editor.ui.registry.addButton('tablecellprops', {\n        tooltip: 'Cell properties',\n        onAction: cmd('mceTableCellProps'),\n        icon: 'table-cell-properties',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablemergecells', {\n        tooltip: 'Merge cells',\n        onAction: cmd('mceTableMergeCells'),\n        icon: 'table-merge-cells',\n        onSetup: selectionTargets.onSetupMergeable\n      });\n      editor.ui.registry.addButton('tablesplitcells', {\n        tooltip: 'Split cell',\n        onAction: cmd('mceTableSplitCells'),\n        icon: 'table-split-cells',\n        onSetup: selectionTargets.onSetupUnmergeable\n      });\n      editor.ui.registry.addButton('tableinsertrowbefore', {\n        tooltip: 'Insert row before',\n        onAction: cmd('mceTableInsertRowBefore'),\n        icon: 'table-insert-row-above',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tableinsertrowafter', {\n        tooltip: 'Insert row after',\n        onAction: cmd('mceTableInsertRowAfter'),\n        icon: 'table-insert-row-after',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tabledeleterow', {\n        tooltip: 'Delete row',\n        onAction: cmd('mceTableDeleteRow'),\n        icon: 'table-delete-row',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablerowprops', {\n        tooltip: 'Row properties',\n        onAction: cmd('mceTableRowProps'),\n        icon: 'table-row-properties',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tableinsertcolbefore', {\n        tooltip: 'Insert column before',\n        onAction: cmd('mceTableInsertColBefore'),\n        icon: 'table-insert-column-before',\n        onSetup: selectionTargets.onSetupColumn('onFirst')\n      });\n      editor.ui.registry.addButton('tableinsertcolafter', {\n        tooltip: 'Insert column after',\n        onAction: cmd('mceTableInsertColAfter'),\n        icon: 'table-insert-column-after',\n        onSetup: selectionTargets.onSetupColumn('onLast')\n      });\n      editor.ui.registry.addButton('tabledeletecol', {\n        tooltip: 'Delete column',\n        onAction: cmd('mceTableDeleteCol'),\n        icon: 'table-delete-column',\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addButton('tablecutrow', {\n        tooltip: 'Cut row',\n        icon: 'cut-row',\n        onAction: cmd('mceTableCutRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablecopyrow', {\n        tooltip: 'Copy row',\n        icon: 'duplicate-row',\n        onAction: cmd('mceTableCopyRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablepasterowbefore', {\n        tooltip: 'Paste row before',\n        icon: 'paste-row-before',\n        onAction: cmd('mceTablePasteRowBefore'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      editor.ui.registry.addButton('tablepasterowafter', {\n        tooltip: 'Paste row after',\n        icon: 'paste-row-after',\n        onAction: cmd('mceTablePasteRowAfter'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      editor.ui.registry.addButton('tablecutcol', {\n        tooltip: 'Cut column',\n        icon: 'cut-column',\n        onAction: cmd('mceTableCutCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addButton('tablecopycol', {\n        tooltip: 'Copy column',\n        icon: 'duplicate-column',\n        onAction: cmd('mceTableCopyCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addButton('tablepastecolbefore', {\n        tooltip: 'Paste column before',\n        icon: 'paste-column-before',\n        onAction: cmd('mceTablePasteColBefore'),\n        onSetup: selectionTargets.onSetupPasteableColumn(clipboard.getColumns, 'onFirst')\n      });\n      editor.ui.registry.addButton('tablepastecolafter', {\n        tooltip: 'Paste column after',\n        icon: 'paste-column-after',\n        onAction: cmd('mceTablePasteColAfter'),\n        onSetup: selectionTargets.onSetupPasteableColumn(clipboard.getColumns, 'onLast')\n      });\n      editor.ui.registry.addButton('tableinsertdialog', {\n        tooltip: 'Insert table',\n        onAction: cmd('mceInsertTable'),\n        icon: 'table'\n      });\n    };\n    var addToolbars = function (editor) {\n      var isTable = function (table) {\n        return editor.dom.is(table, 'table') && editor.getBody().contains(table);\n      };\n      var toolbar = getToolbar(editor);\n      if (toolbar.length > 0) {\n        editor.ui.registry.addContextToolbar('table', {\n          predicate: isTable,\n          items: toolbar,\n          scope: 'node',\n          position: 'node'\n        });\n      }\n    };\n\n    var addMenuItems = function (editor, selectionTargets, clipboard) {\n      var cmd = function (command) {\n        return function () {\n          return editor.execCommand(command);\n        };\n      };\n      var insertTableAction = function (data) {\n        editor.execCommand('mceInsertTable', false, {\n          rows: data.numRows,\n          columns: data.numColumns\n        });\n      };\n      var tableProperties = {\n        text: 'Table properties',\n        onSetup: selectionTargets.onSetupTable,\n        onAction: cmd('mceTableProps')\n      };\n      var deleteTable = {\n        text: 'Delete table',\n        icon: 'table-delete-table',\n        onSetup: selectionTargets.onSetupTable,\n        onAction: cmd('mceTableDelete')\n      };\n      editor.ui.registry.addMenuItem('tableinsertrowbefore', {\n        text: 'Insert row before',\n        icon: 'table-insert-row-above',\n        onAction: cmd('mceTableInsertRowBefore'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tableinsertrowafter', {\n        text: 'Insert row after',\n        icon: 'table-insert-row-after',\n        onAction: cmd('mceTableInsertRowAfter'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tabledeleterow', {\n        text: 'Delete row',\n        icon: 'table-delete-row',\n        onAction: cmd('mceTableDeleteRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablerowprops', {\n        text: 'Row properties',\n        icon: 'table-row-properties',\n        onAction: cmd('mceTableRowProps'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablecutrow', {\n        text: 'Cut row',\n        icon: 'cut-row',\n        onAction: cmd('mceTableCutRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablecopyrow', {\n        text: 'Copy row',\n        icon: 'duplicate-row',\n        onAction: cmd('mceTableCopyRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablepasterowbefore', {\n        text: 'Paste row before',\n        icon: 'paste-row-before',\n        onAction: cmd('mceTablePasteRowBefore'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      editor.ui.registry.addMenuItem('tablepasterowafter', {\n        text: 'Paste row after',\n        icon: 'paste-row-after',\n        onAction: cmd('mceTablePasteRowAfter'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      var row = {\n        type: 'nestedmenuitem',\n        text: 'Row',\n        getSubmenuItems: function () {\n          return 'tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter';\n        }\n      };\n      editor.ui.registry.addMenuItem('tableinsertcolumnbefore', {\n        text: 'Insert column before',\n        icon: 'table-insert-column-before',\n        onAction: cmd('mceTableInsertColBefore'),\n        onSetup: selectionTargets.onSetupColumn('onFirst')\n      });\n      editor.ui.registry.addMenuItem('tableinsertcolumnafter', {\n        text: 'Insert column after',\n        icon: 'table-insert-column-after',\n        onAction: cmd('mceTableInsertColAfter'),\n        onSetup: selectionTargets.onSetupColumn('onLast')\n      });\n      editor.ui.registry.addMenuItem('tabledeletecolumn', {\n        text: 'Delete column',\n        icon: 'table-delete-column',\n        onAction: cmd('mceTableDeleteCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addMenuItem('tablecutcolumn', {\n        text: 'Cut column',\n        icon: 'cut-column',\n        onAction: cmd('mceTableCutCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addMenuItem('tablecopycolumn', {\n        text: 'Copy column',\n        icon: 'duplicate-column',\n        onAction: cmd('mceTableCopyCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addMenuItem('tablepastecolumnbefore', {\n        text: 'Paste column before',\n        icon: 'paste-column-before',\n        onAction: cmd('mceTablePasteColBefore'),\n        onSetup: selectionTargets.onSetupPasteableColumn(clipboard.getColumns, 'onFirst')\n      });\n      editor.ui.registry.addMenuItem('tablepastecolumnafter', {\n        text: 'Paste column after',\n        icon: 'paste-column-after',\n        onAction: cmd('mceTablePasteColAfter'),\n        onSetup: selectionTargets.onSetupPasteableColumn(clipboard.getColumns, 'onLast')\n      });\n      var column = {\n        type: 'nestedmenuitem',\n        text: 'Column',\n        getSubmenuItems: function () {\n          return 'tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter';\n        }\n      };\n      editor.ui.registry.addMenuItem('tablecellprops', {\n        text: 'Cell properties',\n        icon: 'table-cell-properties',\n        onAction: cmd('mceTableCellProps'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablemergecells', {\n        text: 'Merge cells',\n        icon: 'table-merge-cells',\n        onAction: cmd('mceTableMergeCells'),\n        onSetup: selectionTargets.onSetupMergeable\n      });\n      editor.ui.registry.addMenuItem('tablesplitcells', {\n        text: 'Split cell',\n        icon: 'table-split-cells',\n        onAction: cmd('mceTableSplitCells'),\n        onSetup: selectionTargets.onSetupUnmergeable\n      });\n      var cell = {\n        type: 'nestedmenuitem',\n        text: 'Cell',\n        getSubmenuItems: function () {\n          return 'tablecellprops tablemergecells tablesplitcells';\n        }\n      };\n      if (hasTableGrid(editor) === false) {\n        editor.ui.registry.addMenuItem('inserttable', {\n          text: 'Table',\n          icon: 'table',\n          onAction: cmd('mceInsertTable')\n        });\n      } else {\n        editor.ui.registry.addNestedMenuItem('inserttable', {\n          text: 'Table',\n          icon: 'table',\n          getSubmenuItems: function () {\n            return [{\n                type: 'fancymenuitem',\n                fancytype: 'inserttable',\n                onAction: insertTableAction\n              }];\n          }\n        });\n      }\n      editor.ui.registry.addMenuItem('inserttabledialog', {\n        text: 'Insert table',\n        icon: 'table',\n        onAction: cmd('mceInsertTable')\n      });\n      editor.ui.registry.addMenuItem('tableprops', tableProperties);\n      editor.ui.registry.addMenuItem('deletetable', deleteTable);\n      editor.ui.registry.addNestedMenuItem('row', row);\n      editor.ui.registry.addNestedMenuItem('column', column);\n      editor.ui.registry.addNestedMenuItem('cell', cell);\n      editor.ui.registry.addContextMenu('table', {\n        update: function () {\n          selectionTargets.resetTargets();\n          return selectionTargets.targets().fold(function () {\n            return '';\n          }, function (targets) {\n            if (name(targets.element) === 'caption') {\n              return 'tableprops deletetable';\n            } else {\n              return 'cell row column | advtablesort | tableprops deletetable';\n            }\n          });\n        }\n      });\n    };\n\n    var Plugin = function (editor) {\n      var selections = Selections(function () {\n        return getBody$1(editor);\n      }, function () {\n        return getSelectionStartCellOrCaption(getSelectionStart(editor));\n      }, ephemera.selectedSelector);\n      var selectionTargets = getSelectionTargets(editor, selections);\n      var resizeHandler = getResizeHandler(editor);\n      var cellSelection = CellSelection(editor, resizeHandler.lazyResize, selectionTargets);\n      var actions = TableActions(editor, resizeHandler.lazyWire, selections);\n      var clipboard = Clipboard();\n      registerCommands(editor, actions, cellSelection, selections, clipboard);\n      registerQueryCommands(editor, actions, selections);\n      registerEvents(editor, selections, actions, cellSelection);\n      addMenuItems(editor, selectionTargets, clipboard);\n      addButtons(editor, selectionTargets, clipboard);\n      addToolbars(editor);\n      editor.on('PreInit', function () {\n        editor.serializer.addTempAttr(ephemera.firstSelected);\n        editor.serializer.addTempAttr(ephemera.lastSelected);\n        registerFormats(editor);\n      });\n      if (hasTabNavigation(editor)) {\n        editor.on('keydown', function (e) {\n          handle$1(e, editor, cellSelection);\n        });\n      }\n      editor.on('remove', function () {\n        resizeHandler.destroy();\n      });\n      return getApi(editor, clipboard, resizeHandler, selectionTargets);\n    };\n    function Plugin$1 () {\n      global.add('table', Plugin);\n    }\n\n    Plugin$1();\n\n}());\n"],"sourceRoot":""}