{"version":3,"sources":["/Users/liuyang/projects/ringtone_new/node_modules/tinymce/plugins/searchreplace/index.js","/Users/liuyang/projects/ringtone_new/node_modules/tinymce/plugins/searchreplace/plugin.js"],"names":["eq","call","id","is","getOption","Cell","initial","value","get","set","v","global","tinymce","util","Tools","resolve","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","apply","this","isType","type","x","Array","isPrototypeOf","constructor","name","String","isSimpleType","isString","isArray","isBoolean","isNumber","constant","never","always","punctuation","none","NONE","o","isNone","fold","_s","isSome","getOr","getOrThunk","thunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","some","a","constant_a","self","me","f","elementEq","b","Optional","from","punctuation$1","global$1","nativeSlice","slice","nativePush","push","xs","len","r","eachr","flatten","has","obj","key","isText","window","Function","element","dom","nodeType","fromDom","node","SugarElement","spot","offset","wrap","wrapper","marker","parentNode","parent","insertBefore","before","appendChild","append","api","nodeValue","global$2","isSimpleBoundary","isBlock","schema","getShortEndedElements","nodeName","isContentEditableFalse","getContentEditable","isHidden","getWhiteSpaceElements","toLeaf","cs","childNodes","children","leaf","walk","walkerFn","startNode","callbacks","endNode","skipStart","next","isCefNode","cef","boundary","text","collectTextToBoundary","section","rootNode","forwards","getContentEditableParent","isContentEditableTrueInCef","isBoundary","rootBlock","getParent","walker","prev","fOffset","sOffset","elements","collect","sections","current","finishSection","collectRangeSections","rng","start","startContainer","startOffset","end","endContainer","endOffset","commonAncestorContainer","comparator","copy","scope","selector","base","document","childElementCount","querySelectorAll","all","e","ceTrueNode","match","compareDocumentPosition","Node","DOCUMENT_POSITION_PRECEDING","documentPositionPreceding","sort","fromRng","collapsed","fromNode","createRng","selectNode","find$1","pattern","content","join","matches","acc","wasType","group","groupBy","last","finish","positions","matchIdx","Math","max","min","matchId","results","concat","position","extract","regex","lastIndex","exec","matchedText","matchIndex","matchStart","index","indexOf","matchFinish","find","mark","replacementNode","idx","pos","cloneNode","console","error","setAttribute","rawSet","textNode","splitText","matchNode","getElmIndex","elm","getAttribute","markAllMatches","editor","currentSearchState","inSelection","create","className","getBody","done","selection","bookmark","getBookmark","nodes","select","textSections","fromNodes","getRng","moveToBookmark","findAndMarkInSelection","findAndMark","unwrap","firstChild","removeChild","findSpansByIndex","spans","getElementsByTagName","nodeIndex","moveSelection","forward","searchState","testIndex","count","removeClass","addClass","scrollIntoView","removeNode","remove","isEmpty","find$2","matchCase","wholeWord","escapedText","wordRegex","replace","escapeSearchText","RegExp","newIndex","isMatchSpan","currentMatchIndex","currentIndex","nextIndex","grep","parseInt","keepEditorSelection","setStart","setEnd","data","setRng","global$3","open","subject","dialogApi","clear","isSet","on","undoManager","add","selectedText","trim","getContent","format","updateButtonStates","hasNext","disable","enable","hasPrev","disableAll","toggle","focusButtonIfRequired","browser","isSafari","deviceType","isTouch","focus","reset","doFind","getData","findtext","matchcase","wholewords","inselection","windowManager","alert","notFoundAlert","initialState","spec","title","size","body","items","placeholder","maximized","inputMode","icon","disabled","borderless","buttons","tooltip","align","primary","initialData","replacetext","onChange","details","onAction","updateSearchState","onSubmit","onClose","inline","showDialog","addCommand","register","ui","registry","addMenuItem","shortcut","addButton","shortcuts","register$1","currentState","get$1"],"mappings":"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","file":"295.1819623b.chunk.js","sourcesContent":["// Exports the \"searchreplace\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/searchreplace')\n//   ES2015:\n//     import 'tinymce/plugins/searchreplace'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.8.1 (2021-05-20)\n */\n(function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isBoolean = isSimpleType('boolean');\n    var isNumber = isSimpleType('number');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var punctuationStr = '[!-#%-*,-\\\\/:;?@\\\\[-\\\\]_{}\\xA1\\xAB\\xB7\\xBB\\xBF;\\xB7\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1361-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u3008\\u3009\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30\\u2E31\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uff3f\\uFF5B\\uFF5D\\uFF5F-\\uFF65]';\n\n    var punctuation = constant(punctuationStr);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var punctuation$1 = punctuation;\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativePush = Array.prototype.push;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var groupBy = function (xs, f) {\n      if (xs.length === 0) {\n        return [];\n      } else {\n        var wasType = f(xs[0]);\n        var r = [];\n        var group = [];\n        for (var i = 0, len = xs.length; i < len; i++) {\n          var x = xs[i];\n          var type = f(x);\n          if (type !== wasType) {\n            r.push(group);\n            group = [];\n          }\n          wasType = type;\n          group.push(x);\n        }\n        if (group.length !== 0) {\n          r.push(group);\n        }\n        return r;\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n\n    var hasOwnProperty = Object.hasOwnProperty;\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n\n    var Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isText = isType$1(TEXT);\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_PRECEDING);\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var spot = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n    var leaf = function (element, offset) {\n      var cs = children(element);\n      return cs.length > 0 && offset < cs.length ? spot(cs[offset], 0) : spot(element, offset);\n    };\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var wrap = function (element, wrapper) {\n      before(element, wrapper);\n      append(wrapper, element);\n    };\n\n    var NodeValue = function (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    };\n\n    var api = NodeValue(isText, 'text');\n    var get = function (element) {\n      return api.get(element);\n    };\n\n    var descendants = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var isSimpleBoundary = function (dom, node) {\n      return dom.isBlock(node) || has(dom.schema.getShortEndedElements(), node.nodeName);\n    };\n    var isContentEditableFalse = function (dom, node) {\n      return dom.getContentEditable(node) === 'false';\n    };\n    var isContentEditableTrueInCef = function (dom, node) {\n      return dom.getContentEditable(node) === 'true' && dom.getContentEditableParent(node.parentNode) === 'false';\n    };\n    var isHidden = function (dom, node) {\n      return !dom.isBlock(node) && has(dom.schema.getWhiteSpaceElements(), node.nodeName);\n    };\n    var isBoundary = function (dom, node) {\n      return isSimpleBoundary(dom, node) || isContentEditableFalse(dom, node) || isHidden(dom, node) || isContentEditableTrueInCef(dom, node);\n    };\n    var isText$1 = function (node) {\n      return node.nodeType === 3;\n    };\n    var nuSection = function () {\n      return {\n        sOffset: 0,\n        fOffset: 0,\n        elements: []\n      };\n    };\n    var toLeaf = function (node, offset) {\n      return leaf(SugarElement.fromDom(node), offset);\n    };\n    var walk = function (dom, walkerFn, startNode, callbacks, endNode, skipStart) {\n      if (skipStart === void 0) {\n        skipStart = true;\n      }\n      var next = skipStart ? walkerFn(false) : startNode;\n      while (next) {\n        var isCefNode = isContentEditableFalse(dom, next);\n        if (isCefNode || isHidden(dom, next)) {\n          var stopWalking = isCefNode ? callbacks.cef(next) : callbacks.boundary(next);\n          if (stopWalking) {\n            break;\n          } else {\n            next = walkerFn(true);\n            continue;\n          }\n        } else if (isSimpleBoundary(dom, next)) {\n          if (callbacks.boundary(next)) {\n            break;\n          }\n        } else if (isText$1(next)) {\n          callbacks.text(next);\n        }\n        if (next === endNode) {\n          break;\n        } else {\n          next = walkerFn(false);\n        }\n      }\n    };\n    var collectTextToBoundary = function (dom, section, node, rootNode, forwards) {\n      if (isBoundary(dom, node)) {\n        return;\n      }\n      var rootBlock = dom.getParent(rootNode, dom.isBlock);\n      var walker = new global$2(node, rootBlock);\n      var walkerFn = forwards ? walker.next.bind(walker) : walker.prev.bind(walker);\n      walk(dom, walkerFn, node, {\n        boundary: always,\n        cef: always,\n        text: function (next) {\n          if (forwards) {\n            section.fOffset += next.length;\n          } else {\n            section.sOffset += next.length;\n          }\n          section.elements.push(SugarElement.fromDom(next));\n        }\n      });\n    };\n    var collect = function (dom, rootNode, startNode, endNode, callbacks, skipStart) {\n      if (skipStart === void 0) {\n        skipStart = true;\n      }\n      var walker = new global$2(startNode, rootNode);\n      var sections = [];\n      var current = nuSection();\n      collectTextToBoundary(dom, current, startNode, rootNode, false);\n      var finishSection = function () {\n        if (current.elements.length > 0) {\n          sections.push(current);\n          current = nuSection();\n        }\n        return false;\n      };\n      walk(dom, walker.next.bind(walker), startNode, {\n        boundary: finishSection,\n        cef: function (node) {\n          finishSection();\n          if (callbacks) {\n            sections.push.apply(sections, callbacks.cef(node));\n          }\n          return false;\n        },\n        text: function (next) {\n          current.elements.push(SugarElement.fromDom(next));\n          if (callbacks) {\n            callbacks.text(next, current);\n          }\n        }\n      }, endNode, skipStart);\n      if (endNode) {\n        collectTextToBoundary(dom, current, endNode, rootNode, true);\n      }\n      finishSection();\n      return sections;\n    };\n    var collectRangeSections = function (dom, rng) {\n      var start = toLeaf(rng.startContainer, rng.startOffset);\n      var startNode = start.element.dom;\n      var end = toLeaf(rng.endContainer, rng.endOffset);\n      var endNode = end.element.dom;\n      return collect(dom, rng.commonAncestorContainer, startNode, endNode, {\n        text: function (node, section) {\n          if (node === endNode) {\n            section.fOffset += node.length - end.offset;\n          } else if (node === startNode) {\n            section.sOffset += start.offset;\n          }\n        },\n        cef: function (node) {\n          var sections = bind(descendants(SugarElement.fromDom(node), '*[contenteditable=true]'), function (e) {\n            var ceTrueNode = e.dom;\n            return collect(dom, ceTrueNode, ceTrueNode);\n          });\n          return sort(sections, function (a, b) {\n            return documentPositionPreceding(a.elements[0].dom, b.elements[0].dom) ? 1 : -1;\n          });\n        }\n      }, false);\n    };\n    var fromRng = function (dom, rng) {\n      return rng.collapsed ? [] : collectRangeSections(dom, rng);\n    };\n    var fromNode = function (dom, node) {\n      var rng = dom.createRng();\n      rng.selectNode(node);\n      return fromRng(dom, rng);\n    };\n    var fromNodes = function (dom, nodes) {\n      return bind(nodes, function (node) {\n        return fromNode(dom, node);\n      });\n    };\n\n    var find = function (text, pattern, start, finish) {\n      if (start === void 0) {\n        start = 0;\n      }\n      if (finish === void 0) {\n        finish = text.length;\n      }\n      var regex = pattern.regex;\n      regex.lastIndex = start;\n      var results = [];\n      var match;\n      while (match = regex.exec(text)) {\n        var matchedText = match[pattern.matchIndex];\n        var matchStart = match.index + match[0].indexOf(matchedText);\n        var matchFinish = matchStart + matchedText.length;\n        if (matchFinish > finish) {\n          break;\n        }\n        results.push({\n          start: matchStart,\n          finish: matchFinish\n        });\n        regex.lastIndex = matchFinish;\n      }\n      return results;\n    };\n    var extract = function (elements, matches) {\n      var nodePositions = foldl(elements, function (acc, element) {\n        var content = get(element);\n        var start = acc.last;\n        var finish = start + content.length;\n        var positions = bind(matches, function (match, matchIdx) {\n          if (match.start < finish && match.finish > start) {\n            return [{\n                element: element,\n                start: Math.max(start, match.start) - start,\n                finish: Math.min(finish, match.finish) - start,\n                matchId: matchIdx\n              }];\n          } else {\n            return [];\n          }\n        });\n        return {\n          results: acc.results.concat(positions),\n          last: finish\n        };\n      }, {\n        results: [],\n        last: 0\n      }).results;\n      return groupBy(nodePositions, function (position) {\n        return position.matchId;\n      });\n    };\n\n    var find$1 = function (pattern, sections) {\n      return bind(sections, function (section) {\n        var elements = section.elements;\n        var content = map(elements, get).join('');\n        var positions = find(content, pattern, section.sOffset, content.length - section.fOffset);\n        return extract(elements, positions);\n      });\n    };\n    var mark = function (matches, replacementNode) {\n      eachr(matches, function (match, idx) {\n        eachr(match, function (pos) {\n          var wrapper = SugarElement.fromDom(replacementNode.cloneNode(false));\n          set(wrapper, 'data-mce-index', idx);\n          var textNode = pos.element.dom;\n          if (textNode.length === pos.finish && pos.start === 0) {\n            wrap(pos.element, wrapper);\n          } else {\n            if (textNode.length !== pos.finish) {\n              textNode.splitText(pos.finish);\n            }\n            var matchNode = textNode.splitText(pos.start);\n            wrap(SugarElement.fromDom(matchNode), wrapper);\n          }\n        });\n      });\n    };\n    var findAndMark = function (dom, pattern, node, replacementNode) {\n      var textSections = fromNode(dom, node);\n      var matches = find$1(pattern, textSections);\n      mark(matches, replacementNode);\n      return matches.length;\n    };\n    var findAndMarkInSelection = function (dom, pattern, selection, replacementNode) {\n      var bookmark = selection.getBookmark();\n      var nodes = dom.select('td[data-mce-selected],th[data-mce-selected]');\n      var textSections = nodes.length > 0 ? fromNodes(dom, nodes) : fromRng(dom, selection.getRng());\n      var matches = find$1(pattern, textSections);\n      mark(matches, replacementNode);\n      selection.moveToBookmark(bookmark);\n      return matches.length;\n    };\n\n    var getElmIndex = function (elm) {\n      var value = elm.getAttribute('data-mce-index');\n      if (typeof value === 'number') {\n        return '' + value;\n      }\n      return value;\n    };\n    var markAllMatches = function (editor, currentSearchState, pattern, inSelection) {\n      var marker = editor.dom.create('span', { 'data-mce-bogus': 1 });\n      marker.className = 'mce-match-marker';\n      var node = editor.getBody();\n      done(editor, currentSearchState, false);\n      if (inSelection) {\n        return findAndMarkInSelection(editor.dom, pattern, editor.selection, marker);\n      } else {\n        return findAndMark(editor.dom, pattern, node, marker);\n      }\n    };\n    var unwrap = function (node) {\n      var parentNode = node.parentNode;\n      if (node.firstChild) {\n        parentNode.insertBefore(node.firstChild, node);\n      }\n      node.parentNode.removeChild(node);\n    };\n    var findSpansByIndex = function (editor, index) {\n      var spans = [];\n      var nodes = global$1.toArray(editor.getBody().getElementsByTagName('span'));\n      if (nodes.length) {\n        for (var i = 0; i < nodes.length; i++) {\n          var nodeIndex = getElmIndex(nodes[i]);\n          if (nodeIndex === null || !nodeIndex.length) {\n            continue;\n          }\n          if (nodeIndex === index.toString()) {\n            spans.push(nodes[i]);\n          }\n        }\n      }\n      return spans;\n    };\n    var moveSelection = function (editor, currentSearchState, forward) {\n      var searchState = currentSearchState.get();\n      var testIndex = searchState.index;\n      var dom = editor.dom;\n      forward = forward !== false;\n      if (forward) {\n        if (testIndex + 1 === searchState.count) {\n          testIndex = 0;\n        } else {\n          testIndex++;\n        }\n      } else {\n        if (testIndex - 1 === -1) {\n          testIndex = searchState.count - 1;\n        } else {\n          testIndex--;\n        }\n      }\n      dom.removeClass(findSpansByIndex(editor, searchState.index), 'mce-match-marker-selected');\n      var spans = findSpansByIndex(editor, testIndex);\n      if (spans.length) {\n        dom.addClass(findSpansByIndex(editor, testIndex), 'mce-match-marker-selected');\n        editor.selection.scrollIntoView(spans[0]);\n        return testIndex;\n      }\n      return -1;\n    };\n    var removeNode = function (dom, node) {\n      var parent = node.parentNode;\n      dom.remove(node);\n      if (dom.isEmpty(parent)) {\n        dom.remove(parent);\n      }\n    };\n    var escapeSearchText = function (text, wholeWord) {\n      var escapedText = text.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&').replace(/\\s/g, '[^\\\\S\\\\r\\\\n\\\\uFEFF]');\n      var wordRegex = '(' + escapedText + ')';\n      return wholeWord ? '(?:^|\\\\s|' + punctuation$1() + ')' + wordRegex + ('(?=$|\\\\s|' + punctuation$1() + ')') : wordRegex;\n    };\n    var find$2 = function (editor, currentSearchState, text, matchCase, wholeWord, inSelection) {\n      var escapedText = escapeSearchText(text, wholeWord);\n      var pattern = {\n        regex: new RegExp(escapedText, matchCase ? 'g' : 'gi'),\n        matchIndex: 1\n      };\n      var count = markAllMatches(editor, currentSearchState, pattern, inSelection);\n      if (count) {\n        var newIndex = moveSelection(editor, currentSearchState, true);\n        currentSearchState.set({\n          index: newIndex,\n          count: count,\n          text: text,\n          matchCase: matchCase,\n          wholeWord: wholeWord,\n          inSelection: inSelection\n        });\n      }\n      return count;\n    };\n    var next = function (editor, currentSearchState) {\n      var index = moveSelection(editor, currentSearchState, true);\n      currentSearchState.set(__assign(__assign({}, currentSearchState.get()), { index: index }));\n    };\n    var prev = function (editor, currentSearchState) {\n      var index = moveSelection(editor, currentSearchState, false);\n      currentSearchState.set(__assign(__assign({}, currentSearchState.get()), { index: index }));\n    };\n    var isMatchSpan = function (node) {\n      var matchIndex = getElmIndex(node);\n      return matchIndex !== null && matchIndex.length > 0;\n    };\n    var replace = function (editor, currentSearchState, text, forward, all) {\n      var searchState = currentSearchState.get();\n      var currentIndex = searchState.index;\n      var currentMatchIndex, nextIndex = currentIndex;\n      forward = forward !== false;\n      var node = editor.getBody();\n      var nodes = global$1.grep(global$1.toArray(node.getElementsByTagName('span')), isMatchSpan);\n      for (var i = 0; i < nodes.length; i++) {\n        var nodeIndex = getElmIndex(nodes[i]);\n        var matchIndex = currentMatchIndex = parseInt(nodeIndex, 10);\n        if (all || matchIndex === searchState.index) {\n          if (text.length) {\n            nodes[i].firstChild.nodeValue = text;\n            unwrap(nodes[i]);\n          } else {\n            removeNode(editor.dom, nodes[i]);\n          }\n          while (nodes[++i]) {\n            matchIndex = parseInt(getElmIndex(nodes[i]), 10);\n            if (matchIndex === currentMatchIndex) {\n              removeNode(editor.dom, nodes[i]);\n            } else {\n              i--;\n              break;\n            }\n          }\n          if (forward) {\n            nextIndex--;\n          }\n        } else if (currentMatchIndex > currentIndex) {\n          nodes[i].setAttribute('data-mce-index', String(currentMatchIndex - 1));\n        }\n      }\n      currentSearchState.set(__assign(__assign({}, searchState), {\n        count: all ? 0 : searchState.count - 1,\n        index: nextIndex\n      }));\n      if (forward) {\n        next(editor, currentSearchState);\n      } else {\n        prev(editor, currentSearchState);\n      }\n      return !all && currentSearchState.get().count > 0;\n    };\n    var done = function (editor, currentSearchState, keepEditorSelection) {\n      var i, startContainer, endContainer;\n      var searchState = currentSearchState.get();\n      var nodes = global$1.toArray(editor.getBody().getElementsByTagName('span'));\n      for (i = 0; i < nodes.length; i++) {\n        var nodeIndex = getElmIndex(nodes[i]);\n        if (nodeIndex !== null && nodeIndex.length) {\n          if (nodeIndex === searchState.index.toString()) {\n            if (!startContainer) {\n              startContainer = nodes[i].firstChild;\n            }\n            endContainer = nodes[i].firstChild;\n          }\n          unwrap(nodes[i]);\n        }\n      }\n      currentSearchState.set(__assign(__assign({}, searchState), {\n        index: -1,\n        count: 0,\n        text: ''\n      }));\n      if (startContainer && endContainer) {\n        var rng = editor.dom.createRng();\n        rng.setStart(startContainer, 0);\n        rng.setEnd(endContainer, endContainer.data.length);\n        if (keepEditorSelection !== false) {\n          editor.selection.setRng(rng);\n        }\n        return rng;\n      }\n    };\n    var hasNext = function (editor, currentSearchState) {\n      return currentSearchState.get().count > 1;\n    };\n    var hasPrev = function (editor, currentSearchState) {\n      return currentSearchState.get().count > 1;\n    };\n\n    var get$1 = function (editor, currentState) {\n      var done$1 = function (keepEditorSelection) {\n        return done(editor, currentState, keepEditorSelection);\n      };\n      var find = function (text, matchCase, wholeWord, inSelection) {\n        if (inSelection === void 0) {\n          inSelection = false;\n        }\n        return find$2(editor, currentState, text, matchCase, wholeWord, inSelection);\n      };\n      var next$1 = function () {\n        return next(editor, currentState);\n      };\n      var prev$1 = function () {\n        return prev(editor, currentState);\n      };\n      var replace$1 = function (text, forward, all) {\n        return replace(editor, currentState, text, forward, all);\n      };\n      return {\n        done: done$1,\n        find: find,\n        next: next$1,\n        prev: prev$1,\n        replace: replace$1\n      };\n    };\n\n    var value = function () {\n      var subject = Cell(Optional.none());\n      var clear = function () {\n        return subject.set(Optional.none());\n      };\n      var set = function (s) {\n        return subject.set(Optional.some(s));\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var open = function (editor, currentSearchState) {\n      var dialogApi = value();\n      editor.undoManager.add();\n      var selectedText = global$1.trim(editor.selection.getContent({ format: 'text' }));\n      var updateButtonStates = function (api) {\n        var updateNext = hasNext(editor, currentSearchState) ? api.enable : api.disable;\n        updateNext('next');\n        var updatePrev = hasPrev(editor, currentSearchState) ? api.enable : api.disable;\n        updatePrev('prev');\n      };\n      var updateSearchState = function (api) {\n        var data = api.getData();\n        var current = currentSearchState.get();\n        currentSearchState.set(__assign(__assign({}, current), {\n          matchCase: data.matchcase,\n          wholeWord: data.wholewords,\n          inSelection: data.inselection\n        }));\n      };\n      var disableAll = function (api, disable) {\n        var buttons = [\n          'replace',\n          'replaceall',\n          'prev',\n          'next'\n        ];\n        var toggle = disable ? api.disable : api.enable;\n        each(buttons, toggle);\n      };\n      var notFoundAlert = function (api) {\n        editor.windowManager.alert('Could not find the specified string.', function () {\n          api.focus('findtext');\n        });\n      };\n      var focusButtonIfRequired = function (api, name) {\n        if (global$3.browser.isSafari() && global$3.deviceType.isTouch() && (name === 'find' || name === 'replace' || name === 'replaceall')) {\n          api.focus(name);\n        }\n      };\n      var reset = function (api) {\n        done(editor, currentSearchState, false);\n        disableAll(api, true);\n        updateButtonStates(api);\n      };\n      var doFind = function (api) {\n        var data = api.getData();\n        var last = currentSearchState.get();\n        if (!data.findtext.length) {\n          reset(api);\n          return;\n        }\n        if (last.text === data.findtext && last.matchCase === data.matchcase && last.wholeWord === data.wholewords) {\n          next(editor, currentSearchState);\n        } else {\n          var count = find$2(editor, currentSearchState, data.findtext, data.matchcase, data.wholewords, data.inselection);\n          if (count <= 0) {\n            notFoundAlert(api);\n          }\n          disableAll(api, count === 0);\n        }\n        updateButtonStates(api);\n      };\n      var initialState = currentSearchState.get();\n      var initialData = {\n        findtext: selectedText,\n        replacetext: '',\n        wholewords: initialState.wholeWord,\n        matchcase: initialState.matchCase,\n        inselection: initialState.inSelection\n      };\n      var spec = {\n        title: 'Find and Replace',\n        size: 'normal',\n        body: {\n          type: 'panel',\n          items: [\n            {\n              type: 'bar',\n              items: [\n                {\n                  type: 'input',\n                  name: 'findtext',\n                  placeholder: 'Find',\n                  maximized: true,\n                  inputMode: 'search'\n                },\n                {\n                  type: 'button',\n                  name: 'prev',\n                  text: 'Previous',\n                  icon: 'action-prev',\n                  disabled: true,\n                  borderless: true\n                },\n                {\n                  type: 'button',\n                  name: 'next',\n                  text: 'Next',\n                  icon: 'action-next',\n                  disabled: true,\n                  borderless: true\n                }\n              ]\n            },\n            {\n              type: 'input',\n              name: 'replacetext',\n              placeholder: 'Replace with',\n              inputMode: 'search'\n            }\n          ]\n        },\n        buttons: [\n          {\n            type: 'menu',\n            name: 'options',\n            icon: 'preferences',\n            tooltip: 'Preferences',\n            align: 'start',\n            items: [\n              {\n                type: 'togglemenuitem',\n                name: 'matchcase',\n                text: 'Match case'\n              },\n              {\n                type: 'togglemenuitem',\n                name: 'wholewords',\n                text: 'Find whole words only'\n              },\n              {\n                type: 'togglemenuitem',\n                name: 'inselection',\n                text: 'Find in selection'\n              }\n            ]\n          },\n          {\n            type: 'custom',\n            name: 'find',\n            text: 'Find',\n            primary: true\n          },\n          {\n            type: 'custom',\n            name: 'replace',\n            text: 'Replace',\n            disabled: true\n          },\n          {\n            type: 'custom',\n            name: 'replaceall',\n            text: 'Replace all',\n            disabled: true\n          }\n        ],\n        initialData: initialData,\n        onChange: function (api, details) {\n          if (details.name === 'findtext' && currentSearchState.get().count > 0) {\n            reset(api);\n          }\n        },\n        onAction: function (api, details) {\n          var data = api.getData();\n          switch (details.name) {\n          case 'find':\n            doFind(api);\n            break;\n          case 'replace':\n            if (!replace(editor, currentSearchState, data.replacetext)) {\n              reset(api);\n            } else {\n              updateButtonStates(api);\n            }\n            break;\n          case 'replaceall':\n            replace(editor, currentSearchState, data.replacetext, true, true);\n            reset(api);\n            break;\n          case 'prev':\n            prev(editor, currentSearchState);\n            updateButtonStates(api);\n            break;\n          case 'next':\n            next(editor, currentSearchState);\n            updateButtonStates(api);\n            break;\n          case 'matchcase':\n          case 'wholewords':\n          case 'inselection':\n            updateSearchState(api);\n            reset(api);\n            break;\n          }\n          focusButtonIfRequired(api, details.name);\n        },\n        onSubmit: function (api) {\n          doFind(api);\n          focusButtonIfRequired(api, 'find');\n        },\n        onClose: function () {\n          editor.focus();\n          done(editor, currentSearchState);\n          editor.undoManager.add();\n        }\n      };\n      dialogApi.set(editor.windowManager.open(spec, { inline: 'toolbar' }));\n    };\n\n    var register = function (editor, currentSearchState) {\n      editor.addCommand('SearchReplace', function () {\n        open(editor, currentSearchState);\n      });\n    };\n\n    var showDialog = function (editor, currentSearchState) {\n      return function () {\n        open(editor, currentSearchState);\n      };\n    };\n    var register$1 = function (editor, currentSearchState) {\n      editor.ui.registry.addMenuItem('searchreplace', {\n        text: 'Find and replace...',\n        shortcut: 'Meta+F',\n        onAction: showDialog(editor, currentSearchState),\n        icon: 'search'\n      });\n      editor.ui.registry.addButton('searchreplace', {\n        tooltip: 'Find and replace',\n        onAction: showDialog(editor, currentSearchState),\n        icon: 'search'\n      });\n      editor.shortcuts.add('Meta+F', '', showDialog(editor, currentSearchState));\n    };\n\n    function Plugin () {\n      global.add('searchreplace', function (editor) {\n        var currentSearchState = Cell({\n          index: -1,\n          count: 0,\n          text: '',\n          matchCase: false,\n          wholeWord: false,\n          inSelection: false\n        });\n        register(editor, currentSearchState);\n        register$1(editor, currentSearchState);\n        return get$1(editor, currentSearchState);\n      });\n    }\n\n    Plugin();\n\n}());\n"],"sourceRoot":""}